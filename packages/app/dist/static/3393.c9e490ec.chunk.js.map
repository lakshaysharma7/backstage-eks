{"version":3,"sources":["webpack://app/../node_modules/@backstage/plugin-techdocs/dist/esm/TechDocsCustomHome-4046b545.esm.js"],"names":[],"mappings":"qbAwCA,KAAM,GAAS,CACb,UAAS,IACT,aAAY,GACd,EACM,EAAc,CAAC,CACnB,SACA,WACA,WACI,CAOJ,KAAM,GAAU,GANE,KAAW,CAC3B,eAAgB,CACd,aAAc,UACX,EAAO,SAAW,EAAO,SAAW,CAAC,CAC1C,CACF,CAAC,EACyB,EACpB,CAAE,QAAS,EAAkB,iBAAkB,SAAmB,EAClE,EAAQ,EAAO,EAAO,WACtB,EAAgB,EAAS,OAAQ,GACjC,EAAO,kBAAoB,cACzB,EACK,GAEF,EAAc,CAAM,EAEtB,MAAO,GAAO,iBAAoB,YAAc,EAAO,gBAAgB,CAAM,CACrF,EACD,MAAuB,iBAAoB,WAAgB,KAAsB,gBAAoB,KAAe,CAClH,MAAO,EAAO,MACd,YAAa,EAAO,WACtB,EAAG,IAAU,EAAoB,gBAAoB,KAAe,KAAM,2CAA2C,EAAI,IAAI,EAAmB,gBAAoB,MAAO,CACzK,UAAW,EAAQ,cACrB,EAAmB,gBAAoB,EAAO,CAC5C,cAAe,wBACf,SAAU,CACZ,CAAC,CAAC,CAAC,CACL,EACM,EAAsB,GAAU,CACpC,KAAM,CAAE,cAAe,EACjB,CAAC,EAAa,GAAkB,eAAS,CAAC,EAC1C,EAAa,SAAO,IAAa,EACjC,CACJ,MAAO,EACP,UACA,SACE,cAAS,SAcJ,MAbgB,GAAW,YAAY,CAC5C,OAAQ,CACN,iDAAkD,IACpD,EACA,OAAQ,CACN,aACA,OACA,WACA,YACA,aACA,WACF,CACF,CAAC,GACe,MAAM,OAAQ,GAAW,CACvC,GAAI,GACJ,MAAO,CAAC,CAAG,IAAK,EAAO,SAAS,cAAgB,MAAgB,EAAG,6BACrE,CAAC,CACF,EACK,EAAmB,EAAW,GACpC,MAAI,GACqB,gBAAoB,IAAqB,KAAsB,gBAAoB,KAAS,KAAsB,gBAAoB,KAAU,IAAI,CAAC,CAAC,EAE3K,EACqB,gBAAoB,IAAqB,KAAsB,gBAAoB,KAAS,KAAsB,gBAAoB,KAAc,CACzK,SAAU,QACV,MAAO,yCACT,EAAmB,gBAAoB,KAAa,CAClD,SAAU,OACV,KAAM,EAAM,SAAS,CACvB,CAAC,CAAC,CAAC,CAAC,EAEiB,gBAAoB,IAAqB,KAAsB,gBAAoB,KAAY,CACpH,cAAe,EACf,SAAW,GAAU,EAAe,CAAK,EACzC,KAAM,EAAW,IAAI,CAAC,CAAE,SAAS,IAAW,EAC1C,GAAI,EAAM,SAAS,EACnB,OACF,EAAE,CACJ,CAAC,EAAmB,gBAAoB,KAAS,CAC/C,cAAe,kBACjB,EAAG,EAAiB,OAAO,IAAI,CAAC,EAAQ,IAA0B,gBAAoB,EAAa,CACjG,IAAK,EACL,SACA,SAAY,GAAsB,CAAC,EACnC,OACF,CAAC,CAAC,CAAC,CAAC,CACN,C","file":"static/3393.c9e490ec.chunk.js","sourcesContent":["import React, { useState } from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport { makeStyles } from '@material-ui/core';\nimport { catalogApiRef, CATALOG_FILTER_EXISTS, useEntityOwnership } from '@backstage/plugin-catalog-react';\nimport { T as TechDocsPageWrapper, D as DocsTable, a as DocsCardGrid } from './index-cb910cad.esm.js';\nimport { Content, Progress, WarningPanel, CodeSnippet, HeaderTabs, ContentHeader, SupportButton } from '@backstage/core-components';\nimport { useApi } from '@backstage/core-plugin-api';\nimport '@backstage/errors';\nimport 'event-source-polyfill';\nimport 'react-router-dom';\nimport '@backstage/plugin-techdocs-react';\nimport 'jss';\nimport '@material-ui/styles';\nimport 'react-text-truncate';\nimport '@backstage/plugin-search-react';\nimport '@material-ui/icons/Search';\nimport '@material-ui/lab/Autocomplete';\nimport 'react-router';\nimport 'react-use/lib/useDebounce';\nimport '@material-ui/lab';\nimport '@material-ui/icons/Close';\nimport 'react-use/lib/useAsyncRetry';\nimport '@material-ui/core/styles';\nimport '@backstage/integration-react';\nimport '@backstage/integration';\nimport '@material-ui/icons/FeedbackOutlined';\nimport 'react-dom';\nimport 'git-url-parse';\nimport '@material-ui/icons/Menu';\nimport 'dompurify';\nimport 'react-helmet';\nimport '@material-ui/icons/Code';\nimport '@backstage/catalog-model';\nimport 'react-use/lib/useCopyToClipboard';\nimport 'lodash';\nimport '@material-ui/icons/Share';\nimport '@material-ui/icons/Star';\nimport '@material-ui/icons/StarBorder';\nimport '@backstage/core-app-api';\n\nconst panels = {\n  DocsTable,\n  DocsCardGrid\n};\nconst CustomPanel = ({\n  config,\n  entities,\n  index\n}) => {\n  const useStyles = makeStyles({\n    panelContainer: {\n      marginBottom: \"2rem\",\n      ...config.panelCSS ? config.panelCSS : {}\n    }\n  });\n  const classes = useStyles();\n  const { loading: loadingOwnership, isOwnedEntity } = useEntityOwnership();\n  const Panel = panels[config.panelType];\n  const shownEntities = entities.filter((entity) => {\n    if (config.filterPredicate === \"ownedByUser\") {\n      if (loadingOwnership) {\n        return false;\n      }\n      return isOwnedEntity(entity);\n    }\n    return typeof config.filterPredicate === \"function\" && config.filterPredicate(entity);\n  });\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(ContentHeader, {\n    title: config.title,\n    description: config.description\n  }, index === 0 ? /* @__PURE__ */ React.createElement(SupportButton, null, \"Discover documentation in your ecosystem.\") : null), /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.panelContainer\n  }, /* @__PURE__ */ React.createElement(Panel, {\n    \"data-testid\": \"techdocs-custom-panel\",\n    entities: shownEntities\n  })));\n};\nconst TechDocsCustomHome = (props) => {\n  const { tabsConfig } = props;\n  const [selectedTab, setSelectedTab] = useState(0);\n  const catalogApi = useApi(catalogApiRef);\n  const {\n    value: entities,\n    loading,\n    error\n  } = useAsync(async () => {\n    const response = await catalogApi.getEntities({\n      filter: {\n        \"metadata.annotations.backstage.io/techdocs-ref\": CATALOG_FILTER_EXISTS\n      },\n      fields: [\n        \"apiVersion\",\n        \"kind\",\n        \"metadata\",\n        \"relations\",\n        \"spec.owner\",\n        \"spec.type\"\n      ]\n    });\n    return response.items.filter((entity) => {\n      var _a;\n      return !!((_a = entity.metadata.annotations) == null ? void 0 : _a[\"backstage.io/techdocs-ref\"]);\n    });\n  });\n  const currentTabConfig = tabsConfig[selectedTab];\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(TechDocsPageWrapper, null, /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(Progress, null)));\n  }\n  if (error) {\n    return /* @__PURE__ */ React.createElement(TechDocsPageWrapper, null, /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(WarningPanel, {\n      severity: \"error\",\n      title: \"Could not load available documentation.\"\n    }, /* @__PURE__ */ React.createElement(CodeSnippet, {\n      language: \"text\",\n      text: error.toString()\n    }))));\n  }\n  return /* @__PURE__ */ React.createElement(TechDocsPageWrapper, null, /* @__PURE__ */ React.createElement(HeaderTabs, {\n    selectedIndex: selectedTab,\n    onChange: (index) => setSelectedTab(index),\n    tabs: tabsConfig.map(({ label }, index) => ({\n      id: index.toString(),\n      label\n    }))\n  }), /* @__PURE__ */ React.createElement(Content, {\n    \"data-testid\": \"techdocs-content\"\n  }, currentTabConfig.panels.map((config, index) => /* @__PURE__ */ React.createElement(CustomPanel, {\n    key: index,\n    config,\n    entities: !!entities ? entities : [],\n    index\n  }))));\n};\n\nexport { TechDocsCustomHome };\n//# sourceMappingURL=TechDocsCustomHome-4046b545.esm.js.map\n"],"sourceRoot":""}