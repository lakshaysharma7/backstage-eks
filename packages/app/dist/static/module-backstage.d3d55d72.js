"use strict";(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1850],{6977:function(Lt,c,t){t.d(c,{r:function(){return H}});var e=t(48377),n=t(30705),p=t(56563),a=t(2784),o=t(77277),m=t(49558),u=t(10289),v=t(62833),d=t(43642),y=t(80079),h=t(90941),M=t(32915),L=t(40562),$=t(21853),J=t(60744),g=t(66569),S=t(30254),E=t(13384),I=t(15933),D=t(58838),T=t(86737),i=t(4989),O=t(44407),W=t(18628),Ce=t(84219),$e=t(98685),Qe=t(39781),it=t(86287),lt=t(98192),qe=t(15222),$t=t(41547),Ot=t(87561);const pn=[(0,n.ni)({api:n.NW,deps:{configApi:n.Ds},factory:({configApi:re})=>e.pM.compile(`${re.getString("backend.baseUrl")}/api/{{ pluginId }}`)}),(0,n.ni)({api:n.$v,deps:{},factory:()=>new e.CX}),(0,n.ni)({api:n.v_,deps:{},factory:()=>new e.gN}),(0,n.ni)({api:n.VE,deps:{alertApi:n.$v},factory:({alertApi:re})=>{const Pe=new e.KN(re,new e.gr);return e.Jv.forward(Pe,{hidden:!1}),Pe}}),(0,n.ni)({api:n.E6,deps:{errorApi:n.VE},factory:({errorApi:re})=>e.CJ.create({errorApi:re})}),(0,n.ni)({api:n.gP,deps:{configApi:n.Ds,identityApi:n.$4,discoveryApi:n.NW},factory:({configApi:re,identityApi:Pe,discoveryApi:ae})=>(0,e.jJ)({middleware:[e.II.resolvePluginProtocol({discoveryApi:ae}),e.II.injectIdentityAuth({identityApi:Pe,config:re})]})}),(0,n.ni)({api:n.ZM,deps:{},factory:()=>new e.YM}),(0,n.ni)({api:n.Kp,deps:{discoveryApi:n.NW,oauthRequestApi:n.ZM,configApi:n.Ds},factory:({discoveryApi:re,oauthRequestApi:Pe,configApi:ae})=>e.eE.create({discoveryApi:re,oauthRequestApi:Pe,environment:ae.getOptionalString("auth.environment")})}),(0,n.ni)({api:n.p_,deps:{discoveryApi:n.NW,oauthRequestApi:n.ZM,configApi:n.Ds},factory:({discoveryApi:re,oauthRequestApi:Pe,configApi:ae})=>e._i.create({discoveryApi:re,oauthRequestApi:Pe,environment:ae.getOptionalString("auth.environment")})}),(0,n.ni)({api:n.F4,deps:{discoveryApi:n.NW,oauthRequestApi:n.ZM,configApi:n.Ds},factory:({discoveryApi:re,oauthRequestApi:Pe,configApi:ae})=>e.Td.create({discoveryApi:re,oauthRequestApi:Pe,defaultScopes:["read:user"],environment:ae.getOptionalString("auth.environment")})}),(0,n.ni)({api:n.D,deps:{discoveryApi:n.NW,oauthRequestApi:n.ZM,configApi:n.Ds},factory:({discoveryApi:re,oauthRequestApi:Pe,configApi:ae})=>e.sn.create({discoveryApi:re,oauthRequestApi:Pe,environment:ae.getOptionalString("auth.environment")})}),(0,n.ni)({api:n.ux,deps:{discoveryApi:n.NW,oauthRequestApi:n.ZM,configApi:n.Ds},factory:({discoveryApi:re,oauthRequestApi:Pe,configApi:ae})=>e.aq.create({discoveryApi:re,oauthRequestApi:Pe,environment:ae.getOptionalString("auth.environment")})}),(0,n.ni)({api:n.gW,deps:{discoveryApi:n.NW,oauthRequestApi:n.ZM,configApi:n.Ds},factory:({discoveryApi:re,oauthRequestApi:Pe,configApi:ae})=>e.$_.create({discoveryApi:re,oauthRequestApi:Pe,environment:ae.getOptionalString("auth.environment")})}),(0,n.ni)({api:n.bq,deps:{discoveryApi:n.NW,oauthRequestApi:n.ZM,configApi:n.Ds},factory:({discoveryApi:re,oauthRequestApi:Pe,configApi:ae})=>e.xP.create({discoveryApi:re,oauthRequestApi:Pe,defaultScopes:["team"],environment:ae.getOptionalString("auth.environment")})}),(0,n.ni)({api:n.uB,deps:{discoveryApi:n.NW,oauthRequestApi:n.ZM,configApi:n.Ds},factory:({discoveryApi:re,oauthRequestApi:Pe,configApi:ae})=>e.uC.create({discoveryApi:re,oauthRequestApi:Pe,environment:ae.getOptionalString("auth.environment")})}),(0,n.ni)({api:p.RV,deps:{discovery:n.NW,identity:n.$4,config:n.Ds},factory:({config:re,discovery:Pe,identity:ae})=>p.iM.create({config:re,discovery:Pe,identity:ae})})];function _n({children:re}){return(0,u.GV)()?a.createElement(a.Fragment,null,re):a.createElement(u.VA,null,re)}const U=()=>a.createElement(m.mf,{status:"404",statusMessage:"PAGE NOT FOUND"}),Re=({step:re,error:Pe})=>{let ae="";return re==="load-config"?ae=`The configuration failed to load, someone should have a look at this error: ${Pe.message}`:re==="load-chunk"&&(ae=`Lazy loaded chunk failed to load, try to reload the page: ${Pe.message}`),a.createElement(_n,null,a.createElement(m.mf,{status:"501",statusMessage:ae}))},w=({error:re,resetError:Pe,plugin:ae})=>a.createElement(m.yu,{title:`Error in ${ae==null?void 0:ae.getId()}`,defaultExpanded:!0,error:re},a.createElement(o.Z,{variant:"outlined",onClick:Pe},"Retry")),Ie={Progress:m.Ex,Router:v.VK,NotFoundErrorPage:U,BootErrorPage:Re,ErrorBoundaryFallback:w},fe={brokenImage:y.Z,catalog:W.Z,scaffolder:M.Z,techdocs:L.Z,search:$.Z,chat:J.Z,dashboard:g.Z,docs:S.Z,email:E.Z,github:D.Z,group:Ce.Z,help:T.Z,"kind:api":I.Z,"kind:component":O.Z,"kind:domain":d.Z,"kind:group":Ce.Z,"kind:location":i.Z,"kind:system":h.Z,"kind:user":$e.Z,user:$e.Z,warning:Qe.Z},A=[{id:"light",title:"Light Theme",variant:"light",icon:a.createElement(qe.Z,null),Provider:({children:re})=>a.createElement($t.Z,{theme:it.Wb},a.createElement(Ot.ZP,null,re))},{id:"dark",title:"Dark Theme",variant:"dark",icon:a.createElement(lt.Z,null),Provider:({children:re})=>a.createElement($t.Z,{theme:it.$_},a.createElement(Ot.ZP,null,re))}];function H(re){var Pe,ae,Te;return(0,e.bg)({...re,apis:(Pe=re==null?void 0:re.apis)!=null?Pe:[],bindRoutes:re==null?void 0:re.bindRoutes,components:{...Ie,...re==null?void 0:re.components},configLoader:re==null?void 0:re.configLoader,defaultApis:pn,icons:{...fe,...re==null?void 0:re.icons},plugins:(ae=re==null?void 0:re.plugins)!=null?ae:[],themes:(Te=re==null?void 0:re.themes)!=null?Te:A})}},88285:function(Lt,c,t){t.d(c,{MS:function(){return m},mk:function(){return u},n3:function(){return o}});var e=t(34520),n=t(32272),p=t(96279),a=t.n(p);const o=Symbol.for("CATALOG_FILTER_EXISTS_0e15b590c0b343a2bae3e787e84c2111");class m{constructor(d){this.discoveryApi=d.discoveryApi,this.fetchApi=d.fetchApi||{fetch:a()}}async getEntityAncestors(d,y){const{kind:h,namespace:M,name:L}=(0,e.of)(d.entityRef);return await this.requestRequired("GET",`/entities/by-name/${encodeURIComponent(h)}/${encodeURIComponent(M)}/${encodeURIComponent(L)}/ancestry`,y)}async getLocationById(d,y){return await this.requestOptional("GET",`/locations/${encodeURIComponent(d)}`,y)}async getEntities(d,y){const{filter:h=[],fields:M=[],offset:L,limit:$,after:J}=d!=null?d:{},g=[];for(const D of[h].flat()){const T=[];for(const[i,O]of Object.entries(D))for(const W of[O].flat())W===o?T.push(encodeURIComponent(i)):typeof W=="string"&&T.push(`${encodeURIComponent(i)}=${encodeURIComponent(W)}`);T.length&&g.push(`filter=${T.join(",")}`)}M.length&&g.push(`fields=${M.map(encodeURIComponent).join(",")}`),L!==void 0&&g.push(`offset=${L}`),$!==void 0&&g.push(`limit=${$}`),J!==void 0&&g.push(`after=${encodeURIComponent(J)}`);const S=g.length?`?${g.join("&")}`:"",E=await this.requestRequired("GET",`/entities${S}`,y),I=(D,T)=>{var i,O;if(((i=D.metadata)==null?void 0:i.name)===void 0||D.kind===void 0||((O=T.metadata)==null?void 0:O.name)===void 0||T.kind===void 0)return 0;const W=(0,e.eE)(D),Ce=(0,e.eE)(T);return W<Ce?-1:W>Ce?1:0};return{items:E.sort(I)}}async getEntityByRef(d,y){const{kind:h,namespace:M,name:L}=(0,e.of)(d);return this.requestOptional("GET",`/entities/by-name/${encodeURIComponent(h)}/${encodeURIComponent(M)}/${encodeURIComponent(L)}`,y)}async getEntityByName(d,y){const{kind:h,namespace:M="default",name:L}=d;return this.requestOptional("GET",`/entities/by-name/${encodeURIComponent(h)}/${encodeURIComponent(M)}/${encodeURIComponent(L)}`,y)}async refreshEntity(d,y){const h=await this.fetchApi.fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/refresh`,{headers:{"Content-Type":"application/json",...(y==null?void 0:y.token)&&{Authorization:`Bearer ${y==null?void 0:y.token}`}},method:"POST",body:JSON.stringify({entityRef:d})});if(h.status!==200)throw new Error(await h.text())}async getEntityFacets(d,y){const{filter:h=[],facets:M}=d,L=[];for(const J of[h].flat()){const g=[];for(const[S,E]of Object.entries(J))for(const I of[E].flat())I===o?g.push(encodeURIComponent(S)):typeof I=="string"&&g.push(`${encodeURIComponent(S)}=${encodeURIComponent(I)}`);g.length&&L.push(`filter=${g.join(",")}`)}for(const J of M)L.push(`facet=${encodeURIComponent(J)}`);const $=L.length?`?${L.join("&")}`:"";return await this.requestOptional("GET",`/entity-facets${$}`,y)}async addLocation({type:d="url",target:y,dryRun:h},M){const L=await this.fetchApi.fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/locations${h?"?dryRun=true":""}`,{headers:{"Content-Type":"application/json",...(M==null?void 0:M.token)&&{Authorization:`Bearer ${M==null?void 0:M.token}`}},method:"POST",body:JSON.stringify({type:d,target:y})});if(L.status!==201)throw new Error(await L.text());const{location:$,entities:J,exists:g}=await L.json();if(!$)throw new Error(`Location wasn't added: ${y}`);return{location:$,entities:J,exists:g}}async getLocationByRef(d,y){return(await this.requestRequired("GET","/locations",y)).map(M=>M.data).find(M=>d===(0,e.NZ)(M))}async removeLocationById(d,y){await this.requestIgnored("DELETE",`/locations/${encodeURIComponent(d)}`,y)}async removeEntityByUid(d,y){await this.requestIgnored("DELETE",`/entities/by-uid/${encodeURIComponent(d)}`,y)}async requestIgnored(d,y,h){const M=`${await this.discoveryApi.getBaseUrl("catalog")}${y}`,L=h!=null&&h.token?{Authorization:`Bearer ${h.token}`}:{},$=await this.fetchApi.fetch(M,{method:d,headers:L});if(!$.ok)throw await n.VL.fromResponse($)}async requestRequired(d,y,h){const M=`${await this.discoveryApi.getBaseUrl("catalog")}${y}`,L=h!=null&&h.token?{Authorization:`Bearer ${h.token}`}:{},$=await this.fetchApi.fetch(M,{method:d,headers:L});if(!$.ok)throw await n.VL.fromResponse($);return await $.json()}async requestOptional(d,y,h){const M=`${await this.discoveryApi.getBaseUrl("catalog")}${y}`,L=h!=null&&h.token?{Authorization:`Bearer ${h.token}`}:{},$=await this.fetchApi.fetch(M,{method:d,headers:L});if(!$.ok){if($.status===404)return;throw await n.VL.fromResponse($)}return await $.json()}}const u="backstage.io/catalog-processing"},34520:function(Lt,c,t){t.d(c,{$1:function(){return zt},Dg:function(){return xn},In:function(){return Zt},KS:function(){return Ke},M6:function(){return wn},M_:function(){return st},NZ:function(){return Jn},Ou:function(){return sr},P1:function(){return Mn},S4:function(){return Nt},Tf:function(){return u},X9:function(){return zn},Zj:function(){return Ue},_b:function(){return De},aS:function(){return ct},cz:function(){return Be},eE:function(){return _e},hr:function(){return Ne},iB:function(){return Y},l2:function(){return m},nP:function(){return oe},of:function(){return ce},q1:function(){return jn},w$:function(){return he},wP:function(){return we},y$:function(){return xe},zG:function(){return o}});var e=t(76635),n=t.n(e),p=t(53911),a=t.n(p);const o="default",m="backstage.io/view-url",u="backstage.io/edit-url";class v{constructor(Ve=o){this.namespace=Ve}async enforce(Ve){return Ve.metadata.namespace?Ve:lodash.merge({metadata:{namespace:this.namespace}},Ve)}}class d{static isValidPrefixAndOrSuffix(Ve,Xt,Cn,Ln){if(typeof Ve!="string")return!1;const Nn=Ve.split(Xt);return Nn.length===1?Ln(Nn[0]):Nn.length===2?Cn(Nn[0])&&Ln(Nn[1]):!1}static isJsonSafe(Ve){try{return n().isEqual(Ve,JSON.parse(JSON.stringify(Ve)))}catch{return!1}}static isValidDnsSubdomain(Ve){return typeof Ve=="string"&&Ve.length>=1&&Ve.length<=253&&Ve.split(".").every(d.isValidDnsLabel)}static isValidDnsLabel(Ve){return typeof Ve=="string"&&Ve.length>=1&&Ve.length<=63&&/^[a-z0-9]+(\-[a-z0-9]+)*$/.test(Ve)}static isValidTag(Ve){return typeof Ve=="string"&&Ve.length>=1&&Ve.length<=63&&/^[a-z0-9+#]+(\-[a-z0-9+#]+)*$/.test(Ve)}static isValidUrl(Ve){if(typeof Ve!="string")return!1;try{return new URL(Ve),!0}catch{return!1}}static isValidString(Ve){var Xt;return typeof Ve=="string"&&((Xt=Ve==null?void 0:Ve.trim())==null?void 0:Xt.length)>=1}static isNonEmptyString(Ve){var Xt;return typeof Ve=="string"&&((Xt=Ve==null?void 0:Ve.trim())==null?void 0:Xt.length)>=1}}var y="http://json-schema.org/draft-07/schema",h="EntityEnvelope",M="The envelope skeleton parts of an entity - whatever is necessary to be able to give it a ref and pass to further validation / policy checking.",L=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService"}}],$="object",J=["apiVersion","kind","metadata"],g=!0,S={apiVersion:{type:"string",description:"The version of specification format for this particular entity that this is written against.",minLength:1,examples:["backstage.io/v1alpha1","my-company.net/v1","1.0"]},kind:{type:"string",description:"The high level entity type being described.",minLength:1,examples:["API","Component","Domain","Group","Location","Resource","System","Template","User"]},metadata:{type:"object",required:["name"],additionalProperties:!0,properties:{name:{type:"string",description:"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.",examples:["metadata-proxy"],minLength:1},namespace:{type:"string",description:"The namespace that the entity belongs to.",default:"default",examples:["default","admin"],minLength:1}}}},E={$schema:y,$id:h,description:M,examples:L,type:$,required:J,additionalProperties:g,properties:S},I="http://json-schema.org/draft-07/schema",D="Entity",T="The parts of the format that's common to all versions/kinds of entity.",i=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService",description:"Creates Lorems like a pro.",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"service",lifecycle:"production",owner:"tools"}}],O="object",W=["apiVersion","kind","metadata"],Ce=!1,$e={apiVersion:{type:"string",description:"The version of specification format for this particular entity that this is written against.",minLength:1,examples:["backstage.io/v1alpha1","my-company.net/v1","1.0"]},kind:{type:"string",description:"The high level entity type being described.",minLength:1,examples:["API","Component","Domain","Group","Location","Resource","System","Template","User"]},metadata:{$ref:"EntityMeta"},spec:{type:"object",description:"The specification data describing the entity itself."},relations:{type:"array",description:"The relations that this entity has with other entities.",items:{$ref:"common#relation"}},status:{$ref:"common#status"}},Qe={$schema:I,$id:D,description:T,examples:i,type:O,required:W,additionalProperties:Ce,properties:$e},it="http://json-schema.org/draft-07/schema",lt="EntityMeta",qe="Metadata fields common to all versions/kinds of entity.",$t=[{uid:"e01199ab-08cc-44c2-8e19-5c29ded82521",etag:"lsndfkjsndfkjnsdfkjnsd==",name:"my-component-yay",namespace:"the-namespace",labels:{"backstage.io/custom":"ValueStuff"},annotations:{"example.com/bindings":"are-secret"},tags:["java","data"]}],Ot="object",pn=["name"],_n=!0,U={uid:{type:"string",description:"A globally unique ID for the entity. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, but the server is free to reject requests that do so in such a way that it breaks semantics.",examples:["e01199ab-08cc-44c2-8e19-5c29ded82521"],minLength:1},etag:{type:"string",description:"An opaque string that changes for each update operation to any part of the entity, including metadata. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, and the server will then reject the operation if it does not match the current stored value.",examples:["lsndfkjsndfkjnsdfkjnsd=="],minLength:1},name:{type:"string",description:"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.",examples:["metadata-proxy"],minLength:1},namespace:{type:"string",description:"The namespace that the entity belongs to.",default:"default",examples:["default","admin"],minLength:1},title:{type:"string",description:"A display name of the entity, to be presented in user interfaces instead of the name property, when available.",examples:["React SSR Template"],minLength:1},description:{type:"string",description:"A short (typically relatively few words, on one line) description of the entity."},labels:{type:"object",description:"Key/value pairs of identifying information attached to the entity.",additionalProperties:!0,patternProperties:{"^.+$":{type:"string"}}},annotations:{type:"object",description:"Key/value pairs of non-identifying auxiliary information attached to the entity.",additionalProperties:!0,patternProperties:{"^.+$":{type:"string"}}},tags:{type:"array",description:"A list of single-valued strings, to for example classify catalog entities in various ways.",items:{type:"string",minLength:1}},links:{type:"array",description:"A list of external hyperlinks related to the entity. Links can provide additional contextual information that may be located outside of Backstage itself. For example, an admin dashboard or external CMS page.",items:{type:"object",required:["url"],properties:{url:{type:"string",description:"A url in a standard uri format.",examples:["https://admin.example-org.com"],minLength:1},title:{type:"string",description:"A user friendly display name for the link.",examples:["Admin Dashboard"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1}}}}},Re={$schema:it,$id:lt,description:qe,examples:$t,type:Ot,required:pn,additionalProperties:_n,properties:U},w="http://json-schema.org/draft-07/schema",Ie="common",fe="object",A="Common definitions to import from other schemas",H={reference:{$id:"#reference",type:"object",description:"A reference by name to another entity.",required:["kind","namespace","name"],additionalProperties:!1,properties:{kind:{type:"string",description:"The kind field of the entity.",minLength:1},namespace:{type:"string",description:"The metadata.namespace field of the entity.",minLength:1},name:{type:"string",description:"The metadata.name field of the entity.",minLength:1}}},relation:{$id:"#relation",type:"object",description:"A directed relation from one entity to another.",required:["type","target"],additionalProperties:!1,properties:{type:{type:"string",minLength:1,pattern:"^\\w+$",description:"The type of relation."},target:{$ref:"#reference"}}},status:{$id:"#status",type:"object",description:"The current status of the entity, as claimed by various sources.",required:[],additionalProperties:!0,properties:{items:{type:"array",items:{$ref:"#statusItem"}}}},statusItem:{$id:"#statusItem",type:"object",description:"A specific status item on a well known format.",required:["type","level","message"],additionalProperties:!0,properties:{type:{type:"string",minLength:1},level:{$ref:"#statusLevel",description:"The status level / severity of the status item."},message:{type:"string",description:"A brief message describing the status, intended for human consumption."},error:{$ref:"#error",description:"An optional serialized error object related to the status."}}},statusLevel:{$id:"#statusLevel",type:"string",description:"A status level / severity.",enum:["info","warning","error"]},error:{$id:"#error",type:"object",description:"A serialized error object.",required:["name","message"],additionalProperties:!0,properties:{name:{type:"string",examples:["Error","InputError"],description:"The type name of the error",minLength:1},message:{type:"string",description:"The message of the error"},code:{type:"string",description:"An error code associated with the error"},stack:{type:"string",description:"An error stack trace"}}}},re={$schema:w,$id:Ie,type:fe,description:A,definitions:H};const Pe=new Map,ae=[E,Qe,Re,re];function Te(Ct){if(!(Ct!=null&&Ct.length))throw new TypeError("Unknown error");const Ve=Ct[0];throw new TypeError(`${Ve.instancePath||"<root>"} ${Ve.message}${Ve.params?` - ${Object.entries(Ve.params).map(([Xt,Cn])=>`${Xt}: ${Cn}`).join(", ")}`:""}`)}function Et(Ct,Ve={}){var Xt;const Cn=(Xt=Ve==null?void 0:Ve.disableCache)!=null?Xt:!1,Ln=Cn?"":JSON.stringify(Ct);if(!Cn){const pr=Pe.get(Ln);if(pr)return pr}const Nn=te(Ct),Qn=new(a())({allowUnionTypes:!0,allErrors:!0,validateSchema:!0});Nn.length&&Qn.addSchema(Nn,void 0,void 0,!0);const fr=Qn.compile(Ct);return Cn||Pe.set(Ln,fr),fr}function te(Ct){if(typeof Ct!="object")return[];const Ve=new Set;Ct.$id&&Ve.add(Ct.$id);const Xt=new Array,Cn=[Ct];for(;Cn.length;){const Ln=Cn.pop();for(const Nn of ee(Ln))if(!Ve.has(Nn)){Ve.add(Nn);const Qn=ae.find(fr=>fr.$id===Nn);Qn&&(Xt.push(Qn),Cn.push(Qn))}}return Xt}function*ee(Ct){const Ve=[Ct];for(;Ve.length;){const Xt=Ve.pop();if(typeof Xt=="object"&&Xt)for(const[Cn,Ln]of Object.entries(Xt))Cn==="$ref"&&typeof Ln=="string"?yield Ln.split("#")[0]:Ve.push(Ln)}}function Le(Ct){const Ve=Et(Ct||E);return Xt=>{if(Ve(Xt)===!0)return Xt;throw Te(Ve.errors)}}function le(Ct){const Ve=Et(Ct);return Xt=>{var Cn;if(Ve(Xt)===!0)return Xt;const Nn=(Cn=Ve.errors)==null?void 0:Cn.filter(Qn=>["/kind","/apiVersion"].includes(Qn.instancePath));if((Nn==null?void 0:Nn.length)&&Nn.every(Qn=>Qn.keyword==="enum"))return!1;throw Te(Ve.errors)}}function Q(Ct){const Ve=Et(Ct||Qe);return Xt=>{if(Ve(Xt)===!0)return Xt;throw Te(Ve.errors)}}class xe{static isValidApiVersion(Ve){return d.isValidPrefixAndOrSuffix(Ve,"/",d.isValidDnsSubdomain,Xt=>Xt.length>=1&&Xt.length<=63&&/^[a-z0-9A-Z]+$/.test(Xt))}static isValidKind(Ve){return typeof Ve=="string"&&Ve.length>=1&&Ve.length<=63&&/^[a-zA-Z][a-z0-9A-Z]*$/.test(Ve)}static isValidObjectName(Ve){return typeof Ve=="string"&&Ve.length>=1&&Ve.length<=63&&/^([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]$/.test(Ve)}static isValidNamespace(Ve){return d.isValidDnsLabel(Ve)}static isValidLabelKey(Ve){return d.isValidPrefixAndOrSuffix(Ve,"/",d.isValidDnsSubdomain,xe.isValidObjectName)}static isValidLabelValue(Ve){return Ve===""||xe.isValidObjectName(Ve)}static isValidAnnotationKey(Ve){return d.isValidPrefixAndOrSuffix(Ve,"/",d.isValidDnsSubdomain,xe.isValidObjectName)}static isValidAnnotationValue(Ve){return typeof Ve=="string"}}const at={isValidApiVersion:xe.isValidApiVersion,isValidKind:xe.isValidKind,isValidEntityName:xe.isValidObjectName,isValidNamespace:xe.isValidNamespace,isValidLabelKey:xe.isValidLabelKey,isValidLabelValue:xe.isValidLabelValue,isValidAnnotationKey:xe.isValidAnnotationKey,isValidAnnotationValue:xe.isValidAnnotationValue,isValidTag:Ct=>typeof Ct=="string"&&Ct.length>=1&&Ct.length<=63&&/^[a-z0-9:+#]+(\-[a-z0-9:+#]+)*$/.test(Ct)};function Zt(Ct={}){return{...at,...Ct}}class Dt{constructor(Ve=Zt()){this.validators=Ve}async enforce(Ve){var Xt,Cn,Ln,Nn,Qn,fr,pr;function er(Z,X,pe){if(X==null)throw new Error(`${Z} must have a value`);let et;try{et=pe(X)}catch(tt){throw new Error(`${Z} could not be validated, ${tt}`)}if(!et){let tt;switch(pe.name){case"isValidLabelValue":case"isValidObjectName":tt="a string that is sequences of [a-zA-Z0-9] separated by any of [-_.], at most 63 characters in total";break;case"isValidLabelKey":case"isValidApiVersion":case"isValidAnnotationKey":tt="a valid prefix and/or suffix";break;case"isValidNamespace":case"isValidDnsLabel":tt="a string that is sequences of [a-z0-9] separated by [-], at most 63 characters in total";break;case"isValidTag":tt="a string that is sequences of [a-z0-9+#] separated by [-], at most 63 characters in total";break;case"isValidAnnotationValue":tt="a string";break;case"isValidKind":tt="a string that is a sequence of [a-zA-Z][a-z0-9A-Z], at most 63 characters in total";break;case"isValidUrl":tt="a string that is a valid url";break;case"isValidString":case"isNonEmptyString":tt="a non empty string";break;default:tt=void 0;break}const At=tt?` expected ${tt} but found "${X}".`:"";throw new Error(`"${Z}" is not valid;${At} To learn more about catalog file format, visit: https://github.com/backstage/backstage/blob/master/docs/architecture-decisions/adr002-default-catalog-file-format.md`)}}function ir(Z,X,pe){return X===void 0||er(Z,X,pe)}er("apiVersion",Ve.apiVersion,this.validators.isValidApiVersion),er("kind",Ve.kind,this.validators.isValidKind),er("metadata.name",Ve.metadata.name,this.validators.isValidEntityName),ir("metadata.namespace",Ve.metadata.namespace,this.validators.isValidNamespace);for(const[Z,X]of Object.entries((Xt=Ve.metadata.labels)!=null?Xt:[]))er(`labels.${Z}`,Z,this.validators.isValidLabelKey),er(`labels.${Z}`,X,this.validators.isValidLabelValue);for(const[Z,X]of Object.entries((Cn=Ve.metadata.annotations)!=null?Cn:[]))er(`annotations.${Z}`,Z,this.validators.isValidAnnotationKey),er(`annotations.${Z}`,X,this.validators.isValidAnnotationValue);const lr=(Ln=Ve.metadata.tags)!=null?Ln:[];for(let Z=0;Z<lr.length;++Z)er(`tags.${Z}`,lr[Z],this.validators.isValidTag);const k=(Nn=Ve.metadata.links)!=null?Nn:[];for(let Z=0;Z<k.length;++Z)er(`links.${Z}.url`,(Qn=k[Z])==null?void 0:Qn.url,d.isValidUrl),ir(`links.${Z}.title`,(fr=k[Z])==null?void 0:fr.title,d.isNonEmptyString),ir(`links.${Z}.icon`,(pr=k[Z])==null?void 0:pr.icon,xe.isValidObjectName);return Ve}}const en=null;class on{constructor(Ve=en){this.knownFields=Ve}async enforce(Ve){for(const Xt of Object.keys(Ve))if(!this.knownFields.includes(Xt))throw new Error(`Unknown field ${Xt}`);return Ve}}class gn{async enforce(Ve){if(!this.validate){const Ln=new Ajv({allowUnionTypes:!0});this.validate=Ln.addSchema([re,Re],void 0,void 0,!0).compile(Qe)}if(this.validate(Ve)===!0)return Ve;const[Cn]=this.validate.errors||[];throw Cn?new Error(`Malformed envelope, ${Cn.instancePath||"<root>"} ${Cn.message}`):new Error("Malformed envelope, Unknown error")}}function Ye(Ct){let Ve=Ct.indexOf(":");const Xt=Ct.indexOf("/");Xt!==-1&&Xt<Ve&&(Ve=-1);const Cn=Ve===-1?void 0:Ct.slice(0,Ve),Ln=Xt===-1?void 0:Ct.slice(Ve+1,Xt),Nn=Ct.slice(Math.max(Ve+1,Xt+1));if(Cn===""||Ln===""||Nn==="")throw new TypeError(`Entity reference "${Ct}" was not on the form [<kind>:][<namespace>/]<name>`);return{kind:Cn,namespace:Ln,name:Nn}}function Y(Ct){return{kind:Ct.kind,namespace:Ct.metadata.namespace||o,name:Ct.metadata.name}}function ce(Ct,Ve){var Xt,Cn,Ln,Nn;if(!Ct)throw new Error("Entity reference must not be empty");const Qn=Ve==null?void 0:Ve.defaultKind,fr=(Ve==null?void 0:Ve.defaultNamespace)||o;let pr,er,ir;if(typeof Ct=="string"){const lr=Ye(Ct);pr=(Xt=lr.kind)!=null?Xt:Qn,er=(Cn=lr.namespace)!=null?Cn:fr,ir=lr.name}else pr=(Ln=Ct.kind)!=null?Ln:Qn,er=(Nn=Ct.namespace)!=null?Nn:fr,ir=Ct.name;if(pr)if(er){if(!ir){const lr=JSON.stringify(Ct);throw new Error(`Entity reference ${lr} had missing or empty name`)}}else{const lr=JSON.stringify(Ct);throw new Error(`Entity reference ${lr} had missing or empty namespace`)}else{const lr=JSON.stringify(Ct);throw new Error(`Entity reference ${lr} had missing or empty kind (e.g. did not start with "component:" or similar)`)}return{kind:pr,namespace:er,name:ir}}function _e(Ct){var Ve,Xt;let Cn,Ln,Nn;return"metadata"in Ct?(Cn=Ct.kind,Ln=(Ve=Ct.metadata.namespace)!=null?Ve:o,Nn=Ct.metadata.name):(Cn=Ct.kind,Ln=(Xt=Ct.namespace)!=null?Xt:o,Nn=Ct.name),`${Cn.toLocaleLowerCase("en-US")}:${Ln.toLocaleLowerCase("en-US")}/${Nn.toLocaleLowerCase("en-US")}`}class Ze{constructor(Ve){this.policies=Ve}async enforce(Ve){let Xt=Ve;for(const Cn of this.policies){const Ln=await Cn.enforce(Xt);if(!Ln)throw new Error(`Policy ${Cn.constructor.name} did not return a result`);Xt=Ln}return Xt}}class ie{constructor(Ve){this.policies=Ve}async enforce(Ve){for(const Xt of this.policies){const Cn=await Xt.enforce(Ve);if(Cn)return Cn}throw new Error("The entity did not match any known policy")}}const de={allOf(Ct){return new Ze(Ct)},oneOf(Ct){return new ie(Ct)}};var ve="http://json-schema.org/draft-07/schema",ge="ApiV1alpha1",nt="An API describes an interface that can be exposed by a component. The API can be defined in different formats, like OpenAPI, AsyncAPI, GraphQL, gRPC, or other formats.",bt=[{apiVersion:"backstage.io/v1alpha1",kind:"API",metadata:{name:"artist-api",description:"Retrieve artist details",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"openapi",lifecycle:"production",owner:"artist-relations-team",system:"artist-engagement-portal",definition:`openapi: "3.0.0"
info:...`}}],kt=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["API"]},spec:{type:"object",required:["type","lifecycle","owner","definition"],properties:{type:{type:"string",description:"The type of the API definition.",examples:["openapi","asyncapi","graphql","grpc"],minLength:1},lifecycle:{type:"string",description:"The lifecycle state of the API.",examples:["experimental","production","deprecated"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the API.",examples:["artist-relations-team","user:john.johnson"],minLength:1},system:{type:"string",description:"An entity reference to the system that the API belongs to.",minLength:1},definition:{type:"string",description:"The definition of the API, based on the format defined by the type.",minLength:1}}}}}],ln={$schema:ve,$id:ge,description:nt,examples:bt,allOf:kt};function Ut(Ct){const Ve=le(Ct);return{async check(Xt){return Ve(Xt)===Xt}}}const Mt=Ut(ln);var Gt="http://json-schema.org/draft-07/schema",bn="ComponentV1alpha1",vn='A Component describes a software component. It is typically intimately linked to the source code that constitutes the component, and should be what a developer may regard a "unit of software", usually with a distinct deployable or linkable artifact.',Me=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService",description:"Creates Lorems like a pro.",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"service",lifecycle:"production",owner:"tools"}}],ht=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Component"]},spec:{type:"object",required:["type","lifecycle","owner"],properties:{type:{type:"string",description:"The type of component.",examples:["service","website","library"],minLength:1},lifecycle:{type:"string",description:"The lifecycle state of the component.",examples:["experimental","production","deprecated"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1},system:{type:"string",description:"An entity reference to the system that the component belongs to.",minLength:1},subcomponentOf:{type:"string",description:"An entity reference to another component of which the component is a part.",minLength:1},providesApis:{type:"array",description:"An array of entity references to the APIs that are provided by the component.",items:{type:"string",minLength:1}},consumesApis:{type:"array",description:"An array of entity references to the APIs that are consumed by the component.",items:{type:"string",minLength:1}},dependsOn:{type:"array",description:"An array of references to other entities that the component depends on to function.",items:{type:"string",minLength:1}}}}}}],_t={$schema:Gt,$id:bn,description:vn,examples:Me,allOf:ht};const tn=Ut(_t);var Bt="http://json-schema.org/draft-07/schema",hn="DomainV1alpha1",kn="A Domain groups a collection of systems that share terminology, domain models, business purpose, or documentation, i.e. form a bounded context.",Bn=[{apiVersion:"backstage.io/v1alpha1",kind:"Domain",metadata:{name:"artists",description:"Everything about artists"},spec:{owner:"artist-relations-team"}}],Un=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Domain"]},spec:{type:"object",required:["owner"],properties:{owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1}}}}}],An={$schema:Bt,$id:hn,description:kn,examples:Bn,allOf:Un};const Ge=Ut(An);var Je="http://json-schema.org/draft-07/schema",mt="GroupV1alpha1",dt="A group describes an organizational entity, such as for example a team, a business unit, or a loose collection of people in an interest group. Members of these groups are modeled in the catalog as kind User.",It=[{apiVersion:"backstage.io/v1alpha1",kind:"Group",metadata:{name:"infrastructure",description:"The infra business unit"},spec:{type:"business-unit",profile:{displayName:"Infrastructure",email:"infrastructure@example.com",picture:"https://example.com/groups/bu-infrastructure.jpeg"},parent:"ops",children:["backstage","other"]}}],Wt=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Group"]},spec:{type:"object",required:["type","children"],properties:{type:{type:"string",description:"The type of group. There is currently no enforced set of values for this field, so it is left up to the adopting organization to choose a nomenclature that matches their org hierarchy.",examples:["team","business-unit","product-area","root"],minLength:1},profile:{type:"object",description:"Optional profile information about the group, mainly for display purposes. All fields of this structure are also optional. The email would be a group email of some form, that the group may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the group, and that a browser could fetch and render on a group page or similar.",properties:{displayName:{type:"string",description:"A simple display name to present to users.",examples:["Infrastructure"],minLength:1},email:{type:"string",description:"An email where this entity can be reached.",examples:["infrastructure@example.com"],minLength:1},picture:{type:"string",description:"The URL of an image that represents this entity.",examples:["https://example.com/groups/bu-infrastructure.jpeg"],minLength:1}}},parent:{type:"string",description:"The immediate parent group in the hierarchy, if any. Not all groups must have a parent; the catalog supports multi-root hierarchies. Groups may however not have more than one parent. This field is an entity reference.",examples:["ops"],minLength:1},children:{type:"array",description:"The immediate child groups of this group in the hierarchy (whose parent field points to this group). The list must be present, but may be empty if there are no child groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.",items:{type:"string",examples:["backstage","other"],minLength:1}},members:{type:"array",description:"The users that are members of this group. The entries of this array are entity references.",items:{type:"string",examples:["jdoe"],minLength:1}}}}}}],Jt={$schema:Je,$id:mt,description:dt,examples:It,allOf:Wt};const xt=Ut(Jt);var N="http://json-schema.org/draft-07/schema",F="LocationV1alpha1",q="A location is a marker that references other places to look for catalog data.",ye=[{apiVersion:"backstage.io/v1alpha1",kind:"Location",metadata:{name:"org-data"},spec:{type:"url",targets:["http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml","http://github.com/myorg/myproject/org-data-dump/catalog-info-consultants.yaml"]}}],Se=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Location"]},spec:{type:"object",required:[],properties:{type:{type:"string",description:"The single location type, that's common to the targets specified in the spec. If it is left out, it is inherited from the location type that originally read the entity data.",examples:["url"],minLength:1},target:{type:"string",description:"A single target as a string. Can be either an absolute path/URL (depending on the type), or a relative path such as ./details/catalog-info.yaml which is resolved relative to the location of this Location entity itself.",examples:["./details/catalog-info.yaml"],minLength:1},targets:{type:"array",description:"A list of targets as strings. They can all be either absolute paths/URLs (depending on the type), or relative paths such as ./details/catalog-info.yaml which are resolved relative to the location of this Location entity itself.",items:{type:"string",examples:["./details/catalog-info.yaml","http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml"],minLength:1}},presence:{type:"string",description:"Whether the presence of the location target is required and it should be considered an error if it can not be found",default:"required",examples:["required"],enum:["required","optional"]}}}}}],vt={$schema:N,$id:F,description:q,examples:ye,allOf:Se};const Rt=Ut(vt),Nt="ownedBy",zt="ownerOf",xn="consumesApi",zn="apiConsumedBy",st="providesApi",Ue="apiProvidedBy",oe="dependsOn",he="dependencyOf",De="parentOf",we="childOf",Ne="memberOf",Ke="hasMember",Be="partOf",ct="hasPart";var Kt="http://json-schema.org/draft-07/schema",mn="ResourceV1alpha1",se="A resource describes the infrastructure a system needs to operate, like BigTable databases, Pub/Sub topics, S3 buckets or CDNs. Modelling them together with components and systems allows to visualize resource footprint, and create tooling around them.",ke=[{apiVersion:"backstage.io/v1alpha1",kind:"Resource",metadata:{name:"artists-db",description:"Stores artist details"},spec:{type:"database",owner:"artist-relations-team",system:"artist-engagement-portal"}}],ot=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Resource"]},spec:{type:"object",required:["type","owner"],properties:{type:{type:"string",description:"The type of resource.",examples:["database","s3-bucket","cluster"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the resource.",examples:["artist-relations-team","user:john.johnson"],minLength:1},dependsOn:{type:"array",description:"An array of references to other entities that the resource depends on to function.",items:{type:"string",minLength:1}},system:{type:"string",description:"An entity reference to the system that the resource belongs to.",minLength:1}}}}}],wt={$schema:Kt,$id:mn,description:se,examples:ke,allOf:ot};const Fe=Ut(wt);var ft="http://json-schema.org/draft-07/schema",K="SystemV1alpha1",l="A system is a collection of resources and components. The system may expose or consume one or several APIs. It is viewed as abstraction level that provides potential consumers insights into exposed features without needing a too detailed view into the details of all components. This also gives the owning team the possibility to decide about published artifacts and APIs.",b=[{apiVersion:"backstage.io/v1alpha1",kind:"System",metadata:{name:"artist-engagement-portal",description:"Handy tools to keep artists in the loop"},spec:{owner:"artist-relations-team",domain:"artists"}}],x=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["System"]},spec:{type:"object",required:["owner"],properties:{owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1},domain:{type:"string",description:"An entity reference to the domain that the system belongs to.",examples:["artists"],minLength:1}}}}}],G={$schema:ft,$id:K,description:l,examples:b,allOf:x};const Ae=Ut(G);var rt="http://json-schema.org/draft-07/schema",ut="UserV1alpha1",yt="A user describes a person, such as an employee, a contractor, or similar. Users belong to Group entities in the catalog. These catalog user entries are connected to the way that authentication within the Backstage ecosystem works. See the auth section of the docs for a discussion of these concepts.",Vt=[{apiVersion:"backstage.io/v1alpha1",kind:"User",metadata:{name:"jdoe"},spec:{profile:{displayName:"Jenny Doe",email:"jenny-doe@example.com",picture:"https://example.com/staff/jenny-with-party-hat.jpeg"},memberOf:["team-b","employees"]}}],Ft=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["User"]},spec:{type:"object",required:["memberOf"],properties:{profile:{type:"object",description:"Optional profile information about the user, mainly for display purposes. All fields of this structure are also optional. The email would be a primary email of some form, that the user may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the user, and that a browser could fetch and render on a profile page or similar.",properties:{displayName:{type:"string",description:"A simple display name to present to users.",examples:["Jenny Doe"],minLength:1},email:{type:"string",description:"An email where this user can be reached.",examples:["jenny-doe@example.com"],minLength:1},picture:{type:"string",description:"The URL of an image that represents this user.",examples:["https://example.com/staff/jenny-with-party-hat.jpeg"],minLength:1}}},memberOf:{type:"array",description:"The list of groups that the user is a direct member of (i.e., no transitive memberships are listed here). The list must be present, but may be empty if the user is not member of any groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.",items:{type:"string",examples:["team-b","employees"],minLength:1}}}}}}],On={$schema:rt,$id:ut,description:yt,examples:Vt,allOf:Ft};const yn=Ut(On),Mn="backstage.io/managed-by-location",jn="backstage.io/managed-by-origin-location",wn="backstage.io/source-location";function sr(Ct){if(typeof Ct!="string")throw new TypeError(`Unable to parse location ref '${Ct}', unexpected argument ${typeof Ct}`);const Ve=Ct.indexOf(":");if(Ve<0)throw new TypeError(`Unable to parse location ref '${Ct}', expected '<type>:<target>', e.g. 'url:https://host/path'`);const Xt=Ct.substring(0,Ve).trim(),Cn=Ct.substring(Ve+1).trim();if(!Xt||!Cn)throw new TypeError(`Unable to parse location ref '${Ct}', expected '<type>:<target>', e.g. 'url:https://host/path'`);if(Xt==="http"||Xt==="https")throw new TypeError(`Invalid location ref '${Ct}', please prefix it with 'url:', e.g. 'url:${Ct}'`);return{type:Xt,target:Cn}}function Jn(Ct){const{type:Ve,target:Xt}=Ct;if(Ve){if(!Xt)throw new TypeError("Unable to stringify location ref, empty target")}else throw new TypeError("Unable to stringify location ref, empty type");return`${Ve}:${Xt}`}function Or(Ct){var Ve,Xt,Cn,Ln,Nn;const Qn=(Nn=(Xt=(Ve=Ct.metadata)==null?void 0:Ve.annotations)==null?void 0:Xt[wn])!=null?Nn:(Ln=(Cn=Ct.metadata)==null?void 0:Cn.annotations)==null?void 0:Ln[Mn];if(!Qn)throw new Error(`Entity '${_e(Ct)}' is missing location`);return sr(Qn)}},53911:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0}),c.CodeGen=c.Name=c.nil=c.stringify=c.str=c._=c.KeywordCxt=void 0;const e=t(61889),n=t(57993),p=t(99908),a=t(51020),o=["/properties"],m="http://json-schema.org/draft-07/schema";class u extends e.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(h=>this.addVocabulary(h)),this.opts.discriminator&&this.addKeyword(p.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const h=this.opts.$data?this.$dataMetaSchema(a,o):a;this.addMetaSchema(h,m,!1),this.refs["http://json-schema.org/schema"]=m}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(m)?m:void 0)}}Lt.exports=c=u,Object.defineProperty(c,"__esModule",{value:!0}),c.default=u;var v=t(4371);Object.defineProperty(c,"KeywordCxt",{enumerable:!0,get:function(){return v.KeywordCxt}});var d=t(82481);Object.defineProperty(c,"_",{enumerable:!0,get:function(){return d._}}),Object.defineProperty(c,"str",{enumerable:!0,get:function(){return d.str}}),Object.defineProperty(c,"stringify",{enumerable:!0,get:function(){return d.stringify}}),Object.defineProperty(c,"nil",{enumerable:!0,get:function(){return d.nil}}),Object.defineProperty(c,"Name",{enumerable:!0,get:function(){return d.Name}}),Object.defineProperty(c,"CodeGen",{enumerable:!0,get:function(){return d.CodeGen}})},91475:function(Lt,c){Object.defineProperty(c,"__esModule",{value:!0}),c.regexpCode=c.getEsmExportName=c.getProperty=c.safeStringify=c.stringify=c.strConcat=c.addCodeArg=c.str=c._=c.nil=c._Code=c.Name=c.IDENTIFIER=c._CodeOrName=void 0;class t{}c._CodeOrName=t,c.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class e extends t{constructor(S){if(super(),!c.IDENTIFIER.test(S))throw new Error("CodeGen: name must be a valid identifier");this.str=S}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}c.Name=e;class n extends t{constructor(S){super(),this._items=typeof S=="string"?[S]:S}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const S=this._items[0];return S===""||S==='""'}get str(){var S;return(S=this._str)!==null&&S!==void 0?S:this._str=this._items.reduce((E,I)=>`${E}${I}`,"")}get names(){var S;return(S=this._names)!==null&&S!==void 0?S:this._names=this._items.reduce((E,I)=>(I instanceof e&&(E[I.str]=(E[I.str]||0)+1),E),{})}}c._Code=n,c.nil=new n("");function p(g,...S){const E=[g[0]];let I=0;for(;I<S.length;)m(E,S[I]),E.push(g[++I]);return new n(E)}c._=p;const a=new n("+");function o(g,...S){const E=[M(g[0])];let I=0;for(;I<S.length;)E.push(a),m(E,S[I]),E.push(a,M(g[++I]));return u(E),new n(E)}c.str=o;function m(g,S){S instanceof n?g.push(...S._items):S instanceof e?g.push(S):g.push(y(S))}c.addCodeArg=m;function u(g){let S=1;for(;S<g.length-1;){if(g[S]===a){const E=v(g[S-1],g[S+1]);if(E!==void 0){g.splice(S-1,3,E);continue}g[S++]="+"}S++}}function v(g,S){if(S==='""')return g;if(g==='""')return S;if(typeof g=="string")return S instanceof e||g[g.length-1]!=='"'?void 0:typeof S!="string"?`${g.slice(0,-1)}${S}"`:S[0]==='"'?g.slice(0,-1)+S.slice(1):void 0;if(typeof S=="string"&&S[0]==='"'&&!(g instanceof e))return`"${g}${S.slice(1)}`}function d(g,S){return S.emptyStr()?g:g.emptyStr()?S:o`${g}${S}`}c.strConcat=d;function y(g){return typeof g=="number"||typeof g=="boolean"||g===null?g:M(Array.isArray(g)?g.join(","):g)}function h(g){return new n(M(g))}c.stringify=h;function M(g){return JSON.stringify(g).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}c.safeStringify=M;function L(g){return typeof g=="string"&&c.IDENTIFIER.test(g)?new n(`.${g}`):p`[${g}]`}c.getProperty=L;function $(g){if(typeof g=="string"&&c.IDENTIFIER.test(g))return new n(`${g}`);throw new Error(`CodeGen: invalid export name: ${g}, use explicit $id name mapping`)}c.getEsmExportName=$;function J(g){return new n(g.toString())}c.regexpCode=J},82481:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0}),c.or=c.and=c.not=c.CodeGen=c.operators=c.varKinds=c.ValueScopeName=c.ValueScope=c.Scope=c.Name=c.regexpCode=c.stringify=c.getProperty=c.nil=c.strConcat=c.str=c._=void 0;const e=t(91475),n=t(66162);var p=t(91475);Object.defineProperty(c,"_",{enumerable:!0,get:function(){return p._}}),Object.defineProperty(c,"str",{enumerable:!0,get:function(){return p.str}}),Object.defineProperty(c,"strConcat",{enumerable:!0,get:function(){return p.strConcat}}),Object.defineProperty(c,"nil",{enumerable:!0,get:function(){return p.nil}}),Object.defineProperty(c,"getProperty",{enumerable:!0,get:function(){return p.getProperty}}),Object.defineProperty(c,"stringify",{enumerable:!0,get:function(){return p.stringify}}),Object.defineProperty(c,"regexpCode",{enumerable:!0,get:function(){return p.regexpCode}}),Object.defineProperty(c,"Name",{enumerable:!0,get:function(){return p.Name}});var a=t(66162);Object.defineProperty(c,"Scope",{enumerable:!0,get:function(){return a.Scope}}),Object.defineProperty(c,"ValueScope",{enumerable:!0,get:function(){return a.ValueScope}}),Object.defineProperty(c,"ValueScopeName",{enumerable:!0,get:function(){return a.ValueScopeName}}),Object.defineProperty(c,"varKinds",{enumerable:!0,get:function(){return a.varKinds}}),c.operators={GT:new e._Code(">"),GTE:new e._Code(">="),LT:new e._Code("<"),LTE:new e._Code("<="),EQ:new e._Code("==="),NEQ:new e._Code("!=="),NOT:new e._Code("!"),OR:new e._Code("||"),AND:new e._Code("&&"),ADD:new e._Code("+")};class o{optimizeNodes(){return this}optimizeNames(A,H){return this}}class m extends o{constructor(A,H,re){super(),this.varKind=A,this.name=H,this.rhs=re}render({es5:A,_n:H}){const re=A?n.varKinds.var:this.varKind,Pe=this.rhs===void 0?"":` = ${this.rhs}`;return`${re} ${this.name}${Pe};`+H}optimizeNames(A,H){if(!!A[this.name.str])return this.rhs&&(this.rhs=qe(this.rhs,A,H)),this}get names(){return this.rhs instanceof e._CodeOrName?this.rhs.names:{}}}class u extends o{constructor(A,H,re){super(),this.lhs=A,this.rhs=H,this.sideEffects=re}render({_n:A}){return`${this.lhs} = ${this.rhs};`+A}optimizeNames(A,H){if(!(this.lhs instanceof e.Name&&!A[this.lhs.str]&&!this.sideEffects))return this.rhs=qe(this.rhs,A,H),this}get names(){const A=this.lhs instanceof e.Name?{}:{...this.lhs.names};return lt(A,this.rhs)}}class v extends u{constructor(A,H,re,Pe){super(A,re,Pe),this.op=H}render({_n:A}){return`${this.lhs} ${this.op}= ${this.rhs};`+A}}class d extends o{constructor(A){super(),this.label=A,this.names={}}render({_n:A}){return`${this.label}:`+A}}class y extends o{constructor(A){super(),this.label=A,this.names={}}render({_n:A}){return`break${this.label?` ${this.label}`:""};`+A}}class h extends o{constructor(A){super(),this.error=A}render({_n:A}){return`throw ${this.error};`+A}get names(){return this.error.names}}class M extends o{constructor(A){super(),this.code=A}render({_n:A}){return`${this.code};`+A}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(A,H){return this.code=qe(this.code,A,H),this}get names(){return this.code instanceof e._CodeOrName?this.code.names:{}}}class L extends o{constructor(A=[]){super(),this.nodes=A}render(A){return this.nodes.reduce((H,re)=>H+re.render(A),"")}optimizeNodes(){const{nodes:A}=this;let H=A.length;for(;H--;){const re=A[H].optimizeNodes();Array.isArray(re)?A.splice(H,1,...re):re?A[H]=re:A.splice(H,1)}return A.length>0?this:void 0}optimizeNames(A,H){const{nodes:re}=this;let Pe=re.length;for(;Pe--;){const ae=re[Pe];ae.optimizeNames(A,H)||($t(A,ae.names),re.splice(Pe,1))}return re.length>0?this:void 0}get names(){return this.nodes.reduce((A,H)=>it(A,H.names),{})}}class $ extends L{render(A){return"{"+A._n+super.render(A)+"}"+A._n}}class J extends L{}class g extends ${}g.kind="else";class S extends ${constructor(A,H){super(H),this.condition=A}render(A){let H=`if(${this.condition})`+super.render(A);return this.else&&(H+="else "+this.else.render(A)),H}optimizeNodes(){super.optimizeNodes();const A=this.condition;if(A===!0)return this.nodes;let H=this.else;if(H){const re=H.optimizeNodes();H=this.else=Array.isArray(re)?new g(re):re}if(H)return A===!1?H instanceof S?H:H.nodes:this.nodes.length?this:new S(Ot(A),H instanceof S?[H]:H.nodes);if(!(A===!1||!this.nodes.length))return this}optimizeNames(A,H){var re;if(this.else=(re=this.else)===null||re===void 0?void 0:re.optimizeNames(A,H),!!(super.optimizeNames(A,H)||this.else))return this.condition=qe(this.condition,A,H),this}get names(){const A=super.names;return lt(A,this.condition),this.else&&it(A,this.else.names),A}}S.kind="if";class E extends ${}E.kind="for";class I extends E{constructor(A){super(),this.iteration=A}render(A){return`for(${this.iteration})`+super.render(A)}optimizeNames(A,H){if(!!super.optimizeNames(A,H))return this.iteration=qe(this.iteration,A,H),this}get names(){return it(super.names,this.iteration.names)}}class D extends E{constructor(A,H,re,Pe){super(),this.varKind=A,this.name=H,this.from=re,this.to=Pe}render(A){const H=A.es5?n.varKinds.var:this.varKind,{name:re,from:Pe,to:ae}=this;return`for(${H} ${re}=${Pe}; ${re}<${ae}; ${re}++)`+super.render(A)}get names(){const A=lt(super.names,this.from);return lt(A,this.to)}}class T extends E{constructor(A,H,re,Pe){super(),this.loop=A,this.varKind=H,this.name=re,this.iterable=Pe}render(A){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(A)}optimizeNames(A,H){if(!!super.optimizeNames(A,H))return this.iterable=qe(this.iterable,A,H),this}get names(){return it(super.names,this.iterable.names)}}class i extends ${constructor(A,H,re){super(),this.name=A,this.args=H,this.async=re}render(A){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(A)}}i.kind="func";class O extends L{render(A){return"return "+super.render(A)}}O.kind="return";class W extends ${render(A){let H="try"+super.render(A);return this.catch&&(H+=this.catch.render(A)),this.finally&&(H+=this.finally.render(A)),H}optimizeNodes(){var A,H;return super.optimizeNodes(),(A=this.catch)===null||A===void 0||A.optimizeNodes(),(H=this.finally)===null||H===void 0||H.optimizeNodes(),this}optimizeNames(A,H){var re,Pe;return super.optimizeNames(A,H),(re=this.catch)===null||re===void 0||re.optimizeNames(A,H),(Pe=this.finally)===null||Pe===void 0||Pe.optimizeNames(A,H),this}get names(){const A=super.names;return this.catch&&it(A,this.catch.names),this.finally&&it(A,this.finally.names),A}}class Ce extends ${constructor(A){super(),this.error=A}render(A){return`catch(${this.error})`+super.render(A)}}Ce.kind="catch";class $e extends ${render(A){return"finally"+super.render(A)}}$e.kind="finally";class Qe{constructor(A,H={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...H,_n:H.lines?`
`:""},this._extScope=A,this._scope=new n.Scope({parent:A}),this._nodes=[new J]}toString(){return this._root.render(this.opts)}name(A){return this._scope.name(A)}scopeName(A){return this._extScope.name(A)}scopeValue(A,H){const re=this._extScope.value(A,H);return(this._values[re.prefix]||(this._values[re.prefix]=new Set)).add(re),re}getScopeValue(A,H){return this._extScope.getValue(A,H)}scopeRefs(A){return this._extScope.scopeRefs(A,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(A,H,re,Pe){const ae=this._scope.toName(H);return re!==void 0&&Pe&&(this._constants[ae.str]=re),this._leafNode(new m(A,ae,re)),ae}const(A,H,re){return this._def(n.varKinds.const,A,H,re)}let(A,H,re){return this._def(n.varKinds.let,A,H,re)}var(A,H,re){return this._def(n.varKinds.var,A,H,re)}assign(A,H,re){return this._leafNode(new u(A,H,re))}add(A,H){return this._leafNode(new v(A,c.operators.ADD,H))}code(A){return typeof A=="function"?A():A!==e.nil&&this._leafNode(new M(A)),this}object(...A){const H=["{"];for(const[re,Pe]of A)H.length>1&&H.push(","),H.push(re),(re!==Pe||this.opts.es5)&&(H.push(":"),(0,e.addCodeArg)(H,Pe));return H.push("}"),new e._Code(H)}if(A,H,re){if(this._blockNode(new S(A)),H&&re)this.code(H).else().code(re).endIf();else if(H)this.code(H).endIf();else if(re)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(A){return this._elseNode(new S(A))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(S,g)}_for(A,H){return this._blockNode(A),H&&this.code(H).endFor(),this}for(A,H){return this._for(new I(A),H)}forRange(A,H,re,Pe,ae=this.opts.es5?n.varKinds.var:n.varKinds.let){const Te=this._scope.toName(A);return this._for(new D(ae,Te,H,re),()=>Pe(Te))}forOf(A,H,re,Pe=n.varKinds.const){const ae=this._scope.toName(A);if(this.opts.es5){const Te=H instanceof e.Name?H:this.var("_arr",H);return this.forRange("_i",0,(0,e._)`${Te}.length`,Et=>{this.var(ae,(0,e._)`${Te}[${Et}]`),re(ae)})}return this._for(new T("of",Pe,ae,H),()=>re(ae))}forIn(A,H,re,Pe=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(A,(0,e._)`Object.keys(${H})`,re);const ae=this._scope.toName(A);return this._for(new T("in",Pe,ae,H),()=>re(ae))}endFor(){return this._endBlockNode(E)}label(A){return this._leafNode(new d(A))}break(A){return this._leafNode(new y(A))}return(A){const H=new O;if(this._blockNode(H),this.code(A),H.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(O)}try(A,H,re){if(!H&&!re)throw new Error('CodeGen: "try" without "catch" and "finally"');const Pe=new W;if(this._blockNode(Pe),this.code(A),H){const ae=this.name("e");this._currNode=Pe.catch=new Ce(ae),H(ae)}return re&&(this._currNode=Pe.finally=new $e,this.code(re)),this._endBlockNode(Ce,$e)}throw(A){return this._leafNode(new h(A))}block(A,H){return this._blockStarts.push(this._nodes.length),A&&this.code(A).endBlock(H),this}endBlock(A){const H=this._blockStarts.pop();if(H===void 0)throw new Error("CodeGen: not in self-balancing block");const re=this._nodes.length-H;if(re<0||A!==void 0&&re!==A)throw new Error(`CodeGen: wrong number of nodes: ${re} vs ${A} expected`);return this._nodes.length=H,this}func(A,H=e.nil,re,Pe){return this._blockNode(new i(A,H,re)),Pe&&this.code(Pe).endFunc(),this}endFunc(){return this._endBlockNode(i)}optimize(A=1){for(;A-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(A){return this._currNode.nodes.push(A),this}_blockNode(A){this._currNode.nodes.push(A),this._nodes.push(A)}_endBlockNode(A,H){const re=this._currNode;if(re instanceof A||H&&re instanceof H)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${H?`${A.kind}/${H.kind}`:A.kind}"`)}_elseNode(A){const H=this._currNode;if(!(H instanceof S))throw new Error('CodeGen: "else" without "if"');return this._currNode=H.else=A,this}get _root(){return this._nodes[0]}get _currNode(){const A=this._nodes;return A[A.length-1]}set _currNode(A){const H=this._nodes;H[H.length-1]=A}}c.CodeGen=Qe;function it(fe,A){for(const H in A)fe[H]=(fe[H]||0)+(A[H]||0);return fe}function lt(fe,A){return A instanceof e._CodeOrName?it(fe,A.names):fe}function qe(fe,A,H){if(fe instanceof e.Name)return re(fe);if(!Pe(fe))return fe;return new e._Code(fe._items.reduce((ae,Te)=>(Te instanceof e.Name&&(Te=re(Te)),Te instanceof e._Code?ae.push(...Te._items):ae.push(Te),ae),[]));function re(ae){const Te=H[ae.str];return Te===void 0||A[ae.str]!==1?ae:(delete A[ae.str],Te)}function Pe(ae){return ae instanceof e._Code&&ae._items.some(Te=>Te instanceof e.Name&&A[Te.str]===1&&H[Te.str]!==void 0)}}function $t(fe,A){for(const H in A)fe[H]=(fe[H]||0)-(A[H]||0)}function Ot(fe){return typeof fe=="boolean"||typeof fe=="number"||fe===null?!fe:(0,e._)`!${Ie(fe)}`}c.not=Ot;const pn=w(c.operators.AND);function _n(...fe){return fe.reduce(pn)}c.and=_n;const U=w(c.operators.OR);function Re(...fe){return fe.reduce(U)}c.or=Re;function w(fe){return(A,H)=>A===e.nil?H:H===e.nil?A:(0,e._)`${Ie(A)} ${fe} ${Ie(H)}`}function Ie(fe){return fe instanceof e.Name?fe:(0,e._)`(${fe})`}},66162:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0}),c.ValueScope=c.ValueScopeName=c.Scope=c.varKinds=c.UsedValueState=void 0;const e=t(91475);class n extends Error{constructor(d){super(`CodeGen: "code" for ${d} not defined`),this.value=d.value}}var p;(function(v){v[v.Started=0]="Started",v[v.Completed=1]="Completed"})(p=c.UsedValueState||(c.UsedValueState={})),c.varKinds={const:new e.Name("const"),let:new e.Name("let"),var:new e.Name("var")};class a{constructor({prefixes:d,parent:y}={}){this._names={},this._prefixes=d,this._parent=y}toName(d){return d instanceof e.Name?d:this.name(d)}name(d){return new e.Name(this._newName(d))}_newName(d){const y=this._names[d]||this._nameGroup(d);return`${d}${y.index++}`}_nameGroup(d){var y,h;if(((h=(y=this._parent)===null||y===void 0?void 0:y._prefixes)===null||h===void 0?void 0:h.has(d))||this._prefixes&&!this._prefixes.has(d))throw new Error(`CodeGen: prefix "${d}" is not allowed in this scope`);return this._names[d]={prefix:d,index:0}}}c.Scope=a;class o extends e.Name{constructor(d,y){super(y),this.prefix=d}setValue(d,{property:y,itemIndex:h}){this.value=d,this.scopePath=(0,e._)`.${new e.Name(y)}[${h}]`}}c.ValueScopeName=o;const m=(0,e._)`\n`;class u extends a{constructor(d){super(d),this._values={},this._scope=d.scope,this.opts={...d,_n:d.lines?m:e.nil}}get(){return this._scope}name(d){return new o(d,this._newName(d))}value(d,y){var h;if(y.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const M=this.toName(d),{prefix:L}=M,$=(h=y.key)!==null&&h!==void 0?h:y.ref;let J=this._values[L];if(J){const E=J.get($);if(E)return E}else J=this._values[L]=new Map;J.set($,M);const g=this._scope[L]||(this._scope[L]=[]),S=g.length;return g[S]=y.ref,M.setValue(y,{property:L,itemIndex:S}),M}getValue(d,y){const h=this._values[d];if(!!h)return h.get(y)}scopeRefs(d,y=this._values){return this._reduceValues(y,h=>{if(h.scopePath===void 0)throw new Error(`CodeGen: name "${h}" has no value`);return(0,e._)`${d}${h.scopePath}`})}scopeCode(d=this._values,y,h){return this._reduceValues(d,M=>{if(M.value===void 0)throw new Error(`CodeGen: name "${M}" has no value`);return M.value.code},y,h)}_reduceValues(d,y,h={},M){let L=e.nil;for(const $ in d){const J=d[$];if(!J)continue;const g=h[$]=h[$]||new Map;J.forEach(S=>{if(g.has(S))return;g.set(S,p.Started);let E=y(S);if(E){const I=this.opts.es5?c.varKinds.var:c.varKinds.const;L=(0,e._)`${L}${I} ${S} = ${E};${this.opts._n}`}else if(E=M==null?void 0:M(S))L=(0,e._)`${L}${E}${this.opts._n}`;else throw new n(S);g.set(S,p.Completed)})}return L}}c.ValueScope=u},59428:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0}),c.extendErrors=c.resetErrorsCount=c.reportExtraError=c.reportError=c.keyword$DataError=c.keywordError=void 0;const e=t(82481),n=t(1849),p=t(99583);c.keywordError={message:({keyword:g})=>(0,e.str)`must pass "${g}" keyword validation`},c.keyword$DataError={message:({keyword:g,schemaType:S})=>S?(0,e.str)`"${g}" keyword must be ${S} ($data)`:(0,e.str)`"${g}" keyword is invalid ($data)`};function a(g,S=c.keywordError,E,I){const{it:D}=g,{gen:T,compositeRule:i,allErrors:O}=D,W=h(g,S,E);(I!=null?I:i||O)?v(T,W):d(D,(0,e._)`[${W}]`)}c.reportError=a;function o(g,S=c.keywordError,E){const{it:I}=g,{gen:D,compositeRule:T,allErrors:i}=I,O=h(g,S,E);v(D,O),T||i||d(I,p.default.vErrors)}c.reportExtraError=o;function m(g,S){g.assign(p.default.errors,S),g.if((0,e._)`${p.default.vErrors} !== null`,()=>g.if(S,()=>g.assign((0,e._)`${p.default.vErrors}.length`,S),()=>g.assign(p.default.vErrors,null)))}c.resetErrorsCount=m;function u({gen:g,keyword:S,schemaValue:E,data:I,errsCount:D,it:T}){if(D===void 0)throw new Error("ajv implementation error");const i=g.name("err");g.forRange("i",D,p.default.errors,O=>{g.const(i,(0,e._)`${p.default.vErrors}[${O}]`),g.if((0,e._)`${i}.instancePath === undefined`,()=>g.assign((0,e._)`${i}.instancePath`,(0,e.strConcat)(p.default.instancePath,T.errorPath))),g.assign((0,e._)`${i}.schemaPath`,(0,e.str)`${T.errSchemaPath}/${S}`),T.opts.verbose&&(g.assign((0,e._)`${i}.schema`,E),g.assign((0,e._)`${i}.data`,I))})}c.extendErrors=u;function v(g,S){const E=g.const("err",S);g.if((0,e._)`${p.default.vErrors} === null`,()=>g.assign(p.default.vErrors,(0,e._)`[${E}]`),(0,e._)`${p.default.vErrors}.push(${E})`),g.code((0,e._)`${p.default.errors}++`)}function d(g,S){const{gen:E,validateName:I,schemaEnv:D}=g;D.$async?E.throw((0,e._)`new ${g.ValidationError}(${S})`):(E.assign((0,e._)`${I}.errors`,S),E.return(!1))}const y={keyword:new e.Name("keyword"),schemaPath:new e.Name("schemaPath"),params:new e.Name("params"),propertyName:new e.Name("propertyName"),message:new e.Name("message"),schema:new e.Name("schema"),parentSchema:new e.Name("parentSchema")};function h(g,S,E){const{createErrors:I}=g.it;return I===!1?(0,e._)`{}`:M(g,S,E)}function M(g,S,E={}){const{gen:I,it:D}=g,T=[L(D,E),$(g,E)];return J(g,S,T),I.object(...T)}function L({errorPath:g},{instancePath:S}){const E=S?(0,e.str)`${g}${(0,n.getErrorPath)(S,n.Type.Str)}`:g;return[p.default.instancePath,(0,e.strConcat)(p.default.instancePath,E)]}function $({keyword:g,it:{errSchemaPath:S}},{schemaPath:E,parentSchema:I}){let D=I?S:(0,e.str)`${S}/${g}`;return E&&(D=(0,e.str)`${D}${(0,n.getErrorPath)(E,n.Type.Str)}`),[y.schemaPath,D]}function J(g,{params:S,message:E},I){const{keyword:D,data:T,schemaValue:i,it:O}=g,{opts:W,propertyName:Ce,topSchemaRef:$e,schemaPath:Qe}=O;I.push([y.keyword,D],[y.params,typeof S=="function"?S(g):S||(0,e._)`{}`]),W.messages&&I.push([y.message,typeof E=="function"?E(g):E]),W.verbose&&I.push([y.schema,i],[y.parentSchema,(0,e._)`${$e}${Qe}`],[p.default.data,T]),Ce&&I.push([y.propertyName,Ce])}},62902:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0}),c.resolveSchema=c.getCompilingSchema=c.resolveRef=c.compileSchema=c.SchemaEnv=void 0;const e=t(82481),n=t(14319),p=t(99583),a=t(2710),o=t(1849),m=t(4371);class u{constructor(E){var I;this.refs={},this.dynamicAnchors={};let D;typeof E.schema=="object"&&(D=E.schema),this.schema=E.schema,this.schemaId=E.schemaId,this.root=E.root||this,this.baseId=(I=E.baseId)!==null&&I!==void 0?I:(0,a.normalizeId)(D==null?void 0:D[E.schemaId||"$id"]),this.schemaPath=E.schemaPath,this.localRefs=E.localRefs,this.meta=E.meta,this.$async=D==null?void 0:D.$async,this.refs={}}}c.SchemaEnv=u;function v(S){const E=h.call(this,S);if(E)return E;const I=(0,a.getFullPath)(this.opts.uriResolver,S.root.baseId),{es5:D,lines:T}=this.opts.code,{ownProperties:i}=this.opts,O=new e.CodeGen(this.scope,{es5:D,lines:T,ownProperties:i});let W;S.$async&&(W=O.scopeValue("Error",{ref:n.default,code:(0,e._)`require("ajv/dist/runtime/validation_error").default`}));const Ce=O.scopeName("validate");S.validateName=Ce;const $e={gen:O,allErrors:this.opts.allErrors,data:p.default.data,parentData:p.default.parentData,parentDataProperty:p.default.parentDataProperty,dataNames:[p.default.data],dataPathArr:[e.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:O.scopeValue("schema",this.opts.code.source===!0?{ref:S.schema,code:(0,e.stringify)(S.schema)}:{ref:S.schema}),validateName:Ce,ValidationError:W,schema:S.schema,schemaEnv:S,rootId:I,baseId:S.baseId||I,schemaPath:e.nil,errSchemaPath:S.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,e._)`""`,opts:this.opts,self:this};let Qe;try{this._compilations.add(S),(0,m.validateFunctionCode)($e),O.optimize(this.opts.code.optimize);const it=O.toString();Qe=`${O.scopeRefs(p.default.scope)}return ${it}`,this.opts.code.process&&(Qe=this.opts.code.process(Qe,S));const qe=new Function(`${p.default.self}`,`${p.default.scope}`,Qe)(this,this.scope.get());if(this.scope.value(Ce,{ref:qe}),qe.errors=null,qe.schema=S.schema,qe.schemaEnv=S,S.$async&&(qe.$async=!0),this.opts.code.source===!0&&(qe.source={validateName:Ce,validateCode:it,scopeValues:O._values}),this.opts.unevaluated){const{props:$t,items:Ot}=$e;qe.evaluated={props:$t instanceof e.Name?void 0:$t,items:Ot instanceof e.Name?void 0:Ot,dynamicProps:$t instanceof e.Name,dynamicItems:Ot instanceof e.Name},qe.source&&(qe.source.evaluated=(0,e.stringify)(qe.evaluated))}return S.validate=qe,S}catch(it){throw delete S.validate,delete S.validateName,Qe&&this.logger.error("Error compiling schema, function code:",Qe),it}finally{this._compilations.delete(S)}}c.compileSchema=v;function d(S,E,I){var D;I=(0,a.resolveUrl)(this.opts.uriResolver,E,I);const T=S.refs[I];if(T)return T;let i=L.call(this,S,I);if(i===void 0){const O=(D=S.localRefs)===null||D===void 0?void 0:D[I],{schemaId:W}=this.opts;O&&(i=new u({schema:O,schemaId:W,root:S,baseId:E}))}if(i!==void 0)return S.refs[I]=y.call(this,i)}c.resolveRef=d;function y(S){return(0,a.inlineRef)(S.schema,this.opts.inlineRefs)?S.schema:S.validate?S:v.call(this,S)}function h(S){for(const E of this._compilations)if(M(E,S))return E}c.getCompilingSchema=h;function M(S,E){return S.schema===E.schema&&S.root===E.root&&S.baseId===E.baseId}function L(S,E){let I;for(;typeof(I=this.refs[E])=="string";)E=I;return I||this.schemas[E]||$.call(this,S,E)}function $(S,E){const I=this.opts.uriResolver.parse(E),D=(0,a._getFullPath)(this.opts.uriResolver,I);let T=(0,a.getFullPath)(this.opts.uriResolver,S.baseId,void 0);if(Object.keys(S.schema).length>0&&D===T)return g.call(this,I,S);const i=(0,a.normalizeId)(D),O=this.refs[i]||this.schemas[i];if(typeof O=="string"){const W=$.call(this,S,O);return typeof(W==null?void 0:W.schema)!="object"?void 0:g.call(this,I,W)}if(typeof(O==null?void 0:O.schema)=="object"){if(O.validate||v.call(this,O),i===(0,a.normalizeId)(E)){const{schema:W}=O,{schemaId:Ce}=this.opts,$e=W[Ce];return $e&&(T=(0,a.resolveUrl)(this.opts.uriResolver,T,$e)),new u({schema:W,schemaId:Ce,root:S,baseId:T})}return g.call(this,I,O)}}c.resolveSchema=$;const J=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function g(S,{baseId:E,schema:I,root:D}){var T;if(((T=S.fragment)===null||T===void 0?void 0:T[0])!=="/")return;for(const W of S.fragment.slice(1).split("/")){if(typeof I=="boolean")return;const Ce=I[(0,o.unescapeFragment)(W)];if(Ce===void 0)return;I=Ce;const $e=typeof I=="object"&&I[this.opts.schemaId];!J.has(W)&&$e&&(E=(0,a.resolveUrl)(this.opts.uriResolver,E,$e))}let i;if(typeof I!="boolean"&&I.$ref&&!(0,o.schemaHasRulesButRef)(I,this.RULES)){const W=(0,a.resolveUrl)(this.opts.uriResolver,E,I.$ref);i=$.call(this,D,W)}const{schemaId:O}=this.opts;if(i=i||new u({schema:I,schemaId:O,root:D,baseId:E}),i.schema!==i.root.schema)return i}},99583:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0});const e=t(82481),n={data:new e.Name("data"),valCxt:new e.Name("valCxt"),instancePath:new e.Name("instancePath"),parentData:new e.Name("parentData"),parentDataProperty:new e.Name("parentDataProperty"),rootData:new e.Name("rootData"),dynamicAnchors:new e.Name("dynamicAnchors"),vErrors:new e.Name("vErrors"),errors:new e.Name("errors"),this:new e.Name("this"),self:new e.Name("self"),scope:new e.Name("scope"),json:new e.Name("json"),jsonPos:new e.Name("jsonPos"),jsonLen:new e.Name("jsonLen"),jsonPart:new e.Name("jsonPart")};c.default=n},30283:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0});const e=t(2710);class n extends Error{constructor(a,o,m,u){super(u||`can't resolve reference ${m} from id ${o}`),this.missingRef=(0,e.resolveUrl)(a,o,m),this.missingSchema=(0,e.normalizeId)((0,e.getFullPath)(a,this.missingRef))}}c.default=n},2710:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0}),c.getSchemaRefs=c.resolveUrl=c.normalizeId=c._getFullPath=c.getFullPath=c.inlineRef=void 0;const e=t(1849),n=t(69378),p=t(19522),a=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function o(g,S=!0){return typeof g=="boolean"?!0:S===!0?!u(g):S?v(g)<=S:!1}c.inlineRef=o;const m=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function u(g){for(const S in g){if(m.has(S))return!0;const E=g[S];if(Array.isArray(E)&&E.some(u)||typeof E=="object"&&u(E))return!0}return!1}function v(g){let S=0;for(const E in g){if(E==="$ref")return 1/0;if(S++,!a.has(E)&&(typeof g[E]=="object"&&(0,e.eachItem)(g[E],I=>S+=v(I)),S===1/0))return 1/0}return S}function d(g,S="",E){E!==!1&&(S=M(S));const I=g.parse(S);return y(g,I)}c.getFullPath=d;function y(g,S){return g.serialize(S).split("#")[0]+"#"}c._getFullPath=y;const h=/#\/?$/;function M(g){return g?g.replace(h,""):""}c.normalizeId=M;function L(g,S,E){return E=M(E),g.resolve(S,E)}c.resolveUrl=L;const $=/^[a-z_][-a-z0-9._]*$/i;function J(g,S){if(typeof g=="boolean")return{};const{schemaId:E,uriResolver:I}=this.opts,D=M(g[E]||S),T={"":D},i=d(I,D,!1),O={},W=new Set;return p(g,{allKeys:!0},(Qe,it,lt,qe)=>{if(qe===void 0)return;const $t=i+it;let Ot=T[qe];typeof Qe[E]=="string"&&(Ot=pn.call(this,Qe[E])),_n.call(this,Qe.$anchor),_n.call(this,Qe.$dynamicAnchor),T[it]=Ot;function pn(U){const Re=this.opts.uriResolver.resolve;if(U=M(Ot?Re(Ot,U):U),W.has(U))throw $e(U);W.add(U);let w=this.refs[U];return typeof w=="string"&&(w=this.refs[w]),typeof w=="object"?Ce(Qe,w.schema,U):U!==M($t)&&(U[0]==="#"?(Ce(Qe,O[U],U),O[U]=Qe):this.refs[U]=$t),U}function _n(U){if(typeof U=="string"){if(!$.test(U))throw new Error(`invalid anchor "${U}"`);pn.call(this,`#${U}`)}}}),O;function Ce(Qe,it,lt){if(it!==void 0&&!n(Qe,it))throw $e(lt)}function $e(Qe){return new Error(`reference "${Qe}" resolves to more than one schema`)}}c.getSchemaRefs=J},18288:function(Lt,c){Object.defineProperty(c,"__esModule",{value:!0}),c.getRules=c.isJSONType=void 0;const t=["string","number","integer","boolean","null","object","array"],e=new Set(t);function n(a){return typeof a=="string"&&e.has(a)}c.isJSONType=n;function p(){const a={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...a,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},a.number,a.string,a.array,a.object],post:{rules:[]},all:{},keywords:{}}}c.getRules=p},1849:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0}),c.checkStrictMode=c.getErrorPath=c.Type=c.useFunc=c.setEvaluated=c.evaluatedPropsToName=c.mergeEvaluated=c.eachItem=c.unescapeJsonPointer=c.escapeJsonPointer=c.escapeFragment=c.unescapeFragment=c.schemaRefOrVal=c.schemaHasRulesButRef=c.schemaHasRules=c.checkUnknownRules=c.alwaysValidSchema=c.toHash=void 0;const e=t(82481),n=t(91475);function p(i){const O={};for(const W of i)O[W]=!0;return O}c.toHash=p;function a(i,O){return typeof O=="boolean"?O:Object.keys(O).length===0?!0:(o(i,O),!m(O,i.self.RULES.all))}c.alwaysValidSchema=a;function o(i,O=i.schema){const{opts:W,self:Ce}=i;if(!W.strictSchema||typeof O=="boolean")return;const $e=Ce.RULES.keywords;for(const Qe in O)$e[Qe]||T(i,`unknown keyword: "${Qe}"`)}c.checkUnknownRules=o;function m(i,O){if(typeof i=="boolean")return!i;for(const W in i)if(O[W])return!0;return!1}c.schemaHasRules=m;function u(i,O){if(typeof i=="boolean")return!i;for(const W in i)if(W!=="$ref"&&O.all[W])return!0;return!1}c.schemaHasRulesButRef=u;function v({topSchemaRef:i,schemaPath:O},W,Ce,$e){if(!$e){if(typeof W=="number"||typeof W=="boolean")return W;if(typeof W=="string")return(0,e._)`${W}`}return(0,e._)`${i}${O}${(0,e.getProperty)(Ce)}`}c.schemaRefOrVal=v;function d(i){return M(decodeURIComponent(i))}c.unescapeFragment=d;function y(i){return encodeURIComponent(h(i))}c.escapeFragment=y;function h(i){return typeof i=="number"?`${i}`:i.replace(/~/g,"~0").replace(/\//g,"~1")}c.escapeJsonPointer=h;function M(i){return i.replace(/~1/g,"/").replace(/~0/g,"~")}c.unescapeJsonPointer=M;function L(i,O){if(Array.isArray(i))for(const W of i)O(W);else O(i)}c.eachItem=L;function $({mergeNames:i,mergeToName:O,mergeValues:W,resultToName:Ce}){return($e,Qe,it,lt)=>{const qe=it===void 0?Qe:it instanceof e.Name?(Qe instanceof e.Name?i($e,Qe,it):O($e,Qe,it),it):Qe instanceof e.Name?(O($e,it,Qe),Qe):W(Qe,it);return lt===e.Name&&!(qe instanceof e.Name)?Ce($e,qe):qe}}c.mergeEvaluated={props:$({mergeNames:(i,O,W)=>i.if((0,e._)`${W} !== true && ${O} !== undefined`,()=>{i.if((0,e._)`${O} === true`,()=>i.assign(W,!0),()=>i.assign(W,(0,e._)`${W} || {}`).code((0,e._)`Object.assign(${W}, ${O})`))}),mergeToName:(i,O,W)=>i.if((0,e._)`${W} !== true`,()=>{O===!0?i.assign(W,!0):(i.assign(W,(0,e._)`${W} || {}`),g(i,W,O))}),mergeValues:(i,O)=>i===!0?!0:{...i,...O},resultToName:J}),items:$({mergeNames:(i,O,W)=>i.if((0,e._)`${W} !== true && ${O} !== undefined`,()=>i.assign(W,(0,e._)`${O} === true ? true : ${W} > ${O} ? ${W} : ${O}`)),mergeToName:(i,O,W)=>i.if((0,e._)`${W} !== true`,()=>i.assign(W,O===!0?!0:(0,e._)`${W} > ${O} ? ${W} : ${O}`)),mergeValues:(i,O)=>i===!0?!0:Math.max(i,O),resultToName:(i,O)=>i.var("items",O)})};function J(i,O){if(O===!0)return i.var("props",!0);const W=i.var("props",(0,e._)`{}`);return O!==void 0&&g(i,W,O),W}c.evaluatedPropsToName=J;function g(i,O,W){Object.keys(W).forEach(Ce=>i.assign((0,e._)`${O}${(0,e.getProperty)(Ce)}`,!0))}c.setEvaluated=g;const S={};function E(i,O){return i.scopeValue("func",{ref:O,code:S[O.code]||(S[O.code]=new n._Code(O.code))})}c.useFunc=E;var I;(function(i){i[i.Num=0]="Num",i[i.Str=1]="Str"})(I=c.Type||(c.Type={}));function D(i,O,W){if(i instanceof e.Name){const Ce=O===I.Num;return W?Ce?(0,e._)`"[" + ${i} + "]"`:(0,e._)`"['" + ${i} + "']"`:Ce?(0,e._)`"/" + ${i}`:(0,e._)`"/" + ${i}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return W?(0,e.getProperty)(i).toString():"/"+h(i)}c.getErrorPath=D;function T(i,O,W=i.opts.strictSchema){if(!!W){if(O=`strict mode: ${O}`,W===!0)throw new Error(O);i.self.logger.warn(O)}}c.checkStrictMode=T},66557:function(Lt,c){Object.defineProperty(c,"__esModule",{value:!0}),c.shouldUseRule=c.shouldUseGroup=c.schemaHasRulesForType=void 0;function t({schema:p,self:a},o){const m=a.RULES.types[o];return m&&m!==!0&&e(p,m)}c.schemaHasRulesForType=t;function e(p,a){return a.rules.some(o=>n(p,o))}c.shouldUseGroup=e;function n(p,a){var o;return p[a.keyword]!==void 0||((o=a.definition.implements)===null||o===void 0?void 0:o.some(m=>p[m]!==void 0))}c.shouldUseRule=n},74616:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0}),c.boolOrEmptySchema=c.topBoolOrEmptySchema=void 0;const e=t(59428),n=t(82481),p=t(99583),a={message:"boolean schema is false"};function o(v){const{gen:d,schema:y,validateName:h}=v;y===!1?u(v,!1):typeof y=="object"&&y.$async===!0?d.return(p.default.data):(d.assign((0,n._)`${h}.errors`,null),d.return(!0))}c.topBoolOrEmptySchema=o;function m(v,d){const{gen:y,schema:h}=v;h===!1?(y.var(d,!1),u(v)):y.var(d,!0)}c.boolOrEmptySchema=m;function u(v,d){const{gen:y,data:h}=v,M={gen:y,keyword:"false schema",data:h,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:v};(0,e.reportError)(M,a,void 0,d)}},93277:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0}),c.reportTypeError=c.checkDataTypes=c.checkDataType=c.coerceAndCheckDataType=c.getJSONTypes=c.getSchemaTypes=c.DataType=void 0;const e=t(18288),n=t(66557),p=t(59428),a=t(82481),o=t(1849);var m;(function(I){I[I.Correct=0]="Correct",I[I.Wrong=1]="Wrong"})(m=c.DataType||(c.DataType={}));function u(I){const D=v(I.type);if(D.includes("null")){if(I.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!D.length&&I.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');I.nullable===!0&&D.push("null")}return D}c.getSchemaTypes=u;function v(I){const D=Array.isArray(I)?I:I?[I]:[];if(D.every(e.isJSONType))return D;throw new Error("type must be JSONType or JSONType[]: "+D.join(","))}c.getJSONTypes=v;function d(I,D){const{gen:T,data:i,opts:O}=I,W=h(D,O.coerceTypes),Ce=D.length>0&&!(W.length===0&&D.length===1&&(0,n.schemaHasRulesForType)(I,D[0]));if(Ce){const $e=J(D,i,O.strictNumbers,m.Wrong);T.if($e,()=>{W.length?M(I,D,W):S(I)})}return Ce}c.coerceAndCheckDataType=d;const y=new Set(["string","number","integer","boolean","null"]);function h(I,D){return D?I.filter(T=>y.has(T)||D==="array"&&T==="array"):[]}function M(I,D,T){const{gen:i,data:O,opts:W}=I,Ce=i.let("dataType",(0,a._)`typeof ${O}`),$e=i.let("coerced",(0,a._)`undefined`);W.coerceTypes==="array"&&i.if((0,a._)`${Ce} == 'object' && Array.isArray(${O}) && ${O}.length == 1`,()=>i.assign(O,(0,a._)`${O}[0]`).assign(Ce,(0,a._)`typeof ${O}`).if(J(D,O,W.strictNumbers),()=>i.assign($e,O))),i.if((0,a._)`${$e} !== undefined`);for(const it of T)(y.has(it)||it==="array"&&W.coerceTypes==="array")&&Qe(it);i.else(),S(I),i.endIf(),i.if((0,a._)`${$e} !== undefined`,()=>{i.assign(O,$e),L(I,$e)});function Qe(it){switch(it){case"string":i.elseIf((0,a._)`${Ce} == "number" || ${Ce} == "boolean"`).assign($e,(0,a._)`"" + ${O}`).elseIf((0,a._)`${O} === null`).assign($e,(0,a._)`""`);return;case"number":i.elseIf((0,a._)`${Ce} == "boolean" || ${O} === null
              || (${Ce} == "string" && ${O} && ${O} == +${O})`).assign($e,(0,a._)`+${O}`);return;case"integer":i.elseIf((0,a._)`${Ce} === "boolean" || ${O} === null
              || (${Ce} === "string" && ${O} && ${O} == +${O} && !(${O} % 1))`).assign($e,(0,a._)`+${O}`);return;case"boolean":i.elseIf((0,a._)`${O} === "false" || ${O} === 0 || ${O} === null`).assign($e,!1).elseIf((0,a._)`${O} === "true" || ${O} === 1`).assign($e,!0);return;case"null":i.elseIf((0,a._)`${O} === "" || ${O} === 0 || ${O} === false`),i.assign($e,null);return;case"array":i.elseIf((0,a._)`${Ce} === "string" || ${Ce} === "number"
              || ${Ce} === "boolean" || ${O} === null`).assign($e,(0,a._)`[${O}]`)}}}function L({gen:I,parentData:D,parentDataProperty:T},i){I.if((0,a._)`${D} !== undefined`,()=>I.assign((0,a._)`${D}[${T}]`,i))}function $(I,D,T,i=m.Correct){const O=i===m.Correct?a.operators.EQ:a.operators.NEQ;let W;switch(I){case"null":return(0,a._)`${D} ${O} null`;case"array":W=(0,a._)`Array.isArray(${D})`;break;case"object":W=(0,a._)`${D} && typeof ${D} == "object" && !Array.isArray(${D})`;break;case"integer":W=Ce((0,a._)`!(${D} % 1) && !isNaN(${D})`);break;case"number":W=Ce();break;default:return(0,a._)`typeof ${D} ${O} ${I}`}return i===m.Correct?W:(0,a.not)(W);function Ce($e=a.nil){return(0,a.and)((0,a._)`typeof ${D} == "number"`,$e,T?(0,a._)`isFinite(${D})`:a.nil)}}c.checkDataType=$;function J(I,D,T,i){if(I.length===1)return $(I[0],D,T,i);let O;const W=(0,o.toHash)(I);if(W.array&&W.object){const Ce=(0,a._)`typeof ${D} != "object"`;O=W.null?Ce:(0,a._)`!${D} || ${Ce}`,delete W.null,delete W.array,delete W.object}else O=a.nil;W.number&&delete W.integer;for(const Ce in W)O=(0,a.and)(O,$(Ce,D,T,i));return O}c.checkDataTypes=J;const g={message:({schema:I})=>`must be ${I}`,params:({schema:I,schemaValue:D})=>typeof I=="string"?(0,a._)`{type: ${I}}`:(0,a._)`{type: ${D}}`};function S(I){const D=E(I);(0,p.reportError)(D,g)}c.reportTypeError=S;function E(I){const{gen:D,data:T,schema:i}=I,O=(0,o.schemaRefOrVal)(I,i,"type");return{gen:D,keyword:"type",data:T,schema:i.type,schemaCode:O,schemaValue:O,parentSchema:i,params:{},it:I}}},35192:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0}),c.assignDefaults=void 0;const e=t(82481),n=t(1849);function p(o,m){const{properties:u,items:v}=o.schema;if(m==="object"&&u)for(const d in u)a(o,d,u[d].default);else m==="array"&&Array.isArray(v)&&v.forEach((d,y)=>a(o,y,d.default))}c.assignDefaults=p;function a(o,m,u){const{gen:v,compositeRule:d,data:y,opts:h}=o;if(u===void 0)return;const M=(0,e._)`${y}${(0,e.getProperty)(m)}`;if(d){(0,n.checkStrictMode)(o,`default is ignored for: ${M}`);return}let L=(0,e._)`${M} === undefined`;h.useDefaults==="empty"&&(L=(0,e._)`${L} || ${M} === null || ${M} === ""`),v.if(L,(0,e._)`${M} = ${(0,e.stringify)(u)}`)}},4371:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0}),c.getData=c.KeywordCxt=c.validateFunctionCode=void 0;const e=t(74616),n=t(93277),p=t(66557),a=t(93277),o=t(35192),m=t(83558),u=t(20521),v=t(82481),d=t(99583),y=t(2710),h=t(1849),M=t(59428);function L(te){if(i(te)&&(W(te),T(te))){S(te);return}$(te,()=>(0,e.topBoolOrEmptySchema)(te))}c.validateFunctionCode=L;function $({gen:te,validateName:ee,schema:Le,schemaEnv:le,opts:Q},xe){Q.code.es5?te.func(ee,(0,v._)`${d.default.data}, ${d.default.valCxt}`,le.$async,()=>{te.code((0,v._)`"use strict"; ${I(Le,Q)}`),g(te,Q),te.code(xe)}):te.func(ee,(0,v._)`${d.default.data}, ${J(Q)}`,le.$async,()=>te.code(I(Le,Q)).code(xe))}function J(te){return(0,v._)`{${d.default.instancePath}="", ${d.default.parentData}, ${d.default.parentDataProperty}, ${d.default.rootData}=${d.default.data}${te.dynamicRef?(0,v._)`, ${d.default.dynamicAnchors}={}`:v.nil}}={}`}function g(te,ee){te.if(d.default.valCxt,()=>{te.var(d.default.instancePath,(0,v._)`${d.default.valCxt}.${d.default.instancePath}`),te.var(d.default.parentData,(0,v._)`${d.default.valCxt}.${d.default.parentData}`),te.var(d.default.parentDataProperty,(0,v._)`${d.default.valCxt}.${d.default.parentDataProperty}`),te.var(d.default.rootData,(0,v._)`${d.default.valCxt}.${d.default.rootData}`),ee.dynamicRef&&te.var(d.default.dynamicAnchors,(0,v._)`${d.default.valCxt}.${d.default.dynamicAnchors}`)},()=>{te.var(d.default.instancePath,(0,v._)`""`),te.var(d.default.parentData,(0,v._)`undefined`),te.var(d.default.parentDataProperty,(0,v._)`undefined`),te.var(d.default.rootData,d.default.data),ee.dynamicRef&&te.var(d.default.dynamicAnchors,(0,v._)`{}`)})}function S(te){const{schema:ee,opts:Le,gen:le}=te;$(te,()=>{Le.$comment&&ee.$comment&&qe(te),Qe(te),le.let(d.default.vErrors,null),le.let(d.default.errors,0),Le.unevaluated&&E(te),Ce(te),$t(te)})}function E(te){const{gen:ee,validateName:Le}=te;te.evaluated=ee.const("evaluated",(0,v._)`${Le}.evaluated`),ee.if((0,v._)`${te.evaluated}.dynamicProps`,()=>ee.assign((0,v._)`${te.evaluated}.props`,(0,v._)`undefined`)),ee.if((0,v._)`${te.evaluated}.dynamicItems`,()=>ee.assign((0,v._)`${te.evaluated}.items`,(0,v._)`undefined`))}function I(te,ee){const Le=typeof te=="object"&&te[ee.schemaId];return Le&&(ee.code.source||ee.code.process)?(0,v._)`/*# sourceURL=${Le} */`:v.nil}function D(te,ee){if(i(te)&&(W(te),T(te))){O(te,ee);return}(0,e.boolOrEmptySchema)(te,ee)}function T({schema:te,self:ee}){if(typeof te=="boolean")return!te;for(const Le in te)if(ee.RULES.all[Le])return!0;return!1}function i(te){return typeof te.schema!="boolean"}function O(te,ee){const{schema:Le,gen:le,opts:Q}=te;Q.$comment&&Le.$comment&&qe(te),it(te),lt(te);const xe=le.const("_errs",d.default.errors);Ce(te,xe),le.var(ee,(0,v._)`${xe} === ${d.default.errors}`)}function W(te){(0,h.checkUnknownRules)(te),$e(te)}function Ce(te,ee){if(te.opts.jtd)return pn(te,[],!1,ee);const Le=(0,n.getSchemaTypes)(te.schema),le=(0,n.coerceAndCheckDataType)(te,Le);pn(te,Le,!le,ee)}function $e(te){const{schema:ee,errSchemaPath:Le,opts:le,self:Q}=te;ee.$ref&&le.ignoreKeywordsWithRef&&(0,h.schemaHasRulesButRef)(ee,Q.RULES)&&Q.logger.warn(`$ref: keywords ignored in schema at path "${Le}"`)}function Qe(te){const{schema:ee,opts:Le}=te;ee.default!==void 0&&Le.useDefaults&&Le.strictSchema&&(0,h.checkStrictMode)(te,"default is ignored in the schema root")}function it(te){const ee=te.schema[te.opts.schemaId];ee&&(te.baseId=(0,y.resolveUrl)(te.opts.uriResolver,te.baseId,ee))}function lt(te){if(te.schema.$async&&!te.schemaEnv.$async)throw new Error("async schema in sync schema")}function qe({gen:te,schemaEnv:ee,schema:Le,errSchemaPath:le,opts:Q}){const xe=Le.$comment;if(Q.$comment===!0)te.code((0,v._)`${d.default.self}.logger.log(${xe})`);else if(typeof Q.$comment=="function"){const at=(0,v.str)`${le}/$comment`,Zt=te.scopeValue("root",{ref:ee.root});te.code((0,v._)`${d.default.self}.opts.$comment(${xe}, ${at}, ${Zt}.schema)`)}}function $t(te){const{gen:ee,schemaEnv:Le,validateName:le,ValidationError:Q,opts:xe}=te;Le.$async?ee.if((0,v._)`${d.default.errors} === 0`,()=>ee.return(d.default.data),()=>ee.throw((0,v._)`new ${Q}(${d.default.vErrors})`)):(ee.assign((0,v._)`${le}.errors`,d.default.vErrors),xe.unevaluated&&Ot(te),ee.return((0,v._)`${d.default.errors} === 0`))}function Ot({gen:te,evaluated:ee,props:Le,items:le}){Le instanceof v.Name&&te.assign((0,v._)`${ee}.props`,Le),le instanceof v.Name&&te.assign((0,v._)`${ee}.items`,le)}function pn(te,ee,Le,le){const{gen:Q,schema:xe,data:at,allErrors:Zt,opts:Dt,self:en}=te,{RULES:on}=en;if(xe.$ref&&(Dt.ignoreKeywordsWithRef||!(0,h.schemaHasRulesButRef)(xe,on))){Q.block(()=>Pe(te,"$ref",on.all.$ref.definition));return}Dt.jtd||U(te,ee),Q.block(()=>{for(const Ye of on.rules)gn(Ye);gn(on.post)});function gn(Ye){!(0,p.shouldUseGroup)(xe,Ye)||(Ye.type?(Q.if((0,a.checkDataType)(Ye.type,at,Dt.strictNumbers)),_n(te,Ye),ee.length===1&&ee[0]===Ye.type&&Le&&(Q.else(),(0,a.reportTypeError)(te)),Q.endIf()):_n(te,Ye),Zt||Q.if((0,v._)`${d.default.errors} === ${le||0}`))}}function _n(te,ee){const{gen:Le,schema:le,opts:{useDefaults:Q}}=te;Q&&(0,o.assignDefaults)(te,ee.type),Le.block(()=>{for(const xe of ee.rules)(0,p.shouldUseRule)(le,xe)&&Pe(te,xe.keyword,xe.definition,ee.type)})}function U(te,ee){te.schemaEnv.meta||!te.opts.strictTypes||(Re(te,ee),te.opts.allowUnionTypes||w(te,ee),Ie(te,te.dataTypes))}function Re(te,ee){if(!!ee.length){if(!te.dataTypes.length){te.dataTypes=ee;return}ee.forEach(Le=>{A(te.dataTypes,Le)||H(te,`type "${Le}" not allowed by context "${te.dataTypes.join(",")}"`)}),te.dataTypes=te.dataTypes.filter(Le=>A(ee,Le))}}function w(te,ee){ee.length>1&&!(ee.length===2&&ee.includes("null"))&&H(te,"use allowUnionTypes to allow union type keyword")}function Ie(te,ee){const Le=te.self.RULES.all;for(const le in Le){const Q=Le[le];if(typeof Q=="object"&&(0,p.shouldUseRule)(te.schema,Q)){const{type:xe}=Q.definition;xe.length&&!xe.some(at=>fe(ee,at))&&H(te,`missing type "${xe.join(",")}" for keyword "${le}"`)}}}function fe(te,ee){return te.includes(ee)||ee==="number"&&te.includes("integer")}function A(te,ee){return te.includes(ee)||ee==="integer"&&te.includes("number")}function H(te,ee){ee+=` at "${te.schemaEnv.baseId+te.errSchemaPath}" (strictTypes)`,(0,h.checkStrictMode)(te,ee,te.opts.strictTypes)}class re{constructor(ee,Le,le){if((0,m.validateKeywordUsage)(ee,Le,le),this.gen=ee.gen,this.allErrors=ee.allErrors,this.keyword=le,this.data=ee.data,this.schema=ee.schema[le],this.$data=Le.$data&&ee.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,h.schemaRefOrVal)(ee,this.schema,le,this.$data),this.schemaType=Le.schemaType,this.parentSchema=ee.schema,this.params={},this.it=ee,this.def=Le,this.$data)this.schemaCode=ee.gen.const("vSchema",Et(this.$data,ee));else if(this.schemaCode=this.schemaValue,!(0,m.validSchemaType)(this.schema,Le.schemaType,Le.allowUndefined))throw new Error(`${le} value must be ${JSON.stringify(Le.schemaType)}`);("code"in Le?Le.trackErrors:Le.errors!==!1)&&(this.errsCount=ee.gen.const("_errs",d.default.errors))}result(ee,Le,le){this.failResult((0,v.not)(ee),Le,le)}failResult(ee,Le,le){this.gen.if(ee),le?le():this.error(),Le?(this.gen.else(),Le(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(ee,Le){this.failResult((0,v.not)(ee),void 0,Le)}fail(ee){if(ee===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(ee),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(ee){if(!this.$data)return this.fail(ee);const{schemaCode:Le}=this;this.fail((0,v._)`${Le} !== undefined && (${(0,v.or)(this.invalid$data(),ee)})`)}error(ee,Le,le){if(Le){this.setParams(Le),this._error(ee,le),this.setParams({});return}this._error(ee,le)}_error(ee,Le){(ee?M.reportExtraError:M.reportError)(this,this.def.error,Le)}$dataError(){(0,M.reportError)(this,this.def.$dataError||M.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,M.resetErrorsCount)(this.gen,this.errsCount)}ok(ee){this.allErrors||this.gen.if(ee)}setParams(ee,Le){Le?Object.assign(this.params,ee):this.params=ee}block$data(ee,Le,le=v.nil){this.gen.block(()=>{this.check$data(ee,le),Le()})}check$data(ee=v.nil,Le=v.nil){if(!this.$data)return;const{gen:le,schemaCode:Q,schemaType:xe,def:at}=this;le.if((0,v.or)((0,v._)`${Q} === undefined`,Le)),ee!==v.nil&&le.assign(ee,!0),(xe.length||at.validateSchema)&&(le.elseIf(this.invalid$data()),this.$dataError(),ee!==v.nil&&le.assign(ee,!1)),le.else()}invalid$data(){const{gen:ee,schemaCode:Le,schemaType:le,def:Q,it:xe}=this;return(0,v.or)(at(),Zt());function at(){if(le.length){if(!(Le instanceof v.Name))throw new Error("ajv implementation error");const Dt=Array.isArray(le)?le:[le];return(0,v._)`${(0,a.checkDataTypes)(Dt,Le,xe.opts.strictNumbers,a.DataType.Wrong)}`}return v.nil}function Zt(){if(Q.validateSchema){const Dt=ee.scopeValue("validate$data",{ref:Q.validateSchema});return(0,v._)`!${Dt}(${Le})`}return v.nil}}subschema(ee,Le){const le=(0,u.getSubschema)(this.it,ee);(0,u.extendSubschemaData)(le,this.it,ee),(0,u.extendSubschemaMode)(le,ee);const Q={...this.it,...le,items:void 0,props:void 0};return D(Q,Le),Q}mergeEvaluated(ee,Le){const{it:le,gen:Q}=this;!le.opts.unevaluated||(le.props!==!0&&ee.props!==void 0&&(le.props=h.mergeEvaluated.props(Q,ee.props,le.props,Le)),le.items!==!0&&ee.items!==void 0&&(le.items=h.mergeEvaluated.items(Q,ee.items,le.items,Le)))}mergeValidEvaluated(ee,Le){const{it:le,gen:Q}=this;if(le.opts.unevaluated&&(le.props!==!0||le.items!==!0))return Q.if(Le,()=>this.mergeEvaluated(ee,v.Name)),!0}}c.KeywordCxt=re;function Pe(te,ee,Le,le){const Q=new re(te,Le,ee);"code"in Le?Le.code(Q,le):Q.$data&&Le.validate?(0,m.funcKeywordCode)(Q,Le):"macro"in Le?(0,m.macroKeywordCode)(Q,Le):(Le.compile||Le.validate)&&(0,m.funcKeywordCode)(Q,Le)}const ae=/^\/(?:[^~]|~0|~1)*$/,Te=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Et(te,{dataLevel:ee,dataNames:Le,dataPathArr:le}){let Q,xe;if(te==="")return d.default.rootData;if(te[0]==="/"){if(!ae.test(te))throw new Error(`Invalid JSON-pointer: ${te}`);Q=te,xe=d.default.rootData}else{const en=Te.exec(te);if(!en)throw new Error(`Invalid JSON-pointer: ${te}`);const on=+en[1];if(Q=en[2],Q==="#"){if(on>=ee)throw new Error(Dt("property/index",on));return le[ee-on]}if(on>ee)throw new Error(Dt("data",on));if(xe=Le[ee-on],!Q)return xe}let at=xe;const Zt=Q.split("/");for(const en of Zt)en&&(xe=(0,v._)`${xe}${(0,v.getProperty)((0,h.unescapeJsonPointer)(en))}`,at=(0,v._)`${at} && ${xe}`);return at;function Dt(en,on){return`Cannot access ${en} ${on} levels up, current level is ${ee}`}}c.getData=Et},83558:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0}),c.validateKeywordUsage=c.validSchemaType=c.funcKeywordCode=c.macroKeywordCode=void 0;const e=t(82481),n=t(99583),p=t(9280),a=t(59428);function o(L,$){const{gen:J,keyword:g,schema:S,parentSchema:E,it:I}=L,D=$.macro.call(I.self,S,E,I),T=y(J,g,D);I.opts.validateSchema!==!1&&I.self.validateSchema(D,!0);const i=J.name("valid");L.subschema({schema:D,schemaPath:e.nil,errSchemaPath:`${I.errSchemaPath}/${g}`,topSchemaRef:T,compositeRule:!0},i),L.pass(i,()=>L.error(!0))}c.macroKeywordCode=o;function m(L,$){var J;const{gen:g,keyword:S,schema:E,parentSchema:I,$data:D,it:T}=L;d(T,$);const i=!D&&$.compile?$.compile.call(T.self,E,I,T):$.validate,O=y(g,S,i),W=g.let("valid");L.block$data(W,Ce),L.ok((J=$.valid)!==null&&J!==void 0?J:W);function Ce(){if($.errors===!1)it(),$.modifying&&u(L),lt(()=>L.error());else{const qe=$.async?$e():Qe();$.modifying&&u(L),lt(()=>v(L,qe))}}function $e(){const qe=g.let("ruleErrs",null);return g.try(()=>it((0,e._)`await `),$t=>g.assign(W,!1).if((0,e._)`${$t} instanceof ${T.ValidationError}`,()=>g.assign(qe,(0,e._)`${$t}.errors`),()=>g.throw($t))),qe}function Qe(){const qe=(0,e._)`${O}.errors`;return g.assign(qe,null),it(e.nil),qe}function it(qe=$.async?(0,e._)`await `:e.nil){const $t=T.opts.passContext?n.default.this:n.default.self,Ot=!("compile"in $&&!D||$.schema===!1);g.assign(W,(0,e._)`${qe}${(0,p.callValidateCode)(L,O,$t,Ot)}`,$.modifying)}function lt(qe){var $t;g.if((0,e.not)(($t=$.valid)!==null&&$t!==void 0?$t:W),qe)}}c.funcKeywordCode=m;function u(L){const{gen:$,data:J,it:g}=L;$.if(g.parentData,()=>$.assign(J,(0,e._)`${g.parentData}[${g.parentDataProperty}]`))}function v(L,$){const{gen:J}=L;J.if((0,e._)`Array.isArray(${$})`,()=>{J.assign(n.default.vErrors,(0,e._)`${n.default.vErrors} === null ? ${$} : ${n.default.vErrors}.concat(${$})`).assign(n.default.errors,(0,e._)`${n.default.vErrors}.length`),(0,a.extendErrors)(L)},()=>L.error())}function d({schemaEnv:L},$){if($.async&&!L.$async)throw new Error("async keyword in sync schema")}function y(L,$,J){if(J===void 0)throw new Error(`keyword "${$}" failed to compile`);return L.scopeValue("keyword",typeof J=="function"?{ref:J}:{ref:J,code:(0,e.stringify)(J)})}function h(L,$,J=!1){return!$.length||$.some(g=>g==="array"?Array.isArray(L):g==="object"?L&&typeof L=="object"&&!Array.isArray(L):typeof L==g||J&&typeof L=="undefined")}c.validSchemaType=h;function M({schema:L,opts:$,self:J,errSchemaPath:g},S,E){if(Array.isArray(S.keyword)?!S.keyword.includes(E):S.keyword!==E)throw new Error("ajv implementation error");const I=S.dependencies;if(I!=null&&I.some(D=>!Object.prototype.hasOwnProperty.call(L,D)))throw new Error(`parent schema must have dependencies of ${E}: ${I.join(",")}`);if(S.validateSchema&&!S.validateSchema(L[E])){const T=`keyword "${E}" value is invalid at path "${g}": `+J.errorsText(S.validateSchema.errors);if($.validateSchema==="log")J.logger.error(T);else throw new Error(T)}}c.validateKeywordUsage=M},20521:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0}),c.extendSubschemaMode=c.extendSubschemaData=c.getSubschema=void 0;const e=t(82481),n=t(1849);function p(m,{keyword:u,schemaProp:v,schema:d,schemaPath:y,errSchemaPath:h,topSchemaRef:M}){if(u!==void 0&&d!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(u!==void 0){const L=m.schema[u];return v===void 0?{schema:L,schemaPath:(0,e._)`${m.schemaPath}${(0,e.getProperty)(u)}`,errSchemaPath:`${m.errSchemaPath}/${u}`}:{schema:L[v],schemaPath:(0,e._)`${m.schemaPath}${(0,e.getProperty)(u)}${(0,e.getProperty)(v)}`,errSchemaPath:`${m.errSchemaPath}/${u}/${(0,n.escapeFragment)(v)}`}}if(d!==void 0){if(y===void 0||h===void 0||M===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:d,schemaPath:y,topSchemaRef:M,errSchemaPath:h}}throw new Error('either "keyword" or "schema" must be passed')}c.getSubschema=p;function a(m,u,{dataProp:v,dataPropType:d,data:y,dataTypes:h,propertyName:M}){if(y!==void 0&&v!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:L}=u;if(v!==void 0){const{errorPath:J,dataPathArr:g,opts:S}=u,E=L.let("data",(0,e._)`${u.data}${(0,e.getProperty)(v)}`,!0);$(E),m.errorPath=(0,e.str)`${J}${(0,n.getErrorPath)(v,d,S.jsPropertySyntax)}`,m.parentDataProperty=(0,e._)`${v}`,m.dataPathArr=[...g,m.parentDataProperty]}if(y!==void 0){const J=y instanceof e.Name?y:L.let("data",y,!0);$(J),M!==void 0&&(m.propertyName=M)}h&&(m.dataTypes=h);function $(J){m.data=J,m.dataLevel=u.dataLevel+1,m.dataTypes=[],u.definedProperties=new Set,m.parentData=u.data,m.dataNames=[...u.dataNames,J]}}c.extendSubschemaData=a;function o(m,{jtdDiscriminator:u,jtdMetadata:v,compositeRule:d,createErrors:y,allErrors:h}){d!==void 0&&(m.compositeRule=d),y!==void 0&&(m.createErrors=y),h!==void 0&&(m.allErrors=h),m.jtdDiscriminator=u,m.jtdMetadata=v}c.extendSubschemaMode=o},61889:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0}),c.CodeGen=c.Name=c.nil=c.stringify=c.str=c._=c.KeywordCxt=void 0;var e=t(4371);Object.defineProperty(c,"KeywordCxt",{enumerable:!0,get:function(){return e.KeywordCxt}});var n=t(82481);Object.defineProperty(c,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(c,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(c,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(c,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(c,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(c,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const p=t(14319),a=t(30283),o=t(18288),m=t(62902),u=t(82481),v=t(2710),d=t(93277),y=t(1849),h=t(85310),M=t(3075),L=(Re,w)=>new RegExp(Re,w);L.code="new RegExp";const $=["removeAdditional","useDefaults","coerceTypes"],J=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},S={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},E=200;function I(Re){var w,Ie,fe,A,H,re,Pe,ae,Te,Et,te,ee,Le,le,Q,xe,at,Zt,Dt,en,on,gn,Ye,Y,ce;const _e=Re.strict,Ze=(w=Re.code)===null||w===void 0?void 0:w.optimize,ie=Ze===!0||Ze===void 0?1:Ze||0,de=(fe=(Ie=Re.code)===null||Ie===void 0?void 0:Ie.regExp)!==null&&fe!==void 0?fe:L,ve=(A=Re.uriResolver)!==null&&A!==void 0?A:M.default;return{strictSchema:(re=(H=Re.strictSchema)!==null&&H!==void 0?H:_e)!==null&&re!==void 0?re:!0,strictNumbers:(ae=(Pe=Re.strictNumbers)!==null&&Pe!==void 0?Pe:_e)!==null&&ae!==void 0?ae:!0,strictTypes:(Et=(Te=Re.strictTypes)!==null&&Te!==void 0?Te:_e)!==null&&Et!==void 0?Et:"log",strictTuples:(ee=(te=Re.strictTuples)!==null&&te!==void 0?te:_e)!==null&&ee!==void 0?ee:"log",strictRequired:(le=(Le=Re.strictRequired)!==null&&Le!==void 0?Le:_e)!==null&&le!==void 0?le:!1,code:Re.code?{...Re.code,optimize:ie,regExp:de}:{optimize:ie,regExp:de},loopRequired:(Q=Re.loopRequired)!==null&&Q!==void 0?Q:E,loopEnum:(xe=Re.loopEnum)!==null&&xe!==void 0?xe:E,meta:(at=Re.meta)!==null&&at!==void 0?at:!0,messages:(Zt=Re.messages)!==null&&Zt!==void 0?Zt:!0,inlineRefs:(Dt=Re.inlineRefs)!==null&&Dt!==void 0?Dt:!0,schemaId:(en=Re.schemaId)!==null&&en!==void 0?en:"$id",addUsedSchema:(on=Re.addUsedSchema)!==null&&on!==void 0?on:!0,validateSchema:(gn=Re.validateSchema)!==null&&gn!==void 0?gn:!0,validateFormats:(Ye=Re.validateFormats)!==null&&Ye!==void 0?Ye:!0,unicodeRegExp:(Y=Re.unicodeRegExp)!==null&&Y!==void 0?Y:!0,int32range:(ce=Re.int32range)!==null&&ce!==void 0?ce:!0,uriResolver:ve}}class D{constructor(w={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,w=this.opts={...w,...I(w)};const{es5:Ie,lines:fe}=this.opts.code;this.scope=new u.ValueScope({scope:{},prefixes:J,es5:Ie,lines:fe}),this.logger=it(w.logger);const A=w.validateFormats;w.validateFormats=!1,this.RULES=(0,o.getRules)(),T.call(this,g,w,"NOT SUPPORTED"),T.call(this,S,w,"DEPRECATED","warn"),this._metaOpts=$e.call(this),w.formats&&W.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),w.keywords&&Ce.call(this,w.keywords),typeof w.meta=="object"&&this.addMetaSchema(w.meta),O.call(this),w.validateFormats=A}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:w,meta:Ie,schemaId:fe}=this.opts;let A=h;fe==="id"&&(A={...h},A.id=A.$id,delete A.$id),Ie&&w&&this.addMetaSchema(A,A[fe],!1)}defaultMeta(){const{meta:w,schemaId:Ie}=this.opts;return this.opts.defaultMeta=typeof w=="object"?w[Ie]||w:void 0}validate(w,Ie){let fe;if(typeof w=="string"){if(fe=this.getSchema(w),!fe)throw new Error(`no schema with key or ref "${w}"`)}else fe=this.compile(w);const A=fe(Ie);return"$async"in fe||(this.errors=fe.errors),A}compile(w,Ie){const fe=this._addSchema(w,Ie);return fe.validate||this._compileSchemaEnv(fe)}compileAsync(w,Ie){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:fe}=this.opts;return A.call(this,w,Ie);async function A(Et,te){await H.call(this,Et.$schema);const ee=this._addSchema(Et,te);return ee.validate||re.call(this,ee)}async function H(Et){Et&&!this.getSchema(Et)&&await A.call(this,{$ref:Et},!0)}async function re(Et){try{return this._compileSchemaEnv(Et)}catch(te){if(!(te instanceof a.default))throw te;return Pe.call(this,te),await ae.call(this,te.missingSchema),re.call(this,Et)}}function Pe({missingSchema:Et,missingRef:te}){if(this.refs[Et])throw new Error(`AnySchema ${Et} is loaded but ${te} cannot be resolved`)}async function ae(Et){const te=await Te.call(this,Et);this.refs[Et]||await H.call(this,te.$schema),this.refs[Et]||this.addSchema(te,Et,Ie)}async function Te(Et){const te=this._loading[Et];if(te)return te;try{return await(this._loading[Et]=fe(Et))}finally{delete this._loading[Et]}}}addSchema(w,Ie,fe,A=this.opts.validateSchema){if(Array.isArray(w)){for(const re of w)this.addSchema(re,void 0,fe,A);return this}let H;if(typeof w=="object"){const{schemaId:re}=this.opts;if(H=w[re],H!==void 0&&typeof H!="string")throw new Error(`schema ${re} must be string`)}return Ie=(0,v.normalizeId)(Ie||H),this._checkUnique(Ie),this.schemas[Ie]=this._addSchema(w,fe,Ie,A,!0),this}addMetaSchema(w,Ie,fe=this.opts.validateSchema){return this.addSchema(w,Ie,!0,fe),this}validateSchema(w,Ie){if(typeof w=="boolean")return!0;let fe;if(fe=w.$schema,fe!==void 0&&typeof fe!="string")throw new Error("$schema must be a string");if(fe=fe||this.opts.defaultMeta||this.defaultMeta(),!fe)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const A=this.validate(fe,w);if(!A&&Ie){const H="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(H);else throw new Error(H)}return A}getSchema(w){let Ie;for(;typeof(Ie=i.call(this,w))=="string";)w=Ie;if(Ie===void 0){const{schemaId:fe}=this.opts,A=new m.SchemaEnv({schema:{},schemaId:fe});if(Ie=m.resolveSchema.call(this,A,w),!Ie)return;this.refs[w]=Ie}return Ie.validate||this._compileSchemaEnv(Ie)}removeSchema(w){if(w instanceof RegExp)return this._removeAllSchemas(this.schemas,w),this._removeAllSchemas(this.refs,w),this;switch(typeof w){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const Ie=i.call(this,w);return typeof Ie=="object"&&this._cache.delete(Ie.schema),delete this.schemas[w],delete this.refs[w],this}case"object":{const Ie=w;this._cache.delete(Ie);let fe=w[this.opts.schemaId];return fe&&(fe=(0,v.normalizeId)(fe),delete this.schemas[fe],delete this.refs[fe]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(w){for(const Ie of w)this.addKeyword(Ie);return this}addKeyword(w,Ie){let fe;if(typeof w=="string")fe=w,typeof Ie=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),Ie.keyword=fe);else if(typeof w=="object"&&Ie===void 0){if(Ie=w,fe=Ie.keyword,Array.isArray(fe)&&!fe.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(qe.call(this,fe,Ie),!Ie)return(0,y.eachItem)(fe,H=>$t.call(this,H)),this;pn.call(this,Ie);const A={...Ie,type:(0,d.getJSONTypes)(Ie.type),schemaType:(0,d.getJSONTypes)(Ie.schemaType)};return(0,y.eachItem)(fe,A.type.length===0?H=>$t.call(this,H,A):H=>A.type.forEach(re=>$t.call(this,H,A,re))),this}getKeyword(w){const Ie=this.RULES.all[w];return typeof Ie=="object"?Ie.definition:!!Ie}removeKeyword(w){const{RULES:Ie}=this;delete Ie.keywords[w],delete Ie.all[w];for(const fe of Ie.rules){const A=fe.rules.findIndex(H=>H.keyword===w);A>=0&&fe.rules.splice(A,1)}return this}addFormat(w,Ie){return typeof Ie=="string"&&(Ie=new RegExp(Ie)),this.formats[w]=Ie,this}errorsText(w=this.errors,{separator:Ie=", ",dataVar:fe="data"}={}){return!w||w.length===0?"No errors":w.map(A=>`${fe}${A.instancePath} ${A.message}`).reduce((A,H)=>A+Ie+H)}$dataMetaSchema(w,Ie){const fe=this.RULES.all;w=JSON.parse(JSON.stringify(w));for(const A of Ie){const H=A.split("/").slice(1);let re=w;for(const Pe of H)re=re[Pe];for(const Pe in fe){const ae=fe[Pe];if(typeof ae!="object")continue;const{$data:Te}=ae.definition,Et=re[Pe];Te&&Et&&(re[Pe]=U(Et))}}return w}_removeAllSchemas(w,Ie){for(const fe in w){const A=w[fe];(!Ie||Ie.test(fe))&&(typeof A=="string"?delete w[fe]:A&&!A.meta&&(this._cache.delete(A.schema),delete w[fe]))}}_addSchema(w,Ie,fe,A=this.opts.validateSchema,H=this.opts.addUsedSchema){let re;const{schemaId:Pe}=this.opts;if(typeof w=="object")re=w[Pe];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof w!="boolean")throw new Error("schema must be object or boolean")}let ae=this._cache.get(w);if(ae!==void 0)return ae;fe=(0,v.normalizeId)(re||fe);const Te=v.getSchemaRefs.call(this,w,fe);return ae=new m.SchemaEnv({schema:w,schemaId:Pe,meta:Ie,baseId:fe,localRefs:Te}),this._cache.set(ae.schema,ae),H&&!fe.startsWith("#")&&(fe&&this._checkUnique(fe),this.refs[fe]=ae),A&&this.validateSchema(w,!0),ae}_checkUnique(w){if(this.schemas[w]||this.refs[w])throw new Error(`schema with key or id "${w}" already exists`)}_compileSchemaEnv(w){if(w.meta?this._compileMetaSchema(w):m.compileSchema.call(this,w),!w.validate)throw new Error("ajv implementation error");return w.validate}_compileMetaSchema(w){const Ie=this.opts;this.opts=this._metaOpts;try{m.compileSchema.call(this,w)}finally{this.opts=Ie}}}c.default=D,D.ValidationError=p.default,D.MissingRefError=a.default;function T(Re,w,Ie,fe="error"){for(const A in Re){const H=A;H in w&&this.logger[fe](`${Ie}: option ${A}. ${Re[H]}`)}}function i(Re){return Re=(0,v.normalizeId)(Re),this.schemas[Re]||this.refs[Re]}function O(){const Re=this.opts.schemas;if(!!Re)if(Array.isArray(Re))this.addSchema(Re);else for(const w in Re)this.addSchema(Re[w],w)}function W(){for(const Re in this.opts.formats){const w=this.opts.formats[Re];w&&this.addFormat(Re,w)}}function Ce(Re){if(Array.isArray(Re)){this.addVocabulary(Re);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const w in Re){const Ie=Re[w];Ie.keyword||(Ie.keyword=w),this.addKeyword(Ie)}}function $e(){const Re={...this.opts};for(const w of $)delete Re[w];return Re}const Qe={log(){},warn(){},error(){}};function it(Re){if(Re===!1)return Qe;if(Re===void 0)return console;if(Re.log&&Re.warn&&Re.error)return Re;throw new Error("logger must implement log, warn and error methods")}const lt=/^[a-z_$][a-z0-9_$:-]*$/i;function qe(Re,w){const{RULES:Ie}=this;if((0,y.eachItem)(Re,fe=>{if(Ie.keywords[fe])throw new Error(`Keyword ${fe} is already defined`);if(!lt.test(fe))throw new Error(`Keyword ${fe} has invalid name`)}),!!w&&w.$data&&!("code"in w||"validate"in w))throw new Error('$data keyword must have "code" or "validate" function')}function $t(Re,w,Ie){var fe;const A=w==null?void 0:w.post;if(Ie&&A)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:H}=this;let re=A?H.post:H.rules.find(({type:ae})=>ae===Ie);if(re||(re={type:Ie,rules:[]},H.rules.push(re)),H.keywords[Re]=!0,!w)return;const Pe={keyword:Re,definition:{...w,type:(0,d.getJSONTypes)(w.type),schemaType:(0,d.getJSONTypes)(w.schemaType)}};w.before?Ot.call(this,re,Pe,w.before):re.rules.push(Pe),H.all[Re]=Pe,(fe=w.implements)===null||fe===void 0||fe.forEach(ae=>this.addKeyword(ae))}function Ot(Re,w,Ie){const fe=Re.rules.findIndex(A=>A.keyword===Ie);fe>=0?Re.rules.splice(fe,0,w):(Re.rules.push(w),this.logger.warn(`rule ${Ie} is not defined`))}function pn(Re){let{metaSchema:w}=Re;w!==void 0&&(Re.$data&&this.opts.$data&&(w=U(w)),Re.validateSchema=this.compile(w,!0))}const _n={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function U(Re){return{anyOf:[Re,_n]}}},55947:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0});const e=t(69378);e.code='require("ajv/dist/runtime/equal").default',c.default=e},7836:function(Lt,c){Object.defineProperty(c,"__esModule",{value:!0});function t(e){const n=e.length;let p=0,a=0,o;for(;a<n;)p++,o=e.charCodeAt(a++),o>=55296&&o<=56319&&a<n&&(o=e.charCodeAt(a),(o&64512)===56320&&a++);return p}c.default=t,t.code='require("ajv/dist/runtime/ucs2length").default'},3075:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0});const e=t(12854);e.code='require("ajv/dist/runtime/uri").default',c.default=e},14319:function(Lt,c){Object.defineProperty(c,"__esModule",{value:!0});class t extends Error{constructor(n){super("validation failed"),this.errors=n,this.ajv=this.validation=!0}}c.default=t},52251:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0}),c.validateAdditionalItems=void 0;const e=t(82481),n=t(1849),a={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:m}})=>(0,e.str)`must NOT have more than ${m} items`,params:({params:{len:m}})=>(0,e._)`{limit: ${m}}`},code(m){const{parentSchema:u,it:v}=m,{items:d}=u;if(!Array.isArray(d)){(0,n.checkStrictMode)(v,'"additionalItems" is ignored when "items" is not an array of schemas');return}o(m,d)}};function o(m,u){const{gen:v,schema:d,data:y,keyword:h,it:M}=m;M.items=!0;const L=v.const("len",(0,e._)`${y}.length`);if(d===!1)m.setParams({len:u.length}),m.pass((0,e._)`${L} <= ${u.length}`);else if(typeof d=="object"&&!(0,n.alwaysValidSchema)(M,d)){const J=v.var("valid",(0,e._)`${L} <= ${u.length}`);v.if((0,e.not)(J),()=>$(J)),m.ok(J)}function $(J){v.forRange("i",u.length,L,g=>{m.subschema({keyword:h,dataProp:g,dataPropType:n.Type.Num},J),M.allErrors||v.if((0,e.not)(J),()=>v.break())})}}c.validateAdditionalItems=o,c.default=a},17831:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0});const e=t(9280),n=t(82481),p=t(99583),a=t(1849),m={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:u})=>(0,n._)`{additionalProperty: ${u.additionalProperty}}`},code(u){const{gen:v,schema:d,parentSchema:y,data:h,errsCount:M,it:L}=u;if(!M)throw new Error("ajv implementation error");const{allErrors:$,opts:J}=L;if(L.props=!0,J.removeAdditional!=="all"&&(0,a.alwaysValidSchema)(L,d))return;const g=(0,e.allSchemaProperties)(y.properties),S=(0,e.allSchemaProperties)(y.patternProperties);E(),u.ok((0,n._)`${M} === ${p.default.errors}`);function E(){v.forIn("key",h,O=>{!g.length&&!S.length?T(O):v.if(I(O),()=>T(O))})}function I(O){let W;if(g.length>8){const Ce=(0,a.schemaRefOrVal)(L,y.properties,"properties");W=(0,e.isOwnProperty)(v,Ce,O)}else g.length?W=(0,n.or)(...g.map(Ce=>(0,n._)`${O} === ${Ce}`)):W=n.nil;return S.length&&(W=(0,n.or)(W,...S.map(Ce=>(0,n._)`${(0,e.usePattern)(u,Ce)}.test(${O})`))),(0,n.not)(W)}function D(O){v.code((0,n._)`delete ${h}[${O}]`)}function T(O){if(J.removeAdditional==="all"||J.removeAdditional&&d===!1){D(O);return}if(d===!1){u.setParams({additionalProperty:O}),u.error(),$||v.break();return}if(typeof d=="object"&&!(0,a.alwaysValidSchema)(L,d)){const W=v.name("valid");J.removeAdditional==="failing"?(i(O,W,!1),v.if((0,n.not)(W),()=>{u.reset(),D(O)})):(i(O,W),$||v.if((0,n.not)(W),()=>v.break()))}}function i(O,W,Ce){const $e={keyword:"additionalProperties",dataProp:O,dataPropType:a.Type.Str};Ce===!1&&Object.assign($e,{compositeRule:!0,createErrors:!1,allErrors:!1}),u.subschema($e,W)}}};c.default=m},15319:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0});const e=t(1849),n={keyword:"allOf",schemaType:"array",code(p){const{gen:a,schema:o,it:m}=p;if(!Array.isArray(o))throw new Error("ajv implementation error");const u=a.name("valid");o.forEach((v,d)=>{if((0,e.alwaysValidSchema)(m,v))return;const y=p.subschema({keyword:"allOf",schemaProp:d},u);p.ok(u),p.mergeEvaluated(y)})}};c.default=n},60513:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0});const e=t(9280),n={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:e.validateUnion,error:{message:"must match a schema in anyOf"}};c.default=n},51622:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0});const e=t(82481),n=t(1849),a={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:o,max:m}})=>m===void 0?(0,e.str)`must contain at least ${o} valid item(s)`:(0,e.str)`must contain at least ${o} and no more than ${m} valid item(s)`,params:({params:{min:o,max:m}})=>m===void 0?(0,e._)`{minContains: ${o}}`:(0,e._)`{minContains: ${o}, maxContains: ${m}}`},code(o){const{gen:m,schema:u,parentSchema:v,data:d,it:y}=o;let h,M;const{minContains:L,maxContains:$}=v;y.opts.next?(h=L===void 0?1:L,M=$):h=1;const J=m.const("len",(0,e._)`${d}.length`);if(o.setParams({min:h,max:M}),M===void 0&&h===0){(0,n.checkStrictMode)(y,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(M!==void 0&&h>M){(0,n.checkStrictMode)(y,'"minContains" > "maxContains" is always invalid'),o.fail();return}if((0,n.alwaysValidSchema)(y,u)){let D=(0,e._)`${J} >= ${h}`;M!==void 0&&(D=(0,e._)`${D} && ${J} <= ${M}`),o.pass(D);return}y.items=!0;const g=m.name("valid");M===void 0&&h===1?E(g,()=>m.if(g,()=>m.break())):h===0?(m.let(g,!0),M!==void 0&&m.if((0,e._)`${d}.length > 0`,S)):(m.let(g,!1),S()),o.result(g,()=>o.reset());function S(){const D=m.name("_valid"),T=m.let("count",0);E(D,()=>m.if(D,()=>I(T)))}function E(D,T){m.forRange("i",0,J,i=>{o.subschema({keyword:"contains",dataProp:i,dataPropType:n.Type.Num,compositeRule:!0},D),T()})}function I(D){m.code((0,e._)`${D}++`),M===void 0?m.if((0,e._)`${D} >= ${h}`,()=>m.assign(g,!0).break()):(m.if((0,e._)`${D} > ${M}`,()=>m.assign(g,!1).break()),h===1?m.assign(g,!0):m.if((0,e._)`${D} >= ${h}`,()=>m.assign(g,!0)))}}};c.default=a},8524:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0}),c.validateSchemaDeps=c.validatePropertyDeps=c.error=void 0;const e=t(82481),n=t(1849),p=t(9280);c.error={message:({params:{property:v,depsCount:d,deps:y}})=>{const h=d===1?"property":"properties";return(0,e.str)`must have ${h} ${y} when property ${v} is present`},params:({params:{property:v,depsCount:d,deps:y,missingProperty:h}})=>(0,e._)`{property: ${v},
    missingProperty: ${h},
    depsCount: ${d},
    deps: ${y}}`};const a={keyword:"dependencies",type:"object",schemaType:"object",error:c.error,code(v){const[d,y]=o(v);m(v,d),u(v,y)}};function o({schema:v}){const d={},y={};for(const h in v){if(h==="__proto__")continue;const M=Array.isArray(v[h])?d:y;M[h]=v[h]}return[d,y]}function m(v,d=v.schema){const{gen:y,data:h,it:M}=v;if(Object.keys(d).length===0)return;const L=y.let("missing");for(const $ in d){const J=d[$];if(J.length===0)continue;const g=(0,p.propertyInData)(y,h,$,M.opts.ownProperties);v.setParams({property:$,depsCount:J.length,deps:J.join(", ")}),M.allErrors?y.if(g,()=>{for(const S of J)(0,p.checkReportMissingProp)(v,S)}):(y.if((0,e._)`${g} && (${(0,p.checkMissingProp)(v,J,L)})`),(0,p.reportMissingProp)(v,L),y.else())}}c.validatePropertyDeps=m;function u(v,d=v.schema){const{gen:y,data:h,keyword:M,it:L}=v,$=y.name("valid");for(const J in d)(0,n.alwaysValidSchema)(L,d[J])||(y.if((0,p.propertyInData)(y,h,J,L.opts.ownProperties),()=>{const g=v.subschema({keyword:M,schemaProp:J},$);v.mergeValidEvaluated(g,$)},()=>y.var($,!0)),v.ok($))}c.validateSchemaDeps=u,c.default=a},74413:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0});const e=t(82481),n=t(1849),a={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:m})=>(0,e.str)`must match "${m.ifClause}" schema`,params:({params:m})=>(0,e._)`{failingKeyword: ${m.ifClause}}`},code(m){const{gen:u,parentSchema:v,it:d}=m;v.then===void 0&&v.else===void 0&&(0,n.checkStrictMode)(d,'"if" without "then" and "else" is ignored');const y=o(d,"then"),h=o(d,"else");if(!y&&!h)return;const M=u.let("valid",!0),L=u.name("_valid");if($(),m.reset(),y&&h){const g=u.let("ifClause");m.setParams({ifClause:g}),u.if(L,J("then",g),J("else",g))}else y?u.if(L,J("then")):u.if((0,e.not)(L),J("else"));m.pass(M,()=>m.error(!0));function $(){const g=m.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},L);m.mergeEvaluated(g)}function J(g,S){return()=>{const E=m.subschema({keyword:g},L);u.assign(M,L),m.mergeValidEvaluated(E,M),S?u.assign(S,(0,e._)`${g}`):m.setParams({ifClause:g})}}}};function o(m,u){const v=m.schema[u];return v!==void 0&&!(0,n.alwaysValidSchema)(m,v)}c.default=a},14226:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0});const e=t(52251),n=t(38968),p=t(3042),a=t(69719),o=t(51622),m=t(8524),u=t(53261),v=t(17831),d=t(81734),y=t(47673),h=t(73270),M=t(60513),L=t(84959),$=t(15319),J=t(74413),g=t(5095);function S(E=!1){const I=[h.default,M.default,L.default,$.default,J.default,g.default,u.default,v.default,m.default,d.default,y.default];return E?I.push(n.default,a.default):I.push(e.default,p.default),I.push(o.default),I}c.default=S},3042:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0}),c.validateTuple=void 0;const e=t(82481),n=t(1849),p=t(9280),a={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(m){const{schema:u,it:v}=m;if(Array.isArray(u))return o(m,"additionalItems",u);v.items=!0,!(0,n.alwaysValidSchema)(v,u)&&m.ok((0,p.validateArray)(m))}};function o(m,u,v=m.schema){const{gen:d,parentSchema:y,data:h,keyword:M,it:L}=m;g(y),L.opts.unevaluated&&v.length&&L.items!==!0&&(L.items=n.mergeEvaluated.items(d,v.length,L.items));const $=d.name("valid"),J=d.const("len",(0,e._)`${h}.length`);v.forEach((S,E)=>{(0,n.alwaysValidSchema)(L,S)||(d.if((0,e._)`${J} > ${E}`,()=>m.subschema({keyword:M,schemaProp:E,dataProp:E},$)),m.ok($))});function g(S){const{opts:E,errSchemaPath:I}=L,D=v.length,T=D===S.minItems&&(D===S.maxItems||S[u]===!1);if(E.strictTuples&&!T){const i=`"${M}" is ${D}-tuple, but minItems or maxItems/${u} are not specified or different at path "${I}"`;(0,n.checkStrictMode)(L,i,E.strictTuples)}}}c.validateTuple=o,c.default=a},69719:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0});const e=t(82481),n=t(1849),p=t(9280),a=t(52251),m={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:u}})=>(0,e.str)`must NOT have more than ${u} items`,params:({params:{len:u}})=>(0,e._)`{limit: ${u}}`},code(u){const{schema:v,parentSchema:d,it:y}=u,{prefixItems:h}=d;y.items=!0,!(0,n.alwaysValidSchema)(y,v)&&(h?(0,a.validateAdditionalItems)(u,h):u.ok((0,p.validateArray)(u)))}};c.default=m},73270:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0});const e=t(1849),n={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(p){const{gen:a,schema:o,it:m}=p;if((0,e.alwaysValidSchema)(m,o)){p.fail();return}const u=a.name("valid");p.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},u),p.failResult(u,()=>p.reset(),()=>p.error())},error:{message:"must NOT be valid"}};c.default=n},84959:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0});const e=t(82481),n=t(1849),a={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:o})=>(0,e._)`{passingSchemas: ${o.passing}}`},code(o){const{gen:m,schema:u,parentSchema:v,it:d}=o;if(!Array.isArray(u))throw new Error("ajv implementation error");if(d.opts.discriminator&&v.discriminator)return;const y=u,h=m.let("valid",!1),M=m.let("passing",null),L=m.name("_valid");o.setParams({passing:M}),m.block($),o.result(h,()=>o.reset(),()=>o.error(!0));function $(){y.forEach((J,g)=>{let S;(0,n.alwaysValidSchema)(d,J)?m.var(L,!0):S=o.subschema({keyword:"oneOf",schemaProp:g,compositeRule:!0},L),g>0&&m.if((0,e._)`${L} && ${h}`).assign(h,!1).assign(M,(0,e._)`[${M}, ${g}]`).else(),m.if(L,()=>{m.assign(h,!0),m.assign(M,g),S&&o.mergeEvaluated(S,e.Name)})})}}};c.default=a},47673:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0});const e=t(9280),n=t(82481),p=t(1849),a=t(1849),o={keyword:"patternProperties",type:"object",schemaType:"object",code(m){const{gen:u,schema:v,data:d,parentSchema:y,it:h}=m,{opts:M}=h,L=(0,e.allSchemaProperties)(v),$=L.filter(T=>(0,p.alwaysValidSchema)(h,v[T]));if(L.length===0||$.length===L.length&&(!h.opts.unevaluated||h.props===!0))return;const J=M.strictSchema&&!M.allowMatchingProperties&&y.properties,g=u.name("valid");h.props!==!0&&!(h.props instanceof n.Name)&&(h.props=(0,a.evaluatedPropsToName)(u,h.props));const{props:S}=h;E();function E(){for(const T of L)J&&I(T),h.allErrors?D(T):(u.var(g,!0),D(T),u.if(g))}function I(T){for(const i in J)new RegExp(T).test(i)&&(0,p.checkStrictMode)(h,`property ${i} matches pattern ${T} (use allowMatchingProperties)`)}function D(T){u.forIn("key",d,i=>{u.if((0,n._)`${(0,e.usePattern)(m,T)}.test(${i})`,()=>{const O=$.includes(T);O||m.subschema({keyword:"patternProperties",schemaProp:T,dataProp:i,dataPropType:a.Type.Str},g),h.opts.unevaluated&&S!==!0?u.assign((0,n._)`${S}[${i}]`,!0):!O&&!h.allErrors&&u.if((0,n.not)(g),()=>u.break())})})}}};c.default=o},38968:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0});const e=t(3042),n={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:p=>(0,e.validateTuple)(p,"items")};c.default=n},81734:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0});const e=t(4371),n=t(9280),p=t(1849),a=t(17831),o={keyword:"properties",type:"object",schemaType:"object",code(m){const{gen:u,schema:v,parentSchema:d,data:y,it:h}=m;h.opts.removeAdditional==="all"&&d.additionalProperties===void 0&&a.default.code(new e.KeywordCxt(h,a.default,"additionalProperties"));const M=(0,n.allSchemaProperties)(v);for(const S of M)h.definedProperties.add(S);h.opts.unevaluated&&M.length&&h.props!==!0&&(h.props=p.mergeEvaluated.props(u,(0,p.toHash)(M),h.props));const L=M.filter(S=>!(0,p.alwaysValidSchema)(h,v[S]));if(L.length===0)return;const $=u.name("valid");for(const S of L)J(S)?g(S):(u.if((0,n.propertyInData)(u,y,S,h.opts.ownProperties)),g(S),h.allErrors||u.else().var($,!0),u.endIf()),m.it.definedProperties.add(S),m.ok($);function J(S){return h.opts.useDefaults&&!h.compositeRule&&v[S].default!==void 0}function g(S){m.subschema({keyword:"properties",schemaProp:S,dataProp:S},$)}}};c.default=o},53261:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0});const e=t(82481),n=t(1849),a={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:o})=>(0,e._)`{propertyName: ${o.propertyName}}`},code(o){const{gen:m,schema:u,data:v,it:d}=o;if((0,n.alwaysValidSchema)(d,u))return;const y=m.name("valid");m.forIn("key",v,h=>{o.setParams({propertyName:h}),o.subschema({keyword:"propertyNames",data:h,dataTypes:["string"],propertyName:h,compositeRule:!0},y),m.if((0,e.not)(y),()=>{o.error(!0),d.allErrors||m.break()})}),o.ok(y)}};c.default=a},5095:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0});const e=t(1849),n={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:p,parentSchema:a,it:o}){a.if===void 0&&(0,e.checkStrictMode)(o,`"${p}" without "if" is ignored`)}};c.default=n},9280:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0}),c.validateUnion=c.validateArray=c.usePattern=c.callValidateCode=c.schemaProperties=c.allSchemaProperties=c.noPropertyInData=c.propertyInData=c.isOwnProperty=c.hasPropFunc=c.reportMissingProp=c.checkMissingProp=c.checkReportMissingProp=void 0;const e=t(82481),n=t(1849),p=t(99583),a=t(1849);function o(I,D){const{gen:T,data:i,it:O}=I;T.if(h(T,i,D,O.opts.ownProperties),()=>{I.setParams({missingProperty:(0,e._)`${D}`},!0),I.error()})}c.checkReportMissingProp=o;function m({gen:I,data:D,it:{opts:T}},i,O){return(0,e.or)(...i.map(W=>(0,e.and)(h(I,D,W,T.ownProperties),(0,e._)`${O} = ${W}`)))}c.checkMissingProp=m;function u(I,D){I.setParams({missingProperty:D},!0),I.error()}c.reportMissingProp=u;function v(I){return I.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,e._)`Object.prototype.hasOwnProperty`})}c.hasPropFunc=v;function d(I,D,T){return(0,e._)`${v(I)}.call(${D}, ${T})`}c.isOwnProperty=d;function y(I,D,T,i){const O=(0,e._)`${D}${(0,e.getProperty)(T)} !== undefined`;return i?(0,e._)`${O} && ${d(I,D,T)}`:O}c.propertyInData=y;function h(I,D,T,i){const O=(0,e._)`${D}${(0,e.getProperty)(T)} === undefined`;return i?(0,e.or)(O,(0,e.not)(d(I,D,T))):O}c.noPropertyInData=h;function M(I){return I?Object.keys(I).filter(D=>D!=="__proto__"):[]}c.allSchemaProperties=M;function L(I,D){return M(D).filter(T=>!(0,n.alwaysValidSchema)(I,D[T]))}c.schemaProperties=L;function $({schemaCode:I,data:D,it:{gen:T,topSchemaRef:i,schemaPath:O,errorPath:W},it:Ce},$e,Qe,it){const lt=it?(0,e._)`${I}, ${D}, ${i}${O}`:D,qe=[[p.default.instancePath,(0,e.strConcat)(p.default.instancePath,W)],[p.default.parentData,Ce.parentData],[p.default.parentDataProperty,Ce.parentDataProperty],[p.default.rootData,p.default.rootData]];Ce.opts.dynamicRef&&qe.push([p.default.dynamicAnchors,p.default.dynamicAnchors]);const $t=(0,e._)`${lt}, ${T.object(...qe)}`;return Qe!==e.nil?(0,e._)`${$e}.call(${Qe}, ${$t})`:(0,e._)`${$e}(${$t})`}c.callValidateCode=$;const J=(0,e._)`new RegExp`;function g({gen:I,it:{opts:D}},T){const i=D.unicodeRegExp?"u":"",{regExp:O}=D.code,W=O(T,i);return I.scopeValue("pattern",{key:W.toString(),ref:W,code:(0,e._)`${O.code==="new RegExp"?J:(0,a.useFunc)(I,O)}(${T}, ${i})`})}c.usePattern=g;function S(I){const{gen:D,data:T,keyword:i,it:O}=I,W=D.name("valid");if(O.allErrors){const $e=D.let("valid",!0);return Ce(()=>D.assign($e,!1)),$e}return D.var(W,!0),Ce(()=>D.break()),W;function Ce($e){const Qe=D.const("len",(0,e._)`${T}.length`);D.forRange("i",0,Qe,it=>{I.subschema({keyword:i,dataProp:it,dataPropType:n.Type.Num},W),D.if((0,e.not)(W),$e)})}}c.validateArray=S;function E(I){const{gen:D,schema:T,keyword:i,it:O}=I;if(!Array.isArray(T))throw new Error("ajv implementation error");if(T.some(Qe=>(0,n.alwaysValidSchema)(O,Qe))&&!O.opts.unevaluated)return;const Ce=D.let("valid",!1),$e=D.name("_valid");D.block(()=>T.forEach((Qe,it)=>{const lt=I.subschema({keyword:i,schemaProp:it,compositeRule:!0},$e);D.assign(Ce,(0,e._)`${Ce} || ${$e}`),I.mergeValidEvaluated(lt,$e)||D.if((0,e.not)(Ce))})),I.result(Ce,()=>I.reset(),()=>I.error(!0))}c.validateUnion=E},5671:function(Lt,c){Object.defineProperty(c,"__esModule",{value:!0});const t={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};c.default=t},10356:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0});const e=t(5671),n=t(24302),p=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",e.default,n.default];c.default=p},24302:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0}),c.callRef=c.getValidate=void 0;const e=t(30283),n=t(9280),p=t(82481),a=t(99583),o=t(62902),m=t(1849),u={keyword:"$ref",schemaType:"string",code(y){const{gen:h,schema:M,it:L}=y,{baseId:$,schemaEnv:J,validateName:g,opts:S,self:E}=L,{root:I}=J;if((M==="#"||M==="#/")&&$===I.baseId)return T();const D=o.resolveRef.call(E,I,$,M);if(D===void 0)throw new e.default(L.opts.uriResolver,$,M);if(D instanceof o.SchemaEnv)return i(D);return O(D);function T(){if(J===I)return d(y,g,J,J.$async);const W=h.scopeValue("root",{ref:I});return d(y,(0,p._)`${W}.validate`,I,I.$async)}function i(W){const Ce=v(y,W);d(y,Ce,W,W.$async)}function O(W){const Ce=h.scopeValue("schema",S.code.source===!0?{ref:W,code:(0,p.stringify)(W)}:{ref:W}),$e=h.name("valid"),Qe=y.subschema({schema:W,dataTypes:[],schemaPath:p.nil,topSchemaRef:Ce,errSchemaPath:M},$e);y.mergeEvaluated(Qe),y.ok($e)}}};function v(y,h){const{gen:M}=y;return h.validate?M.scopeValue("validate",{ref:h.validate}):(0,p._)`${M.scopeValue("wrapper",{ref:h})}.validate`}c.getValidate=v;function d(y,h,M,L){const{gen:$,it:J}=y,{allErrors:g,schemaEnv:S,opts:E}=J,I=E.passContext?a.default.this:p.nil;L?D():T();function D(){if(!S.$async)throw new Error("async schema referenced by sync schema");const W=$.let("valid");$.try(()=>{$.code((0,p._)`await ${(0,n.callValidateCode)(y,h,I)}`),O(h),g||$.assign(W,!0)},Ce=>{$.if((0,p._)`!(${Ce} instanceof ${J.ValidationError})`,()=>$.throw(Ce)),i(Ce),g||$.assign(W,!1)}),y.ok(W)}function T(){y.result((0,n.callValidateCode)(y,h,I),()=>O(h),()=>i(h))}function i(W){const Ce=(0,p._)`${W}.errors`;$.assign(a.default.vErrors,(0,p._)`${a.default.vErrors} === null ? ${Ce} : ${a.default.vErrors}.concat(${Ce})`),$.assign(a.default.errors,(0,p._)`${a.default.vErrors}.length`)}function O(W){var Ce;if(!J.opts.unevaluated)return;const $e=(Ce=M==null?void 0:M.validate)===null||Ce===void 0?void 0:Ce.evaluated;if(J.props!==!0)if($e&&!$e.dynamicProps)$e.props!==void 0&&(J.props=m.mergeEvaluated.props($,$e.props,J.props));else{const Qe=$.var("props",(0,p._)`${W}.evaluated.props`);J.props=m.mergeEvaluated.props($,Qe,J.props,p.Name)}if(J.items!==!0)if($e&&!$e.dynamicItems)$e.items!==void 0&&(J.items=m.mergeEvaluated.items($,$e.items,J.items));else{const Qe=$.var("items",(0,p._)`${W}.evaluated.items`);J.items=m.mergeEvaluated.items($,Qe,J.items,p.Name)}}}c.callRef=d,c.default=u},99908:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0});const e=t(82481),n=t(521),p=t(62902),a=t(1849),m={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:u,tagName:v}})=>u===n.DiscrError.Tag?`tag "${v}" must be string`:`value of tag "${v}" must be in oneOf`,params:({params:{discrError:u,tag:v,tagName:d}})=>(0,e._)`{error: ${u}, tag: ${d}, tagValue: ${v}}`},code(u){const{gen:v,data:d,schema:y,parentSchema:h,it:M}=u,{oneOf:L}=h;if(!M.opts.discriminator)throw new Error("discriminator: requires discriminator option");const $=y.propertyName;if(typeof $!="string")throw new Error("discriminator: requires propertyName");if(y.mapping)throw new Error("discriminator: mapping is not supported");if(!L)throw new Error("discriminator: requires oneOf keyword");const J=v.let("valid",!1),g=v.const("tag",(0,e._)`${d}${(0,e.getProperty)($)}`);v.if((0,e._)`typeof ${g} == "string"`,()=>S(),()=>u.error(!1,{discrError:n.DiscrError.Tag,tag:g,tagName:$})),u.ok(J);function S(){const D=I();v.if(!1);for(const T in D)v.elseIf((0,e._)`${g} === ${T}`),v.assign(J,E(D[T]));v.else(),u.error(!1,{discrError:n.DiscrError.Mapping,tag:g,tagName:$}),v.endIf()}function E(D){const T=v.name("valid"),i=u.subschema({keyword:"oneOf",schemaProp:D},T);return u.mergeEvaluated(i,e.Name),T}function I(){var D;const T={},i=W(h);let O=!0;for(let Qe=0;Qe<L.length;Qe++){let it=L[Qe];(it==null?void 0:it.$ref)&&!(0,a.schemaHasRulesButRef)(it,M.self.RULES)&&(it=p.resolveRef.call(M.self,M.schemaEnv.root,M.baseId,it==null?void 0:it.$ref),it instanceof p.SchemaEnv&&(it=it.schema));const lt=(D=it==null?void 0:it.properties)===null||D===void 0?void 0:D[$];if(typeof lt!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${$}"`);O=O&&(i||W(it)),Ce(lt,Qe)}if(!O)throw new Error(`discriminator: "${$}" must be required`);return T;function W({required:Qe}){return Array.isArray(Qe)&&Qe.includes($)}function Ce(Qe,it){if(Qe.const)$e(Qe.const,it);else if(Qe.enum)for(const lt of Qe.enum)$e(lt,it);else throw new Error(`discriminator: "properties/${$}" must have "const" or "enum"`)}function $e(Qe,it){if(typeof Qe!="string"||Qe in T)throw new Error(`discriminator: "${$}" values must be unique strings`);T[Qe]=it}}}};c.default=m},521:function(Lt,c){Object.defineProperty(c,"__esModule",{value:!0}),c.DiscrError=void 0;var t;(function(e){e.Tag="tag",e.Mapping="mapping"})(t=c.DiscrError||(c.DiscrError={}))},57993:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0});const e=t(10356),n=t(16282),p=t(14226),a=t(6989),o=t(68373),m=[e.default,n.default,(0,p.default)(),a.default,o.metadataVocabulary,o.contentVocabulary];c.default=m},43202:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0});const e=t(82481),p={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:a})=>(0,e.str)`must match format "${a}"`,params:({schemaCode:a})=>(0,e._)`{format: ${a}}`},code(a,o){const{gen:m,data:u,$data:v,schema:d,schemaCode:y,it:h}=a,{opts:M,errSchemaPath:L,schemaEnv:$,self:J}=h;if(!M.validateFormats)return;v?g():S();function g(){const E=m.scopeValue("formats",{ref:J.formats,code:M.code.formats}),I=m.const("fDef",(0,e._)`${E}[${y}]`),D=m.let("fType"),T=m.let("format");m.if((0,e._)`typeof ${I} == "object" && !(${I} instanceof RegExp)`,()=>m.assign(D,(0,e._)`${I}.type || "string"`).assign(T,(0,e._)`${I}.validate`),()=>m.assign(D,(0,e._)`"string"`).assign(T,I)),a.fail$data((0,e.or)(i(),O()));function i(){return M.strictSchema===!1?e.nil:(0,e._)`${y} && !${T}`}function O(){const W=$.$async?(0,e._)`(${I}.async ? await ${T}(${u}) : ${T}(${u}))`:(0,e._)`${T}(${u})`,Ce=(0,e._)`(typeof ${T} == "function" ? ${W} : ${T}.test(${u}))`;return(0,e._)`${T} && ${T} !== true && ${D} === ${o} && !${Ce}`}}function S(){const E=J.formats[d];if(!E){i();return}if(E===!0)return;const[I,D,T]=O(E);I===o&&a.pass(W());function i(){if(M.strictSchema===!1){J.logger.warn(Ce());return}throw new Error(Ce());function Ce(){return`unknown format "${d}" ignored in schema at path "${L}"`}}function O(Ce){const $e=Ce instanceof RegExp?(0,e.regexpCode)(Ce):M.code.formats?(0,e._)`${M.code.formats}${(0,e.getProperty)(d)}`:void 0,Qe=m.scopeValue("formats",{key:d,ref:Ce,code:$e});return typeof Ce=="object"&&!(Ce instanceof RegExp)?[Ce.type||"string",Ce.validate,(0,e._)`${Qe}.validate`]:["string",Ce,Qe]}function W(){if(typeof E=="object"&&!(E instanceof RegExp)&&E.async){if(!$.$async)throw new Error("async format in sync schema");return(0,e._)`await ${T}(${u})`}return typeof D=="function"?(0,e._)`${T}(${u})`:(0,e._)`${T}.test(${u})`}}}};c.default=p},6989:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0});const n=[t(43202).default];c.default=n},68373:function(Lt,c){Object.defineProperty(c,"__esModule",{value:!0}),c.contentVocabulary=c.metadataVocabulary=void 0,c.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],c.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]},80750:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0});const e=t(82481),n=t(1849),p=t(55947),o={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:m})=>(0,e._)`{allowedValue: ${m}}`},code(m){const{gen:u,data:v,$data:d,schemaCode:y,schema:h}=m;d||h&&typeof h=="object"?m.fail$data((0,e._)`!${(0,n.useFunc)(u,p.default)}(${v}, ${y})`):m.fail((0,e._)`${h} !== ${v}`)}};c.default=o},28109:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0});const e=t(82481),n=t(1849),p=t(55947),o={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:m})=>(0,e._)`{allowedValues: ${m}}`},code(m){const{gen:u,data:v,$data:d,schema:y,schemaCode:h,it:M}=m;if(!d&&y.length===0)throw new Error("enum must have non-empty array");const L=y.length>=M.opts.loopEnum;let $;const J=()=>$!=null?$:$=(0,n.useFunc)(u,p.default);let g;if(L||d)g=u.let("valid"),m.block$data(g,S);else{if(!Array.isArray(y))throw new Error("ajv implementation error");const I=u.const("vSchema",h);g=(0,e.or)(...y.map((D,T)=>E(I,T)))}m.pass(g);function S(){u.assign(g,!1),u.forOf("v",h,I=>u.if((0,e._)`${J()}(${v}, ${I})`,()=>u.assign(g,!0).break()))}function E(I,D){const T=y[D];return typeof T=="object"&&T!==null?(0,e._)`${J()}(${v}, ${I}[${D}])`:(0,e._)`${v} === ${T}`}}};c.default=o},16282:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0});const e=t(41619),n=t(24923),p=t(34660),a=t(72326),o=t(69354),m=t(60881),u=t(42632),v=t(41985),d=t(80750),y=t(28109),h=[e.default,n.default,p.default,a.default,o.default,m.default,u.default,v.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},d.default,y.default];c.default=h},42632:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0});const e=t(82481),p={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:a,schemaCode:o}){const m=a==="maxItems"?"more":"fewer";return(0,e.str)`must NOT have ${m} than ${o} items`},params:({schemaCode:a})=>(0,e._)`{limit: ${a}}`},code(a){const{keyword:o,data:m,schemaCode:u}=a,v=o==="maxItems"?e.operators.GT:e.operators.LT;a.fail$data((0,e._)`${m}.length ${v} ${u}`)}};c.default=p},34660:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0});const e=t(82481),n=t(1849),p=t(7836),o={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:m,schemaCode:u}){const v=m==="maxLength"?"more":"fewer";return(0,e.str)`must NOT have ${v} than ${u} characters`},params:({schemaCode:m})=>(0,e._)`{limit: ${m}}`},code(m){const{keyword:u,data:v,schemaCode:d,it:y}=m,h=u==="maxLength"?e.operators.GT:e.operators.LT,M=y.opts.unicode===!1?(0,e._)`${v}.length`:(0,e._)`${(0,n.useFunc)(m.gen,p.default)}(${v})`;m.fail$data((0,e._)`${M} ${h} ${d}`)}};c.default=o},41619:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0});const e=t(82481),n=e.operators,p={maximum:{okStr:"<=",ok:n.LTE,fail:n.GT},minimum:{okStr:">=",ok:n.GTE,fail:n.LT},exclusiveMaximum:{okStr:"<",ok:n.LT,fail:n.GTE},exclusiveMinimum:{okStr:">",ok:n.GT,fail:n.LTE}},a={message:({keyword:m,schemaCode:u})=>(0,e.str)`must be ${p[m].okStr} ${u}`,params:({keyword:m,schemaCode:u})=>(0,e._)`{comparison: ${p[m].okStr}, limit: ${u}}`},o={keyword:Object.keys(p),type:"number",schemaType:"number",$data:!0,error:a,code(m){const{keyword:u,data:v,schemaCode:d}=m;m.fail$data((0,e._)`${v} ${p[u].fail} ${d} || isNaN(${v})`)}};c.default=o},69354:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0});const e=t(82481),p={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:a,schemaCode:o}){const m=a==="maxProperties"?"more":"fewer";return(0,e.str)`must NOT have ${m} than ${o} properties`},params:({schemaCode:a})=>(0,e._)`{limit: ${a}}`},code(a){const{keyword:o,data:m,schemaCode:u}=a,v=o==="maxProperties"?e.operators.GT:e.operators.LT;a.fail$data((0,e._)`Object.keys(${m}).length ${v} ${u}`)}};c.default=p},24923:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0});const e=t(82481),p={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:a})=>(0,e.str)`must be multiple of ${a}`,params:({schemaCode:a})=>(0,e._)`{multipleOf: ${a}}`},code(a){const{gen:o,data:m,schemaCode:u,it:v}=a,d=v.opts.multipleOfPrecision,y=o.let("res"),h=d?(0,e._)`Math.abs(Math.round(${y}) - ${y}) > 1e-${d}`:(0,e._)`${y} !== parseInt(${y})`;a.fail$data((0,e._)`(${u} === 0 || (${y} = ${m}/${u}, ${h}))`)}};c.default=p},72326:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0});const e=t(9280),n=t(82481),a={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:o})=>(0,n.str)`must match pattern "${o}"`,params:({schemaCode:o})=>(0,n._)`{pattern: ${o}}`},code(o){const{data:m,$data:u,schema:v,schemaCode:d,it:y}=o,h=y.opts.unicodeRegExp?"u":"",M=u?(0,n._)`(new RegExp(${d}, ${h}))`:(0,e.usePattern)(o,v);o.fail$data((0,n._)`!${M}.test(${m})`)}};c.default=a},60881:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0});const e=t(9280),n=t(82481),p=t(1849),o={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:m}})=>(0,n.str)`must have required property '${m}'`,params:({params:{missingProperty:m}})=>(0,n._)`{missingProperty: ${m}}`},code(m){const{gen:u,schema:v,schemaCode:d,data:y,$data:h,it:M}=m,{opts:L}=M;if(!h&&v.length===0)return;const $=v.length>=L.loopRequired;if(M.allErrors?J():g(),L.strictRequired){const I=m.parentSchema.properties,{definedProperties:D}=m.it;for(const T of v)if((I==null?void 0:I[T])===void 0&&!D.has(T)){const i=M.schemaEnv.baseId+M.errSchemaPath,O=`required property "${T}" is not defined at "${i}" (strictRequired)`;(0,p.checkStrictMode)(M,O,M.opts.strictRequired)}}function J(){if($||h)m.block$data(n.nil,S);else for(const I of v)(0,e.checkReportMissingProp)(m,I)}function g(){const I=u.let("missing");if($||h){const D=u.let("valid",!0);m.block$data(D,()=>E(I,D)),m.ok(D)}else u.if((0,e.checkMissingProp)(m,v,I)),(0,e.reportMissingProp)(m,I),u.else()}function S(){u.forOf("prop",d,I=>{m.setParams({missingProperty:I}),u.if((0,e.noPropertyInData)(u,y,I,L.ownProperties),()=>m.error())})}function E(I,D){m.setParams({missingProperty:I}),u.forOf(I,d,()=>{u.assign(D,(0,e.propertyInData)(u,y,I,L.ownProperties)),u.if((0,n.not)(D),()=>{m.error(),u.break()})},n.nil)}}};c.default=o},41985:function(Lt,c,t){Object.defineProperty(c,"__esModule",{value:!0});const e=t(93277),n=t(82481),p=t(1849),a=t(55947),m={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:u,j:v}})=>(0,n.str)`must NOT have duplicate items (items ## ${v} and ${u} are identical)`,params:({params:{i:u,j:v}})=>(0,n._)`{i: ${u}, j: ${v}}`},code(u){const{gen:v,data:d,$data:y,schema:h,parentSchema:M,schemaCode:L,it:$}=u;if(!y&&!h)return;const J=v.let("valid"),g=M.items?(0,e.getSchemaTypes)(M.items):[];u.block$data(J,S,(0,n._)`${L} === false`),u.ok(J);function S(){const T=v.let("i",(0,n._)`${d}.length`),i=v.let("j");u.setParams({i:T,j:i}),v.assign(J,!0),v.if((0,n._)`${T} > 1`,()=>(E()?I:D)(T,i))}function E(){return g.length>0&&!g.some(T=>T==="object"||T==="array")}function I(T,i){const O=v.name("item"),W=(0,e.checkDataTypes)(g,O,$.opts.strictNumbers,e.DataType.Wrong),Ce=v.const("indices",(0,n._)`{}`);v.for((0,n._)`;${T}--;`,()=>{v.let(O,(0,n._)`${d}[${T}]`),v.if(W,(0,n._)`continue`),g.length>1&&v.if((0,n._)`typeof ${O} == "string"`,(0,n._)`${O} += "_"`),v.if((0,n._)`typeof ${Ce}[${O}] == "number"`,()=>{v.assign(i,(0,n._)`${Ce}[${O}]`),u.error(),v.assign(J,!1).break()}).code((0,n._)`${Ce}[${O}] = ${T}`)})}function D(T,i){const O=(0,p.useFunc)(v,a.default),W=v.name("outer");v.label(W).for((0,n._)`;${T}--;`,()=>v.for((0,n._)`${i} = ${T}; ${i}--;`,()=>v.if((0,n._)`${O}(${d}[${T}], ${d}[${i}])`,()=>{u.error(),v.assign(J,!1).break(W)})))}}};c.default=m},70462:function(Lt,c,t){t.d(c,{m:function(){return d}});var e=t(9850),n=t.n(e),p=t(12782),a=t.n(p);const o=/^[a-z][a-z0-9]*(?:[-_][a-z][a-z0-9]*)*$/i;function m(y){return typeof y=="object"&&y!==null&&!Array.isArray(y)}function u(y){if(y===null)return"null";if(Array.isArray(y))return"array";const h=typeof y;return h==="number"&&isNaN(y)?"nan":h==="string"&&y===""?"empty-string":h}const v={type(y,h,M,L){return`Invalid type in config for key '${y}' in '${h}', got ${M}, wanted ${L}`},missing(y){return`Missing required config value at '${y}'`},convert(y,h,M){return`Unable to convert config value for key '${y}' in '${h}' to a ${M}`}};class d{constructor(h,M="mock-config",L,$=""){this.data=h,this.context=M,this.fallback=L,this.prefix=$,this.notifiedFilteredKeys=new Set}static fromConfigs(h){return h.length===0?new d(void 0):h.reduce((M,{data:L,context:$,filteredKeys:J,deprecatedKeys:g})=>{const S=new d(L,$,M);if(S.filteredKeys=J,g)for(const{key:E,description:I}of g)console.warn(`The configuration key '${E}' of ${$} is deprecated and may be removed soon. ${I||""}`);return S},void 0)}has(h){var M,L;return this.readValue(h)!==void 0?!0:(L=(M=this.fallback)==null?void 0:M.has(h))!=null?L:!1}keys(){var h,M;const L=this.data?Object.keys(this.data):[],$=(M=(h=this.fallback)==null?void 0:h.keys())!=null?M:[];return[...new Set([...L,...$])]}get(h){const M=this.getOptional(h);if(M===void 0)throw new Error(v.missing(this.fullKey(h!=null?h:"")));return M}getOptional(h){var M,L;const $=n()(this.readValue(h)),J=(M=this.fallback)==null?void 0:M.getOptional(h);return $===void 0?J:J===void 0?$:a()({},{value:J},{value:$},(g,S)=>!m(S)||!m(g)?S:void 0).value}getConfig(h){const M=this.getOptionalConfig(h);if(M===void 0)throw new Error(v.missing(this.fullKey(h)));return M}getOptionalConfig(h){var M;const L=this.readValue(h),$=(M=this.fallback)==null?void 0:M.getOptionalConfig(h);if(m(L))return this.copy(L,h,$);if(L!==void 0)throw new TypeError(v.type(this.fullKey(h),this.context,u(L),"object"));return $}getConfigArray(h){const M=this.getOptionalConfigArray(h);if(M===void 0)throw new Error(v.missing(this.fullKey(h)));return M}getOptionalConfigArray(h){var M;const L=this.readConfigValue(h,$=>{if(!Array.isArray($))return{expected:"object-array"};for(const[J,g]of $.entries())if(!m(g))return{expected:"object-array",value:g,key:`${h}[${J}]`};return!0});if(!!L)return L.map(($,J)=>this.copy($,`${h}[${J}]`))}getNumber(h){const M=this.getOptionalNumber(h);if(M===void 0)throw new Error(v.missing(this.fullKey(h)));return M}getOptionalNumber(h){const M=this.readConfigValue(h,$=>typeof $=="number"||typeof $=="string"||{expected:"number"});if(typeof M=="number"||M===void 0)return M;const L=Number(M);if(!Number.isFinite(L))throw new Error(v.convert(this.fullKey(h),this.context,"number"));return L}getBoolean(h){const M=this.getOptionalBoolean(h);if(M===void 0)throw new Error(v.missing(this.fullKey(h)));return M}getOptionalBoolean(h){return this.readConfigValue(h,M=>typeof M=="boolean"||{expected:"boolean"})}getString(h){const M=this.getOptionalString(h);if(M===void 0)throw new Error(v.missing(this.fullKey(h)));return M}getOptionalString(h){return this.readConfigValue(h,M=>typeof M=="string"&&M!==""||{expected:"string"})}getStringArray(h){const M=this.getOptionalStringArray(h);if(M===void 0)throw new Error(v.missing(this.fullKey(h)));return M}getOptionalStringArray(h){return this.readConfigValue(h,M=>{if(!Array.isArray(M))return{expected:"string-array"};for(const[L,$]of M.entries())if(typeof $!="string"||$==="")return{expected:"string-array",value:$,key:`${h}[${L}]`};return!0})}fullKey(h){return`${this.prefix}${this.prefix?".":""}${h}`}copy(h,M,L){const $=new d(h,this.context,L,this.fullKey(M));return $.filteredKeys=this.filteredKeys,$}readConfigValue(h,M){var L,$;const J=this.readValue(h);if(J===void 0)return($=this.fallback)==null?void 0:$.readConfigValue(h,M);const g=M(J);if(g!==!0){const{key:S=h,value:E=J,expected:I}=g;throw new TypeError(v.type(this.fullKey(S),this.context,u(E),I))}return J}readValue(h){const M=h?h.split("."):[];for(const $ of M)if(!o.test($))throw new TypeError(`Invalid config key '${h}'`);if(this.data===void 0)return;let L=this.data;for(const[$,J]of M.entries())if(m(L))L=L[J];else if(L!==void 0){const g=this.fullKey(M.slice(0,$).join("."));throw new TypeError(v.type(g,this.context,u(L),"object"))}return L}}},48377:function(Lt,c,t){t.d(c,{$_:function(){return xe},CJ:function(){return tn},CX:function(){return on},II:function(){return Gt},Jv:function(){return de},KN:function(){return Ze},Td:function(){return _n},YM:function(){return ht},_i:function(){return ee},aq:function(){return Re},bg:function(){return Fe},eE:function(){return fe},gN:function(){return gn},gr:function(){return ie},jJ:function(){return nt},pM:function(){return _e},sn:function(){return Pe},uC:function(){return en},wQ:function(){return ft},xP:function(){return Zt}});var e=t(2784),n=t(13980),p=t.n(n),a=t(18473),o=t(82394),m=t.n(o),u=t(30705),v=t(30195),d=t(70462),y=t(10289),h=t(64279),M=t(72164);class L{constructor(...l){this.holders=l}get(l){for(const b of this.holders){const x=b.get(l);if(x)return x}}}const $=(0,a.CT)("api-context"),J=K=>{var l;const{apis:b,children:x}=K,G=(l=(0,e.useContext)($))==null?void 0:l.atVersion(1),Ae=G?new L(b,G):b;return e.createElement($.Provider,{value:(0,a.EI)({1:Ae}),children:x})};J.propTypes={apis:p().shape({get:p().func.isRequired}).isRequired,children:p().node};class g{constructor(l){this.factories=l,this.apis=new Map}static validateFactories(l,b){for(const x of b){const G=[x],Ae=new Set;for(;G.length;){const rt=G.shift(),ut=l.get(rt);if(!!ut)for(const yt of Object.values(ut.deps)){if(yt.id===x.id)throw new Error(`Circular dependency of api factory for ${x}`);Ae.has(yt)||(Ae.add(yt),G.push(yt))}}}}get(l){return this.load(l)}load(l,b=[]){const x=this.apis.get(l.id);if(x)return x;const G=this.factories.get(l);if(!G)return;if(b.includes(G.api))throw new Error(`Circular dependency of api factory for ${G.api}`);const Ae=this.loadDeps(l,G.deps,[...b,G.api]),rt=G.factory(Ae);return this.apis.set(l.id,rt),rt}loadDeps(l,b,x){const G={};for(const Ae in b)if(b.hasOwnProperty(Ae)){const rt=b[Ae],ut=this.load(rt,x);if(!ut)throw new Error(`No API factory available for dependency ${rt} of dependent ${l}`);G[Ae]=ut}return G}}var S=(K=>(K[K.default=10]="default",K[K.app=50]="app",K[K.static=100]="static",K))(S||{});class E{constructor(){this.factories=new Map}register(l,b){const x=S[l],G=this.factories.get(b.api.id);return G&&G.priority>=x?!1:(this.factories.set(b.api.id,{priority:x,factory:b}),!0)}get(l){const b=this.factories.get(l.id);if(!!b)return b.factory}getAllApis(){const l=new Set;for(const{factory:b}of this.factories.values())l.add(b.api);return l}}function I(K){return new Promise((l,b)=>{const x=K.width||500,G=K.height||700,Ae=window.screen.width/2-x/2,rt=window.screen.height/2-G/2,ut=window.open(K.url,K.name,`menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=${x},height=${G},top=${rt},left=${Ae}`);let yt="";if(!ut||typeof ut.closed=="undefined"||ut.closed){const yn=new Error("Failed to open auth popup.");yn.name="PopupRejectedError",b(yn);return}const Vt=yn=>{if(yn.source!==ut||yn.origin!==K.origin)return;const{data:Mn}=yn;if(Mn.type==="config_info"){yt=Mn.targetOrigin;return}if(Mn.type!=="authorization_response")return;const jn=Mn;if("error"in jn){const wn=new Error(jn.error.message);wn.name=jn.error.name,b(wn)}else l(jn.response);On()},Ft=setInterval(()=>{if(ut.closed){const yn=`Login failed, ${yt&&yt!==window.location.origin?`Incorrect app origin, expected ${yt}`:"popup was closed"}`,Mn=new Error(yn);Mn.name="PopupClosedError",b(Mn),On()}},100);function On(){window.removeEventListener("message",Vt),clearInterval(Ft)}window.addEventListener("message",Vt)})}function D(K){return[...K].join(" ")}class T{constructor(l){const{discoveryApi:b,environment:x,provider:G,joinScopes:Ae=D,oauthRequestApi:rt,sessionTransform:ut=yt=>yt}=l;this.authRequester=rt.createAuthRequester({provider:G,onAuthRequest:yt=>this.showPopup(yt)}),this.discoveryApi=b,this.environment=x,this.provider=G,this.joinScopesFunc=Ae,this.sessionTransform=ut}async createSession(l){return l.instantPopup?this.showPopup(l.scopes):this.authRequester(l.scopes)}async refreshSession(){const l=await fetch(await this.buildUrl("/refresh",{optional:!0}),{headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(x=>{throw new Error(`Auth refresh request failed, ${x}`)});if(!l.ok){const x=new Error(`Auth refresh request failed, ${l.statusText}`);throw x.status=l.status,x}const b=await l.json();if(b.error){const x=new Error(b.error.message);throw b.error.name&&(x.name=b.error.name),x}return await this.sessionTransform(b)}async removeSession(){const l=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(b=>{throw new Error(`Logout request failed, ${b}`)});if(!l.ok){const b=new Error(`Logout request failed, ${l.statusText}`);throw b.status=l.status,b}}async showPopup(l){const b=this.joinScopesFunc(l),x=await this.buildUrl("/start",{scope:b,origin:location.origin}),G=await I({url:x,name:`${this.provider.title} Login`,origin:new URL(x).origin,width:450,height:730});return await this.sessionTransform(G)}async buildUrl(l,b){const x=await this.discoveryApi.getBaseUrl("auth"),G=this.buildQueryString({...b,env:this.environment});return`${x}/${this.provider.id}${l}${G}`}buildQueryString(l){if(!l)return"";const b=Object.entries(l).map(([x,G])=>{if(typeof G=="string")return`${encodeURIComponent(x)}=${encodeURIComponent(G)}`;if(G)return encodeURIComponent(x)}).filter(Boolean).join("&");return b?`?${b}`:""}}class i{constructor(l){const{discoveryApi:b,environment:x,provider:G}=l;this.discoveryApi=b,this.environment=x,this.provider=G}async createSession(){const l=await this.buildUrl("/start"),b=await I({url:l,name:`${this.provider.title} Login`,origin:new URL(l).origin,width:450,height:730});return{...b,id:b.profile.email}}async refreshSession(){}async removeSession(){const l=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(b=>{throw new Error(`Logout request failed, ${b}`)});if(!l.ok){const b=new Error(`Logout request failed, ${l.statusText}`);throw b.status=l.status,b}}async buildUrl(l){return`${await this.discoveryApi.getBaseUrl("auth")}/${this.provider.id}${l}?env=${this.environment}`}}function O(K,l){for(const b of l)if(!K.has(b))return!1;return!0}class W{constructor(l){this.options=l}sessionExistsAndHasScope(l,b){if(!l)return!1;if(!b||this.options.sessionScopes===void 0)return!0;const x=this.options.sessionScopes(l);return O(x,b)}getExtendedScope(l,b){const x=new Set(this.options.defaultScopes);if(l&&this.options.sessionScopes!==void 0){const G=this.options.sessionScopes(l);for(const Ae of G)x.add(Ae)}if(b)for(const G of b)x.add(G);return x}}class Ce{constructor(){this.isClosed=!1,this.observable=new(m())(l=>this.isClosed?(this.terminatingError?l.error(this.terminatingError):l.complete(),()=>{}):(this.subscribers.add(l),()=>{this.subscribers.delete(l)})),this.subscribers=new Set}[Symbol.observable](){return this}get closed(){return this.isClosed}next(l){if(this.isClosed)throw new Error("PublishSubject is closed");this.subscribers.forEach(b=>b.next(l))}error(l){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.terminatingError=l,this.subscribers.forEach(b=>b.error(l))}complete(){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.subscribers.forEach(l=>l.complete())}subscribe(l,b,x){const G=typeof l=="function"?{next:l,error:b,complete:x}:l;return this.observable.subscribe(G)}}class $e{constructor(l){this.subscribers=new Set,this.isClosed=!1,this.currentValue=l,this.terminatingError=void 0,this.observable=new(m())(b=>this.isClosed?(this.terminatingError?b.error(this.terminatingError):b.complete(),()=>{}):(b.next(this.currentValue),this.subscribers.add(b),()=>{this.subscribers.delete(b)}))}[Symbol.observable](){return this}get closed(){return this.isClosed}next(l){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.currentValue=l,this.subscribers.forEach(b=>b.next(l))}error(l){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.terminatingError=l,this.subscribers.forEach(b=>b.error(l))}complete(){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.subscribers.forEach(l=>l.complete())}subscribe(l,b,x){const G=typeof l=="function"?{next:l,error:b,complete:x}:l;return this.observable.subscribe(G)}}class Qe{constructor(){this.subject=new $e(u.sM.SignedOut),this.signedIn=!1}setIsSignedIn(l){this.signedIn!==l&&(this.signedIn=l,this.subject.next(this.signedIn?u.sM.SignedIn:u.sM.SignedOut))}sessionState$(){return this.subject}}class it{constructor(l){this.stateTracker=new Qe;const{connector:b,defaultScopes:x=new Set,sessionScopes:G,sessionShouldRefresh:Ae}=l;this.connector=b,this.sessionScopesFunc=G,this.sessionShouldRefreshFunc=Ae,this.helper=new W({sessionScopes:G,defaultScopes:x})}async getSession(l){if(this.helper.sessionExistsAndHasScope(this.currentSession,l.scopes)){if(!this.sessionShouldRefreshFunc(this.currentSession))return this.currentSession;try{const x=await this.collapsedSessionRefresh(),G=this.sessionScopesFunc(this.currentSession),Ae=this.sessionScopesFunc(x);return O(Ae,G)&&(this.currentSession=x),x}catch(x){if(l.optional)return;throw x}}if(!this.currentSession&&!l.instantPopup)try{const b=await this.collapsedSessionRefresh();return this.currentSession=b,this.getSession(l)}catch{}if(!l.optional)return this.currentSession=await this.connector.createSession({...l,scopes:this.helper.getExtendedScope(this.currentSession,l.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,await this.connector.removeSession(),this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}async collapsedSessionRefresh(){if(this.refreshPromise)return this.refreshPromise;this.refreshPromise=this.connector.refreshSession();try{const l=await this.refreshPromise;return this.stateTracker.setIsSignedIn(!0),l}finally{delete this.refreshPromise}}}class lt{constructor(l){this.stateTracker=new Qe;const{connector:b,defaultScopes:x=new Set,sessionScopes:G}=l;this.connector=b,this.helper=new W({sessionScopes:G,defaultScopes:x})}setSession(l){this.currentSession=l,this.stateTracker.setIsSignedIn(Boolean(l))}async getSession(l){if(this.helper.sessionExistsAndHasScope(this.currentSession,l.scopes))return this.currentSession;if(!l.optional)return this.currentSession=await this.connector.createSession({...l,scopes:this.helper.getExtendedScope(this.currentSession,l.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}}class qe{constructor(l){const{manager:b,storageKey:x,schema:G,sessionScopes:Ae,sessionShouldRefresh:rt=()=>!1}=l;this.manager=b,this.storageKey=x,this.schema=G,this.sessionShouldRefreshFunc=rt,this.helper=new W({sessionScopes:Ae,defaultScopes:new Set})}setSession(l){this.manager.setSession(l),this.saveSession(l)}async getSession(l){const{scopes:b}=l,x=this.loadSession();if(this.helper.sessionExistsAndHasScope(x,b)&&!this.sessionShouldRefreshFunc(x))return this.manager.setSession(x),x;const G=await this.manager.getSession(l);return this.saveSession(G),G}async removeSession(){localStorage.removeItem(this.storageKey),await this.manager.removeSession()}sessionState$(){return this.manager.sessionState$()}loadSession(){try{const l=localStorage.getItem(this.storageKey);if(l){const b=JSON.parse(l,(x,G)=>(G==null?void 0:G.__type)==="Set"?new Set(G.__value):G);try{return this.schema.parse(b)}catch(x){throw console.log(`Failed to load session from local storage because it did not conform to the expected schema, ${x}`),x}}return}catch{localStorage.removeItem(this.storageKey);return}}saveSession(l){if(l===void 0){localStorage.removeItem(this.storageKey);return}try{this.schema.parse(l)}catch(b){console.warn(`Failed to save session to local storage because it did not conform to the expected schema, ${b}`);return}localStorage.setItem(this.storageKey,JSON.stringify(l,(b,x)=>x instanceof Set?{__type:"Set",__value:Array.from(x)}:x))}}const $t={id:"oauth2",title:"Your Identity Provider",icon:()=>null};class Ot{static create(l){const{discoveryApi:b,environment:x="development",provider:G=$t,oauthRequestApi:Ae,defaultScopes:rt=[],scopeTransform:ut=Ft=>Ft}=l,yt=new T({discoveryApi:b,environment:x,provider:G,oauthRequestApi:Ae,sessionTransform(Ft){return{...Ft,providerInfo:{idToken:Ft.providerInfo.idToken,accessToken:Ft.providerInfo.accessToken,scopes:Ot.normalizeScopes(ut,Ft.providerInfo.scope),expiresAt:new Date(Date.now()+Ft.providerInfo.expiresInSeconds*1e3)}}}}),Vt=new it({connector:yt,defaultScopes:new Set(rt),sessionScopes:Ft=>Ft.providerInfo.scopes,sessionShouldRefresh:Ft=>(Ft.providerInfo.expiresAt.getTime()-Date.now())/1e3<60*5});return new Ot({sessionManager:Vt,scopeTransform:ut})}constructor(l){this.sessionManager=l.sessionManager,this.scopeTransform=l.scopeTransform}async signIn(){await this.getAccessToken()}async signOut(){await this.sessionManager.removeSession()}sessionState$(){return this.sessionManager.sessionState$()}async getAccessToken(l,b){var x;const G=Ot.normalizeScopes(this.scopeTransform,l),Ae=await this.sessionManager.getSession({...b,scopes:G});return(x=Ae==null?void 0:Ae.providerInfo.accessToken)!=null?x:""}async getIdToken(l={}){var b;const x=await this.sessionManager.getSession(l);return(b=x==null?void 0:x.providerInfo.idToken)!=null?b:""}async getBackstageIdentity(l={}){const b=await this.sessionManager.getSession(l);return b==null?void 0:b.backstageIdentity}async getProfile(l={}){const b=await this.sessionManager.getSession(l);return b==null?void 0:b.profile}static normalizeScopes(l,b){if(!b)return new Set;const x=Array.isArray(b)?b:b.split(/[\s|,]/).filter(Boolean);return new Set(l(x))}}const pn={id:"github",title:"GitHub",icon:()=>null};class _n{static create(l){const{discoveryApi:b,environment:x="development",provider:G=pn,oauthRequestApi:Ae,defaultScopes:rt=["read:user"]}=l;return Ot.create({discoveryApi:b,oauthRequestApi:Ae,provider:G,environment:x,defaultScopes:rt})}}const U={id:"gitlab",title:"GitLab",icon:()=>null};class Re{static create(l){const{discoveryApi:b,environment:x="development",provider:G=U,oauthRequestApi:Ae,defaultScopes:rt=["read_user"]}=l;return Ot.create({discoveryApi:b,oauthRequestApi:Ae,provider:G,environment:x,defaultScopes:rt})}}const w={id:"google",title:"Google",icon:()=>null},Ie="https://www.googleapis.com/auth/";class fe{static create(l){const{discoveryApi:b,oauthRequestApi:x,environment:G="development",provider:Ae=w,defaultScopes:rt=["openid",`${Ie}userinfo.email`,`${Ie}userinfo.profile`]}=l;return Ot.create({discoveryApi:b,oauthRequestApi:x,provider:Ae,environment:G,defaultScopes:rt,scopeTransform(ut){return ut.map(yt=>yt==="openid"?yt:yt==="profile"||yt==="email"?`${Ie}userinfo.${yt}`:yt.startsWith(Ie)?yt:`${Ie}${yt}`)}})}}const A={id:"okta",title:"Okta",icon:()=>null},H=new Set(["openid","profile","email","phone","address","groups","offline_access"]),re="okta.";class Pe{static create(l){const{discoveryApi:b,environment:x="development",provider:G=A,oauthRequestApi:Ae,defaultScopes:rt=["openid","email","profile","offline_access"]}=l;return Ot.create({discoveryApi:b,oauthRequestApi:Ae,provider:G,environment:x,defaultScopes:rt,scopeTransform(ut){return ut.map(yt=>H.has(yt)||yt.startsWith(re)?yt:`${re}${yt}`)}})}}const ae=v.z.object({profile:v.z.object({email:v.z.string().optional(),displayName:v.z.string().optional(),picture:v.z.string().optional()}),backstageIdentity:v.z.object({id:v.z.string(),token:v.z.string(),identity:v.z.object({type:v.z.literal("user"),userEntityRef:v.z.string(),ownershipEntityRefs:v.z.array(v.z.string())})})}),Te={id:"saml",title:"SAML",icon:()=>null};class Et{constructor(l){this.sessionManager=l}static create(l){const{discoveryApi:b,environment:x="development",provider:G=Te}=l,Ae=new i({discoveryApi:b,environment:x,provider:G}),rt=new lt({connector:Ae}),ut=new qe({manager:rt,storageKey:`${G.id}Session`,schema:ae});return new Et(ut)}sessionState$(){return this.sessionManager.sessionState$()}async signIn(){await this.getBackstageIdentity({})}async signOut(){await this.sessionManager.removeSession()}async getBackstageIdentity(l={}){const b=await this.sessionManager.getSession(l);return b==null?void 0:b.backstageIdentity}async getProfile(l={}){const b=await this.sessionManager.getSession(l);return b==null?void 0:b.profile}}const te={id:"microsoft",title:"Microsoft",icon:()=>null};class ee{static create(l){const{environment:b="development",provider:x=te,oauthRequestApi:G,discoveryApi:Ae,defaultScopes:rt=["openid","offline_access","profile","email","User.Read"]}=l;return Ot.create({discoveryApi:Ae,oauthRequestApi:G,provider:x,environment:b,defaultScopes:rt})}}const Le={id:"onelogin",title:"onelogin",icon:()=>null},le=new Set(["openid","profile","email","phone","address","groups","offline_access"]),Q="onelogin.";class xe{static create(l){const{discoveryApi:b,environment:x="development",provider:G=Le,oauthRequestApi:Ae}=l;return Ot.create({discoveryApi:b,oauthRequestApi:Ae,provider:G,environment:x,defaultScopes:["openid","email","profile","offline_access"],scopeTransform(rt){return rt.map(ut=>le.has(ut)||ut.startsWith(Q)?ut:`${Q}${ut}`)}})}}const at={id:"bitbucket",title:"Bitbucket",icon:()=>null};class Zt{static create(l){const{discoveryApi:b,environment:x="development",provider:G=at,oauthRequestApi:Ae,defaultScopes:rt=["team"]}=l;return Ot.create({discoveryApi:b,oauthRequestApi:Ae,provider:G,environment:x,defaultScopes:rt})}}const Dt={id:"atlassian",title:"Atlassian",icon:()=>null};class en{static create(l){const{discoveryApi:b,environment:x="development",provider:G=Dt,oauthRequestApi:Ae}=l;return Ot.create({discoveryApi:b,oauthRequestApi:Ae,provider:G,environment:x})}}class on{constructor(){this.subject=new Ce}post(l){this.subject.next(l)}alert$(){return this.subject}}class gn{captureEvent(l){}}const Ye="theme";class Y{constructor(l){this.themes=l,this.subject=new $e(void 0)}static createWithStorage(l){var b;const x=new Y(l);if(!window.localStorage)return x;const G=(b=window.localStorage.getItem(Ye))!=null?b:void 0;return x.setActiveThemeId(G),x.activeThemeId$().subscribe(Ae=>{Ae?window.localStorage.setItem(Ye,Ae):window.localStorage.removeItem(Ye)}),window.addEventListener("storage",Ae=>{var rt;if(Ae.key===Ye){const ut=(rt=localStorage.getItem(Ye))!=null?rt:void 0;x.setActiveThemeId(ut)}}),x}getInstalledThemes(){return this.themes.slice()}activeThemeId$(){return this.subject}getActiveThemeId(){return this.activeThemeId}setActiveThemeId(l){this.activeThemeId=l,this.subject.next(l)}}const ce="Invalid discovery URL pattern,";class _e{constructor(l){this.parts=l}static compile(l){const b=l.split(/\{\{\s*pluginId\s*\}\}/),x=b.join("pluginId");let G;try{G=new URL(x)}catch{throw new Error(`${ce} URL '${x}' is invalid`)}if(G.hash)throw new Error(`${ce} URL must not have a hash`);if(G.search)throw new Error(`${ce} URL must not have a query`);if(x.endsWith("/"))throw new Error(`${ce} URL must not end with a slash`);return new _e(b)}async getBaseUrl(l){return this.parts.join(l)}}class Ze{constructor(l,b){this.alertApi=l,this.errorApi=b}post(l,b){return b!=null&&b.hidden||this.alertApi.post({message:l.message,severity:"error"}),this.errorApi.post(l,b)}error$(){return this.errorApi.error$()}}class ie{constructor(){this.subject=new Ce}post(l,b){this.subject.next({error:l,context:b})}error$(){return this.subject}}class de{static forward(l,b){window.addEventListener("unhandledrejection",x=>{l.post(x.reason,b)})}}function ve(K){if(K.length<3)throw new Error(`The '${K}' feature flag must have a minimum length of three characters.`);if(K.length>150)throw new Error(`The '${K}' feature flag must not exceed 150 characters.`);if(!K.match(/^[a-z]+[a-z0-9-]+$/))throw new Error(`The '${K}' feature flag must start with a lowercase letter and only contain lowercase letters, numbers and hyphens. Examples: feature-flag-one, alpha, release-2020`)}class ge{constructor(){this.registeredFeatureFlags=[]}registerFlag(l){ve(l.name),this.registeredFeatureFlags.push(l)}getRegisteredFlags(){return this.registeredFeatureFlags.slice()}isActive(l){return this.flags||(this.flags=this.load()),this.flags.get(l)===u.CL.Active}save(l){this.flags||(this.flags=this.load()),l.merge||this.flags.clear();for(const[x,G]of Object.entries(l.states))this.flags.set(x,G);const b=Array.from(this.flags.entries()).filter(([,x])=>x===u.CL.Active);window.localStorage.setItem("featureFlags",JSON.stringify(Object.fromEntries(b)))}load(){try{const l=window.localStorage.getItem("featureFlags");if(!l)return new Map;const b=JSON.parse(l);if(typeof b!="object"||b===null||Array.isArray(b))return new Map;const x=Object.entries(b).filter(([G,Ae])=>(ve(G),Ae===u.CL.Active));return new Map(x)}catch{return new Map}}}function nt(K){var l;let b=K.baseImplementation||t.g.fetch;const x=[(l=K.middleware)!=null?l:[]].flat().reverse();for(const G of x)b=G.apply(b);return{fetch:b}}class bt{constructor(l,b,x,G){this.identityApi=l,this.allowUrl=b,this.headerName=x,this.headerValue=G}static create(l){var b,x;const G=kt(l),Ae=((b=l.header)==null?void 0:b.name)||"authorization",rt=((x=l.header)==null?void 0:x.value)||(ut=>`Bearer ${ut}`);return new bt(l.identityApi,G,Ae,rt)}apply(l){return async(b,x)=>{const G=new Request(b,x),{token:Ae}=await this.identityApi.getCredentials();return G.headers.get(this.headerName)||typeof Ae!="string"||!Ae||!this.allowUrl(G.url)?l(b,x):(G.headers.set(this.headerName,this.headerValue(Ae)),l(G))}}}function kt(K){return K.allowUrl?K.allowUrl:K.urlPrefixAllowlist?ln(K.urlPrefixAllowlist):K.config?ln([K.config.getString("backend.baseUrl")]):()=>!1}function ln(K){const l=K.map(b=>b.replace(/\/$/,""));return b=>l.some(x=>b===x||b.startsWith(`${x}/`))}function Ut(K,l){return!l||l==="/"?K:`${K.replace(/\/$/,"")}/${l.replace(/^\//,"")}`}class Mt{constructor(l){this.discoveryApi=l}apply(l){return async(b,x)=>{const G=new Request(b,x),Ae="plugin://";if(!G.url.startsWith(Ae))return l(b,x);const{hostname:rt,pathname:ut,search:yt,hash:Vt,username:Ft,password:On}=new URL(`http://${G.url.substring(Ae.length)}`);let yn=await this.discoveryApi.getBaseUrl(rt);if(Ft||On){const jn=new URL(yn),wn=`${Ft}${On?`:${On}`:""}@`;yn=`${jn.protocol}//${wn}${jn.host}${jn.pathname}`}const Mn=`${Ut(yn,ut)}${yt}${Vt}`;return l(Mn,typeof b=="string"?x:b)}}}class Gt{static resolvePluginProtocol(l){return new Mt(l.discoveryApi)}static injectIdentityAuth(l){return bt.create(l)}constructor(){}}function bn(K,l){for(const b of l)if(!K.has(b))return!1;return!0}function vn(K,...l){const b=new Set(K);for(const x of l)for(const G of x)b.add(G);return b}class Me{constructor(){this.requests=[],this.subject=new $e(this.getCurrentPending())}request(l){return new Promise((b,x)=>{this.requests.push({scopes:l,resolve:b,reject:x}),this.subject.next(this.getCurrentPending())})}resolve(l,b){this.requests=this.requests.filter(x=>bn(l,x.scopes)?(x.resolve(b),!1):!0),this.subject.next(this.getCurrentPending())}reject(l){this.requests.forEach(b=>b.reject(l)),this.requests=[],this.subject.next(this.getCurrentPending())}pending(){return this.subject}getCurrentPending(){const l=this.requests.length===0?void 0:this.requests.slice(1).reduce((b,x)=>vn(b,x.scopes),this.requests[0].scopes);return{scopes:l,resolve:b=>{l&&this.resolve(l,b)},reject:b=>{l&&this.reject(b)}}}}class ht{constructor(){this.subject=new $e([]),this.currentRequests=[],this.handlerCount=0}createAuthRequester(l){const b=new Me,x=this.handlerCount;return this.handlerCount++,b.pending().subscribe({next:G=>{const Ae=this.currentRequests.slice(),rt=this.makeAuthRequest(G,l);rt?Ae[x]=rt:delete Ae[x],this.currentRequests=Ae,this.subject.next(Ae.filter(Boolean))}}),G=>b.request(G)}makeAuthRequest(l,b){const{scopes:x}=l;if(!!x)return{provider:b.provider,trigger:async()=>{const G=await b.onAuthRequest(x);l.resolve(G)},reject:()=>{const G=new Error("Login failed, rejected by user");G.name="RejectedError",l.reject(G)}}}authRequest$(){return this.subject}}const _t=new Map;class tn{constructor(l,b){this.namespace=l,this.errorApi=b,this.subscribers=new Set,this.observable=new(m())(x=>(this.subscribers.add(x),()=>{this.subscribers.delete(x)}))}static create(l){var b;return new tn((b=l.namespace)!=null?b:"",l.errorApi)}get(l){return this.snapshot(l).value}snapshot(l){let b,x="absent";try{const G=localStorage.getItem(this.getKeyName(l));G&&(b=JSON.parse(G,(Ae,rt)=>(typeof rt=="object"&&rt!==null&&Object.freeze(rt),rt)),x="present")}catch{this.errorApi.post(new Error(`Error when parsing JSON config from storage for: ${l}`))}return{key:l,value:b,presence:x}}forBucket(l){const b=`${this.namespace}/${l}`;return _t.has(b)||_t.set(b,new tn(b,this.errorApi)),_t.get(b)}async set(l,b){localStorage.setItem(this.getKeyName(l),JSON.stringify(b)),this.notifyChanges(l)}async remove(l){localStorage.removeItem(this.getKeyName(l)),this.notifyChanges(l)}observe$(l){return this.observable.filter(({key:b})=>b===l)}getKeyName(l){return`${this.namespace}/${encodeURIComponent(l)}`}notifyChanges(l){const b=this.snapshot(l);for(const x of this.subscribers)x.next(b)}}function Bt(K){const l={};for(const x in K.collectors)K.collectors.hasOwnProperty(x)&&(l[x]=K.collectors[x]());const b=[{node:e.Children.toArray(K.root),parent:void 0,contexts:{}}];for(;b.length!==0;){const{node:x,parent:G,contexts:Ae}=b.shift();e.Children.forEach(x,rt=>{if(!(0,e.isValidElement)(rt))return;const ut={};for(const yt in l)if(l.hasOwnProperty(yt)){const Vt=l[yt];ut[yt]=Vt.visit(Vt.accumulator,rt,G,Ae[yt])}for(const yt of K.discoverers){const Vt=yt(rt);Vt&&b.push({node:Vt,parent:rt,contexts:ut})}})}return Object.fromEntries(Object.entries(l).map(([x,G])=>[x,G.accumulator]))}function hn(K,l){return()=>({accumulator:K(),visit:l})}function kn(K){var l;return(l=K.props)==null?void 0:l.children}function Bn(K){var l,b,x;if(((l=K.props)==null?void 0:l.path)&&((b=K.props)==null?void 0:b.element))return(x=K.props)==null?void 0:x.element}const Un=hn(()=>new Set,(K,l)=>{const b=(0,u.IY)(l,"core.plugin");b&&K.add(b)}),An=K=>{const{children:l}=K,b=(0,u.h_)(u.W0),x="with"in K?b.isActive(K.with):!b.isActive(K.without);return e.createElement(e.Fragment,null,x?l:null)};(0,u.R5)(An,"core.featureFlagged",!0);const Ge={caseSensitive:!1,path:"/*",element:"match-all",routeRefs:new Set},Je=hn(()=>({paths:new Map,parents:new Map,objects:new Array}),(K,l,b,x)=>{var G,Ae,rt,ut,yt;if((b==null?void 0:b.props.element)===l)return x;let Vt=x==null?void 0:x.obj,Ft=x==null?void 0:x.routeRef,On=x==null?void 0:x.sticky;const yn=(G=l.props)==null?void 0:G.path,Mn=(Ae=Vt==null?void 0:Vt.children)!=null?Ae:K.objects,jn=Boolean((rt=l.props)==null?void 0:rt.caseSensitive);let wn=x==null?void 0:x.path;if((0,u.IY)(l,"core.gatherMountPoints")){if(!yn)throw new Error("Mount point gatherer must have a path");wn=yn}const sr=(ut=l.props)==null?void 0:ut.element;let Jn=(0,u.IY)(l,"core.mountPoint");if(!Jn&&(0,e.isValidElement)(sr)&&(Jn=(0,u.IY)(sr,"core.mountPoint")),Jn){let Ct=yn;if(wn&&(Ct?wn=void 0:Ct=wn),!Ct)throw new Error("Mounted routable extension must have a path");K.paths.set(Jn,Ct),Ft&&On?(K.parents.set(Jn,Ft),yn&&(Ft=Jn,On=!1)):(K.parents.set(Jn,Ft),Ft=Jn),yn?(Vt={caseSensitive:jn,path:yn,element:"mounted",routeRefs:new Set([Jn]),children:[Ge],plugin:(0,u.IY)(l.props.element,"core.plugin")},Mn.push(Vt)):Vt==null||Vt.routeRefs.add(Jn)}if((0,u.IY)(l,"core.gatherMountPoints")&&(On=!0),(0,u.IY)(l,"core.gatherMountPoints")){if(!yn)throw new Error("Mount point gatherer must have a path");Jn||(Vt={caseSensitive:jn,path:yn,element:"gathered",routeRefs:new Set,children:[Ge],plugin:(yt=x==null?void 0:x.obj)==null?void 0:yt.plugin},Mn.push(Vt))}return{obj:Vt,path:wn,routeRef:Ft,sticky:On}}),mt=hn(()=>new Set,(K,l)=>{if(l.type===An){const b=l.props;K.add("with"in b?b.with:b.without)}}),dt=(0,a.uW)("route-ref-type",()=>Symbol("route-ref-type"));function It(K){return K[dt]==="absolute"}function Wt(K){return K[dt]==="sub"}function Jt(K){return K[dt]==="external"}function xt(...K){const l=K.join("/").replace(/\/\/+/g,"/");return l!=="/"&&l.endsWith("/")?l.slice(0,-1):l}function N(K,l,b){let x,G="";if(It(K))x=K;else if(Wt(K))x=K.parent,G=K.path;else if(Jt(K)){const ut=b.get(K);if(!ut)return[void 0,""];if(It(ut))x=ut;else if(Wt(ut))x=ut.parent,G=ut.path;else throw new Error(`ExternalRouteRef was bound to invalid target, ${ut}`)}else throw K[dt]?new Error(`Unknown or invalid route ref type, ${K[dt]}`):new Error(`Unknown object passed to useRouteRef, got ${K}`);if(!x)return[void 0,""];const Ae=l.get(x);if(!Ae)return[void 0,""];const rt=xt(Ae,G);return[x,rt]}function F(K,l,b,x,G){var Ae;const rt=(Ae=(0,y.fp)(G,l))!=null?Ae:[],ut=Array();let yt=-1;for(let On=K;On&&(yt=rt.findIndex(yn=>yn.route.routeRefs.has(On)),yt===-1);On=x.get(On))ut.unshift(On);ut.length===0&&(yt-=1);const Vt=yt===-1?"":rt[yt].pathname,Ft=xt(...ut.slice(0,-1).map(On=>{const yn=b.get(On);if(!yn)throw new Error(`No path for ${On}`);if(yn.includes(":"))throw new Error(`Cannot route to ${K} with parent ${On} as it has parameters`);return yn}));return Vt+Ft}class q{constructor(l,b,x,G,Ae){this.routePaths=l,this.routeParents=b,this.routeObjects=x,this.routeBindings=G,this.appBasePath=Ae}resolve(l,b){const[x,G]=N(l,this.routePaths,this.routeBindings);if(!x)return;let Ae;typeof b=="string"?Ae=this.trimPath(b):b.pathname?Ae={...b,pathname:this.trimPath(b.pathname)}:Ae=b;const rt=this.appBasePath+F(x,Ae,this.routePaths,this.routeParents,this.routeObjects);return(...[yt])=>rt+(0,y.Gn)(G,yt)}trimPath(l){return l&&(l.startsWith(this.appBasePath)?l.slice(this.appBasePath.length):l)}}const ye=(0,a.CT)("routing-context"),Se=({routePaths:K,routeParents:l,routeObjects:b,routeBindings:x,basePath:G="",children:Ae})=>{const rt=new q(K,l,b,x,G),ut=(0,a.EI)({1:rt});return e.createElement(ye.Provider,{value:ut},Ae)},vt=(K,l)=>{var b,x;try{const G=(0,y.fp)(l,{pathname:K}),Ae=(b=G==null?void 0:G.filter(ut=>{var yt;return((yt=ut==null?void 0:ut.route.routeRefs)==null?void 0:yt.size)>0}).pop())==null?void 0:b.route;if(!Ae)return{};let rt;return Ae.routeRefs.size===1&&(rt=Ae.routeRefs.values().next().value),{extension:"App",pluginId:((x=Ae.plugin)==null?void 0:x.getId())||"root",...rt?{routeRef:rt.id}:{}}}catch{return{}}},Rt=({pathname:K,search:l,hash:b})=>{const x=(0,u.z$)();return(0,e.useEffect)(()=>{x.captureEvent("navigate",`${K}${l}${b}`)},[x,K,l,b]),null},Nt=({routeObjects:K})=>{const{pathname:l,search:b,hash:x}=(0,y.TH)();return e.createElement(u.fC,{attributes:vt(l,K)},e.createElement(Rt,{pathname:l,search:b,hash:x}))};function zt(K,l){const b=new Set(l.values());b.delete(void 0);for(const x of l.keys()){if(b.has(x))continue;let G=x,Ae="";for(;G;){const ut=K.get(G);if(!ut)throw new Error(`No path for ${G}`);Ae=`${ut}${Ae}`,G=l.get(G)}const rt=Ae.match(/:(\w+)/g);if(rt){for(let ut=0;ut<rt.length;ut++)for(let yt=ut+1;yt<rt.length;yt++)if(rt[yt]===rt[ut])throw new Error(`Parameter ${rt[yt]} is duplicated in path ${Ae}`)}}}function xn(K,l){for(const b of l)if(!!b.externalRoutes){for(const[x,G]of Object.entries(b.externalRoutes))if(!G.optional&&!K.has(G))throw new Error(`External route '${x}' of the '${b.getId()}' plugin must be bound to a target route. See https://backstage.io/link?bind-routes for details.`)}}const zn=(0,a.CT)("app-context"),st=({appContext:K,children:l})=>{const b=(0,a.EI)({1:K});return e.createElement(zn.Provider,{value:b,children:l})};function Ue(K){return new Error(`Tried to access IdentityApi ${K} before app was loaded`)}function oe(K){console.warn(`WARNING: Call to ${K} is deprecated and will break in the future`)}class he{constructor(){this.resolveTarget=()=>{},this.waitForTarget=new Promise(l=>{this.resolveTarget=l})}setTarget(l){this.target=l,this.resolveTarget(l)}getUserId(){if(!this.target)throw Ue("getUserId");if(!this.target.getUserId)throw new Error("IdentityApi does not implement getUserId");return oe("getUserId"),this.target.getUserId()}getProfile(){if(!this.target)throw Ue("getProfile");if(!this.target.getProfile)throw new Error("IdentityApi does not implement getProfile");return oe("getProfile"),this.target.getProfile()}async getProfileInfo(){return this.waitForTarget.then(l=>l.getProfileInfo())}async getBackstageIdentity(){const l=await this.waitForTarget.then(b=>b.getBackstageIdentity());return l.userEntityRef.match(/^.*:.*\/.*$/)||console.warn(`WARNING: The App IdentityApi provided an invalid userEntityRef, '${l.userEntityRef}'. It must be a full Entity Reference of the form '<kind>:<namespace>/<name>'.`),l}async getCredentials(){return this.waitForTarget.then(l=>l.getCredentials())}async getIdToken(){return this.waitForTarget.then(l=>{if(!l.getIdToken)throw new Error("IdentityApi does not implement getIdToken");return oe("getIdToken"),l.getIdToken()})}async signOut(){await this.waitForTarget.then(l=>l.signOut()),location.reload()}}function De(K,l,b){if(K!==void 0){const G=b.find(Ae=>Ae.id===K);if(G)return G}if(l){const G=b.find(Ae=>Ae.variant==="dark");if(G)return G}const x=b.find(G=>G.variant==="light");return x||b[0]}const we=()=>{const K=(0,e.useMemo)(()=>window.matchMedia("(prefers-color-scheme: dark)"),[]),[l,b]=(0,e.useState)(K.matches);return(0,e.useEffect)(()=>{const x=G=>{b(G.matches)};return K.addListener(x),()=>{K.removeListener(x)}},[K]),l};function Ne({children:K}){const l=(0,u.h_)(u.hg),b=(0,M.Z)(l.activeThemeId$(),l.getActiveThemeId()),x=Boolean(window.matchMedia)?we():!1,G=De(b,x,l.getInstalledThemes());if(!G)throw new Error("App has no themes");return e.createElement(G.Provider,{children:K})}const Ke=async(K="__APP_INJECTED_RUNTIME_CONFIG__")=>{const l=[{context:"app-config.yaml",data:{app:{title:"Scaffolded Backstage App",baseUrl:"http://localhost:3000"},organization:{name:"My Company"},backend:{baseUrl:"http://localhost:7007"},integrations:{github:[{host:"github.com"}]},techdocs:{builder:"local"},catalog:{import:{entityFilename:"catalog-info.yaml",pullRequestBranchName:"backstage-integration"}}}}];if(!l)throw new Error("No static configuration provided");if(!Array.isArray(l))throw new Error("Static configuration has invalid format");const b=l.slice();if(K!=="__app_injected_runtime_config__".toLocaleUpperCase("en-US"))try{const G=JSON.parse(K);Array.isArray(G)?b.push(...G):b.push({data:G,context:"env"})}catch(G){throw new Error(`Failed to load runtime configuration, ${G}`)}const x=window.__APP_CONFIG__;return x&&b.push({context:"window",data:x}),b};class Be{constructor(){this.apis=[]}add(l,b){return this.apis.push([l.id,b]),b}build(){return new ct(new Map(this.apis))}}class ct{constructor(l){this.apis=l}static builder(){return new Be}static from(l){return new ct(new Map(l.map(([b,x])=>[b.id,x])))}static with(l,b){return new ct(new Map([[l.id,b]]))}with(l,b){return new ct(new Map([...this.apis,[l.id,b]]))}get(l){return this.apis.get(l.id)}}function Kt(K){const l=new Map;return K&&K({bind:(x,G)=>{for(const[Ae,rt]of Object.entries(G)){const ut=x[Ae];if(!ut)throw new Error(`Key ${Ae} is not an existing external route`);if(!rt&&!ut.optional)throw new Error(`External route ${Ae} is required but was undefined`);rt&&l.set(ut,rt)}}}),l}const mn=(0,e.createContext)({routeObjects:[]});function se(K){var l;let{pathname:b}=new URL((l=K.getOptionalString("app.baseUrl"))!=null?l:"/","http://dummy.dev");return b=b.replace(/\/*$/,""),b}function ke(K,l,b){var x;const G=Boolean(K),Ae=(0,h.default)(K||(()=>Promise.resolve([])));let rt;if(G&&Ae.loading){const{Progress:Vt}=l;rt=e.createElement(Vt,null)}else if(Ae.error){const{BootErrorPage:Vt}=l;rt=e.createElement(Vt,{step:"load-config",error:Ae.error})}const{ThemeProvider:ut=Ne}=l;return rt?{node:e.createElement(J,{apis:ct.with(u.hg,b)},e.createElement(ut,null,rt))}:{api:d.m.fromConfigs((x=Ae.value)!=null?x:[])}}class ot{constructor(l){this.app=l}getPlugins(){return this.app.getPlugins()}getSystemIcon(l){return this.app.getSystemIcon(l)}getComponents(){return this.app.getComponents()}}class wt{constructor(l){this.appIdentityProxy=new he;var b,x,G,Ae;this.apis=(b=l.apis)!=null?b:[],this.icons=l.icons,this.plugins=new Set((x=l.plugins)!=null?x:[]),this.components=l.components,this.themes=l.themes,this.configLoader=(G=l.configLoader)!=null?G:Ke,this.defaultApis=(Ae=l.defaultApis)!=null?Ae:[],this.bindRoutes=l.bindRoutes,this.apiFactoryRegistry=new E}getPlugins(){return Array.from(this.plugins)}getSystemIcon(l){return this.icons[l]}getComponents(){return this.components}getProvider(){const l=new ot(this);let b=!1;return({children:G})=>{const Ae=(0,e.useMemo)(()=>Y.createWithStorage(this.themes),[]),{routing:rt,featureFlags:ut,routeBindings:yt}=(0,e.useMemo)(()=>{const yn=Bt({root:G,discoverers:[kn,Bn],collectors:{routing:Je,collectedPlugins:Un,featureFlags:mt}});return yn.collectedPlugins.forEach(Mn=>this.plugins.add(Mn)),this.verifyPlugins(this.plugins),this.getApiHolder(),{...yn,routeBindings:Kt(this.bindRoutes)}},[G]);b||(b=!0,zt(rt.paths,rt.parents),xn(yt,this.plugins));const Vt=ke(this.configLoader,this.components,Ae),Ft="api"in Vt;if(Ft){const{api:yn}=Vt;this.configApi=yn}if((0,e.useEffect)(()=>{if(Ft){const yn=this.getApiHolder().get(u.W0);for(const Mn of this.plugins.values())if("getFeatureFlags"in Mn)for(const jn of Mn.getFeatureFlags())yn.registerFlag({name:jn.name,pluginId:Mn.getId()});else for(const jn of Mn.output())jn.type==="feature-flag"&&yn.registerFlag({name:jn.name,pluginId:Mn.getId()});for(const Mn of ut)yn.registerFlag({name:Mn,pluginId:""})}},[Ft,Vt,ut]),"node"in Vt)return Vt.node;const{ThemeProvider:On=Ne}=this.components;return e.createElement(J,{apis:this.getApiHolder()},e.createElement(st,{appContext:l},e.createElement(On,null,e.createElement(Se,{routePaths:rt.paths,routeParents:rt.parents,routeObjects:rt.objects,routeBindings:yt,basePath:se(Vt.api)},e.createElement(mn.Provider,{value:{routeObjects:rt.objects}},G)))))}}getRouter(){const{Router:l,SignInPage:b}=this.components,x=({component:Ae,children:rt})=>{const[ut,yt]=(0,e.useState)();return ut?(this.appIdentityProxy.setTarget(ut),rt):e.createElement(Ae,{onSignInSuccess:yt})};return({children:Ae})=>{const rt=(0,u.h_)(u.Ds),ut=`${se(rt)}/*`,{routeObjects:yt}=(0,e.useContext)(mn);return b?e.createElement(l,null,e.createElement(Nt,{routeObjects:yt}),e.createElement(x,{component:b},e.createElement(y.Z5,null,e.createElement(y.AW,{path:ut,element:e.createElement(e.Fragment,null,Ae)})))):(this.appIdentityProxy.setTarget({getUserId:()=>"guest",getIdToken:async()=>{},getProfile:()=>({email:"guest@example.com",displayName:"Guest"}),getProfileInfo:async()=>({email:"guest@example.com",displayName:"Guest"}),getBackstageIdentity:async()=>({type:"user",userEntityRef:"user:default/guest",ownershipEntityRefs:["user:default/guest"]}),getCredentials:async()=>({}),signOut:async()=>{}}),e.createElement(l,null,e.createElement(Nt,{routeObjects:yt}),e.createElement(y.Z5,null,e.createElement(y.AW,{path:ut,element:e.createElement(e.Fragment,null,Ae)}))))}}getApiHolder(){if(this.apiHolder){for(const l of this.plugins)for(const b of l.getApis())this.apiFactoryRegistry.get(b.api)||this.apiFactoryRegistry.register("default",b);return g.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder}this.apiFactoryRegistry.register("static",{api:u.hg,deps:{},factory:()=>Y.createWithStorage(this.themes)}),this.apiFactoryRegistry.register("static",{api:u.Ds,deps:{},factory:()=>{if(!this.configApi)throw new Error("Tried to access config API before config was loaded");return this.configApi}}),this.apiFactoryRegistry.register("static",{api:u.$4,deps:{},factory:()=>this.appIdentityProxy}),this.apiFactoryRegistry.register("default",{api:u.W0,deps:{},factory:()=>new ge});for(const l of this.defaultApis)this.apiFactoryRegistry.register("default",l);for(const l of this.plugins)for(const b of l.getApis())if(!this.apiFactoryRegistry.register("default",b))throw new Error(`Plugin ${l.getId()} tried to register duplicate or forbidden API factory for ${b.api}`);for(const l of this.apis)if(!this.apiFactoryRegistry.register("app",l))throw new Error(`Duplicate or forbidden API factory for ${l.api} in app`);return g.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder=new g(this.apiFactoryRegistry),this.apiHolder}verifyPlugins(l){const b=new Set;for(const x of l){const G=x.getId();if(b.has(G))throw new Error(`Duplicate plugin found '${G}'`);b.add(G)}}}function Fe(K){return new wt(K)}const ft=K=>{const l=(0,u.qD)(),{NotFoundErrorPage:b}=l.getComponents(),x=(0,u.vJ)(K.children,G=>G.getElements().flatMap(Ae=>{var rt;let ut=Ae.props.path;return ut===""?[]:(ut=(rt=ut==null?void 0:ut.replace(/\/\*$/,""))!=null?rt:"/",[{path:ut,element:Ae,children:Ae.props.children?[{path:ut==="/"?"/":"/*",element:Ae.props.children}]:void 0}])}).sort((Ae,rt)=>rt.path.localeCompare(Ae.path)).map(Ae=>(Ae.path=Ae.path==="/"?"/":`${Ae.path}/*`,Ae)));return x.push({element:e.createElement(b,null),path:"/*"}),(0,y.V$)(x)}},49558:function(Lt,c,t){t.d(c,{in:function(){return yn},qE:function(){return sr},Oo:function(){return es},zx:function(){return Xt},hB:function(){return Pl},db:function(){return ws},Oi:function(){return Ln},VY:function(){return Ua},yW:function(){return qo},XF:function(){return Nn},mn:function(){return br},NX:function(){return ir},zG:function(){return As},ub:function(){return fa},mf:function(){return Fi},yu:function(){return un},h4:function(){return Na},M6:function(){return Qr},i9:function(){return ts},aR:function(){return jo},rJ:function(){return P},Oh:function(){return nl},hu:function(){return rs},rU:function(){return Ct},nU:function(){return Ha},SA:function(){return ra},sk:function(){return Ta},J3:function(){return Xa},Or:function(){return Qa},T3:function(){return Wa},g9:function(){return al},Ex:function(){return ia},Gk:function(){return Tn},tn:function(){return zo},Ph:function(){return Gn},YE:function(){return Vs},lm:function(){return la},v7:function(){return Ko},Hz:function(){return lo},R6:function(){return Wo},tR:function(){return Bs},qn:function(){return ya},oz:function(){return ci},BV:function(){return ii},k2:function(){return Bo},BT:function(){return Js},dh:function(){return va},vK:function(){return no},Kq:function(){return Nr},wA:function(){return ro},VC:function(){return ao},Pd:function(){return to},xT:function(){return Cs},uw:function(){return vi},qt:function(){return Ms},oZ:function(){return bl},WD:function(){return Ho},iA:function(){return Oi},tB:function(){return Os},GB:function(){return Yt},po:function(){return ea},r0:function(){return io},tA:function(){return Ss}});var e=t(2784),n=t(37265),p=t(61837),a=t(87685),o=t(99688),m=t(30705),u=t(19928),v=t.n(u),d=t(79692),y=t(12420),h=t(60364),M=t(41128),L=t(15459),$=t(76600),J=t(41547),g=t(43434),S=t(77277),E=t(86689),I=t(62833),D=t(10289),T=t(80030),i=t(19353),O=t(95074),W=t(80164),Ce=t(26639),$e=t(39595),Qe=t(41156),it=t(88188),lt=t(40007),qe=t(11105),$t=t(97963),Ot=t(46506),pn=t.n(Ot),_n=t(54073),U=t.n(_n),Re=t(10368),w=t(55876),Ie=t(66481),fe=t(19574),A=t.n(fe),H=t(72164),re=t(72779),Pe=t.n(re),ae=t(60905),Te=t(90436),Et=t.p+"static/missingAnnotation.67f79e98..svg",te=t.p+"static/noInformation.4b426325..svg",ee=t.p+"static/createComponent.975d1e1e..svg",Le=t.p+"static/noBuild.1715fa71..svg",le=t(11776),Q=t(38402),xe=t(49378),at=t(27616),Zt=t(8284),Dt=t(70660),en=t(91750),on=t(38016),gn=t(85256),Ye=t(1292),Y=t(47093),ce=t(35292),_e=t(48049),Ze=t(51209),ie=t(64897),de=t(96444),ve=t(8629),ge=t(49429),nt=t(38724),bt=t(79249),kt=t(3806),ln=t(32272),Ut=t(15277),Mt=t.n(Ut),Gt=t(29862),bn=t(80277),vn=t(67358),Me=t(94339),ht=t(14503),_t=t(24579),tn=t(32552),Bt=t(95544),hn=t(27597),kn=t(39307),Bn=t(21324),Un=t(7089),An=t(42494),Ge=t(74603),Je=t(12231),mt=t(73698),dt=t(72379),It=t(74600),Wt=t.n(It),Jt=t(37390),xt=t(97485),N=t(15584),F=t(89571),q=t(86136),ye=t(79784),Se=t(76635),vt=t(19126),Rt=t.n(vt),Nt=t(80079),zt=t(18671),xn=t(50023),zn=t(4190),st=t(44882),Ue=t(57998),oe=t(83543),he=t(59797),De=t(26739),we=t(86619),Ne=t(98989),Ke=t(6487),Be=t(99152),ct=t(21070),Kt=t(90324),mn=t(98281),se=t(33375),ke=t(44233),ot=t(27604),wt=t(36444),Fe=t(37971),ft=t(59709),K=t(17373),l=t(3702),b=t(93111),x=t(67222),G=t(44311),Ae=t.p+"static/mic-drop.fe3ef4d0..svg",rt=t(16173),ut=t(30195),yt=t(63955),Vt=t(74828),Ft=t(45455),On=t.n(Ft);function yn(r){const[s,C]=(0,e.useState)([]),R=(0,m.h_)(m.$v);if((0,e.useEffect)(()=>{const Ee=R.alert$().subscribe(Oe=>C(Xe=>Xe.concat(Oe)));return()=>{Ee.unsubscribe()}},[R]),s.length===0)return null;const[B]=s,V=()=>{C(Ee=>Ee.filter(Oe=>Oe!==B))};return e.createElement(n.Z,{open:!0,anchorOrigin:{vertical:"top",horizontal:"center"}},e.createElement(o.Z,{action:e.createElement(p.Z,{color:"inherit",size:"small",onClick:V,"data-testid":"error-button-close"},e.createElement(a.Z,null)),severity:B.severity},e.createElement("span",null,B.message.toString(),s.length>1&&e.createElement("em",null,` (${s.length-1} older ${v()("message",s.length-1)})`))))}function Mn(r){let s=0;for(let R=0;R<r.length;R++)s=r.charCodeAt(R)+((s<<5)-s);let C="#";for(let R=0;R<3;R++)C+=`00${(s>>R*8&255).toString(16)}`.substr(-2);return C}function jn(r){var s;return(s=r.match(/\b\w/g))==null?void 0:s.join("").substring(0,2)}const wn=(0,d.Z)(r=>(0,y.Z)({avatar:{width:"4rem",height:"4rem",color:"#fff",fontWeight:r.typography.fontWeightBold,letterSpacing:"1px",textTransform:"uppercase"}}),{name:"BackstageAvatar"});function sr(r){const{displayName:s,picture:C,customStyles:R}=r,B=wn();return e.createElement(g.Z,{alt:s,src:C,className:B.avatar,style:{backgroundColor:Mn(s||C||""),...R}},s&&jn(s))}const Jn=r=>/^([a-z+.-]+):/.test(r),Or=r=>{var s;return r instanceof Array?r.map(Or).join(" ").trim():typeof r=="object"&&r?Or((s=r==null?void 0:r.props)==null?void 0:s.children):["string","number"].includes(typeof r)?String(r):""},Ct=e.forwardRef(({onClick:r,noTrack:s,...C},R)=>{const B=(0,m.z$)(),V=String(C.to),Ee=Or(C.children)||V,Oe=Jn(V),Xe=Oe&&!!/^https?:/.exec(V),ze=St=>{r==null||r(St),s||B.captureEvent("click",Ee,{attributes:{to:V}})};return Oe?e.createElement(E.Z,{ref:R,href:V,onClick:ze,...Xe?{target:"_blank",rel:"noopener"}:{},...C}):e.createElement(E.Z,{ref:R,component:I.rU,onClick:ze,...C})}),Ve=e.forwardRef((r,s)=>e.createElement(Ct,{ref:s,...r,color:"initial"})),Xt=e.forwardRef((r,s)=>e.createElement(S.Z,{ref:s,component:Ve,...r}));function Cn(r){const{text:s,tooltipDelay:C=1e3,tooltipText:R="Text copied to clipboard"}=r,B=(0,m.h_)(m.VE),[V,Ee]=(0,e.useState)(!1),[{error:Oe},Xe]=(0,O.Z)();(0,e.useEffect)(()=>{Oe&&B.post(Oe)},[Oe,B]);const ze=St=>{St.stopPropagation(),Ee(!0),Xe(s)};return e.createElement(e.Fragment,null,e.createElement(T.ZP,{id:"copy-test-tooltip",title:R,placement:"top",leaveDelay:C,onClose:()=>Ee(!1),open:V},e.createElement(p.Z,{onClick:ze},e.createElement(i.Z,null))))}function Ln(r){const{text:s,language:C,showLineNumbers:R=!1,highlightedNumbers:B,customStyle:V,showCopyCodeButton:Ee=!1}=r,Oe=(0,h.Z)(),Xe=Oe.palette.type==="dark"?Ce.Z:$e.Z,ze=Oe.palette.type==="dark"?"#256bf3":"#e6ffed";return e.createElement("div",{style:{position:"relative"}},e.createElement(W.Z,{customStyle:V,language:C,style:Xe,showLineNumbers:R,wrapLines:!0,lineNumberStyle:{color:Oe.palette.textVerySubtle},lineProps:St=>B!=null&&B.includes(St)?{style:{backgroundColor:ze}}:{}},s),Ee&&e.createElement("div",{style:{position:"absolute",top:0,right:0}},e.createElement(Cn,{text:s})))}function Nn(r){const{title:s,to:C}=r,R=(0,Qe.Z)(B=>B.breakpoints.down("xs"));return C?R?e.createElement(p.Z,{component:I.rU,color:"primary",title:s,size:"small",to:C},e.createElement(it.Z,null)):e.createElement(S.Z,{component:I.rU,variant:"contained",color:"primary",to:C},s):null}var Qn=(r=>(r.TOP_BOTTOM="TB",r.BOTTOM_TOP="BT",r.LEFT_RIGHT="LR",r.RIGHT_LEFT="RL",r))(Qn||{}),fr=(r=>(r.UP_LEFT="UL",r.UP_RIGHT="UR",r.DOWN_LEFT="DL",r.DOWN_RIGHT="DR",r))(fr||{}),pr=(r=>(r.NETWORK_SIMPLEX="network-simplex",r.TIGHT_TREE="tight-tree",r.LONGEST_PATH="longest-path",r))(pr||{}),er=(r=>(r.LEFT="l",r.RIGHT="r",r.CENTER="c",r))(er||{}),ir=Object.freeze({__proto__:null,Direction:Qn,Alignment:fr,Ranker:pr,LabelPosition:er});const lr=(0,d.Z)(r=>({node:{fill:r.palette.primary.light,stroke:r.palette.primary.light},text:{fill:r.palette.primary.contrastText}}),{name:"BackstageDependencyGraphDefaultNode"});function k({node:{id:r}}){const s=lr(),[C,R]=e.useState(0),[B,V]=e.useState(0),Ee=e.useRef(null);e.useLayoutEffect(()=>{if(Ee.current){let{height:St,width:gt}=Ee.current.getBBox();St=Math.round(St),gt=Math.round(gt),(St!==B||gt!==C)&&(R(gt),V(St))}},[C,B]);const Oe=10,Xe=C+Oe*2,ze=B+Oe*2;return e.createElement("g",null,e.createElement("rect",{className:s.node,width:Xe,height:ze,rx:10}),e.createElement("text",{ref:Ee,className:s.text,y:ze/2,x:Xe/2,textAnchor:"middle",alignmentBaseline:"middle"},r))}const Z="arrow-marker",X="node",pe="edge",et="label",tt=(0,Re.Z)(r=>({node:{transition:`${r.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphNode"}),At=r=>e.createElement(k,{...r});function Ht({render:r=At,setNode:s,node:C}){const{width:R,height:B,x:V=0,y:Ee=0}=C,Oe=C,Xe=tt(),ze=e.useRef(null);return e.useLayoutEffect(()=>{if(ze.current){let{height:St,width:gt}=ze.current.getBBox();St=Math.round(St),gt=Math.round(gt),(St!==B||gt!==R)&&s(C.id,{...C,height:St,width:gt})}},[C,R,B,s]),e.createElement("g",{ref:ze,"data-testid":X,className:Xe.node,transform:`translate(${V-R/2},${Ee-B/2})`},r({node:Oe}))}const rn=(0,Re.Z)(r=>({text:{fill:r.palette.textContrast}}),{name:"BackstageDependencyGraphDefaultLabel"});function cn({edge:{label:r}}){const s=rn();return e.createElement("text",{className:s.text,textAnchor:"middle"},r)}const $n=(0,Re.Z)(r=>({path:{strokeWidth:2,stroke:r.palette.textSubtle,fill:"none",transition:`${r.transitions.duration.shortest}ms`},label:{transition:`${r.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphEdge"}),In=r=>e.createElement(cn,{...r}),Dn=w.Z().x(r=>r.x).y(r=>r.y).curve(Ie.Z);function Vn({render:r=In,setEdge:s,id:C,edge:R}){const{x:B=0,y:V=0,width:Ee,height:Oe,points:Xe}=R,ze=R,St=$n(),gt=e.useRef(null);e.useLayoutEffect(()=>{if(gt.current){let{height:Qt,width:dn}=gt.current.getBBox();Qt=Math.round(Qt),dn=Math.round(dn),(Qt!==Oe||dn!==Ee)&&s(C,{...R,height:Qt,width:dn})}},[R,Oe,Ee,s,C]);let jt="";if(Xe){const Qt=Xe.filter(dn=>A()(dn.x)&&A()(dn.y));jt=Dn(Qt)||""}return e.createElement(e.Fragment,null,jt&&e.createElement("path",{"data-testid":pe,className:St.path,markerEnd:`url(#${Z})`,d:jt}),ze.label?e.createElement("g",{ref:gt,"data-testid":et,className:St.label,transform:`translate(${B},${V})`},r({edge:ze})):null)}const ar="workspace";function br(r){var s,C;const{edges:R,nodes:B,renderNode:V,direction:Ee=Qn.TOP_BOTTOM,align:Oe,nodeMargin:Xe=50,edgeMargin:ze=10,rankMargin:St=50,paddingX:gt=0,paddingY:jt=0,acyclicer:Qt,ranker:dn=pr.NETWORK_SIMPLEX,labelPosition:Wn=er.RIGHT,labelOffset:tr=10,edgeRanks:dr=1,edgeWeight:vr=1,renderLabel:Kn,defs:nr,zoom:qn="enabled",...$r}=r,aa=(0,$t.Z)(),[Wr,Aa]=e.useState(100),[oa,Oa]=e.useState(100),or=e.useRef(new(pn()).graphlib.Graph),[ca,go]=e.useState(((s=or.current.graph())==null?void 0:s.width)||0),[ua,ja]=e.useState(((C=or.current.graph())==null?void 0:C.height)||0),[Eo,wr]=e.useState([]),[ta,da]=e.useState([]),jr=Math.max(ca,Wr),mr=Math.max(ua,oa),Lr=e.useMemo(()=>U()(yr=>{if(!yr)return;const Ar=qe.Z(yr),Er=qe.Z(yr.getElementById(ar));function Vr(){Ar.call(lt.sP().scaleExtent([1,10]).on("zoom",na=>{na.transform.x=Math.min(0,Math.max(na.transform.x,jr-jr*na.transform.k)),na.transform.y=Math.min(0,Math.max(na.transform.y,mr-mr*na.transform.k)),Er.attr("transform",na.transform)}))}qn==="enabled"?Vr():qn==="enable-on-click"&&Ar.on("click",()=>Vr());const{width:Hr,height:za}=yr.getBoundingClientRect();Wr!==Hr&&Aa(Hr),oa!==za&&Oa(za)},100),[oa,Wr,jr,mr,qn]),ma=e.useCallback(()=>{const yr=or.current.nodes(),Ar=or.current.edges();yr.forEach(Er=>{B.some(Hr=>Hr.id===Er)||or.current.removeNode(Er)}),Ar.forEach(Er=>{R.some(Hr=>Hr.from===Er.v&&Hr.to===Er.w)||or.current.removeEdge(Er.v,Er.w)}),B.forEach(Er=>{const Vr=or.current.nodes().find(Hr=>Er.id===Hr);if(Vr&&or.current.node(Vr)){const{width:Hr,height:za,x:na,y:Sl}=or.current.node(Vr);or.current.setNode(Vr,{...Er,width:Hr,height:za,x:na,y:Sl})}else or.current.setNode(Er.id,{...Er,width:0,height:0})}),R.forEach(Er=>{or.current.setEdge(Er.from,Er.to,{...Er,label:Er.label,width:0,height:0,labelpos:Wn,labeloffset:tr,weight:vr,minlen:dr})})},[R,B,Wn,tr,vr,dr]),zr=e.useMemo(()=>U()(()=>{pn().layout(or.current);const{height:yr,width:Ar}=or.current.graph(),Er=Math.max(0,yr||0),Vr=Math.max(0,Ar||0);go(Vr),ja(Er),wr(or.current.nodes()),da(or.current.edges())},250,{leading:!0}),[]);e.useEffect(()=>(or.current.setGraph({rankdir:Ee,align:Oe,nodesep:Xe,edgesep:ze,ranksep:St,marginx:gt,marginy:jt,acyclicer:Qt,ranker:dn}),ma(),zr(),zr.cancel),[Qt,Oe,Ee,ze,gt,jt,Xe,St,dn,ma,zr]);function Ia(yr,Ar){return or.current.setNode(yr,Ar),zr(),or.current}function _l(yr,Ar){return or.current.setEdge(yr,Ar),zr(),or.current}return e.createElement("svg",{ref:Lr,...$r,width:"100%",height:mr,viewBox:`0 0 ${jr} ${mr}`},e.createElement("defs",null,e.createElement("marker",{id:Z,viewBox:"0 0 24 24",markerWidth:"14",markerHeight:"14",refX:"16",refY:"12",orient:"auto",markerUnits:"strokeWidth"},e.createElement("path",{fill:aa.palette.textSubtle,d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})),nr),e.createElement("g",{id:ar},e.createElement("svg",{width:ca,height:ua,y:mr/2-ua/2,x:jr/2-ca/2,viewBox:`0 0 ${ca} ${ua}`},ta.map(yr=>{const Ar=or.current.edge(yr);return Ar?e.createElement(Vn,{key:`${yr.v}-${yr.w}`,id:yr,setEdge:_l,render:Kn,edge:Ar}):null}),Eo.map(yr=>{const Ar=or.current.node(yr);return Ar?e.createElement(Ht,{key:yr,setNode:Ia,render:V,node:Ar}):null}))))}const xr=(0,d.Z)(r=>{var s;return{root:{padding:r.spacing(0),marginBottom:r.spacing(0),marginTop:r.spacing(0),display:"flex",flexFlow:"row nowrap"},topPosition:{position:"relative",marginBottom:r.spacing(6),marginTop:-r.spacing(3),zIndex:"unset"},icon:{fontSize:20},content:{width:"100%",maxWidth:"inherit",flexWrap:"nowrap"},message:{display:"flex",alignItems:"center",color:r.palette.banner.text,"& a":{color:r.palette.banner.link}},info:{backgroundColor:r.palette.banner.info},error:{backgroundColor:r.palette.banner.error},warning:{backgroundColor:(s=r.palette.banner.warning)!=null?s:r.palette.banner.error}}},{name:"BackstageDismissableBanner"}),Jr=r=>{var s;const{variant:C,message:R,id:B,fixed:V=!1}=r,Ee=xr(),Xe=useApi(storageApiRef).forBucket("notifications"),ze=(s=Xe.snapshot("dismissedBanners").value)!=null?s:[],[St,gt]=useState(new Set(ze)),jt=useObservable(Xe.observe$("dismissedBanners"));useEffect(()=>{var dn;if(jt!=null&&jt.value){const Wn=(dn=jt==null?void 0:jt.value)!=null?dn:[];gt(new Set(Wn))}},[jt==null?void 0:jt.value]);const Qt=()=>{Xe.set("dismissedBanners",[...St,B])};return React.createElement(Snackbar,{anchorOrigin:V?{vertical:"bottom",horizontal:"center"}:{vertical:"top",horizontal:"center"},open:!St.has(B),classes:{root:classNames(Ee.root,!V&&Ee.topPosition)}},React.createElement(SnackbarContent,{classes:{root:classNames(Ee.content,Ee[C]),message:Ee.message},message:R,action:[React.createElement(IconButton,{key:"dismiss",title:"Permanently dismiss this message",color:"inherit",onClick:Qt},React.createElement(CloseIcon,{className:Ee.icon}))]}))},Ca=(0,d.Z)({generalImg:{width:"95%",zIndex:2,position:"relative",left:"50%",top:"50%",transform:"translate(-50%, 15%)"}},{name:"BackstageEmptyStateImage"}),Pa=({missing:r})=>{const s=Ca();switch(r){case"field":return e.createElement("img",{src:Et,className:s.generalImg,alt:"annotation is missing"});case"info":return e.createElement("img",{src:te,alt:"no Information",className:s.generalImg});case"content":return e.createElement("img",{src:ee,alt:"create Component",className:s.generalImg});case"data":return e.createElement("img",{src:Le,alt:"no Build",className:s.generalImg});default:return null}},_a=(0,d.Z)(r=>({root:{backgroundColor:r.palette.background.default,padding:r.spacing(2,0,0,0)},action:{marginTop:r.spacing(2)},imageContainer:{position:"relative"}}),{name:"BackstageEmptyState"});function fa(r){const{title:s,description:C,missing:R,action:B}=r,V=_a();return e.createElement(ae.Z,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"flex-start",className:V.root,spacing:2},e.createElement(ae.Z,{item:!0,xs:12,md:6},e.createElement(ae.Z,{container:!0,direction:"column"},e.createElement(ae.Z,{item:!0,xs:!0},e.createElement(Te.Z,{variant:"h5"},s)),e.createElement(ae.Z,{item:!0,xs:!0},e.createElement(Te.Z,{variant:"body1"},C)),e.createElement(ae.Z,{item:!0,xs:!0,className:V.action},B))),e.createElement(ae.Z,{item:!0,xs:12,md:6,className:V.imageContainer},e.createElement(Pa,{missing:R})))}const Sa=`apiVersion: backstage.io/v1alpha1
kind: Component
metadata:
  name: example
  description: example.com
  annotations:
    ANNOTATION: value
spec:
  type: website
  lifecycle: production
  owner: user:guest`,Ra=(0,d.Z)(r=>({code:{borderRadius:6,margin:`${r.spacing(2)}px 0px`,background:r.palette.type==="dark"?"#444":"#fff"}}),{name:"BackstageMissingAnnotationEmptyState"});function Ta(r){const{annotation:s}=r,C=Ra(),R=e.createElement(e.Fragment,null,"The ",e.createElement("code",null,s)," annotation is missing. You need to add the annotation to your component if you want to enable this tool.");return e.createElement(fa,{missing:"field",title:"Missing Annotation",description:R,action:e.createElement(e.Fragment,null,e.createElement(Te.Z,{variant:"body1"},"Add the annotation to your component YAML as shown in the highlighted example below:"),e.createElement("div",{className:C.code},e.createElement(Ln,{text:Sa.replace("ANNOTATION",s),language:"yaml",showLineNumbers:!0,highlightedNumbers:[6,7],customStyle:{background:"inherit",fontSize:"115%"}})),e.createElement(S.Z,{color:"primary",component:Ct,to:"https://backstage.io/docs/features/software-catalog/well-known-annotations"},"Read more"))})}const ne=(r,s)=>(s.palette.type==="light"?M._j:M.$n)(s.palette[r].light,.6),be=(r,s)=>(s.palette.type==="light"?M.$n:M._j)(s.palette[r].light,.9),He=(0,d.Z)(r=>({root:{marginRight:r.spacing(1),fill:({severity:s})=>ne(s,r)}})),We=({severity:r})=>{const s=He({severity:r});return e.createElement(en.Z,{classes:s})},pt=({severity:r})=>{const s=He({severity:r});return e.createElement(on.Z,{classes:s})},Tt=(0,d.Z)(r=>({panel:{backgroundColor:({severity:s})=>be(s,r),color:({severity:s})=>ne(s,r),verticalAlign:"middle"},summary:{display:"flex",flexDirection:"row"},summaryText:{color:({severity:s})=>ne(s,r),fontWeight:"bold"},message:{width:"100%",display:"block",color:({severity:s})=>ne(s,r),backgroundColor:({severity:s})=>be(s,r)},details:{width:"100%",display:"block",color:r.palette.textContrast,backgroundColor:r.palette.background.default,border:`1px solid ${r.palette.border}`,padding:r.spacing(2),fontFamily:"sans-serif"}}),{name:"BackstageWarningPanel"}),Pt=r=>r.charAt(0).toLocaleUpperCase("en-US")+r.slice(1);function Yt(r){const{severity:s="warning",title:C,message:R,children:B,defaultExpanded:V}=r,Ee=Tt({severity:s}),Oe=Pt(s)+(C?`: ${C}`:"");return e.createElement(at.Z,{defaultExpanded:V!=null?V:!1,className:Ee.panel,role:"alert"},e.createElement(Zt.Z,{expandIcon:e.createElement(pt,{severity:s}),className:Ee.summary},e.createElement(We,{severity:s}),e.createElement(Te.Z,{className:Ee.summaryText,variant:"subtitle1"},Oe)),(R||B)&&e.createElement(Dt.Z,null,e.createElement(ae.Z,{container:!0},R&&e.createElement(ae.Z,{item:!0,xs:12},e.createElement(Te.Z,{className:Ee.message,variant:"body1"},R)),B&&e.createElement(ae.Z,{item:!0,xs:12,className:Ee.details},B))))}const En=(0,d.Z)(r=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:r.spacing(2)},divider:{margin:r.spacing(2)}}),{name:"BackstageErrorPanel"}),sn=({error:r,message:s,stack:C,children:R})=>{const B=En();return e.createElement(le.Z,{dense:!0},e.createElement(Q.Z,{alignItems:"flex-start"},e.createElement(xe.Z,{classes:{secondary:B.text},primary:"Error",secondary:r}),e.createElement(Cn,{text:r})),e.createElement(Q.Z,{alignItems:"flex-start"},e.createElement(xe.Z,{classes:{secondary:B.text},primary:"Message",secondary:s}),e.createElement(Cn,{text:s})),C&&e.createElement(Q.Z,{alignItems:"flex-start"},e.createElement(xe.Z,{classes:{secondary:B.text},primary:"Stack Trace",secondary:C}),e.createElement(Cn,{text:C})),R)};function un(r){const{title:s,error:C,defaultExpanded:R,children:B}=r;return e.createElement(Yt,{severity:"error",title:s!=null?s:C.message,defaultExpanded:R},e.createElement(sn,{error:C.name,message:C.message,stack:C.stack,children:B}))}const an=(0,d.Z)(r=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:r.spacing(2)},divider:{margin:r.spacing(2)}}),{name:"BackstageResponseErrorPanel"});function Tn(r){var s;const{title:C,error:R,defaultExpanded:B}=r,V=an();if(R.name!=="ResponseError")return e.createElement(un,{title:C!=null?C:R.message,defaultExpanded:B,error:R});const{body:Ee,cause:Oe}=R,{request:Xe,response:ze}=Ee,St=`${ze.statusCode}: ${Oe.name}`,gt=Xe&&`${Xe.method} ${Xe.url}`,jt=Oe.message.replace(/\\n/g,`
`),Qt=(s=Oe.stack)==null?void 0:s.replace(/\\n/g,`
`),dn=JSON.stringify(Ee,void 0,2);return e.createElement(un,{title:C!=null?C:R.message,defaultExpanded:B,error:{name:St,message:jt,stack:Qt}},gt&&e.createElement(Q.Z,{alignItems:"flex-start"},e.createElement(xe.Z,{classes:{secondary:V.text},primary:"Request",secondary:Xe?`${gt}`:void 0}),e.createElement(Cn,{text:gt})),e.createElement(e.Fragment,null,e.createElement(gn.Z,{component:"li",className:V.divider}),e.createElement(Q.Z,{alignItems:"flex-start"},e.createElement(xe.Z,{classes:{secondary:V.text},primary:"Full Error as JSON"})),e.createElement(Ln,{language:"json",text:dn,showCopyCodeButton:!0})))}function Yn(r){const s=document.createElement("div");return s.setAttribute("id",r),s}function Zn(r){document.body.insertBefore(r,document.body.lastElementChild.nextElementSibling)}function Pn(r){const s=useRef(null);useEffect(function(){const B=document.querySelector(`#${r}`),V=B||Yn(r);return B||Zn(V),V.appendChild(s.current),function(){s.current.remove(),V.childNodes.length===-1&&V.remove()}},[r]);function C(){return s.current||(s.current=document.createElement("div")),s.current}return C()}const Hn="core.calloutSeen";function rr(){const[r,s]=useState(()=>{const R=localStorage.getItem(Hn);return R?JSON.parse(R):{}}),C=useCallback((R,B)=>{const V=localStorage.getItem(Hn),Oe={...V?JSON.parse(V):{},[R]:B};s(Oe),localStorage.setItem(Hn,JSON.stringify(Oe))},[]);return{states:r,setState:C}}function Mr(r){const{states:s,setState:C}=rr(),R=useCallback(()=>{C(r,!0)},[C,r]);return{seen:s[r]===!0,markSeen:R}}function Ir(r){const{seen:s,markSeen:C}=Mr(r);return{show:s===!1,hide:C}}const Tr=(0,d.Z)({"@keyframes pulsateSlightly":{"0%":{transform:"scale(1.0)"},"100%":{transform:"scale(1.1)"}},"@keyframes pulsateAndFade":{"0%":{transform:"scale(1.0)",opacity:.9},"100%":{transform:"scale(1.5)",opacity:0}},featureWrapper:{position:"relative"},backdrop:{zIndex:2e3,position:"fixed",overflow:"hidden",left:0,right:0,top:0,bottom:0},dot:{position:"absolute",backgroundColor:"transparent",borderRadius:"100%",border:"1px solid rgba(103, 146, 180, 0.98)",boxShadow:"0px 0px 0px 20000px rgba(0, 0, 0, 0.5)",zIndex:2001,transformOrigin:"center center",animation:"$pulsateSlightly 1744ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) alternate infinite"},pulseCircle:{width:"100%",height:"100%",backgroundColor:"transparent",borderRadius:"100%",border:"2px solid white",zIndex:2001,transformOrigin:"center center",animation:"$pulsateAndFade 872ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) infinite"},text:{position:"absolute",color:"white",zIndex:2003}},{name:"BackstageFeatureCalloutCircular"});function kr(r){const{featureId:s,title:C,description:R,children:B}=r,{show:V,hide:Ee}=Ir(s),Oe=Pn("core.callout"),Xe=useRef(null),[ze,St]=useState(),gt=Tr(),jt=useCallback(()=>{if(Xe.current){const Qt=Xe.current.getBoundingClientRect(),dn=Math.max(Qt.width,Qt.height),Wn=800,tr=Qt.x-(dn-Qt.width)/2-Wn,dr=Qt.y-(dn-Qt.height)/2-Wn,vr=dn+2*Wn,Kn=450,nr=Qt.x+Qt.width/2-Kn,qn=Qt.y-(dn-Qt.height)/2+dn+20;St({dotLeft:tr,dotTop:dr,dotSize:vr,borderWidth:Wn,textTop:qn,textLeft:nr,textWidth:Kn})}},[]);return useEffect(()=>(window.addEventListener("resize",jt),window.addEventListener("scroll",jt),()=>{window.removeEventListener("resize",jt),window.removeEventListener("scroll",jt)}),[jt]),useLayoutEffect(jt,[Xe.current,jt]),V?React.createElement(React.Fragment,null,React.createElement("div",{className:gt.featureWrapper,ref:Xe},B),createPortal(React.createElement("div",{className:gt.backdrop},React.createElement(ClickAwayListener,{onClickAway:Ee},React.createElement(React.Fragment,null,React.createElement("div",{className:gt.dot,"data-testid":"dot",style:{left:ze==null?void 0:ze.dotLeft,top:ze==null?void 0:ze.dotTop,width:ze==null?void 0:ze.dotSize,height:ze==null?void 0:ze.dotSize,borderWidth:ze==null?void 0:ze.borderWidth},onClick:Ee,onKeyDown:Ee,role:"button",tabIndex:0},React.createElement("div",{className:gt.pulseCircle})),React.createElement("div",{className:gt.text,"data-testid":"text",style:{left:ze==null?void 0:ze.textLeft,top:ze==null?void 0:ze.textTop,width:ze==null?void 0:ze.textWidth}},React.createElement(Typography,{variant:"h2",paragraph:!0},C),React.createElement(Typography,null,R))))),Oe)):React.createElement(React.Fragment,null,B)}const Sr=(0,d.Z)(r=>({link:{display:"grid",justifyItems:"center",gridGap:4,textAlign:"center"},disabled:{color:"gray",cursor:"default"},primary:{color:r.palette.primary.main},secondary:{color:r.palette.secondary.main},label:{fontSize:"0.7rem",textTransform:"uppercase",fontWeight:600,letterSpacing:1.2}}),{name:"BackstageIconLinkVertical"});function Yr({color:r="primary",disabled:s=!1,href:C="#",icon:R=e.createElement(ce.Z,null),label:B,onClick:V,title:Ee}){const Oe=Sr();return s?e.createElement(E.Z,{title:Ee,className:Pe()(Oe.link,Oe.disabled),underline:"none"},R,e.createElement("span",{className:Oe.label},B)):e.createElement(E.Z,{title:Ee,className:Pe()(Oe.link,Oe[r]),to:C,component:Ct,onClick:V},R,e.createElement("span",{className:Oe.label},B))}const Xr=(0,d.Z)(r=>({links:{margin:r.spacing(2,0),display:"grid",gridAutoFlow:"column",gridAutoColumns:"min-content",gridGap:r.spacing(3)}}),{name:"BackstageHeaderIconLinkRow"});function Qr(r){const{links:s}=r,C=Xr();return e.createElement("nav",{className:C.links},s.map((R,B)=>e.createElement(Yr,{key:B+1,...R})))}const cr=r=>{const s=r==="dark"?"16%":"97%";return`
    hsl(0, 0%, ${s}) 0%,
    hsla(0, 0%, ${s}, 0.987) 8.1%,
    hsla(0, 0%, ${s}, 0.951) 15.5%,
    hsla(0, 0%, ${s}, 0.896) 22.5%,
    hsla(0, 0%, ${s}, 0.825) 29%,
    hsla(0, 0%, ${s}, 0.741) 35.3%,
    hsla(0, 0%, ${s}, 0.648) 41.2%,
    hsla(0, 0%, ${s}, 0.55) 47.1%,
    hsla(0, 0%, ${s}, 0.45) 52.9%,
    hsla(0, 0%, ${s}, 0.352) 58.8%,
    hsla(0, 0%, ${s}, 0.259) 64.7%,
    hsla(0, 0%, ${s}, 0.175) 71%,
    hsla(0, 0%, ${s}, 0.104) 77.5%,
    hsla(0, 0%, ${s}, 0.049) 84.5%,
    hsla(0, 0%, ${s}, 0.013) 91.9%,
    hsla(0, 0%, ${s}, 0) 100%
  `},Rr=100,qr=10,pa=(0,d.Z)(r=>({root:{position:"relative",display:"flex",flexFlow:"row nowrap",alignItems:"center"},container:{overflow:"auto",scrollbarWidth:0,"&::-webkit-scrollbar":{display:"none"}},fade:{position:"absolute",width:Rr,height:`calc(100% + ${qr}px)`,transition:"opacity 300ms",pointerEvents:"none"},fadeLeft:{left:-qr,background:`linear-gradient(90deg, ${cr(r.palette.type)})`},fadeRight:{right:-qr,background:`linear-gradient(270deg, ${cr(r.palette.type)})`},fadeHidden:{opacity:0},button:{position:"absolute"},buttonLeft:{left:-r.spacing(2)},buttonRight:{right:-r.spacing(2)}}),{name:"BackstageHorizontalScrollGrid"});function sa(r){const[[s,C],R]=React.useState([0,0]);return React.useLayoutEffect(()=>{const B=r.current;if(!B){R([0,0]);return}const V=()=>{const Ee=B.scrollLeft,Oe=B.scrollWidth-B.offsetWidth-B.scrollLeft;R([Ee,Oe])};return V(),B.addEventListener("scroll",V),window.addEventListener("resize",V),()=>{B.removeEventListener("scroll",V),window.removeEventListener("resize",V)}},[r]),[s,C]}function Va(r,s,C){const[R,B]=React.useState(0);return React.useLayoutEffect(()=>{if(R===0)return;const V=performance.now(),Ee=requestAnimationFrame(Oe=>{if(!r.current)return;const Xe=Oe-V,ze=Math.abs(R)*Xe/s,gt=Math.max(C,ze)*Math.sign(R);r.current.scrollBy({left:gt});const jt=R-gt;Math.sign(R)!==Math.sign(jt)?B(0):B(jt)});return()=>cancelAnimationFrame(Ee)},[r,R,s,C]),B}function ha(r){const{scrollStep:s=100,scrollSpeed:C=50,minScrollDistance:R=5,children:B,...V}=r,Ee=pa(r),Oe=React.useRef(),[Xe,ze]=sa(Oe),St=Va(Oe,C,R),gt=jt=>{!Oe.current||St(jt?s:-s)};return React.createElement("div",{...V,className:Ee.root},React.createElement(Grid,{container:!0,direction:"row",wrap:"nowrap",className:Ee.container,ref:Oe},B),React.createElement("div",{className:classNames(Ee.fade,Ee.fadeLeft,{[Ee.fadeHidden]:Xe===0})}),React.createElement("div",{className:classNames(Ee.fade,Ee.fadeRight,{[Ee.fadeHidden]:ze===0})}),Xe>0&&React.createElement(IconButton,{title:"Scroll Left",onClick:()=>gt(!1),className:classNames(Ee.button,Ee.buttonLeft,{})},React.createElement(ChevronLeftIcon,null)),ze>0&&React.createElement(IconButton,{title:"Scroll Right",onClick:()=>gt(!0),className:classNames(Ee.button,Ee.buttonRight,{})},React.createElement(ChevronRight,null)))}const ga=(0,d.Z)({alpha:{color:"#ffffff",fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"},beta:{color:"#4d65cc",fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"}},{name:"BackstageLifecycle"});function Da(r){const s=ga(r),{shorthand:C,alpha:R}=r;return C?React.createElement("span",{className:s[R?"alpha":"beta"],style:{fontSize:"120%"}},R?React.createElement(React.Fragment,null,"\u03B1"):React.createElement(React.Fragment,null,"\u03B2")):React.createElement("span",{className:s[R?"alpha":"beta"]},R?"Alpha":"Beta")}const $a=(0,e.lazy)(()=>t.e(4759).then(t.bind(t,44759)).then(r=>({default:r.RealLogViewer})));function Ha(r){const{Progress:s}=(0,m.qD)().getComponents();return e.createElement(e.Suspense,{fallback:e.createElement(s,null)},e.createElement($a,{...r}))}const Ga=(0,d.Z)(r=>({markdown:{"& table":{borderCollapse:"collapse",border:`1px solid ${r.palette.border}`},"& th, & td":{border:`1px solid ${r.palette.border}`,padding:r.spacing(1)},"& td":{wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:r.spacing(3,2,3,2.5),borderBottom:0},"& th":{backgroundColor:r.palette.background.paper},"& tr":{backgroundColor:r.palette.background.paper},"& tr:nth-child(odd)":{backgroundColor:r.palette.background.default},"& a":{color:r.palette.link},"& img":{maxWidth:"100%"}}}),{name:"BackstageMarkdownContent"}),Ja={code:({inline:r,className:s,children:C,...R})=>{const B=String(C).replace(/\n+$/,""),V=/language-(\w+)/.exec(s||"");return!r&&V?e.createElement(Ln,{language:V[1],text:B}):e.createElement("code",{className:s,...R},C)}};function ra(r){const{content:s,dialect:C="gfm",linkTarget:R}=r,B=Ga();return e.createElement(ie.D,{remarkPlugins:C==="gfm"?[de.Z]:[],className:B.markdown,children:s,components:Ja,linkTarget:R})}const vo=(0,d.Z)(r=>({root:{paddingLeft:r.spacing(3)}}),{name:"BackstageLoginRequestListItem"}),Ya=({request:r,busy:s,setBusy:C})=>{const R=vo(),[B,V]=(0,e.useState)(),Ee=async()=>{C(!0);try{await r.trigger()}catch(Xe){V((0,ln.VZ)(Xe)?Xe.message:"An unspecified error occurred")}finally{C(!1)}},Oe=r.provider.icon;return e.createElement(Q.Z,{button:!0,disabled:s,classes:{root:R.root}},e.createElement(kt.Z,null,e.createElement(Oe,{fontSize:"large"})),e.createElement(xe.Z,{primary:r.provider.title,secondary:B&&e.createElement(Te.Z,{color:"error"},B)}),e.createElement(S.Z,{color:"primary",variant:"contained",onClick:Ee},"Log in"))},yo=(0,d.Z)(r=>({dialog:{paddingTop:r.spacing(1)},title:{minWidth:0},contentList:{padding:0},actionButtons:{padding:r.spacing(2,0)}}),{name:"OAuthRequestDialog"});function Xa(r){const s=yo(),[C,R]=(0,e.useState)(!1),B=(0,m.h_)(m.ZM),V=(0,H.Z)((0,e.useMemo)(()=>B.authRequest$(),[B]),[]),Ee=()=>{V.forEach(Oe=>Oe.reject())};return e.createElement(ve.Z,{open:Boolean(V.length),fullWidth:!0,maxWidth:"xs",classes:{paper:s.dialog}},e.createElement(bt.Z,{classes:{root:s.title}},"Login Required"),e.createElement(nt.Z,{dividers:!0,classes:{root:s.contentList}},e.createElement(le.Z,null,V.map(Oe=>e.createElement(Ya,{key:Oe.provider.title,request:Oe,busy:C,setBusy:R})))),e.createElement(ge.Z,{classes:{root:s.actionButtons}},e.createElement(S.Z,{onClick:Ee},"Reject All")))}const Ma=(0,d.Z)({container:{overflow:"visible !important"}},{name:"BackstageOverflowTooltip"});function Qa(r){var s;const[C,R]=(0,e.useState)(!1),B=(0,Gt.t)(),V=Ma(),Ee=Oe=>{B()&&R(Oe)};return e.createElement(T.ZP,{title:(s=r.title)!=null?s:r.text||"",placement:r.placement,disableHoverListener:!C},e.createElement(Mt(),{text:r.text,line:r.line,onToggled:Ee,containerClassName:V.container}))}function ia(r){const[s,C]=(0,e.useState)(!1);return(0,e.useEffect)(()=>{const R=setTimeout(()=>C(!0),250);return()=>clearTimeout(R)},[]),s?e.createElement(vn.Z,{...r,"data-testid":"progress"}):e.createElement("div",{style:{display:"none"}})}const qa=(0,d.Z)(r=>({root:{maxWidth:"fit-content",padding:r.spacing(2,2,2,2.5)},boxTitle:{margin:0,color:r.palette.textSubtle},arrow:{color:r.palette.textSubtle}}),{name:"BackstageBottomLink"});function Ea(r){const{link:s,title:C,onClick:R}=r,B=qa();return e.createElement("div",null,e.createElement(gn.Z,null),e.createElement(Ct,{to:s,onClick:R,underline:"none"},e.createElement(Bt.Z,{display:"flex",alignItems:"center",className:B.root},e.createElement(Bt.Z,{className:B.boxTitle,fontWeight:"fontWeightBold",m:1},e.createElement(Te.Z,null,e.createElement("strong",null,C))),e.createElement(hn.Z,{className:B.arrow}))))}const bo=r=>{const{slackChannel:s}=r;if(s){if(typeof s=="string")return e.createElement(e.Fragment,null,"Please contact ",s," for help.");if(!s.href)return e.createElement(e.Fragment,null,"Please contact ",s.name," for help.")}else return null;return e.createElement(Xt,{to:s.href,variant:"contained"},s.name)},eo=class extends e.Component{constructor(s){super(s),this.state={error:void 0,errorInfo:void 0}}componentDidCatch(s,C){console.error(`ErrorBoundary, error: ${s}, info: ${C}`),this.setState({error:s,errorInfo:C})}render(){const{slackChannel:s,children:C}=this.props,{error:R}=this.state;return R?e.createElement(un,{title:"Something Went Wrong",error:R},e.createElement(bo,{slackChannel:s})):C}},Co=(0,d.Z)(r=>({noPadding:{padding:0,"&:last-child":{paddingBottom:0}},header:{padding:r.spacing(2,2,2,2.5)},headerTitle:{fontWeight:700},headerSubheader:{paddingTop:r.spacing(1)},headerAvatar:{},headerAction:{},headerContent:{},subheader:{display:"flex"}}),{name:"BackstageInfoCard"}),La=(0,L.Z)(r=>({root:{display:"inline-block",padding:r.spacing(8,8,0,0),float:"right"}}),{name:"BackstageInfoCardCardActionsTopRight"})(ht.Z),j={card:{flex:{display:"flex",flexDirection:"column"},fullHeight:{display:"flex",flexDirection:"column",height:"100%"},gridItem:{display:"flex",flexDirection:"column",height:"calc(100% - 10px)",marginBottom:"10px"}},cardContent:{fullHeight:{flex:1},gridItem:{flex:1}}};function P(r){const{title:s,subheader:C,divider:R=!0,deepLink:B,slackChannel:V,errorBoundaryProps:Ee,variant:Oe,children:Xe,headerStyle:ze,headerProps:St,icon:gt,action:jt,actionsClassName:Qt,actions:dn,cardClassName:Wn,actionsTopRight:tr,className:dr,noPadding:vr,titleTypographyProps:Kn}=r,nr=Co();let qn={},$r={};Oe&&Oe.split(/[\s]+/g).forEach(oa=>{qn={...qn,...j.card[oa]},$r={...$r,...j.cardContent[oa]}});const aa=()=>e.createElement("div",{className:nr.headerSubheader},C&&e.createElement("div",{className:nr.subheader},C),gt),Wr=Ee||(V?{slackChannel:V}:{});return e.createElement(Me.Z,{style:qn,className:dr},e.createElement(eo,{...Wr},s&&e.createElement(tn.Z,{classes:{root:nr.header,title:nr.headerTitle,subheader:nr.headerSubheader,avatar:nr.headerAvatar,action:nr.headerAction,content:nr.headerContent},title:s,subheader:aa(),action:jt,style:{...ze},titleTypographyProps:Kn,...St}),tr&&e.createElement(La,null,tr),R&&e.createElement(gn.Z,null),e.createElement(_t.Z,{className:Pe()(Wn,{[nr.noPadding]:vr}),style:$r},Xe),dn&&e.createElement(ht.Z,{className:Qt},dn),B&&e.createElement(Ea,{...B})))}const _=(0,d.Z)(r=>({root:{position:"relative",lineHeight:0},overlay:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -60%)",fontSize:45,fontWeight:"bold",color:r.palette.textContrast},description:{fontSize:"100%",top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"absolute",wordBreak:"break-all",display:"inline-block"},circle:{width:"80%",transform:"translate(10%, 0)"},colorUnknown:{}}),{name:"BackstageGauge"}),f={fractional:!0,inverse:!1,unit:"%",max:100},z=({palette:r,value:s,inverse:C,max:R})=>{if(isNaN(s))return"#ddd";const B=R||f.max,V=C?B-s:s;return V<B/3?r.status.error:V<B*(2/3)?r.status.warning:r.status.ok};function ue(r){const[s,C]=useState(null),{getColor:R=z}=r,B=_(r),{palette:V}=useTheme(),{value:Ee,fractional:Oe,inverse:Xe,unit:ze,max:St,description:gt}={...f,...r},jt=Oe?Math.round(Ee*St):Ee,Qt=St!==100?Math.round(Ee):jt,[dn,Wn]=useState(!1);return useEffect(()=>{const tr=s,dr=()=>Wn(!0),vr=()=>Wn(!1);return tr&&gt?(tr.addEventListener("mouseenter",dr),tr.addEventListener("mouseleave",vr),()=>{tr.removeEventListener("mouseenter",dr),tr.removeEventListener("mouseleave",vr)}):()=>{Wn(!1)}},[gt,s]),React.createElement("div",{ref:C,className:B.root},React.createElement(Circle,{strokeLinecap:"butt",percent:jt,strokeWidth:12,trailWidth:12,strokeColor:R({palette:V,value:Qt,inverse:Xe,max:St}),className:B.circle}),gt&&dn?React.createElement("div",{className:B.description},gt):React.createElement("div",{className:B.overlay},isNaN(Ee)?"N/A":`${Qt}${ze}`))}const me=(0,d.Z)({root:{height:"100%",width:250}},{name:"BackstageGaugeCard"});function je(r){const s=me(r),{title:C,subheader:R,progress:B,inverse:V,deepLink:Ee,description:Oe,icon:Xe,variant:ze,getColor:St}=r,gt={inverse:V,description:Oe,getColor:St,value:B};return React.createElement("div",{className:s.root},React.createElement(P,{title:C,subheader:R,deepLink:Ee,variant:ze,icon:Xe},React.createElement(ue,{...gt})))}function nn(r){const{value:s,getColor:C=z}=r,{palette:R}=useTheme();if(isNaN(s))return null;let B=Math.round(s*100*100)/100;B>100&&(B=100);const V=C({palette:R,value:B,inverse:!1,max:100});return React.createElement(Tooltip,{title:`${B}%`},React.createElement("span",null,React.createElement(Line,{percent:B,strokeWidth:4,trailWidth:4,strokeColor:V})))}const qt=(0,d.Z)(()=>(0,y.Z)({icon:{position:"absolute",right:"4px",pointerEvents:"none"}}),{name:"BackstageClosedDropdown"}),fn=()=>{const r=qt();return e.createElement(dt.Z,{className:r.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M7.5 8L6 9.5L12.0703 15.5703L18.1406 9.5L16.6406 8L12.0703 12.5703L7.5 8Z",fill:"#616161"}))},Sn=(0,d.Z)(()=>(0,y.Z)({icon:{position:"absolute",right:"4px",pointerEvents:"none"}}),{name:"BackstageOpenedDropdown"}),Rn=()=>{const r=Sn();return e.createElement(dt.Z,{className:r.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M16.5 16L18 14.5L11.9297 8.42969L5.85938 14.5L7.35938 16L11.9297 11.4297L16.5 16Z",fill:"#616161"}))},Fn=(0,L.Z)(r=>(0,y.Z)({root:{"label + &":{marginTop:r.spacing(3)}},input:{borderRadius:4,position:"relative",backgroundColor:r.palette.background.paper,border:"1px solid #ced4da",fontSize:16,padding:"10px 26px 10px 12px",transition:r.transitions.create(["border-color","box-shadow"]),fontFamily:"Helvetica Neue","&:focus":{background:r.palette.background.paper,borderRadius:4}}}),{name:"BackstageSelectInputBase"})(Ge.Z),Xn=(0,d.Z)(r=>(0,y.Z)({formControl:{margin:`${r.spacing(1)} 0px`,maxWidth:300},label:{transform:"initial",fontWeight:"bold",fontSize:14,fontFamily:r.typography.fontFamily,color:r.palette.text.primary,"&.Mui-focused":{color:r.palette.text.primary}},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},checkbox:{},root:{display:"flex",flexDirection:"column"}}),{name:"BackstageSelect"});function Gn(r){const{multiple:s,items:C,label:R,placeholder:B,selected:V,onChange:Ee,triggerReset:Oe,native:Xe=!1,disabled:ze=!1}=r,St=Xn(),[gt,jt]=(0,e.useState)(V||(s?[]:"")),[Qt,dn]=(0,e.useState)(!1);(0,e.useEffect)(()=>{jt(s?[]:"")},[Oe,s]),(0,e.useEffect)(()=>{V!==void 0&&jt(V)},[V]);const Wn=Kn=>{jt(Kn.target.value),Ee(Kn.target.value)},tr=Kn=>{if(ze){Kn.preventDefault();return}dn(nr=>s&&!(Kn.target instanceof HTMLElement)?!0:!nr)},dr=()=>{dn(!1)},vr=Kn=>()=>{const nr=gt.filter(qn=>qn!==Kn);jt(nr),Ee(nr)};return e.createElement("div",{className:St.root},e.createElement(Te.Z,{variant:"button"},R),e.createElement(Ye.Z,{onClickAway:dr},e.createElement(An.Z,{className:St.formControl},e.createElement(mt.Z,{value:gt,native:Xe,disabled:ze,"data-testid":"select",displayEmpty:!0,multiple:s,onChange:Wn,onClick:tr,open:Qt,input:e.createElement(Fn,null),renderValue:Kn=>{var nr;return s&&gt.length!==0?e.createElement("div",{className:St.chips},Kn.map(qn=>{var $r,aa;return e.createElement(Un.Z,{key:($r=C.find(Wr=>Wr.value===qn))==null?void 0:$r.value,label:(aa=C.find(Wr=>Wr.value===qn))==null?void 0:aa.label,clickable:!0,onDelete:vr(qn),className:St.chip})})):e.createElement(Te.Z,null,gt.length===0?B||"":(nr=C.find(qn=>qn.value===Kn))==null?void 0:nr.label)},IconComponent:()=>Qt?e.createElement(Rn,null):e.createElement(fn,null),MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null}},B&&!s&&e.createElement(Je.Z,{value:[]},B),Xe?C&&C.map(Kn=>e.createElement("option",{value:Kn.value,key:Kn.value},Kn.label)):C&&C.map(Kn=>e.createElement(Je.Z,{key:Kn.value,value:Kn.value},s&&e.createElement(Bn.Z,{color:"primary",checked:gt.includes(Kn.value)||!1,className:St.checkbox}),Kn.label))))))}const Cr=()=>{},Pr=e.createContext({stepperLength:0,stepIndex:0,setStepIndex:Cr,stepHistory:[],setStepHistory:Cr,onStepChange:Cr});function _r(r){const{children:s,elevated:C,onStepChange:R,activeStep:B=0}=r,[V,Ee]=useState(B),[Oe,Xe]=useState([0]);useEffect(()=>{Ee(B)},[B]);const ze=[];let St;return Children.forEach(s,gt=>{isValidElement(gt)&&(gt.props.end?St=gt:ze.push(gt))}),React.createElement(React.Fragment,null,React.createElement(Pr.Provider,{value:{stepIndex:V,setStepIndex:Ee,stepHistory:Oe,setStepHistory:Xe,onStepChange:R,stepperLength:Children.count(s)}},React.createElement(MuiStepper,{activeStep:V,orientation:"vertical",elevation:C?2:0},ze)),V>=Children.count(s)-1&&St)}const Dr=(0,d.Z)(r=>({root:{marginTop:r.spacing(3),"& button":{marginRight:r.spacing(1)}}}),{name:"BackstageSimpleStepperFooter"}),Zr=({text:r,handleClick:s})=>React.createElement(Button$1,{onClick:s},r||"Reset"),hr=({text:r,handleClick:s,disabled:C,last:R,stepIndex:B})=>React.createElement(Button$1,{variant:"contained",color:"primary",disabled:C,"data-testid":`nextButton-${B}`,onClick:s},r||(R?"Finish":"Next")),ur=({text:r,handleClick:s,disabled:C,stepIndex:R})=>React.createElement(Button$1,{onClick:s,"data-testid":`backButton-${R}`,disabled:C},r||"Back"),gr=({actions:r={},children:s})=>{const C=Dr(),{stepperLength:R,stepIndex:B,setStepIndex:V,stepHistory:Ee,setStepHistory:Oe,onStepChange:Xe}=useContext(Pr),ze=(Qt,dn)=>{dn&&dn(),Xe&&Xe(B,Qt),V(Qt)},St=()=>{const Qt=r.nextStep?r.nextStep(B,R-1):B+1;ze(Qt,r.onNext),Oe([...Ee,Qt])},gt=()=>{Ee.pop(),ze(Ee[Ee.length-1],r.onBack),Oe([...Ee])},jt=()=>{ze(0,r.onRestart),Oe([0])};return React.createElement("div",{className:C.root},[void 0,!0].includes(r.showBack)&&B!==0&&React.createElement(ur,{text:r.backText,handleClick:gt,disabled:B===0,stepIndex:B}),[void 0,!0].includes(r.showNext)&&React.createElement(hr,{text:r.nextText,handleClick:St,disabled:!!R&&B>=R||!!r.canNext&&!r.canNext(),stepIndex:B}),r.showRestart&&B!==0&&React.createElement(Zr,{text:r.restartText,handleClick:jt,stepIndex:B}),s)},Br=(0,d.Z)(r=>({end:{padding:r.spacing(3)}}),{name:"SimpleStepperStep"});function Gr(r){const{title:s,children:C,end:R,actions:B,...V}=r,Ee=Br();return R?React.createElement("div",{className:Ee.end},React.createElement(Typography,{variant:"h6"},s),C,React.createElement(gr,{actions:{...B||{},showNext:!1}})):React.createElement(MuiStep,{...V},React.createElement(StepLabel,null,React.createElement(Typography,{variant:"h6"},s)),React.createElement(StepContent,null,C,React.createElement(gr,{actions:B})))}const Kr=(0,d.Z)(r=>({status:{fontWeight:500,"&::before":{width:"0.7em",height:"0.7em",display:"inline-block",marginRight:8,borderRadius:"50%",content:'""'}},ok:{"&::before":{backgroundColor:r.palette.status.ok}},warning:{"&::before":{backgroundColor:r.palette.status.warning}},error:{"&::before":{backgroundColor:r.palette.status.error}},pending:{"&::before":{backgroundColor:r.palette.status.pending}},running:{"&::before":{backgroundColor:r.palette.status.running}},aborted:{"&::before":{backgroundColor:r.palette.status.aborted}}}),{name:"BackstageStatus"});function Nr(r){const s=Kr(r);return e.createElement("span",{className:Pe()(s.status,s.ok),"aria-label":"Status ok","aria-hidden":"true",...r})}function to(r){const s=Kr(r);return e.createElement("span",{className:Pe()(s.status,s.warning),"aria-label":"Status warning","aria-hidden":"true",...r})}function no(r){const s=Kr(r);return e.createElement("span",{className:Pe()(s.status,s.error),"aria-label":"Status error","aria-hidden":"true",...r})}function ro(r){const s=Kr(r);return e.createElement("span",{className:Pe()(s.status,s.pending),"aria-label":"Status pending","aria-hidden":"true",...r})}function ao(r){const s=Kr(r);return e.createElement("span",{className:Pe()(s.status,s.running),"aria-label":"Status running","aria-hidden":"true",...r})}function va(r){const s=Kr(r);return e.createElement("span",{className:Pe()(s.status,s.aborted),"aria-label":"Status aborted","aria-hidden":"true",...r})}const wa=r=>(0,y.Z)({root:{fontWeight:"bolder",whiteSpace:"nowrap",paddingRight:r.spacing(4),border:"0",verticalAlign:"top"}}),ls={root:{border:"0",verticalAlign:"top"}},cs=r=>(0,y.Z)({root:{listStyle:"none",margin:r.spacing(0,0,-1,0),padding:"0"}}),us=r=>(0,y.Z)({root:{padding:r.spacing(0,0,1,0)},random:{}}),ds=(0,L.Z)(wa,{name:"BackstageMetadataTableTitleCell"})(N.Z),ms=(0,L.Z)(ls,{name:"BackstageMetadataTableCell"})(N.Z),fs=({dense:r,children:s})=>e.createElement(Jt.Z,{size:r?"small":"medium"},e.createElement(xt.Z,null,s)),ps=({title:r,children:s,...C})=>e.createElement(F.Z,null,r&&e.createElement(ds,null,r),e.createElement(ms,{colSpan:r?1:2,...C},s)),Po=(0,L.Z)(cs,{name:"BackstageMetadataTableList"})(({classes:r,children:s})=>e.createElement("ul",{className:r.root},s)),_o=(0,L.Z)(us,{name:"BackstageMetadataTableListItem"})(({classes:r,children:s})=>e.createElement("li",{className:r.root},s)),So=(0,y.Z)({root:{margin:"0 0",listStyleType:"none"}}),hs=r=>(0,y.Z)({root:{...So.root,paddingLeft:r.spacing(1)}}),Ro=(0,L.Z)(So,{name:"BackstageStructuredMetadataTableList"})(({classes:r,children:s})=>e.createElement(Po,{classes:r},s)),wo=(0,L.Z)(hs,{name:"BackstageStructuredMetadataTableNestedList"})(({classes:r,children:s})=>e.createElement(Po,{classes:r},s));function gs(r,s){const C=r.map((R,B)=>e.createElement(_o,{key:B},oo(R)));return s?e.createElement(wo,null,C):e.createElement(Ro,null,C)}function Es(r,s,C){const R=Object.keys(r).map(B=>{const V=oo(r[B],!0),Ee=C&&C.titleFormat?C.titleFormat(B):Wt()(B);return e.createElement(_o,{key:B},`${Ee}: `,V)});return s?e.createElement(wo,null,R):e.createElement(Ro,null,R)}function oo(r,s,C){return e.isValidElement(r)?e.createElement(e.Fragment,null,r):typeof r=="object"&&!Array.isArray(r)?Es(r,s,C):Array.isArray(r)?gs(r,C):typeof r=="boolean"?e.createElement(e.Fragment,null,r?"\u2705":"\u274C"):e.createElement(e.Fragment,null,r)}const vs=({value:r,options:s})=>e.createElement(e.Fragment,null,oo(r,s)),ys=({title:r,value:s,options:C})=>e.createElement(ps,{title:C&&C.titleFormat?C.titleFormat(r):Wt()(r)},e.createElement(vs,{value:s,options:C}));function bs(r,s){return Object.keys(r).map(C=>e.createElement(ys,{key:C,title:C,value:r[C],options:s}))}function Cs(r){const{metadata:s,dense:C=!0,options:R}=r,B=bs(s,R||{});return e.createElement(fs,{dense:C},B)}function Ps(r){return Rt().stringify(r,{strictNullHandling:!0})}function Ao(r){return Rt().parse(r,{ignoreQueryPrefix:!0,strictNullHandling:!0})}function Oo(r,s){return Ao(r)[s]}function _s(r,s,C){const R={...Ao(r),[s]:C};return Ps(R)}function Ss(r,s=250){const[C,R]=(0,I.lr)(),B=C.toString(),[V,Ee]=(0,e.useState)(Oo(B,r));return(0,e.useEffect)(()=>{const Oe=Oo(B,r);Ee(Xe=>(0,Se.isEqual)(Oe,Xe)?Xe:Oe)},[B,Ee,r]),(0,bn.b)(()=>{const Oe=_s(B,r,V);B!==Oe&&R(Oe,{replace:!0})},[R,V,B,r],s),[V,Ee]}const Rs={url:"https://github.com/backstage/backstage/issues",items:[{title:"Support Not Configured",icon:"warning",links:[{title:"Add `app.support` config key",url:"https://github.com/backstage/backstage/blob/master/app-config.yaml"}]}]};function Io(){const s=(0,m.I_)().get(m.Ds),C=s==null?void 0:s.getOptionalConfig("app.support");return C?{url:C.getString("url"),items:C.getConfigArray("items").flatMap(R=>{var B;return{title:R.getString("title"),icon:R.getOptionalString("icon"),links:((B=R.getOptionalConfigArray("links"))!=null?B:[]).flatMap(V=>({url:V.getString("url"),title:V.getString("title")}))}})}:Rs}function Fr(r,s){const R=(0,m.qD)().getSystemIcon(r);return R?e.createElement(R,{...s}):e.createElement(Nt.Z,{...s})}function Rl(r){return Fr("brokenImage",r)}function ws(r){return Fr("catalog",r)}function wl(r){return Fr("chat",r)}function Al(r){return Fr("dashboard",r)}function As(r){return Fr("docs",r)}function Ol(r){return Fr("email",r)}function Il(r){return Fr("github",r)}function Tl(r){return Fr("group",r)}function xa(r){return Fr("help",r)}function Os(r){return Fr("user",r)}function Dl(r){return Fr("warning",r)}const Is=(0,d.Z)({popoverList:{minWidth:260,maxWidth:400}},{name:"BackstageSupportButton"}),Ts=({icon:r})=>{var s;const C=(0,m.qD)(),R=r&&(s=C.getSystemIcon(r))!=null?s:xa;return e.createElement(R,null)},Ds=({link:r})=>{var s;return e.createElement(Ct,{to:r.url},(s=r.title)!=null?s:r.url)},$s=({item:r})=>{var s;return e.createElement(Q.Z,null,e.createElement(q.Z,null,e.createElement(Ts,{icon:r.icon})),e.createElement(xe.Z,{primary:r.title,secondary:(s=r.links)==null?void 0:s.reduce((C,R,B)=>[...C,B>0&&e.createElement("br",{key:B}),e.createElement(Ds,{link:R,key:R.url})],[])}))};function Ms(r){const{title:s,children:C}=r,{items:R}=Io(),[B,V]=(0,e.useState)(!1),[Ee,Oe]=(0,e.useState)(null),Xe=Is(),ze=(0,Qe.Z)(jt=>jt.breakpoints.down("sm")),St=jt=>{Oe(jt.currentTarget),V(!0)},gt=()=>{V(!1)};return e.createElement(e.Fragment,null,e.createElement(Bt.Z,{display:"flex",ml:1},ze?e.createElement(p.Z,{color:"primary",size:"small",onClick:St,"data-testid":"support-button"},e.createElement(xa,null)):e.createElement(S.Z,{"data-testid":"support-button",color:"primary",onClick:St,startIcon:e.createElement(xa,null)},"Support")),e.createElement(ye.ZP,{"data-testid":"support-button-popover",open:B,anchorEl:Ee,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:gt},e.createElement(le.Z,{className:Xe.popoverList},s&&e.createElement(Q.Z,{alignItems:"flex-start"},e.createElement(Te.Z,{variant:"subtitle1"},s)),e.Children.map(C,(jt,Qt)=>e.createElement(Q.Z,{alignItems:"flex-start",key:`child-${Qt}`},jt)),R&&R.map((jt,Qt)=>e.createElement($s,{item:jt,key:`item-${Qt}`}))),e.createElement(ge.Z,null,e.createElement(S.Z,{color:"primary",onClick:gt},"Close"))))}const ka=72,To=24,Do=18,ea={drawerWidthClosed:ka,drawerWidthOpen:224,defaultOpenDelayMs:100,defaultCloseDelayMs:0,defaultFadeDuration:200,logoHeight:32,iconContainerWidth:ka,iconSize:ka-To*2,iconPadding:To,selectedIndicatorWidth:3,userBadgePadding:Do,userBadgeDiameter:ka-Do*2,mobileSidebarHeight:56},Ls=r=>({...ea,...r,iconContainerWidth:ea.drawerWidthClosed,iconSize:ea.drawerWidthClosed-ea.iconPadding*2,userBadgeDiameter:ea.drawerWidthClosed-ea.userBadgePadding*2}),$o={drawerWidthClosed:0,drawerWidthOpen:202,defaultOpenDelayMs:ea.defaultOpenDelayMs+200},xs=r=>({...$o,...r}),ks="@backstage/core/sidebar-intro-dismissed",la=(0,e.createContext)({isOpen:!1,setOpen:()=>{}}),Ur=(0,e.createContext)({sidebarConfig:ea,submenuConfig:$o}),so=(0,e.createContext)({isHoveredOn:!1,setIsHoveredOn:()=>{}}),Mo={getSidebarPinState(){let r;try{r=JSON.parse(window.localStorage.getItem("sidebarPinState")||"true")}catch{return!0}return!!r},setSidebarPinState(r){return window.localStorage.setItem("sidebarPinState",JSON.stringify(r))}},Zs=(0,d.Z)(r=>({root:s=>({width:"100%",transition:"padding-left 0.1s ease-out",isolation:"isolate",[r.breakpoints.up("sm")]:{paddingLeft:()=>s.isPinned?s.sidebarConfig.drawerWidthOpen:s.sidebarConfig.drawerWidthClosed},[r.breakpoints.down("xs")]:{paddingBottom:s.sidebarConfig.mobileSidebarHeight}}),content:{zIndex:0,isolation:"isolate","&:focus":{outline:0}}}),{name:"BackstageSidebarPage"}),ya=(0,e.createContext)({isPinned:!0,toggleSidebarPinState:()=>{},isMobile:!1}),Lo=(0,e.createContext)({content:{contentRef:void 0}});function Bs(r){const[s,C]=(0,e.useState)(()=>Mo.getSidebarPinState()),{sidebarConfig:R}=(0,e.useContext)(Ur),B=(0,e.useRef)(null),V=(0,e.useMemo)(()=>({content:{contentRef:B}}),[B]);(0,e.useEffect)(()=>{Mo.setSidebarPinState(s)},[s]);const Ee=(0,Qe.Z)(ze=>ze.breakpoints.down("xs"),{noSsr:!0}),Oe=()=>C(!s),Xe=Zs({isPinned:s,sidebarConfig:R});return e.createElement(ya.Provider,{value:{isPinned:s,toggleSidebarPinState:Oe,isMobile:Ee}},e.createElement(Lo.Provider,{value:V},e.createElement("div",{className:Xe.root},r.children)))}function io(){const{content:r}=(0,e.useContext)(Lo);return{focusContent:(0,e.useCallback)(()=>{var C,R;(R=(C=r==null?void 0:r.contentRef)==null?void 0:C.current)==null||R.focus()},[r]),contentRef:r==null?void 0:r.contentRef}}const Us=(0,d.Z)(r=>({root:{flexGrow:0,margin:r.spacing(0,2),color:r.palette.navigation.color},selected:s=>({color:`${r.palette.navigation.selectedColor}!important`,borderTop:`solid ${s.sidebarConfig.selectedIndicatorWidth}px ${r.palette.navigation.indicator}`,marginTop:"-1px"}),label:{display:"none"}})),Ns=r=>{const{to:s,label:C,icon:R,value:B}=r,{sidebarConfig:V}=(0,e.useContext)(Ur),Ee=Us({sidebarConfig:V}),Oe=(0,D.TH)(),{selectedMenuItemIndex:Xe,setSelectedMenuItemIndex:ze}=(0,e.useContext)(ko),St=(jt,Qt)=>{ze(Qt===Xe?-1:Qt)},gt=B===Xe&&Xe>=0||B!==Xe&&!(Xe>=0)&&s===Oe.pathname;return e.createElement(Ue.Z,{label:C,icon:R,component:Ct,to:s||Oe.pathname,onChange:St,value:B,selected:gt,classes:Ee})},lo=r=>{const{children:s,to:C,label:R,icon:B,value:V}=r,{isMobile:Ee}=(0,e.useContext)(ya);return Ee?e.createElement(Ns,{to:C,label:R,icon:B,value:V}):e.createElement(e.Fragment,null,s)},xo=(0,d.Z)(r=>({root:{position:"fixed",backgroundColor:r.palette.navigation.background,color:r.palette.navigation.color,bottom:0,left:0,right:0,zIndex:r.zIndex.snackbar,borderTop:"1px solid #383838"},overlay:s=>({background:r.palette.navigation.background,width:"100%",bottom:`${s.sidebarConfig.mobileSidebarHeight}px`,height:`calc(100% - ${s.sidebarConfig.mobileSidebarHeight}px)`,flex:"0 1 auto",overflow:"auto"}),overlayHeader:{display:"flex",color:r.palette.bursts.fontColor,alignItems:"center",justifyContent:"space-between",padding:r.spacing(2,3)},overlayHeaderClose:{color:r.palette.bursts.fontColor},marginMobileSidebar:s=>({marginBottom:`${s.sidebarConfig.mobileSidebarHeight}px`})})),Ws=r=>(0,Se.orderBy)(r,({props:{priority:s}})=>Number.isInteger(s)?s:-1,"desc"),Ks=e.createElement(lo).type,Fs=({children:r,label:s="Menu",open:C,onClose:R})=>{const{sidebarConfig:B}=(0,e.useContext)(Ur),V=xo({sidebarConfig:B});return e.createElement(zn.ZP,{anchor:"bottom",open:C,onClose:R,ModalProps:{BackdropProps:{classes:{root:V.marginMobileSidebar}}},classes:{root:V.marginMobileSidebar,paperAnchorBottom:V.overlay}},e.createElement(Bt.Z,{className:V.overlayHeader},e.createElement(Te.Z,{variant:"h3"},s),e.createElement(p.Z,{onClick:R,classes:{root:V.overlayHeaderClose}},e.createElement(a.Z,null))),e.createElement(Bt.Z,null,r))},ko=(0,e.createContext)({selectedMenuItemIndex:-1,setSelectedMenuItemIndex:()=>{}}),js=r=>{const{sidebarConfig:s}=(0,e.useContext)(Ur),{children:C}=r,R=xo({sidebarConfig:s}),B=(0,D.TH)(),[V,Ee]=(0,e.useState)(-1);(0,e.useEffect)(()=>{Ee(-1)},[B.pathname]);let Oe=(0,m.vJ)(C,ze=>ze.getElements().filter(St=>St.type===Ks));if(C)Oe.length?Oe=Ws(Oe):Oe.push(e.createElement(lo,{key:"default_menu",icon:e.createElement(st.Z,null)},C));else return null;const Xe=V>=0&&!Oe[V].props.to;return e.createElement(la.Provider,{value:{isOpen:!0,setOpen:()=>{}}},e.createElement(ko.Provider,{value:{selectedMenuItemIndex:V,setSelectedMenuItemIndex:Ee}},e.createElement(Fs,{label:Oe[V]&&Oe[V].props.label,open:Xe,onClose:()=>Ee(-1)},Oe[V]&&Oe[V].props.children),e.createElement(xn.Z,{className:R.root,"data-testid":"mobile-sidebar-root"},Oe)))},Zo=(0,d.Z)(r=>({drawer:s=>({display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",left:0,top:0,bottom:0,zIndex:r.zIndex.appBar,background:r.palette.navigation.background,overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",width:s.sidebarConfig.drawerWidthClosed,transition:r.transitions.create("width",{easing:r.transitions.easing.sharp,duration:r.transitions.duration.shortest}),"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"}}),drawerOpen:s=>({width:s.sidebarConfig.drawerWidthOpen,transition:r.transitions.create("width",{easing:r.transitions.easing.sharp,duration:r.transitions.duration.shorter})}),visuallyHidden:{top:0,position:"absolute",zIndex:1e3,transform:"translateY(-200%)","&:focus":{transform:"translateY(5px)"}}}),{name:"BackstageSidebar"}),zs=r=>{const{sidebarConfig:s}=(0,e.useContext)(Ur),{openDelayMs:C=s.defaultOpenDelayMs,closeDelayMs:R=s.defaultCloseDelayMs,disableExpandOnHover:B,children:V}=r,Ee=Zo({sidebarConfig:s}),Oe=(0,Qe.Z)(dr=>dr.breakpoints.down("md"),{noSsr:!0}),[Xe,ze]=(0,e.useState)(0),St=(0,e.useRef)(),{isPinned:gt,toggleSidebarPinState:jt}=(0,e.useContext)(ya),Qt=()=>{gt||B||(St.current&&(clearTimeout(St.current),St.current=void 0),Xe!==2&&!Oe&&(St.current=window.setTimeout(()=>{St.current=void 0,ze(2)},C),ze(1)))},dn=()=>{gt||B||(St.current&&(clearTimeout(St.current),St.current=void 0),Xe===1?ze(0):Xe===2&&(St.current=window.setTimeout(()=>{St.current=void 0,ze(0)},R)))},Wn=Xe===2&&!Oe||gt,tr=dr=>{dr?(ze(2),jt()):(ze(0),jt())};return e.createElement("div",{style:{}},e.createElement(Hs,null),e.createElement(la.Provider,{value:{isOpen:Wn,setOpen:tr}},e.createElement("div",{className:Ee.root,"data-testid":"sidebar-root",onMouseEnter:B?()=>{}:Qt,onFocus:B?()=>{}:Qt,onMouseLeave:B?()=>{}:dn,onBlur:B?()=>{}:dn},e.createElement("div",{className:Pe()(Ee.drawer,{[Ee.drawerOpen]:Wn})},V))))},Vs=r=>{var s,C;const R=Ls((s=r.sidebarOptions)!=null?s:{}),B=xs((C=r.submenuOptions)!=null?C:{}),{children:V,disableExpandOnHover:Ee,openDelayMs:Oe,closeDelayMs:Xe}=r,{isMobile:ze}=(0,e.useContext)(ya);return ze?e.createElement(js,null,V):e.createElement(Ur.Provider,{value:{sidebarConfig:R,submenuConfig:B}},e.createElement(zs,{openDelayMs:Oe,closeDelayMs:Xe,disableExpandOnHover:Ee},V))};function Hs(){const{sidebarConfig:r}=(0,e.useContext)(Ur),{focusContent:s,contentRef:C}=io(),R=Zo({sidebarConfig:r});return C!=null&&C.current?e.createElement(S.Z,{onClick:s,variant:"contained",className:Pe()(R.visuallyHidden)},"Skip to content"):null}function Za(r,s){const C=new URLSearchParams(s.search).toString(),R=Rt().parse(C),B=new URLSearchParams(r.search).toString(),V=Rt().parse(B);return(0,Se.isEqual)(s.pathname,r.pathname)&&(0,Se.isMatch)(V,R)}const Gs=(0,d.Z)(r=>({item:{height:48,width:"100%","&:hover":{background:"#6f6f6f",color:r.palette.navigation.selectedColor},display:"flex",alignItems:"center",color:r.palette.navigation.color,padding:20,cursor:"pointer",position:"relative",background:"none",border:"none"},itemContainer:{width:"100%"},selected:{background:"#6f6f6f",color:"#FFF"},label:{margin:14,marginLeft:7,fontSize:14},dropdownArrow:{position:"absolute",right:21},dropdown:{display:"flex",flexDirection:"column",alignItems:"end"},dropdownItem:{width:"100%",padding:"10px 0 10px 0"},textContent:{color:r.palette.navigation.color,display:"flex",justifyContent:"center",[r.breakpoints.down("xs")]:{display:"block",paddingLeft:r.spacing(4)},fontSize:"14px"}}),{name:"BackstageSidebarSubmenuItem"}),Js=r=>{const{title:s,to:C,icon:R,dropdownItems:B}=r,V=Gs(),{setIsHoveredOn:Ee}=(0,e.useContext)(so),Oe=()=>{Ee(!1)},Xe=(0,D.WU)(C),ze=(0,D.TH)();let St=Za(ze,Xe);const[gt,jt]=(0,e.useState)(!1),Qt=()=>{jt(!gt)};return B!==void 0?(B.some(dn=>{const Wn=(0,D.i3)(dn.to);return St=Za(ze,Wn),St}),e.createElement("div",{className:V.itemContainer},e.createElement("button",{onClick:Qt,onTouchStart:dn=>dn.stopPropagation(),className:Pe()(V.item,St?V.selected:void 0)},e.createElement(R,{fontSize:"small"}),e.createElement(Te.Z,{variant:"subtitle1",className:V.label},s),gt?e.createElement(he.Z,{className:V.dropdownArrow}):e.createElement(oe.Z,{className:V.dropdownArrow})),B&&gt&&e.createElement("div",{className:V.dropdown},B.map((dn,Wn)=>e.createElement(Ct,{to:dn.to,underline:"none",className:V.dropdownItem,onClick:Oe,onTouchStart:tr=>tr.stopPropagation(),key:Wn},e.createElement(Te.Z,{className:V.textContent},dn.title)))))):e.createElement("div",{className:V.itemContainer},e.createElement(Ct,{to:C,underline:"none",className:Pe()(V.item,St?V.selected:void 0),onClick:Oe,onTouchStart:dn=>dn.stopPropagation()},e.createElement(R,{fontSize:"small"}),e.createElement(Te.Z,{variant:"subtitle1",className:V.label},s)))},Ys=(0,d.Z)(r=>({root:{zIndex:1e3,position:"relative",overflow:"visible",width:r.spacing(7)+1},drawer:s=>{var C,R;return{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",[r.breakpoints.up("sm")]:{marginLeft:s.left,transition:r.transitions.create("margin-left",{easing:r.transitions.easing.sharp,duration:r.transitions.duration.shortest})},top:0,bottom:0,padding:0,background:(R=(C=r.palette.navigation.submenu)==null?void 0:C.background)!=null?R:"#404040",overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",cursor:"default",width:s.submenuConfig.drawerWidthClosed,transitionDelay:`${s.submenuConfig.defaultOpenDelayMs}ms`,"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"}}},drawerOpen:s=>({width:s.submenuConfig.drawerWidthOpen,[r.breakpoints.down("xs")]:{width:"100%",position:"relative",paddingLeft:r.spacing(3),left:0,top:0}}),title:{fontSize:24,fontWeight:500,color:"#FFF",padding:20,[r.breakpoints.down("xs")]:{display:"none"}}}),{name:"BackstageSidebarSubmenu"}),Bo=r=>{const{isOpen:s}=(0,e.useContext)(la),{sidebarConfig:C,submenuConfig:R}=(0,e.useContext)(Ur),B=s?C.drawerWidthOpen:C.drawerWidthClosed,V=Ys({left:B,submenuConfig:R}),{isHoveredOn:Ee}=(0,e.useContext)(so),[Oe,Xe]=(0,e.useState)(!1);return(0,e.useEffect)(()=>{Xe(Ee)},[Ee]),e.createElement("div",{className:Pe()(V.drawer,{[V.drawerOpen]:Oe})},e.createElement(Te.Z,{variant:"h5",className:V.title},r.title),r.children)},Xs=(0,d.Z)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),Qs=()=>{const r=Xs();return React.createElement("div",{className:r.iconContainer},React.createElement("div",{className:r.arrow1},React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})),React.createElement("div",null,React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})))},ei=(0,d.Z)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),ti=()=>{const r=ei();return React.createElement("div",{className:r.iconContainer},React.createElement("div",{className:r.arrow1},React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})),React.createElement("div",null,React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})))},ni=r=>(0,d.Z)(s=>{var C,R,B,V;return{root:{color:s.palette.navigation.color,display:"flex",flexFlow:"row nowrap",alignItems:"center",height:48,cursor:"pointer"},buttonItem:{background:"none",border:"none",width:"100%",margin:0,padding:0,textAlign:"inherit",font:"inherit"},closed:{width:r.drawerWidthClosed,justifyContent:"center"},open:{[s.breakpoints.up("sm")]:{width:r.drawerWidthOpen}},highlightable:{"&:hover":{background:(R=(C=s.palette.navigation.navItem)==null?void 0:C.hoverBackground)!=null?R:"#404040"}},highlighted:{background:(V=(B=s.palette.navigation.navItem)==null?void 0:B.hoverBackground)!=null?V:"#404040"},label:{fontWeight:"bold",whiteSpace:"nowrap",lineHeight:"auto",flex:"3 1 auto",width:"110px",overflow:"hidden","text-overflow":"ellipsis"},iconContainer:{boxSizing:"border-box",height:"100%",width:r.iconContainerWidth,marginRight:-s.spacing(2),display:"flex",alignItems:"center",justifyContent:"center"},searchRoot:{marginBottom:12},searchField:{color:"#b5b5b5",fontWeight:"bold",fontSize:s.typography.fontSize},searchFieldHTMLInput:{padding:s.spacing(2,0,2)},searchContainer:{width:r.drawerWidthOpen-r.iconContainerWidth},secondaryAction:{width:s.spacing(6),textAlign:"center",marginRight:s.spacing(1)},closedItemIcon:{width:"100%",justifyContent:"center"},submenuArrow:{display:"flex"},expandButton:{background:"none",border:"none",color:s.palette.navigation.color,width:"100%",cursor:"pointer",position:"relative",height:48},arrows:{position:"absolute",right:10},selected:{"&$root":{borderLeft:`solid ${r.selectedIndicatorWidth}px ${s.palette.navigation.indicator}`,color:s.palette.navigation.selectedColor},"&$closed":{width:r.drawerWidthClosed},"& $closedItemIcon":{paddingRight:r.selectedIndicatorWidth},"& $iconContainer":{marginLeft:-r.selectedIndicatorWidth}}}},{name:"BackstageSidebarItem"});function Ba(r){return(0,e.useMemo)(()=>ni(r),[r])()}const ri=(r,s)=>(0,m.vJ)(r.props.children,C=>{let R=!1;return C.getElements().forEach(({props:{to:B,dropdownItems:V}})=>{if(!R){if(V!=null&&V.length){V.forEach(({to:Ee})=>R=R||Za(s,(0,D.i3)(Ee)));return}B&&(R=Za(s,(0,D.i3)(B)))}}),R},[s.pathname]);function Uo(r){return r.to===void 0}const ai=e.createElement(Bo).type,oi=e.forwardRef(function({to:s,end:C,style:R,className:B,activeStyle:V,caseSensitive:Ee,activeClassName:Oe="active","aria-current":Xe="page",...ze},St){let{pathname:gt}=(0,D.TH)(),{pathname:jt}=(0,D.WU)(s);Ee||(gt=gt.toLocaleLowerCase("en-US"),jt=jt.toLocaleLowerCase("en-US"));let Qt=gt===jt;!Qt&&!C&&(Qt=gt.startsWith(`${jt}/`));const dn=Qt?Xe:void 0;return e.createElement(I.rU,{...ze,to:s,ref:St,"aria-current":dn,style:{...R,...Qt?V:void 0},className:Pe()([B,Qt?Oe:void 0])})}),No=(0,e.forwardRef)((r,s)=>{const{icon:C,text:R,hasNotifications:B=!1,disableHighlight:V=!1,onClick:Ee,children:Oe,className:Xe,...ze}=r,{sidebarConfig:St}=(0,e.useContext)(Ur),gt=Ba(St),{isOpen:jt}=(0,e.useContext)(la),Qt=e.createElement(De.Z,{color:"secondary",variant:"dot",overlap:"circular",invisible:!B,className:Pe()({[gt.closedItemIcon]:!jt})},e.createElement(C,{fontSize:"small"})),dn=e.createElement(e.Fragment,null,e.createElement("div",{"data-testid":"login-button",className:gt.iconContainer},Qt),R&&e.createElement(Te.Z,{variant:"subtitle2",className:gt.label},R),e.createElement("div",{className:gt.secondaryAction},Oe)),Wn=jt?dn:Qt,tr={onClick:Ee,className:Pe()(Xe,gt.root,jt?gt.open:gt.closed,Uo(r)&&gt.buttonItem,{[gt.highlightable]:!V})};return Uo(r)?e.createElement("button",{"aria-label":R,...tr,ref:s},Wn):e.createElement(oi,{...tr,activeClassName:gt.selected,to:r.to?r.to:"",ref:s,"aria-label":R||r.to,...ze},Wn)}),si=({children:r,...s})=>{const{sidebarConfig:C}=(0,e.useContext)(Ur),R=Ba(C),[B,V]=(0,e.useState)(!1),Ee=(0,D.TH)(),Oe=ri(r,Ee),Xe=(0,Qe.Z)(jt=>jt.breakpoints.down("sm")),ze=()=>{V(!0)},St=()=>{V(!1)},gt=()=>Xe?B?e.createElement(he.Z,{fontSize:"small",className:R.submenuArrow}):e.createElement(oe.Z,{fontSize:"small",className:R.submenuArrow}):!B&&e.createElement(Ne.Z,{fontSize:"small",className:R.submenuArrow});return e.createElement(so.Provider,{value:{isHoveredOn:B,setIsHoveredOn:V}},e.createElement("div",{"data-testid":"item-with-submenu",onMouseLeave:St,onTouchStart:B?St:ze,onMouseEnter:ze,className:Pe()(B&&R.highlighted)},e.createElement(No,{className:Oe?R.selected:"",...s},gt()),B&&r))},Wo=(0,e.forwardRef)((r,s)=>{const[C]=(0,m.vJ)(r.children,R=>R.getElements().filter(B=>B.type===ai));return C?e.createElement(si,{...r},C):e.createElement(No,{...r,ref:s})});function $l(r){const{sidebarConfig:s}=useContext(Ur),[C,R]=useState(""),B=Ba(s),V=r.icon?r.icon:SearchIcon,Ee=()=>{r.onSearch(C),R("")},Oe=gt=>{gt.key==="Enter"&&(gt.preventDefault(),Ee())},Xe=gt=>{R(gt.target.value)},ze=gt=>{gt.preventDefault(),gt.stopPropagation()},St=gt=>{Ee(),gt.preventDefault()};return React.createElement("div",{className:B.searchRoot},React.createElement(Wo,{icon:V,to:r.to,onClick:St,disableHighlight:!0},React.createElement(TextField,{placeholder:"Search",value:C,onClick:ze,onChange:Xe,onKeyDown:Oe,className:B.searchContainer,InputProps:{disableUnderline:!0,className:B.searchField},inputProps:{className:B.searchFieldHTMLInput}})))}const ii=(0,$.Z)("div")({flex:1},{name:"BackstageSidebarSpace"}),Ml=(0,$.Z)("div")({height:8},{name:"BackstageSidebarSpacer"}),Ko=(0,$.Z)("hr")({height:1,width:"100%",background:"#383838",border:"none",margin:"12px 0px"},{name:"BackstageSidebarDivider"}),li=r=>({overflowY:"auto","&::-webkit-scrollbar":{backgroundColor:r.palette.background.default,width:"5px",borderRadius:"5px"},"&::-webkit-scrollbar-thumb":{backgroundColor:r.palette.text.hint,borderRadius:"5px"}}),ci=(0,$.Z)("div")(({theme:r})=>{const s=li(r);return{flex:"0 1 auto",overflowX:"hidden",width:"calc(100% - 5px)",minHeight:"48px",overflowY:"hidden","@media (hover: none)":s,"&:hover":s}}),Ll=()=>{const{sidebarConfig:r}=useContext(Ur),s=Ba(r),{isOpen:C,setOpen:R}=useContext(la);if(useMediaQuery(Ee=>Ee.breakpoints.down("md"),{noSsr:!0}))return null;const V=()=>{R(!C)};return React.createElement("button",{onClick:V,className:s.expandButton,"aria-label":"Expand Sidebar","data-testid":"sidebar-expand-button"},React.createElement("div",{className:s.arrows},C?React.createElement(Qs,null):React.createElement(ti,null)))},ui=(0,d.Z)(r=>({introCard:s=>({color:"#b5b5b5",fontSize:12,width:s.sidebarConfig.drawerWidthOpen,marginTop:18,marginBottom:12,paddingLeft:s.sidebarConfig.iconPadding,paddingRight:s.sidebarConfig.iconPadding}),introDismiss:{display:"flex",justifyContent:"flex-end",alignItems:"center",marginTop:12},introDismissLink:{color:"#dddddd",display:"flex",alignItems:"center",marginBottom:4,"&:hover":{color:r.palette.linkHover,transition:r.transitions.create("color",{easing:r.transitions.easing.sharp,duration:r.transitions.duration.shortest})}},introDismissText:{fontSize:"0.7rem",fontWeight:"bold",textTransform:"uppercase",letterSpacing:1},introDismissIcon:{width:18,height:18,marginRight:12}}),{name:"BackstageSidebarIntro"});function di(r){const{sidebarConfig:s}=useContext(Ur),C=ui({sidebarConfig:s}),{text:R,onClose:B}=r,V=()=>B();return React.createElement("div",{className:C.introCard},React.createElement(Typography,{variant:"subtitle2"},R),React.createElement("div",{className:C.introDismiss},React.createElement(Link$1,{component:"button",onClick:V,underline:"none",className:C.introDismissLink},React.createElement(CloseIcon,{className:C.introDismissIcon}),React.createElement(Typography,{component:"span",className:C.introDismissText},"Dismiss"))))}const Fo=r=>{const{text:s,onDismiss:C}=r,[R,B]=useState(!1),V=()=>{B(!0)};return React.createElement(Collapse,{in:!R,onExited:C},React.createElement(di,{text:s,onClose:V}))},mi=null,fi="And your recently viewed plugins will pop up here!";function xl(r){const{isOpen:s}=useContext(la),C={starredItemsDismissed:!1,recentlyViewedItemsDismissed:!1},[R,B]=useLocalStorageValue(ks),{starredItemsDismissed:V,recentlyViewedItemsDismissed:Ee}=R!=null?R:{},Oe=()=>{B(ze=>({...C,...ze,starredItemsDismissed:!0}))},Xe=()=>{B(ze=>({...C,...ze,recentlyViewedItemsDismissed:!0}))};return s?React.createElement(React.Fragment,null,!V&&React.createElement(React.Fragment,null,React.createElement(Fo,{text:mi,onDismiss:Oe}),React.createElement(Ko,null)),!Ee&&React.createElement(Fo,{text:fi,onDismiss:Xe})):null}const pi=(0,d.Z)(r=>({root:{gridArea:"pageContent",minWidth:0,paddingTop:r.spacing(3),paddingBottom:r.spacing(3),paddingLeft:r.spacing(2),paddingRight:r.spacing(2),[r.breakpoints.up("sm")]:{paddingLeft:r.spacing(3),paddingRight:r.spacing(3)}},stretch:{display:"flex",flexDirection:"column",flexGrow:1},noPadding:{padding:0}}),{name:"BackstageContent"});function Ua(r){const{className:s,stretch:C,noPadding:R,children:B,...V}=r,{contentRef:Ee}=io(),Oe=pi();return e.createElement("article",{ref:Ee,tabIndex:-1,...V,className:Pe()(Oe.root,s,{[Oe.stretch]:C,[Oe.noPadding]:R})},B)}const hi=(0,d.Z)(r=>({tabsWrapper:{gridArea:"pageSubheader",backgroundColor:r.palette.background.paper,paddingLeft:r.spacing(3)},defaultTab:{padding:r.spacing(3,3),...r.typography.caption,textTransform:"uppercase",fontWeight:"bold",color:r.palette.text.secondary},selected:{color:r.palette.text.primary},tabRoot:{"&:hover":{backgroundColor:r.palette.background.default,color:r.palette.text.primary}}}),{name:"BackstageHeaderTabs"});function jo(r){const{tabs:s,onChange:C,selectedIndex:R}=r,[B,V]=(0,e.useState)(R!=null?R:0),Ee=hi(),Oe=(Xe,ze)=>{R===void 0&&V(ze),C&&C(ze)};return(0,e.useEffect)(()=>{R!==void 0&&V(R)},[R]),e.createElement("div",{className:Ee.tabsWrapper},e.createElement(Be.Z,{selectionFollowsFocus:!0,indicatorColor:"primary",textColor:"inherit",variant:"scrollable",scrollButtons:"auto","aria-label":"scrollable auto tabs example",onChange:Oe,value:B},s.map((Xe,ze)=>e.createElement(Ke.Z,{...Xe.tabProps,"data-testid":`header-tab-${ze}`,label:Xe.label,key:Xe.id,value:ze,className:Ee.defaultTab,classes:{selected:Ee.selected,root:Ee.tabRoot}}))))}function gi(r){var s,C,R;const B=(0,D.UO)(),Ee=r.map(({path:St,children:gt})=>({caseSensitive:!1,path:`${St}/*`,element:gt})).sort((St,gt)=>gt.path.replace(/\/\*$/,"").localeCompare(St.path.replace(/\/\*$/,""))),Oe=(s=(0,D.V$)(Ee))!=null?s:r[0].children,[Xe]=(C=(0,D.fp)(Ee,`/${B["*"]}`))!=null?C:[],ze=Xe?r.findIndex(St=>`${St.path}/*`===Xe.route.path):0;return{index:ze===-1?0:ze,element:Oe,route:(R=r[ze])!=null?R:r[0]}}function zo(r){const{routes:s}=r,C=(0,D.s0)(),{index:R,route:B,element:V}=gi(s),Ee=(0,e.useMemo)(()=>s.map(Xe=>({id:Xe.path,label:Xe.title,tabProps:Xe.tabProps})),[s]),Oe=Xe=>C(s[Xe].path.replace(/\/\*$/,"").replace(/^\//,""));return e.createElement(e.Fragment,null,e.createElement(jo,{tabs:Ee,selectedIndex:R,onChange:Oe}),e.createElement(Ua,null,e.createElement(zt.q,{title:B.title}),V))}const co=()=>null;(0,m.R5)(co,"core.gatherMountPoints",!0);function Vo(r){const s=e.createElement(co,{path:"",title:""},e.createElement("div",null)).type;return e.Children.toArray(r).flatMap(C=>{if(!(0,e.isValidElement)(C))return[];if(C.type===e.Fragment)return Vo(C.props.children);if(C.type!==s)throw new Error("Child of TabbedLayout must be an TabbedLayout.Route");const{path:R,title:B,children:V,tabProps:Ee}=C.props;return[{path:R,title:B,children:V,tabProps:Ee}]})}function Ho(r){const s=Vo(r.children);return e.createElement(zo,{routes:s})}Ho.Route=co;const Ei=(0,d.Z)(r=>({value:{marginBottom:"6px"},subvalue:{color:r.palette.textSubtle,fontWeight:"normal"}}),{name:"BackstageSubvalueCell"});function vi(r){const{value:s,subvalue:C}=r,R=Ei();return e.createElement(e.Fragment,null,e.createElement("div",{className:R.value},s),e.createElement("div",{className:R.subvalue},C))}const yi=(0,d.Z)(r=>({root:{height:"100%",width:"315px",display:"flex",flexDirection:"column",marginRight:r.spacing(3)},value:{fontWeight:"bold",fontSize:18},header:{display:"flex",alignItems:"center",height:"60px",justifyContent:"space-between",borderBottom:`1px solid ${r.palette.grey[500]}`},filters:{display:"flex",flexDirection:"column","& > *":{marginTop:r.spacing(2)}}}),{name:"BackstageTableFilters"}),bi=r=>{var s;const C=yi(),{onChangeFilters:R}=r,[B,V]=(0,e.useState)({...r.selectedFilters}),[Ee,Oe]=(0,e.useState)(!1),Xe=()=>{V({}),Oe(ze=>!ze)};return(0,e.useEffect)(()=>{R(B)},[B,R]),e.createElement("div",{className:C.root},e.createElement("div",{className:C.header},e.createElement("div",{className:C.value},"Filters"),e.createElement(S.Z,{color:"primary",onClick:Xe},"Clear all")),e.createElement("div",{className:C.filters},((s=r.filters)==null?void 0:s.length)&&r.filters.map(ze=>e.createElement(Gn,{triggerReset:Ee,key:ze.element.label,...ze.element,selected:B[ze.element.label],onChange:St=>V({...B,[ze.element.label]:St})}))))},Ci={Add:(0,e.forwardRef)((r,s)=>e.createElement(ct.Z,{...r,ref:s})),Check:(0,e.forwardRef)((r,s)=>e.createElement(mn.Z,{...r,ref:s})),Clear:(0,e.forwardRef)((r,s)=>e.createElement(se.Z,{...r,ref:s})),Delete:(0,e.forwardRef)((r,s)=>e.createElement(ke.Z,{...r,ref:s})),DetailPanel:(0,e.forwardRef)((r,s)=>e.createElement(Ze.Z,{...r,ref:s})),Edit:(0,e.forwardRef)((r,s)=>e.createElement(ot.Z,{...r,ref:s})),Export:(0,e.forwardRef)((r,s)=>e.createElement(l.Z,{...r,ref:s})),Filter:(0,e.forwardRef)((r,s)=>e.createElement(wt.Z,{...r,ref:s})),FirstPage:(0,e.forwardRef)((r,s)=>e.createElement(Fe.Z,{...r,ref:s})),LastPage:(0,e.forwardRef)((r,s)=>e.createElement(ft.Z,{...r,ref:s})),NextPage:(0,e.forwardRef)((r,s)=>e.createElement(Ze.Z,{...r,ref:s})),PreviousPage:(0,e.forwardRef)((r,s)=>e.createElement(_e.Z,{...r,ref:s})),ResetSearch:(0,e.forwardRef)((r,s)=>e.createElement(se.Z,{...r,ref:s})),Search:(0,e.forwardRef)((r,s)=>e.createElement(wt.Z,{...r,ref:s})),SortArrow:(0,e.forwardRef)((r,s)=>e.createElement(Kt.Z,{...r,ref:s})),ThirdStateCheck:(0,e.forwardRef)((r,s)=>e.createElement(K.Z,{...r,ref:s})),ViewColumn:(0,e.forwardRef)((r,s)=>e.createElement(b.Z,{...r,ref:s}))};function Go(r,s){const C=s.split(".");let R=r[C[0]];for(let B=1;B<C.length;++B){if(R===void 0)return R;const V=C[B];R=R[V]}return R}const Pi=(0,L.Z)(r=>({header:{padding:r.spacing(1,2,1,2.5),borderTop:`1px solid ${r.palette.grey.A100}`,borderBottom:`1px solid ${r.palette.grey.A100}`,color:r.palette.textSubtle,fontWeight:r.typography.fontWeightBold,position:"static",wordBreak:"normal"}}),{name:"BackstageTableHeader"})(x.W$),Jo=(0,L.Z)(r=>({root:{padding:r.spacing(3,0,2.5,2.5)},title:{"& > h6":{fontWeight:"bold"}},searchField:{paddingRight:r.spacing(2)}}),{name:"BackstageTableToolbar"})(x.UW),_i=(0,d.Z)(()=>({root:{display:"flex",alignItems:"center",justifyContent:"space-between"},title:{fontWeight:"bold",fontSize:18,whiteSpace:"nowrap"}}),{name:"BackstageTableFiltersContainer"}),Si=(0,d.Z)(()=>({root:{display:"flex",alignItems:"start"}}),{name:"BackstageTable"});function Ri(r,s){return r.map(C=>{const R={};let B=C.cellStyle||{};if(C.highlight)if(R.color=s.palette.textContrast,typeof B=="object")B.fontWeight=s.typography.fontWeightBold;else{const V=B;B=(Ee,Oe,Xe)=>({...V(Ee,Oe,Xe),fontWeight:s.typography.fontWeightBold})}return{...C,headerStyle:R,cellStyle:B}})}function wi(r,s){return(0,Se.transform)(r,(C,R,B)=>{(0,Se.isEqual)(R,s[B])||(C[B]=R)})}const Yo={search:"",filtersOpen:!1,filters:{}};function Ai(r){const{toolbarRef:s,setSearch:C,hasFilters:R,selectedFiltersLength:B,toggleFilters:V}=r,Ee=_i(),Oe=(0,e.useCallback)(Xe=>{r.onSearchChanged(Xe),C(Xe)},[r,C]);return R?e.createElement("div",{className:Ee.root},e.createElement("div",{className:Ee.root},e.createElement(p.Z,{onClick:V,"aria-label":"filter list"},e.createElement(wt.Z,null)),e.createElement(Te.Z,{className:Ee.title},"Filters (",B,")")),e.createElement(Jo,{...r,ref:s,onSearchChanged:Oe})):e.createElement(Jo,{...r,ref:s,onSearchChanged:Oe})}function Oi(r){const{data:s,columns:C,options:R,title:B,subtitle:V,filters:Ee,initialState:Oe,emptyContent:Xe,onStateChange:ze,...St}=r,gt=Si(),jt=(0,h.Z)(),Qt={...Yo,...Oe},[dn,Wn]=(0,e.useState)(Qt.filtersOpen),tr=(0,e.useCallback)(()=>Wn(wr=>!wr),[Wn]),[dr,vr]=(0,e.useState)(0),[Kn,nr]=(0,e.useState)(s),[qn,$r]=(0,e.useState)(Qt.filters),aa=Ri(C,jt),[Wr,Aa]=(0,e.useState)(Qt.search);(0,e.useEffect)(()=>{if(ze){const wr=wi({search:Wr,filtersOpen:dn,filters:qn},Yo);ze(wr)}},[Wr,dn,qn,ze]);const oa={headerStyle:{textTransform:"uppercase"}},Oa=(0,e.useCallback)(wr=>{var ta;return(ta=C.find(da=>da.title===wr))==null?void 0:ta.field},[C]);(0,e.useEffect)(()=>{if(typeof s=="function")return;if(!qn){nr(s);return}const wr=Object.values(qn);if(s&&wr.flat().length){const ta=s.filter(da=>!!Object.entries(qn).filter(([,jr])=>!!jr.length).every(([jr,mr])=>{const Lr=Go(da,Oa(jr));return Array.isArray(Lr)&&Array.isArray(mr)?Lr.some(ma=>mr.includes(ma)):Array.isArray(Lr)?Lr.includes(mr):Array.isArray(mr)?mr.includes(Lr):Lr===mr}));nr(ta)}else nr(s);vr(wr.flat().length)},[s,qn,Oa]);const or=(wr,ta)=>{const da=mr=>{const Lr=new Set,ma=zr=>{zr!=null&&Lr.add(zr)};return ta&&ta.forEach(zr=>{const Ia=Go(zr,Oa(mr));Array.isArray(Ia)?Ia.forEach(ma):ma(Ia)}),Lr},jr=mr=>({placeholder:"All results",label:mr.column,multiple:mr.type==="multiple-select",items:[...da(mr.column)].sort().map(Lr=>({label:Lr,value:Lr}))});return wr.map(mr=>({type:mr.type,element:jr(mr)}))},ca=!!(Ee!=null&&Ee.length),go=(0,e.useCallback)(wr=>e.createElement(Ai,{setSearch:Aa,hasFilters:ca,selectedFiltersLength:dr,toggleFilters:tr,...wr}),[tr,ca,dr,Aa]),ua=typeof s!="function"&&s.length===0,ja=C.length,Eo=(0,e.useCallback)(wr=>Xe&&ua?e.createElement("tbody",null,e.createElement("tr",null,e.createElement("td",{colSpan:ja},Xe))):e.createElement(x.os,{...wr}),[ua,Xe,ja]);return e.createElement("div",{className:gt.root},dn&&s&&typeof s!="function"&&(Ee==null?void 0:Ee.length)&&e.createElement(bi,{filters:or(Ee,s),selectedFilters:qn,onChangeFilters:$r}),e.createElement(x.ZP,{components:{Header:Pi,Toolbar:go,Body:Eo},options:{...oa,...R},columns:aa,icons:Ci,title:e.createElement(e.Fragment,null,e.createElement(Te.Z,{variant:"h5",component:"h3"},B),V&&e.createElement(Te.Z,{color:"textSecondary",variant:"body1"},V)),data:typeof s=="function"?s:Kn,style:{width:"100%"},localization:{toolbar:{searchPlaceholder:"Filter"}},...St}))}function Ii(r,s){if(s<=0)return[r];const C=[];for(let R=0;R<r.length;R+=s)C.push(r.slice(R,R+s));return C}const Xo=r=>{const{children:s,value:C,index:R,...B}=r;return React.createElement("div",{role:"tabpanel",hidden:C!==R,"aria-labelledby":`scrollable-auto-tab-${R}`,...B},C===R&&React.createElement(Box,{p:3},s))},Ti=(0,d.Z)(()=>({root:{color:"#6E6E6E",overflow:"visible",fontSize:"1.5rem",textAlign:"center",borderRadius:"50%",backgroundColor:"#E6E6E6",marginLeft:r=>r.isNext?"auto":"0",marginRight:r=>r.isNext?"0":"10px","&:hover":{backgroundColor:"#E6E6E6",opacity:"1"}}}),{name:"BackstageTabIcon"}),Qo=r=>{const s=Ti(r),{ariaLabel:C,onClick:R}=r;return React.createElement(IconButton,{onClick:R,className:s.root,size:"small",disableRipple:!0,disableFocusRipple:!0,"aria-label":C},r.children)},Di=(r,s)=>s?r?"20px":"0":"40px",$i=(0,d.Z)(r=>({root:{textTransform:"none",height:"64px",fontWeight:r.typography.fontWeightBold,fontSize:r.typography.pxToRem(13),color:r.palette.textSubtle,marginLeft:s=>Di(s.isFirstNav,s.isFirstIndex),width:"130px",minWidth:"130px","&:hover":{outline:"none",backgroundColor:"transparent",color:r.palette.textSubtle}}}),{name:"BackstageTab"}),Mi=r=>{const s=$i(r),{isFirstNav:C,isFirstIndex:R,...B}=r;return React.createElement(Tab,{classes:s,disableRipple:!0,...B})},Li=(0,d.Z)(r=>({indicator:{display:"flex",justifyContent:"center",backgroundColor:r.palette.tabbar.indicator,height:"4px"},flexContainer:{alignItems:"center"},root:{"&:last-child":{marginLeft:"auto"}}}),{name:"BackstageTabBar"}),xi=r=>{const s=Li(r);return React.createElement(Tabs$1,{classes:s,...r,TabIndicatorProps:{children:React.createElement("span",null)}})},ki=(0,d.Z)(r=>({root:{flexGrow:1,width:"100%"},styledTabs:{backgroundColor:r.palette.background.paper},appbar:{boxShadow:"none",backgroundColor:r.palette.background.paper,paddingLeft:"10px",paddingRight:"10px"}}),{name:"BackstageTabs"});function kl(r){const{tabs:s}=r,C=ki(),[R,B]=useState([0,0]),[V,Ee]=useState(0),[Oe,Xe]=useState(0),[ze,St]=useState([[]]),gt=useRef(),{width:jt}=useWindowSize(),Qt=(vr,Kn)=>{B([V,Kn])},dn=()=>{Ee(V-1)},Wn=()=>{Ee(V+1)},tr=()=>V+1<ze.length;useEffect(()=>{const Kn=V===0?1:2,nr=gt.current.offsetWidth-20-Kn*30,qn=R[0]*Oe+R[1],$r=Math.floor(nr/170);Xe($r),St(Ii(s,$r)),B([Math.floor(qn/$r),qn%$r])},[jt,s]);const dr=V===R[0]?R[1]:!1;return React.createElement("div",{className:C.root},React.createElement(AppBar,{ref:gt,className:C.appbar,position:"static"},React.createElement("div",null,React.createElement(xi,{value:dr,onChange:Qt,selectionFollowsFocus:!0},V!==0&&React.createElement(Qo,{onClick:dn,ariaLabel:"navigate-before"},React.createElement(NavigateBeforeIcon,null)),ze[V].map((vr,Kn)=>React.createElement(Mi,{value:Kn,isFirstIndex:Kn===0,isFirstNav:V===0,key:Kn,icon:vr.icon||void 0,label:vr.label||void 0})),tr()&&React.createElement(Qo,{isNext:!0,onClick:Wn,ariaLabel:"navigate-next"},React.createElement(NavigateNextIcon,null))))),dr!==!1?ze[V].map((vr,Kn)=>React.createElement(Xo,{key:Kn,value:Kn,index:dr},vr.content)):React.createElement(Xo,{key:"panel_outside_chunked_array",value:R[1],index:R[1]},ze[R[0]][R[1]].content))}function Zi(r,s){const C=r[r.length-1];if(!!C)return C>=.9?s.palette.status.ok:C>=.5?s.palette.status.warning:s.palette.status.error}function Zl(r){var s;const C=useTheme();return r.data?React.createElement(Sparklines,{width:120,height:30,min:0,max:1,...r},r.title&&React.createElement("title",null,r.title),React.createElement(SparklinesLine,{color:(s=r.color)!=null?s:Zi(r.data,C)})):null}const Bi=r=>(0,d.Z)(s=>({container:{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-end",alignItems:"center",marginBottom:s.spacing(2),textAlign:r.textAlign},leftItemsBox:{flex:"1 1 auto",minWidth:0,overflow:"visible"},rightItemsBox:{flex:"0 1 auto",display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",marginLeft:s.spacing(1),minWidth:0,overflow:"visible"},description:{},title:{display:"inline-flex",marginBottom:0}}),{name:"BackstageContentHeader"}),Ui=({title:r="Unknown page",className:s})=>e.createElement(Te.Z,{variant:"h4",component:"h2",className:s,"data-testid":"header-title"},r);function qo(r){const{description:s,title:C,titleComponent:R=void 0,children:B,textAlign:V="left"}=r,Ee=Bi({textAlign:V})(),Oe=R||e.createElement(Ui,{title:C,className:Ee.title});return e.createElement(e.Fragment,null,e.createElement(zt.q,{title:C}),e.createElement("div",{className:Ee.container},e.createElement("div",{className:Ee.leftItemsBox},Oe,s&&e.createElement(Te.Z,{className:Ee.description,variant:"body2"},s)),e.createElement("div",{className:Ee.rightItemsBox},B)))}const Ni=(0,d.Z)(r=>({micDrop:{maxWidth:"60%",position:"absolute",bottom:r.spacing(2),right:r.spacing(2),[r.breakpoints.down("xs")]:{maxWidth:"96%",position:"relative",bottom:"unset",right:"unset",margin:`${r.spacing(10)}px auto ${r.spacing(4)}px`}}}),{name:"BackstageErrorPageMicDrop"}),Wi=()=>{const r=Ni();return e.createElement("img",{src:Ae,className:r.micDrop,alt:"Girl dropping mic from her hands"})},Ki=(0,d.Z)(r=>({container:{padding:r.spacing(8),[r.breakpoints.down("xs")]:{padding:r.spacing(2)}},title:{paddingBottom:r.spacing(5),[r.breakpoints.down("xs")]:{paddingBottom:r.spacing(4),fontSize:32}},subtitle:{color:r.palette.textSubtle}}),{name:"BackstageErrorPage"});function Fi(r){const{status:s,statusMessage:C,additionalInfo:R,supportUrl:B}=r,V=Ki(),Ee=(0,D.s0)(),Oe=Io();return e.createElement(ae.Z,{container:!0,spacing:0,className:V.container},e.createElement(Wi,null),e.createElement(ae.Z,{item:!0,xs:12,sm:8,md:4},e.createElement(Te.Z,{"data-testid":"error",variant:"body1",className:V.subtitle},"ERROR ",s,": ",C),e.createElement(Te.Z,{variant:"body1",className:V.subtitle},R),e.createElement(Te.Z,{variant:"h2",className:V.title},"Looks like someone dropped the mic!"),e.createElement(Te.Z,{variant:"h6"},e.createElement(Ct,{to:"#","data-testid":"go-back-link",onClick:()=>Ee(-1)},"Go back"),"... or please"," ",e.createElement(Ct,{to:B||Oe.url},"contact support")," if you think this is a bug.")))}const ji=(0,L.Z)({root:{textDecoration:"underline",cursor:"pointer"}},{name:"BackstageBreadcrumbsClickableText"})(Te.Z),uo=(0,L.Z)({root:{textDecoration:"underline",color:"inherit"}},{name:"BackstageBreadcrumbsStyledBox"})(Bt.Z);function es(r){const{children:s,...C}=r,[R,B]=e.useState(null),V=e.Children.toArray(s),[Ee,Oe,...Xe]=V,ze=Xe.length?Xe.pop():V[V.length-1],St=V.length>3,gt=dn=>{B(dn.currentTarget)},jt=()=>{B(null)},Qt=Boolean(R);return e.createElement(e.Fragment,null,e.createElement(rt.Z,{"aria-label":"breadcrumb",...C},V.length>1&&e.createElement(uo,{clone:!0},Ee),V.length>2&&e.createElement(uo,{clone:!0},Oe),St&&e.createElement(ji,{onClick:gt},"..."),e.createElement(Bt.Z,{style:{fontStyle:"italic"}},ze)),e.createElement(ye.ZP,{open:Qt,anchorEl:R,onClose:jt,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},e.createElement(le.Z,null,Xe.map((dn,Wn)=>e.createElement(Q.Z,{key:Wn,button:!0},e.createElement(uo,{clone:!0},dn))))))}const zi=(0,d.Z)(r=>({header:{gridArea:"pageHeader",padding:r.spacing(3),width:"100%",boxShadow:r.shadows[4],position:"relative",zIndex:100,display:"flex",flexDirection:"row",alignItems:"center",backgroundImage:r.page.backgroundImage,backgroundPosition:"center",backgroundSize:"cover",[r.breakpoints.down("sm")]:{flexWrap:"wrap"}},leftItemsBox:{maxWidth:"100%",flexGrow:1},rightItemsBox:{width:"auto"},title:{color:r.palette.bursts.fontColor,wordBreak:"break-word",fontSize:r.typography.h3.fontSize,marginBottom:0},subtitle:{color:r.palette.bursts.fontColor,opacity:.8,display:"inline-block",marginTop:r.spacing(1),maxWidth:"75ch"},type:{textTransform:"uppercase",fontSize:11,opacity:.8,marginBottom:r.spacing(1),color:r.palette.bursts.fontColor},breadcrumb:{color:r.palette.bursts.fontColor},breadcrumbType:{fontSize:"inherit",opacity:.7,marginRight:-r.spacing(.3),marginBottom:r.spacing(.3)},breadcrumbTitle:{fontSize:"inherit",marginLeft:-r.spacing(.3),marginBottom:r.spacing(.3)}}),{name:"BackstageHeader"}),Vi=({type:r,typeLink:s,classes:C,pageTitle:R})=>r?s?e.createElement(es,{className:C.breadcrumb},e.createElement(Ct,{to:s},r),e.createElement(Te.Z,null,R)):e.createElement(Te.Z,{className:C.type},r):null,Hi=({pageTitle:r,classes:s,tooltip:C})=>{const R=e.createElement(Te.Z,{className:s.title,variant:"h1"},r);return C?e.createElement(T.ZP,{title:C,placement:"top-start"},R):R},Gi=({classes:r,subtitle:s})=>s?typeof s!="string"?e.createElement(e.Fragment,null,s):e.createElement(Te.Z,{className:r.subtitle,variant:"subtitle2",component:"span"},s):null;function Na(r){const{children:s,pageTitleOverride:C,style:R,subtitle:B,title:V,tooltip:Ee,type:Oe,typeLink:Xe}=r,ze=zi(),gt=(0,m.h_)(m.Ds).getOptionalString("app.title")||"Backstage",jt=C||V,Qt=V||C,dn=`${jt} | %s | ${gt}`,Wn=`${jt} | ${gt}`;return e.createElement(e.Fragment,null,e.createElement(zt.q,{titleTemplate:dn,defaultTitle:Wn}),e.createElement("header",{style:R,className:ze.header},e.createElement(Bt.Z,{className:ze.leftItemsBox},e.createElement(Vi,{classes:ze,type:Oe,typeLink:Xe,pageTitle:Qt}),e.createElement(Hi,{classes:ze,pageTitle:Qt,tooltip:Ee}),e.createElement(Gi,{classes:ze,subtitle:B})),e.createElement(ae.Z,{container:!0,className:ze.rightItemsBox,spacing:4},s)))}const Ji=(0,d.Z)(r=>({root:{textAlign:"left"},label:{color:r.palette.common.white,fontWeight:"bold",letterSpacing:0,fontSize:r.typography.fontSize,marginBottom:r.spacing(1)/2,lineHeight:1},value:{color:"rgba(255, 255, 255, 0.8)",fontSize:r.typography.fontSize,lineHeight:1}}),{name:"BackstageHeaderLabel"}),Yi=({value:r,className:s})=>e.createElement(Te.Z,{className:s},r);function ts(r){const{label:s,value:C,url:R}=r,B=Ji(),V=e.createElement(Yi,{className:B.value,value:C||"<Unknown>"});return e.createElement(ae.Z,{item:!0},e.createElement("span",{className:B.root},e.createElement(Te.Z,{className:B.label},s),R?e.createElement(Ct,{to:R},V):V))}const Xi={hour:"2-digit",minute:"2-digit"};function ns(r){const s=new Date,C=window.navigator.language,R=[];if(!r.has("homepage.clocks"))return R;const B=r.getConfigArray("homepage.clocks");for(const V of B)if(V.has("label")&&V.has("timezone")){let Ee=V.getString("label");const Oe={timeZone:V.getString("timezone"),...Xi};try{new Date().toLocaleString(C,Oe)}catch{console.warn(`The timezone ${Oe.timeZone} is invalid. Defaulting to GMT`),Oe.timeZone="GMT",Ee="GMT"}const Xe=s.toLocaleTimeString(C,Oe);R.push({time:Xe,label:Ee})}return R}function Bl(r){const s=useApi(configApiRef),C=[],[R,B]=React.useState(C);return React.useEffect(()=>{B(ns(s));const V=setInterval(()=>{B(ns(s))},1e3);return()=>{clearInterval(V)}},[s]),R.length!==0?React.createElement(React.Fragment,null,R.map(V=>React.createElement(ts,{label:V.label,value:V.time,key:V.label}))):null}const Qi=r=>(0,y.Z)({root:{color:r.palette.common.white,padding:r.spacing(2,2,3),backgroundImage:r.palette.bursts.gradient.linear,backgroundPosition:0,backgroundSize:"inherit"}}),qi=(0,d.Z)(Qi,{name:"BackstageItemCardHeader"});function rs(r){const{title:s,subtitle:C,children:R}=r,B=qi(r);return e.createElement("div",{className:B.root},C&&e.createElement(Te.Z,{variant:"subtitle2",component:"h3"},C),s&&e.createElement(Te.Z,{variant:"h6",component:"h4"},s),R)}function Ul(r){const{description:s,tags:C,title:R,type:B,subtitle:V,label:Ee,onClick:Oe,href:Xe}=r;return React.createElement(Card,null,React.createElement(CardMedia,null,React.createElement(rs,{title:R,subtitle:V||B})),React.createElement(CardContent,null,C!=null&&C.length?React.createElement(Box,null,C.map((ze,St)=>React.createElement(Chip,{size:"small",label:ze,key:St}))):null,s),React.createElement(CardActions,null,!Xe&&React.createElement(Xt,{to:"#",onClick:Oe,color:"primary"},Ee),Xe&&React.createElement(Xt,{to:Xe,color:"primary"},Ee)))}const el=r=>(0,y.Z)({root:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(22em, 1fr))",gridAutoRows:"1fr",gridGap:r.spacing(2)}}),tl=(0,d.Z)(el,{name:"BackstageItemCardGrid"});function nl(r){const{children:s,...C}=r,R=tl(C);return e.createElement("div",{className:R.root,...C},s)}const rl=(0,d.Z)(()=>({root:({isMobile:r})=>({display:"grid",gridTemplateAreas:"'pageHeader pageHeader pageHeader' 'pageSubheader pageSubheader pageSubheader' 'pageNav pageContent pageSidebar'",gridTemplateRows:"max-content auto 1fr",gridTemplateColumns:"auto 1fr auto",height:r?"100%":"100vh",overflowY:"auto"})}),{name:"BackstagePage"});function Wa(r){const{themeId:s,children:C}=r,{isMobile:R}=(0,e.useContext)(ya),B=rl({isMobile:R});return e.createElement(J.Z,{theme:V=>({...V,page:V.getPageTheme({themeId:s})})},e.createElement("div",{className:B.root},C))}function al(r){const{themeId:s,children:C,...R}=r;return e.createElement(Wa,{themeId:s},e.createElement(Na,{...R}),C)}const ol=ut.z.object({providerInfo:ut.z.object({}).catchall(ut.z.unknown()).optional(),profile:ut.z.object({email:ut.z.string().optional(),displayName:ut.z.string().optional(),picture:ut.z.string().optional()}),backstageIdentity:ut.z.object({token:ut.z.string(),identity:ut.z.object({type:ut.z.literal("user"),userEntityRef:ut.z.string(),ownershipEntityRefs:ut.z.array(ut.z.string())})})}),as={defaultTokenExpiryMillis:5*60*1e3,tokenExpiryMarginMillis:5*60*1e3};function sl(r){const s=new Date(Date.now()+as.defaultTokenExpiryMillis);if(!r)return s;const[C,R,B]=r.split("."),V=JSON.parse(atob(R));return typeof V.exp!="number"?s:new Date(V.exp*1e3-as.tokenExpiryMarginMillis)}class il{constructor(s){this.options=s,this.abortController=new AbortController,this.state={type:"empty"}}async start(){await this.getSessionAsync()}getUserId(){const{backstageIdentity:s}=this.getSessionSync(),C=s.identity.userEntityRef,R=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(C);if(!R)throw new TypeError(`Invalid user entity reference "${C}"`);return R[3]}async getIdToken(){return(await this.getSessionAsync()).backstageIdentity.token}getProfile(){return this.getSessionSync().profile}async getProfileInfo(){return(await this.getSessionAsync()).profile}async getBackstageIdentity(){return(await this.getSessionAsync()).backstageIdentity.identity}async getCredentials(){return{token:(await this.getSessionAsync()).backstageIdentity.token}}async signOut(){this.abortController.abort()}getSessionSync(){if(this.state.type==="active")return this.state.session;if(this.state.type==="fetching"&&this.state.previous)return this.state.previous;throw new Error("No session available. Try reloading your browser page.")}async getSessionAsync(){if(this.state.type==="fetching")return this.state.promise;if(this.state.type==="active"&&new Date<this.state.expiresAt)return this.state.session;const s=this.state.type==="active"?this.state.session:void 0,C=this.fetchSession().then(R=>(this.state={type:"active",session:R,expiresAt:sl(R.backstageIdentity.token)},R),R=>{throw this.state={type:"failed",error:R},R});return this.state={type:"fetching",promise:C,previous:s},C}async fetchSession(){const s=await this.options.discoveryApi.getBaseUrl("auth"),C=await fetch(`${s}/${this.options.provider}/refresh`,{signal:this.abortController.signal,headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"});if(!C.ok)throw await ResponseError.fromResponse(C);return ol.parse(await C.json())}}const Nl=r=>{const s=useApi(discoveryApiRef),[{status:C,error:R},{execute:B}]=useAsync(async()=>{const V=new il({provider:r.provider,discoveryApi:s});await V.start(),r.onSignInSuccess(V)});return useMountEffect(B),C==="loading"?React.createElement(ia,null):R?React.createElement(un,{title:"You do not appear to be signed in. Please try reloading the browser page.",error:R}):null};class mo{getUserId(){return"guest"}async getIdToken(){}getProfile(){return{email:"guest@example.com",displayName:"Guest"}}async getProfileInfo(){return{email:"guest@example.com",displayName:"Guest"}}async getBackstageIdentity(){const s="user:default/guest";return{type:"user",userEntityRef:s,ownershipEntityRefs:[s]}}async getCredentials(){return{}}async signOut(){}}function ll(r){const[s,C,R]=r.split(".");return JSON.parse(atob(C))}class fo{constructor(s){this.result=s}getUserId(){return this.result.userId}static fromResult(s){return new fo(s)}async getIdToken(){var s,C;return(C=(s=this.result).getIdToken)==null?void 0:C.call(s)}getProfile(){return this.result.profile}async getProfileInfo(){return this.result.profile}async getBackstageIdentity(){const s=await this.getIdToken();if(!s){const B=`user:default/${this.getUserId()}`;return{type:"user",userEntityRef:B,ownershipEntityRefs:[B]}}const{sub:C,ent:R}=ll(s);return{type:"user",userEntityRef:C,ownershipEntityRefs:R!=null?R:[]}}async getCredentials(){var s,C;return{token:await((C=(s=this.result).getIdToken)==null?void 0:C.call(s))}}async signOut(){var s,C;return(C=(s=this.result).signOut)==null?void 0:C.call(s)}}class ba{constructor(s,C,R){this.identity=s,this.authApi=C,this.profile=R}static createGuest(){return new mo}static fromLegacy(s){return fo.fromResult(s)}static create(s){return new ba(s.identity,s.authApi,s.profile)}getUserId(){const s=this.identity.userEntityRef,C=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(s);if(!C)throw new TypeError(`Invalid user entity reference "${s}"`);return C[3]}async getIdToken(){return(await this.authApi.getBackstageIdentity()).token}getProfile(){if(!this.profile)throw new Error("The identity API does not implement synchronous profile fetching, use getProfileInfo() instead");return this.profile}async getProfileInfo(){if(this.profilePromise)return await this.profilePromise;try{return this.profilePromise=this.authApi.getProfile(),await this.profilePromise}catch(s){throw this.profilePromise=void 0,s}}async getBackstageIdentity(){return this.identity}async getCredentials(){return{token:(await this.authApi.getBackstageIdentity()).token}}async signOut(){return this.authApi.signOut()}}const po=(0,d.Z)({container:{padding:0,listStyle:"none"},item:{display:"flex",flexDirection:"column",width:"100%",maxWidth:"400px",margin:0,padding:0}},{name:"BackstageSignInPage"}),Ka=({children:r})=>{const s=po();return e.createElement(ae.Z,{component:"li",item:!0,classes:s},r)},cl={Component:({config:r,onSignInSuccess:s})=>{const{apiRef:C,title:R,message:B}=r,V=(0,m.h_)(C),Ee=(0,m.h_)(m.VE),Oe=async()=>{try{const Xe=await V.getBackstageIdentity({instantPopup:!0});if(!Xe)throw new Error(`The ${R} provider is not configured to support sign-in`);const ze=await V.getProfile();s(ba.create({identity:Xe.identity,profile:ze,authApi:V}))}catch(Xe){Ee.post(new ln.SP("Login failed",Xe))}};return e.createElement(Ka,null,e.createElement(P,{variant:"fullHeight",title:R,actions:e.createElement(S.Z,{color:"primary",variant:"outlined",onClick:Oe},"Sign In")},e.createElement(Te.Z,{variant:"body1"},B)))},loader:async(r,s)=>{const C=r.get(s),R=await C.getBackstageIdentity({optional:!0});if(!R)return;const B=await C.getProfile();return ba.create({identity:R.identity,profile:B,authApi:C})}},ul={Component:({onSignInSuccess:r})=>e.createElement(Ka,null,e.createElement(P,{title:"Guest",variant:"fullHeight",actions:e.createElement(S.Z,{color:"primary",variant:"outlined",onClick:()=>r(new mo)},"Enter")},e.createElement(Te.Z,{variant:"body1"},"Enter as a Guest User.",e.createElement("br",null),"You will not have a verified identity,",e.createElement("br",null),"meaning some features might be unavailable."))),loader:async()=>new mo},dl=/^[a-z0-9_\-]+\.[a-z0-9_\-]+\.[a-z0-9_\-]+$/i,ml=(0,d.Z)(r=>({form:{display:"flex",flexFlow:"column nowrap"},button:{alignSelf:"center",marginTop:r.spacing(2)}}),{name:"BackstageCustomProvider"}),os=r=>{const{ref:s,...C}=r;return{inputRef:s,...C}},fl={Component:({onSignInSuccess:r})=>{const s=ml(),{register:C,handleSubmit:R,formState:B}=(0,yt.cI)({mode:"onChange"}),{errors:V}=B,Ee=({userId:Oe})=>{r(ba.fromLegacy({userId:Oe,profile:{email:`${Oe}@example.com`}}))};return e.createElement(Ka,null,e.createElement(P,{title:"Custom User",variant:"fullHeight"},e.createElement(Te.Z,{variant:"body1"},"Enter your own User ID and credentials.",e.createElement("br",null),"This selection will not be stored."),e.createElement("form",{className:s.form,onSubmit:R(Ee)},e.createElement(An.Z,null,e.createElement(we.Z,{...os(C("userId",{required:!0})),label:"User ID",margin:"normal",error:Boolean(V.userId)}),V.userId&&e.createElement(Vt.Z,{error:!0},V.userId.message)),e.createElement(An.Z,null,e.createElement(we.Z,{...os(C("idToken",{required:!1,validate:Oe=>!Oe||dl.test(Oe)||"Token is not a valid OpenID Connect JWT Token"})),label:"ID Token (optional)",margin:"normal",autoComplete:"off",error:Boolean(V.idToken)}),V.idToken&&e.createElement(Vt.Z,{error:!0},V.idToken.message)),e.createElement(S.Z,{type:"submit",color:"primary",variant:"outlined",className:s.button,disabled:!(B!=null&&B.isDirty)||!On()(V)},"Continue"))))},loader:async()=>{}};class ho{constructor(s){this.config=s}static from(s){return new ho(s)}getUserId(){if(!this.config.identityApi.getUserId)throw new Error("SignOutProxy IdentityApi.getUserId is not implemented");return this.config.identityApi.getUserId()}getIdToken(){if(!this.config.identityApi.getIdToken)throw new Error("SignOutProxy IdentityApi.getIdToken is not implemented");return this.config.identityApi.getIdToken()}getProfile(){if(!this.config.identityApi.getProfile)throw new Error("SignOutProxy IdentityApi.getProfile is not implemented");return this.config.identityApi.getProfile()}getProfileInfo(){return this.config.identityApi.getProfileInfo()}getBackstageIdentity(){return this.config.identityApi.getBackstageIdentity()}getCredentials(){return this.config.identityApi.getCredentials()}signOut(){return this.config.signOut()}}const Fa="@backstage/core:SignInPage:provider",ss={guest:ul,custom:fl,common:cl};function is(r,s){if(r in s)throw new Error(`"${r}" ID is duplicated. IDs of identity providers have to be unique.`)}function pl(r){return r.reduce((C,R)=>{if(typeof R=="string")return is(R,C),C[R]={components:ss[R],id:R},C;const{id:B}=R;return is(B,C),C[B]={components:ss.common,id:B,config:R},C},{})}const hl=(r,s)=>{const C=useApi(errorApiRef),R=useApiHolder(),[B,V]=useState(!0),Ee=useCallback(Xe=>{s(ho.from({identityApi:Xe,signOut:async()=>{var ze;localStorage.removeItem(Fa),await((ze=Xe.signOut)==null?void 0:ze.call(Xe))}}))},[s]);useLayoutEffect(()=>{var Xe;if(!B)return;const ze=localStorage.getItem(Fa);if(ze===null){V(!1);return}const St=r[ze];if(!St){V(!1);return}let gt=!1;return St.components.loader(R,(Xe=St.config)==null?void 0:Xe.apiRef).then(jt=>{gt||(jt?Ee(jt):V(!1))}).catch(jt=>{gt||(localStorage.removeItem(Fa),C.post(jt),V(!1))}),()=>{gt=!0}},[B,C,s,R,r,Ee]);const Oe=useMemo(()=>Object.keys(r).map(Xe=>{const ze=r[Xe],{Component:St}=ze.components,gt=jt=>{localStorage.setItem(Fa,ze.id),Ee(jt)};return React.createElement(St,{key:ze.id,config:ze.config,onSignInSuccess:gt})}),[r,Ee]);return[B,Oe]},gl=({onSignInSuccess:r,providers:s=[],title:C,align:R="left"})=>{const B=useApi(configApiRef),V=po(),Ee=pl(s),[Oe,Xe]=hl(Ee,r);return Oe?React.createElement(ia,null):React.createElement(Wa,{themeId:"home"},React.createElement(Na,{title:B.getString("app.title")}),React.createElement(Ua,null,C&&React.createElement(qo,{title:C,textAlign:R}),React.createElement(Grid,{container:!0,justifyContent:R==="center"?R:"flex-start",spacing:2,component:"ul",classes:V},Xe)))},El=({provider:r,auto:s,onSignInSuccess:C})=>{const R=po(),B=useApi(r.apiRef),V=useApi(configApiRef),[Ee,Oe]=useState(),[Xe,ze]=useState(!1),St=async({checkExisting:gt,showPopup:jt})=>{try{let Qt;if(gt&&(Qt=await B.getBackstageIdentity({optional:!0})),!Qt&&(jt||s)&&(ze(!0),Qt=await B.getBackstageIdentity({instantPopup:!0}),!Qt))throw new Error(`The ${r.title} provider is not configured to support sign-in`);if(!Qt){ze(!0);return}const dn=await B.getProfile();C(ba.create({identity:Qt.identity,authApi:B,profile:dn}))}catch(Qt){Oe(Qt),ze(!0)}};return useMountEffect(()=>St({checkExisting:!0})),Xe?React.createElement(Wa,{themeId:"home"},React.createElement(Na,{title:V.getString("app.title")}),React.createElement(Ua,null,React.createElement(Grid,{container:!0,justifyContent:"center",spacing:2,component:"ul",classes:R},React.createElement(Ka,null,React.createElement(P,{variant:"fullHeight",title:r.title,actions:React.createElement(Button$1,{color:"primary",variant:"outlined",onClick:()=>{St({showPopup:!0})}},"Sign In")},React.createElement(Typography,{variant:"body1"},r.message),Ee&&Ee.name!=="PopupRejectedError"&&React.createElement(Typography,{variant:"body1",color:"error"},Ee.message)))))):React.createElement(ia,null)};function Hl(r){return"provider"in r?React.createElement(El,{...r}):React.createElement(gl,{...r})}const vl=(0,d.Z)(r=>({root:{padding:r.spacing(0,2,0,2.5),minHeight:r.spacing(3)},indicator:{backgroundColor:r.palette.info.main,height:r.spacing(.3)}}),{name:"BackstageTabbedCard"}),yl=(0,L.Z)(r=>({root:{padding:r.spacing(2,2,2,2.5),display:"inline-block"},title:{fontWeight:700},subheader:{paddingTop:r.spacing(1)}}),{name:"BackstageTabbedCardBoldHeader"})(tn.Z);function bl(r){const{slackChannel:s,errorBoundaryProps:C,children:R,title:B,deepLink:V,value:Ee,onChange:Oe}=r,Xe=vl(),[ze,St]=(0,e.useState)(0),gt=Oe||((dn,Wn)=>St(Wn));let jt;Ee?e.Children.map(R,dn=>{e.isValidElement(dn)&&(dn==null?void 0:dn.props.value)===Ee&&(jt=dn==null?void 0:dn.props.children)}):e.Children.map(R,(dn,Wn)=>{e.isValidElement(dn)&&Wn===ze&&(jt=dn==null?void 0:dn.props.children)});const Qt=C||(s?{slackChannel:s}:{});return e.createElement(Me.Z,null,e.createElement(eo,{...Qt},B&&e.createElement(yl,{title:B}),e.createElement(Be.Z,{selectionFollowsFocus:!0,classes:Xe,value:Ee||ze,onChange:gt},R),e.createElement(gn.Z,null),e.createElement(_t.Z,null,jt),V&&e.createElement(Ea,{...V})))}const Cl=(0,d.Z)(r=>({root:{minWidth:r.spacing(6),minHeight:r.spacing(3),margin:r.spacing(0,2,0,0),padding:r.spacing(.5,0,.5,0),textTransform:"none","&:hover":{opacity:1,backgroundColor:"transparent",color:r.palette.text.primary}},selected:{fontWeight:"bold"}}),{name:"BackstageCardTab"});function Pl(r){const{children:s,...C}=r,R=Cl();return e.createElement(Ke.Z,{disableRipple:!0,classes:R,...C})}},30705:function(Lt,c,t){t.d(c,{$4:function(){return $t},$v:function(){return i},CL:function(){return it},CO:function(){return on},D:function(){return g},Ds:function(){return Ce},E6:function(){return pn},F4:function(){return J},IY:function(){return H},I_:function(){return u},Kp:function(){return $},NT:function(){return Te},NW:function(){return $e},Oi:function(){return Zt},P4:function(){return en},R5:function(){return A},Rz:function(){return Le},T0:function(){return h},VE:function(){return Qe},W0:function(){return lt},ZM:function(){return Ot},bq:function(){return D},fC:function(){return m},gP:function(){return qe},gW:function(){return I},h_:function(){return v},hg:function(){return W},ni:function(){return M},p_:function(){return E},qD:function(){return w},rx:function(){return Ze},sM:function(){return L},tg:function(){return at},uB:function(){return T},ux:function(){return S},vJ:function(){return ce},v_:function(){return O},x8:function(){return xe},z$:function(){return Re}});var e=t(18473),n=t(2784),p=t(10289);const a=(0,e.CT)("analytics-context"),o=()=>{const ie=(0,n.useContext)(a);if(ie===void 0)return{routeRef:"unknown",pluginId:"root",extension:"App"};const de=ie.atVersion(1);if(de===void 0)throw new Error("No context found for version 1.");return de},m=ie=>{const{attributes:de,children:ve}=ie,nt={...o(),...de},bt=(0,e.EI)({1:nt});return n.createElement(a.Provider,{value:bt},ve)};function u(){const ie=(0,e.Vt)("api-context");if(!ie)throw new Error("API context is not available");const de=ie.atVersion(1);if(!de)throw new Error("ApiContext v1 not available");return de}function v(ie){const ve=u().get(ie);if(!ve)throw new Error(`No implementation available for ${ie}`);return ve}function d(ie){return function(ve){const ge=bt=>{const kt=u(),ln={};for(const Ut in ie)if(ie.hasOwnProperty(Ut)){const Mt=ie[Ut],Gt=kt.get(Mt);if(!Gt)throw new Error(`No implementation available for ${Mt}`);ln[Ut]=Gt}return React.createElement(ve,{...bt,...ln})},nt=ve.displayName||ve.name||"Component";return ge.displayName=`withApis(${nt})`,ge}}class y{constructor(de){if(this.config=de,!de.id.split(".").flatMap(ge=>ge.split("-")).every(ge=>ge.match(/^[a-z][a-z0-9]*$/)))throw new Error(`API id must only contain period separated lowercase alphanum tokens with dashes, got '${de.id}'`)}get id(){return this.config.id}get T(){throw new Error(`tried to read ApiRef.T of ${this}`)}toString(){return`apiRef{${this.config.id}}`}}function h(ie){return new y(ie)}function M(ie,de){return"id"in ie?{api:ie,deps:{},factory:()=>de}:ie}var L=(ie=>(ie.SignedIn="SignedIn",ie.SignedOut="SignedOut",ie))(L||{});const $=h({id:"core.auth.google"}),J=h({id:"core.auth.github"}),g=h({id:"core.auth.okta"}),S=h({id:"core.auth.gitlab"}),E=h({id:"core.auth.microsoft"}),I=h({id:"core.auth.onelogin"}),D=h({id:"core.auth.bitbucket"}),T=h({id:"core.auth.atlassian"}),i=h({id:"core.alert"}),O=h({id:"core.analytics"}),W=h({id:"core.apptheme"}),Ce=h({id:"core.config"}),$e=h({id:"core.discovery"}),Qe=h({id:"core.error"});var it=(ie=>(ie[ie.None=0]="None",ie[ie.Active=1]="Active",ie))(it||{});const lt=h({id:"core.featureflags"}),qe=h({id:"core.fetch"}),$t=h({id:"core.identity"}),Ot=h({id:"core.oauthrequest"}),pn=h({id:"core.storage"});class _n{constructor(de,ve={routeRef:"unknown",pluginId:"root",extension:"App"}){this.analyticsApi=de,this.context=ve}setContext(de){this.context=de}captureEvent(de,ve,{value:ge,attributes:nt}={}){try{this.analyticsApi.captureEvent({action:de,subject:ve,value:ge,attributes:nt,context:this.context})}catch(bt){console.warn("Error during analytics event capture. %o",bt)}}}function U(){try{return v(O)}catch{return{captureEvent:()=>{}}}}function Re(){const ie=(0,n.useRef)(null),de=o(),ve=U();function ge(){return ie.current===null&&(ie.current=new _n(ve)),ie.current}const nt=ge();return nt.setContext(de),nt}const w=()=>{const ie=(0,e.Vt)("app-context");if(!ie)throw new Error("App context is not available");const de=ie.atVersion(1);if(!de)throw new Error("AppContext v1 not available");return de},Ie=(0,e.uW)("component-data-store",()=>new WeakMap),fe="__backstage_data";function A(ie,de,ve){var ge;const nt=ie;let bt=(ge=nt[fe])!=null?ge:Ie.get(ie);if(bt||(bt={map:new Map},Object.defineProperty(nt,fe,{enumerable:!1,configurable:!0,writable:!1,value:bt}),Ie.set(ie,bt)),bt.map.has(de)){const kt=ie.displayName||ie.name;throw new Error(`Attempted to attach duplicate data "${de}" to component "${kt}"`)}bt.map.set(de,ve)}function H(ie,de){var ve;if(!ie)return;const ge=ie.type;if(!ge)return;const nt=(ve=ge[fe])!=null?ve:Ie.get(ge);if(!!nt)return nt.map.get(de)}const re=(0,e.uW)("route-ref-type",()=>Symbol("route-ref-type"));var Pe;class ae{constructor(de,ve){this.id=de,this.params=ve,this[Pe]="absolute"}get title(){return this.id}toString(){return`routeRef{type=absolute,id=${this.id}}`}}Pe=re;function Te(ie){var de;return new ae(ie.id,(de=ie.params)!=null?de:[])}var Et;const te=/^\w+$/;class ee{constructor(de,ve,ge,nt){this.id=de,this.path=ve,this.parent=ge,this.params=nt,this[Et]="sub"}toString(){return`routeRef{type=sub,id=${this.id}}`}}Et=re;function Le(ie){const{id:de,path:ve,parent:ge}=ie,nt=ve.split("/").filter(ln=>ln.startsWith(":")).map(ln=>ln.substring(1)),bt=[...ge.params,...nt];if(ge.params.some(ln=>nt.includes(ln)))throw new Error("SubRouteRef may not have params that overlap with its parent");if(!ve.startsWith("/"))throw new Error(`SubRouteRef path must start with '/', got '${ve}'`);if(ve.endsWith("/"))throw new Error(`SubRouteRef path must not end with '/', got '${ve}'`);for(const ln of nt)if(!te.test(ln))throw new Error(`SubRouteRef path has invalid param, got '${ln}'`);return new ee(de,ve,ge,bt)}var le;class Q{constructor(de,ve,ge){this.id=de,this.params=ve,this.optional=ge,this[le]="external"}toString(){return`routeRef{type=external,id=${this.id}}`}}le=re;function xe(ie){var de;return new Q(ie.id,(de=ie.params)!=null?de:[],Boolean(ie.optional))}function at(ie){const de=(0,p.TH)(),ve=(0,e.Vt)("routing-context");if(!ve)throw new Error("Routing context is not available");const ge=ve.atVersion(1),nt=(0,n.useMemo)(()=>ge&&ge.resolve(ie,de),[ge,ie,de]);if(!ve)throw new Error("useRouteRef used outside of routing context");if(!ge)throw new Error("RoutingContext v1 not available");const bt="optional"in ie&&ie.optional;if(!nt&&!bt)throw new Error(`No path for ${ie}`);return nt}function Zt(ie){return(0,p.UO)()}class Dt extends n.Component{constructor(){super(...arguments),this.state={error:void 0},this.handleErrorReset=()=>{this.setState({error:void 0})}}static getDerivedStateFromError(de){return{error:de}}render(){const{error:de}=this.state,{app:ve,plugin:ge}=this.props,{ErrorBoundaryFallback:nt}=ve.getComponents();return de?n.createElement(nt,{error:de,resetError:this.handleErrorReset,plugin:ge}):this.props.children}}function en(ie){const{component:de,mountPoint:ve,name:ge}=ie;return gn({component:{lazy:()=>de().then(nt=>{const bt=ln=>{try{at(ve)}catch(Ut){if(typeof Ut=="object"&&Ut!==null){const{message:Mt}=Ut;if(typeof Mt=="string"&&Mt.startsWith("No path for "))throw new Error(`Routable extension component with mount point ${ve} was not discovered in the app element tree. Routable extension components may not be rendered by other components and must be directly available as an element within the App provider component.`)}throw Ut}return n.createElement(nt,{...ln})},kt=ge||nt.displayName||nt.name||"LazyComponent";return bt.displayName=`RoutableExtension(${kt})`,bt},nt=>kt=>{const ln=w(),{BootErrorPage:Ut}=ln.getComponents();return n.createElement(Ut,{step:"load-chunk",error:nt})})},data:{"core.mountPoint":ve},name:ge})}function on(ie){const{component:de,name:ve}=ie;return gn({component:de,name:ve})}function gn(ie){const{data:de={},name:ve}=ie;ve||console.warn("Declaring extensions without name is DEPRECATED. Make sure that all usages of createReactExtension, createComponentExtension and createRoutableExtension provide a name.");let ge;if("lazy"in ie.component){const bt=ie.component.lazy;ge=(0,n.lazy)(()=>bt().then(kt=>({default:kt})))}else ge=ie.component.sync;const nt=ve||ge.displayName||ge.name||"Component";return{expose(bt){const kt=ln=>{const Ut=w(),{Progress:Mt}=Ut.getComponents(),Gt=de==null?void 0:de["core.mountPoint"];return n.createElement(n.Suspense,{fallback:n.createElement(Mt,null)},n.createElement(Dt,{app:Ut,plugin:bt},n.createElement(m,{attributes:{pluginId:bt.getId(),...ve&&{extension:ve},...Gt&&{routeRef:Gt.id}}},n.createElement(ge,{...ln}))))};A(kt,"core.plugin",bt);for(const[ln,Ut]of Object.entries(de))A(kt,ln,Ut);return kt.displayName=`Extension(${nt})`,kt}}}function Ye(ie,de,ve,ge){return n.Children.toArray(ie).flatMap(nt=>{if(!(0,n.isValidElement)(nt))return[];if(nt.type===n.Fragment)return Ye(nt.props.children,de,ve,ge);if(H(nt,"core.featureFlagged")){const bt=nt.props;return("with"in bt?de.isActive(bt.with):!de.isActive(bt.without))?Ye(nt.props.children,de,ve,ge):[]}if(ve===void 0||ve(nt))return[nt];if(ge)throw new Error(ge);return Ye(nt.props.children,de,ve,ge)})}class Y{constructor(de,ve){this.node=de,this.featureFlagsApi=ve}selectByComponentData(de){const ve=Ye(this.node,this.featureFlagsApi,ge=>H(ge,de.key)!==void 0,de.withStrictError);return new Y(ve,this.featureFlagsApi)}findComponentData(de){return Ye(this.node,this.featureFlagsApi,ge=>H(ge,de.key)!==void 0).map(ge=>H(ge,de.key)).filter(ge=>ge!==void 0)}getElements(){return Ye(this.node,this.featureFlagsApi)}}function ce(ie,de,ve=[]){const ge=v(lt),nt=new Y(ie,ge);return(0,n.useMemo)(()=>de(nt),[ie,...ve])}class _e{constructor(de){this.config=de}getId(){return this.config.id}getApis(){var de;return(de=this.config.apis)!=null?de:[]}getFeatureFlags(){var de,ve;return(ve=(de=this.config.featureFlags)==null?void 0:de.slice())!=null?ve:[]}get routes(){var de;return(de=this.config.routes)!=null?de:{}}get externalRoutes(){var de;return(de=this.config.externalRoutes)!=null?de:{}}provide(de){return de.expose(this)}toString(){return`plugin{${this.config.id}}`}}function Ze(ie){return new _e(ie)}},32272:function(Lt,c,t){t.d(c,{BD:function(){return a},SP:function(){return g},VL:function(){return S},VZ:function(){return p},dR:function(){return L}});var e=t(24852),n=t.n(e);function p(E){if(typeof E!="object"||E===null||Array.isArray(E))return!1;const I=E;return!(typeof I.name!="string"||I.name===""||typeof I.message!="string")}function a(E){if(typeof E!="object"||E===null||Array.isArray(E))throw new Error(`Encountered invalid error, not an object, got '${E}'`);const I=E;if(typeof I.name!="string"||I.name==="")throw new Error(`Encountered error object without a name, got '${E}'`);if(typeof I.message!="string")throw new Error(`Encountered error object without a message, got '${E}'`)}function o(E,I){const D=serializeError$1(E),T={name:"Unknown",message:"<no reason given>",...D};return I!=null&&I.includeStack||delete T.stack,T}function m(E){const I=(0,e.deserializeError)(E);return E.stack||(I.stack=void 0),I}function u(E){if(p(E)){const I=String(E);return I!=="[object Object]"?I:`${E.name}: ${E.message}`}return`unknown error '${E}'`}async function v(E){var I;try{const D=await E.text();if(D){if((I=E.headers.get("content-type"))!=null&&I.startsWith("application/json"))try{const T=JSON.parse(D);if(T.error&&T.response)return T}catch{}return{error:{name:"Error",message:`Request failed with status ${E.status} ${E.statusText}, ${D}`},response:{statusCode:E.status}}}}catch{}return{error:{name:"Error",message:`Request failed with status ${E.status} ${E.statusText}`},response:{statusCode:E.status}}}class d extends Error{constructor(I,D){var T;let i=I;if(D!==void 0){const O=u(D);i?i+=`; caused by ${O}`:i=`caused by ${O}`}super(i),(T=Error.captureStackTrace)==null||T.call(Error,this,this.constructor),this.name=this.constructor.name,this.cause=p(D)?D:void 0}}class y extends null{}class h extends null{}class M extends null{}class L extends d{}class $ extends null{}class J extends null{}class g extends d{constructor(I,D){super(I,D),this.name=p(D)?D.name:"Error"}}class S extends Error{static async fromResponse(I){const D=await v(I),T=D.response.statusCode||I.status,i=D.error.name||I.statusText,O=`Request failed with ${T} ${i}`,W=m(D.error);return new S({message:O,response:I,data:D,cause:W})}constructor(I){super(I.message),this.name="ResponseError",this.response=I.response,this.body=I.data,this.cause=I.cause}}},49462:function(Lt,c,t){t.d(c,{Om:function(){return o},ae:function(){return E},nW:function(){return D},q3:function(){return I},zN:function(){return S}});var e=t(30705),n=t(1854),p=t(73250),a=t(2784);const o=(0,e.T0)({id:"core.scmauth"});var m=(T,i,O)=>{if(!i.has(T))throw TypeError("Cannot "+O)},u=(T,i,O)=>(m(T,i,"read from private field"),O?O.call(T):i.get(T)),v=(T,i,O)=>{if(i.has(T))throw TypeError("Cannot add the same private member more than once");i instanceof WeakSet?i.add(T):i.set(T,O)},d=(T,i,O,W)=>(m(T,i,"write to private field"),W?W.call(T,O):i.set(T,O),O),y,h,M,L,$;class J{constructor(i){v(this,y,void 0),d(this,y,i)}async getCredentials(i){const O=new URL(i.url),W=u(this,y).find(Ce=>Ce.isUrlSupported(O));if(!W)throw new Error(`No auth provider available for '${i.url}', see https://backstage.io/link?scm-auth`);return W.getCredentials(i)}}y=new WeakMap;const g=class{constructor(T,i,O,W){v(this,h,void 0),v(this,M,void 0),v(this,L,void 0),v(this,$,void 0),d(this,h,i),d(this,M,O),d(this,L,W),d(this,$,T)}static createDefaultApiFactory(){return(0,e.ni)({api:o,deps:{github:e.F4,gitlab:e.ux,azure:e.p_,bitbucket:e.bq},factory:({github:T,gitlab:i,azure:O,bitbucket:W})=>g.merge(g.forGithub(T),g.forGitlab(i),g.forAzure(O),g.forBitbucket(W))})}static forAuthApi(T,i){return new g("generic",T,i.host,i.scopeMapping)}static forGithub(T,i){var O;const W=(O=i==null?void 0:i.host)!=null?O:"github.com";return new g("github",T,W,{default:["repo","read:org","read:user"],repoWrite:["gist"]})}static forGitlab(T,i){var O;const W=(O=i==null?void 0:i.host)!=null?O:"gitlab.com";return new g("gitlab",T,W,{default:["read_user","read_api","read_repository"],repoWrite:["write_repository","api"]})}static forAzure(T,i){var O;const W=(O=i==null?void 0:i.host)!=null?O:"dev.azure.com";return new g("azure",T,W,{default:["vso.build","vso.code","vso.graph","vso.project","vso.profile"],repoWrite:["vso.code_manage"]})}static forBitbucket(T,i){var O;const W=(O=i==null?void 0:i.host)!=null?O:"bitbucket.org";return new g("bitbucket",T,W,{default:["account","team","pullrequest","snippet","issue"],repoWrite:["pullrequest:write","snippet:write","issue:write"]})}static merge(...T){return new J(T)}isUrlSupported(T){return T.host===u(this,M)}getAdditionalScopesForProvider(T){var i,O;return!(T!=null&&T.customScopes)||u(this,$)==="generic"?[]:(O=(i=T.customScopes)==null?void 0:i[u(this,$)])!=null?O:[]}async getCredentials(T){const{url:i,additionalScope:O,...W}=T,Ce=u(this,L).default.slice();O!=null&&O.repoWrite&&Ce.push(...u(this,L).repoWrite);const $e=this.getAdditionalScopesForProvider(O);$e.length&&Ce.push(...$e);const Qe=[...new Set(Ce)],it=await u(this,h).getAccessToken(Qe,W);return{token:it,headers:{Authorization:`Bearer ${it}`}}}};let S=g;h=new WeakMap,M=new WeakMap,L=new WeakMap,$=new WeakMap;class E{static fromConfig(i){return n.Lx.fromConfig(i)}}const I=(0,e.T0)({id:"integration.scmintegrations"}),D=T=>{var i;const{type:O}=T,W=(0,e.qD)(),Ce=p.Z,$e=O&&(i=W.getSystemIcon(O))!=null?i:Ce;return a.createElement($e,null)}},1854:function(Lt,c,t){t.d(c,{E8:function(){return _e},Lx:function(){return xt},Pb:function(){return bn}});var e=t(82717),n=t.n(e),p=t(76635),a=t.n(p),o=t(96279),m=t.n(o),u=t(54733),v=t(89393),d=t(96299),y=t(48834).Buffer;function h(N){const F=new URL("http://example.com");return F.host=N,F.host===N}function M(N){try{return new URL(N),!0}catch{return!1}}function L(N,F){return{list(){return N},byUrl(q){try{const ye=typeof q=="string"?new URL(q):q;return N.find(Se=>F(Se)===ye.host)}catch{return}},byHost(q){return N.find(ye=>F(ye)===q)}}}function $(N){const{url:F,base:q,lineNumber:ye}=N;try{return new URL(F),F}catch{}let Se;if(F.startsWith("/")){const{filepath:vt}=n()(q);Se=new URL(q);const Rt=(0,p.trimEnd)(Se.pathname.substring(0,Se.pathname.length-vt.length),"/");Se.pathname=`${Rt}${F}`}else Se=new URL(F,q);return Se.search=new URL(q).search,ye&&(Se.hash=`L${ye}`),Se.toString()}var J=(N,F,q)=>{if(!F.has(N))throw TypeError("Cannot "+q)},g=(N,F,q)=>(J(N,F,"read from private field"),q?q.call(N):F.get(N)),S=(N,F,q)=>{if(F.has(N))throw TypeError("Cannot add the same private member more than once");F instanceof WeakSet?F.add(N):F.set(N,q)},E=(N,F,q,ye)=>(J(N,F,"write to private field"),ye?ye.call(N,q):F.set(N,q),q),I,D,T,i,O,W,Ce;const $e="GB",Qe=class{constructor(N,F,q,ye,Se,vt){S(this,I,void 0),S(this,D,void 0),S(this,T,void 0),S(this,i,void 0),S(this,O,void 0),S(this,W,void 0),S(this,Ce,(...Rt)=>{const Nt=new URL(g(this,I));return Nt.pathname=Rt.map(zt=>encodeURIComponent(zt)).join("/"),Nt}),E(this,I,N),E(this,D,F),E(this,T,q),E(this,i,ye),E(this,O,Se),E(this,W,vt)}static fromRepoUrl(N){var F;const q=new URL(N);let ye,Se,vt;const Rt=q.pathname.split("/").map(zn=>decodeURIComponent(zn));if(Rt[2]==="_git"?(ye=Rt[1],Se=vt=Rt[3]):Rt[3]==="_git"&&(ye=Rt[1],Se=Rt[2],vt=Rt[4]),!ye||!Se||!vt)throw new Error("Azure URL must point to a git repository");const Nt=(F=q.searchParams.get("path"))!=null?F:void 0;let zt;const xn=q.searchParams.get("version");if(xn){if(xn.slice(0,2)!=="GB")throw new Error("Azure URL version must point to a git branch");zt=xn.slice(2)}return new Qe(q.origin,ye,Se,vt,Nt,zt)}toRepoUrl(){let N;return g(this,T)===g(this,i)?N=g(this,Ce).call(this,g(this,D),"_git",g(this,i)):N=g(this,Ce).call(this,g(this,D),g(this,T),"_git",g(this,i)),g(this,O)&&N.searchParams.set("path",g(this,O)),g(this,W)&&N.searchParams.set("version",$e+g(this,W)),N.toString()}toFileUrl(){if(!g(this,O))throw new Error("Azure URL must point to a specific path to be able to download a file");const N=g(this,Ce).call(this,g(this,D),g(this,T),"_apis","git","repositories",g(this,i),"items");return N.searchParams.set("api-version","6.0"),N.searchParams.set("path",g(this,O)),g(this,W)&&N.searchParams.set("version",g(this,W)),N.toString()}toArchiveUrl(){const N=g(this,Ce).call(this,g(this,D),g(this,T),"_apis","git","repositories",g(this,i),"items");return N.searchParams.set("recursionLevel","full"),N.searchParams.set("download","true"),N.searchParams.set("api-version","6.0"),g(this,O)&&N.searchParams.set("scopePath",g(this,O)),g(this,W)&&N.searchParams.set("version",g(this,W)),N.toString()}toCommitsUrl(){const N=g(this,Ce).call(this,g(this,D),g(this,T),"_apis","git","repositories",g(this,i),"commits");return N.searchParams.set("api-version","6.0"),g(this,W)&&N.searchParams.set("searchCriteria.itemVersion.version",g(this,W)),N.toString()}getOwner(){return g(this,D)}getProject(){return g(this,T)}getRepo(){return g(this,i)}getPath(){return g(this,O)}getRef(){return g(this,W)}};let it=Qe;I=new WeakMap,D=new WeakMap,T=new WeakMap,i=new WeakMap,O=new WeakMap,W=new WeakMap,Ce=new WeakMap;const lt="dev.azure.com";function qe(N){var F;const q=(F=N.getOptionalString("host"))!=null?F:lt,ye=N.getOptionalString("token");if(!h(q))throw new Error(`Invalid Azure integration config, '${q}' is not a valid host`);return{host:q,token:ye}}function $t(N){const F=N.map(qe);return F.some(q=>q.host===lt)||F.push({host:lt}),F}const Ot=class{constructor(N){this.integrationConfig=N}get type(){return"azure"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(N){var F;const{url:q,base:ye}=N;if(M(q))return q;try{const Se=it.fromRepoUrl(ye),vt=new URL(ye),Rt=new URL(`https://a.com${(F=Se.getPath())!=null?F:""}`),Nt=new URL(q,Rt).pathname;return vt.searchParams.set("path",Nt),N.lineNumber&&(vt.searchParams.set("line",String(N.lineNumber)),vt.searchParams.set("lineEnd",String(N.lineNumber+1)),vt.searchParams.set("lineStartColumn","1"),vt.searchParams.set("lineEndColumn","1")),vt.toString()}catch{return new URL(q,ye).toString()}}resolveEditUrl(N){return N}};let pn=Ot;pn.factory=({config:N})=>{var F;const q=$t((F=N.getOptionalConfigArray("integrations.azure"))!=null?F:[]);return L(q.map(ye=>new Ot(ye)),ye=>ye.config.host)};function _n(N){return it.fromRepoUrl(N).toFileUrl()}function U(N){return it.fromRepoUrl(N).toArchiveUrl()}function Re(N){return it.fromRepoUrl(N).toCommitsUrl()}function w(N,F){const q=F?{...F}:{};if(N.token){const ye=y.from(`:${N.token}`,"utf8");q.Authorization=`Basic ${ye.toString("base64")}`}return{headers:q}}const Ie="bitbucket.org",fe="https://api.bitbucket.org/2.0";function A(N){var F;const q=(F=N.getOptionalString("host"))!=null?F:Ie;let ye=N.getOptionalString("apiBaseUrl");const Se=N.getOptionalString("token"),vt=N.getOptionalString("username"),Rt=N.getOptionalString("appPassword");if(!h(q))throw new Error(`Invalid Bitbucket integration config, '${q}' is not a valid host`);return ye?ye=(0,p.trimEnd)(ye,"/"):q===Ie?ye=fe:ye=`https://${q}/rest/api/1.0`,{host:q,apiBaseUrl:ye,token:Se,username:vt,appPassword:Rt}}function H(N){const F=N.map(A);return F.some(q=>q.host===Ie)||F.push({host:Ie,apiBaseUrl:fe}),F}const re=class{constructor(N){this.integrationConfig=N}get type(){return"bitbucket"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(N){const F=$(N);if(!N.lineNumber)return F;const q=new URL(F);return this.integrationConfig.host==="bitbucket.org"?q.hash=`lines-${N.lineNumber}`:q.hash=`${N.lineNumber}`,q.toString()}resolveEditUrl(N){const F=n()(N),q=new URL(N);return q.searchParams.set("mode","edit"),q.searchParams.set("spa","0"),q.searchParams.set("at",F.ref),q.toString()}};let Pe=re;Pe.factory=({config:N})=>{var F;const q=H((F=N.getOptionalConfigArray("integrations.bitbucket"))!=null?F:[]);return L(q.map(ye=>new re(ye)),ye=>ye.config.host)};async function ae(N,F){const{name:q,owner:ye,resource:Se}=parseGitUrl(N),vt=Se==="bitbucket.org";let Rt=vt?`${F.apiBaseUrl}/repositories/${ye}/${q}`:`${F.apiBaseUrl}/projects/${ye}/repos/${q}/default-branch`,Nt=await fetch(Rt,te(F));if(Nt.status===404&&!vt&&(Rt=`${F.apiBaseUrl}/projects/${ye}/repos/${q}/branches/default`,Nt=await fetch(Rt,te(F))),!Nt.ok){const xn=`Failed to retrieve default branch from ${Rt}, ${Nt.status} ${Nt.statusText}`;throw new Error(xn)}let zt;if(vt)zt=(await Nt.json()).mainbranch.name;else{const{displayId:xn}=await Nt.json();zt=xn}if(!zt)throw new Error(`Failed to read default branch from ${Rt}. Response ${Nt.status} ${Nt.json()}`);return zt}async function Te(N,F){const{name:q,owner:ye,ref:Se,protocol:vt,resource:Rt,filepath:Nt}=parseGitUrl(N),zt=Rt==="bitbucket.org";let xn=Se;xn||(xn=await ae(N,F));const zn=Nt?`&path=${encodeURIComponent(Nt)}`:"";return zt?`${vt}://${Rt}/${ye}/${q}/get/${xn}.tar.gz`:`${F.apiBaseUrl}/projects/${ye}/repos/${q}/archive?format=tgz&at=${xn}&prefix=${ye}-${q}${zn}`}function Et(N,F){try{const{owner:q,name:ye,ref:Se,filepathtype:vt,filepath:Rt}=parseGitUrl(N);if(!q||!ye||vt!=="browse"&&vt!=="raw"&&vt!=="src")throw new Error("Invalid Bitbucket URL or file path");const Nt=Rt.replace(/^\//,"");if(F.host==="bitbucket.org"){if(!Se)throw new Error("Invalid Bitbucket URL or file path");return`${F.apiBaseUrl}/repositories/${q}/${ye}/src/${Se}/${Nt}`}return`${F.apiBaseUrl}/projects/${q}/repos/${ye}/raw/${Nt}?at=${Se}`}catch(q){throw new Error(`Incorrect URL: ${N}, ${q}`)}}function te(N){const F={};if(N.token)F.Authorization=`Bearer ${N.token}`;else if(N.username&&N.appPassword){const q=y.from(`${N.username}:${N.appPassword}`,"utf8");F.Authorization=`Basic ${q.toString("base64")}`}return{headers:F}}function ee(N){const F=N.getString("host");let q=N.getOptionalString("baseUrl"),ye=N.getOptionalString("gitilesBaseUrl");const Se=N.getOptionalString("username"),vt=N.getOptionalString("password");if(h(F)){if(q&&!M(q))throw new Error(`Invalid Gerrit integration config, '${q}' is not a valid baseUrl`);if(ye&&!M(ye))throw new Error(`Invalid Gerrit integration config, '${ye}' is not a valid gitilesBaseUrl`)}else throw new Error(`Invalid Gerrit integration config, '${F}' is not a valid host`);return q?q=(0,p.trimEnd)(q,"/"):q=`https://${F}`,ye?ye=(0,p.trimEnd)(ye,"/"):ye=`https://${F}`,{host:F,baseUrl:q,gitilesBaseUrl:ye,username:Se,password:vt}}function Le(N){return N.map(ee)}const le=class{constructor(N){this.integrationConfig=N}get type(){return"gerrit"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(N){const{url:F,base:q,lineNumber:ye}=N;let Se;return F?Se=new URL(F,q):Se=new URL(q),ye&&(Se.hash=ye.toString()),Se.toString()}resolveEditUrl(N){return N}};let Q=le;Q.factory=({config:N})=>{var F;const q=Le((F=N.getOptionalConfigArray("integrations.gerrit"))!=null?F:[]);return L(q.map(ye=>new le(ye)),ye=>ye.config.host)};const xe=")]}'";function at(N,F){const ye=F.replace(N.gitilesBaseUrl,"").split("/").filter(xn=>!!xn),Se=ye.indexOf("+");if(Se<=0)throw new Error(`Unable to parse project from url: ${F}`);const vt=trimStart(ye.slice(0,Se).join("/"),"/"),Rt=ye.indexOf("heads");if(Rt<=0)throw new Error(`Unable to parse branch from url: ${F}`);const Nt=ye[Rt+1],zt=ye.slice(Rt+2).join("/");return{branch:Nt,filePath:zt===""?"/":zt,project:vt}}function Zt(N){return N.password?"/a/":"/"}function Dt(N,F){const{branch:q,filePath:ye,project:Se}=at(N,F);return`${N.baseUrl}${Zt(N)}projects/${encodeURIComponent(Se)}/branches/${q}/files/${encodeURIComponent(ye)}/content`}function en(N){const F={};if(!N.password)return F;const q=y.from(`${N.username}:${N.password}`,"utf8");return F.Authorization=`Basic ${q.toString("base64")}`,{headers:F}}async function on(N){const F=await N.text();if(F.startsWith(xe))try{return JSON.parse(F.slice(xe.length))}catch(q){throw new Error(`Invalid response from Gerrit: ${F.slice(0,10)} - ${q}`)}throw new Error(`Gerrit JSON body prefix missing. Found: ${F.slice(0,10)}`)}const gn="github.com",Ye="https://api.github.com",Y="https://raw.githubusercontent.com";function ce(N){var F,q;const ye=(F=N.getOptionalString("host"))!=null?F:gn;let Se=N.getOptionalString("apiBaseUrl"),vt=N.getOptionalString("rawBaseUrl");const Rt=N.getOptionalString("token"),Nt=(q=N.getOptionalConfigArray("apps"))==null?void 0:q.map(zt=>({appId:zt.getNumber("appId"),clientId:zt.getString("clientId"),clientSecret:zt.getString("clientSecret"),webhookSecret:zt.getString("webhookSecret"),privateKey:zt.getString("privateKey"),allowedInstallationOwners:zt.getOptionalStringArray("allowedInstallationOwners")}));if(!h(ye))throw new Error(`Invalid GitHub integration config, '${ye}' is not a valid host`);return Se?Se=(0,p.trimEnd)(Se,"/"):ye===gn&&(Se=Ye),vt?vt=(0,p.trimEnd)(vt,"/"):ye===gn&&(vt=Y),{host:ye,apiBaseUrl:Se,rawBaseUrl:vt,token:Rt,apps:Nt}}function _e(N){const F=N.map(ce);return F.some(q=>q.host===gn)||F.push({host:gn,apiBaseUrl:Ye,rawBaseUrl:Y}),F}function Ze(N,F,q){try{const{owner:ye,name:Se,ref:vt,filepathtype:Rt,filepath:Nt}=parseGitUrl(N);if(!ye||!Se||!vt||Rt!=="blob"&&Rt!=="raw"&&Rt!=="tree")throw new Error("Invalid GitHub URL or file path");const zt=Nt.replace(/^\//,"");return de(F,q)==="api"?`${F.apiBaseUrl}/repos/${ye}/${Se}/contents/${zt}?ref=${vt}`:`${F.rawBaseUrl}/${ye}/${Se}/${vt}/${zt}`}catch(ye){throw new Error(`Incorrect URL: ${N}, ${ye}`)}}function ie(N,F){const q={};return de(N,F)==="api"&&(q.Accept="application/vnd.github.v3.raw"),F.token&&(q.Authorization=`token ${F.token}`),{headers:q}}function de(N,F){return N.apiBaseUrl&&(F.token||!N.rawBaseUrl)?"api":"raw"}class ve{constructor(){this.tokenCache=new Map,this.isNotExpired=F=>F.diff(d.ou.local(),"minutes").minutes>50}async getOrCreateToken(F,q){const ye=this.tokenCache.get(F);if(ye&&this.isNotExpired(ye.expiresAt))return{accessToken:ye.token};const Se=await q();return this.tokenCache.set(F,Se),{accessToken:Se.token}}}const ge={Accept:"application/vnd.github.machine-man-preview+json"};class nt{constructor(F,q){this.cache=new ve,this.allowedInstallationOwners=F.allowedInstallationOwners,this.baseUrl=q,this.baseAuthConfig={appId:F.appId,privateKey:F.privateKey.replace(/\\n/gm,`
`)},this.appClient=new v.v({baseUrl:q,headers:ge,authStrategy:u.i,auth:this.baseAuthConfig})}async getInstallationCredentials(F,q){var ye;const{installationId:Se,suspended:vt}=await this.getInstallationData(F);if(this.allowedInstallationOwners&&!((ye=this.allowedInstallationOwners)!=null&&ye.includes(F)))return{accessToken:void 0};if(vt)throw new Error(`The GitHub application for ${F} is suspended`);const Rt=q?`${F}/${q}`:F;return this.cache.getOrCreateToken(Rt,async()=>{const Nt=await this.appClient.apps.createInstallationAccessToken({installation_id:Se,headers:ge});if(q&&Nt.data.repository_selection==="selected"){const zt=new v.v({baseUrl:this.baseUrl,auth:Nt.data.token});if(!(await zt.paginate(zt.apps.listReposAccessibleToInstallation)).some(st=>st.name===q))throw new Error(`The Backstage GitHub application used in the ${F} organization does not have access to a repository with the name ${q}`)}return{token:Nt.data.token,expiresAt:d.ou.fromISO(Nt.data.expires_at)}})}getInstallations(){return this.appClient.paginate(this.appClient.apps.listInstallations)}async getInstallationData(F){const ye=(await this.getInstallations()).find(vt=>{var Rt,Nt;return((Nt=(Rt=vt.account)==null?void 0:Rt.login)==null?void 0:Nt.toLocaleLowerCase("en-US"))===F.toLocaleLowerCase("en-US")});if(ye)return{installationId:ye.id,suspended:Boolean(ye.suspended_by)};const Se=new Error(`No app installation found for ${F} in ${this.baseAuthConfig.appId}`);throw Se.name="NotFoundError",Se}}class bt{constructor(F){var q,ye;this.apps=(ye=(q=F.apps)==null?void 0:q.map(Se=>new nt(Se,F.apiBaseUrl)))!=null?ye:[]}async getAllInstallations(){return this.apps.length?(await Promise.all(this.apps.map(q=>q.getInstallations()))).flat():[]}async getAppToken(F,q){if(this.apps.length===0)return;const ye=await Promise.all(this.apps.map(Nt=>Nt.getInstallationCredentials(F,q).then(zt=>({credentials:zt,error:void 0}),zt=>({credentials:void 0,error:zt})))),Se=ye.find(Nt=>Nt.credentials);if(Se)return Se.credentials.accessToken;const Rt=ye.map(Nt=>Nt.error).find(Nt=>Nt.name!=="NotFoundError");if(Rt)throw Rt}}const kt=class{constructor(N,F){this.githubAppCredentialsMux=N,this.token=F}async getCredentials(N){const F=n()(N.url),q=F.owner||F.name,ye=F.owner?F.name:void 0;let Se="app",vt=await this.githubAppCredentialsMux.getAppToken(q,ye);return vt||(Se="token",vt=this.token),{headers:vt?{Authorization:`Bearer ${vt}`}:void 0,token:vt,type:Se}}};let ln=kt;ln.create=N=>new kt(new bt(N),N.token);class Ut{constructor(F){this.providers=F}static fromIntegrations(F){const q=new Map;return F.github.list().forEach(ye=>{const Se=ln.create(ye.config);q.set(ye.config.host,Se)}),new Ut(q)}async getCredentials(F){const q=new URL(F.url),ye=this.providers.get(q.host);if(!ye)throw new Error(`There is no GitHub integration that matches ${F.url}. Please add a configuration for an integration.`);return ye.getCredentials(F)}}const Mt=class{constructor(N){this.integrationConfig=N}get type(){return"github"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(N){return bn($(N),"tree")}resolveEditUrl(N){return bn(N,"edit")}};let Gt=Mt;Gt.factory=({config:N})=>{var F;const q=_e((F=N.getOptionalConfigArray("integrations.github"))!=null?F:[]);return L(q.map(ye=>new Mt(ye)),ye=>ye.config.host)};function bn(N,F){return N.replace(/\/\/([^/]+)\/([^/]+)\/([^/]+)\/(blob|tree|edit)\//,(q,ye,Se,vt)=>`//${ye}/${Se}/${vt}/${F}/`)}const vn="gitlab.com",Me="https://gitlab.com/api/v4";function ht(N){const F=N.getString("host");let q=N.getOptionalString("apiBaseUrl");const ye=N.getOptionalString("token");let Se=N.getOptionalString("baseUrl");if(q?q=(0,p.trimEnd)(q,"/"):F===vn&&(q=Me),Se?Se=(0,p.trimEnd)(Se,"/"):Se=`https://${F}`,h(F)){if(!q||!M(q))throw new Error(`Invalid GitLab integration config, '${q}' is not a valid apiBaseUrl`);if(!M(Se))throw new Error(`Invalid GitLab integration config, '${Se}' is not a valid baseUrl`)}else throw new Error(`Invalid GitLab integration config, '${F}' is not a valid host`);return{host:F,token:ye,apiBaseUrl:q,baseUrl:Se}}function _t(N){const F=N.map(ht);return F.some(q=>q.host===vn)||F.push({host:vn,apiBaseUrl:Me,baseUrl:`https://${vn}`}),F}async function tn(N,F){if(N.includes("/-/blob/")){const q=await Bn(N,F);return kn(N,q).toString()}return hn(N).toString()}function Bt(N){const{token:F=""}=N;return{headers:{"PRIVATE-TOKEN":F}}}function hn(N){try{const F=new URL(N),[q,ye,Se,vt,...Rt]=F.pathname.split("/");if(q!==""||ye===""||Se===""||vt!=="blob"||!Rt.join("/").match(/\.(yaml|yml)$/))throw new Error("Wrong GitLab URL");return F.pathname=[q,ye,Se,"raw",...Rt].join("/"),F}catch(F){throw new Error(`Incorrect url: ${N}, ${F}`)}}function kn(N,F){try{const q=new URL(N),ye=q.pathname.split("/-/blob/")[1],[Se,...vt]=ye.split("/");return q.pathname=["/api/v4/projects",F,"repository/files",encodeURIComponent(decodeURIComponent(vt.join("/"))),"raw"].join("/"),q.search=`?ref=${Se}`,q}catch(q){throw new Error(`Incorrect url: ${N}, ${q}`)}}async function Bn(N,F){const q=new URL(N);if(!q.pathname.includes("/-/blob/"))throw new Error("Please provide full path to yaml file from GitLab");try{const ye=q.pathname.split("/-/blob/")[0],Se=new URL(`${q.origin}/api/v4/projects/${encodeURIComponent(ye.replace(/^\//,""))}`),vt=await fetch(Se.toString(),Bt(F)),Rt=await vt.json();if(!vt.ok)throw new Error(`GitLab Error '${Rt.error}', ${Rt.error_description}`);return Number(Rt.id)}catch(ye){throw new Error(`Could not get GitLab project ID for: ${N}, ${ye}`)}}const Un=class{constructor(N){this.integrationConfig=N}get type(){return"gitlab"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(N){return $(N)}resolveEditUrl(N){return Ge(N,"edit")}};let An=Un;An.factory=({config:N})=>{var F;const q=_t((F=N.getOptionalConfigArray("integrations.gitlab"))!=null?F:[]);return L(q.map(ye=>new Un(ye)),ye=>ye.config.host)};function Ge(N,F){return N.replace(/\/\-\/(blob|tree|edit)\//,`/-/${F}/`)}function Je(N){if(!N)return{};if(!N.has("clientEmail")&&!N.has("privateKey"))return{};const F=N.getString("privateKey").split("\\n").join(`
`);return{clientEmail:N.getString("clientEmail"),privateKey:F}}const mt="amazonaws.com";function dt(N){var F;const q=N.getOptionalString("endpoint"),ye=(F=N.getOptionalBoolean("s3ForcePathStyle"))!=null?F:!1;let Se,vt;if(q){try{const zn=new URL(q);Se=zn.host,vt=zn.pathname}catch{throw new Error(`invalid awsS3 integration config, endpoint '${q}' is not a valid URL`)}if(vt!=="/")throw new Error(`invalid awsS3 integration config, endpoints cannot contain path, got '${q}'`)}else Se=mt;const Rt=N.getOptionalString("accessKeyId"),Nt=N.getOptionalString("secretAccessKey"),zt=N.getOptionalString("roleArn"),xn=N.getOptionalString("externalId");return{host:Se,endpoint:q,s3ForcePathStyle:ye,accessKeyId:Rt,secretAccessKey:Nt,roleArn:zt,externalId:xn}}function It(N){const F=N.map(dt);return F.some(q=>q.host===mt)||F.push({host:mt}),F}const Wt=class{constructor(N){this.integrationConfig=N}get type(){return"awsS3"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(N){return $(N)}resolveEditUrl(N){return N}};let Jt=Wt;Jt.factory=({config:N})=>{var F;const q=It((F=N.getOptionalConfigArray("integrations.awsS3"))!=null?F:[]);return L(q.map(ye=>new Wt(ye)),ye=>ye.config.host)};class xt{static fromConfig(F){return new xt({awsS3:Jt.factory({config:F}),azure:pn.factory({config:F}),bitbucket:Pe.factory({config:F}),gerrit:Q.factory({config:F}),github:Gt.factory({config:F}),gitlab:An.factory({config:F})})}constructor(F){this.byType=F}get awsS3(){return this.byType.awsS3}get azure(){return this.byType.azure}get bitbucket(){return this.byType.bitbucket}get gerrit(){return this.byType.gerrit}get github(){return this.byType.github}get gitlab(){return this.byType.gitlab}list(){return Object.values(this.byType).flatMap(F=>F.list())}byUrl(F){return Object.values(this.byType).map(q=>q.byUrl(F)).find(Boolean)}byHost(F){return Object.values(this.byType).map(q=>q.byHost(F)).find(Boolean)}resolveUrl(F){const q=this.byUrl(F.base);return q?q.resolveUrl(F):$(F)}resolveEditUrl(F){const q=this.byUrl(F);return q?q.resolveEditUrl(F):F}}},63115:function(Lt,c,t){t.d(c,{Cy:function(){return E},DC:function(){return Ie},OO:function(){return H},RE:function(){return J},XQ:function(){return A},Yq:function(){return $e},ap:function(){return Pe},bM:function(){return qe},cm:function(){return Ot},d1:function(){return Re},fP:function(){return $},fe:function(){return pn},gC:function(){return re},hK:function(){return w},hs:function(){return _n},nE:function(){return Qe},x1:function(){return fe},zJ:function(){return U}});var e=t(2784),n=t(10289),p=t(49558),a=t(30705),o=t(16673),m=t(73495),u=t(99688),v=t(60364),d=t(34520),y=t(90436);const h=(0,a.NT)({id:"api-docs"}),M=(0,a.x8)({id:"register-component",optional:!0}),L=[o.Es.columns.createNameColumn({defaultKind:"API"}),o.Es.columns.createSystemColumn(),o.Es.columns.createOwnerColumn(),o.Es.columns.createSpecTypeColumn(),o.Es.columns.createSpecLifecycleColumn(),o.Es.columns.createMetadataDescriptionColumn(),o.Es.columns.createTagsColumn()],$=({initiallySelectedFilter:ae="all",columns:Te,actions:Et})=>{var te;const Le=`${(te=(0,a.h_)(a.Ds).getOptionalString("organization.name"))!=null?te:"Backstage"} API Explorer`,le=(0,a.tg)(M);return e.createElement(p.g9,{themeId:"apis",title:"APIs",subtitle:Le,pageTitleOverride:"APIs"},e.createElement(p.VY,null,e.createElement(p.yW,{title:""},e.createElement(p.XF,{title:"Register Existing API",to:le==null?void 0:le()}),e.createElement(p.qt,null,"All your APIs")),e.createElement(m.UO,null,e.createElement(m._i,null,e.createElement(m._i.Filters,null,e.createElement(m.tW,{initialFilter:"api",hidden:!0}),e.createElement(m.sL,null),e.createElement(m.EW,{initialFilter:ae}),e.createElement(m.dq,null),e.createElement(m.df,null),e.createElement(m.xE,null)),e.createElement(m._i.Content,null,e.createElement(o.Es,{columns:Te||L,actions:Et}))))))},J=ae=>(0,n.pC)()||e.createElement($,{...ae}),g=(0,a.T0)({id:"plugin.api-docs.config"}),S=ae=>e.createElement(p.Oi,{text:ae.definition,language:ae.language,showCopyCodeButton:!0}),E=()=>{var ae;const{entity:Te}=(0,m.X2)(),Et=(0,a.h_)(g),{getApiDefinitionWidget:te}=Et;if(!Te)return e.createElement(u.Z,{severity:"error"},"Could not fetch the API");const ee=te(Te),Le=(ae=Te.metadata.title)!=null?ae:Te.metadata.name;return ee?e.createElement(p.oZ,{title:Le},e.createElement(p.hB,{label:ee.title,key:"widget"},ee.component(Te.spec.definition)),e.createElement(p.hB,{label:"Raw",key:"raw"},e.createElement(S,{definition:Te.spec.definition,language:ee.rawLanguage||Te.spec.type}))):e.createElement(p.oZ,{title:Le,children:[e.createElement(p.hB,{label:Te.spec.type,key:"raw"},e.createElement(S,{definition:Te.spec.definition,language:Te.spec.type}))]})},I=e.lazy(()=>Promise.all([t.e(1978),t.e(4778),t.e(7700),t.e(9086),t.e(1079)]).then(t.bind(t,1079)).then(ae=>({default:ae.AsyncApiDefinition}))),D=ae=>e.createElement(e.Suspense,{fallback:e.createElement(p.Ex,null)},e.createElement(I,{...ae})),T=e.lazy(()=>t.e(896).then(t.bind(t,80896)).then(ae=>({default:ae.GraphQlDefinition}))),i=ae=>e.createElement(e.Suspense,{fallback:e.createElement(p.Ex,null)},e.createElement(T,{...ae})),O=e.lazy(()=>Promise.all([t.e(1978),t.e(7700),t.e(6637),t.e(4367)]).then(t.bind(t,94367)).then(ae=>({default:ae.OpenApiDefinition}))),W=ae=>e.createElement(e.Suspense,{fallback:e.createElement(p.Ex,null)},e.createElement(O,{...ae})),Ce=ae=>{const Te=(0,v.Z)();return e.createElement(p.Oi,{customStyle:{backgroundColor:Te.palette.background.default},text:ae.definition,language:"protobuf",showCopyCodeButton:!0})};function $e(){return[{type:"openapi",title:"OpenAPI",rawLanguage:"yaml",component:ae=>e.createElement(W,{definition:ae})},{type:"asyncapi",title:"AsyncAPI",rawLanguage:"yaml",component:ae=>e.createElement(D,{definition:ae})},{type:"graphql",title:"GraphQL",rawLanguage:"graphql",component:ae=>e.createElement(i,{definition:ae})},{type:"grpc",title:"gRPC",component:ae=>e.createElement(Ce,{definition:ae})}]}const Qe=({apiEntity:ae})=>{const Et=(0,a.h_)(g).getApiDefinitionWidget(ae),te=Et?Et.title:ae.spec.type;return e.createElement("span",null,te)};function it(){return{title:"Type",field:"spec.type",render:ae=>e.createElement(Qe,{apiEntity:ae})}}const lt=[m.u3.columns.createEntityRefColumn({defaultKind:"API"}),m.u3.columns.createSystemColumn(),m.u3.columns.createOwnerColumn(),it(),m.u3.columns.createSpecLifecycleColumn(),m.u3.columns.createMetadataDescriptionColumn()],qe=({variant:ae="gridItem"})=>{const{entity:Te}=(0,m.X2)(),{entities:Et,loading:te,error:ee}=(0,m.eK)(Te,{type:d.Dg});return te?e.createElement(p.rJ,{variant:ae,title:"Consumed APIs"},e.createElement(p.Ex,null)):ee||!Et?e.createElement(p.rJ,{variant:ae,title:"Consumed APIs"},e.createElement(p.GB,{severity:"error",title:"Could not load APIs",message:e.createElement(p.Oi,{text:`${ee}`,language:"text"})})):e.createElement(m.u3,{title:"Consumed APIs",variant:ae,emptyContent:e.createElement("div",{style:{textAlign:"center"}},e.createElement(y.Z,{variant:"body1"},"This ",Te.kind.toLocaleLowerCase("en-US")," does not consume any APIs."),e.createElement(y.Z,{variant:"body2"},e.createElement(p.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specconsumesapis-optional"},"Learn how to change this."))),columns:lt,entities:Et})},$t=[m.u3.columns.createEntityRefColumn({defaultKind:"API"}),m.u3.columns.createOwnerColumn(),it(),m.u3.columns.createSpecLifecycleColumn(),m.u3.columns.createMetadataDescriptionColumn()],Ot=({variant:ae="gridItem"})=>{const{entity:Te}=(0,m.X2)(),{entities:Et,loading:te,error:ee}=(0,m.eK)(Te,{type:d.aS,kind:"API"});return te?e.createElement(p.rJ,{variant:ae,title:"APIs"},e.createElement(p.Ex,null)):ee||!Et?e.createElement(p.rJ,{variant:ae,title:"APIs"},e.createElement(p.GB,{severity:"error",title:"Could not load APIs",message:e.createElement(p.Oi,{text:`${ee}`,language:"text"})})):e.createElement(m.u3,{title:"APIs",variant:ae,emptyContent:e.createElement("div",{style:{textAlign:"center"}},e.createElement(y.Z,{variant:"body1"},"This ",Te.kind.toLocaleLowerCase("en-US")," does not contain any APIs."),e.createElement(y.Z,{variant:"body2"},e.createElement(p.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#kind-api"},"Learn how to change this."))),columns:$t,entities:Et})},pn=({variant:ae="gridItem"})=>{const{entity:Te}=(0,m.X2)(),{entities:Et,loading:te,error:ee}=(0,m.eK)(Te,{type:d.M_});return te?e.createElement(p.rJ,{variant:ae,title:"Provided APIs"},e.createElement(p.Ex,null)):ee||!Et?e.createElement(p.rJ,{variant:ae,title:"Provided APIs"},e.createElement(p.GB,{severity:"error",title:"Could not load APIs",message:e.createElement(p.Oi,{text:`${ee}`,language:"text"})})):e.createElement(m.u3,{title:"Provided APIs",variant:ae,emptyContent:e.createElement("div",{style:{textAlign:"center"}},e.createElement(y.Z,{variant:"body1"},"This ",Te.kind.toLocaleLowerCase("en-US")," does not provide any APIs."),e.createElement(y.Z,{variant:"body2"},e.createElement(p.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specprovidesapis-optional"},"Learn how to change this."))),columns:lt,entities:Et})},_n=({variant:ae="gridItem"})=>{const{entity:Te}=(0,m.X2)(),{entities:Et,loading:te,error:ee}=(0,m.eK)(Te,{type:d.X9});return te?e.createElement(p.rJ,{variant:ae,title:"Consumers"},e.createElement(p.Ex,null)):ee||!Et?e.createElement(p.rJ,{variant:ae,title:"Consumers"},e.createElement(p.GB,{severity:"error",title:"Could not load components",message:e.createElement(p.Oi,{text:`${ee}`,language:"text"})})):e.createElement(m.u3,{title:"Consumers",variant:ae,emptyContent:e.createElement("div",{style:{textAlign:"center"}},e.createElement(y.Z,{variant:"body1"},"No component consumes this API."),e.createElement(y.Z,{variant:"body2"},e.createElement(p.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specconsumesapis-optional"},"Learn how to change this."))),columns:m.u3.componentEntityColumns,entities:Et})},U=({variant:ae="gridItem"})=>{const{entity:Te}=(0,m.X2)(),{entities:Et,loading:te,error:ee}=(0,m.eK)(Te,{type:d.Zj});return te?e.createElement(p.rJ,{variant:ae,title:"Providers"},e.createElement(p.Ex,null)):ee||!Et?e.createElement(p.rJ,{variant:ae,title:"Providers"},e.createElement(p.GB,{severity:"error",title:"Could not load components",message:e.createElement(p.Oi,{text:`${ee}`,language:"text"})})):e.createElement(m.u3,{title:"Providers",variant:ae,emptyContent:e.createElement("div",{style:{textAlign:"center"}},e.createElement(y.Z,{variant:"body1"},"No component provides this API."),e.createElement(y.Z,{variant:"body2"},e.createElement(p.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specprovidesapis-optional"},"Learn how to change this."))),columns:m.u3.componentEntityColumns,entities:Et})},Re=(0,a.rx)({id:"api-docs",routes:{root:h},apis:[(0,a.ni)({api:g,deps:{},factory:()=>{const ae=$e();return{getApiDefinitionWidget:Te=>ae.find(Et=>Et.type===Te.spec.type)}}})],externalRoutes:{registerApi:M}}),w=Re.provide((0,a.P4)({name:"ApiExplorerPage",component:()=>t.e(4136).then(t.bind(t,74136)).then(ae=>ae.ApiExplorerIndexPage),mountPoint:h})),Ie=Re.provide((0,a.CO)({name:"EntityApiDefinitionCard",component:{lazy:()=>t.e(341).then(t.bind(t,30341)).then(ae=>ae.ApiDefinitionCard)}})),fe=Re.provide((0,a.CO)({name:"EntityConsumedApisCard",component:{lazy:()=>t.e(4585).then(t.bind(t,84585)).then(ae=>ae.ConsumedApisCard)}})),A=Re.provide((0,a.CO)({name:"EntityConsumingComponentsCard",component:{lazy:()=>t.e(5926).then(t.bind(t,75926)).then(ae=>ae.ConsumingComponentsCard)}})),H=Re.provide((0,a.CO)({name:"EntityProvidedApisCard",component:{lazy:()=>t.e(4585).then(t.bind(t,84585)).then(ae=>ae.ProvidedApisCard)}})),re=Re.provide((0,a.CO)({name:"EntityProvidingComponentsCard",component:{lazy:()=>t.e(5926).then(t.bind(t,75926)).then(ae=>ae.ProvidingComponentsCard)}})),Pe=Re.provide((0,a.CO)({name:"EntityHasApisCard",component:{lazy:()=>t.e(4585).then(t.bind(t,84585)).then(ae=>ae.HasApisCard)}}))},26655:function(Lt,c,t){t.d(c,{j8:function(){return o},x7:function(){return a}});var e=t(5083);const n="catalog-entity",p=(0,e.J$)({name:"catalog.entity.read",attributes:{action:"read"},resourceType:n}),a=(0,e.J$)({name:"catalog.entity.create",attributes:{action:"create"}}),o=(0,e.J$)({name:"catalog.entity.delete",attributes:{action:"delete"},resourceType:n}),m=(0,e.J$)({name:"catalog.entity.refresh",attributes:{action:"update"},resourceType:n}),u=(0,e.J$)({name:"catalog.location.read",attributes:{action:"read"}}),v=(0,e.J$)({name:"catalog.location.create",attributes:{action:"create"}}),d=(0,e.J$)({name:"catalog.location.delete",attributes:{action:"delete"}})},98487:function(Lt,c,t){t.d(c,{Az:function(){return pn},Ho:function(){return qe},Nm:function(){return O},_U:function(){return lt},t0:function(){return _n},vw:function(){return i}});var e=t(34520),n=t(49558),p=t(30705),a=t(79692),o=t(60364),m=t(4614),u=t(72779),v=t.n(u),d=t(2784),y=t(10368),h=t(73495),M=t(39412),L=t(48760),$=t(14162),J=t.n($),g=t(69294);const S=(0,y.Z)(U=>({text:{fill:U.palette.textContrast},secondary:{fill:U.palette.textSubtle}}));function E({edge:{relations:U}}){const Re=S();return d.createElement("text",{className:Re.text,textAnchor:"middle"},U.map((w,Ie)=>d.createElement("tspan",{key:w,className:v()(Ie>0&&Re.secondary)},Ie>0&&d.createElement("tspan",null," / "),w)))}function I({kind:U,...Re}){var w;const fe=(w=(0,p.qD)().getSystemIcon(`kind:${U.toLocaleLowerCase("en-US")}`))!=null?w:M.Z;return d.createElement(fe,{...Re})}const D=(0,a.Z)(U=>({node:{fill:U.palette.grey[300],stroke:U.palette.grey[300],"&.primary":{fill:U.palette.primary.light,stroke:U.palette.primary.light},"&.secondary":{fill:U.palette.secondary.light,stroke:U.palette.secondary.light}},text:{fill:U.palette.getContrastText(U.palette.grey[300]),"&.primary":{fill:U.palette.primary.contrastText},"&.secondary":{fill:U.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}));function T({node:{id:U,kind:Re,namespace:w,name:Ie,color:fe="default",focused:A,title:H,onClick:re}}){const Pe=D(),[ae,Te]=(0,d.useState)(0),[Et,te]=(0,d.useState)(0),ee=(0,d.useRef)(null);(0,d.useLayoutEffect)(()=>{if(ee.current){let{height:Dt,width:en}=ee.current.getBBox();Dt=Math.round(Dt),en=Math.round(en),(Dt!==Et||en!==ae)&&(Te(en),te(Dt))}},[ae,Et]);const Le=10,le=Et,Q=Re?le+Le:0,xe=Q+ae+Le*2,at=Et+Le*2,Zt=H!=null?H:Re&&Ie&&w?(0,h.$3)({kind:Re,name:Ie,namespace:w}):U;return d.createElement("g",{onClick:re,className:v()(re&&Pe.clickable)},d.createElement("rect",{className:v()(Pe.node,fe==="primary"&&"primary",fe==="secondary"&&"secondary"),width:xe,height:at,rx:10}),Re&&d.createElement(I,{kind:Re,y:Le,x:Le,width:le,height:le,className:v()(Pe.text,A&&"focused",fe==="primary"&&"primary",fe==="secondary"&&"secondary")}),d.createElement("text",{ref:ee,className:v()(Pe.text,A&&"focused",fe==="primary"&&"primary",fe==="secondary"&&"secondary"),y:at/2,x:Q+(ae+Le*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},Zt))}const i=[[e.$1,e.S4],[e.Dg,e.X9],[e.Zj,e.M_],[e.aS,e.cz],[e._b,e.wP],[e.KS,e.hr],[e.nP,e.w$]];var O=(U=>(U.TOP_BOTTOM="TB",U.BOTTOM_TOP="BT",U.LEFT_RIGHT="LR",U.RIGHT_LEFT="RL",U))(O||{});const W=J()(10);function Ce(){const U=(0,p.h_)(h.Ah),Re=(0,d.useRef)({requestedEntities:new Set,outstandingEntities:new Map,cachedEntities:new Map}),[w,Ie]=(0,d.useState)({}),fe=(0,d.useCallback)(()=>{const{cachedEntities:Te,requestedEntities:Et}=Re.current,te={};Et.forEach(ee=>{const Le=Te.get(ee);Le&&(te[ee]=Le)}),Ie(te)},[Re,Ie]),[A,H]=(0,g.default)(async()=>{const{requestedEntities:Te,outstandingEntities:Et,cachedEntities:te}=Re.current;await Promise.all(Array.from(Te).map(ee=>W(async()=>{if(te.has(ee))return;if(Et.has(ee)){await Et.get(ee);return}const Le=U.getEntityByRef(ee);Et.set(ee,Le);try{const le=await Le;le&&(te.set(ee,le),fe())}finally{Et.delete(ee)}})))},[Re,fe]),{loading:re,error:Pe}=A,ae=(0,d.useCallback)(Te=>{const Et=new Set(Te),{requestedEntities:te}=Re.current;(Et.size!==te.size||Array.from(Et).some(ee=>!te.has(ee)))&&(Re.current.requestedEntities=Et,H(),fe())},[Re,H,fe]);return{entities:w,loading:re,error:Pe,requestEntities:ae}}function $e({rootEntityRefs:U,filter:{maxDepth:Re=Number.POSITIVE_INFINITY,relations:w,kinds:Ie}={}}){const{entities:fe,loading:A,error:H,requestEntities:re}=Ce();return(0,d.useEffect)(()=>{const Pe=new Set([...U]),ae=new Set;let Te=[...U],Et=0;for(;Te.length>0&&(!isFinite(Re)||Et<Re);){const te=Te;for(Te=[];te.length>0;){const ee=te.shift(),Le=fe[ee];if(ae.add(ee),Le&&Le.relations)for(const le of Le.relations)(!w||w.includes(le.type))&&(!Ie||Ie.some(Q=>le.targetRef.startsWith(`${Q.toLocaleLowerCase("en-US")}:`)))&&(ae.has(le.targetRef)||(Te.push(le.targetRef),Pe.add(le.targetRef)))}++Et}re([...Pe])},[fe,U,Re,w,Ie,re]),{entities:fe,loading:A,error:H}}function Qe({rootEntityRefs:U,maxDepth:Re=Number.POSITIVE_INFINITY,unidirectional:w=!0,mergeRelations:Ie=!0,kinds:fe,relations:A,onNodeClick:H,relationPairs:re=i}){const[Pe,ae]=(0,d.useState)({}),{entities:Te,loading:Et,error:te}=$e({rootEntityRefs:U,filter:{maxDepth:Re,kinds:fe,relations:A}});return(0,L.Z)(()=>{var ee;if(!Te||Object.keys(Te).length===0){ae({});return}const Le=Object.entries(Te).map(([at,Zt])=>{var Dt,en,on;const gn=U.includes(at),Ye={id:at,title:(en=(Dt=Zt.metadata)==null?void 0:Dt.title)!=null?en:void 0,kind:Zt.kind,name:Zt.metadata.name,namespace:(on=Zt.metadata.namespace)!=null?on:e.zG,focused:gn,color:gn?"secondary":"primary"};return H&&(Ye.onClick=Y=>H(Ye,Y)),Ye}),le=[],Q=new Set,xe=[...U];for(;xe.length>0;){const at=xe.pop(),Zt=Te[at];Q.add(at),Zt&&((ee=Zt==null?void 0:Zt.relations)==null||ee.forEach(Dt=>{var en;if(!!Te[Dt.targetRef]&&!(A&&!A.includes(Dt.type))&&!(fe&&!fe.some(on=>Dt.targetRef.startsWith(`${on.toLocaleLowerCase("en-US")}:`)))){if(!w||!Q.has(Dt.targetRef))if(Ie){const on=(en=re.find(([Ye,Y])=>Ye===Dt.type||Y===Dt.type))!=null?en:[Dt.type],[gn]=on;le.push({from:gn===Dt.type?at:Dt.targetRef,to:gn===Dt.type?Dt.targetRef:at,relations:on,label:"visible"})}else le.push({from:at,to:Dt.targetRef,relations:[Dt.type],label:"visible"});Q.has(Dt.targetRef)||(xe.push(Dt.targetRef),Q.add(Dt.targetRef))}}))}ae({nodes:Le,edges:le})},100,[Te,U,fe,A,w,Ie,H,re]),{loading:Et,error:te,...Pe}}const it=(0,a.Z)(U=>({progress:{position:"absolute",left:"50%",top:"50%",marginLeft:"-20px",marginTop:"-20px"},container:{position:"relative",width:"100%",display:"flex",flexDirection:"column"},graph:{width:"100%",flex:1,"& path[marker-end]":{transition:"filter 0.1s ease-in-out"},"& path[marker-end]:hover":{filter:`drop-shadow(2px 2px 4px ${U.palette.primary.dark});`},"& g[data-testid=label]":{transition:"transform 0s"}}})),lt=U=>{const{rootEntityNames:Re,maxDepth:w=Number.POSITIVE_INFINITY,unidirectional:Ie=!0,mergeRelations:fe=!0,kinds:A,relations:H,direction:re=O.LEFT_RIGHT,onNodeClick:Pe,relationPairs:ae=i,className:Te,zoom:Et="enabled",renderNode:te,renderLabel:ee}=U,Le=(0,o.Z)(),le=it(),Q=(0,d.useMemo)(()=>(Array.isArray(Re)?Re:[Re]).map(on=>(0,e.eE)(on)),[Re]),xe=(0,p.h_)(p.VE),{loading:at,error:Zt,nodes:Dt,edges:en}=Qe({rootEntityRefs:Q,maxDepth:w,unidirectional:Ie,mergeRelations:fe,kinds:A,relations:H,onNodeClick:Pe,relationPairs:ae});return(0,d.useEffect)(()=>{Zt&&xe.post(Zt)},[xe,Zt]),d.createElement("div",{className:v()(le.container,Te)},at&&d.createElement(m.Z,{className:le.progress}),Dt&&en&&d.createElement(n.mn,{nodes:Dt,edges:en,renderNode:te||T,renderLabel:ee||E,direction:re,className:le.graph,paddingX:Le.spacing(4),paddingY:Le.spacing(4),labelPosition:n.NX.LabelPosition.RIGHT,labelOffset:Le.spacing(1),zoom:Et}))},qe=(0,p.NT)({id:"catalog-graph"}),$t=(0,p.x8)({id:"catalog-entity",params:["namespace","kind","name"],optional:!0}),Ot=(0,p.rx)({id:"catalog-graph",routes:{catalogGraph:qe},externalRoutes:{catalogEntity:$t}}),pn=Ot.provide((0,p.CO)({name:"EntityCatalogGraphCard",component:{lazy:()=>t.e(7023).then(t.bind(t,87023)).then(U=>U.CatalogGraphCard)}})),_n=Ot.provide((0,p.P4)({name:"CatalogGraphPage",component:()=>t.e(4869).then(t.bind(t,54869)).then(U=>U.CatalogGraphPage),mountPoint:qe}))},93316:function(Lt,c,t){t.d(c,{gA:function(){return An},vr:function(){return Ye},wS:function(){return gn}});var e=t(30705),n=t(49462),p=t(73495),a=t(89393),o=t(49431),m=t(82717),u=t.n(m),v=t(76635),d=t.n(v),y=t(49558),h=t(90436),M=t(7089),L=t(77277),$=t(4614),J=t(11776),g=t(38402),S=t(86136),E=t(49378),I=t(9520),D=t(61837),T=t(82113),i=t(60905),O=t(86619),W=t(74828),Ce=t(94339),$e=t(32552),Qe=t(24579),it=t(95544),lt=t(21324),qe=t(34546),$t=t(5806),Ot=t(31377),pn=t(67471),_n=t(31625),U=t(2784),Re=t(79692),w=t(4989),Ie=t(84905),fe=t(38016),A=t(39412),H=t(96795),re=t.n(H),Pe=t(63955),ae=t(88013),Te=t(60155),Et=t.n(Te),te=t(32272),ee=t(64279),Le=t(34520);const le=(0,e.T0)({id:"plugin.catalog-import.service"}),Q=(Ge,Je)=>{const mt=Ge.github.byUrl(Je);if(!mt)return;const{name:dt,owner:It}=u()(Je);return{repo:dt,owner:It,githubIntegrationConfig:mt.config}};function xe(Ge){const{ref:Je,...mt}=Ge;return{inputRef:Je,...mt}}function at(Ge){var Je;return(Je=Ge.getOptionalString("catalog.import.entityFilename"))!=null?Je:"catalog-info.yaml"}function Zt(Ge){var Je;return(Je=Ge.getOptionalString("catalog.import.pullRequestBranchName"))!=null?Je:"backstage-integration"}class Dt{constructor(Je){this.discoveryApi=Je.discoveryApi,this.scmAuthApi=Je.scmAuthApi,this.identityApi=Je.identityApi,this.scmIntegrationsApi=Je.scmIntegrationsApi,this.catalogApi=Je.catalogApi,this.configApi=Je.configApi}async analyzeUrl(Je){var mt;if(new URL(Je).pathname.match(/\.ya?ml$/)||((mt=new URL(Je).searchParams.get("path"))==null?void 0:mt.match(/.ya?ml$/))){const Wt=await this.catalogApi.addLocation({type:"url",target:Je,dryRun:!0});return{type:"locations",locations:[{exists:Wt.exists,target:Wt.location.target,entities:Wt.entities.map(Jt=>{var xt;return{kind:Jt.kind,namespace:(xt=Jt.metadata.namespace)!=null?xt:"default",name:Jt.metadata.name}})}]}}const dt=Q(this.scmIntegrationsApi,Je);if(!dt){const Wt=this.scmIntegrationsApi.byUrl(Je),Jt=at(this.configApi);throw Wt?new Error(`The ${Wt.title} integration only supports full URLs to ${Jt} files. Did you try to pass in the URL of a directory instead?`):new Error(`This URL was not recognized as a valid GitHub URL because there was no configured integration that matched the given host name. You could try to paste the full URL to a ${Jt} file instead.`)}const It=await this.checkGitHubForExistingCatalogInfo({...dt,url:Je});return It.length>0?{type:"locations",locations:It}:{type:"repository",integrationType:"github",url:Je,generatedEntities:await this.generateEntityDefinitions({repo:Je})}}async preparePullRequest(){var Je;const mt=(Je=this.configApi.getOptionalString("app.title"))!=null?Je:"Backstage",dt=this.configApi.getString("app.baseUrl");return{title:`Add ${at(this.configApi)} config file`,body:`This pull request adds a **Backstage entity metadata file** to this repository so that the component can be added to the [${mt} software catalog](${dt}).

After this pull request is merged, the component will become available.

For more information, read an [overview of the Backstage software catalog](https://backstage.io/docs/features/software-catalog/software-catalog-overview).`}}async submitPullRequest(Je){const{repositoryUrl:mt,fileContent:dt,title:It,body:Wt}=Je,Jt=Q(this.scmIntegrationsApi,mt);if(Jt)return await this.submitGitHubPrToRepo({...Jt,repositoryUrl:mt,fileContent:dt,title:It,body:Wt});throw new Error("unimplemented!")}async generateEntityDefinitions(Je){const{token:mt}=await this.identityApi.getCredentials(),dt=await fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/analyze-location`,{headers:{"Content-Type":"application/json",...mt&&{Authorization:`Bearer ${mt}`}},method:"POST",body:JSON.stringify({location:{type:"url",target:Je.repo}})}).catch(Wt=>{throw new Error(`Failed to generate entity definitions, ${Wt.message}`)});if(!dt.ok)throw new Error(`Failed to generate entity definitions. Received http response ${dt.status}: ${dt.statusText}`);return(await dt.json()).generateEntities.map(Wt=>Wt.entity)}async checkGitHubForExistingCatalogInfo(Je){const{url:mt,owner:dt,repo:It,githubIntegrationConfig:Wt}=Je,{token:Jt}=await this.scmAuthApi.getCredentials({url:mt}),xt=new a.v({auth:Jt,baseUrl:Wt.apiBaseUrl}),N=at(this.configApi),F=`repo:${dt}/${It}+filename:${N}`,q=await xt.search.code({q:F}).catch(Se=>{throw new Error(en("Couldn't search repository for metadata file.",Se))});if(q.data.total_count>0){const vt=(await xt.repos.get({owner:dt,repo:It}).catch(Rt=>{throw new Error(en("Couldn't fetch repo data",Rt))})).data.default_branch;return await Promise.all(q.data.items.map(Rt=>`${(0,v.trimEnd)(mt,"/")}/blob/${vt}/${Rt.path}`).map(async Rt=>{const Nt=await this.catalogApi.addLocation({type:"url",target:Rt,dryRun:!0});return{target:Rt,exists:Nt.exists,entities:Nt.entities.map(zt=>{var xn;return{kind:zt.kind,namespace:(xn=zt.metadata.namespace)!=null?xn:"default",name:zt.metadata.name}})}}))}return[]}async submitGitHubPrToRepo(Je){const{owner:mt,repo:dt,title:It,body:Wt,fileContent:Jt,repositoryUrl:xt,githubIntegrationConfig:N}=Je,{token:F}=await this.scmAuthApi.getCredentials({url:xt,additionalScope:{repoWrite:!0}}),q=new a.v({auth:F,baseUrl:N.apiBaseUrl}),ye=Zt(this.configApi),Se=at(this.configApi),vt=await q.repos.get({owner:mt,repo:dt}).catch(zt=>{throw new Error(en("Couldn't fetch repo data",zt))}),Rt=await q.git.getRef({owner:mt,repo:dt,ref:`heads/${vt.data.default_branch}`}).catch(zt=>{throw new Error(en("Couldn't fetch default branch data",zt))});return await q.git.createRef({owner:mt,repo:dt,ref:`refs/heads/${ye}`,sha:Rt.data.object.sha}).catch(zt=>{throw new Error(en(`Couldn't create a new branch with name '${ye}'`,zt))}),await q.repos.createOrUpdateFileContents({owner:mt,repo:dt,path:Se,message:It,content:o.DS.encode(Jt),branch:ye}).catch(zt=>{throw new Error(en(`Couldn't create a commit with ${Se} file added`,zt))}),{link:(await q.pulls.create({owner:mt,repo:dt,title:It,head:ye,body:Wt,base:vt.data.default_branch}).catch(zt=>{throw new Error(en(`Couldn't create a pull request for ${ye} branch`,zt))})).data.html_url,location:`https://${N.host}/${mt}/${dt}/blob/${vt.data.default_branch}/${Se}`}}}function en(Ge,Je){return`${Ge}, received http response status code ${Je.status}: ${Je.message}`}const on=(0,e.NT)({id:"catalog-import"}),gn=(0,e.rx)({id:"catalog-import",apis:[(0,e.ni)({api:le,deps:{discoveryApi:e.NW,scmAuthApi:n.Om,identityApi:e.$4,scmIntegrationsApi:n.q3,catalogApi:p.Ah,configApi:e.Ds},factory:({discoveryApi:Ge,scmAuthApi:Je,identityApi:mt,scmIntegrationsApi:dt,catalogApi:It,configApi:Wt})=>new Dt({discoveryApi:Ge,scmAuthApi:Je,scmIntegrationsApi:dt,identityApi:mt,catalogApi:It,configApi:Wt})})],routes:{importPage:on}}),Ye=gn.provide((0,e.P4)({name:"CatalogImportPage",component:()=>t.e(4942).then(t.bind(t,84942)).then(Ge=>Ge.ImportPage),mountPoint:on}));function Y(){const Ge=(0,e.h_)(e.Ds);return at(Ge)}const ce=Ge=>{const{exampleLocationUrl:Je="https://github.com/backstage/backstage/blob/master/catalog-info.yaml",exampleRepositoryUrl:mt="https://github.com/backstage/backstage"}=Ge,dt=(0,e.h_)(e.Ds),It=dt.getOptional("app.title")||"Backstage",Wt=(0,e.h_)(le),xt=dt.getConfig("integrations").has("github"),N=Y();return U.createElement(y.rJ,{title:"Register an existing component",deepLink:{title:"Learn more about the Software Catalog",link:"https://backstage.io/docs/features/software-catalog/software-catalog-overview"}},U.createElement(h.Z,{variant:"body2",paragraph:!0},"Enter the URL to your source code repository to add it to ",It,"."),U.createElement(h.Z,{variant:"h6"},"Link to an existing entity file"),U.createElement(h.Z,{variant:"subtitle2",color:"textSecondary",paragraph:!0},"Example: ",U.createElement("code",null,Je)),U.createElement(h.Z,{variant:"body2",paragraph:!0},"The wizard analyzes the file, previews the entities, and adds them to the ",It," catalog."),xt&&U.createElement(U.Fragment,null,U.createElement(h.Z,{variant:"h6"},"Link to a repository"," ",U.createElement(M.Z,{label:"GitHub only",variant:"outlined",size:"small"})),U.createElement(h.Z,{variant:"subtitle2",color:"textSecondary",paragraph:!0},"Example: ",U.createElement("code",null,mt)),U.createElement(h.Z,{variant:"body2",paragraph:!0},"The wizard discovers all ",U.createElement("code",null,N)," files in the repository, previews the entities, and adds them to the ",It," ","catalog."),Wt.preparePullRequest&&U.createElement(h.Z,{variant:"body2",paragraph:!0},"If no entities are found, the wizard will prepare a Pull Request that adds an example ",U.createElement("code",null,N)," and prepares the ",It," catalog to load all entities as soon as the Pull Request is merged.")))};function _e(Ge){return{activeFlow:"unknown",activeState:"analyze",analysisUrl:Ge,previousStates:[]}}function Ze(Ge,Je){switch(Je.type){case"onAnalysis":{if(Ge.activeState!=="analyze")return Ge;const{activeState:mt,previousStates:dt}=Ge,[It,Wt,Jt,xt]=Je.args;return{...Ge,analysisUrl:Wt,activeFlow:It,analyzeResult:Jt,prepareResult:xt==null?void 0:xt.prepareResult,activeState:(xt==null?void 0:xt.prepareResult)===void 0?"prepare":"review",previousStates:dt.concat(mt)}}case"onPrepare":{if(Ge.activeState!=="prepare")return Ge;const{activeState:mt,previousStates:dt}=Ge,[It,Wt]=Je.args;return{...Ge,prepareResult:It,activeState:"review",previousStates:Wt!=null&&Wt.notRepeatable?[]:dt.concat(mt)}}case"onReview":{if(Ge.activeState!=="review")return Ge;const{activeState:mt,previousStates:dt}=Ge,[It]=Je.args;return{...Ge,reviewResult:It,activeState:"finish",previousStates:dt.concat(mt)}}case"onGoBack":{const{activeState:mt,previousStates:dt}=Ge;return{...Ge,activeState:dt.length>0?dt[dt.length-1]:mt,previousStates:dt.slice(0,dt.length-1)}}case"onReset":return{..._e(Je.initialUrl),prepareResult:Ge.prepareResult};default:throw new Error}}const ie=Ge=>{const[Je,mt]=(0,U.useReducer)(Ze,Ge==null?void 0:Ge.initialUrl,_e),{activeFlow:dt,activeState:It,analysisUrl:Wt,previousStates:Jt}=Je;return{activeFlow:dt,activeState:It,activeStepNumber:["analyze","prepare","review","finish"].indexOf(It),analysisUrl:Wt,analyzeResult:Je.analyzeResult,prepareResult:Je.prepareResult,reviewResult:Je.reviewResult,onAnalysis:(xt,N,F,q)=>mt({type:"onAnalysis",args:[xt,N,F,q]}),onPrepare:(xt,N)=>mt({type:"onPrepare",args:[xt,N]}),onReview:xt=>mt({type:"onReview",args:[xt]}),onGoBack:Jt.length>0?()=>mt({type:"onGoBack"}):void 0,onReset:()=>mt({type:"onReset",initialUrl:Ge==null?void 0:Ge.initialUrl})}},de=(0,Re.Z)(Ge=>({wrapper:{marginTop:Ge.spacing(1),marginRight:Ge.spacing(1),position:"relative"},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},button:{marginTop:Ge.spacing(1),marginRight:Ge.spacing(1)}})),ve=Ge=>{const{loading:Je,...mt}=Ge,dt=de();return U.createElement("div",{className:dt.wrapper},U.createElement(L.Z,{color:"primary",variant:"contained",...mt,disabled:Ge.disabled||Ge.loading}),Ge.loading&&U.createElement($.Z,{size:"1.5rem",className:dt.buttonProgress}),Ge.loading)},ge=Ge=>{const Je=de();return U.createElement(L.Z,{variant:"outlined",className:Je.button,...Ge},Ge.children||"Back")},nt=(0,Re.Z)(Ge=>({nested:{paddingLeft:Ge.spacing(4)}}));function bt(Ge){return Ge.sort((Je,mt)=>(0,p.$3)(Je).localeCompare((0,p.$3)(mt)))}const kt=Ge=>{const{locations:Je,collapsed:mt=!1,locationListItemIcon:dt,onItemClick:It,firstListItem:Wt,withLinks:Jt=!1}=Ge,xt=(0,e.qD)(),N=nt(),[F,q]=(0,U.useState)([]),ye=Se=>{q(vt=>vt.includes(Se)?vt.filter(Rt=>Rt!==Se):vt.concat(Se))};return U.createElement(J.Z,null,Wt,Je.map(Se=>U.createElement(U.Fragment,{key:Se.target},U.createElement(g.Z,{dense:!0,button:Boolean(It),onClick:()=>It==null?void 0:It.call(void 0,Se.target)},U.createElement(S.Z,null,dt(Se.target)),U.createElement(E.Z,{primary:Se.target,secondary:`Entities: ${Se.entities.length}`}),mt&&U.createElement(I.Z,null,U.createElement(D.Z,{edge:"end",onClick:()=>ye(Se.target)},F.includes(Se.target)?U.createElement(Ie.Z,null):U.createElement(fe.Z,null)))),U.createElement(T.Z,{in:!mt||F.includes(Se.target),timeout:"auto",unmountOnExit:!0},U.createElement(J.Z,{component:"div",disablePadding:!0,dense:!0},bt(Se.entities).map(vt=>{var Rt;const Nt=(Rt=xt.getSystemIcon(`kind:${vt.kind.toLocaleLowerCase("en-US")}`))!=null?Rt:A.Z;return U.createElement(g.Z,{key:(0,p.$3)(vt),className:N.nested,...Jt?{component:p.dx,entityRef:vt,button:Jt}:{}},U.createElement(S.Z,null,U.createElement(Nt,null)),U.createElement(E.Z,{primary:(0,p.$3)(vt)}))}))))))},ln=({prepareResult:Ge,onReset:Je})=>{const mt=U.createElement(i.Z,{container:!0,spacing:0},U.createElement(ge,{onClick:Je},"Register another"));if(Ge.type==="repository")return U.createElement(U.Fragment,null,U.createElement(h.Z,{paragraph:!0},"The following Pull Request has been opened:"," ",U.createElement(y.rU,{to:Ge.pullRequest.url,target:"_blank",rel:"noreferrer"},Ge.pullRequest.url)),U.createElement(h.Z,{paragraph:!0},"Your entities will be imported as soon as the Pull Request is merged."),mt);const[dt,It]=re()(Ge.locations,Wt=>Wt.exists);return U.createElement(U.Fragment,null,It.length>0&&U.createElement(U.Fragment,null,U.createElement(h.Z,null,"The following entities have been added to the catalog:"),U.createElement(kt,{locations:It,locationListItemIcon:()=>U.createElement(w.Z,null),withLinks:!0})),dt.length>0&&U.createElement(U.Fragment,null,U.createElement(h.Z,null,"A refresh was triggered for the following locations:"),U.createElement(kt,{locations:dt,locationListItemIcon:()=>U.createElement(w.Z,null),withLinks:!0})),mt)},Ut=Ge=>{const{onAnalysis:Je,analysisUrl:mt="",disablePullRequest:dt=!1,exampleLocationUrl:It="https://github.com/backstage/backstage/blob/master/catalog-info.yaml"}=Ge,Wt=(0,e.h_)(e.VE),Jt=(0,e.h_)(le),{register:xt,handleSubmit:N,formState:{errors:F},watch:q}=(0,Pe.cI)({mode:"onTouched",defaultValues:{url:mt}}),[ye,Se]=(0,U.useState)(!1),[vt,Rt]=(0,U.useState)(void 0),Nt=(0,U.useCallback)(async({url:zt})=>{var xn,zn,st;Se(!0);try{const Ue=await Jt.analyzeUrl(zt);switch(Ue.type){case"repository":!dt&&Ue.generatedEntities.length>0?Je("no-location",zt,Ue):(Rt("Couldn't generate entities for your repository"),Se(!1));break;case"locations":{Ue.locations.length===1?Je("single-location",zt,Ue,{prepareResult:Ue}):Ue.locations.length>1?Je("multiple-locations",zt,Ue):(Rt("There are no entities at this location"),Se(!1));break}default:{const oe=`Received unknown analysis result of type ${Ue.type}. Please contact the support team.`;Rt(oe),Se(!1),Wt.post(new Error(oe));break}}}catch(Ue){Rt((st=(zn=(xn=Ue==null?void 0:Ue.data)==null?void 0:xn.error)==null?void 0:zn.message)!=null?st:Ue.message),Se(!1)}},[Jt,dt,Wt,Je]);return U.createElement("form",{onSubmit:N(Nt)},U.createElement(O.Z,{...xe(xt("url",{required:!0,validate:{httpsValidator:zt=>typeof zt=="string"&&zt.match(/^http[s]?:\/\//)!==null||"Must start with http:// or https://."}})),fullWidth:!0,id:"url",label:"Repository URL",placeholder:It,helperText:"Enter the full path to your entity file to start tracking your component",margin:"normal",variant:"outlined",error:Boolean(F.url),required:!0}),F.url&&U.createElement(W.Z,{error:!0},F.url.message),vt&&U.createElement(W.Z,{error:!0},vt),U.createElement(i.Z,{container:!0,spacing:0},U.createElement(ve,{disabled:Boolean(F.url)||!q("url"),loading:ye,type:"submit"},"Analyze")))},Mt=Ge=>{const{name:Je,options:mt,required:dt,errors:It,rules:Wt,loading:Jt=!1,loadingText:xt,helperText:N,errorHelperText:F,textFieldProps:q={}}=Ge;return U.createElement(Pe.Qr,{name:Je,rules:Wt,render:({field:{onChange:ye}})=>U.createElement(ae.ZP,{loading:Jt,loadingText:xt,options:mt||[],autoSelect:!0,freeSolo:!0,onChange:(Se,vt)=>ye(vt),renderInput:Se=>U.createElement(O.Z,{...Se,helperText:(It==null?void 0:It[Je])&&F||N,error:Boolean(It==null?void 0:It[Je]),margin:"normal",variant:"outlined",required:dt,InputProps:{...Se.InputProps,endAdornment:U.createElement(U.Fragment,null,Jt?U.createElement($.Z,{color:"inherit",size:"1em"}):null,Se.InputProps.endAdornment)},...q})})})},Gt=Ge=>{const{defaultValues:Je,onSubmit:mt,render:dt}=Ge,It=(0,Pe.cI)({mode:"onTouched",defaultValues:Je}),{handleSubmit:Wt,watch:Jt,control:xt,register:N,formState:F,setValue:q}=It;return U.createElement(Pe.RV,{...It},U.createElement("form",{onSubmit:Wt(mt)},dt({values:Jt(),formState:F,register:N,control:xt,setValue:q})))},bn=Ge=>{const{repositoryUrl:Je,entities:mt,classes:dt}=Ge,It=Y();return U.createElement(Ce.Z,{variant:"outlined",className:dt==null?void 0:dt.card},U.createElement($e.Z,{title:U.createElement("code",null,`${(0,v.trimEnd)(Je,"/")}/${It}`)}),U.createElement(Qe.Z,{className:dt==null?void 0:dt.cardContent},U.createElement(y.Oi,{text:mt.map(Wt=>Et().stringify(Wt)).join(`---
`).trim(),language:"yaml"})))},vn=Ge=>{const{title:Je,description:mt,classes:dt}=Ge;return U.createElement(Ce.Z,{variant:"outlined",className:dt==null?void 0:dt.card},U.createElement($e.Z,{title:Je,subheader:"Create a new Pull Request"}),U.createElement(Qe.Z,{className:dt==null?void 0:dt.cardContent},U.createElement(y.SA,{content:mt})))},Me=(0,Re.Z)(Ge=>({previewCard:{marginTop:Ge.spacing(1)},previewCardContent:{paddingTop:0}}));function ht(Ge,Je,mt){return Ge.map(dt=>({...dt,apiVersion:dt.apiVersion,kind:dt.kind,metadata:{...dt.metadata,name:Je},spec:{...dt.spec,...mt?{owner:mt}:{}}}))}const _t=Ge=>{var Je,mt,dt,It,Wt,Jt;const{analyzeResult:xt,onPrepare:N,onGoBack:F,renderFormFields:q}=Ge,ye=Me(),Se=(0,e.h_)(p.Ah),vt=(0,e.h_)(le),Rt=(0,e.h_)(e.VE),[Nt,zt]=(0,U.useState)(!1),[xn,zn]=(0,U.useState)(),st=Y(),{loading:Ue,value:oe,error:he}=(0,ee.default)(()=>vt.preparePullRequest(),[vt.preparePullRequest]);(0,U.useEffect)(()=>{he&&Rt.post(he)},[he,Rt]);const{loading:De,value:we}=(0,ee.default)(async()=>(await Se.getEntities({filter:{kind:"group"}})).items.map(Be=>(0,p.$3)(Be,{defaultKind:"group"})).sort()),Ne=(0,U.useCallback)(async Ke=>{zt(!0);try{const Be=await vt.submitPullRequest({repositoryUrl:xt.url,title:Ke.title,body:Ke.body,fileContent:ht(xt.generatedEntities,Ke.componentName,Ke.owner).map(ct=>Et().stringify(ct)).join(`---
`)});N({type:"repository",url:xt.url,integrationType:xt.integrationType,pullRequest:{url:Be.link},locations:[{target:Be.location,entities:ht(xt.generatedEntities,Ke.componentName,Ke.owner).map(ct=>({kind:ct.kind,namespace:ct.metadata.namespace,name:ct.metadata.name}))}]},{notRepeatable:!0})}catch(Be){(0,te.BD)(Be),zn(Be.message),zt(!1)}},[xt.generatedEntities,xt.integrationType,xt.url,vt,N]);return U.createElement(U.Fragment,null,U.createElement(h.Z,null,"You entered a link to a ",xt.integrationType," repository but a"," ",U.createElement("code",null,st)," could not be found. Use this form to open a Pull Request that creates one."),!Ue&&U.createElement(Gt,{onSubmit:Ne,defaultValues:{title:(Je=oe==null?void 0:oe.title)!=null?Je:"",body:(mt=oe==null?void 0:oe.body)!=null?mt:"",owner:((It=(dt=xt.generatedEntities[0])==null?void 0:dt.spec)==null?void 0:It.owner)||"",componentName:((Jt=(Wt=xt.generatedEntities[0])==null?void 0:Wt.metadata)==null?void 0:Jt.name)||"",useCodeowners:!1},render:({values:Ke,formState:Be,register:ct,setValue:Kt})=>U.createElement(U.Fragment,null,q({values:Ke,formState:Be,register:ct,setValue:Kt,groups:we!=null?we:[],groupsLoading:De}),U.createElement(it.Z,{marginTop:2},U.createElement(h.Z,{variant:"h6"},"Preview Pull Request")),U.createElement(vn,{title:Ke.title,description:Ke.body,classes:{card:ye.previewCard,cardContent:ye.previewCardContent}}),U.createElement(it.Z,{marginTop:2,marginBottom:1},U.createElement(h.Z,{variant:"h6"},"Preview Entities")),U.createElement(bn,{entities:ht(xt.generatedEntities,Ke.componentName,Ke.owner),repositoryUrl:xt.url,classes:{card:ye.previewCard,cardContent:ye.previewCardContent}}),xn&&U.createElement(W.Z,{error:!0},xn),U.createElement(i.Z,{container:!0,spacing:0},F&&U.createElement(ge,{onClick:F,disabled:Nt}),U.createElement(ve,{type:"submit",disabled:Boolean(Be.errors.title||Be.errors.body||Be.errors.owner),loading:Nt},"Create PR")))}))},tn=({analyzeResult:Ge,prepareResult:Je,onPrepare:mt,onGoBack:dt})=>{const[It,Wt]=(0,U.useState)((Je==null?void 0:Je.locations.map(ye=>ye.target))||[]),[Jt,xt]=re()(Ge==null?void 0:Ge.locations,ye=>ye.exists),N=(0,U.useCallback)(async()=>{mt({type:"locations",locations:xt.filter(ye=>It.includes(ye.target))})},[xt,mt,It]),F=ye=>{Wt(Se=>Se.includes(ye)?Se.filter(vt=>vt!==ye):Se.concat(ye))},q=()=>{Wt(ye=>ye.length<xt.length?xt.map(Se=>Se.target):[])};return U.createElement(U.Fragment,null,xt.length>0&&U.createElement(U.Fragment,null,U.createElement(h.Z,null,"Select one or more locations that are present in your git repository:"),U.createElement(kt,{firstListItem:U.createElement(g.Z,{dense:!0,button:!0,onClick:q},U.createElement(S.Z,null,U.createElement(lt.Z,{edge:"start",checked:It.length===xt.length,indeterminate:It.length>0&&It.length<xt.length,tabIndex:-1,disableRipple:!0})),U.createElement(E.Z,{primary:"Select All"})),onItemClick:F,locations:xt,locationListItemIcon:ye=>U.createElement(lt.Z,{edge:"start",checked:It.includes(ye),tabIndex:-1,disableRipple:!0}),collapsed:!0})),Jt.length>0&&U.createElement(U.Fragment,null,U.createElement(h.Z,null,"These locations already exist in the catalog:"),U.createElement(kt,{locations:Jt,locationListItemIcon:()=>U.createElement(w.Z,null),withLinks:!0,collapsed:!0})),U.createElement(i.Z,{container:!0,spacing:0},dt&&U.createElement(ge,{onClick:dt}),U.createElement(ve,{disabled:It.length===0,onClick:N},"Review")))},Bt=({prepareResult:Ge,onReview:Je,onGoBack:mt})=>{const dt=(0,e.h_)(p.Ah),Wt=(0,e.h_)(e.Ds).getOptional("app.title")||"Backstage",[Jt,xt]=(0,U.useState)(!1),[N,F]=(0,U.useState)(),q=!!(Ge.type==="locations"&&Ge.locations.some(Se=>Se.exists)),ye=(0,U.useCallback)(async()=>{xt(!0);try{let Se=new Array;Ge.type==="locations"&&(Se=await Promise.all(Ge.locations.filter(Rt=>Rt.exists).map(async Rt=>{var Nt;const zt=(0,Le.eE)((Nt=Rt.entities[0])!=null?Nt:Rt);return await dt.refreshEntity(zt),{target:Rt.target}})));const vt=await Promise.all(Ge.locations.filter(Rt=>!Rt.exists).map(async Rt=>{const Nt=await dt.addLocation({type:"url",target:Rt.target});return{target:Nt.location.target,entities:Nt.entities}}));Je({...Ge,refreshed:Se,locations:vt})}catch(Se){(0,te.BD)(Se),Ge.type==="repository"&&Se.message.startsWith("Location was added but has no entities specified yet")?Je({...Ge,locations:Ge.locations.map(vt=>({target:vt.target,entities:[]}))}):(F(Se.message),xt(!1))}},[Ge,Je,dt]);return U.createElement(U.Fragment,null,Ge.type==="repository"&&U.createElement(U.Fragment,null,U.createElement(h.Z,{paragraph:!0},"The following Pull Request has been opened:"," ",U.createElement(y.rU,{to:Ge.pullRequest.url,target:"_blank",rel:"noopener noreferrer"},Ge.pullRequest.url)),U.createElement(h.Z,{paragraph:!0},"You can already import the location and ",Wt," will fetch the entities as soon as the Pull Request is merged.")),U.createElement(h.Z,null,q?"The following locations already exist in the catalog:":"The following entities will be added to the catalog:"),U.createElement(kt,{locations:Ge.locations,locationListItemIcon:()=>U.createElement(w.Z,null)}),N&&U.createElement(W.Z,{error:!0},N),U.createElement(i.Z,{container:!0,spacing:0},mt&&U.createElement(ge,{onClick:mt,disabled:Jt}),U.createElement(ve,{disabled:Jt,loading:Jt,onClick:()=>ye()},q?"Refresh":"Import")))};function hn(Ge,Je){switch(Ge){case"single-location":return{...Je,prepare:()=>({stepLabel:U.createElement(qe.Z,{optional:U.createElement(h.Z,{variant:"caption"},"Discovered Locations: 1")},"Select Locations"),content:U.createElement(U.Fragment,null)})};case"multiple-locations":return{...Je,prepare:(mt,dt)=>mt.analyzeResult.type!=="locations"?Je.prepare(mt,dt):{stepLabel:U.createElement(qe.Z,{optional:U.createElement(h.Z,{variant:"caption"},"Discovered Locations: ",mt.analyzeResult.locations.length)},"Select Locations"),content:U.createElement(tn,{analyzeResult:mt.analyzeResult,prepareResult:mt.prepareResult,onPrepare:mt.onPrepare,onGoBack:mt.onGoBack})}};case"no-location":return{...Je,prepare:(mt,dt)=>mt.analyzeResult.type!=="repository"?Je.prepare(mt,dt):{stepLabel:U.createElement(qe.Z,null,"Create Pull Request"),content:U.createElement(_t,{analyzeResult:mt.analyzeResult,onPrepare:mt.onPrepare,onGoBack:mt.onGoBack,renderFormFields:({values:It,setValue:Wt,formState:Jt,groupsLoading:xt,groups:N,register:F})=>U.createElement(U.Fragment,null,U.createElement(it.Z,{marginTop:2},U.createElement(h.Z,{variant:"h6"},"Pull Request Details")),U.createElement(O.Z,{...xe(F("title",{required:!0})),label:"Pull Request Title",placeholder:"Add Backstage catalog entity descriptor files",margin:"normal",variant:"outlined",fullWidth:!0,error:Boolean(Jt.errors.title),required:!0}),U.createElement(O.Z,{...xe(F("body",{required:!0})),label:"Pull Request Body",placeholder:"A describing text with Markdown support",margin:"normal",variant:"outlined",fullWidth:!0,error:Boolean(Jt.errors.body),multiline:!0,required:!0}),U.createElement(it.Z,{marginTop:2},U.createElement(h.Z,{variant:"h6"},"Entity Configuration")),U.createElement(O.Z,{...xe(F("componentName",{required:!0})),label:"Name of the created component",placeholder:"my-component",margin:"normal",variant:"outlined",fullWidth:!0,error:Boolean(Jt.errors.componentName),required:!0}),!It.useCodeowners&&U.createElement(Mt,{name:"owner",errors:Jt.errors,options:N||[],loading:xt,loadingText:"Loading groups\u2026",helperText:"Select an owner from the list or enter a reference to a Group or a User",errorHelperText:"required value",textFieldProps:{label:"Entity Owner",placeholder:"my-group"},rules:{required:!0},required:!0}),U.createElement($t.Z,{control:U.createElement(lt.Z,{...xe(F("useCodeowners")),onChange:(q,ye)=>{ye&&Wt("owner","")}}),label:U.createElement(U.Fragment,null,"Use ",U.createElement("em",null,"CODEOWNERS")," file as Entity Owner")}),U.createElement(W.Z,null,"WARNING: This may fail if no CODEOWNERS file is found at the target location."))})}};default:return Je}}const kn={analyze:(Ge,{apis:Je})=>({stepLabel:U.createElement(qe.Z,null,"Select URL"),content:U.createElement(Ut,{key:"analyze",analysisUrl:Ge.analysisUrl,onAnalysis:Ge.onAnalysis,disablePullRequest:!Je.catalogImportApi.preparePullRequest})}),prepare:Ge=>({stepLabel:U.createElement(qe.Z,{optional:U.createElement(h.Z,{variant:"caption"},"Optional")},"Import Actions"),content:U.createElement(ge,{onClick:Ge.onGoBack})}),review:Ge=>({stepLabel:U.createElement(qe.Z,null,"Review"),content:U.createElement(Bt,{prepareResult:Ge.prepareResult,onReview:Ge.onReview,onGoBack:Ge.onGoBack})}),finish:Ge=>({stepLabel:U.createElement(qe.Z,null,"Finish"),content:U.createElement(ln,{prepareResult:Ge.prepareResult,onReset:Ge.onReset})})},Bn=(0,Re.Z)(()=>({stepperRoot:{padding:0}})),Un=Ge=>{const{initialUrl:Je,generateStepper:mt=hn,variant:dt}=Ge,It=(0,e.h_)(le),Wt=Bn(),Jt=ie({initialUrl:Je}),xt=(0,U.useMemo)(()=>mt(Jt.activeFlow,kn),[mt,Jt.activeFlow]),N=F=>U.createElement(Ot.Z,null,F.stepLabel,U.createElement(pn.Z,null,F.content));return U.createElement(y.rJ,{variant:dt},U.createElement(_n.Z,{classes:{root:Wt.stepperRoot},activeStep:Jt.activeStepNumber,orientation:"vertical"},N(xt.analyze(Jt,{apis:{catalogImportApi:It}})),N(xt.prepare(Jt,{apis:{catalogImportApi:It}})),N(xt.review(Jt,{apis:{catalogImportApi:It}})),N(xt.finish(Jt,{apis:{catalogImportApi:It}}))))},An=()=>{const Je=(0,e.h_)(e.Ds).getOptional("app.title")||"Backstage";return U.createElement(y.T3,{themeId:"home"},U.createElement(y.h4,{title:"Register an existing component"}),U.createElement(y.VY,null,U.createElement(y.yW,{title:`Start tracking your component in ${Je}`},U.createElement(y.qt,null,"Start tracking your component in ",Je," by adding it to the software catalog.")),U.createElement(i.Z,{container:!0,spacing:2,direction:"row-reverse"},U.createElement(i.Z,{item:!0,xs:12,md:4,lg:6,xl:8},U.createElement(ce,null)),U.createElement(i.Z,{item:!0,xs:12,md:8,lg:6,xl:4},U.createElement(Un,null)))))}},73495:function(Lt,c,t){t.d(c,{$3:function(){return Nt},Ah:function(){return Bt},CR:function(){return Kt},CV:function(){return N},EW:function(){return Ra},LH:function(){return Ct},N$:function(){return ot},UO:function(){return ye},U_:function(){return xr},Uh:function(){return Ne},X2:function(){return dt},ZW:function(){return ke},_i:function(){return An},ce:function(){return It},df:function(){return l},dq:function(){return Ae},dx:function(){return zt},eK:function(){return Be},h$:function(){return Je},hF:function(){return xt},hd:function(){return Rt},n3:function(){return e.n3},nN:function(){return ut},p3:function(){return hn},pp:function(){return _a},rI:function(){return xn},sL:function(){return Jn},tW:function(){return wt},u3:function(){return yn},wi:function(){return vt},wp:function(){return Se},xE:function(){return sr},zo:function(){return zn}});var e=t(88285),n=t(30705),p=t(82394),a=t.n(p),o=t(2784),m=t(41156),u=t(60364),v=t(77277),d=t(4190),y=t(95544),h=t(90436),M=t(60905),L=t(80030),$=t(79692),J=t(5806),g=t(21324),S=t(86619),E=t(15223),I=t(42494),D=t(29611),T=t(50581),i=t(61837),O=t(15459),W=t(55999),Ce=t(49378),$e=t(54506),Qe=t(94339),it=t(24579),lt=t(38402),qe=t(86136),$t=t(11776),Ot=t(8629),pn=t(79249),_n=t(38724),U=t(99152),Re=t(6487),w=t(49429),Ie=t(85256),fe=t(12231),A=t(9520),H=t(36444),re=t(99688),Pe=t(88013),ae=t(18473),Te=t(76635),Et=t.n(Te),te=t(19126),ee=t.n(te),Le=t(10289),le=t(69294),Q=t(48760),xe=t(90736),at=t(34520),Zt=t(64279),Dt=t(18149),en=t.n(Dt),on=t(829),gn=t.n(on),Ye=t(49558),Y=t(72164),ce=t(56563),_e=t(19996),Ze=t(25505),ie=t(38016),de=t(33375),ve=t(21853),ge=t(82108),nt=t.n(ge),bt=t(11640),kt=t(28347),ln=t(72779),Ut=t.n(ln),Mt=t(39412),Gt=t(27685),bn=t(3440),vn=t.n(bn),Me=t(60155),ht=t.n(Me),_t=t(32272),tn=t(47603);const Bt=(0,n.T0)({id:"plugin.catalog.service"}),hn=(0,n.T0)({id:"catalog-react.starred-entities"});class kn{constructor(){this.starredEntities=new Set,this.subscribers=new Set,this.observable=new ObservableImpl(be=>(be.next(new Set(this.starredEntities)),this.subscribers.add(be),()=>{this.subscribers.delete(be)}))}async toggleStarred(be){this.starredEntities.delete(be)||this.starredEntities.add(be);for(const He of this.subscribers)He.next(new Set(this.starredEntities))}starredEntitie$(){return this.observable}}const Bn=ne=>{const be=(0,m.Z)(Tt=>Tt.breakpoints.down("md")),He=(0,u.Z)(),[We,pt]=(0,o.useState)(!1);return be?o.createElement(o.Fragment,null,o.createElement(v.Z,{style:{marginTop:He.spacing(1),marginLeft:He.spacing(1)},onClick:()=>pt(!0),startIcon:o.createElement(H.Z,null)},"Filters"),o.createElement(d.ZP,{open:We,onClose:()=>pt(!1),anchor:"left",disableAutoFocus:!0,keepMounted:!0,variant:"temporary"},o.createElement(y.Z,{m:2},o.createElement(h.Z,{variant:"h6",component:"h2",style:{marginBottom:He.spacing(1)}},"Filters"),ne.children))):o.createElement(M.Z,{item:!0,lg:2},ne.children)},Un=ne=>o.createElement(M.Z,{item:!0,xs:12,lg:10},ne.children),An=ne=>o.createElement(M.Z,{container:!0,style:{position:"relative"}},ne.children);An.Filters=Bn,An.Content=Un;const Ge=(0,ae.CT)("entity-context"),Je=({children:ne,entity:be,loading:He,error:We,refresh:pt})=>{const Tt={entity:be,loading:He,error:We,refresh:pt};return o.createElement(Ge.Provider,{value:(0,ae.EI)({1:Tt})},ne)},mt=ne=>React.createElement(Je,{entity:ne.entity,loading:!Boolean(ne.entity),error:void 0,refresh:void 0,children:ne.children});function dt(){const ne=(0,ae.Vt)("entity-context");if(!ne)throw new Error("Entity context is not available");const be=ne.atVersion(1);if(!be)throw new Error("EntityContext v1 not available");if(!be.entity)throw new Error("useEntity hook is being called outside of an EntityLayout where the entity has not been loaded. If this is intentional, please use useAsyncEntity instead.");return{entity:be.entity}}function It(){const ne=(0,ae.Vt)("entity-context");if(!ne)throw new Error("Entity context is not available");const be=ne.atVersion(1);if(!be)throw new Error("EntityContext v1 not available");const{entity:He,loading:We,error:pt,refresh:Tt}=be;return{entity:He,loading:We,error:pt,refresh:Tt}}function Wt(ne){return ne.reduce((be,He)=>({...be,...He.getCatalogFilters?He.getCatalogFilters():{}}),{})}function Jt(ne){return be=>ne.every(He=>!He.filterEntity||He.filterEntity(be))}function xt(ne,be,He){var We;let pt=((We=ne==null?void 0:ne.relations)==null?void 0:We.filter(Tt=>Tt.type===be).map(Tt=>(0,at.of)(Tt.targetRef)))||[];return He!=null&&He.kind&&(pt=pt.filter(Tt=>Tt.kind.toLocaleLowerCase("en-US")===He.kind.toLocaleLowerCase("en-US"))),pt}function N(ne,be){var He;const We=(He=ne.metadata.annotations)==null?void 0:He[at.M6];if(!!We)try{const pt=(0,at.Ou)(We),Tt=be.byUrl(pt.target);return{locationTargetUrl:pt.target,integrationType:Tt==null?void 0:Tt.type}}catch{return}}function F(ne,be){const He=new Set([...xt(ne,RELATION_MEMBER_OF,{kind:"group"}),...ne?[getCompoundEntityRef(ne)]:[]].map(stringifyEntityRef)),We=xt(be,RELATION_OWNED_BY).map(stringifyEntityRef);for(const pt of We)if(He.has(pt))return!0;return!1}const q=(0,o.createContext)(void 0),ye=({children:ne})=>{const be=(0,xe.default)(),He=(0,n.h_)(Bt),[We,pt]=(0,o.useState)({}),Tt=(0,Le.TH)(),Pt=(0,o.useMemo)(()=>{var Zn;return(Zn=ee().parse(Tt.search,{ignoreQueryPrefix:!0}).filters)!=null?Zn:{}},[Tt]),[Yt,En]=(0,o.useState)(()=>({appliedFilters:{},entities:[],backendEntities:[]})),[{loading:sn,error:un},an]=(0,le.default)(async()=>{var Zn;const Pn=(0,Te.compact)(Object.values(We)),Hn=Jt(Pn),rr=Wt(Pn),Mr=Wt((0,Te.compact)(Object.values(Yt.appliedFilters))),Ir=Object.keys(We).reduce((Tr,kr)=>{const Sr=We[kr];return Sr!=null&&Sr.toQueryValue&&(Tr[kr]=Sr.toQueryValue()),Tr},{});if((0,Te.isEqual)(Mr,rr))En({appliedFilters:We,backendEntities:Yt.backendEntities,entities:Yt.backendEntities.filter(Hn)});else{const Tr=await He.getEntities({filter:rr});En({appliedFilters:We,backendEntities:Tr.items,entities:Tr.items.filter(Hn)})}if(be()){const Tr=ee().parse(Tt.search,{ignoreQueryPrefix:!0}),kr=ee().stringify({...Tr,filters:Ir},{addQueryPrefix:!0,arrayFormat:"repeat"}),Sr=`${window.location.pathname}${kr}`;(Zn=window.history)==null||Zn.replaceState(null,document.title,Sr)}},[He,Pt,We,Yt],{loading:!0});(0,Q.Z)(an,10,[We]);const Tn=(0,o.useCallback)(Zn=>{pt(Pn=>{const Hn=typeof Zn=="function"?Zn(Pn):Zn;return{...Pn,...Hn}})},[]),Yn=(0,o.useMemo)(()=>({filters:Yt.appliedFilters,entities:Yt.entities,backendEntities:Yt.backendEntities,updateFilters:Tn,queryParameters:Pt,loading:sn,error:un}),[Yt,Tn,Pt,sn,un]);return o.createElement(q.Provider,{value:Yn},ne)};function Se(){const ne=(0,o.useContext)(q);if(!ne)throw new Error("useEntityList must be used within EntityListProvider");return ne}const vt=(0,ae.uW)("catalog:entity-route-ref",()=>(0,n.NT)({id:"catalog:entity",params:["namespace","kind","name"]}));function Rt(ne){var be,He;return{kind:ne.kind.toLocaleLowerCase("en-US"),namespace:(He=(be=ne.metadata.namespace)==null?void 0:be.toLocaleLowerCase("en-US"))!=null?He:at.zG,name:ne.metadata.name}}function Nt(ne,be){const He=be==null?void 0:be.defaultKind;let We,pt,Tt;return"metadata"in ne?(We=ne.kind,pt=ne.metadata.namespace,Tt=ne.metadata.name):(We=ne.kind,pt=ne.namespace,Tt=ne.name),pt===at.zG&&(pt=void 0),We=We.toLocaleLowerCase("en-US"),We=He&&He.toLocaleLowerCase("en-US")===We?void 0:We,`${We?`${We}:`:""}${pt?`${pt}/`:""}${Tt}`}const zt=(0,o.forwardRef)((ne,be)=>{var He;const{entityRef:We,defaultKind:pt,title:Tt,children:Pt,...Yt}=ne,En=(0,n.tg)(vt);let sn,un,an;if(typeof We=="string"){const Pn=(0,at.of)(We);sn=Pn.kind,un=Pn.namespace,an=Pn.name}else"metadata"in We?(sn=We.kind,un=We.metadata.namespace,an=We.metadata.name):(sn=We.kind,un=We.namespace,an=We.name);sn=sn.toLocaleLowerCase("en-US"),un=(He=un==null?void 0:un.toLocaleLowerCase("en-US"))!=null?He:at.zG;const Tn={kind:sn,namespace:un,name:an},Yn=Nt({kind:sn,namespace:un,name:an},{defaultKind:pt}),Zn=o.createElement(Ye.rU,{...Yt,ref:be,to:En(Tn)},Pt,!Pt&&(Tt!=null?Tt:Yn));return Tt?o.createElement(L.ZP,{title:Yn},Zn):Zn});function xn(ne){const{entityRefs:be,defaultKind:He,...We}=ne;return o.createElement(o.Fragment,null,be.map((pt,Tt)=>o.createElement(o.Fragment,{key:Tt},Tt>0&&", ",o.createElement(zt,{...We,entityRef:pt,defaultKind:He}))))}class zn{constructor(be){this.value=be}getCatalogFilters(){return{kind:this.value}}toQueryValue(){return this.value}}class st{constructor(be){this.value=be}getTypes(){return Array.isArray(this.value)?this.value:[this.value]}getCatalogFilters(){return{"spec.type":this.getTypes()}}toQueryValue(){return this.getTypes()}}class Ue{constructor(be){this.values=be}filterEntity(be){return this.values.every(He=>{var We;return((We=be.metadata.tags)!=null?We:[]).includes(He)})}toQueryValue(){return this.values}}class oe{constructor(be){this.value=be}filterEntity(be){var He;const We=this.value.toLocaleUpperCase("en-US");return be.metadata.name.toLocaleUpperCase("en-US").includes(We)||`${be.metadata.title}`.toLocaleUpperCase("en-US").includes(We)||((He=be.metadata.tags)==null?void 0:He.join("").toLocaleUpperCase("en-US").indexOf(We))!==-1}}class he{constructor(be){this.values=be}filterEntity(be){return this.values.some(He=>xt(be,at.S4).some(We=>Nt(We,{defaultKind:"group"})===He))}toQueryValue(){return this.values}}class De{constructor(be){this.values=be}filterEntity(be){return this.values.some(He=>{var We;return((We=be.spec)==null?void 0:We.lifecycle)===He})}toQueryValue(){return this.values}}class we{constructor(be,He,We){this.value=be,this.isOwnedEntity=He,this.isStarredEntity=We}filterEntity(be){switch(this.value){case"owned":return this.isOwnedEntity(be);case"starred":return this.isStarredEntity(be);default:return!0}}toQueryValue(){return this.value}}function Ne(){var ne;const be=(0,n.h_)(Bt),{filters:{kind:He,type:We},queryParameters:{type:pt},updateFilters:Tt}=Se(),Pt=(0,o.useMemo)(()=>[pt].flat().filter(Boolean),[pt]),[Yt,En]=(0,o.useState)(Pt.length?Pt:(ne=We==null?void 0:We.getTypes())!=null?ne:[]);(0,o.useEffect)(()=>{Pt.length&&En(Pt)},[Pt]);const[sn,un]=(0,o.useState)([]),an=(0,o.useMemo)(()=>He==null?void 0:He.value,[He]),{error:Tn,loading:Yn,value:Zn}=(0,Zt.default)(async()=>an?await be.getEntityFacets({filter:{kind:an},facets:["spec.type"]}).then(rr=>rr.facets["spec.type"]||[]):[],[an,be]),Pn=(0,o.useRef)(Zn);return(0,o.useEffect)(()=>{const Hn=Pn.current;if(Pn.current=Zn,Yn||!an||Hn===Zn||!Zn)return;const rr=gn()(Zn,Ir=>-Ir.count).map(Ir=>Ir.value);un(rr);const Mr=Yt.filter(Ir=>rr.includes(Ir));en()(Yt,Mr)||En(Mr)},[Yn,an,Yt,En,Zn]),(0,o.useEffect)(()=>{Tt({type:Yt.length?new st(Yt):void 0})},[Yt,Tt]),{loading:Yn,error:Tn,availableTypes:sn,selectedTypes:Yt,setSelectedTypes:En}}const Ke=20;function Be(ne,be){var He,We;const pt=(He=be==null?void 0:be.type)==null?void 0:He.toLocaleLowerCase("en-US"),Tt=(We=be==null?void 0:be.kind)==null?void 0:We.toLocaleLowerCase("en-US"),Pt=(0,n.h_)(Bt),{loading:Yt,value:En,error:sn}=(0,Zt.default)(async()=>{var un;const an=(un=ne.relations)==null?void 0:un.map(Pn=>({type:Pn.type,target:(0,at.of)(Pn.targetRef)})).filter(Pn=>(!pt||Pn.type.toLocaleLowerCase("en-US")===pt)&&(!Tt||Pn.target.kind===Tt));if(!an)return[];const Tn=Object.values((0,Te.groupBy)(an,({target:Pn})=>`${Pn.kind}:${Pn.namespace}`.toLocaleLowerCase("en-US"))),Yn=[];for(const Pn of Tn)Yn.push({kind:Pn[0].target.kind,namespace:Pn[0].target.namespace,nameBatches:(0,Te.chunk)(Pn.map(Hn=>Hn.target.name),Ke)});return(await Promise.all(Yn.flatMap(Pn=>Pn.nameBatches.map(Hn=>Pt.getEntities({filter:{kind:Pn.kind,"metadata.namespace":Pn.namespace,"metadata.name":Hn}}))))).flatMap(Pn=>Pn.items)},[ne,pt,Tt]);return{entities:En,loading:Yt,error:sn}}function ct(ne){return typeof ne=="string"?ne:(0,at.eE)(ne)}function Kt(){const ne=(0,n.h_)(hn),be=(0,Y.Z)(ne.starredEntitie$(),new Set),He=(0,o.useCallback)(pt=>be.has(ct(pt)),[be]),We=(0,o.useCallback)(pt=>ne.toggleStarred(ct(pt)).then(),[ne]);return{starredEntities:be,toggleStarredEntity:We,isStarredEntity:He}}function mn(ne){return typeof ne=="string"?ne:(0,at.eE)(ne)}function se(ne){const be=(0,n.h_)(hn),[He,We]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{const Tt=be.starredEntitie$().subscribe({next(Pt){We(Pt.has(mn(ne)))}});return()=>{Tt.unsubscribe()}},[ne,be]),{toggleStarredEntity:(0,o.useCallback)(()=>be.toggleStarred(mn(ne)).then(),[ne,be]),isStarredEntity:He}}function ke(){const ne=(0,n.h_)(n.$4),{loading:be,value:He}=(0,Zt.default)(async()=>{const{ownershipEntityRefs:pt}=await ne.getBackstageIdentity();return pt},[]),We=(0,o.useMemo)(()=>{const pt=new Set(He!=null?He:[]);return Tt=>{const Pt=xt(Tt,at.S4).map(at.eE);for(const Yt of Pt)if(pt.has(Yt))return!0;return!1}},[He]);return(0,o.useMemo)(()=>({loading:be,isOwnedEntity:We}),[be,We])}function ot(ne){const{entity:be,loading:He,error:We}=It(),{allowed:pt,loading:Tt,error:Pt}=(0,ce.gI)({permission:ne,resourceRef:be?(0,at.eE)(be):void 0});return He||Tt?{loading:!0,allowed:!1}:We?{loading:!1,allowed:!1,error:We}:{loading:!1,allowed:pt,error:Pt}}const wt=ne=>{var be;const{initialFilter:He,hidden:We}=ne,{updateFilters:pt,queryParameters:{kind:Tt}}=Se(),[Pt]=(0,o.useState)((be=[Tt].flat()[0])!=null?be:He);return(0,o.useEffect)(()=>{pt({kind:Pt?new zn(Pt):void 0})},[Pt,pt]),We?null:o.createElement(re.Z,{severity:"warning"},"Kind filter not yet available")},Fe=(0,$.Z)({input:{}},{name:"CatalogReactEntityLifecyclePicker"}),ft=o.createElement(Ze.Z,{fontSize:"small"}),K=o.createElement(_e.Z,{fontSize:"small"}),l=()=>{var ne,be;const He=Fe(),{updateFilters:We,backendEntities:pt,filters:Tt,queryParameters:{lifecycles:Pt}}=Se(),Yt=(0,o.useMemo)(()=>[Pt].flat().filter(Boolean),[Pt]),[En,sn]=(0,o.useState)(Yt.length?Yt:(be=(ne=Tt.lifecycles)==null?void 0:ne.values)!=null?be:[]);(0,o.useEffect)(()=>{Yt.length&&sn(Yt)},[Yt]),(0,o.useEffect)(()=>{We({lifecycles:En.length?new De(En):void 0})},[En,We]);const un=(0,o.useMemo)(()=>[...new Set(pt.map(an=>{var Tn;return(Tn=an.spec)==null?void 0:Tn.lifecycle}).filter(Boolean))].sort(),[pt]);return un.length?o.createElement(y.Z,{pb:1,pt:1},o.createElement(h.Z,{variant:"button"},"Lifecycle"),o.createElement(Pe.ZP,{"aria-label":"Lifecycle",multiple:!0,options:un,value:En,onChange:(an,Tn)=>sn(Tn),renderOption:(an,{selected:Tn})=>o.createElement(J.Z,{control:o.createElement(g.Z,{icon:ft,checkedIcon:K,checked:Tn}),label:an}),size:"small",popupIcon:o.createElement(ie.Z,{"data-testid":"lifecycle-picker-expand"}),renderInput:an=>o.createElement(S.Z,{...an,className:He.input,variant:"outlined"})})):null},b=(0,$.Z)({input:{}},{name:"CatalogReactEntityOwnerPicker"}),x=o.createElement(Ze.Z,{fontSize:"small"}),G=o.createElement(_e.Z,{fontSize:"small"}),Ae=()=>{var ne,be;const He=b(),{updateFilters:We,backendEntities:pt,filters:Tt,queryParameters:{owners:Pt}}=Se(),Yt=(0,o.useMemo)(()=>[Pt].flat().filter(Boolean),[Pt]),[En,sn]=(0,o.useState)(Yt.length?Yt:(be=(ne=Tt.owners)==null?void 0:ne.values)!=null?be:[]);(0,o.useEffect)(()=>{Yt.length&&sn(Yt)},[Yt]),(0,o.useEffect)(()=>{We({owners:En.length?new he(En):void 0})},[En,We]);const un=(0,o.useMemo)(()=>[...new Set(pt.flatMap(an=>xt(an,at.S4).map(Tn=>Nt(Tn,{defaultKind:"group"}))).filter(Boolean))].sort(),[pt]);return un.length?o.createElement(y.Z,{pb:1,pt:1},o.createElement(h.Z,{variant:"button"},"Owner"),o.createElement(Pe.ZP,{multiple:!0,"aria-label":"Owner",options:un,value:En,onChange:(an,Tn)=>sn(Tn),renderOption:(an,{selected:Tn})=>o.createElement(J.Z,{control:o.createElement(g.Z,{icon:x,checkedIcon:G,checked:Tn}),label:an}),size:"small",popupIcon:o.createElement(ie.Z,{"data-testid":"owner-picker-expand"}),renderInput:an=>o.createElement(S.Z,{...an,className:He.input,variant:"outlined"})})):null},rt=(0,$.Z)(ne=>({searchToolbar:{paddingLeft:0,paddingRight:0},input:{}}),{name:"CatalogReactEntitySearchBar"}),ut=()=>{var ne,be;const He=rt(),{filters:We,updateFilters:pt}=Se(),[Tt,Pt]=(0,o.useState)((be=(ne=We.text)==null?void 0:ne.value)!=null?be:"");return(0,Q.Z)(()=>{pt({text:Tt.length?new oe(Tt):void 0})},250,[Tt,pt]),o.createElement(E.Z,{className:He.searchToolbar},o.createElement(I.Z,null,o.createElement(D.Z,{"aria-label":"search",id:"input-with-icon-adornment",className:He.input,placeholder:"Search",autoComplete:"off",onChange:Yt=>Pt(Yt.target.value),value:Tt,startAdornment:o.createElement(T.Z,{position:"start"},o.createElement(ve.Z,null)),endAdornment:o.createElement(T.Z,{position:"end"},o.createElement(i.Z,{"aria-label":"clear search",onClick:()=>Pt(""),edge:"end",disabled:Tt.length===0},o.createElement(de.Z,null)))})))},yt=Object.freeze({createEntityRefColumn(ne){const{defaultKind:be}=ne;function He(We){var pt;return((pt=We.metadata)==null?void 0:pt.title)||Nt(We,{defaultKind:be})}return{title:"Name",highlight:!0,customFilterAndSearch(We,pt){return He(pt).includes(We)},customSort(We,pt){return He(We).localeCompare(He(pt))},render:We=>{var pt;return o.createElement(zt,{entityRef:We,defaultKind:be,title:(pt=We.metadata)==null?void 0:pt.title})}}},createEntityRelationColumn({title:ne,relation:be,defaultKind:He,filter:We}){function pt(Pt){return xt(Pt,be,We)}function Tt(Pt){return pt(Pt).map(Yt=>Nt(Yt,{defaultKind:He})).join(", ")}return{title:ne,customFilterAndSearch(Pt,Yt){return Tt(Yt).includes(Pt)},customSort(Pt,Yt){return Tt(Pt).localeCompare(Tt(Yt))},render:Pt=>o.createElement(xn,{entityRefs:pt(Pt),defaultKind:He})}},createOwnerColumn(){return this.createEntityRelationColumn({title:"Owner",relation:at.S4,defaultKind:"group"})},createDomainColumn(){return this.createEntityRelationColumn({title:"Domain",relation:at.cz,defaultKind:"domain",filter:{kind:"domain"}})},createSystemColumn(){return this.createEntityRelationColumn({title:"System",relation:at.cz,defaultKind:"system",filter:{kind:"system"}})},createMetadataDescriptionColumn(){return{title:"Description",field:"metadata.description",render:ne=>o.createElement(Ye.Or,{text:ne.metadata.description,placement:"bottom-start",line:2}),width:"auto"}},createSpecLifecycleColumn(){return{title:"Lifecycle",field:"spec.lifecycle"}},createSpecTypeColumn(){return{title:"Type",field:"spec.type"}}}),Vt=[yt.createEntityRefColumn({defaultKind:"system"}),yt.createDomainColumn(),yt.createOwnerColumn(),yt.createMetadataDescriptionColumn()],Ft=[yt.createEntityRefColumn({defaultKind:"component"}),yt.createSystemColumn(),yt.createOwnerColumn(),yt.createSpecTypeColumn(),yt.createSpecLifecycleColumn(),yt.createMetadataDescriptionColumn()],On=(0,$.Z)(ne=>({empty:{padding:ne.spacing(2),display:"flex",justifyContent:"center"}})),yn=ne=>{const{entities:be,title:He,emptyContent:We,variant:pt="gridItem",columns:Tt}=ne,Pt=On(),Yt={minWidth:"0",width:"100%"};return pt==="gridItem"&&(Yt.height="calc(100% - 10px)"),o.createElement(Ye.iA,{columns:Tt,title:He,style:Yt,emptyContent:We&&o.createElement("div",{className:Pt.empty},We),options:{search:!1,paging:!1,actionsColumnIndex:-1,padding:"dense"},data:be})};yn.columns=yt,yn.systemEntityColumns=Vt,yn.componentEntityColumns=Ft;const Mn=(0,$.Z)({input:{}},{name:"CatalogReactEntityTagPicker"}),jn=o.createElement(Ze.Z,{fontSize:"small"}),wn=o.createElement(_e.Z,{fontSize:"small"}),sr=()=>{var ne,be;const He=Mn(),{updateFilters:We,filters:pt,queryParameters:{tags:Tt}}=Se(),Pt=(0,n.h_)(Bt),{value:Yt}=(0,Zt.default)(async()=>{var an;const Tn="metadata.tags",{facets:Yn}=await Pt.getEntityFacets({facets:[Tn],filter:(an=pt.kind)==null?void 0:an.getCatalogFilters()});return Yn[Tn].map(({value:Zn})=>Zn)},[pt.kind]),En=(0,o.useMemo)(()=>[Tt].flat().filter(Boolean),[Tt]),[sn,un]=(0,o.useState)(En.length?En:(be=(ne=pt.tags)==null?void 0:ne.values)!=null?be:[]);return(0,o.useEffect)(()=>{En.length&&un(En)},[En]),(0,o.useEffect)(()=>{We({tags:sn.length?new Ue(sn):void 0})},[sn,We]),Yt!=null&&Yt.length?o.createElement(y.Z,{pb:1,pt:1},o.createElement(h.Z,{variant:"button"},"Tags"),o.createElement(Pe.ZP,{multiple:!0,"aria-label":"Tags",options:Yt,value:sn,onChange:(an,Tn)=>un(Tn),renderOption:(an,{selected:Tn})=>o.createElement(J.Z,{control:o.createElement(g.Z,{icon:jn,checkedIcon:wn,checked:Tn}),label:an}),size:"small",popupIcon:o.createElement(ie.Z,{"data-testid":"tag-picker-expand"}),renderInput:an=>o.createElement(S.Z,{...an,className:He.input,variant:"outlined"})})):null},Jn=ne=>{var be;const{hidden:He,initialFilter:We}=ne,pt=(0,n.h_)(n.$v),{error:Tt,availableTypes:Pt,selectedTypes:Yt,setSelectedTypes:En}=Ne();if((0,o.useEffect)(()=>{Tt&&pt.post({message:"Failed to load entity types",severity:"error"}),We&&En([We])},[Tt,pt,We,En]),Pt.length===0||Tt)return null;const sn=[{value:"all",label:"All"},...Pt.map(un=>({value:un,label:nt()(un)}))];return He?null:o.createElement(y.Z,{pb:1,pt:1},o.createElement(Ye.Ph,{label:"Type",items:sn,selected:(be=sn.length>1?Yt[0]:void 0)!=null?be:"all",onChange:un=>En(un==="all"?[]:[String(un)])}))},Or=(0,O.Z)({root:{color:"#f3ba37"}})(bt.Z),Ct=ne=>{const{toggleStarredEntity:be,isStarredEntity:He}=se(ne.entity);return o.createElement(i.Z,{"aria-label":"favorite",color:"inherit",...ne,onClick:()=>be()},o.createElement(L.ZP,{title:He?"Remove from favorites":"Add to favorites"},He?o.createElement(Or,null):o.createElement(kt.Z,null)))},Ve=Mt.Z;function Xt(ne,be){if(ne)return ne.toLocaleLowerCase("en-US");if(be)try{return(0,at.of)(be).kind.toLocaleLowerCase("en-US")}catch{return}}function Cn(ne,be){const He=(0,n.qD)(),We=Xt(ne,be);return We&&He.getSystemIcon(`kind:${We}`)||Ve}function Ln(ne){const{kind:be,entityRef:He,...We}=ne,pt=Cn(be,He);return o.createElement(pt,{...We})}const Nn=(0,$.Z)(ne=>({node:{fill:ne.palette.grey[300],stroke:ne.palette.grey[300],"&.primary":{fill:ne.palette.primary.light,stroke:ne.palette.primary.light},"&.secondary":{fill:ne.palette.secondary.light,stroke:ne.palette.secondary.light}},text:{fill:ne.palette.getContrastText(ne.palette.grey[300]),"&.primary":{fill:ne.palette.primary.contrastText},"&.secondary":{fill:ne.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}));function Qn(ne){const be=(0,n.h_)(Bt),He=(0,at.eE)(ne),{loading:We,error:pt,value:Tt}=(0,Zt.default)(async()=>{const Pt=await be.getEntityAncestors({entityRef:He}),Yt=new Array,En=new Array;for(const sn of Pt.items){const un=(0,at.eE)(sn.entity),an=un===Pt.rootEntityRef;Yt.push({id:un,root:an,...sn.entity});for(const Tn of sn.parentEntityRefs)En.push({from:un,to:Tn})}return{nodes:Yt,edges:En}},[He]);return{loading:We,error:pt,nodes:(Tt==null?void 0:Tt.nodes)||[],edges:(Tt==null?void 0:Tt.edges)||[]}}function fr({node:ne}){const be=Nn(),He=(0,Le.s0)(),We=(0,n.tg)(vt),[pt,Tt]=(0,o.useState)(0),[Pt,Yt]=(0,o.useState)(0),En=(0,o.useRef)(null);(0,o.useLayoutEffect)(()=>{if(En.current){let{height:Hn,width:rr}=En.current.getBBox();Hn=Math.round(Hn),rr=Math.round(rr),(Hn!==Pt||rr!==pt)&&(Tt(rr),Yt(Hn))}},[pt,Pt]);const sn=10,un=Pt,an=un+sn,Tn=an+pt+sn*2,Yn=Pt+sn*2,Zn=ne.metadata.title||(ne.kind&&ne.metadata.name&&ne.metadata.namespace?Nt({kind:ne.kind,name:ne.metadata.name,namespace:ne.metadata.namespace||""}):ne.id),Pn=()=>{He(We({kind:ne.kind,namespace:ne.metadata.namespace||at.zG,name:ne.metadata.name}))};return o.createElement("g",{onClick:Pn,className:be.clickable},o.createElement("rect",{className:Ut()(be.node,ne.root?"secondary":"primary"),width:Tn,height:Yn,rx:10}),o.createElement(Ln,{kind:ne.kind,y:sn,x:sn,width:un,height:un,className:Ut()(be.text,ne.root?"secondary":"primary")}),o.createElement("text",{ref:En,className:Ut()(be.text,ne.root?"secondary":"primary"),y:Yn/2,x:an+(pt+sn*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},Zn))}function pr(ne){const{loading:be,error:He,nodes:We,edges:pt}=Qn(ne.entity);return be?o.createElement(Ye.Ex,null):He?o.createElement(Ye.Gk,{error:He}):o.createElement(o.Fragment,null,o.createElement(W.Z,{variant:"h2"},"Ancestry"),o.createElement(W.Z,{gutterBottom:!0},"This is the ancestry of entities above the current one - as in, the chain(s) of entities down to the current one, where"," ",o.createElement(Ye.rU,{to:"https://backstage.io/docs/features/software-catalog/life-of-an-entity"},"processors emitted")," ","child entities that ultimately led to the current one existing. Note that this is a completely different mechanism from relations."),o.createElement(y.Z,{mt:4},o.createElement(Ye.mn,{nodes:We,edges:pt,renderNode:fr,direction:Ye.NX.Direction.BOTTOM_TOP,zoom:"enable-on-click"})))}const er=(0,$.Z)(ne=>({root:{display:"flex",flexDirection:"column"},marginTop:{marginTop:ne.spacing(2)},helpIcon:{marginLeft:ne.spacing(1),color:ne.palette.text.disabled},monospace:{fontFamily:"monospace"}}));function ir(ne){const be=er();return o.createElement(Ce.Z,{...ne,primaryTypographyProps:{className:be.monospace},secondaryTypographyProps:{className:be.monospace}})}function lr(ne){const be=er();return o.createElement($e.Z,{className:be.monospace},ne.children)}function k(ne){return o.createElement(y.Z,{mt:2},o.createElement(Qe.Z,{variant:"outlined"},o.createElement(it.Z,null,o.createElement(h.Z,{variant:"h6",gutterBottom:!0},ne.title,ne.helpLink&&o.createElement(X,{to:ne.helpLink})),ne.children)))}function Z(ne){const[be,He]=ne.entry;return o.createElement(lt.Z,null,ne.indent&&o.createElement(qe.Z,null),o.createElement(ir,{primary:be,secondary:He.match(/^url:https?:\/\//)?o.createElement(o.Fragment,null,He.substring(0,4),o.createElement(Ye.rU,{to:He.substring(4)},He.substring(4))):He}))}function X(ne){const be=er();return o.createElement(Ye.rU,{to:ne.to,className:be.helpIcon},o.createElement(Gt.Z,{fontSize:"inherit"}))}const pe=(0,$.Z)({root:{display:"flex",flexDirection:"column"}});function et(ne){var be,He;const We=(0,n.h_)(Bt),pt=(0,at.eE)(ne),Tt=(be=ne.metadata.annotations)==null?void 0:be[at.P1],Pt=(He=ne.metadata.annotations)==null?void 0:He[at.q1],{loading:Yt,error:En,value:sn}=(0,Zt.default)(async()=>!Tt&&!Pt?[]:(await We.getEntities({filter:[...Tt?[{[`metadata.annotations.${at.P1}`]:Tt}]:[],...Pt?[{[`metadata.annotations.${at.q1}`]:Pt}]:[]]})).items,[Tt,Pt]);return{loading:Yt,error:En,location:Tt,originLocation:Pt,colocatedEntities:sn==null?void 0:sn.filter(un=>(0,at.eE)(un)!==pt)}}function tt(ne){return o.createElement($t.Z,{dense:!0},ne.header&&o.createElement(Z,{key:"header",entry:ne.header}),ne.entities.map(be=>o.createElement(lt.Z,{key:(0,at.eE)(be)},o.createElement(qe.Z,null,o.createElement(Ln,{kind:be.kind})),o.createElement(ir,{primary:o.createElement(zt,{entityRef:be})}))))}function At(ne){const{entity:be}=ne,{loading:He,error:We,location:pt,originLocation:Tt,colocatedEntities:Pt}=et(be);if(He)return o.createElement(Ye.Ex,null);if(We)return o.createElement(Ye.Gk,{error:We});if(!pt&&!Tt)return o.createElement(re.Z,{severity:"warning"},"Entity had no location information.");if(!(Pt!=null&&Pt.length))return o.createElement(re.Z,{severity:"info"},"There were no other entities on this location.");if(pt===Tt)return o.createElement(tt,{entities:Pt});const Yt=Pt.filter(sn=>{var un;return((un=sn.metadata.annotations)==null?void 0:un[at.P1])===pt}),En=Pt.filter(sn=>{var un;return((un=sn.metadata.annotations)==null?void 0:un[at.q1])===Tt});return o.createElement(o.Fragment,null,Yt.length>0&&o.createElement(tt,{entities:Yt,header:["At the same location",pt]}),En.length>0&&o.createElement(tt,{entities:En,header:["At the same origin",Tt]}))}function Ht(ne){const be=pe();return o.createElement(o.Fragment,null,o.createElement(W.Z,{variant:"h2"},"Colocated"),o.createElement(W.Z,null,"These are the entities that are colocated with this entity - as in, they originated from the same data source (e.g. came from the same YAML file), or from the same origin (e.g. the originally registered URL)."),o.createElement("div",{className:be.root},o.createElement(At,{entity:ne.entity})))}function rn(ne){return Object.fromEntries([...Object.entries(ne)].sort((be,He)=>be[0]<He[0]?-1:1))}function cn(ne){return o.createElement(o.Fragment,null,o.createElement(W.Z,{variant:"h2"},"Entity as JSON"),o.createElement(W.Z,null,"This is the raw entity data as received from the catalog, on JSON form."),o.createElement(W.Z,null,o.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},o.createElement(Ye.Oi,{text:JSON.stringify(rn(ne.entity),void 0,2),language:"json",showCopyCodeButton:!0}))))}const $n=(0,$.Z)({root:{display:"flex",flexDirection:"column"}});function In(ne){var be,He;const We=$n(),{apiVersion:pt,kind:Tt,metadata:Pt,spec:Yt,relations:En=[],status:sn={}}=ne.entity,un=vn()(gn()(En,an=>an.targetRef),"type");return o.createElement(o.Fragment,null,o.createElement(W.Z,{variant:"h2"},"Overview"),o.createElement("div",{className:We.root},o.createElement(k,{title:"Identity"},o.createElement($t.Z,{dense:!0},o.createElement(lt.Z,null,o.createElement(ir,{primary:"apiVersion",secondary:pt})),o.createElement(lt.Z,null,o.createElement(ir,{primary:"kind",secondary:Tt})),(Yt==null?void 0:Yt.type)&&o.createElement(lt.Z,null,o.createElement(ir,{primary:"spec.type",secondary:Yt.type})),Pt.uid&&o.createElement(lt.Z,null,o.createElement(ir,{primary:"uid",secondary:Pt.uid})),Pt.etag&&o.createElement(lt.Z,null,o.createElement(ir,{primary:"etag",secondary:Pt.etag})))),o.createElement(k,{title:"Metadata"},!!Object.keys(Pt.annotations||{}).length&&o.createElement($t.Z,{dense:!0,subheader:o.createElement(lr,null,"Annotations",o.createElement(X,{to:"https://backstage.io/docs/features/software-catalog/well-known-annotations"}))},Object.entries(Pt.annotations).map(an=>o.createElement(Z,{key:an[0],indent:!0,entry:an}))),!!Object.keys(Pt.labels||{}).length&&o.createElement($t.Z,{dense:!0,subheader:o.createElement(lr,null,"Labels")},Object.entries(Pt.labels).map(an=>o.createElement(Z,{key:an[0],indent:!0,entry:an}))),!!((be=Pt.tags)!=null&&be.length)&&o.createElement($t.Z,{dense:!0,subheader:o.createElement(lr,null,"Tags")},Pt.tags.map((an,Tn)=>o.createElement(lt.Z,{key:`${an}-${Tn}`},o.createElement(qe.Z,null),o.createElement(ir,{primary:an}))))),!!En.length&&o.createElement(k,{title:"Relations",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-relations"},Object.entries(un).map(([an,Tn],Yn)=>o.createElement("div",{key:Yn},o.createElement($t.Z,{dense:!0,subheader:o.createElement(lr,null,an)},Tn.map(Zn=>o.createElement(lt.Z,{key:Zn.targetRef},o.createElement(qe.Z,null,o.createElement(Ln,{entityRef:Zn.targetRef})),o.createElement(ir,{primary:o.createElement(zt,{entityRef:Zn.targetRef})}))))))),!!((He=sn.items)!=null&&He.length)&&o.createElement(k,{title:"Status",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-statuses"},sn.items.map((an,Tn)=>o.createElement("div",{key:Tn},o.createElement(h.Z,null,an.level,": ",an.type),o.createElement(y.Z,{ml:2},an.message))))))}function Dn(ne){return o.createElement(o.Fragment,null,o.createElement(W.Z,{variant:"h2"},"Entity as YAML"),o.createElement(W.Z,null,"This is the raw entity data as received from the catalog, on YAML form."),o.createElement(W.Z,null,o.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},o.createElement(Ye.Oi,{text:ht().stringify(rn(ne.entity)),language:"yaml",showCopyCodeButton:!0}))))}const Vn=(0,$.Z)(ne=>({fullHeightDialog:{height:"calc(100% - 64px)"},root:{display:"flex",flexGrow:1,width:"100%",backgroundColor:ne.palette.background.paper},tabs:{borderRight:`1px solid ${ne.palette.divider}`,flexShrink:0},tabContents:{flexGrow:1,overflowX:"auto"}}));function ar(ne){const{children:be,value:He,index:We,...pt}=ne,Tt=Vn();return o.createElement("div",{role:"tabpanel",hidden:He!==We,id:`vertical-tabpanel-${We}`,"aria-labelledby":`vertical-tab-${We}`,className:Tt.tabContents,...pt},He===We&&o.createElement(y.Z,{pl:3,pr:3},be))}function br(ne){return{id:`vertical-tab-${ne}`,"aria-controls":`vertical-tabpanel-${ne}`}}function xr(ne){const be=Vn(),[He,We]=o.useState(0);return(0,o.useEffect)(()=>{We(0)},[ne.open]),ne.entity?o.createElement(Ot.Z,{fullWidth:!0,maxWidth:"xl",open:ne.open,onClose:ne.onClose,"aria-labelledby":"entity-inspector-dialog-title",PaperProps:{className:be.fullHeightDialog}},o.createElement(pn.Z,{id:"entity-inspector-dialog-title"},"Entity Inspector"),o.createElement(_n.Z,{dividers:!0},o.createElement("div",{className:be.root},o.createElement(U.Z,{orientation:"vertical",variant:"scrollable",value:He,onChange:(pt,Tt)=>We(Tt),"aria-label":"Inspector options",className:be.tabs},o.createElement(Re.Z,{label:"Overview",...br(0)}),o.createElement(Re.Z,{label:"Ancestry",...br(1)}),o.createElement(Re.Z,{label:"Colocated",...br(2)}),o.createElement(Re.Z,{label:"Raw JSON",...br(3)}),o.createElement(Re.Z,{label:"Raw YAML",...br(4)})),o.createElement(ar,{value:He,index:0},o.createElement(In,{entity:ne.entity})),o.createElement(ar,{value:He,index:1},o.createElement(pr,{entity:ne.entity})),o.createElement(ar,{value:He,index:2},o.createElement(Ht,{entity:ne.entity})),o.createElement(ar,{value:He,index:3},o.createElement(cn,{entity:ne.entity})),o.createElement(ar,{value:He,index:4},o.createElement(Dn,{entity:ne.entity})))),o.createElement(w.Z,null,o.createElement(v.Z,{onClick:ne.onClose,color:"primary"},"Close"))):null}function Jr(ne){var be;const He=(0,n.h_)(Bt),We=(be=ne.metadata.annotations)==null?void 0:be[at.q1],pt=ne.metadata.uid,Tt=We==="bootstrap:bootstrap",Pt=(0,Zt.default)(async()=>{const Zn=He.getLocationByRef(We);let Pn;if(!We)Pn=Promise.resolve([]);else{const Hn=`metadata.annotations.${at.q1}`;Pn=He.getEntities({filter:{[Hn]:We},fields:["kind","metadata.uid","metadata.name","metadata.namespace"]}).then(rr=>rr.items)}return Promise.all([Zn,Pn]).then(([Hn,rr])=>({location:Hn,colocatedEntities:rr}))},[He,ne]),Yt=(0,o.useCallback)(async function(){const{location:Pn}=Pt.value;await He.removeLocationById(Pn.id)},[He,Pt]),En=(0,o.useCallback)(async function(){await He.removeEntityByUid(pt)},[He,pt]);if(Tt)return{type:"bootstrap",location:We,deleteEntity:En};const{loading:sn,error:un,value:an}=Pt;if(sn)return{type:"loading"};if(un)return{type:"error",error:un};const{location:Tn,colocatedEntities:Yn}=an;return Tn?{type:"unregister",location:We,colocatedEntities:Yn.map(at.iB),unregisterLocation:Yt,deleteEntity:En}:{type:"only-delete",deleteEntity:En}}const Ca=(0,$.Z)({advancedButton:{fontSize:"0.7em"}}),Pa=({entity:ne,onConfirm:be})=>{var He;const We=(0,n.h_)(n.$v),pt=(0,n.h_)(n.Ds),Tt=Ca(),Pt=Jr(ne),[Yt,En]=(0,o.useState)(!1),[sn,un]=(0,o.useState)(!1),an=(He=pt.getOptionalString("app.title"))!=null?He:"Backstage",Tn=(0,o.useCallback)(async function(){if("unregisterLocation"in Pt){un(!0);try{await Pt.unregisterLocation(),be()}catch(Pn){(0,_t.BD)(Pn),We.post({message:Pn.message})}finally{un(!1)}}},[We,be,Pt]),Yn=(0,o.useCallback)(async function(){if("deleteEntity"in Pt){un(!0);try{await Pt.deleteEntity(),be()}catch(Pn){(0,_t.BD)(Pn),We.post({message:Pn.message})}finally{un(!1)}}},[We,be,Pt]);return Pt.type==="loading"?o.createElement(Ye.Ex,null):Pt.type==="error"?o.createElement(Ye.Gk,{error:Pt.error}):Pt.type==="bootstrap"?o.createElement(o.Fragment,null,o.createElement(re.Z,{severity:"info"},'You cannot unregister this entity, since it originates from a protected Backstage configuration (location "',Pt.location,'"). If you believe this is in error, please contact the ',an," ","integrator."),o.createElement(y.Z,{marginTop:2},!Yt&&o.createElement(v.Z,{variant:"text",size:"small",color:"primary",className:Tt.advancedButton,onClick:()=>En(!0)},"Advanced Options"),Yt&&o.createElement(o.Fragment,null,o.createElement(W.Z,null,"You have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),o.createElement(v.Z,{variant:"contained",color:"secondary",disabled:sn,onClick:Yn},"Delete Entity")))):Pt.type==="only-delete"?o.createElement(o.Fragment,null,o.createElement(W.Z,null,"This entity does not seem to originate from a registered location. You therefore only have the option to delete it outright from the catalog."),o.createElement(v.Z,{variant:"contained",color:"secondary",disabled:sn,onClick:Yn},"Delete Entity")):Pt.type==="unregister"?o.createElement(o.Fragment,null,o.createElement(W.Z,null,"This action will unregister the following entities:"),o.createElement(W.Z,{component:"ul"},Pt.colocatedEntities.map(Zn=>o.createElement("li",{key:`${Zn.kind}:${Zn.namespace}/${Zn.name}`},o.createElement(zt,{entityRef:Zn})))),o.createElement(W.Z,null,"Located at the following location:"),o.createElement(W.Z,{component:"ul"},o.createElement("li",null,Pt.location)),o.createElement(W.Z,null,"To undo, just re-register the entity in ",an,"."),o.createElement(y.Z,{marginTop:2},o.createElement(v.Z,{variant:"contained",color:"secondary",disabled:sn,onClick:Tn},"Unregister Location"),!Yt&&o.createElement(y.Z,{component:"span",marginLeft:2},o.createElement(v.Z,{variant:"text",size:"small",color:"primary",className:Tt.advancedButton,onClick:()=>En(!0)},"Advanced Options"))),Yt&&o.createElement(o.Fragment,null,o.createElement(y.Z,{paddingTop:4,paddingBottom:4},o.createElement(Ie.Z,null)),o.createElement(W.Z,null,"You also have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),o.createElement(v.Z,{variant:"contained",color:"secondary",disabled:sn,onClick:Yn},"Delete Entity"))):o.createElement(re.Z,{severity:"error"},"Internal error: Unknown state")},_a=ne=>{const{open:be,onConfirm:He,onClose:We,entity:pt}=ne;return o.createElement(Ot.Z,{open:be,onClose:We},o.createElement(pn.Z,{id:"responsive-dialog-title"},"Are you sure you want to unregister this entity?"),o.createElement(_n.Z,null,o.createElement(Pa,{entity:pt,onConfirm:He})),o.createElement(w.Z,null,o.createElement(v.Z,{onClick:We,color:"primary"},"Cancel")))},fa=(0,$.Z)(ne=>({root:{backgroundColor:"rgba(0, 0, 0, .11)",boxShadow:"none",margin:ne.spacing(1,0,1,0)},title:{margin:ne.spacing(1,0,0,1),textTransform:"uppercase",fontSize:12,fontWeight:"bold"},listIcon:{minWidth:30,color:ne.palette.text.primary},menuItem:{minHeight:ne.spacing(6)},groupWrapper:{margin:ne.spacing(1,1,2,1)}}),{name:"CatalogReactUserListPicker"});function Sa(ne){return[{name:"Personal",items:[{id:"owned",label:"Owned",icon:tn.Z},{id:"starred",label:"Starred",icon:bt.Z}]},{name:ne!=null?ne:"Company",items:[{id:"all",label:"All"}]}]}const Ra=ne=>{var be;const{initialFilter:He,availableFilters:We}=ne,pt=fa(),Pt=(be=(0,n.h_)(n.Ds).getOptionalString("organization.name"))!=null?be:"Company",{filters:Yt,updateFilters:En,backendEntities:sn,queryParameters:{kind:un,user:an},loading:Tn}=Se(),Yn=["starred","all"],Zn=Sa(Pt).map(cr=>({...cr,items:cr.items.filter(({id:Rr})=>["group","user"].some(qr=>qr===un)?Yn.includes(Rr):!We||We.includes(Rr))})).filter(({items:cr})=>!!cr.length),{isStarredEntity:Pn}=Kt(),{isOwnedEntity:Hn,loading:rr}=ke(),Mr=Tn||rr,Ir=(0,o.useMemo)(()=>new we("owned",Hn,Pn),[Hn,Pn]),Tr=(0,o.useMemo)(()=>new we("starred",Hn,Pn),[Hn,Pn]),kr=(0,o.useMemo)(()=>[an].flat()[0],[an]),[Sr,Yr]=(0,o.useState)(kr!=null?kr:He),Xr=(0,o.useMemo)(()=>sn.filter(Jt((0,Te.compact)(Object.values({...Yt,user:void 0})))),[Yt,sn]),Qr=(0,o.useMemo)(()=>({all:Xr.length,starred:Xr.filter(cr=>Tr.filterEntity(cr)).length,owned:Xr.filter(cr=>Ir.filterEntity(cr)).length}),[Xr,Tr,Ir]);return(0,o.useEffect)(()=>{kr&&Yr(kr)},[kr]),(0,o.useEffect)(()=>{!Mr&&!!Sr&&Sr!=="all"&&Qr[Sr]===0&&Yr("all")},[Mr,Qr,Sr,Yr]),(0,o.useEffect)(()=>{En({user:Sr?new we(Sr,Hn,Pn):void 0})},[Sr,Hn,Pn,En]),o.createElement(Qe.Z,{className:pt.root},Zn.map(cr=>o.createElement(o.Fragment,{key:cr.name},o.createElement(h.Z,{variant:"subtitle2",className:pt.title},cr.name),o.createElement(Qe.Z,{className:pt.groupWrapper},o.createElement($t.Z,{disablePadding:!0,dense:!0},cr.items.map(Rr=>{var qr,pa;return o.createElement(fe.Z,{key:Rr.id,button:!0,divider:!0,onClick:()=>Yr(Rr.id),selected:Rr.id===((qr=Yt.user)==null?void 0:qr.value),className:pt.menuItem,disabled:Qr[Rr.id]===0,"data-testid":`user-picker-${Rr.id}`},Rr.icon&&o.createElement(qe.Z,{className:pt.listIcon},o.createElement(Rr.icon,{fontSize:"small"})),o.createElement(Ce.Z,null,o.createElement(h.Z,{variant:"body1"},Rr.label)),o.createElement(A.Z,null,(pa=Qr[Rr.id])!=null?pa:"-"))}))))))},Ta=({children:ne,value:be})=>{var He;const[We,pt]=useState((He=be==null?void 0:be.filters)!=null?He:{}),Tt=useCallback(En=>{pt(sn=>{const un=typeof En=="function"?En(sn):En;return{...sn,...un}})},[]),Pt=useMemo(()=>({entities:[],backendEntities:[],queryParameters:{}}),[]),Yt=useMemo(()=>{var En,sn,un,an,Tn;return{entities:(En=be==null?void 0:be.entities)!=null?En:Pt.entities,backendEntities:(sn=be==null?void 0:be.backendEntities)!=null?sn:Pt.backendEntities,updateFilters:(un=be==null?void 0:be.updateFilters)!=null?un:Tt,filters:We,loading:(an=be==null?void 0:be.loading)!=null?an:!1,queryParameters:(Tn=be==null?void 0:be.queryParameters)!=null?Tn:Pt.queryParameters,error:be==null?void 0:be.error}},[be,Pt,We,Tt]);return React.createElement(q.Provider,{value:Yt},ne)}},37491:function(Lt,c,t){t.d(c,{A:function(){return ce},C:function(){return Ze},E:function(){return ye},a:function(){return nt},b:function(){return Ye},c:function(){return at},d:function(){return on},e:function(){return q},f:function(){return F},g:function(){return N},i:function(){return xn},j:function(){return st},k:function(){return Rt},l:function(){return zt},m:function(){return Nt},n:function(){return vt},o:function(){return Se},p:function(){return de},q:function(){return vn},r:function(){return _t},s:function(){return ht},t:function(){return kn},u:function(){return hn},v:function(){return An},w:function(){return mt},y:function(){return dt}});var e=t(82394),n=t.n(e),p=t(34520),a=t(76635),o=t.n(a),m=t(49558),u=t(30705),v=t(49462),d=t(73495),y=t(79692),h=t(90436),M=t(60905),L=t(7089),$=t(94339),J=t(32552),g=t(61837),S=t(85256),E=t(24579),I=t(12420),D=t(97580),T=t(73698),i=t(74603),O=t(12231),W=t(38402),Ce=t(49378),$e=t(95544),Qe=t(86136),it=t(79784),lt=t(50758),qe=t(8629),$t=t(79249),Ot=t(49429),pn=t(77277),_n=t(52866),U=t(30254),Re=t(27604),w=t(2784),Ie=t(64279),fe=t(2997),A=t(28347),H=t(15459),re=t(11640),Pe=t(99688),ae=t(10289),Te=t(49166),Et=t(31654),te=t(43054),ee=t(26655),Le=t(32272),le=t(88285);async function Q({storageApi:oe}){var he;const De=oe.forBucket("settings"),we=oe.forBucket("starredEntities"),Ne=De.snapshot("starredEntities").value;if(!(0,a.isArray)(Ne))return;const Ke=new Set((he=we.snapshot("entityRefs").value)!=null?he:[]);Ne.filter(a.isString).map(Be=>Be.split(":")).filter(Be=>Be.length===4&&Be[0]==="entity").map(([Be,ct,Kt,mn])=>(0,p.eE)({kind:ct,namespace:Kt,name:mn})).forEach(Be=>Ke.add(Be)),await we.set("entityRefs",Array.from(Ke)),await De.remove("starredEntities")}class xe{constructor(he){this.subscribers=new Set,this.observable=new(n())(we=>(we.next(new Set(this.starredEntities)),this.subscribers.add(we),()=>{this.subscribers.delete(we)}));var De;Q(he).then(),this.settingsStore=he.storageApi.forBucket("starredEntities"),this.starredEntities=new Set((De=this.settingsStore.snapshot("entityRefs").value)!=null?De:[]),this.settingsStore.observe$("entityRefs").subscribe({next:we=>{var Ne;this.starredEntities=new Set((Ne=we.value)!=null?Ne:[]),this.notifyChanges()}})}async toggleStarred(he){this.starredEntities.has(he)?this.starredEntities.delete(he):this.starredEntities.add(he),await this.settingsStore.set("entityRefs",Array.from(this.starredEntities))}starredEntitie$(){return this.observable}notifyChanges(){for(const he of this.subscribers)he.next(new Set(this.starredEntities))}}const at=(0,u.x8)({id:"create-component",optional:!0}),Zt=(0,u.x8)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"]}),Dt=(0,u.NT)({id:"catalog"}),en=(0,y.Z)(oe=>({value:{fontWeight:"bold",overflow:"hidden",lineHeight:"24px",wordBreak:"break-word"},label:{color:oe.palette.text.secondary,textTransform:"uppercase",fontSize:"10px",fontWeight:"bold",letterSpacing:.5,overflow:"hidden",whiteSpace:"nowrap"}}));function on(oe){const{label:he,value:De,gridSizes:we,children:Ne}=oe,Ke=en(),Be=(0,u.vJ)(Ne,Kt=>Kt.getElements()),ct=Be.length>0?Be:w.createElement(h.Z,{variant:"body2",className:Ke.value},De||"unknown");return w.createElement(M.Z,{item:!0,...we},w.createElement(h.Z,{variant:"subtitle2",className:Ke.label},he),ct)}const gn=(0,y.Z)({description:{wordBreak:"break-word"}});function Ye(oe){var he,De,we,Ne,Ke,Be;const{entity:ct}=oe,Kt=gn(),mn=ct.kind.toLocaleLowerCase("en-US")==="system",se=ct.kind.toLocaleLowerCase("en-US")==="resource",ke=ct.kind.toLocaleLowerCase("en-US")==="component",ot=ct.kind.toLocaleLowerCase("en-US")==="api",wt=ct.kind.toLocaleLowerCase("en-US")==="template",Fe=ct.kind.toLocaleLowerCase("en-US")==="location",ft=ct.kind.toLocaleLowerCase("en-US")==="group",K=(0,d.hF)(ct,p.cz,{kind:"system"}),l=(0,d.hF)(ct,p.cz,{kind:"component"}),b=(0,d.hF)(ct,p.cz,{kind:"domain"}),x=(0,d.hF)(ct,p.S4);return w.createElement(M.Z,{container:!0},w.createElement(on,{label:"Description",gridSizes:{xs:12}},w.createElement(h.Z,{variant:"body2",paragraph:!0,className:Kt.description},((he=ct==null?void 0:ct.metadata)==null?void 0:he.description)||"No description")),w.createElement(on,{label:"Owner",value:"No Owner",gridSizes:{xs:12,sm:6,lg:4}},x.length>0&&w.createElement(d.rI,{entityRefs:x,defaultKind:"group"})),(mn||b.length>0)&&w.createElement(on,{label:"Domain",value:"No Domain",gridSizes:{xs:12,sm:6,lg:4}},b.length>0&&w.createElement(d.rI,{entityRefs:b,defaultKind:"domain"})),(ot||ke||se||K.length>0)&&w.createElement(on,{label:"System",value:"No System",gridSizes:{xs:12,sm:6,lg:4}},K.length>0&&w.createElement(d.rI,{entityRefs:K,defaultKind:"system"})),ke&&l.length>0&&w.createElement(on,{label:"Parent Component",value:"No Parent Component",gridSizes:{xs:12,sm:6,lg:4}},w.createElement(d.rI,{entityRefs:l,defaultKind:"component"})),(ot||ke||se||wt||ft||Fe||typeof((De=ct==null?void 0:ct.spec)==null?void 0:De.type)=="string")&&w.createElement(on,{label:"Type",value:(we=ct==null?void 0:ct.spec)==null?void 0:we.type,gridSizes:{xs:12,sm:6,lg:4}}),(ot||ke||typeof((Ne=ct==null?void 0:ct.spec)==null?void 0:Ne.lifecycle)=="string")&&w.createElement(on,{label:"Lifecycle",value:(Ke=ct==null?void 0:ct.spec)==null?void 0:Ke.lifecycle,gridSizes:{xs:12,sm:6,lg:4}}),w.createElement(on,{label:"Tags",value:"No Tags",gridSizes:{xs:12,sm:6,lg:4}},(((Be=ct==null?void 0:ct.metadata)==null?void 0:Be.tags)||[]).map(G=>w.createElement(L.Z,{key:G,size:"small",label:G}))))}const Y=(0,y.Z)({gridItemCard:{display:"flex",flexDirection:"column",height:"calc(100% - 10px)",marginBottom:"10px"},fullHeightCard:{display:"flex",flexDirection:"column",height:"100%"},gridItemCardContent:{flex:1},fullHeightCardContent:{flex:1}});function ce(oe){var he,De,we;const{variant:Ne}=oe,Ke=Y(),{entity:Be}=(0,d.X2)(),ct=(0,u.h_)(v.q3),Kt=(0,u.h_)(d.Ah),mn=(0,u.h_)(u.$v),se=(0,u.tg)(Zt),ke=(0,d.CV)(Be,ct),ot=(he=Be.metadata.annotations)==null?void 0:he[p.Tf],wt={label:"View Source",disabled:!ke,icon:w.createElement(v.nW,{type:ke==null?void 0:ke.integrationType}),href:ke==null?void 0:ke.locationTargetUrl},Fe={label:"View TechDocs",disabled:!((De=Be.metadata.annotations)!=null&&De["backstage.io/techdocs-ref"])||!se,icon:w.createElement(U.Z,null),href:se&&se({namespace:Be.metadata.namespace||p.zG,kind:Be.kind,name:Be.metadata.name})};let ft="";Ne==="gridItem"?ft=Ke.gridItemCard:Ne==="fullHeight"&&(ft=Ke.fullHeightCard);let K="";Ne==="gridItem"?K=Ke.gridItemCardContent:Ne==="fullHeight"&&(K=Ke.fullHeightCardContent);const l=(we=Be.metadata.annotations)==null?void 0:we[p.P1],b=(l==null?void 0:l.startsWith("url:"))||(l==null?void 0:l.startsWith("file:")),x=(0,w.useCallback)(async()=>{await Kt.refreshEntity((0,p.eE)(Be)),mn.post({message:"Refresh scheduled",severity:"info"})},[Kt,mn,Be]);return w.createElement($.Z,{className:ft},w.createElement(J.Z,{title:"About",action:w.createElement(w.Fragment,null,b&&w.createElement(g.Z,{"aria-label":"Refresh",title:"Schedule entity refresh",onClick:x},w.createElement(_n.Z,null)),w.createElement(g.Z,{component:m.rU,"aria-label":"Edit",disabled:!ot,title:"Edit Metadata",to:ot!=null?ot:"#"},w.createElement(Re.Z,null))),subheader:w.createElement(m.M6,{links:[wt,Fe]})}),w.createElement(S.Z,null),w.createElement(E.Z,{className:K},w.createElement(Ye,{entity:Be})))}const _e=(0,y.Z)(oe=>(0,I.Z)({root:{...oe.typography.h4}}));function Ze(oe){var he;const{initialFilter:De="component",allowedKinds:we}=oe,Ne=_e(),Ke=(0,u.h_)(d.Ah),{value:Be}=(0,Ie.default)(async()=>await Ke.getEntityFacets({facets:["kind"]}).then(Fe=>{var ft;return((ft=Fe.facets.kind)==null?void 0:ft.map(K=>K.value).sort())||[]})),{updateFilters:ct,queryParameters:{kind:Kt}}=(0,d.wp)(),mn=(0,w.useMemo)(()=>{var Fe;return(Fe=[Kt].flat()[0])==null?void 0:Fe.toLocaleLowerCase("en-US")},[Kt]),[se,ke]=(0,w.useState)(mn!=null?mn:De);(0,w.useEffect)(()=>{ct({kind:se?new d.zo(se):void 0})},[se,ct]),(0,w.useEffect)(()=>{mn&&ke(mn)},[mn]);const wt=[(0,D.Z)(se)].concat((he=Be==null?void 0:Be.filter(Fe=>we?we.some(ft=>ft.toLocaleLowerCase("en-US")===Fe.toLocaleLowerCase("en-US")):!0))!=null?he:[]).sort().reduce((Fe,ft)=>(Fe[ft.toLocaleLowerCase("en-US")]=ft,Fe),{});return w.createElement(T.Z,{input:w.createElement(i.Z,{value:se}),value:se,onChange:Fe=>ke(Fe.target.value),classes:Ne},Object.keys(wt).map(Fe=>w.createElement(O.Z,{value:Fe,key:Fe},`${wt[Fe]}s`)))}const ie=(0,y.Z)({flexContainer:{flexWrap:"wrap"},itemText:{width:"100%",wordBreak:"break-all",marginBottom:"1rem"}});function de(oe){const he=oe.result,De=ie();return w.createElement(m.rU,{to:he.location},w.createElement(W.Z,{alignItems:"flex-start",className:De.flexContainer},w.createElement(Ce.Z,{className:De.itemText,primaryTypographyProps:{variant:"h6"},primary:he.title,secondary:he.text}),w.createElement($e.Z,null,he.kind&&w.createElement(L.Z,{label:`Kind: ${he.kind}`,size:"small"}),he.lifecycle&&w.createElement(L.Z,{label:`Lifecycle: ${he.lifecycle}`,size:"small"}))),w.createElement(S.Z,{component:"li"}))}const ve=Object.freeze({createNameColumn(oe){function he(De){var we;return((we=De.metadata)==null?void 0:we.title)||(0,d.$3)(De,{defaultKind:oe==null?void 0:oe.defaultKind})}return{title:"Name",field:"resolved.name",highlight:!0,customSort({entity:De},{entity:we}){return he(De).localeCompare(he(we))},render:({entity:De})=>{var we;return w.createElement(d.dx,{entityRef:De,defaultKind:(oe==null?void 0:oe.defaultKind)||"Component",title:(we=De.metadata)==null?void 0:we.title})}}},createSystemColumn(){return{title:"System",field:"resolved.partOfSystemRelationTitle",render:({resolved:oe})=>w.createElement(d.rI,{entityRefs:oe.partOfSystemRelations,defaultKind:"system"})}},createOwnerColumn(){return{title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:oe})=>w.createElement(d.rI,{entityRefs:oe.ownedByRelations,defaultKind:"group"})}},createSpecTypeColumn(){return{title:"Type",field:"entity.spec.type",hidden:!0}},createSpecLifecycleColumn(){return{title:"Lifecycle",field:"entity.spec.lifecycle"}},createMetadataDescriptionColumn(){return{title:"Description",field:"entity.metadata.description",render:({entity:oe})=>w.createElement(m.Or,{text:oe.metadata.description,placement:"bottom-start"}),width:"auto"}},createTagsColumn(){return{title:"Tags",field:"entity.metadata.tags",cellStyle:{padding:"0px 16px 0px 20px"},render:({entity:oe})=>w.createElement(w.Fragment,null,oe.metadata.tags&&oe.metadata.tags.map(he=>w.createElement(L.Z,{key:he,label:he,size:"small",variant:"outlined",style:{marginBottom:"0px"}})))}}}),ge=(0,H.Z)({root:{color:"#f3ba37"}})(re.Z),nt=oe=>{var he,De,we;const{columns:Ne,actions:Ke,tableOptions:Be}=oe,{isStarredEntity:ct,toggleStarredEntity:Kt}=(0,d.CR)(),{loading:mn,error:se,entities:ke,filters:ot}=(0,d.wp)(),wt=(0,w.useMemo)(()=>{var G;return[ve.createNameColumn({defaultKind:(G=ot.kind)==null?void 0:G.value}),...Ae(),ve.createMetadataDescriptionColumn(),ve.createTagsColumn()];function Ae(){var rt;switch((rt=ot.kind)==null?void 0:rt.value){case"user":return[];case"domain":case"system":return[ve.createOwnerColumn()];case"group":case"location":case"template":return[ve.createSpecTypeColumn()];default:return[ve.createSystemColumn(),ve.createOwnerColumn(),ve.createSpecTypeColumn(),ve.createSpecLifecycleColumn()]}}},[(he=ot.kind)==null?void 0:he.value]),Fe=ot.type===void 0,ft=(0,a.capitalize)((we=(De=ot.user)==null?void 0:De.value)!=null?we:"all");if(se)return w.createElement("div",null,w.createElement(m.GB,{severity:"error",title:"Could not fetch catalog entities."},w.createElement(m.Oi,{language:"text",text:se.toString()})));const K=[({entity:G})=>{var Ae;const rt=(Ae=G.metadata.annotations)==null?void 0:Ae[p.l2];return{icon:()=>w.createElement(fe.Z,{"aria-label":"View",fontSize:"small"}),tooltip:"View",disabled:!rt,onClick:()=>{!rt||window.open(rt,"_blank")}}},({entity:G})=>{var Ae;const rt=(Ae=G.metadata.annotations)==null?void 0:Ae[p.Tf];return{icon:()=>w.createElement(Re.Z,{"aria-label":"Edit",fontSize:"small"}),tooltip:"Edit",disabled:!rt,onClick:()=>{!rt||window.open(rt,"_blank")}}},({entity:G})=>{const Ae=ct(G);return{cellStyle:{paddingLeft:"1em"},icon:()=>Ae?w.createElement(ge,null):w.createElement(A.Z,null),tooltip:Ae?"Remove from favorites":"Add to favorites",onClick:()=>Kt(G)}}],l=ke.map(G=>{const Ae=(0,d.hF)(G,p.cz,{kind:"system"}),rt=(0,d.hF)(G,p.S4);return{entity:G,resolved:{name:(0,d.$3)(G,{defaultKind:"Component"}),ownedByRelationsTitle:rt.map(ut=>(0,d.$3)(ut,{defaultKind:"group"})).join(", "),ownedByRelations:rt,partOfSystemRelationTitle:Ae.map(ut=>(0,d.$3)(ut,{defaultKind:"system"})).join(", "),partOfSystemRelations:Ae}}}),b=(Ne||wt).find(G=>G.title==="Type");b&&(b.hidden=!Fe);const x=l.length>20;return w.createElement(m.iA,{isLoading:mn,columns:Ne||wt,options:{paging:x,pageSize:20,actionsColumnIndex:-1,loadingType:"linear",showEmptyDataSourceMessage:!mn,padding:"dense",pageSizeOptions:[20,50,100],...Be},title:`${ft} (${ke.length})`,data:l,actions:Ke||K})};nt.columns=ve;const bt=(0,y.Z)({button:{color:"white"}});function kt(oe){var he;const{UNSTABLE_extraContextMenuItems:De,UNSTABLE_contextMenuOptions:we,onUnregisterEntity:Ne,onInspectEntity:Ke}=oe,[Be,ct]=(0,w.useState)(),Kt=bt(),mn=(0,d.N$)(ee.j8),se=Fe=>{ct(Fe.currentTarget)},ke=()=>{ct(void 0)},ot=De&&[...De.map(Fe=>w.createElement(O.Z,{key:Fe.title,onClick:()=>{ke(),Fe.onClick()}},w.createElement(Qe.Z,null,w.createElement(Fe.Icon,{fontSize:"small"})),w.createElement(Ce.Z,{primary:Fe.title}))),w.createElement(S.Z,{key:"the divider is here!"})],wt=(he=!mn.allowed||(we==null?void 0:we.disableUnregister))!=null?he:!1;return w.createElement(w.Fragment,null,w.createElement(g.Z,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:se,"data-testid":"menu-button",className:Kt.button},w.createElement(te.Z,null)),w.createElement(it.ZP,{open:Boolean(Be),onClose:ke,anchorEl:Be,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},w.createElement(lt.Z,null,ot,w.createElement(O.Z,{onClick:()=>{ke(),Ne()},disabled:wt},w.createElement(Qe.Z,null,w.createElement(Te.Z,{fontSize:"small"})),w.createElement(Ce.Z,{primary:"Unregister entity"})),w.createElement(O.Z,{onClick:()=>{ke(),Ke()}},w.createElement(Qe.Z,null,w.createElement(Et.Z,{fontSize:"small"})),w.createElement(Ce.Z,{primary:"Inspect entity"})))))}const ln="plugin.catalog.entityLayoutRoute",Ut=()=>null;(0,u.R5)(Ut,ln,!0),(0,u.R5)(Ut,"core.gatherMountPoints",!0);function Mt(oe){const{entity:he,title:De}=oe;return w.createElement($e.Z,{display:"inline-flex",alignItems:"center",height:"1em",maxWidth:"100%"},w.createElement($e.Z,{component:"span",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},De),he&&w.createElement(d.LH,{entity:he}))}function Gt(oe,he,De,we){var Ne,Ke,Be,ct,Kt;const mn=(Ne=oe!=null?oe:we==null?void 0:we.kind)!=null?Ne:"",se=(Ke=he!=null?he:we==null?void 0:we.metadata.namespace)!=null?Ke:"";return{headerTitle:`${(Kt=(ct=(Be=we==null?void 0:we.metadata.title)!=null?Be:De)!=null?ct:we==null?void 0:we.metadata.name)!=null?Kt:""}${se&&se!==p.zG?` in ${se}`:""}`,headerType:(()=>{let ot=mn.toLocaleLowerCase("en-US");return we&&we.spec&&"type"in we.spec&&(ot+=" \u2014 ",ot+=we.spec.type.toLocaleLowerCase("en-US")),ot})()}}function bn(oe){var he;const{entity:De}=oe,we=(0,d.hF)(De,p.S4);return w.createElement(w.Fragment,null,we.length>0&&w.createElement(m.i9,{label:"Owner",value:w.createElement(d.rI,{entityRefs:we,defaultKind:"Group",color:"inherit"})}),((he=De.spec)==null?void 0:he.lifecycle)&&w.createElement(m.i9,{label:"Lifecycle",value:De.spec.lifecycle}))}const vn=oe=>{var he,De,we;const{UNSTABLE_extraContextMenuItems:Ne,UNSTABLE_contextMenuOptions:Ke,children:Be}=oe,{kind:ct,namespace:Kt,name:mn}=(0,u.Oi)(d.wi),{entity:se,loading:ke,error:ot}=(0,d.ce)(),wt=(0,ae.TH)(),Fe=(0,u.vJ)(Be,ut=>ut.selectByComponentData({key:ln,withStrictError:"Child of EntityLayout must be an EntityLayout.Route"}).getElements().flatMap(({props:yt})=>{if(se){if(yt.if&&!yt.if(se))return[]}else return[];return[{path:yt.path,title:yt.title,children:yt.children,tabProps:yt.tabProps}]}),[se]),{headerTitle:ft,headerType:K}=Gt(ct,Kt,mn,se),[l,b]=(0,w.useState)(!1),[x,G]=(0,w.useState)(!1),Ae=(0,ae.s0)(),rt=async()=>{b(!1),G(!1),Ae("/")};return(0,w.useEffect)(()=>{b(!1),G(!1)},[wt.pathname]),w.createElement(m.T3,{themeId:(we=(De=(he=se==null?void 0:se.spec)==null?void 0:he.type)==null?void 0:De.toString())!=null?we:"home"},w.createElement(m.h4,{title:w.createElement(Mt,{title:ft,entity:se}),pageTitleOverride:ft,type:K},se&&w.createElement(w.Fragment,null,w.createElement(bn,{entity:se}),w.createElement(kt,{UNSTABLE_extraContextMenuItems:Ne,UNSTABLE_contextMenuOptions:Ke,onUnregisterEntity:()=>b(!0),onInspectEntity:()=>G(!0)}))),ke&&w.createElement(m.Ex,null),se&&w.createElement(m.tn,{routes:Fe}),ot&&w.createElement(m.VY,null,w.createElement(Pe.Z,{severity:"error"},ot.toString())),!ke&&!ot&&!se&&w.createElement(m.VY,null,w.createElement(m.GB,{title:"Entity not found"},"There is no ",ct," with the requested"," ",w.createElement(m.rU,{to:"https://backstage.io/docs/features/software-catalog/references"},"kind, namespace, and name"),".")),w.createElement(d.pp,{open:l,entity:se,onConfirm:rt,onClose:()=>b(!1)}),w.createElement(d.U_,{open:x,entity:se,onClose:()=>G(!1)}))};vn.Route=Ut;function Me(oe){const{open:he,onClose:De,onConfirm:we,entity:Ne}=oe,[Ke,Be]=(0,w.useState)(!1),ct=(0,u.h_)(d.Ah),Kt=(0,u.h_)(u.$v),mn=async()=>{Be(!0);try{const se=Ne.metadata.uid;await ct.removeEntityByUid(se),we()}catch(se){(0,Le.BD)(se),Kt.post({message:se.message})}finally{Be(!1)}};return w.createElement(qe.Z,{open:he,onClose:De},w.createElement($t.Z,{id:"responsive-dialog-title"},"Are you sure you want to delete this entity?"),w.createElement(Ot.Z,null,w.createElement(pn.Z,{variant:"contained",color:"secondary",disabled:Ke,onClick:mn},"Delete"),w.createElement(pn.Z,{onClick:De,color:"primary"},"Cancel")))}function ht(oe){var he,De;return((De=(he=oe==null?void 0:oe.metadata)==null?void 0:he.annotations)==null?void 0:De["backstage.io/orphan"])==="true"}function _t(){const oe=(0,ae.s0)(),he=(0,u.tg)(Dt),[De,we]=(0,w.useState)(!1),{entity:Ne}=(0,d.X2)(),Ke=async()=>{we(!1),oe(he())};return w.createElement(w.Fragment,null,w.createElement(Pe.Z,{severity:"warning",onClick:()=>we(!0)},"This entity is not referenced by any location and is therefore not receiving updates. Click here to delete."),w.createElement(Me,{open:De,entity:Ne,onConfirm:Ke,onClose:()=>we(!1)}))}const tn=oe=>oe.error&&oe.level==="error"&&oe.type===le.mk;async function Bt(oe,he){return{items:(await he.getEntityAncestors({entityRef:oe})).items.map(Ne=>{var Ke,Be;return{errors:((Be=(Ke=Ne.entity.status)==null?void 0:Ke.items)!=null?Be:[]).filter(tn).map(mn=>mn.error).filter(mn=>Boolean(mn)),entity:Ne.entity}}).filter(Ne=>Ne.errors.length>0)}}async function hn(oe,he){const De=he.apis.get(d.Ah);if(!De)throw new Error(`No implementation available for ${d.Ah}`);return(await Bt((0,p.eE)(oe),De)).items.length>0}function kn(){const{entity:oe}=(0,d.X2)(),he=(0,p.eE)(oe),De=(0,u.h_)(d.Ah),{loading:we,error:Ne,value:Ke}=(0,Ie.default)(async()=>Bt(he,De),[he,De]);return Ne?w.createElement($e.Z,{mb:1},w.createElement(m.Gk,{error:Ne})):we||!Ke?null:w.createElement(w.Fragment,null,Ke.items.map((Be,ct)=>w.createElement($e.Z,{key:ct,mb:1},(0,p.eE)(oe)!==(0,p.eE)(Be.entity)&&w.createElement($e.Z,{p:1},"The error below originates from"," ",w.createElement(d.dx,{entityRef:Be.entity})),Be.errors.map((Kt,mn)=>w.createElement(m.Gk,{key:mn,error:Kt})))))}const Bn="core.backstage.entitySwitch",Un=oe=>null;(0,u.R5)(Un,Bn,!0);const An=oe=>{var he,De;const{entity:we,loading:Ne}=(0,d.ce)(),Ke=(0,u.I_)(),Be=(0,u.vJ)(oe.children,Kt=>Kt.selectByComponentData({key:Bn,withStrictError:"Child of EntitySwitch is not an EntitySwitch.Case"}).getElements().flatMap(mn=>{var se;if(Ne)return[];const{if:ke,children:ot}=mn.props;return we?[{if:(se=ke==null?void 0:ke(we,{apis:Ke}))!=null?se:!0,children:ot}]:[{if:ke===void 0,children:ot}]}),[Ke,we,Ne]);return Be.some(Kt=>typeof Kt.if=="object"&&"then"in Kt.if)?w.createElement(Ge,{results:Be}):(De=(he=Be.find(Kt=>Kt.if))==null?void 0:he.children)!=null?De:null};function Ge({results:oe}){const{loading:he,value:De}=(0,Ie.default)(async()=>{var we;const Ne=oe.map(async({if:Ke,children:Be})=>{try{if(await Ke)return Be}catch{}return null});return(we=(await Promise.all(Ne)).find(Boolean))!=null?we:null},[oe]);return he||!De?null:De}An.Case=Un;function Je(oe,he){return Boolean(oe&&(oe==null?void 0:oe.toLocaleLowerCase("en-US"))===(he==null?void 0:he.toLocaleLowerCase("en-US")))}function mt(oe){return he=>Je(he.kind,oe)}function dt(oe){return he=>Je(he.kind,"component")?Je(he.spec.type,oe):!1}function It(oe){return he=>{var De;return Je((De=he.metadata)==null?void 0:De.namespace,oe)}}const Wt=null,Jt=d._i.Filters,xt=d._i.Content,N=(0,u.rx)({id:"catalog",apis:[(0,u.ni)({api:d.Ah,deps:{discoveryApi:u.NW,fetchApi:u.gP},factory:({discoveryApi:oe,fetchApi:he})=>new le.MS({discoveryApi:oe,fetchApi:he})}),(0,u.ni)({api:d.p3,deps:{storageApi:u.E6},factory:({storageApi:oe})=>new xe({storageApi:oe})})],routes:{catalogIndex:Dt,catalogEntity:d.wi},externalRoutes:{createComponent:at,viewTechDoc:Zt}}),F=N.provide((0,u.P4)({name:"CatalogIndexPage",component:()=>t.e(5095).then(t.bind(t,35095)).then(oe=>oe.CatalogPage),mountPoint:Dt})),q=N.provide((0,u.P4)({name:"CatalogEntityPage",component:()=>t.e(8129).then(t.bind(t,78129)).then(oe=>oe.CatalogEntityPage),mountPoint:d.wi})),ye=N.provide((0,u.CO)({name:"EntityAboutCard",component:{lazy:()=>t.e(4633).then(t.bind(t,84633)).then(oe=>oe.AboutCard)}})),Se=N.provide((0,u.CO)({name:"EntityLinksCard",component:{lazy:()=>t.e(4591).then(t.bind(t,64591)).then(oe=>oe.EntityLinksCard)}})),vt=N.provide((0,u.CO)({name:"EntityHasSystemsCard",component:{lazy:()=>t.e(8669).then(t.bind(t,38669)).then(oe=>oe.HasSystemsCard)}})),Rt=N.provide((0,u.CO)({name:"EntityHasComponentsCard",component:{lazy:()=>t.e(9018).then(t.bind(t,29018)).then(oe=>oe.HasComponentsCard)}})),Nt=N.provide((0,u.CO)({name:"EntityHasSubcomponentsCard",component:{lazy:()=>t.e(657).then(t.bind(t,90657)).then(oe=>oe.HasSubcomponentsCard)}})),zt=N.provide((0,u.CO)({name:"EntityHasResourcesCard",component:{lazy:()=>t.e(5153).then(t.bind(t,65153)).then(oe=>oe.HasResourcesCard)}})),xn=N.provide((0,u.CO)({name:"EntityDependsOnComponentsCard",component:{lazy:()=>t.e(7110).then(t.bind(t,7110)).then(oe=>oe.DependsOnComponentsCard)}})),zn=N.provide((0,u.CO)({name:"EntityDependencyOfComponentsCard",component:{lazy:()=>t.e(2879).then(t.bind(t,72879)).then(oe=>oe.DependencyOfComponentsCard)}})),st=N.provide((0,u.CO)({name:"EntityDependsOnResourcesCard",component:{lazy:()=>t.e(6973).then(t.bind(t,36973)).then(oe=>oe.DependsOnResourcesCard)}})),Ue=N.provide((0,u.CO)({name:"RelatedEntitiesCard",component:{lazy:()=>t.e(6497).then(t.bind(t,56497)).then(oe=>oe.RelatedEntitiesCard)}}))},16673:function(Lt,c,t){t.d(c,{BL:function(){return e.n},Cy:function(){return e.l},Eq:function(){return e.r},Es:function(){return e.a},FZ:function(){return e.p},Hz:function(){return e.q},Kf:function(){return e.y},PA:function(){return e.s},Tu:function(){return e.f},_l:function(){return e.w},bM:function(){return e.E},dN:function(){return e.e},f2:function(){return e.o},im:function(){return e.u},jF:function(){return e.i},mr:function(){return e.t},o6:function(){return e.j},oU:function(){return e.m},p$:function(){return e.v},rR:function(){return e.g},yf:function(){return e.k}});var e=t(37491),n=t(82394),p=t.n(n),a=t(34520),o=t(76635),m=t.n(o),u=t(49558),v=t(30705),d=t(49462),y=t(73495),h=t(2784),M=t(26655),L=t(32272),$=t(88285)},42214:function(Lt,c,t){t.d(c,{IJ:function(){return Gt},Oz:function(){return vn},Q3:function(){return nt},fX:function(){return Et},i4:function(){return Mt}});var e=t(30705),n=t(1854),p=t(89393),a=t(2784),o=t(73495),m=t(10289),u=t(79692),v=t(27616),d=t(8284),y=t(90436),h=t(4614),M=t(80030),L=t(69087),$=t(35111),J=t(14498),g=t(89571),S=t(15584),E=t(49378),I=t(70660),D=t(91256),T=t(37390),i=t(95544),O=t(67358),W=t(27556),Ce=t(97485),$e=t(86689),Qe=t(61837),it=t(77277),lt=t(38016),qe=t(69001),$t=t(96299),Ot=t(49558),pn=t(64279),_n=t(30254),U=t(43266),Re=t(58838),w=t(62833),Ie=t(77446),fe=t(26883);const A=(0,e.T0)({id:"plugin.githubactions.service"});class H{constructor(ht){this.configApi=ht.configApi,this.githubAuthApi=ht.githubAuthApi}async getOctokit(ht){var _t;const tn=await this.githubAuthApi.getAccessToken(["repo"]),hn=(0,n.E8)((_t=this.configApi.getOptionalConfigArray("integrations.github"))!=null?_t:[]).find(Bn=>Bn.host===ht),kn=hn==null?void 0:hn.apiBaseUrl;return new p.v({auth:tn,baseUrl:kn})}async reRunWorkflow({hostname:ht,owner:_t,repo:tn,runId:Bt}){return(await this.getOctokit(ht)).actions.reRunWorkflow({owner:_t,repo:tn,run_id:Bt})}async listWorkflowRuns({hostname:ht,owner:_t,repo:tn,pageSize:Bt=100,page:hn=0,branch:kn}){return(await(await this.getOctokit(ht)).actions.listWorkflowRunsForRepo({owner:_t,repo:tn,per_page:Bt,page:hn,...kn?{branch:kn}:{}})).data}async getWorkflow({hostname:ht,owner:_t,repo:tn,id:Bt}){return(await(await this.getOctokit(ht)).actions.getWorkflow({owner:_t,repo:tn,workflow_id:Bt})).data}async getWorkflowRun({hostname:ht,owner:_t,repo:tn,id:Bt}){return(await(await this.getOctokit(ht)).actions.getWorkflowRun({owner:_t,repo:tn,run_id:Bt})).data}async listJobsForWorkflowRun({hostname:ht,owner:_t,repo:tn,id:Bt,pageSize:hn=100,page:kn=0}){return(await(await this.getOctokit(ht)).actions.listJobsForWorkflowRun({owner:_t,repo:tn,run_id:Bt,per_page:hn,page:kn})).data}async downloadJobLogsForWorkflowRun({hostname:ht,owner:_t,repo:tn,runId:Bt}){return(await(await this.getOctokit(ht)).actions.downloadJobLogsForWorkflowRun({owner:_t,repo:tn,job_id:Bt})).data}}var re=(Me=>(Me[Me.success=0]="success",Me[Me.failure=1]="failure",Me[Me.pending=2]="pending",Me[Me.running=3]="running",Me))(re||{});const Pe=(0,e.NT)({id:"github-actions"}),ae=(0,e.Rz)({id:"github-actions/build",path:"/:id",parent:Pe}),Te=(0,e.rx)({id:"github-actions",apis:[(0,e.ni)({api:A,deps:{configApi:e.Ds,githubAuthApi:e.F4},factory:({configApi:Me,githubAuthApi:ht})=>new H({configApi:Me,githubAuthApi:ht})})],routes:{entityContent:Pe}}),Et=Te.provide((0,e.P4)({name:"EntityGithubActionsContent",component:()=>Promise.resolve().then(function(){return kt}).then(Me=>Me.Router),mountPoint:Pe})),te=Te.provide((0,e.CO)({name:"EntityLatestGithubActionRunCard",component:{lazy:()=>t.e(8720).then(t.bind(t,88720)).then(Me=>Me.LatestWorkflowRunCard)}})),ee=Te.provide((0,e.CO)({name:"EntityLatestGithubActionsForBranchCard",component:{lazy:()=>t.e(8720).then(t.bind(t,88720)).then(Me=>Me.LatestWorkflowsForBranchCard)}})),Le=Te.provide((0,e.CO)({name:"EntityRecentGithubActionsRunsCard",component:{lazy:()=>t.e(8720).then(t.bind(t,88720)).then(Me=>Me.RecentWorkflowRunsCard)}})),le="github.com/project-slug",Q=Me=>{var ht,_t;return(_t=(ht=Me==null?void 0:Me.metadata.annotations)==null?void 0:ht[le])!=null?_t:""},xe=({status:Me,conclusion:ht})=>{if(Me===void 0)return null;switch(Me.toLocaleLowerCase("en-US")){case"queued":return a.createElement(a.Fragment,null,a.createElement(Ot.wA,null)," Queued");case"in_progress":return a.createElement(a.Fragment,null,a.createElement(Ot.VC,null)," In progress");case"completed":switch(ht==null?void 0:ht.toLocaleLowerCase("en-US")){case"skipped":return a.createElement(a.Fragment,null,a.createElement(Ot.dh,null)," Aborted");case"timed_out":return a.createElement(a.Fragment,null,a.createElement(Ot.Pd,null)," Timed out");case"failure":return a.createElement(a.Fragment,null,a.createElement(Ot.vK,null)," Error");default:return a.createElement(a.Fragment,null,a.createElement(Ot.Kq,null)," Completed")}default:return a.createElement(a.Fragment,null,a.createElement(Ot.wA,null)," Pending")}},at=({hostname:Me,owner:ht,repo:_t})=>{const tn=(0,e.h_)(A),{id:Bt}=(0,e.Oi)(ae);return(0,pn.default)(async()=>_t&&ht?tn.listJobsForWorkflowRun({hostname:Me,owner:ht,repo:_t,id:parseInt(Bt,10)}):Promise.reject(new Error("No repo/owner provided")),[_t,ht,Bt])},Zt=({hostname:Me,owner:ht,repo:_t})=>{const tn=(0,e.h_)(A),{id:Bt}=(0,e.Oi)(ae);return(0,pn.default)(async()=>_t&&ht?tn.getWorkflowRun({hostname:Me,owner:ht,repo:_t,id:parseInt(Bt,10)}):Promise.reject(new Error("No repo/owner provided")),[_t,ht,Bt])},Dt=({hostname:Me,owner:ht,repo:_t,id:tn})=>{const Bt=(0,e.h_)(A);return(0,pn.default)(async()=>_t&&ht?Bt.downloadJobLogsForWorkflowRun({hostname:Me,owner:ht,repo:_t,runId:tn}):Promise.reject("No repo/owner provided"),[_t,ht,tn])},en=(0,u.Z)(Me=>({button:{order:-1,marginRight:0,marginLeft:"-20px"},modal:{display:"flex",alignItems:"center",width:"85%",height:"85%",justifyContent:"center",margin:"auto"},normalLogContainer:{height:"75vh",width:"100%"},modalLogContainer:{height:"100%",width:"100%"},log:{background:Me.palette.background.default}})),on=({entity:Me,runId:ht,inProgress:_t})=>{var tn;const Bt=(0,e.h_)(e.Ds),hn=en(),kn=Q(Me),Bn=(0,n.E8)((tn=Bt.getOptionalConfigArray("integrations.github"))!=null?tn:[])[0].host,[Un,An]=kn&&kn.split("/")||[],Ge=Dt({hostname:Bn,owner:Un,repo:An,id:ht}),Je=Ge.value?String(Ge.value):void 0,[mt,dt]=a.useState(!1),It=()=>{dt(!0)},Wt=()=>{dt(!1)};return a.createElement(v.Z,{TransitionProps:{unmountOnExit:!0},disabled:_t},a.createElement(d.Z,{expandIcon:a.createElement(lt.Z,null),"aria-controls":`panel-${name}-content`,id:`panel-${name}-header`,IconButtonProps:{className:hn.button}},a.createElement(y.Z,{variant:"button"},Ge.loading?a.createElement(h.Z,null):"Job Log"),a.createElement(M.ZP,{title:"Open Log",TransitionComponent:L.Z,arrow:!0},a.createElement(_n.Z,{onClick:Jt=>{Jt.stopPropagation(),It()},style:{marginLeft:"auto"}})),a.createElement($.Z,{className:hn.modal,onClick:Jt=>Jt.stopPropagation(),open:mt,onClose:Wt},a.createElement(J.Z,{in:mt},a.createElement("div",{className:hn.modalLogContainer},a.createElement(Ot.nU,{text:Je!=null?Je:"No Values Found",classes:{root:hn.log}}))))),Je&&a.createElement("div",{className:hn.normalLogContainer},a.createElement(Ot.nU,{text:Je,classes:{root:hn.log}})))},gn=(0,u.Z)(Me=>({root:{maxWidth:720,margin:Me.spacing(2)},title:{padding:Me.spacing(1,0,2,0)},table:{padding:Me.spacing(1)},accordionDetails:{padding:0},button:{order:-1,marginRight:0,marginLeft:"-20px"},externalLinkIcon:{fontSize:"inherit",verticalAlign:"bottom"}})),Ye=(Me,ht)=>{const _t=$t.ou.fromISO(Me);return(ht?$t.ou.fromISO(ht):$t.ou.now()).diff(_t).toFormat("m 'minutes' s 'seconds'")},Y=({step:Me})=>{var ht;return a.createElement(g.Z,null,a.createElement(S.Z,null,a.createElement(E.Z,{primary:Me.name,secondary:Ye(Me.started_at,Me.completed_at)})),a.createElement(S.Z,null,a.createElement(xe,{status:Me.status.toLocaleUpperCase("en-US"),conclusion:(ht=Me.conclusion)==null?void 0:ht.toLocaleUpperCase("en-US")})))},ce=({job:Me,className:ht,entity:_t})=>{const tn=gn();return a.createElement(v.Z,{TransitionProps:{unmountOnExit:!0},className:ht},a.createElement(d.Z,{expandIcon:a.createElement(lt.Z,null),"aria-controls":`panel-${name}-content`,id:`panel-${name}-header`,IconButtonProps:{className:tn.button}},a.createElement(y.Z,{variant:"button"},Me.name," (",Ye(Me.started_at,Me.completed_at),")")),a.createElement(I.Z,{className:tn.accordionDetails},a.createElement(D.Z,null,a.createElement(T.Z,null,Me.steps.map(Bt=>a.createElement(Y,{key:Bt.number,step:Bt}))))),Me.status==="queued"||Me.status==="in_progress"?a.createElement(on,{runId:Me.id,inProgress:!0,entity:_t}):a.createElement(on,{runId:Me.id,inProgress:!1,entity:_t}))},_e=({jobs:Me,entity:ht})=>{const _t=gn();return a.createElement(i.Z,null,Me&&Me.total_count>0&&Me.jobs.map(tn=>a.createElement(ce,{key:tn.id,job:tn,className:tn.status!=="success"?_t.failed:_t.success,entity:ht})))},Ze=({entity:Me})=>{var ht,_t,tn,Bt,hn,kn,Bn,Un,An,Ge,Je,mt,dt,It,Wt,Jt;const xt=(0,e.h_)(e.Ds),N=Q(Me),F=(0,n.E8)((ht=xt.getOptionalConfigArray("integrations.github"))!=null?ht:[])[0].host,[q,ye]=N&&N.split("/")||[],Se=Zt({hostname:F,owner:q,repo:ye}),vt=at({hostname:F,owner:q,repo:ye}),Rt=gn();return Se.error&&Se.error.message?a.createElement(y.Z,{variant:"h6",color:"error"},"Failed to load build, ",Se.error.message):Se.loading?a.createElement(O.Z,null):a.createElement("div",{className:Rt.root},a.createElement(i.Z,{mb:3},a.createElement(Ot.Oo,{"aria-label":"breadcrumb"},a.createElement(Ot.rU,{to:".."},"Workflow runs"),a.createElement(y.Z,null,"Workflow run details"))),a.createElement(D.Z,{component:W.Z,className:Rt.table},a.createElement(T.Z,null,a.createElement(Ce.Z,null,a.createElement(g.Z,null,a.createElement(S.Z,null,a.createElement(y.Z,{noWrap:!0},"Branch")),a.createElement(S.Z,null,(_t=Se.value)==null?void 0:_t.head_branch)),a.createElement(g.Z,null,a.createElement(S.Z,null,a.createElement(y.Z,{noWrap:!0},"Message")),a.createElement(S.Z,null,(Bt=(tn=Se.value)==null?void 0:tn.head_commit)==null?void 0:Bt.message)),a.createElement(g.Z,null,a.createElement(S.Z,null,a.createElement(y.Z,{noWrap:!0},"Commit ID")),a.createElement(S.Z,null,(kn=(hn=Se.value)==null?void 0:hn.head_commit)==null?void 0:kn.id)),a.createElement(g.Z,null,a.createElement(S.Z,null,a.createElement(y.Z,{noWrap:!0},"Workflow")),a.createElement(S.Z,null,(Bn=Se.value)==null?void 0:Bn.name)),a.createElement(g.Z,null,a.createElement(S.Z,null,a.createElement(y.Z,{noWrap:!0},"Status")),a.createElement(S.Z,null,a.createElement(xe,{status:((Un=Se.value)==null?void 0:Un.status)||void 0,conclusion:((An=Se.value)==null?void 0:An.conclusion)||void 0}))),a.createElement(g.Z,null,a.createElement(S.Z,null,a.createElement(y.Z,{noWrap:!0},"Author")),a.createElement(S.Z,null,`${(mt=(Je=(Ge=Se.value)==null?void 0:Ge.head_commit)==null?void 0:Je.author)==null?void 0:mt.name} (${(Wt=(It=(dt=Se.value)==null?void 0:dt.head_commit)==null?void 0:It.author)==null?void 0:Wt.email})`)),a.createElement(g.Z,null,a.createElement(S.Z,null,a.createElement(y.Z,{noWrap:!0},"Links")),a.createElement(S.Z,null,((Jt=Se.value)==null?void 0:Jt.html_url)&&a.createElement($e.Z,{target:"_blank",href:Se.value.html_url},"Workflow runs on GitHub"," ",a.createElement(qe.Z,{className:Rt.externalLinkIcon})))),a.createElement(g.Z,null,a.createElement(S.Z,{colSpan:2},a.createElement(y.Z,{noWrap:!0},"Jobs"),vt.loading?a.createElement(h.Z,null):a.createElement(_e,{jobs:vt.value,entity:Me})))))))};function ie({hostname:Me,owner:ht,repo:_t,branch:tn,initialPageSize:Bt=5}){const hn=(0,e.h_)(A),kn=(0,e.h_)(e.VE),[Bn,Un]=(0,a.useState)(0),[An,Ge]=(0,a.useState)(0),[Je,mt]=(0,a.useState)(Bt),{loading:dt,value:It,retry:Wt,error:Jt}=(0,Ie.Z)(async()=>{const xt=await hn.listWorkflowRuns({hostname:Me,owner:ht,repo:_t,pageSize:Je,page:An+1,branch:tn});return Un(xt.total_count),xt.workflow_runs.map(N=>{var F,q;return{workflowName:N.name,message:N.head_commit.message,id:`${N.id}`,onReRunClick:async()=>{try{await hn.reRunWorkflow({hostname:Me,owner:ht,repo:_t,runId:N.id})}catch(ye){kn.post(ye)}},source:{branchName:N.head_branch,commit:{hash:N.head_commit.id,url:(q=(F=N.head_repository)==null?void 0:F.branches_url)==null?void 0:q.replace("{/branch}",N.head_branch)}},status:N.status,conclusion:N.conclusion,url:N.url,githubUrl:N.html_url}})},[An,Je,_t,ht]);return[{page:An,pageSize:Je,loading:dt,runs:It,projectName:`${ht}/${_t}`,total:Bn,error:Jt},{runs:It,setPage:Ge,setPageSize:mt,retry:Wt}]}const de=[{title:"ID",field:"id",type:"numeric",width:"150px"},{title:"Message",field:"message",highlight:!0,render:Me=>{const ht=()=>{const _t=(0,e.tg)(ae);return a.createElement($e.Z,{component:w.rU,to:_t({id:Me.id})},Me.message)};return a.createElement(ht,null)}},{title:"Source",render:Me=>{var ht,_t;return a.createElement(y.Z,{variant:"body2",noWrap:!0},a.createElement("p",null,(ht=Me.source)==null?void 0:ht.branchName),a.createElement("p",null,(_t=Me.source)==null?void 0:_t.commit.hash))}},{title:"Workflow",field:"workflowName"},{title:"Status",width:"150px",render:Me=>a.createElement(i.Z,{display:"flex",alignItems:"center"},a.createElement(xe,{status:Me.status,conclusion:Me.conclusion}))},{title:"Actions",render:Me=>a.createElement(M.ZP,{title:"Rerun workflow"},a.createElement(Qe.Z,{onClick:Me.onReRunClick},a.createElement(U.Z,null))),width:"10%"}],ve=({projectName:Me,loading:ht,pageSize:_t,page:tn,retry:Bt,runs:hn,onChangePage:kn,onChangePageSize:Bn,total:Un})=>a.createElement(Ot.iA,{isLoading:ht,options:{paging:!0,pageSize:_t,padding:"dense"},totalCount:Un,page:tn,actions:[{icon:()=>a.createElement(fe.Z,null),tooltip:"Reload workflow runs",isFreeAction:!0,onClick:()=>Bt()}],data:hn!=null?hn:[],onPageChange:kn,onRowsPerPageChange:Bn,style:{width:"100%"},title:a.createElement(i.Z,{display:"flex",alignItems:"center"},a.createElement(Re.Z,null),a.createElement(i.Z,{mr:1}),a.createElement(y.Z,{variant:"h6"},Me)),columns:de}),ge=({entity:Me,branch:ht})=>{var _t;const tn=(0,e.h_)(e.Ds),Bt=Q(Me),hn=(0,n.E8)((_t=tn.getOptionalConfigArray("integrations.github"))!=null?_t:[])[0].host,[kn,Bn]=(Bt!=null?Bt:"/").split("/"),[{runs:Un,...An},{retry:Ge,setPage:Je,setPageSize:mt}]=ie({hostname:hn,owner:kn,repo:Bn,branch:ht}),dt=hn||"github.com";return!An.loading&&!Un?a.createElement(Ot.ub,{missing:"data",title:"No Workflow Data",description:"This component has GitHub Actions enabled, but no data was found. Have you created any Workflows? Click the button below to create a new Workflow.",action:a.createElement(it.Z,{variant:"contained",color:"primary",href:`https://${dt}/${Bt}/actions/new`},"Create new Workflow")}):a.createElement(ve,{...An,runs:Un,loading:An.loading,retry:Ge,onChangePageSize:mt,onChangePage:Je})},nt=Me=>{var ht;return Boolean((ht=Me.metadata.annotations)==null?void 0:ht[le])};var kt=Object.freeze({__proto__:null,isGithubActionsAvailable:nt,Router:()=>{const{entity:Me}=(0,o.X2)();return nt(Me)?a.createElement(m.Z5,null,a.createElement(m.AW,{path:"/",element:a.createElement(ge,{entity:Me})}),a.createElement(m.AW,{path:`${ae.path}`,element:a.createElement(Ze,{entity:Me})}),")"):a.createElement(Ot.sk,{annotation:le})}});const ln=(0,u.Z)({externalLinkIcon:{fontSize:"inherit",verticalAlign:"bottom"}}),Ut=({error:Me,loading:ht,lastRun:_t,branch:tn})=>{var Bt;const hn=ln();return Me?a.createElement(y.Z,null,"Couldn't fetch latest ",tn," run"):ht?a.createElement(O.Z,null):a.createElement(Ot.xT,{metadata:{status:a.createElement(a.Fragment,null,a.createElement(xe,{status:_t.status,conclusion:_t.conclusion})),message:_t.message,url:a.createElement(Ot.rU,{to:(Bt=_t.githubUrl)!=null?Bt:""},"See more on GitHub"," ",a.createElement(qe.Z,{className:hn.externalLinkIcon}))}})},Mt=({branch:Me="master",variant:ht})=>{var _t,tn,Bt,hn;const{entity:kn}=(0,o.X2)(),Bn=(0,e.h_)(e.Ds),Un=(0,e.h_)(e.VE),An=(0,n.E8)((_t=Bn.getOptionalConfigArray("integrations.github"))!=null?_t:[])[0].host,[Ge,Je]=((Bt=(tn=kn==null?void 0:kn.metadata.annotations)==null?void 0:tn[le])!=null?Bt:"/").split("/"),[{runs:mt,loading:dt,error:It}]=ie({hostname:An,owner:Ge,repo:Je,branch:Me}),Wt=(hn=mt==null?void 0:mt[0])!=null?hn:{};return(0,a.useEffect)(()=>{It&&Un.post(It)},[It,Un]),a.createElement(Ot.rJ,{title:`Last ${Me} build`,variant:ht},a.createElement(Ut,{error:It,loading:dt,branch:Me,lastRun:Wt}))},Gt=({branch:Me="master",variant:ht})=>{const{entity:_t}=(0,o.X2)();return a.createElement(Ot.rJ,{title:`Last ${Me} build`,variant:ht},a.createElement(ge,{branch:Me,entity:_t}))},bn=Me=>Me.split(`
`)[0],vn=({branch:Me,dense:ht=!1,limit:_t=5,variant:tn})=>{var Bt,hn,kn;const{entity:Bn}=(0,o.X2)(),Un=(0,e.h_)(e.Ds),An=(0,e.h_)(e.VE),Ge=(0,n.E8)((Bt=Un.getOptionalConfigArray("integrations.github"))!=null?Bt:[])[0].host,[Je,mt]=((kn=(hn=Bn==null?void 0:Bn.metadata.annotations)==null?void 0:hn[le])!=null?kn:"/").split("/"),[{runs:dt=[],loading:It,error:Wt}]=ie({hostname:Ge,owner:Je,repo:mt,branch:Me,initialPageSize:_t});(0,a.useEffect)(()=>{Wt&&An.post(Wt)},[Wt,An]);const Jt=Ge||"github.com";return a.createElement(Ot.rJ,{title:"Recent Workflow Runs",subheader:Me?`Branch: ${Me}`:"All Branches",noPadding:!0,variant:tn},dt.length?a.createElement(Ot.iA,{isLoading:It,options:{search:!1,paging:!1,padding:ht?"dense":"default",toolbar:!1},columns:[{title:"Commit Message",field:"message",render:xt=>a.createElement(Ot.rU,{component:w.rU,to:(0,m.Gn)("./ci-cd/:id",{id:xt.id})},bn(xt.message))},{title:"Branch",field:"source.branchName"},{title:"Status",field:"status",render:xe}],data:dt}):a.createElement("div",{style:{textAlign:"center"}},a.createElement(y.Z,{variant:"body1"},"This component has GitHub Actions enabled, but no workflows were found."),a.createElement(y.Z,{variant:"body2"},a.createElement(Ot.rU,{to:`https://${Jt}/${Je}/${mt}/actions/new`},"Create a new workflow"))))}},422:function(Lt,c,t){t.d(c,{dI:function(){return te}});var e=t(30705),n=t(2784),p=t(73495),a=t(10289),o=t(90436),m=t(7089),u=t(60905),v=t(79692),d=t(12420),y=t(77277),h=t(61837),M=t(5806),L=t(82938),$=t(4190),J=t(85256),g=t(27616),S=t(8284),E=t(70660),I=t(31625),D=t(31377),T=t(34546),i=t(49558),O=t.p+"static/emptystate.b451a0ca..svg",W=t(38016),Ce=t(87685),$e=t(2997),Qe=t(15459),it=t(93524),lt=t(70218),qe=t(32714),$t=t.n(qe),Ot=t(76635),pn=t.n(Ot),_n=t(99264),U=t(91750),Re=t(96299);class w{constructor(Z){this.discoveryApi=Z.discoveryApi,this.identityApi=Z.identityApi}async handleResponse(Z){if(!Z.ok){const X=await Z.text();let pe;switch(Z.status){case 404:pe="Could not find the Kubernetes Backend (HTTP 404). Make sure the plugin has been fully installed.";break;default:pe=`Request failed with ${Z.status} ${Z.statusText}, ${X}`}throw new Error(pe)}return await Z.json()}async postRequired(Z,X){const pe=`${await this.discoveryApi.getBaseUrl("kubernetes")}${Z}`,{token:et}=await this.identityApi.getCredentials(),tt=await fetch(pe,{method:"POST",headers:{"Content-Type":"application/json",...et&&{Authorization:`Bearer ${et}`}},body:JSON.stringify(X)});return this.handleResponse(tt)}async getObjectsByEntity(Z){return await this.postRequired(`/services/${Z.entity.metadata.name}`,Z)}async getClusters(){const{token:Z}=await this.identityApi.getCredentials(),X=`${await this.discoveryApi.getBaseUrl("kubernetes")}/clusters`,pe=await fetch(X,{method:"GET",headers:{...Z&&{Authorization:`Bearer ${Z}`}}});return(await this.handleResponse(pe)).items}}const Ie=(0,e.T0)({id:"plugin.kubernetes.service"}),fe=(0,e.T0)({id:"plugin.kubernetes-auth-providers.service"});class A{constructor(Z){this.authProvider=Z}async decorateRequestBodyForAuth(Z){const X=await this.authProvider.getAccessToken("https://www.googleapis.com/auth/cloud-platform");return"auth"in Z?Z.auth.google=X:Z.auth={google:X},Z}}class H{async decorateRequestBodyForAuth(Z){return Z}}class re{async decorateRequestBodyForAuth(Z){return Z}}class Pe{async decorateRequestBodyForAuth(Z){return Z}}class ae{constructor(Z){this.kubernetesAuthProviderMap=new Map,this.kubernetesAuthProviderMap.set("google",new A(Z.googleAuthApi)),this.kubernetesAuthProviderMap.set("serviceAccount",new H),this.kubernetesAuthProviderMap.set("googleServiceAccount",new Pe),this.kubernetesAuthProviderMap.set("aws",new re)}async decorateRequestBodyForAuth(Z,X){const pe=this.kubernetesAuthProviderMap.get(Z);if(pe)return await pe.decorateRequestBodyForAuth(X);throw new Error(`authProvider "${Z}" has no KubernetesAuthProvider defined for it`)}}const Te=(0,e.NT)({id:"kubernetes"}),te=(0,e.rx)({id:"kubernetes",apis:[(0,e.ni)({api:Ie,deps:{discoveryApi:e.NW,identityApi:e.$4},factory:({discoveryApi:k,identityApi:Z})=>new w({discoveryApi:k,identityApi:Z})}),(0,e.ni)({api:fe,deps:{googleAuthApi:e.Kp},factory:({googleAuthApi:k})=>new ae({googleAuthApi:k})})],routes:{entityContent:Te}}).provide((0,e.P4)({name:"EntityKubernetesContent",component:()=>Promise.resolve().then(function(){return lr}).then(k=>k.Router),mountPoint:Te})),ee=k=>k.map((Z,X)=>n.createElement("div",{key:X},n.createElement(o.Z,{variant:"body2"},`Cluster: ${Z.cluster.name}`),Z.errors.map((pe,et)=>n.createElement(o.Z,{variant:"body2",key:et},`Error fetching Kubernetes resource: '${pe.resourcePath}', error: ${pe.errorType}, status code: ${pe.statusCode}`)),n.createElement("br",null))),Le=({entityName:k,errorMessage:Z,clustersWithErrors:X})=>n.createElement(i.GB,{title:"There was a problem retrieving Kubernetes objects",message:`There was a problem retrieving some Kubernetes resources for the entity: ${k}. This could mean that the Error Reporting card is not completely accurate.`},X&&n.createElement("div",null,"Errors: ",ee(X)),Z&&n.createElement(o.Z,{variant:"body2"},"Errors: ",Z)),le=[{title:"cluster",width:"15%",render:k=>k.cluster},{title:"kind",width:"15%",render:k=>k.kind},{title:"name",width:"30%",render:k=>{const Z=k.names.length;if(Z===0)return null;const X=k.names[0],pe=Z-1;return n.createElement(n.Fragment,null,X," ",pe>0&&n.createElement(m.Z,{label:`+ ${pe} other${pe>1?"s":""}`,size:"small"}))}},{title:"messages",width:"40%",render:k=>n.createElement(n.Fragment,null,k.message.map((Z,X)=>n.createElement("div",{key:X},Z)))}],Q=(k,Z)=>k.severity<Z.severity?1:Z.severity<k.severity?-1:0,xe=()=>n.createElement(u.Z,{container:!0,justifyContent:"space-around",direction:"row",alignItems:"center",spacing:2},n.createElement(u.Z,{item:!0,xs:4},n.createElement(o.Z,{variant:"h5"},"Nice! There are no errors to report!")),n.createElement(u.Z,{item:!0,xs:4},n.createElement("img",{src:O,alt:"EmptyState","data-testid":"emptyStateImg"}))),at=({detectedErrors:k})=>{const Z=Array.from(k.values()).flat().sort(Q);return n.createElement(n.Fragment,null,Z.length===0?n.createElement(i.rJ,{title:"Error Reporting"},n.createElement(xe,null)):n.createElement(i.iA,{title:"Error Reporting",data:Z,columns:le,options:{paging:!0,search:!1}}))},Zt=k=>k.reduce((Z,X)=>{switch(X.type){case"deployments":Z.deployments.push(...X.resources);break;case"pods":Z.pods.push(...X.resources);break;case"replicasets":Z.replicaSets.push(...X.resources);break;case"services":Z.services.push(...X.resources);break;case"configmaps":Z.configMaps.push(...X.resources);break;case"horizontalpodautoscalers":Z.horizontalPodAutoscalers.push(...X.resources);break;case"ingresses":Z.ingresses.push(...X.resources);break;case"jobs":Z.jobs.push(...X.resources);break;case"cronjobs":Z.cronJobs.push(...X.resources);break;case"customresources":Z.customResources.push(...X.resources);break}return Z},{pods:[],replicaSets:[],deployments:[],services:[],configMaps:[],horizontalPodAutoscalers:[],ingresses:[],jobs:[],cronJobs:[],customResources:[]}),Dt=k=>{var Z,X;const et=((X=(Z=k.status)==null?void 0:Z.containerStatuses)!=null?X:[]).map((tt,At)=>n.createElement(m.Z,{key:At,label:`${tt.name}=${tt.image}`,size:"small"}));return n.createElement("div",null,et)},en=k=>{var Z,X;const pe=(X=(Z=k.status)==null?void 0:Z.containerStatuses)!=null?X:[];return`${pe.filter(tt=>tt.ready).length}/${pe.length}`},on=k=>{var Z,X;const pe=(X=(Z=k.status)==null?void 0:Z.containerStatuses)!=null?X:[];return pe==null?void 0:pe.reduce((et,tt)=>et+tt.restartCount,0)},gn=k=>{var Z,X;const et=((X=(Z=k.status)==null?void 0:Z.containerStatuses)!=null?X:[]).reduce((tt,At)=>{if(At.state===void 0)return tt;const Ht=At.state.waiting,rn=At.state.terminated,cn=$n=>{var In;return n.createElement(n.Fragment,{key:`${(In=k.metadata)==null?void 0:In.name}-${At.name}`},n.createElement(i.uw,{value:$n==="Completed"?n.createElement(i.Kq,null,"Container: ",At.name):n.createElement(i.vK,null,"Container: ",At.name),subvalue:$n}),n.createElement("br",null))};return Ht&&tt.push(cn(Ht.reason)),rn&&tt.push(cn(rn.reason)),tt},[]);return et.length===0?n.createElement(i.Kq,null,"OK"):et},Ye=k=>{var Z;const X=k.status;return X==="True"?[k.type,n.createElement(i.Kq,null,"True")]:X==="False"?[k.type,n.createElement(i.uw,{value:n.createElement(i.vK,null,"False"),subvalue:(Z=k.message)!=null?Z:""})]:[k.type,n.createElement(i.dh,null)]},Y=(k,Z)=>{if(Number(Z)===0)return"0%";if(typeof k=="number"&&typeof Z=="number")return`${Math.round(k/Z*100)}%`;const X=BigInt(k),pe=BigInt(Z);return`${X*BigInt(100)/pe}%`},ce=k=>{const Z=k.cpu;let X=Z.currentUsage;return typeof Z.currentUsage=="number"&&(X=Z.currentUsage/10),n.createElement(i.uw,{value:`requests: ${Y(X,Z.requestTotal)}`,subvalue:`limits: ${Y(X,Z.limitTotal)}`})},_e=k=>{const Z=k.memory;return n.createElement(i.uw,{value:`requests: ${Y(Z.currentUsage,Z.requestTotal)}`,subvalue:`limits: ${Y(Z.currentUsage,Z.limitTotal)}`})},Ze=(k,Z,X,pe)=>{var et,tt;const At=new Map;for(const Ht of k)for(const rn of pe)if(rn.errorExists(Ht)){const cn=rn.messageAccessor(Ht),$n=cn.join(""),In=At.get($n),Dn=(tt=(et=Ht.metadata)==null?void 0:et.name)!=null?tt:"unknown";In!==void 0?(In.names.push(Dn),At.set($n,In)):At.set($n,{cluster:X,kind:Z,names:[Dn],message:cn,severity:rn.severity})}return Array.from(At.values())},ie=[{severity:5,errorExplanation:"status-message",errorExists:k=>{var Z;return((Z=k.status)==null?void 0:Z.message)!==void 0},messageAccessor:k=>{var Z,X;return[(X=(Z=k.status)==null?void 0:Z.message)!=null?X:""]}},{severity:4,errorExplanation:"containers-restarting",errorExists:k=>on(k)>3,messageAccessor:k=>{var Z,X;return((X=(Z=k.status)==null?void 0:Z.containerStatuses)!=null?X:[]).filter(pe=>pe.restartCount>0).map(pe=>`container=${pe.name} restarted ${pe.restartCount} times`)}},{severity:5,errorExplanation:"condition-message-present",errorExists:k=>{var Z,X;return((X=(Z=k.status)==null?void 0:Z.conditions)!=null?X:[]).some(pe=>pe.message!==void 0)},messageAccessor:k=>{var Z,X;return((X=(Z=k.status)==null?void 0:Z.conditions)!=null?X:[]).filter(pe=>pe.message!==void 0).map(pe=>{var et;return(et=pe.message)!=null?et:""})}},{severity:6,errorExplanation:"container-waiting",errorExists:k=>{var Z,X;return((X=(Z=k.status)==null?void 0:Z.containerStatuses)!=null?X:[]).some(pe=>{var et,tt;return((tt=(et=pe.state)==null?void 0:et.waiting)==null?void 0:tt.message)!==void 0})},messageAccessor:k=>{var Z,X;return((X=(Z=k.status)==null?void 0:Z.containerStatuses)!=null?X:[]).filter(pe=>{var et,tt;return((tt=(et=pe.state)==null?void 0:et.waiting)==null?void 0:tt.message)!==void 0}).map(pe=>{var et,tt,At;return(At=(tt=(et=pe.state)==null?void 0:et.waiting)==null?void 0:tt.message)!=null?At:""})}},{severity:4,errorExplanation:"container-last-state-error",errorExists:k=>{var Z,X;return((X=(Z=k.status)==null?void 0:Z.containerStatuses)!=null?X:[]).some(pe=>{var et,tt,At;return((At=(tt=(et=pe.lastState)==null?void 0:et.terminated)==null?void 0:tt.reason)!=null?At:"")==="Error"})},messageAccessor:k=>{var Z,X;return((X=(Z=k.status)==null?void 0:Z.containerStatuses)!=null?X:[]).filter(pe=>{var et,tt,At;return((At=(tt=(et=pe.lastState)==null?void 0:et.terminated)==null?void 0:tt.reason)!=null?At:"")==="Error"}).map(pe=>{var et,tt;return`container=${pe.name} exited with error code (${(tt=(et=pe.lastState)==null?void 0:et.terminated)==null?void 0:tt.exitCode})`})}}],de=(k,Z)=>Ze(k,"Pod",Z,ie),ve=[{severity:6,errorExplanation:"condition-message-present",errorExists:k=>{var Z,X;return((X=(Z=k.status)==null?void 0:Z.conditions)!=null?X:[]).filter(pe=>pe.status==="False").some(pe=>pe.message!==void 0)},messageAccessor:k=>{var Z,X;return((X=(Z=k.status)==null?void 0:Z.conditions)!=null?X:[]).filter(pe=>pe.status==="False").filter(pe=>pe.message!==void 0).map(pe=>{var et;return(et=pe.message)!=null?et:""})}}],ge=(k,Z)=>Ze(k,"Deployment",Z,ve),nt=[{severity:8,errorExplanation:"hpa-max-current-replicas",errorExists:k=>{var Z,X,pe;return((X=(Z=k.spec)==null?void 0:Z.maxReplicas)!=null?X:-1)===((pe=k.status)==null?void 0:pe.currentReplicas)},messageAccessor:k=>{var Z,X,pe;return[`Current number of replicas (${(Z=k.status)==null?void 0:Z.currentReplicas}) is equal to the configured max number of replicas (${(pe=(X=k.spec)==null?void 0:X.maxReplicas)!=null?pe:-1})`]}}],bt=(k,Z)=>Ze(k,"HorizontalPodAutoscaler",Z,nt),kt=k=>{const Z=new Map;for(const X of k.items){let pe=[];const et=Zt(X.resources);pe=pe.concat(de(et.pods,X.cluster.name)),pe=pe.concat(ge(et.deployments,X.cluster.name)),pe=pe.concat(bt(et.horizontalPodAutoscalers,X.cluster.name)),Z.set(X.cluster.name,pe)}return Z},ln=(k,Z=1e4)=>{const X=(0,e.h_)(Ie),pe=(0,e.h_)(fe),[et,tt]=(0,n.useState)(void 0),[At,Ht]=(0,n.useState)(void 0),rn=async()=>{let cn=[];try{cn=await X.getClusters()}catch(Dn){Ht(Dn.message);return}const $n=[...new Set(cn.map(Dn=>Dn.authProvider))];let In={entity:k};for(const Dn of $n)try{In=await pe.decorateRequestBodyForAuth(Dn,In)}catch(Vn){Ht(Vn.message);return}try{tt(await X.getObjectsByEntity(In))}catch(Dn){Ht(Dn.message);return}};return(0,n.useEffect)(()=>{rn()},[k.metadata.name,X,pe]),(0,lt.Z)(()=>{rn()},Z),{kubernetesObjects:et,error:At}},Ut=n.createContext(new Set),Mt=n.createContext(new Map),Gt=n.createContext({pods:[],replicaSets:[],deployments:[],services:[],configMaps:[],horizontalPodAutoscalers:[],ingresses:[],jobs:[],cronJobs:[],customResources:[]}),bn=n.createContext({name:""}),vn={deployment:"deployment",pod:"pod",ingress:"ingress",service:"service",horizontalpodautoscaler:"deployment"};function Me(k){var Z,X,pe,et;if(!k.dashboardUrl)throw new Error("standard dashboard requires a dashboardUrl option");const tt=new URL(k.dashboardUrl.href),At=encodeURIComponent((X=(Z=k.object.metadata)==null?void 0:Z.name)!=null?X:""),Ht=encodeURIComponent((et=(pe=k.object.metadata)==null?void 0:pe.namespace)!=null?et:""),rn=vn[k.kind.toLocaleLowerCase("en-US")];return tt.pathname.endsWith("/")||(tt.pathname+="/"),rn&&At&&Ht?tt.hash=`/${rn}/${Ht}/${At}`:Ht&&(tt.hash="/workloads"),Ht&&(tt.hash+=`?namespace=${Ht}`),tt}const ht={deployment:"apps.deployment",ingress:"networking.k8s.io.ingress",service:"service",horizontalpodautoscaler:"autoscaling.horizontalpodautoscaler"};function _t(k){var Z,X,pe,et;if(!k.dashboardUrl)throw new Error("Rancher dashboard requires a dashboardUrl option");const tt=new URL(k.dashboardUrl.href),At=encodeURIComponent((X=(Z=k.object.metadata)==null?void 0:Z.name)!=null?X:""),Ht=encodeURIComponent((et=(pe=k.object.metadata)==null?void 0:pe.namespace)!=null?et:""),rn=ht[k.kind.toLocaleLowerCase("en-US")];tt.pathname.endsWith("/")||(tt.pathname+="/");let cn="";return rn&&At&&Ht?cn=`explorer/${rn}/${Ht}/${At}`:Ht&&(cn="explorer/workload"),new URL(cn,tt)}const tn={deployment:"deployments",ingress:"ingresses",service:"services",horizontalpodautoscaler:"horizontalpodautoscalers",persistentvolume:"persistentvolumes"};function Bt(k){var Z,X,pe,et;if(!k.dashboardUrl)throw new Error("OpenShift dashboard requires a dashboardUrl option");const tt=new URL(k.dashboardUrl.href),At=encodeURIComponent((X=(Z=k.object.metadata)==null?void 0:Z.name)!=null?X:""),Ht=encodeURIComponent((et=(pe=k.object.metadata)==null?void 0:pe.namespace)!=null?et:""),rn=tn[k.kind.toLocaleLowerCase("en-US")];tt.pathname.endsWith("/")||(tt.pathname+="/");let cn="";return Ht?At&&rn?cn=`k8s/ns/${Ht}/${rn}/${At}`:cn=`k8s/cluster/projects/${Ht}`:rn&&(cn=`k8s/cluster/${rn}`,At&&(cn+=`/${At}`)),new URL(cn,tt)}function hn(k){throw new Error("AKS formatter is not yet implemented. Please, contribute!")}function kn(k){throw new Error("EKS formatter is not yet implemented. Please, contribute!")}const Bn={deployment:"deployment",pod:"pod",ingress:"ingress",service:"service",horizontalpodautoscaler:"deployment"};function Un(k){var Z,X,pe,et;if(!k.dashboardParameters)throw new Error("GKE dashboard requires a dashboardParameters option");const tt=k.dashboardParameters;if(typeof tt.projectId!="string")throw new Error('GKE dashboard requires a "projectId" of type string in the dashboardParameters option');if(typeof tt.region!="string")throw new Error('GKE dashboard requires a "region" of type string in the dashboardParameters option');if(typeof tt.clusterName!="string")throw new Error('GKE dashboard requires a "clusterName" of type string in the dashboardParameters option');const At=new URL("https://console.cloud.google.com/"),Ht=encodeURIComponent(tt.region),rn=encodeURIComponent(tt.clusterName),cn=encodeURIComponent((X=(Z=k.object.metadata)==null?void 0:Z.name)!=null?X:""),$n=encodeURIComponent((et=(pe=k.object.metadata)==null?void 0:pe.namespace)!=null?et:""),In=Bn[k.kind.toLocaleLowerCase("en-US")];let Dn="";if($n&&cn&&In){const br=["ingress","pod"].includes(In)?"details":"overview";Dn=`kubernetes/${In}/${Ht}/${rn}/${$n}/${cn}/${br}`}else Dn=`kubernetes/clusters/details/${Ht}/${rn}/details`;const Vn=new URL(Dn,At);return Vn.searchParams.set("project",tt.projectId),Vn}const An={standard:Me,rancher:_t,openshift:Bt,aks:hn,eks:kn,gke:Un},Ge="standard";function Je(k){if(!k.dashboardUrl&&!k.dashboardParameters)return;if(k.dashboardUrl&&!k.object)return k.dashboardUrl;const Z=k.dashboardApp||Ge,X=An[Z];if(!X)throw new Error(`Could not find Kubernetes dashboard app named '${Z}'`);return X({dashboardUrl:k.dashboardUrl?new URL(k.dashboardUrl):void 0,dashboardParameters:k.dashboardParameters,object:k.object,kind:k.kind}).toString()}const mt=(0,v.Z)(k=>(0,d.Z)({paper:{width:"50%",justifyContent:"space-between",padding:k.spacing(2.5)}})),dt=(0,v.Z)(k=>(0,d.Z)({header:{display:"flex",flexDirection:"row",justifyContent:"space-between"},errorMessage:{marginTop:"1em",marginBottom:"1em"},options:{display:"flex",flexDirection:"row",justifyContent:"space-between"},icon:{fontSize:20},content:{height:"80%"}})),It=(0,Qe.Z)({root:{padding:"6px 5px"},label:{textTransform:"none"}})(y.Z),Wt=({cluster:k,errorMessage:Z})=>n.createElement(i.GB,{title:"There was a problem formatting the link to the Kubernetes dashboard",message:`Could not format the link to the dashboard of your cluster named '${k.name}'. Its dashboardApp property has been set to '${k.dashboardApp||"standard"}.'`},Z&&n.createElement(o.Z,{variant:"body2"},"Errors: ",Z));function Jt(k){const Z=(X,pe)=>String(pe)==="null"||String(pe)==="undefined"?void 0:pe;return JSON.parse(JSON.stringify(k,Z))}function xt(k){try{return{clusterLink:Je(k),errorMessage:""}}catch(Z){return{clusterLink:"",errorMessage:Z.message||Z.toString()}}}const N=({toggleDrawer:k,object:Z,renderObject:X,kind:pe})=>{var et,tt;const[At,Ht]=(0,n.useState)(!1),rn=dt(),cn=(0,n.useContext)(bn),{clusterLink:$n,errorMessage:In}=xt({dashboardUrl:cn.dashboardUrl,dashboardApp:cn.dashboardApp,dashboardParameters:cn.dashboardParameters,object:Z,kind:pe});return n.createElement(n.Fragment,null,n.createElement("div",{className:rn.header},n.createElement(u.Z,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start"},n.createElement(u.Z,{item:!0},n.createElement(o.Z,{variant:"h5"},(tt=(et=Z.metadata)==null?void 0:et.name)!=null?tt:"unknown name")),n.createElement(u.Z,{item:!0},n.createElement(o.Z,{color:"textSecondary",variant:"body1"},pe))),n.createElement(h.Z,{key:"dismiss",title:"Close the drawer",onClick:Dn=>k(Dn,!1),color:"inherit"},n.createElement(Ce.Z,{className:rn.icon}))),In&&n.createElement("div",{className:rn.errorMessage},n.createElement(Wt,{cluster:cn,errorMessage:In})),n.createElement("div",{className:rn.options},n.createElement("div",null,$n&&n.createElement(i.zx,{variant:"outlined",color:"primary",size:"small",to:$n,endIcon:n.createElement($e.Z,null)},"Open Kubernetes Dashboard")),n.createElement(M.Z,{control:n.createElement(L.Z,{checked:At,onChange:Dn=>{Ht(Dn.target.checked)},name:"YAML"}),label:"YAML"})),n.createElement("div",{className:rn.content},At&&n.createElement(i.Oi,{language:"yaml",text:it.ZP.dump(Z)}),!At&&n.createElement(i.xT,{metadata:X(Jt(Z))})))},F=({object:k,renderObject:Z,kind:X,buttonVariant:pe="subtitle2",expanded:et=!1,children:tt})=>{var At,Ht;const[rn,cn]=(0,n.useState)(et),$n=mt(),In=(Dn,Vn)=>{Dn.stopPropagation(),cn(Vn)};return n.createElement(n.Fragment,null,n.createElement(It,{onClick:Dn=>In(Dn,!0),onFocus:Dn=>Dn.stopPropagation()},tt===void 0?n.createElement(o.Z,{variant:pe},(Ht=(At=k.metadata)==null?void 0:At.name)!=null?Ht:"unknown object"):tt),n.createElement($.ZP,{classes:{paper:$n.paper},anchor:"right",open:rn,onClose:Dn=>In(Dn,!1),onClick:Dn=>Dn.stopPropagation()},n.createElement(N,{kind:X,toggleDrawer:In,object:k,renderObject:Z})))},q=({pod:k,expanded:Z})=>n.createElement(F,{object:k,expanded:Z,kind:"Pod",renderObject:X=>{var pe,et,tt,At,Ht,rn,cn;const $n=(et=(pe=X.status)==null?void 0:pe.phase)!=null?et:"unknown",In=(Ht=(At=(tt=X.spec)==null?void 0:tt.containers)==null?void 0:At.map(Vn=>({[Vn.name]:Vn.ports})))!=null?Ht:"N/A",Dn=((cn=(rn=X.status)==null?void 0:rn.conditions)!=null?cn:[]).map(Ye).reduce((Vn,ar)=>(Vn[ar[0]]=ar[1],Vn),{});return{images:Dt(X),phase:$n,"Containers Ready":en(X),"Total Restarts":on(X),"Container Statuses":gn(X),...Dn,"Exposed ports":In}}}),ye="READY",Se="RESOURCE",vt=[{title:"name",highlight:!0,render:k=>n.createElement(q,{pod:k})},{title:"phase",render:k=>{var Z,X;return(X=(Z=k.status)==null?void 0:Z.phase)!=null?X:"unknown"}},{title:"status",render:gn}],Rt=[{title:"containers ready",align:"center",render:en},{title:"total restarts",align:"center",render:on,type:"numeric"}],Nt=({pods:k,extraColumns:Z=[]})=>{const X=(0,n.useContext)(Mt),pe=[...vt];if(Z.includes(ye)&&pe.push(...Rt),Z.includes(Se)){const tt=[{title:"CPU usage %",render:At=>{var Ht,rn;const cn=X.get((rn=(Ht=At.metadata)==null?void 0:Ht.name)!=null?rn:"");return cn?ce(cn):"unknown"}},{title:"Memory usage %",render:At=>{var Ht,rn;const cn=X.get((rn=(Ht=At.metadata)==null?void 0:Ht.name)!=null?rn:"");return cn?_e(cn):"unknown"}}];pe.push(...tt)}const et={minWidth:"0",width:"100%"};return n.createElement("div",{style:et},n.createElement(i.iA,{options:{paging:!0,search:!1},data:k,columns:pe}))},zt=({deployment:k,expanded:Z})=>{var X,pe,et;const tt=(X=k.metadata)==null?void 0:X.namespace;return n.createElement(F,{object:k,expanded:Z,kind:"Deployment",renderObject:At=>{var Ht,rn,cn,$n,In,Dn,Vn,ar;const br=((rn=(Ht=At.status)==null?void 0:Ht.conditions)!=null?rn:[]).map(Ye).reduce((xr,Jr)=>(xr[Jr[0]]=Jr[1],xr),{});return{strategy:($n=(cn=At.spec)==null?void 0:cn.strategy)!=null?$n:"???",minReadySeconds:(Dn=(In=At.spec)==null?void 0:In.minReadySeconds)!=null?Dn:"???",progressDeadlineSeconds:(ar=(Vn=At.spec)==null?void 0:Vn.progressDeadlineSeconds)!=null?ar:"???",...br}}},n.createElement(u.Z,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:0},n.createElement(u.Z,{item:!0},n.createElement(o.Z,{variant:"h5"},(et=(pe=k.metadata)==null?void 0:pe.name)!=null?et:"unknown object")),n.createElement(u.Z,{item:!0},n.createElement(o.Z,{color:"textSecondary",variant:"body1"},"Deployment")),tt&&n.createElement(u.Z,{item:!0},n.createElement(m.Z,{size:"small",label:`namespace: ${tt}`}))))},xn=({hpa:k,expanded:Z,children:X})=>n.createElement(F,{kind:"HorizontalPodAutoscaler",object:k,expanded:Z,renderObject:pe=>{var et,tt,At,Ht,rn,cn;return{targetCPUUtilizationPercentage:(et=pe.spec)==null?void 0:et.targetCPUUtilizationPercentage,currentCPUUtilizationPercentage:(tt=pe.status)==null?void 0:tt.currentCPUUtilizationPercentage,minReplicas:(At=pe.spec)==null?void 0:At.minReplicas,maxReplicas:(Ht=pe.spec)==null?void 0:Ht.maxReplicas,currentReplicas:(rn=pe.status)==null?void 0:rn.currentReplicas,desiredReplicas:(cn=pe.status)==null?void 0:cn.desiredReplicas}}},X);function zn(k,Z){return Z.filter(X=>{var pe,et,tt;return(tt=(et=(pe=X.metadata)==null?void 0:pe.ownerReferences)==null?void 0:et.some(At=>{var Ht;return At.uid===((Ht=k.metadata)==null?void 0:Ht.uid)}))!=null?tt:!1})}const st=(k,Z,X)=>zn(k,Z.filter(pe=>pe.status&&pe.status.replicas>0)).reduce((pe,et)=>pe.concat(zn(et,X)),[]),Ue=(k,Z,X)=>X.find(pe=>{var et,tt,At,Ht,rn,cn;return((At=(tt=(et=pe.spec)==null?void 0:et.scaleTargetRef)==null?void 0:tt.kind)!=null?At:"").toLocaleLowerCase("en-US")===Z.toLocaleLowerCase("en-US")&&((cn=(rn=(Ht=pe.spec)==null?void 0:Ht.scaleTargetRef)==null?void 0:rn.name)!=null?cn:"")===(k!=null?k:"unknown-deployment")}),oe=({deployment:k,numberOfCurrentPods:Z,numberOfPodsWithErrors:X,hpa:pe})=>{var et,tt,At,Ht,rn,cn,$n,In;return n.createElement(u.Z,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center"},n.createElement(u.Z,{xs:3,item:!0},n.createElement(zt,{deployment:k})),n.createElement(u.Z,{item:!0,xs:1},n.createElement(J.Z,{style:{height:"5em"},orientation:"vertical"})),pe&&n.createElement(u.Z,{item:!0,xs:3},n.createElement(xn,{hpa:pe},n.createElement(u.Z,{item:!0,container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:0},n.createElement(u.Z,{item:!0},n.createElement(o.Z,{variant:"subtitle2"},"min replicas ",(tt=(et=pe.spec)==null?void 0:et.minReplicas)!=null?tt:"?"," / max replicas"," ",(Ht=(At=pe.spec)==null?void 0:At.maxReplicas)!=null?Ht:"?")),n.createElement(u.Z,{item:!0},n.createElement(o.Z,{variant:"subtitle2"},"current CPU usage:"," ",(cn=(rn=pe.status)==null?void 0:rn.currentCPUUtilizationPercentage)!=null?cn:"?","%")),n.createElement(u.Z,{item:!0},n.createElement(o.Z,{variant:"subtitle2"},"target CPU usage:"," ",(In=($n=pe.spec)==null?void 0:$n.targetCPUUtilizationPercentage)!=null?In:"?","%"))))),n.createElement(u.Z,{item:!0,container:!0,xs:3,direction:"column",justifyContent:"flex-start",alignItems:"flex-start"},n.createElement(u.Z,{item:!0},n.createElement(i.Kq,null,Z," pods")),n.createElement(u.Z,{item:!0},X>0?n.createElement(i.vK,null,X," pod",X>1?"s":""," with errors"):n.createElement(i.Kq,null,"No pods with errors"))))},he=({deployment:k,ownedPods:Z,matchingHpa:X})=>{const pe=(0,n.useContext)(Ut),et=Z.filter(tt=>{var At,Ht;return pe.has((Ht=(At=tt.metadata)==null?void 0:At.name)!=null?Ht:"")});return n.createElement(g.Z,{TransitionProps:{unmountOnExit:!0}},n.createElement(S.Z,{expandIcon:n.createElement(W.Z,null)},n.createElement(oe,{deployment:k,numberOfCurrentPods:Z.length,numberOfPodsWithErrors:et.length,hpa:X})),n.createElement(E.Z,null,n.createElement(Nt,{pods:Z,extraColumns:[ye,Se]})))},De=({})=>{const k=(0,n.useContext)(Gt);return n.createElement(u.Z,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start"},k.deployments.map((Z,X)=>{var pe;return n.createElement(u.Z,{container:!0,item:!0,key:X,xs:!0},n.createElement(u.Z,{item:!0,xs:!0},n.createElement(he,{matchingHpa:Ue((pe=Z.metadata)==null?void 0:pe.name,"deployment",k.horizontalPodAutoscalers),ownedPods:st(Z,k.replicaSets,k.pods),deployment:Z})))}))},we=({ingress:k,expanded:Z})=>{var X,pe;return n.createElement(F,{object:k,expanded:Z,kind:"Ingress",renderObject:et=>et.spec||{}},n.createElement(u.Z,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:0},n.createElement(u.Z,{item:!0},n.createElement(o.Z,{variant:"h5"},(pe=(X=k.metadata)==null?void 0:X.name)!=null?pe:"unknown object")),n.createElement(u.Z,{item:!0},n.createElement(o.Z,{color:"textSecondary",variant:"body1"},"Ingress"))))},Ne=({ingress:k})=>n.createElement(u.Z,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center"},n.createElement(u.Z,{xs:3,item:!0},n.createElement(we,{ingress:k})),n.createElement(u.Z,{item:!0,xs:1},n.createElement(J.Z,{style:{height:"5em"},orientation:"vertical"}))),Ke=({ingress:k})=>n.createElement(i.xT,{metadata:{...k.spec}}),Be=({ingress:k})=>n.createElement(g.Z,{TransitionProps:{unmountOnExit:!0}},n.createElement(S.Z,{expandIcon:n.createElement(W.Z,null)},n.createElement(Ne,{ingress:k})),n.createElement(E.Z,null,n.createElement(Ke,{ingress:k}))),ct=({})=>{const k=(0,n.useContext)(Gt);return n.createElement(u.Z,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"flex-start"},k.ingresses.map((Z,X)=>n.createElement(u.Z,{item:!0,key:X,xs:!0},n.createElement(Be,{ingress:Z}))))},Kt=({service:k,expanded:Z})=>{var X,pe;return n.createElement(F,{object:k,expanded:Z,kind:"Service",renderObject:et=>et.spec||{}},n.createElement(u.Z,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:0},n.createElement(u.Z,{item:!0},n.createElement(o.Z,{variant:"h5"},(pe=(X=k.metadata)==null?void 0:X.name)!=null?pe:"unknown object")),n.createElement(u.Z,{item:!0},n.createElement(o.Z,{color:"textSecondary",variant:"body1"},"Service"))))},mn=({service:k})=>{var Z,X;return n.createElement(u.Z,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center"},n.createElement(u.Z,{xs:3,item:!0},n.createElement(Kt,{service:k})),n.createElement(u.Z,{item:!0,xs:1},n.createElement(J.Z,{style:{height:"5em"},orientation:"vertical"})),n.createElement(u.Z,{item:!0},n.createElement(o.Z,{variant:"subtitle2"},"Type: ",(X=(Z=k.spec)==null?void 0:Z.type)!=null?X:"?")))},se=({service:k})=>{var Z,X,pe,et,tt,At,Ht,rn,cn;const $n={};return((et=(pe=(X=(Z=k.status)==null?void 0:Z.loadBalancer)==null?void 0:X.ingress)==null?void 0:pe.length)!=null?et:-1>0)&&($n.loadbalancer=(tt=k.status)==null?void 0:tt.loadBalancer),((At=k.spec)==null?void 0:At.type)==="ClusterIP"&&($n.clusterIP=k.spec.clusterIP),((Ht=k.spec)==null?void 0:Ht.type)==="ExternalName"&&($n.externalName=k.spec.externalName),n.createElement(i.xT,{metadata:{type:(rn=k.spec)==null?void 0:rn.type,ports:(cn=k.spec)==null?void 0:cn.ports,...$n}})},ke=({service:k})=>n.createElement(g.Z,{TransitionProps:{unmountOnExit:!0}},n.createElement(S.Z,{expandIcon:n.createElement(W.Z,null)},n.createElement(mn,{service:k})),n.createElement(E.Z,null,n.createElement(se,{service:k}))),ot=({})=>{const k=(0,n.useContext)(Gt);return n.createElement(u.Z,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"flex-start"},k.services.map((Z,X)=>n.createElement(u.Z,{item:!0,key:X,xs:!0},n.createElement(ke,{service:Z}))))},wt=({job:k,expanded:Z})=>{var X,pe;return n.createElement(F,{object:k,expanded:Z,kind:"Job",renderObject:et=>{var tt,At,Ht,rn,cn,$n,In,Dn;return{parallelism:(At=(tt=et.spec)==null?void 0:tt.parallelism)!=null?At:"???",completions:(rn=(Ht=et.spec)==null?void 0:Ht.completions)!=null?rn:"???",backoffLimit:($n=(cn=et.spec)==null?void 0:cn.backoffLimit)!=null?$n:"???",startTime:(Dn=(In=et.status)==null?void 0:In.startTime)!=null?Dn:"???"}}},n.createElement(u.Z,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:0},n.createElement(u.Z,{item:!0},n.createElement(o.Z,{variant:"h6"},(pe=(X=k.metadata)==null?void 0:X.name)!=null?pe:"unknown object")),n.createElement(u.Z,{item:!0},n.createElement(o.Z,{color:"textSecondary",variant:"body1"},"Job"))))},Fe=({job:k})=>{var Z,X,pe,et,tt,At;return n.createElement(u.Z,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center"},n.createElement(u.Z,{xs:3,item:!0},n.createElement(wt,{job:k})),n.createElement(u.Z,{item:!0,xs:1},n.createElement(J.Z,{style:{height:"5em"},orientation:"vertical"})),n.createElement(u.Z,{item:!0,container:!0,xs:8,direction:"column",justifyContent:"flex-start",alignItems:"flex-start"},n.createElement(u.Z,{item:!0},((Z=k.status)==null?void 0:Z.succeeded)&&n.createElement(i.Kq,null,"Succeeded"),((X=k.status)==null?void 0:X.active)&&n.createElement(i.wA,null,"Running"),((pe=k.status)==null?void 0:pe.failed)&&n.createElement(i.vK,null,"Failed")),n.createElement(u.Z,{item:!0},"Start time: ",(tt=(et=k.status)==null?void 0:et.startTime)==null?void 0:tt.toString()),((At=k.status)==null?void 0:At.completionTime)&&n.createElement(u.Z,{item:!0},"Completion time: ",k.status.completionTime.toString())))},ft=({job:k,ownedPods:Z})=>n.createElement(g.Z,{TransitionProps:{unmountOnExit:!0}},n.createElement(S.Z,{expandIcon:n.createElement(W.Z,null)},n.createElement(Fe,{job:k})),n.createElement(E.Z,null,n.createElement(Nt,{pods:Z}))),K=({jobs:k})=>{const Z=(0,n.useContext)(Gt);return n.createElement(u.Z,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start"},k.map((X,pe)=>n.createElement(u.Z,{container:!0,item:!0,key:pe,xs:!0},n.createElement(u.Z,{item:!0,xs:!0},n.createElement(ft,{ownedPods:zn(X,Z.pods),job:X})))))},l=({cronJob:k,expanded:Z})=>{var X,pe,et;const tt=(X=k.metadata)==null?void 0:X.namespace;return n.createElement(F,{object:k,expanded:Z,kind:"CronJob",renderObject:At=>{var Ht,rn,cn,$n,In,Dn,Vn,ar;return{schedule:(rn=(Ht=At.spec)==null?void 0:Ht.schedule)!=null?rn:"???",startingDeadlineSeconds:($n=(cn=At.spec)==null?void 0:cn.startingDeadlineSeconds)!=null?$n:"???",concurrencyPolicy:(Dn=(In=At.spec)==null?void 0:In.concurrencyPolicy)!=null?Dn:"???",lastScheduleTime:(ar=(Vn=At.status)==null?void 0:Vn.lastScheduleTime)!=null?ar:"???"}}},n.createElement(u.Z,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:0},n.createElement(u.Z,{item:!0},n.createElement(o.Z,{variant:"h5"},(et=(pe=k.metadata)==null?void 0:pe.name)!=null?et:"unknown object")),n.createElement(u.Z,{item:!0},n.createElement(o.Z,{color:"textSecondary",variant:"body1"},"CronJob")),tt&&n.createElement(u.Z,{item:!0},n.createElement(m.Z,{size:"small",label:`namespace: ${tt}`}))))},b=({cronJob:k})=>{var Z,X;return n.createElement(u.Z,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center"},n.createElement(u.Z,{xs:3,item:!0},n.createElement(l,{cronJob:k})),n.createElement(u.Z,{item:!0,xs:1},n.createElement(J.Z,{style:{height:"5em"},orientation:"vertical"})),n.createElement(u.Z,{item:!0,container:!0,xs:5,direction:"column",justifyContent:"flex-start",alignItems:"flex-start"},n.createElement(u.Z,{item:!0},(Z=k.spec)!=null&&Z.suspend?n.createElement(i.vK,null,"Suspended"):n.createElement(i.Kq,null,"Active")),n.createElement(u.Z,{item:!0},n.createElement(o.Z,{variant:"body1"},"Schedule:"," ",(X=k.spec)!=null&&X.schedule?`${k.spec.schedule} (${$t().toString(k.spec.schedule)})`:"N/A"))))},x=({cronJob:k,ownedJobs:Z})=>n.createElement(g.Z,{TransitionProps:{unmountOnExit:!0}},n.createElement(S.Z,{expandIcon:n.createElement(W.Z,null)},n.createElement(b,{cronJob:k})),n.createElement(E.Z,null,n.createElement(K,{jobs:Z.reverse()}))),G=({})=>{const k=(0,n.useContext)(Gt);return n.createElement(u.Z,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start"},k.cronJobs.map((Z,X)=>n.createElement(u.Z,{container:!0,item:!0,key:X,xs:!0},n.createElement(u.Z,{item:!0,xs:!0},n.createElement(x,{ownedJobs:zn(Z,k.jobs),cronJob:Z})))))},Ae=({rollout:k,expanded:Z})=>{var X,pe;return n.createElement(F,{object:k,expanded:Z,kind:"Rollout",renderObject:()=>({})},n.createElement(u.Z,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:0},n.createElement(u.Z,{item:!0},n.createElement(o.Z,{variant:"h5"},(pe=(X=k.metadata)==null?void 0:X.name)!=null?pe:"unknown object")),n.createElement(u.Z,{item:!0},n.createElement(o.Z,{color:"textSecondary",variant:"body1"},"Rollout"))))},rt=k=>k.hasOwnProperty("setWeight"),ut=k=>k.hasOwnProperty("pause"),yt=k=>k.hasOwnProperty("analysis"),Vt=k=>rt(k)?`setWeight ${k.setWeight}%`:ut(k)?k.pause.duration===void 0?"infinite pause":`pause for ${k.pause.duration}`:yt(k)?n.createElement("div",null,n.createElement("p",null,"analysis templates:"),k.analysis.templates.map((Z,X)=>n.createElement("p",{key:X},`${Z.templateName}${Z.clusterScope?" (cluster scoped)":""}`))):"unknown step",Ft=({currentStepIndex:k,aborted:Z,steps:X})=>{const pe=k>=X.length?k+1:k;return n.createElement(I.Z,{activeStep:Z?-1:pe,alternativeLabel:!0},X.map((et,tt)=>n.createElement(D.Z,{key:tt},n.createElement(T.Z,{"data-testid":`step-${tt}`},Vt(et)))).concat(n.createElement(D.Z,{key:"-1"},n.createElement(T.Z,{"data-testid":"step--1"},"Canary promoted"))))},On=n.createElement("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap"}},n.createElement(U.Z,null),n.createElement(o.Z,{variant:"subtitle1"},"Aborted")),yn=k=>{var Z,X,pe;return(pe=(X=(Z=k.status)==null?void 0:Z.conditions)==null?void 0:X.find(et=>et.type==="Progressing"&&et.status==="False"&&et.reason==="RolloutAborted"))==null?void 0:pe.message},Mn=({rollout:k,numberOfCurrentPods:Z,numberOfPodsWithErrors:X,hpa:pe})=>{var et,tt,At,Ht,rn,cn,$n,In,Dn,Vn,ar;const br=(At=(tt=(et=k.status)==null?void 0:et.pauseConditions)==null?void 0:tt.find(Jr=>Jr.reason==="CanaryPauseStep"))==null?void 0:At.startTime,xr=yn(k);return n.createElement(u.Z,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center"},n.createElement(u.Z,{xs:3,item:!0},n.createElement(Ae,{rollout:k})),n.createElement(u.Z,{item:!0,xs:1},n.createElement(J.Z,{style:{height:"5em"},orientation:"vertical"})),pe&&n.createElement(u.Z,{item:!0,xs:3},n.createElement(xn,{hpa:pe},n.createElement(u.Z,{item:!0,container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:0},n.createElement(u.Z,{item:!0},n.createElement(o.Z,{variant:"subtitle2"},"min replicas ",(rn=(Ht=pe.spec)==null?void 0:Ht.minReplicas)!=null?rn:"?"," / max replicas"," ",($n=(cn=pe.spec)==null?void 0:cn.maxReplicas)!=null?$n:"?")),n.createElement(u.Z,{item:!0},n.createElement(o.Z,{variant:"subtitle2"},"current CPU usage:"," ",(Dn=(In=pe.status)==null?void 0:In.currentCPUUtilizationPercentage)!=null?Dn:"?","%")),n.createElement(u.Z,{item:!0},n.createElement(o.Z,{variant:"subtitle2"},"target CPU usage:"," ",(ar=(Vn=pe.spec)==null?void 0:Vn.targetCPUUtilizationPercentage)!=null?ar:"?","%"))))),n.createElement(u.Z,{item:!0,container:!0,xs:3,direction:"column",justifyContent:"flex-start",alignItems:"flex-start"},n.createElement(u.Z,{item:!0},n.createElement(i.Kq,null,Z," pods")),n.createElement(u.Z,{item:!0},X>0?n.createElement(i.vK,null,X," pod",X>1?"s":""," with errors"):n.createElement(i.Kq,null,"No pods with errors"))),br&&n.createElement(u.Z,{item:!0,xs:3},n.createElement("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap"}},n.createElement(_n.Z,null),n.createElement(o.Z,{variant:"subtitle1"},"Paused (",Re.ou.fromISO(br).toRelative({locale:"en"}),")"))),xr&&n.createElement(u.Z,{item:!0,xs:3},On))},jn=({rollout:k,ownedPods:Z,matchingHpa:X,defaultExpanded:pe})=>{var et,tt,At,Ht,rn,cn;const $n=(0,n.useContext)(Ut),In=Z.filter(ar=>{var br,xr;return $n.has((xr=(br=ar.metadata)==null?void 0:br.name)!=null?xr:"")}),Dn=(tt=(et=k.status)==null?void 0:et.currentStepIndex)!=null?tt:0,Vn=yn(k);return n.createElement(g.Z,{defaultExpanded:pe,TransitionProps:{unmountOnExit:!0}},n.createElement(S.Z,{expandIcon:n.createElement(W.Z,null)},n.createElement(Mn,{rollout:k,numberOfCurrentPods:Z.length,numberOfPodsWithErrors:In.length,hpa:X})),n.createElement(E.Z,null,n.createElement("div",{style:{width:"100%"}},n.createElement("div",null,n.createElement(o.Z,{variant:"h6"},"Rollout status")),n.createElement("div",{style:{margin:"1rem"}},Vn&&n.createElement(n.Fragment,null,On,n.createElement(o.Z,{variant:"subtitle2"},Vn)),n.createElement(Ft,{aborted:Vn!==void 0,steps:(cn=(rn=(Ht=(At=k.spec)==null?void 0:At.strategy)==null?void 0:Ht.canary)==null?void 0:rn.steps)!=null?cn:[],currentStepIndex:Dn})),n.createElement("div",null,n.createElement(Nt,{pods:Z,extraColumns:[ye,Se]})))))},wn=({rollouts:k,defaultExpanded:Z=!1})=>{const X=(0,n.useContext)(Gt);return n.createElement(u.Z,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start"},k.map((pe,et)=>{var tt;return n.createElement(u.Z,{container:!0,item:!0,key:et,xs:!0},n.createElement(u.Z,{item:!0,xs:!0},n.createElement(jn,{defaultExpanded:Z,matchingHpa:Ue((tt=pe.metadata)==null?void 0:tt.name,"rollout",X.horizontalPodAutoscalers),ownedPods:st(pe,X.replicaSets,X.pods),rollout:pe})))}))},sr=k=>k.charAt(0).toLocaleUpperCase("en-US")+k.slice(1),Jn=({customResource:k,customResourceName:Z,expanded:X})=>{var pe,et;const tt=sr(Z);return n.createElement(F,{object:k,expanded:X,kind:tt,renderObject:At=>At},n.createElement(u.Z,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:0},n.createElement(u.Z,{item:!0},n.createElement(o.Z,{variant:"h5"},(et=(pe=k.metadata)==null?void 0:pe.name)!=null?et:"unknown object")),n.createElement(u.Z,{item:!0},n.createElement(o.Z,{color:"textSecondary",variant:"body1"},tt))))},Or=({customResource:k,customResourceName:Z})=>n.createElement(u.Z,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center"},n.createElement(u.Z,{xs:3,item:!0},n.createElement(Jn,{customResource:k,customResourceName:Z})),n.createElement(u.Z,{item:!0,xs:1},n.createElement(J.Z,{style:{height:"5em"},orientation:"vertical"}))),Ct=({customResource:k,customResourceName:Z,defaultExpanded:X})=>n.createElement(g.Z,{defaultExpanded:X,TransitionProps:{unmountOnExit:!0}},n.createElement(S.Z,{expandIcon:n.createElement(W.Z,null)},n.createElement(Or,{customResource:k,customResourceName:Z})),n.createElement(E.Z,null,k.hasOwnProperty("status")&&n.createElement(i.xT,{metadata:k.status}))),Ve=({customResources:k,customResourceName:Z,defaultExpanded:X=!1})=>n.createElement(u.Z,{container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start"},k.map((pe,et)=>n.createElement(u.Z,{container:!0,item:!0,key:et,xs:!0},n.createElement(u.Z,{item:!0,xs:!0},n.createElement(Ct,{defaultExpanded:X,customResource:pe,customResourceName:Z}))))),Xt=k=>pn().groupBy(k,Z=>Z.kind),Cn=({})=>{const k=(0,n.useContext)(Gt),Z=Xt(k.customResources);return n.createElement(n.Fragment,null,Object.entries(Z).map(([X,pe],et)=>{switch(X){case"Rollout":return n.createElement(wn,{key:et,rollouts:pe});default:return n.createElement(Ve,{key:et,customResources:pe,customResourceName:X})}}))},Ln=({clusterName:k,totalNumberOfPods:Z,numberOfPodsWithErrors:X})=>n.createElement(u.Z,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"flex-start"},n.createElement(u.Z,{xs:4,item:!0,container:!0,direction:"column",justifyContent:"flex-start",alignItems:"flex-start",spacing:0},n.createElement(u.Z,{item:!0,xs:!0},n.createElement(o.Z,{variant:"h3"},k),n.createElement(o.Z,{color:"textSecondary",variant:"body1"},"Cluster"))),n.createElement(u.Z,{item:!0,xs:1},n.createElement(J.Z,{style:{height:"4em"},orientation:"vertical"})),n.createElement(u.Z,{item:!0,container:!0,xs:3,direction:"column",justifyContent:"flex-start",alignItems:"flex-start"},n.createElement(u.Z,{item:!0},n.createElement(i.Kq,null,Z," pods")),n.createElement(u.Z,{item:!0},X>0?n.createElement(i.vK,null,X," pods with errors"):n.createElement(i.Kq,null,"No pods with errors")))),Nn=({clusterObjects:k,podsWithErrors:Z})=>{const X=Zt(k.resources),pe=k.podMetrics.flat().reduce((et,tt)=>{var At;const Ht=(At=tt.pod.metadata)==null?void 0:At.name;return Ht!==void 0&&et.set(Ht,tt),et},new Map);return n.createElement(bn.Provider,{value:k.cluster},n.createElement(Gt.Provider,{value:X},n.createElement(Mt.Provider,{value:pe},n.createElement(Ut.Provider,{value:Z},n.createElement(g.Z,{TransitionProps:{unmountOnExit:!0}},n.createElement(S.Z,{expandIcon:n.createElement(W.Z,null)},n.createElement(Ln,{clusterName:k.cluster.name,totalNumberOfPods:X.pods.length,numberOfPodsWithErrors:Z.size})),n.createElement(E.Z,null,n.createElement(u.Z,{container:!0,direction:"column"},n.createElement(u.Z,{item:!0},n.createElement(Cn,null)),n.createElement(u.Z,{item:!0},n.createElement(De,null)),n.createElement(u.Z,{item:!0},n.createElement(ct,null)),n.createElement(u.Z,{item:!0},n.createElement(ot,null)),n.createElement(u.Z,{item:!0},n.createElement(G,null)))))))))},Qn=({entity:k})=>{var Z;const{kubernetesObjects:X,error:pe}=ln(k),et=(Z=X==null?void 0:X.items.filter(At=>At.errors.length>0))!=null?Z:[],tt=X!==void 0?kt(X):new Map;return n.createElement(i.T3,{themeId:"tool"},n.createElement(i.VY,null,X===void 0&&pe===void 0&&n.createElement(i.Ex,null),et.length>0&&n.createElement(u.Z,{container:!0,spacing:3,direction:"column"},n.createElement(u.Z,{item:!0},n.createElement(Le,{entityName:k.metadata.name,clustersWithErrors:et}))),pe!==void 0&&n.createElement(u.Z,{container:!0,spacing:3,direction:"column"},n.createElement(u.Z,{item:!0},n.createElement(Le,{entityName:k.metadata.name,errorMessage:pe}))),X&&n.createElement(u.Z,{container:!0,spacing:3,direction:"column"},n.createElement(u.Z,{item:!0},n.createElement(at,{detectedErrors:tt})),n.createElement(u.Z,{item:!0},n.createElement(J.Z,null)),n.createElement(u.Z,{item:!0},n.createElement(o.Z,{variant:"h3"},"Your Clusters")),n.createElement(u.Z,{item:!0,container:!0},(X==null?void 0:X.items.length)<=0&&n.createElement(u.Z,{container:!0,justifyContent:"space-around",direction:"row",alignItems:"center",spacing:2},n.createElement(u.Z,{item:!0,xs:4},n.createElement(o.Z,{variant:"h5"},"No resources on any known clusters for"," ",k.metadata.name)),n.createElement(u.Z,{item:!0,xs:4},n.createElement("img",{src:O,alt:"EmptyState","data-testid":"emptyStateImg"}))),(X==null?void 0:X.items.length)>0&&(X==null?void 0:X.items.map((At,Ht)=>{var rn,cn;const $n=new Set((cn=(rn=tt.get(At.cluster.name))==null?void 0:rn.filter(In=>In.kind==="Pod").map(In=>In.names).flat())!=null?cn:[]);return n.createElement(u.Z,{item:!0,key:Ht,xs:12},n.createElement(Nn,{clusterObjects:At,podsWithErrors:$n}))}))))))},fr="backstage.io/kubernetes-id",pr="backstage.io/kubernetes-label-selector";var lr=Object.freeze({__proto__:null,isKubernetesAvailable:k=>{var Z,X;return Boolean((Z=k.metadata.annotations)==null?void 0:Z[fr])||Boolean((X=k.metadata.annotations)==null?void 0:X[pr])},Router:k=>{var Z,X;const{entity:pe}=(0,p.X2)(),et=(Z=pe.metadata.annotations)==null?void 0:Z[fr],tt=(X=pe.metadata.annotations)==null?void 0:X[pr];return et||tt?n.createElement(a.Z5,null,n.createElement(a.AW,{path:"/",element:n.createElement(Qn,{entity:pe})})):n.createElement(n.Fragment,null,n.createElement(i.sk,{annotation:fr}),n.createElement("h1",null,"Or use a label selector query, which takes precedence over the previous annotation."),n.createElement(y.Z,{variant:"contained",color:"primary",href:"https://backstage.io/docs/features/kubernetes/configuration#surfacing-your-kubernetes-components-as-part-of-an-entity"},"Read Kubernetes Plugin Docs"))}})},59235:function(Lt,c,t){t.d(c,{$M:function(){return w},Eg:function(){return fe},Jh:function(){return te},Yq:function(){return on},jJ:function(){return gn},jQ:function(){return A},oy:function(){return Te},qJ:function(){return Pe},rw:function(){return Ie},w1:function(){return Re}});var e=t(30705),n=t(34520),p=t(73495),a=t(79692),o=t(12420),m=t(60905),u=t(95544),v=t(90436),d=t(61837),y=t(11776),h=t(38402),M=t(86136),L=t(80030),$=t(49378),J=t(9520),g=t(82938),S=t(76637),E=t(2784),I=t(10289),D=t(64279),T=t(49558),i=t(73655),O=t(13384),W=t(62367),Ce=t(27604),$e=t(52866),Qe=t(99688),it=t(98685),lt=t(19928),qe=t.n(lt),$t=t(14162),Ot=t.n($t),pn=t(19126),_n=t.n(pn);const U=(0,e.x8)({id:"catalog-index"}),Re=(0,e.rx)({id:"org",externalRoutes:{catalogIndex:U}}),w=Re.provide((0,e.CO)({name:"EntityGroupProfileCard",component:{lazy:()=>t.e(1894).then(t.bind(t,32172)).then(Ye=>Ye.GroupProfileCard)}})),Ie=Re.provide((0,e.CO)({name:"EntityMembersListCard",component:{lazy:()=>t.e(1894).then(t.bind(t,32172)).then(Ye=>Ye.MembersListCard)}})),fe=Re.provide((0,e.CO)({name:"EntityOwnershipCard",component:{lazy:()=>t.e(1894).then(t.bind(t,32172)).then(Ye=>Ye.OwnershipCard)}})),A=Re.provide((0,e.CO)({name:"EntityUserProfileCard",component:{lazy:()=>t.e(1894).then(t.bind(t,32172)).then(Ye=>Ye.UserProfileCard)}})),H=(0,a.Z)(Ye=>(0,o.Z)({card:{border:`1px solid ${Ye.palette.divider}`,boxShadow:Ye.shadows[2],borderRadius:"4px",overflow:"visible",position:"relative",margin:Ye.spacing(4,1,1),flex:"1",minWidth:"0px"}})),re=Ye=>{var Y;const ce=H(),{metadata:{name:_e,description:Ze},spec:{profile:ie}}=Ye.member,de=(Y=ie==null?void 0:ie.displayName)!=null?Y:_e;return E.createElement(m.Z,{item:!0,container:!0,xs:12,sm:6,md:4,xl:2},E.createElement(u.Z,{className:ce.card},E.createElement(u.Z,{display:"flex",flexDirection:"column",m:3,alignItems:"center",justifyContent:"center"},E.createElement(T.qE,{displayName:de,picture:ie==null?void 0:ie.picture,customStyles:{position:"absolute",top:"-2rem"}}),E.createElement(u.Z,{pt:2,textAlign:"center"},E.createElement(v.Z,{variant:"h5"},E.createElement(T.rU,{to:(0,I.Gn)(`/catalog/:namespace/user/${_e}`,(0,p.hd)(Ye.member))},de)),(ie==null?void 0:ie.email)&&E.createElement(T.rU,{to:`mailto:${ie.email}`},ie.email),Ze&&E.createElement(v.Z,{variant:"subtitle2"},Ze)))))},Pe=Ye=>{var Y;const{memberDisplayTitle:ce="Members",pageSize:_e=50}=Ye,{entity:Ze}=(0,p.X2)(),{metadata:{name:ie,namespace:de},spec:{profile:ve}}=Ze,ge=(0,e.h_)(p.Ah),nt=(Y=ve==null?void 0:ve.displayName)!=null?Y:ie,bt=de||n.zG,[kt,ln]=E.useState(1),Ut=(_t,tn)=>{ln(tn)},{loading:Mt,error:Gt,value:bn}=(0,D.default)(async()=>(await ge.getEntities({filter:{kind:"User","relations.memberof":[(0,n.eE)({kind:"group",namespace:bt.toLocaleLowerCase("en-US"),name:ie.toLocaleLowerCase("en-US")})]}})).items,[ge,Ze]);if(Mt)return E.createElement(T.Ex,null);if(Gt)return E.createElement(T.Gk,{error:Gt});const vn=Math.ceil(((bn==null?void 0:bn.length)||0)/_e),Me=vn<2?"":`, page ${kt} of ${vn}`,ht=E.createElement(S.Z,{count:vn,page:kt,onChange:Ut,showFirstButton:!0,showLastButton:!0});return E.createElement(m.Z,{item:!0},E.createElement(T.rJ,{title:`${ce} (${(bn==null?void 0:bn.length)||0}${Me})`,subheader:`of ${nt}`,...vn<=1?{}:{actions:ht}},E.createElement(m.Z,{container:!0,spacing:3},bn&&bn.length>0?bn.slice(_e*(kt-1),_e*kt).map(_t=>E.createElement(re,{member:_t,key:_t.metadata.uid})):E.createElement(u.Z,{p:2},E.createElement(v.Z,null,"This group has no ",ce.toLocaleLowerCase(),".")))))},ae=Ye=>E.createElement(u.Z,{display:"flex",alignItems:"center"},E.createElement(W.Z,{fontSize:"inherit"}),E.createElement(u.Z,{ml:1},Ye.title)),Te=Ye=>{var Y,ce;const _e=(0,e.h_)(p.Ah),Ze=(0,e.h_)(e.$v),{entity:ie}=(0,p.X2)(),de=(0,E.useCallback)(async()=>{await _e.refreshEntity((0,n.eE)(ie)),Ze.post({message:"Refresh scheduled",severity:"info"})},[_e,Ze,ie]);if(!ie)return E.createElement(Qe.Z,{severity:"error"},"Group not found");const{metadata:{name:ve,description:ge,annotations:nt},spec:{profile:bt}}=ie,kt=(0,p.hF)(ie,n._b,{kind:"Group"}),ln=(0,p.hF)(ie,n.wP,{kind:"group"}),Ut=nt==null?void 0:nt[n.P1],Mt=(Ut==null?void 0:Ut.startsWith("url:"))||(Ut==null?void 0:Ut.startsWith("file:")),Gt=(Y=ie.metadata.annotations)==null?void 0:Y[n.Tf],bn=(ce=bt==null?void 0:bt.displayName)!=null?ce:ve,vn=bt!=null&&bt.email?`mailto:${bt.email}`:"#",Me=Gt?E.createElement(d.Z,{"aria-label":"Edit",title:"Edit Metadata",component:T.rU,to:Gt},E.createElement(Ce.Z,null)):E.createElement(d.Z,{"aria-label":"Edit",disabled:!0,title:"Edit Metadata"},E.createElement(Ce.Z,null));return E.createElement(T.rJ,{title:E.createElement(ae,{title:bn}),subheader:ge,variant:Ye.variant,action:E.createElement(E.Fragment,null,Mt&&E.createElement(d.Z,{"aria-label":"Refresh",title:"Schedule entity refresh",onClick:de},E.createElement($e.Z,null)),Me)},E.createElement(m.Z,{container:!0,spacing:3},E.createElement(m.Z,{item:!0,xs:12,sm:2,xl:1},E.createElement(T.qE,{displayName:bn,picture:bt==null?void 0:bt.picture})),E.createElement(m.Z,{item:!0,md:10,xl:11},E.createElement(y.Z,null,(bt==null?void 0:bt.email)&&E.createElement(h.Z,null,E.createElement(M.Z,null,E.createElement(L.ZP,{title:"Email"},E.createElement(O.Z,null))),E.createElement($.Z,null,E.createElement(T.rU,{to:vn},bt.email))),ln.length?E.createElement(h.Z,null,E.createElement(M.Z,null,E.createElement(L.ZP,{title:"Parent Group"},E.createElement(i.Z,null))),E.createElement($.Z,null,E.createElement(p.rI,{entityRefs:ln,defaultKind:"Group"}))):null,kt.length?E.createElement(h.Z,null,E.createElement(M.Z,null,E.createElement(L.ZP,{title:"Child Groups"},E.createElement(W.Z,null))),E.createElement($.Z,null,E.createElement(p.rI,{entityRefs:kt,defaultKind:"Group"}))):null))))},Et=Ye=>Ye.title?E.createElement(u.Z,{display:"flex",alignItems:"center"},E.createElement(it.Z,{fontSize:"inherit"}),E.createElement(u.Z,{ml:1},Ye.title)):null,te=Ye=>{var Y;const{entity:ce}=(0,p.X2)();if(!ce)return E.createElement(Qe.Z,{severity:"error"},"User not found");const{metadata:{name:_e,description:Ze},spec:{profile:ie}}=ce,de=(Y=ie==null?void 0:ie.displayName)!=null?Y:_e,ve=ie!=null&&ie.email?`mailto:${ie.email}`:void 0,ge=(0,p.hF)(ce,n.hr,{kind:"Group"});return E.createElement(T.rJ,{title:E.createElement(Et,{title:de}),subheader:Ze,variant:Ye.variant},E.createElement(m.Z,{container:!0,spacing:3,alignItems:"flex-start"},E.createElement(m.Z,{item:!0,xs:12,sm:2,xl:1},E.createElement(T.qE,{displayName:de,picture:ie==null?void 0:ie.picture})),E.createElement(m.Z,{item:!0,md:10,xl:11},E.createElement(y.Z,null,(ie==null?void 0:ie.email)&&E.createElement(h.Z,null,E.createElement(M.Z,null,E.createElement(L.ZP,{title:"Email"},E.createElement(O.Z,null))),E.createElement($.Z,null,E.createElement(T.rU,{to:ve!=null?ve:""},ie.email))),E.createElement(h.Z,null,E.createElement(M.Z,null,E.createElement(L.ZP,{title:"Member of"},E.createElement(W.Z,null))),E.createElement($.Z,null,E.createElement(p.rI,{entityRefs:ge,defaultKind:"Group"})))))))},ee=Ot()(10),Le=(Ye,Y)=>{const{kind:ce,type:_e}=Y,Ze=Ye.map(ve=>ve.split("/")[1]),ie={kind:ce,type:_e,owners:Ze,user:"all"};return _n().stringify({filters:ie})},le=Ye=>{let Y=[(0,n.eE)(Ye)];if(Ye.kind==="User"){const _e=(0,p.hF)(Ye,n.hr,{kind:"Group"}).map(Ze=>(0,n.eE)({kind:Ze.kind,namespace:Ze.namespace,name:Ze.name}));Y=[...Y,..._e]}return Y},Q=async(Ye,Y)=>{const ce=[],_e=new Map,Ze=new Set;ce.push(Ye);let ie=Ye;for(;ce.length>0;){const de=(0,p.hF)(ie,n._b,{kind:"Group"});await Promise.all(de.map(ve=>ee(async()=>{const ge=Y.getEntityByRef(ve);_e.set(ve.name,ge);try{const nt=await ge;nt&&ce.push(nt)}finally{_e.delete(ve.name)}}))),ce.shift(),Ze.add((0,n.eE)({kind:ie.kind,namespace:ie.metadata.namespace,name:ie.metadata.name})),ie=ce[0]}return Array.from(Ze)};function xe(Ye,Y,ce,_e){const Ze=(0,e.h_)(p.Ah),ie=_e!=null?_e:["Component","API","System"],{loading:de,error:ve,value:ge}=(0,D.default)(async()=>{const nt=Y==="aggregated"&&ce?await Q(Ye,Ze):le(Ye);return(await Ze.getEntities({filter:[{kind:ie,"relations.ownedBy":nt}],fields:["kind","metadata.name","metadata.namespace","spec.type","relations"]})).items.reduce((Ut,Mt)=>{var Gt,bn,vn;const Me=Ut.find(ht=>{var _t,tn;return ht.kind===Mt.kind&&ht.type===((tn=(_t=Mt.spec)==null?void 0:_t.type)!=null?tn:Mt.kind)});return Me?Me.count+=1:Ut.push({kind:Mt.kind,type:(vn=(bn=(Gt=Mt.spec)==null?void 0:Gt.type)==null?void 0:bn.toString())!=null?vn:Mt.kind,count:1}),Ut},[]).sort((Ut,Mt)=>Mt.count-Ut.count).slice(0,6).map(Ut=>({counter:Ut.count,type:Ut.type,name:Ut.type.toLocaleUpperCase("en-US"),queryParams:Le(nt,Ut)}))},[Ze,Ye,Y]);return{componentsWithCounters:ge,loading:de,error:ve}}const at=(0,a.Z)(Ye=>(0,o.Z)({card:{border:`1px solid ${Ye.palette.divider}`,boxShadow:Ye.shadows[2],borderRadius:"4px",padding:Ye.spacing(2),color:"#fff",transition:`${Ye.transitions.duration.standard}ms`,"&:hover":{boxShadow:Ye.shadows[4]}},bold:{fontWeight:Ye.typography.fontWeightBold},entityTypeBox:{background:Y=>Ye.getPageTheme({themeId:Y.type}).backgroundImage}})),Zt=({counter:Ye,type:Y,name:ce,url:_e})=>{const Ze=at({type:Y});return E.createElement(T.rU,{to:_e,variant:"body2"},E.createElement(u.Z,{className:`${Ze.card} ${Ze.entityTypeBox}`,display:"flex",flexDirection:"column",alignItems:"center"},E.createElement(v.Z,{className:Ze.bold,variant:"h6"},Ye),E.createElement(v.Z,{className:Ze.bold,variant:"h6"},qe()(ce,Ye))))},Dt=({entity:Ye,relationsType:Y,isGroup:ce,entityFilterKind:_e})=>{const Ze=(0,e.tg)(U),{componentsWithCounters:ie,loading:de,error:ve}=xe(Ye,Y,ce,_e);return de?E.createElement(T.Ex,null):ve?E.createElement(T.Gk,{error:ve}):E.createElement(m.Z,{container:!0},ie==null?void 0:ie.map(ge=>E.createElement(m.Z,{item:!0,xs:6,md:6,lg:4,key:ge.name},E.createElement(Zt,{counter:ge.counter,type:ge.type,name:ge.name,url:`${Ze()}/?${ge.queryParams}`}))))},en=(0,a.Z)(Ye=>({list:{[Ye.breakpoints.down("xs")]:{padding:"0 0 12px"}},listItemText:{[Ye.breakpoints.down("xs")]:{paddingRight:0,paddingLeft:0}},listItemSecondaryAction:{[Ye.breakpoints.down("xs")]:{width:"100%",top:"auto",right:"auto",position:"relative",transform:"unset"}}})),on=Ye=>{const{variant:Y,entityFilterKind:ce,hideRelationsToggle:_e,relationsType:Ze}=Ye,ie=_e===void 0?!1:_e,de=en(),{entity:ve}=(0,p.X2)(),ge=ve.kind==="Group",[nt,bt]=(0,E.useState)(Ze||"direct");return E.createElement(T.rJ,{title:"Ownership",variant:Y},!ie&&E.createElement(y.Z,{dense:!0},E.createElement(h.Z,{className:de.list},E.createElement($.Z,{className:de.listItemText}),E.createElement(J.Z,{className:de.listItemSecondaryAction},"Direct Relations",E.createElement(L.ZP,{placement:"top",arrow:!0,title:`${nt==="direct"?"Direct":"Aggregated"} Relations`},E.createElement(g.Z,{color:"primary",checked:nt!=="direct",onChange:()=>bt(nt==="direct"?"aggregated":"direct"),name:"pin",inputProps:{"aria-label":"Ownership Type Switch"},disabled:!ge})),"Aggregated Relations"))),E.createElement(Dt,{entity:ve,relationsType:nt,isGroup:ge,entityFilterKind:ce}))},gn=Ye=>{const{singularTitle:Y,pluralTitle:ce,icon:_e}=Ye,Ze=(0,e.h_)(e.$4),ie=(0,e.h_)(p.Ah),de=(0,e.tg)(p.wi),{value:ve}=(0,D.default)(async()=>{const ge=await Ze.getBackstageIdentity();return(await ie.getEntities({filter:[{kind:"group","relations.hasMember":ge.userEntityRef}],fields:["metadata","kind"]})).items},[]);if(!(ve!=null&&ve.length))return null;if(ve.length===1){const ge=ve[0];return E.createElement(T.R6,{text:Y,to:de((0,n.iB)(ge)),icon:_e})}return E.createElement(T.R6,{icon:_e,to:"catalog",text:ce},E.createElement(T.k2,{title:ce},ve==null?void 0:ve.map(function(nt){return E.createElement(T.BT,{title:nt.metadata.title||nt.metadata.name,to:de((0,n.iB)(nt)),icon:_e,key:nt.metadata.name})})))}},5083:function(Lt,c,t){t.d(c,{J$:function(){return $},Y2:function(){return I},g2:function(){return v},rG:function(){return m}});var e=t(32272),n=t(96279),p=t.n(n),a=t(9571),o=t(30195),m=(D=>(D.DENY="DENY",D.ALLOW="ALLOW",D.CONDITIONAL="CONDITIONAL",D))(m||{});function u(D,T){return D.name===T.name}function v(D,T){return"resourceType"in D?!T||D.resourceType===T:!1}function d(D){return D.attributes.action==="create"}function y(D){return D.attributes.action==="read"}function h(D){return D.attributes.action==="update"}function M(D){return D.attributes.action==="delete"}function L(D){return{authorize:async(T,i)=>await D.authorize(T,i),authorizeConditional(T,i){const O=T;return D.authorize(O,i)}}}function $({name:D,attributes:T,resourceType:i}){return i?{type:"resource",name:D,attributes:T,resourceType:i}:{type:"basic",name:D,attributes:T}}const J=o.z.lazy(()=>o.z.object({rule:o.z.string(),resourceType:o.z.string(),params:o.z.array(o.z.unknown())}).or(o.z.object({anyOf:o.z.array(J).nonempty()})).or(o.z.object({allOf:o.z.array(J).nonempty()})).or(o.z.object({not:J}))),g=o.z.object({result:o.z.literal(m.ALLOW).or(o.z.literal(m.DENY))}),S=o.z.union([o.z.object({result:o.z.literal(m.ALLOW).or(o.z.literal(m.DENY))}),o.z.object({result:o.z.literal(m.CONDITIONAL),pluginId:o.z.string(),resourceType:o.z.string(),conditions:J})]),E=(D,T)=>o.z.object({items:o.z.array(o.z.intersection(o.z.object({id:o.z.string()}),D)).refine(i=>i.length===T.size&&i.every(({id:O})=>T.has(O)),{message:"Items in response do not match request"})});class I{constructor(T){var i;this.discovery=T.discovery,this.enabled=(i=T.config.getOptionalBoolean("permission.enabled"))!=null?i:!1}async authorize(T,i){return this.makeRequest(T,g,i)}async authorizeConditional(T,i){return this.makeRequest(T,S,i)}async makeRequest(T,i,O){if(!this.enabled)return T.map(qe=>({result:m.ALLOW}));const W={items:T.map(qe=>({id:a.Z(),...qe}))},Ce=await this.discovery.getBaseUrl("permission"),$e=await p()(`${Ce}/authorize`,{method:"POST",body:JSON.stringify(W),headers:{...this.getAuthorizationHeader(O==null?void 0:O.token),"content-type":"application/json"}});if(!$e.ok)throw await e.VL.fromResponse($e);const Qe=await $e.json(),lt=E(i,new Set(W.items.map(({id:qe})=>qe))).parse(Qe).items.reduce((qe,$t)=>(qe[$t.id]=$t,qe),{});return W.items.map(qe=>lt[qe.id])}getAuthorizationHeader(T){return T?{Authorization:`Bearer ${T}`}:{}}}},56563:function(Lt,c,t){t.d(c,{RV:function(){return m},gI:function(){return v},iM:function(){return u},po:function(){return d}});var e=t(2784),n=t(10289),p=t(30705),a=t(5083),o=t(49857);const m=(0,p.T0)({id:"plugin.permission.api"});class u{constructor(h,M){this.permissionClient=h,this.identityApi=M}static create(h){const{config:M,discovery:L,identity:$}=h,J=new a.Y2({discovery:L,config:M});return new u(J,$)}async authorize(h){return(await this.permissionClient.authorize([h],await this.identityApi.getCredentials()))[0]}}function v(y){const h=(0,p.h_)(m),{data:M,error:L}=(0,o.ZP)(y,async $=>{if((0,a.g2)($.permission)&&!$.resourceRef)return a.rG.DENY;const{result:J}=await h.authorize($);return J});return L?{error:L,loading:!1,allowed:!1}:M===void 0?{loading:!0,allowed:!1}:{loading:!1,allowed:M===a.rG.ALLOW}}const d=y=>{const{permission:h,resourceRef:M,errorComponent:L,...$}=y,J=v((0,a.g2)(h)?{permission:h,resourceRef:M}:{permission:h}),g=(0,p.qD)(),{NotFoundErrorPage:S}=g.getComponents();let E=L===void 0?e.createElement(S,null):L;return J.loading?E=null:J.allowed&&(E=y.element),e.createElement(n.AW,{...$,element:E})}},73409:function(Lt,c,t){t.d(c,{E:function(){return xe},F:function(){return ln},O:function(){return en},R:function(){return ge},S:function(){return ie},T:function(){return Wt},a:function(){return bn},b:function(){return le},c:function(){return ht},d:function(){return Ut},e:function(){return de},f:function(){return _t},g:function(){return tn},h:function(){return zn},i:function(){return at},j:function(){return Zt},k:function(){return Dt},l:function(){return nt},m:function(){return bt},r:function(){return vn},s:function(){return Me},y:function(){return An},z:function(){return Bt}});var e=t(34520),n=t(30705),p=t(32272),a=t(19126),o=t.n(a),m=t(82394),u=t.n(m),v=t(73495),d=t(86619),y=t(42494),h=t(95544),M=t(90436),L=t(5806),$=t(21324),J=t(79692),g=t(60905),S=t(4614),E=t(97136),I=t(27556),D=t(77277),T=t(88013),i=t(2784),O=t(64279),W=t(62155),Ce=t(49462),$e=t(74828),Qe=t(29611),it=t(56939),lt=t(49558),qe=t(48760),$t=t(82108),Ot=t.n($t),pn=t(19996),_n=t(25505),U=t(38016),Re=t(31377),w=t(34546),Ie=t(31625),fe=t(12420),A=t(49166),H=t(98281),re=t(16874),Pe=t(72779),ae=t.n(Pe),Te=t(96299),Et=t(10289),te=t(70218),ee=t(22690),Le=t(52160);const le=(0,n.T0)({id:"plugin.scaffolder.service"});class Q{constructor(Ue){var oe,he;this.discoveryApi=Ue.discoveryApi,this.fetchApi=(oe=Ue.fetchApi)!=null?oe:{fetch},this.scmIntegrationsApi=Ue.scmIntegrationsApi,this.useLongPollingLogs=(he=Ue.useLongPollingLogs)!=null?he:!1}async getIntegrationsList(Ue){return{integrations:[...this.scmIntegrationsApi.azure.list(),...this.scmIntegrationsApi.bitbucket.list(),...this.scmIntegrationsApi.github.list(),...this.scmIntegrationsApi.gitlab.list()].map(he=>({type:he.type,title:he.title,host:he.config.host})).filter(he=>Ue.allowedHosts.includes(he.host))}}async getTemplateParameterSchema(Ue){const{namespace:oe,kind:he,name:De}=(0,e.of)(Ue,{defaultKind:"template"}),we=await this.discoveryApi.getBaseUrl("scaffolder"),Ne=[oe,he,De].map(Kt=>encodeURIComponent(Kt)).join("/"),Ke=`${we}/v2/templates/${Ne}/parameter-schema`,Be=await this.fetchApi.fetch(Ke);if(!Be.ok)throw await p.VL.fromResponse(Be);return await Be.json()}async scaffold(Ue){const{templateRef:oe,values:he,secrets:De={}}=Ue,we=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks`,Ne=await this.fetchApi.fetch(we,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({templateRef:oe,values:{...he},secrets:De})});if(Ne.status!==201){const Be=`${Ne.status} ${Ne.statusText}`,ct=await Ne.text();throw new Error(`Backend request failed, ${Be} ${ct.trim()}`)}const{id:Ke}=await Ne.json();return{taskId:Ke}}async getTask(Ue){const he=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks/${encodeURIComponent(Ue)}`,De=await this.fetchApi.fetch(he);if(!De.ok)throw await p.VL.fromResponse(De);return await De.json()}streamLogs(Ue){return this.useLongPollingLogs?this.streamLogsPolling(Ue):this.streamLogsEventStream(Ue)}streamLogsEventStream({taskId:Ue,after:oe}){return new(u())(he=>{const De=new URLSearchParams;oe!==void 0&&De.set("after",String(Number(oe))),this.discoveryApi.getBaseUrl("scaffolder").then(we=>{const Ne=`${we}/v2/tasks/${encodeURIComponent(Ue)}/eventstream`,Ke=new EventSource(Ne,{withCredentials:!0});Ke.addEventListener("log",Be=>{if(Be.data)try{he.next(JSON.parse(Be.data))}catch(ct){he.error(ct)}}),Ke.addEventListener("completion",Be=>{if(Be.data)try{he.next(JSON.parse(Be.data))}catch(ct){he.error(ct)}Ke.close(),he.complete()}),Ke.addEventListener("error",Be=>{he.error(Be)})},we=>{he.error(we)})})}streamLogsPolling({taskId:Ue,after:oe}){let he=oe;return new(u())(De=>{this.discoveryApi.getBaseUrl("scaffolder").then(async we=>{for(;!De.closed;){const Ne=`${we}/v2/tasks/${encodeURIComponent(Ue)}/events?${o().stringify({after:he})}`,Ke=await this.fetchApi.fetch(Ne);if(!Ke.ok){await new Promise(ct=>setTimeout(ct,1e3));continue}const Be=await Ke.json();for(const ct of Be)if(he=Number(ct.id),De.next(ct),ct.type==="completion"){De.complete();return}}})})}async listActions(){const Ue=await this.discoveryApi.getBaseUrl("scaffolder"),oe=await this.fetchApi.fetch(`${Ue}/v2/actions`);if(!oe.ok)throw await p.VL.fromResponse(oe);return await oe.json()}}const xe=st=>{var Ue,oe,he,De;const{onChange:we,schema:{title:Ne="Entity",description:Ke="An entity from the catalog"},required:Be,uiSchema:ct,rawErrors:Kt,formData:mn,idSchema:se}=st,ke=(Ue=ct["ui:options"])==null?void 0:Ue.allowedKinds,ot=(oe=ct["ui:options"])==null?void 0:oe.defaultKind,wt=(0,n.h_)(v.Ah),{value:Fe,loading:ft}=(0,O.default)(()=>wt.getEntities(ke?{filter:{kind:ke}}:void 0)),K=Fe==null?void 0:Fe.items.map(b=>(0,v.$3)(b,{defaultKind:ot})),l=(0,i.useCallback)((b,x)=>{we(x||"")},[we]);return(0,i.useEffect)(()=>{(K==null?void 0:K.length)===1&&we(K[0])},[K,we]),i.createElement(y.Z,{margin:"normal",required:Be,error:(Kt==null?void 0:Kt.length)>0&&!mn},i.createElement(T.ZP,{disabled:(K==null?void 0:K.length)===1,id:se==null?void 0:se.$id,value:mn||"",loading:ft,onChange:l,options:K||[],autoSelect:!0,freeSolo:(De=(he=ct["ui:options"])==null?void 0:he.allowArbitraryValues)!=null?De:!0,renderInput:b=>i.createElement(d.Z,{...b,label:Ne,margin:"normal",helperText:Ke,variant:"outlined",required:Be,InputProps:b.InputProps})}))},at=st=>{const{onChange:Ue,required:oe,schema:{title:he="Name",description:De="Unique name of the component"},rawErrors:we,formData:Ne,uiSchema:{"ui:autofocus":Ke},idSchema:Be,placeholder:ct}=st;return i.createElement(d.Z,{id:Be==null?void 0:Be.$id,label:he,placeholder:ct,helperText:De,required:oe,value:Ne!=null?Ne:"",onChange:({target:{value:Kt}})=>Ue(Kt),margin:"normal",error:(we==null?void 0:we.length)>0&&!Ne,inputProps:{autoFocus:Ke}})},Zt=(st,Ue)=>{e.y$.isValidObjectName(st)||Ue.addError("must start and end with an alphanumeric character, and contain only alphanumeric characters, hyphens, underscores, and periods. Maximum length is 63 characters.")},Dt=st=>{var Ue;const{formData:oe,onChange:he,uiSchema:De}=st,we=(0,n.h_)(v.Ah),[Ne,Ke]=(0,i.useState)(""),[Be,ct]=(0,i.useState)(!1),Kt=(0,e.In)().isValidTag,mn=(Ue=De["ui:options"])==null?void 0:Ue.kinds,{loading:se,value:ke}=(0,O.default)(async()=>{const wt={fields:["metadata.tags"]};mn&&(wt.filter={kind:mn});const Fe=await we.getEntities(wt);return[...new Set(Fe.items.flatMap(ft=>{var K;return(K=ft.metadata)==null?void 0:K.tags}).filter(Boolean))].sort()}),ot=(wt,Fe)=>{let ft=!1,K=!1;const l=oe||[];if((Fe==null?void 0:Fe.length)&&l.length<Fe.length){const b=Fe[Fe.length-1]=Fe[Fe.length-1].toLocaleLowerCase("en-US").trim();ft=!Kt(b),K=l.indexOf(b)!==-1}ct(ft),Ke(ft?Ne:""),!ft&&!K&&he(Fe||[])};return(0,W.Z)(()=>he(oe||[])),i.createElement(y.Z,{margin:"normal"},i.createElement(T.ZP,{multiple:!0,freeSolo:!0,filterSelectedOptions:!0,onChange:ot,value:oe||[],inputValue:Ne,loading:se,options:ke||[],ChipProps:{size:"small"},renderInput:wt=>i.createElement(d.Z,{...wt,label:"Tags",onChange:Fe=>Ke(Fe.target.value),error:Be,helperText:"Add any relevant tags, hit 'Enter' to add new tags. Valid format: [a-z0-9+#] separated by [-], at most 63 characters"})}))},en=st=>{var Ue;const{schema:{title:oe="Owner",description:he="The owner of the component"},uiSchema:De,...we}=st,Ne={...De,"ui:options":{allowedKinds:((Ue=De["ui:options"])==null?void 0:Ue.allowedKinds)||["Group","User"],defaultKind:"Group"}};return i.createElement(xe,{...we,schema:{title:oe,description:he},uiSchema:Ne})},on=st=>{const{allowedOwners:Ue=[],rawErrors:oe,state:he,onChange:De}=st,we=Ue?Ue.map(Be=>({label:Be,value:Be})):[{label:"Loading...",value:"loading"}],{owner:Ne,repoName:Ke}=he;return i.createElement(i.Fragment,null,i.createElement(y.Z,{margin:"normal",required:!0,error:(oe==null?void 0:oe.length)>0&&!Ne},Ue!=null&&Ue.length?i.createElement(lt.Ph,{native:!0,label:"Owner Available",onChange:Be=>De({owner:String(Array.isArray(Be)?Be[0]:Be)}),disabled:Ue.length===1,selected:Ne,items:we}):i.createElement(i.Fragment,null,i.createElement(it.Z,{htmlFor:"ownerInput"},"Owner"),i.createElement(Qe.Z,{id:"ownerInput",onChange:Be=>De({owner:Be.target.value}),value:Ne})),i.createElement($e.Z,null,"The organization, user or project that this repo will belong to")),i.createElement(y.Z,{margin:"normal",required:!0,error:(oe==null?void 0:oe.length)>0&&!Ke},i.createElement(it.Z,{htmlFor:"repoNameInput"},"Repository"),i.createElement(Qe.Z,{id:"repoNameInput",onChange:Be=>De({repoName:Be.target.value}),value:Ke}),i.createElement($e.Z,null,"The name of the repository")))},gn=st=>{const{allowedOwners:Ue=[],rawErrors:oe,state:he,onChange:De}=st,we=Ue?Ue.map(Be=>({label:Be,value:Be})):[{label:"Loading...",value:"loading"}],{owner:Ne,repoName:Ke}=he;return i.createElement(i.Fragment,null,i.createElement(y.Z,{margin:"normal",required:!0,error:(oe==null?void 0:oe.length)>0&&!Ne},Ue!=null&&Ue.length?i.createElement(lt.Ph,{native:!0,label:"Owner Available",onChange:Be=>De({owner:String(Array.isArray(Be)?Be[0]:Be)}),disabled:Ue.length===1,selected:Ne,items:we}):i.createElement(i.Fragment,null,i.createElement(it.Z,{htmlFor:"ownerInput"},"Owner"),i.createElement(Qe.Z,{id:"ownerInput",onChange:Be=>De({owner:Be.target.value}),value:Ne})),i.createElement($e.Z,null,"The organization, groups, subgroups, user, project (also known as namespaces in gitlab), that this repo will belong to")),i.createElement(y.Z,{margin:"normal",required:!0,error:(oe==null?void 0:oe.length)>0&&!Ke},i.createElement(it.Z,{htmlFor:"repoNameInput"},"Repository"),i.createElement(Qe.Z,{id:"repoNameInput",onChange:Be=>De({repoName:Be.target.value}),value:Ke}),i.createElement($e.Z,null,"The name of the repository")))},Ye=st=>{const{rawErrors:Ue,state:oe,onChange:he}=st,{organization:De,repoName:we,owner:Ne}=oe;return i.createElement(i.Fragment,null,i.createElement(y.Z,{margin:"normal",required:!0,error:(Ue==null?void 0:Ue.length)>0&&!De},i.createElement(it.Z,{htmlFor:"orgInput"},"Organization"),i.createElement(Qe.Z,{id:"orgInput",onChange:Ke=>he({organization:Ke.target.value}),value:De}),i.createElement($e.Z,null,"The organization that this repo will belong to")),i.createElement(y.Z,{margin:"normal",required:!0,error:(Ue==null?void 0:Ue.length)>0&&!Ne},i.createElement(it.Z,{htmlFor:"ownerInput"},"Owner"),i.createElement(Qe.Z,{id:"ownerInput",onChange:Ke=>he({owner:Ke.target.value}),value:Ne}),i.createElement($e.Z,null,"The Owner that this repo will belong to")),i.createElement(y.Z,{margin:"normal",required:!0,error:(Ue==null?void 0:Ue.length)>0&&!we},i.createElement(it.Z,{htmlFor:"repoNameInput"},"Repository"),i.createElement(Qe.Z,{id:"repoNameInput",onChange:Ke=>he({repoName:Ke.target.value}),value:we}),i.createElement($e.Z,null,"The name of the repository")))},Y=st=>{const{onChange:Ue,rawErrors:oe,state:he}=st,{host:De,workspace:we,project:Ne,repoName:Ke}=he;return i.createElement(i.Fragment,null,De==="bitbucket.org"&&i.createElement(y.Z,{margin:"normal",required:!0,error:(oe==null?void 0:oe.length)>0&&!we},i.createElement(it.Z,{htmlFor:"workspaceInput"},"Workspace"),i.createElement(Qe.Z,{id:"workspaceInput",onChange:Be=>Ue({workspace:Be.target.value}),value:we}),i.createElement($e.Z,null,"The Organization that this repo will belong to")),i.createElement(y.Z,{margin:"normal",required:!0,error:(oe==null?void 0:oe.length)>0&&!Ne},i.createElement(it.Z,{htmlFor:"projectInput"},"Project"),i.createElement(Qe.Z,{id:"projectInput",onChange:Be=>Ue({project:Be.target.value}),value:Ne}),i.createElement($e.Z,null,"The Project that this repo will belong to")),i.createElement(y.Z,{margin:"normal",required:!0,error:(oe==null?void 0:oe.length)>0&&!Ke},i.createElement(it.Z,{htmlFor:"repoNameInput"},"Repository"),i.createElement(Qe.Z,{id:"repoNameInput",onChange:Be=>Ue({repoName:Be.target.value}),value:Ke}),i.createElement($e.Z,null,"The name of the repository")))},ce=st=>{const{host:Ue,hosts:oe,onChange:he,rawErrors:De}=st,we=(0,n.h_)(le),{value:{integrations:Ne}={integrations:[]},loading:Ke}=(0,O.default)(async()=>await we.getIntegrationsList({allowedHosts:oe!=null?oe:[]}));(0,i.useEffect)(()=>{Ue||(oe!=null&&oe.length?he(oe[0]):Ne!=null&&Ne.length&&he(Ne[0].host))},[oe,Ue,he,Ne]);const Be=Ne?Ne.filter(ct=>oe!=null&&oe.length?oe==null?void 0:oe.includes(ct.host):!0).map(ct=>({label:ct.title,value:ct.host})):[{label:"Loading...",value:"loading"}];return Ke?i.createElement(lt.Ex,null):i.createElement(i.Fragment,null,i.createElement(y.Z,{margin:"normal",required:!0,error:(De==null?void 0:De.length)>0&&!Ue},i.createElement(lt.Ph,{native:!0,disabled:(oe==null?void 0:oe.length)===1,label:"Host",onChange:ct=>he(String(Array.isArray(ct)?ct[0]:ct)),selected:Ue,items:Be,"data-testid":"host-select"}),i.createElement($e.Z,null,"The host where the repository will be created")))};function _e(st){if(!st.host)return;const Ue=new URLSearchParams;return st.owner&&Ue.set("owner",st.owner),st.repoName&&Ue.set("repo",st.repoName),st.organization&&Ue.set("organization",st.organization),st.workspace&&Ue.set("workspace",st.workspace),st.project&&Ue.set("project",st.project),`${st.host}?${Ue.toString()}`}function Ze(st){let Ue="",oe="",he="",De="",we="",Ne="";try{if(st){const Ke=new URL(`https://${st}`);Ue=Ke.host,oe=Ke.searchParams.get("owner")||"",he=Ke.searchParams.get("repo")||"",De=Ke.searchParams.get("organization")||"",we=Ke.searchParams.get("workspace")||"",Ne=Ke.searchParams.get("project")||""}}catch{}return{host:Ue,owner:oe,repoName:he,organization:De,workspace:we,project:Ne}}const ie=(0,i.createContext)(void 0),de=({children:st})=>{const[Ue,oe]=(0,i.useState)({});return i.createElement(ie.Provider,{value:{secrets:Ue,setSecrets:oe}},st)},ve=()=>{const st=(0,i.useContext)(ie);if(!st)throw new Error("useTemplateSecrets must be used within a SecretsContextProvider");const{setSecrets:Ue}=st;return{setSecrets:(0,i.useCallback)(he=>{Ue(De=>({...De,...he}))},[Ue])}},ge=st=>{var Ue,oe;const{uiSchema:he,onChange:De,rawErrors:we,formData:Ne}=st,[Ke,Be]=(0,i.useState)(Ze(Ne)),ct=(0,n.h_)(Ce.q3),Kt=(0,n.h_)(Ce.Om),{setSecrets:mn}=ve(),se=(0,i.useMemo)(()=>{var Fe,ft;return(ft=(Fe=he==null?void 0:he["ui:options"])==null?void 0:Fe.allowedHosts)!=null?ft:[]},[he]),ke=(0,i.useMemo)(()=>{var Fe,ft;return(ft=(Fe=he==null?void 0:he["ui:options"])==null?void 0:Fe.allowedOwners)!=null?ft:[]},[he]);(0,i.useEffect)(()=>{De(_e(Ke))},[Ke,De]),(0,i.useEffect)(()=>{ke.length===1&&Be(Fe=>({...Fe,owner:ke[0]}))},[Be,ke]);const ot=(0,i.useCallback)(Fe=>{Be(ft=>({...ft,...Fe}))},[Be]);(0,qe.Z)(async()=>{var Fe;const{requestUserCredentials:ft}=(Fe=he==null?void 0:he["ui:options"])!=null?Fe:{};if(!ft||!(Ke.host&&Ke.owner&&Ke.repoName))return;const[K,l,b]=[Ke.host,Ke.owner,Ke.repoName].map(encodeURIComponent),{token:x}=await Kt.getCredentials({url:`https://${K}/${l}/${b}`,additionalScope:{repoWrite:!0,customScopes:ft.additionalScopes}});mn({[ft.secretsKey]:x})},500,[Ke,he]);const wt=(oe=Ke.host&&((Ue=ct.byHost(Ke.host))==null?void 0:Ue.type))!=null?oe:null;return i.createElement(i.Fragment,null,i.createElement(ce,{host:Ke.host,hosts:se,onChange:Fe=>Be(ft=>({...ft,host:Fe})),rawErrors:we}),wt==="github"&&i.createElement(on,{allowedOwners:ke,rawErrors:we,state:Ke,onChange:ot}),wt==="gitlab"&&i.createElement(gn,{allowedOwners:ke,rawErrors:we,state:Ke,onChange:ot}),wt==="bitbucket"&&i.createElement(Y,{rawErrors:we,state:Ke,onChange:ot}),wt==="azure"&&i.createElement(Ye,{rawErrors:we,state:Ke,onChange:ot}))},nt=(st,Ue,oe)=>{var he;try{const{host:De,searchParams:we}=new URL(`https://${st}`),Ne=oe.apiHolder.get(Ce.q3);De?(((he=Ne==null?void 0:Ne.byHost(De))==null?void 0:he.type)==="bitbucket"?(De==="bitbucket.org"&&!we.get("workspace")&&Ue.addError("Incomplete repository location provided, workspace not provided"),we.get("project")||Ue.addError("Incomplete repository location provided, project not provided")):we.get("owner")||Ue.addError("Incomplete repository location provided, owner not provided"),we.get("repo")||Ue.addError("Incomplete repository location provided, repo not provided")):Ue.addError("Incomplete repository location provided, host not provided")}catch{Ue.addError("Unable to parse the Repository URL")}},bt=st=>{var Ue,oe;const{onChange:he,schema:{title:De="Entity",description:we="An entity from the catalog"},required:Ne,uiSchema:Ke,rawErrors:Be,formData:ct,idSchema:Kt}=st,mn=(Ue=Ke["ui:options"])==null?void 0:Ue.allowedKinds,se=(oe=Ke["ui:options"])==null?void 0:oe.defaultKind,{ownedEntities:ke,loading:ot}=kt(mn),wt=ke==null?void 0:ke.items.map(ft=>(0,v.$3)(ft,{defaultKind:se})).filter(ft=>ft),Fe=(ft,K)=>{he(K||"")};return i.createElement(y.Z,{margin:"normal",required:Ne,error:(Be==null?void 0:Be.length)>0&&!ct},i.createElement(T.ZP,{id:Kt==null?void 0:Kt.$id,value:ct||"",loading:ot,onChange:Fe,options:wt||[],autoSelect:!0,freeSolo:!0,renderInput:ft=>i.createElement(d.Z,{...ft,label:De,margin:"normal",helperText:we,variant:"outlined",required:Ne,InputProps:ft.InputProps})}))};function kt(st){const Ue=(0,n.h_)(n.$4),oe=(0,n.h_)(v.Ah),{loading:he,value:De}=(0,O.default)(async()=>{const Ke=(await Ue.getBackstageIdentity()).ownershipEntityRefs;return await oe.getEntities(st?{filter:{kind:st,[`relations.${e.S4}`]:Ke||[]}}:{filter:{[`relations.${e.S4}`]:Ke||[]}})},[]),we=(0,i.useMemo)(()=>De,[De]);return(0,i.useMemo)(()=>({loading:he,ownedEntities:we}),[he,we])}const ln="scaffolder.extensions.wrapper.v1",Ut="scaffolder.extensions.field.v1";function Mt(st){return{expose(){const Ue=()=>null;return(0,n.R5)(Ue,Ut,st),Ue}}}const Gt=()=>null;(0,n.R5)(Gt,ln,!0);const bn=(0,n.x8)({id:"register-component",optional:!0}),vn=(0,n.NT)({id:"scaffolder"}),Me=(0,n.Rz)({id:"scaffolder/selected-template",parent:vn,path:"/templates/:templateName"}),ht=(0,n.Rz)({id:"scaffolder/task",parent:vn,path:"/tasks/:taskId"}),_t=(0,n.Rz)({id:"scaffolder/actions",parent:vn,path:"/actions"}),tn=(0,n.Rz)({id:"scaffolder/edit",parent:vn,path:"/edit"}),Bt=(0,n.rx)({id:"scaffolder",apis:[(0,n.ni)({api:le,deps:{discoveryApi:n.NW,scmIntegrationsApi:Ce.q3,fetchApi:n.gP},factory:({discoveryApi:st,scmIntegrationsApi:Ue,fetchApi:oe})=>new Q({discoveryApi:st,scmIntegrationsApi:Ue,fetchApi:oe})})],routes:{root:vn},externalRoutes:{registerComponent:bn}}),hn=Bt.provide(Mt({component:xe,name:"EntityPicker"})),kn=Bt.provide(Mt({component:at,name:"EntityNamePicker",validation:Zt})),Bn=Bt.provide(Mt({component:ge,name:"RepoUrlPicker",validation:nt})),Un=Bt.provide(Mt({component:en,name:"OwnerPicker"})),An=Bt.provide((0,n.P4)({name:"ScaffolderPage",component:()=>Promise.all([t.e(4778),t.e(6637),t.e(4267)]).then(t.bind(t,44267)).then(st=>st.Router),mountPoint:vn})),Ge=Bt.provide(Mt({component:bt,name:"OwnedEntityPicker"})),Je=Bt.provide(Mt({component:Dt,name:"EntityTagsPicker"})),mt=Bt.provide((0,n.P4)({name:"NextScaffolderPage",component:()=>t.e(1810).then(t.bind(t,71810)).then(st=>st.Router),mountPoint:vn})),dt=i.createElement(_n.Z,{fontSize:"small"}),It=i.createElement(pn.Z,{fontSize:"small"}),Wt=()=>{const st=(0,n.h_)(n.$v),{error:Ue,loading:oe,availableTypes:he,selectedTypes:De,setSelectedTypes:we}=(0,v.Uh)();return oe?i.createElement(lt.Ex,null):he?Ue?(st.post({message:"Failed to load entity types",severity:"error"}),null):i.createElement(h.Z,{pb:1,pt:1},i.createElement(M.Z,{variant:"button"},"Categories"),i.createElement(T.ZP,{multiple:!0,"aria-label":"Categories",options:he,value:De,onChange:(Ne,Ke)=>we(Ke),renderOption:(Ne,{selected:Ke})=>i.createElement(L.Z,{control:i.createElement($.Z,{icon:dt,checkedIcon:It,checked:Ke}),label:Ot()(Ne)}),size:"small",popupIcon:i.createElement(U.Z,{"data-testid":"categories-picker-expand"}),renderInput:Ne=>i.createElement(d.Z,{...Ne,variant:"outlined"})})):null};function Jt(st,Ue){var oe,he,De;switch(Ue.type){case"INIT":{st.steps=Ue.data.spec.steps.reduce((we,Ne)=>(we[Ne.id]={status:"open",id:Ne.id},we),{}),st.stepLogs=Ue.data.spec.steps.reduce((we,Ne)=>(we[Ne.id]=[],we),{}),st.loading=!1,st.error=void 0,st.completed=!1,st.task=Ue.data;return}case"LOGS":{const we=Ue.data;for(const Ne of we){const Ke=`${Ne.createdAt} ${Ne.body.message}`;if(!Ne.body.stepId||!((oe=st.steps)!=null&&oe[Ne.body.stepId]))continue;const Be=(he=st.stepLogs)==null?void 0:he[Ne.body.stepId],ct=(De=st.steps)==null?void 0:De[Ne.body.stepId];Ne.body.status&&Ne.body.status!==ct.status&&(ct.status=Ne.body.status,ct.status==="processing"&&(ct.startedAt=Ne.createdAt),["cancelled","failed","completed"].includes(ct.status)&&(ct.endedAt=Ne.createdAt)),Be==null||Be.push(Ke)}return}case"COMPLETED":{st.completed=!0,st.output=Ue.data.body.output;return}case"ERROR":{st.error=Ue.data,st.loading=!1,st.completed=!0;return}default:return}}const xt=st=>{const Ue=(0,n.h_)(le),[oe,he]=(0,ee.C)(Jt,{loading:!0,completed:!1,stepLogs:{},steps:{}});return(0,i.useEffect)(()=>{let De=!1,we,Ne;return Ue.getTask(st).then(Ke=>{if(De)return;he({type:"INIT",data:Ke});const Be=Ue.streamLogs({taskId:st}),ct=new Array;function Kt(){if(ct.length){const mn=ct.splice(0,ct.length);he({type:"LOGS",data:mn})}}Ne=setInterval(Kt,500),we=Be.subscribe({next:mn=>{switch(mn.type){case"log":return ct.push(mn);case"completion":Kt(),he({type:"COMPLETED",data:mn});return;default:throw new Error(`Unhandled event type ${mn.type} in observer`)}},error:mn=>{Kt(),he({type:"ERROR",data:mn})}})},Ke=>{De||he({type:"ERROR",data:Ke})}),()=>{De=!0,we&&we.unsubscribe(),Ne&&clearInterval(Ne)}},[Ue,he,st]),oe},N=(0,J.Z)({svgIcon:{display:"inline-block","& svg":{display:"inline-block",fontSize:"inherit",verticalAlign:"baseline"}}}),F=st=>{const{href:Ue,text:oe,Icon:he,...De}=st,we=N();return i.createElement(g.Z,{container:!0,direction:"row",spacing:1},i.createElement(g.Z,{item:!0},i.createElement(M.Z,{component:"div",className:we.svgIcon},he?i.createElement(he,null):i.createElement(Le.Z,null))),i.createElement(g.Z,{item:!0},i.createElement(lt.rU,{to:Ue,...De},oe||Ue)))},q=({output:st})=>{const{links:Ue=[]}=st,oe=(0,n.qD)(),he=(0,n.tg)(v.wi),De=we=>{var Ne;return we&&(Ne=oe.getSystemIcon(we))!=null?Ne:Le.Z};return i.createElement(h.Z,{px:3,pb:3},Ue.filter(({url:we,entityRef:Ne})=>we||Ne).map(({url:we,entityRef:Ne,title:Ke,icon:Be})=>{if(Ne){const ct=(0,e.of)(Ne),Kt=he(ct);return{title:Ke,icon:Be,url:Kt}}return{title:Ke,icon:Be,url:we}}).map(({url:we,title:Ne,icon:Ke},Be)=>i.createElement(F,{key:`output-link-${Be}`,href:we,text:Ne!=null?Ne:we,Icon:De(Ke),target:"_blank"})))},ye=t(75951),Se=(0,J.Z)(st=>(0,fe.Z)({root:{width:"100%"},button:{marginBottom:st.spacing(2),marginLeft:st.spacing(2)},actionsContainer:{marginBottom:st.spacing(2)},resetContainer:{padding:st.spacing(3)},labelWrapper:{display:"flex",flex:1,flexDirection:"row",justifyContent:"space-between"},stepWrapper:{width:"100%"}})),vt=({step:st})=>{const[Ue,oe]=(0,i.useState)("");return(0,te.Z)(()=>{if(!st.startedAt){oe("");return}const he=st.endedAt?Te.ou.fromISO(st.endedAt):Te.ou.local(),De=Te.ou.fromISO(st.startedAt),we=Te.Xp.fromDateTimes(De,he).toDuration().valueOf();oe(ye(we,{round:!0}))},1e3),i.createElement(M.Z,{variant:"caption"},Ue)},Rt=(0,J.Z)(st=>(0,fe.Z)({root:{color:st.palette.text.disabled,display:"flex",height:22,alignItems:"center"},completed:{color:st.palette.status.ok},error:{color:st.palette.status.error}}));function Nt(st){const Ue=Rt(),{active:oe,completed:he,error:De}=st,we=()=>oe?i.createElement(S.Z,{size:"24px"}):he?i.createElement(H.Z,null):De?i.createElement(A.Z,null):i.createElement(re.Z,null);return i.createElement("div",{className:ae()(Ue.root,{[Ue.completed]:he,[Ue.error]:De})},we())}const zt=(0,i.memo)(({steps:st,currentStepId:Ue,onUserStepChange:oe})=>{const he=Se();return i.createElement("div",{className:he.root},i.createElement(Ie.Z,{activeStep:st.findIndex(De=>De.id===Ue),orientation:"vertical",nonLinear:!0},st.map((De,we)=>{const Ne=De.status==="completed",Ke=De.status==="failed",Be=De.status==="processing",ct=De.status==="skipped";return i.createElement(Re.Z,{key:String(we),expanded:!0},i.createElement(E.Z,{onClick:()=>oe(De.id)},i.createElement(w.Z,{StepIconProps:{completed:Ne,error:Ke,active:Be},StepIconComponent:Nt,className:he.stepWrapper},i.createElement("div",{className:he.labelWrapper},i.createElement(M.Z,{variant:"subtitle2"},De.name),ct?i.createElement(M.Z,{variant:"caption"},"Skipped"):i.createElement(vt,{step:De})))))})))}),xn=({links:st=[]})=>st.length>0,zn=({loadingText:st})=>{const Ue=Se(),oe=(0,Et.s0)(),he=(0,n.tg)(vn),De=(0,n.tg)(Me),[we,Ne]=(0,i.useState)(void 0),[Ke,Be]=(0,i.useState)(void 0),{taskId:ct}=(0,Et.UO)(),Kt=xt(ct),mn=Kt.completed,se=(0,i.useMemo)(()=>{var K,l;return(l=(K=Kt.task)==null?void 0:K.spec.steps.map(b=>{var x;return{...b,...(x=Kt==null?void 0:Kt.steps)==null?void 0:x[b.id]}}))!=null?l:[]},[Kt]);(0,i.useEffect)(()=>{var K;const l=se.find(b=>["failed","processing"].includes(b.status));if(mn&&!l){Be((K=se[se.length-1])==null?void 0:K.id);return}Be(l==null?void 0:l.id)},[se,mn]);const ke=we!=null?we:Ke,ot=(0,i.useMemo)(()=>{if(!ke)return st||"Loading...";const K=Kt.stepLogs[ke];return K!=null&&K.length?K.join(`
`):"Waiting for logs..."},[Kt.stepLogs,ke,st]),wt=Kt.completed===!0&&Kt.loading===!1&&!Kt.task,{output:Fe}=Kt,ft=()=>{var K,l,b;if(!Kt.task||!((l=(K=Kt.task)==null?void 0:K.spec.templateInfo)!=null&&l.entityRef)){oe(he());return}const x=Kt.task.spec.parameters,{name:G}=(0,e.of)((b=Kt.task.spec.templateInfo)==null?void 0:b.entityRef);oe(`${De({templateName:G})}?${o().stringify({formData:JSON.stringify(x)})}`)};return i.createElement(lt.T3,{themeId:"home"},i.createElement(lt.h4,{pageTitleOverride:`Task ${ct}`,title:"Task Activity",subtitle:`Activity for task: ${ct}`}),i.createElement(lt.VY,null,wt?i.createElement(lt.mf,{status:"404",statusMessage:"Task not found",additionalInfo:"No task found with this ID"}):i.createElement("div",null,i.createElement(g.Z,{container:!0},i.createElement(g.Z,{item:!0,xs:3},i.createElement(I.Z,null,i.createElement(zt,{steps:se,currentStepId:ke,onUserStepChange:Ne}),Fe&&xn(Fe)&&i.createElement(q,{output:Fe}),i.createElement(D.Z,{className:Ue.button,onClick:ft,disabled:!mn,variant:"contained",color:"primary"},"Start Over"))),i.createElement(g.Z,{item:!0,xs:9},!ke&&i.createElement(lt.Ex,null),i.createElement("div",{style:{height:"80vh"}},i.createElement(lt.nU,{text:ot})))))))}},78990:function(Lt,c,t){t.d(c,{Ho:function(){return e.z},sG:function(){return e.y}});var e=t(73409),n=t(34520),p=t(30705),a=t(32272),o=t(19126),m=t.n(o),u=t(82394),v=t.n(u),d=t(73495),y=t(2784),h=t(49462),M=t(49558),L=t(82108),$=t.n(L),J=t(72779),g=t.n(J)},97592:function(Lt,c,t){t.d(c,{Nd:function(){return te},gK:function(){return Pe},Rx:function(){return Te}});var e=t(30705),n=t(18473),p=t(2784),a=t(64279),o=t(25557),m=t(48377),u=t(70462),v=t(96279),d=t(5083),y=t(82394),h=t.n(y),M=t(86287),L=t(83677),$=t(63751);class J{constructor(){this.events=[]}captureEvent(Q){const{action:xe,subject:at,value:Zt,attributes:Dt,context:en}=Q;this.events.push({action:xe,subject:at,context:en,...Zt!==void 0?{value:Zt}:{},...Dt!==void 0?{attributes:Dt}:{}})}getEvents(){return this.events}}class g{constructor(Q){this.config=new ConfigReader(Q)}has(Q){return this.config.has(Q)}keys(){return this.config.keys()}get(Q){return this.config.get(Q)}getOptional(Q){return this.config.getOptional(Q)}getConfig(Q){return this.config.getConfig(Q)}getOptionalConfig(Q){return this.config.getOptionalConfig(Q)}getConfigArray(Q){return this.config.getConfigArray(Q)}getOptionalConfigArray(Q){return this.config.getOptionalConfigArray(Q)}getNumber(Q){return this.config.getNumber(Q)}getOptionalNumber(Q){return this.config.getOptionalNumber(Q)}getBoolean(Q){return this.config.getBoolean(Q)}getOptionalBoolean(Q){return this.config.getOptionalBoolean(Q)}getString(Q){return this.config.getString(Q)}getOptionalString(Q){return this.config.getOptionalString(Q)}getStringArray(Q){return this.config.getStringArray(Q)}getOptionalStringArray(Q){return this.config.getOptionalStringArray(Q)}}const S={subscribe:()=>({unsubscribe:()=>{},closed:!0}),[Symbol.observable](){return this}};class E{constructor(Q={}){this.options=Q,this.errors=new Array,this.waiters=new Set}post(Q,xe){if(this.options.collect){this.errors.push({error:Q,context:xe});for(const at of this.waiters)at.pattern.test(Q.message)&&(this.waiters.delete(at),at.resolve({error:Q,context:xe}));return}throw new Error(`MockErrorApi received unexpected error, ${Q}`)}error$(){return S}getErrors(){return this.errors}waitForError(Q,xe=2e3){return new Promise((at,Zt)=>{setTimeout(()=>{Zt(new Error("Timed out waiting for error"))},xe),this.waiters.add({resolve:at,pattern:Q})})}}class I{constructor(Q){this.implementation=D(Q)}get fetch(){return this.implementation.fetch}}function D(le){return createFetchApi({baseImplementation:T(le),middleware:[i(le),O(le)].filter(Q=>Boolean(Q))})}function T(le){const Q=le==null?void 0:le.baseImplementation;if(Q){if(Q==="none")return()=>Promise.resolve(new Response)}else return crossFetch;return Q}function i(le){const Q=le==null?void 0:le.resolvePluginProtocol;if(!!Q)return FetchMiddlewares.resolvePluginProtocol({discoveryApi:Q.discoveryApi})}function O(le){const Q=le==null?void 0:le.injectIdentityAuth;if(!Q)return;const xe="token"in Q?{getCredentials:async()=>({token:Q.token})}:Q.identityApi;return FetchMiddlewares.injectIdentityAuth({identityApi:xe,allowUrl:()=>!0})}class W{constructor(Q=()=>AuthorizeResult.ALLOW){this.requestHandler=Q}async authorize(Q){return{result:this.requestHandler(Q)}}}class Ce{constructor(Q,xe,at){this.subscribers=new Set,this.observable=new(h())(Zt=>(this.subscribers.add(Zt),()=>{this.subscribers.delete(Zt)})),this.namespace=Q,this.bucketStorageApis=xe,this.data={...at}}static create(Q){return new Ce("",new Map,Q)}forBucket(Q){return this.bucketStorageApis.has(Q)||this.bucketStorageApis.set(Q,new Ce(`${this.namespace}/${Q}`,this.bucketStorageApis,this.data)),this.bucketStorageApis.get(Q)}snapshot(Q){if(this.data.hasOwnProperty(this.getKeyName(Q))){const xe=this.data[this.getKeyName(Q)];return{key:Q,presence:"present",value:xe}}return{key:Q,presence:"absent",value:void 0}}async set(Q,xe){const at=JSON.parse(JSON.stringify(xe),(Zt,Dt)=>(typeof Dt=="object"&&Dt!==null&&Object.freeze(Dt),Dt));this.data[this.getKeyName(Q)]=at,this.notifyChanges({key:Q,presence:"present",value:at})}async remove(Q){delete this.data[this.getKeyName(Q)],this.notifyChanges({key:Q,presence:"absent",value:void 0})}observe$(Q){return this.observable.filter(({key:xe})=>xe===Q)}getKeyName(Q){return`${this.namespace}/${encodeURIComponent(Q)}`}notifyChanges(Q){for(const xe of this.subscribers)xe.next(Q)}}function $e(le){Object.defineProperty(window,"matchMedia",{writable:!0,value:jest.fn().mockImplementation(Q=>{var xe;return{matches:(xe=le.matches)!=null?xe:!1,media:Q,onchange:null,addListener:jest.fn(),removeListener:jest.fn(),addEventListener:jest.fn(),removeEventListener:jest.fn(),dispatchEvent:jest.fn()}})})}async function Qe(le){let Q;return await act(async()=>{Q=render(le)}),Q}const it=[(0,e.ni)({api:e.NW,deps:{configApi:e.Ds},factory:({configApi:le})=>m.pM.compile(`${le.getString("backend.baseUrl")}/api/{{ pluginId }}`)}),(0,e.ni)(e.$v,new m.CX),(0,e.ni)(e.v_,new m.gN),(0,e.ni)({api:e.VE,deps:{alertApi:e.$v},factory:({alertApi:le})=>{const Q=new m.KN(le,new m.gr);return m.Jv.forward(Q,{hidden:!1}),Q}}),(0,e.ni)({api:e.E6,deps:{errorApi:e.VE},factory:({errorApi:le})=>m.CJ.create({errorApi:le})}),(0,e.ni)(e.ZM,new m.YM),(0,e.ni)({api:e.Kp,deps:{discoveryApi:e.NW,oauthRequestApi:e.ZM,configApi:e.Ds},factory:({discoveryApi:le,oauthRequestApi:Q,configApi:xe})=>m.eE.create({discoveryApi:le,oauthRequestApi:Q,environment:xe.getOptionalString("auth.environment")})}),(0,e.ni)({api:e.p_,deps:{discoveryApi:e.NW,oauthRequestApi:e.ZM,configApi:e.Ds},factory:({discoveryApi:le,oauthRequestApi:Q,configApi:xe})=>m._i.create({discoveryApi:le,oauthRequestApi:Q,environment:xe.getOptionalString("auth.environment")})}),(0,e.ni)({api:e.F4,deps:{discoveryApi:e.NW,oauthRequestApi:e.ZM,configApi:e.Ds},factory:({discoveryApi:le,oauthRequestApi:Q,configApi:xe})=>m.Td.create({discoveryApi:le,oauthRequestApi:Q,defaultScopes:["read:user"],environment:xe.getOptionalString("auth.environment")})}),(0,e.ni)({api:e.D,deps:{discoveryApi:e.NW,oauthRequestApi:e.ZM,configApi:e.Ds},factory:({discoveryApi:le,oauthRequestApi:Q,configApi:xe})=>m.sn.create({discoveryApi:le,oauthRequestApi:Q,environment:xe.getOptionalString("auth.environment")})}),(0,e.ni)({api:e.ux,deps:{discoveryApi:e.NW,oauthRequestApi:e.ZM,configApi:e.Ds},factory:({discoveryApi:le,oauthRequestApi:Q,configApi:xe})=>m.aq.create({discoveryApi:le,oauthRequestApi:Q,environment:xe.getOptionalString("auth.environment")})}),(0,e.ni)({api:e.gW,deps:{discoveryApi:e.NW,oauthRequestApi:e.ZM,configApi:e.Ds},factory:({discoveryApi:le,oauthRequestApi:Q,configApi:xe})=>m.$_.create({discoveryApi:le,oauthRequestApi:Q,environment:xe.getOptionalString("auth.environment")})}),(0,e.ni)({api:e.bq,deps:{discoveryApi:e.NW,oauthRequestApi:e.ZM,configApi:e.Ds},factory:({discoveryApi:le,oauthRequestApi:Q,configApi:xe})=>m.xP.create({discoveryApi:le,oauthRequestApi:Q,defaultScopes:["team"],environment:xe.getOptionalString("auth.environment")})}),(0,e.ni)({api:e.uB,deps:{discoveryApi:e.NW,oauthRequestApi:e.ZM,configApi:e.Ds},factory:({discoveryApi:le,oauthRequestApi:Q,configApi:xe})=>m.uC.create({discoveryApi:le,oauthRequestApi:Q,environment:xe.getOptionalString("auth.environment")})})],lt=[(0,e.ni)(e.VE,new E),(0,e.ni)(e.E6,Ce.create())],qe={"kind:api":L.Z,"kind:component":L.Z,"kind:domain":L.Z,"kind:group":L.Z,"kind:location":L.Z,"kind:system":L.Z,"kind:user":L.Z,brokenImage:L.Z,catalog:L.Z,scaffolder:L.Z,techdocs:L.Z,search:L.Z,chat:L.Z,dashboard:L.Z,docs:L.Z,email:L.Z,github:L.Z,group:L.Z,help:L.Z,user:L.Z,warning:L.Z},$t=({error:le})=>{throw new Error(`Reached ErrorBoundaryFallback Page with error, ${le}`)},Ot=()=>{throw new Error("Reached NotFound Page")},pn=({step:le,error:Q})=>{throw new Error(`Reached BootError Page at step ${le} with error ${Q}`)},_n=()=>React.createElement("div",{"data-testid":"progress"});function U(le){return String(le).includes("{type=external,")}function Re(le,Q={}){var xe;const{routeEntries:at=["/"]}=Q,Zt=new Map,Dt=createSpecializedApp({apis:lt,defaultApis:it,configLoader:!1,components:{Progress:_n,BootErrorPage:pn,NotFoundErrorPage:Ot,ErrorBoundaryFallback:$t,Router:({children:Y})=>React.createElement(MemoryRouter,{initialEntries:at,children:Y})},icons:qe,plugins:[],themes:[{id:"light",title:"Test App Theme",variant:"light",Provider:({children:Y})=>React.createElement(ThemeProvider,{theme:lightTheme},React.createElement(CssBaseline,null,Y))}],bindRoutes:({bind:Y})=>{for(const[ce,_e]of Zt)Y({ref:ce},{ref:_e})}});let en;le instanceof Function?en=React.createElement(le,null):en=le;const on=Object.entries((xe=Q.mountedRoutes)!=null?xe:{}).map(([Y,ce])=>{const _e=()=>React.createElement("div",null,"Mounted at ",Y);if(U(ce)){const Ze=createRouteRef({id:"id"});Zt.set(ce,Ze),attachComponentData(_e,"core.mountPoint",Ze)}else attachComponentData(_e,"core.mountPoint",ce);return React.createElement(Route,{key:Y,path:Y,element:React.createElement(_e,null)})}),gn=Dt.getProvider(),Ye=Dt.getRouter();return React.createElement(gn,null,React.createElement(Ye,null,on,React.createElement(Route,{path:"*",element:en})))}async function w(le,Q={}){return Qe(Re(le,Q))}function Ie(le){beforeAll(()=>le.listen({onUnhandledRequest:"error"})),afterAll(()=>le.close()),afterEach(()=>le.resetHandlers())}const fe=null;function A(le,Q){const xe=!Q,at=xe?le:Q,Zt=xe?fe:le,Dt={log:new Array,warn:new Array,error:new Array},en=console.log,on=console.warn,gn=console.error;Zt.includes("log")&&(console.log=Y=>{Dt.log.push(Y)}),Zt.includes("warn")&&(console.warn=Y=>{Dt.warn.push(Y)}),Zt.includes("error")&&(console.error=Y=>{Dt.error.push(Y)});const Ye=()=>{console.log=en,console.warn=on,console.error=gn};try{const Y=at();return!Y||!Y.then?(Ye(),Dt):Y.then(()=>(Ye(),Dt),ce=>{throw Ye(),ce})}catch(Y){throw Ye(),Y}}class H{constructor(Q){this.apis=Q}static from(...Q){return new H(new Map(Q.map(([xe,at])=>[xe.id,at])))}get(Q){return this.apis.get(Q.id)}}const re=le=>React.createElement(ApiProvider,{apis:H.from(...le.apis),children:le.children}),Pe=(0,e.T0)({id:"plugin.search.queryservice"}),ae=(0,n.CT)("search-context"),Te=()=>{const le=(0,p.useContext)(ae);if(!le)throw new Error("useSearch must be used within a SearchContextProvider");const Q=le.atVersion(1);if(!Q)throw new Error("No SearchContext v1 found");return Q},Et={term:"",pageCursor:void 0,filters:{},types:[]},te=le=>{var Q,xe,at,Zt;const{initialState:Dt=Et,children:en}=le,on=(0,e.h_)(Pe),[gn,Ye]=(0,p.useState)(Dt.pageCursor),[Y,ce]=(0,p.useState)(Dt.filters),[_e,Ze]=(0,p.useState)(Dt.term),[ie,de]=(0,p.useState)(Dt.types),ve=(0,o.Z)(_e),ge=(0,a.default)(()=>on.query({term:_e,filters:Y,pageCursor:gn,types:ie}),[_e,Y,ie,gn]),nt=!ge.loading&&!ge.error&&((Q=ge.value)==null?void 0:Q.nextPageCursor),bt=!ge.loading&&!ge.error&&((xe=ge.value)==null?void 0:xe.previousPageCursor),kt=(0,p.useCallback)(()=>{var Gt;Ye((Gt=ge.value)==null?void 0:Gt.nextPageCursor)},[(at=ge.value)==null?void 0:at.nextPageCursor]),ln=(0,p.useCallback)(()=>{var Gt;Ye((Gt=ge.value)==null?void 0:Gt.previousPageCursor)},[(Zt=ge.value)==null?void 0:Zt.previousPageCursor]);(0,p.useEffect)(()=>{_e&&ve&&_e!==ve&&Ye(void 0)},[_e,ve,Dt.pageCursor]);const Ut={result:ge,filters:Y,setFilters:ce,term:_e,setTerm:Ze,types:ie,setTypes:de,pageCursor:gn,setPageCursor:Ye,fetchNextPage:nt?kt:void 0,fetchPreviousPage:bt?ln:void 0},Mt=(0,n.EI)({1:Ut});return p.createElement(e.fC,{attributes:{searchTypes:ie.sort().join(",")}},p.createElement(ae.Provider,{value:Mt,children:en}))};function ee(le){const{mockedResults:Q,children:xe}=le,at=()=>Promise.resolve(Q||{}),Zt=TestApiRegistry.from([Pe,{query:at}]);return React.createElement(ApiProvider,{apis:Zt,children:xe})}const Le=le=>React.createElement(ee,{...le},React.createElement(te,{children:le.children}))},64514:function(Lt,c,t){t.d(c,{D:function(){return _t},S:function(){return De},a:function(){return kt},b:function(){return bt},c:function(){return tn},d:function(){return F},f:function(){return Me},i:function(){return Kt},k:function(){return Wt},m:function(){return Ge},o:function(){return dt},p:function(){return It},r:function(){return Bn},u:function(){return q}});var e=t(2784),n=t(36444),p=t(79692),a=t(50581),o=t(61837),m=t(74603),u=t(86619),v=t(7089),d=t(42494),y=t(84899),h=t(5806),M=t(21324),L=t(56939),$=t(73698),J=t(12231),g=t(38402),S=t(86136),E=t(49378),I=t(95544),D=t(85256),T=t(77277),i=t(60364),O=t(79249),W=t(27556),Ce=t(38724),$e=t(60905),Qe=t(11776),it=t(49429),lt=t(8629),qe=t(90436),$t=t(94339),Ot=t(32552),pn=t(24579),_n=t(27616),U=t(8284),Re=t(70660),w=t(99152),Ie=t(6487),fe=t(48760),A=t(30705),H=t(21853),re=t(33375),Pe=t(97592),ae=t(88013),Te=t(99688),Et=t(69294),te=t(69001),ee=t(49558),Le=t(15277),le=t.n(Le),Q=t(35352),xe=t(27742),at=t(32272),Zt=t(19126),Dt=t.n(Zt),en=t(25557),on=t(10289),gn=t(64279),Ye=t(73495),Y=t(34520),ce=t(62155),_e=t(38016),Ze=t(56881);const ie=(0,p.Z)(se=>({filters:{width:"250px",display:"flex"},icon:{margin:se.spacing(-1,0,0,0)}})),de=({numberOfSelectedFilters:se,handleToggleFilters:ke})=>{const ot=ie();return React.createElement("div",{className:ot.filters},React.createElement(IconButton,{className:ot.icon,"aria-label":"settings",onClick:ke},React.createElement(FilterListIcon,null)),React.createElement(Typography,{variant:"h6"},"Filters (",se||0,")"))},ve=(0,p.Z)(se=>({filters:{background:"transparent",boxShadow:"0px 0px 0px 0px"},checkbox:{padding:se.spacing(0,1,0,1)},dropdown:{width:"100%"}})),ge=({filters:se,filterOptions:ke,resetFilters:ot,updateSelected:wt,updateChecked:Fe})=>{const ft=ve();return React.createElement(Card,{className:ft.filters},React.createElement(CardHeader,{title:React.createElement(Typography,{variant:"h6"},"Filters"),action:React.createElement(Button,{color:"primary",onClick:()=>ot()},"CLEAR ALL")}),React.createElement(Divider,null),ke.kind.length===0&&ke.lifecycle.length===0&&React.createElement(CardContent,null,React.createElement(Typography,{variant:"subtitle2"},"Filters cannot be applied to available results")),ke.kind.length>0&&React.createElement(CardContent,null,React.createElement(Typography,{variant:"subtitle2"},"Kind"),React.createElement(Select,{id:"outlined-select",onChange:K=>{var l;return wt((l=K==null?void 0:K.target)==null?void 0:l.value)},variant:"outlined",className:ft.dropdown,value:se.selected},ke.kind.map(K=>React.createElement(MenuItem,{selected:K==="",dense:!0,key:K,value:K},K)))),ke.lifecycle.length>0&&React.createElement(CardContent,null,React.createElement(Typography,{variant:"subtitle2"},"Lifecycle"),React.createElement(List,{disablePadding:!0,dense:!0},ke.lifecycle.map(K=>React.createElement(ListItem,{key:K,dense:!0,button:!0,onClick:()=>Fe(K)},React.createElement(Checkbox,{edge:"start",disableRipple:!0,className:ft.checkbox,color:"primary",checked:se.checked.includes(K),tabIndex:-1,value:K,name:K}),React.createElement(ListItemText,{id:K,primary:K}))))))},nt=({children:se})=>{const ke=(0,A.z$)(),{term:ot}=(0,Pe.Rx)();return(0,e.useEffect)(()=>{ot&&ke.captureEvent("search",ot)},[ke,ot]),e.createElement(e.Fragment,null,se)},bt=({onChange:se,onKeyDown:ke,onSubmit:ot,debounceTime:wt=200,clearButton:Fe=!0,fullWidth:ft=!0,value:K,inputProps:l={},endAdornment:b,...x})=>{const G=(0,A.h_)(A.Ds),[Ae,rt]=(0,e.useState)(K),ut=(0,Pe.Rx)();(0,e.useEffect)(()=>{rt(wn=>wn!==K?K:wn)},[K]),(0,fe.Z)(()=>se(Ae),wt,[Ae]);const yt=(0,e.useCallback)(wn=>{rt(wn.target.value)},[rt]),Vt=(0,e.useCallback)(wn=>{ke&&ke(wn),ot&&wn.key==="Enter"&&ot()},[ke,ot]),Ft=(0,e.useCallback)(()=>{se("")},[se]),On=`Search in ${G.getOptionalString("app.title")||"Backstage"}`,yn=e.createElement(a.Z,{position:"start"},e.createElement(o.Z,{"aria-label":"Query",disabled:!0},e.createElement(H.Z,null))),Mn=e.createElement(a.Z,{position:"end"},e.createElement(o.Z,{"aria-label":"Clear",onClick:Ft},e.createElement(re.Z,null))),jn=e.createElement(nt,null,e.createElement(m.Z,{"data-testid":"search-bar-next",value:Ae,placeholder:On,startAdornment:yn,endAdornment:Fe?Mn:b,inputProps:{"aria-label":"Search",...l},fullWidth:ft,onChange:yt,onKeyDown:Vt,...x}));return ut?jn:e.createElement(Pe.Nd,null,jn)},kt=({onChange:se,...ke})=>{const{term:ot,setTerm:wt}=(0,Pe.Rx)(),Fe=(0,e.useCallback)(ft=>{se?se(ft):wt(ft)},[se,wt]);return e.createElement(bt,{value:ot,onChange:Fe,...ke})},ln=(se,ke,ot=[],wt=250)=>{const Fe=(0,e.useRef)({}),ft=se||(()=>Promise.resolve([])),[K,l]=(0,Et.default)(ft,[ke],{loading:!0});if((0,fe.Z)(()=>{Fe.current[ke]===void 0&&(Fe.current[ke]=l(ke).then(x=>(Fe.current[ke]=x,x)))},wt,[l,ke]),ot.length)return{loading:!1,value:ot};const b=Fe.current[ke];return Array.isArray(b)?{loading:!1,value:b}:K},Ut=(se,ke)=>{const{setFilters:ot}=(0,Pe.Rx)();(0,e.useEffect)(()=>{ke&&[ke].flat().length>0&&ot(wt=>({...wt,[se]:ke}))},[])},Mt=se=>{const{className:ke,defaultValue:ot,name:wt,values:Fe,valuesDebounceMs:ft,label:K,filterSelectedOptions:l,limitTags:b,multiple:x}=se,[G,Ae]=(0,e.useState)("");Ut(wt,ot);const rt=typeof Fe=="function"?Fe:void 0,ut=typeof Fe=="function"?void 0:Fe,{value:yt,loading:Vt}=ln(rt,G,ut,ft),{filters:Ft,setFilters:On}=(0,Pe.Rx)(),yn=Ft[wt]||(x?[]:null),Mn=(sr,Jn)=>{On(Or=>{const{[wt]:Ct,...Ve}=Or;return Jn?{...Ve,[wt]:Jn}:{...Ve}})},jn=sr=>e.createElement(u.Z,{...sr,name:"search",variant:"outlined",label:K,fullWidth:!0}),wn=(sr,Jn)=>sr.map((Or,Ct)=>e.createElement(v.Z,{label:Or,color:"primary",...Jn({index:Ct})}));return e.createElement(ae.ZP,{filterSelectedOptions:l,limitTags:b,multiple:x,className:ke,id:`${x?"multi-":""}select-filter-${wt}--select`,options:yt||[],loading:Vt,value:yn,onChange:Mn,onInputChange:(sr,Jn)=>Ae(Jn),renderInput:jn,renderTags:wn})},Gt=(0,p.Z)({label:{textTransform:"capitalize"}}),bn=se=>{const{className:ke,defaultValue:ot,label:wt,name:Fe,values:ft=[],valuesDebounceMs:K}=se,l=Gt(),{filters:b,setFilters:x}=(0,Pe.Rx)();Ut(Fe,ot);const G=typeof ft=="function"?ft:void 0,Ae=typeof ft=="function"?void 0:ft,{value:rt=[],loading:ut}=ln(G,"",Ae,K),yt=Vt=>{const{target:{value:Ft,checked:On}}=Vt;x(yn=>{const{[Fe]:Mn,...jn}=yn,wn=(Mn||[]).filter(Jn=>Jn!==Ft),sr=On?[...wn,Ft]:wn;return sr.length?{...jn,[Fe]:sr}:jn})};return e.createElement(d.Z,{className:ke,disabled:ut,fullWidth:!0,"data-testid":"search-checkboxfilter-next"},wt?e.createElement(y.Z,{className:l.label},wt):null,rt.map(Vt=>{var Ft;return e.createElement(h.Z,{key:Vt,control:e.createElement(M.Z,{color:"primary",tabIndex:-1,inputProps:{"aria-labelledby":Vt},value:Vt,name:Vt,onChange:yt,checked:((Ft=b[Fe])!=null?Ft:[]).includes(Vt)}),label:Vt})}))},vn=se=>{const{className:ke,defaultValue:ot,label:wt,name:Fe,values:ft,valuesDebounceMs:K}=se,l=Gt();Ut(Fe,ot);const b=typeof ft=="function"?ft:void 0,x=typeof ft=="function"?void 0:ft,{value:G=[],loading:Ae}=ln(b,"",x,K),{filters:rt,setFilters:ut}=(0,Pe.Rx)(),yt=Vt=>{const{target:{value:Ft}}=Vt;ut(On=>{const{[Fe]:yn,...Mn}=On;return Ft?{...Mn,[Fe]:Ft}:Mn})};return e.createElement(d.Z,{disabled:Ae,className:ke,variant:"filled",fullWidth:!0,"data-testid":"search-selectfilter-next"},wt?e.createElement(L.Z,{className:l.label,margin:"dense"},wt):null,e.createElement($.Z,{variant:"outlined",value:rt[Fe]||"",onChange:yt},e.createElement(J.Z,{value:""},e.createElement("em",null,"All")),G.map(Vt=>e.createElement(J.Z,{key:Vt,value:Vt},Vt))))},Me=({component:se,...ke})=>e.createElement(se,{...ke});Me.Checkbox=se=>e.createElement(Me,{...se,component:bn}),Me.Select=se=>e.createElement(Me,{...se,component:vn}),Me.Autocomplete=se=>e.createElement(Me,{...se,component:Mt});const ht=null,_t=({result:se,icon:ke,secondaryAction:ot,lineClamp:wt=5})=>e.createElement(ee.rU,{to:se.location},e.createElement(g.Z,{alignItems:"center"},ke&&e.createElement(S.Z,null,ke),e.createElement(E.Z,{primaryTypographyProps:{variant:"h6"},primary:se.title,secondary:e.createElement(le(),{line:wt,truncateText:"\u2026",text:se.text,element:"span"})}),ot&&e.createElement(I.Z,{alignItems:"flex-end"},ot)),e.createElement(D.Z,null)),tn=({children:se})=>{const{result:{loading:ke,error:ot,value:wt}}=(0,Pe.Rx)();return ke?e.createElement(ee.Ex,null):ot?e.createElement(ee.Gk,{title:"Error encountered while fetching search results",error:ot}):wt!=null&&wt.results.length?e.createElement(e.Fragment,null,se({results:wt.results})):e.createElement(ee.ub,{missing:"data",title:"Sorry, no results were found"})},Bt=(0,p.Z)(se=>({root:{display:"flex",justifyContent:"space-between",gap:se.spacing(2),margin:se.spacing(2,0)}})),hn=()=>{const{fetchNextPage:se,fetchPreviousPage:ke}=(0,Pe.Rx)(),ot=Bt();return!se&&!ke?e.createElement(e.Fragment,null):e.createElement("nav",{"arial-label":"pagination navigation",className:ot.root},e.createElement(T.Z,{"aria-label":"previous page",disabled:!ke,onClick:ke,startIcon:e.createElement(Q.Z,null)},"Previous"),e.createElement(T.Z,{"aria-label":"next page",disabled:!se,onClick:se,endIcon:e.createElement(xe.Z,null)},"Next"))};class kn{constructor(ke){this.discoveryApi=ke.discoveryApi,this.identityApi=ke.identityApi}async query(ke){const{token:ot}=await this.identityApi.getCredentials(),wt=Dt().stringify(ke),Fe=`${await this.discoveryApi.getBaseUrl("search/query")}?${wt}`,ft=await fetch(Fe,{headers:ot?{Authorization:`Bearer ${ot}`}:{}});if(!ft.ok)throw await at.VL.fromResponse(ft);return ft.json()}}const Bn=(0,A.NT)({id:"search"}),Un=(0,A.NT)({id:"search:next"}),An=(0,A.rx)({id:"search",apis:[(0,A.ni)({api:Pe.gK,deps:{discoveryApi:A.NW,identityApi:A.$4},factory:({discoveryApi:se,identityApi:ke})=>new kn({discoveryApi:se,identityApi:ke})})],routes:{root:Bn,nextRoot:Un}}),Ge=An.provide((0,A.P4)({name:"SearchPage",component:()=>t.e(2905).then(t.bind(t,62905)).then(se=>se.SearchPage),mountPoint:Bn})),Je=An.provide((0,A.P4)({name:"SearchPageNext",component:()=>t.e(2905).then(t.bind(t,62905)).then(se=>se.SearchPage),mountPoint:Un}));An.provide((0,A.CO)({name:"SearchBar",component:{lazy:()=>t.e(3956).then(t.bind(t,3956)).then(se=>se.SearchBar)}}));const mt=An.provide((0,A.CO)({name:"SearchBarNext",component:{lazy:()=>t.e(3956).then(t.bind(t,3956)).then(se=>se.SearchBar)}})),dt=An.provide((0,A.CO)({name:"SearchResult",component:{lazy:()=>t.e(1040).then(t.bind(t,91040)).then(se=>se.SearchResult)}}));An.provide((0,A.CO)({name:"SearchResultNext",component:{lazy:()=>t.e(1040).then(t.bind(t,91040)).then(se=>se.SearchResult)}}));const It=An.provide((0,A.CO)({name:"SidebarSearchModal",component:{lazy:()=>t.e(284).then(t.bind(t,50284)).then(se=>se.SidebarSearchModal)}})),Wt=An.provide((0,A.CO)({name:"DefaultResultListItem",component:{lazy:()=>t.e(4624).then(t.bind(t,4624)).then(se=>se.DefaultResultListItem)}})),Jt=An.provide((0,A.CO)({name:"HomePageSearchBar",component:{lazy:()=>t.e(5861).then(t.bind(t,25861)).then(se=>se.HomePageSearchBar)}})),xt=(0,p.Z)(se=>({container:{borderRadius:30,display:"flex",height:"2.4em"},input:{flex:1},paperFullWidth:{height:"calc(100% - 128px)"},dialogActionsContainer:{padding:se.spacing(1,3)},viewResultsLink:{verticalAlign:"0.5em"}})),N=({toggleModal:se})=>{const ke=(0,A.tg)(Bn),ot=xt(),{term:wt}=(0,Pe.Rx)(),{focusContent:Fe}=(0,ee.r0)(),{transitions:ft}=(0,i.Z)(),K=()=>{se(),setTimeout(Fe,ft.duration.leavingScreen)},l=()=>{K()};return e.createElement(e.Fragment,null,e.createElement(O.Z,null,e.createElement(W.Z,{className:ot.container},e.createElement(kt,{className:ot.input}))),e.createElement(Ce.Z,null,e.createElement($e.Z,{container:!0,direction:"row-reverse",justifyContent:"flex-start",alignItems:"center"},e.createElement($e.Z,{item:!0},e.createElement(ee.rU,{onClick:()=>{se(),setTimeout(Fe,ft.duration.leavingScreen)},to:`${ke()}?query=${wt}`},e.createElement("span",{className:ot.viewResultsLink},"View Full Results"),e.createElement(te.Z,{color:"primary"})))),e.createElement(D.Z,null),e.createElement(tn,null,({results:b})=>e.createElement(Qe.Z,null,b.map(({document:x})=>e.createElement("div",{role:"button",tabIndex:0,key:`${x.location}-btn`,onClick:K,onKeyPress:l},e.createElement(_t,{key:x.location,result:x})))))),e.createElement(it.Z,{className:ot.dialogActionsContainer},e.createElement($e.Z,{container:!0,direction:"row"},e.createElement($e.Z,{item:!0,xs:12},e.createElement(hn,null)))))},F=({open:se=!0,hidden:ke,toggleModal:ot,children:wt})=>{var Fe;const ft=xt();return e.createElement(lt.Z,{classes:{paperFullWidth:ft.paperFullWidth},onClose:ot,"aria-labelledby":"search-modal-title",fullWidth:!0,maxWidth:"lg",open:se,hidden:ke},se&&e.createElement(Pe.Nd,null,(Fe=wt&&wt({toggleModal:ot}))!=null?Fe:e.createElement(N,{toggleModal:ot})))};function q(se=!1){const[ke,ot]=(0,e.useState)({hidden:!se,open:se}),wt=(0,e.useCallback)(()=>ot(ft=>({open:!0,hidden:!ft.hidden})),[]),Fe=(0,e.useCallback)(ft=>ot(K=>({open:K.open||ft,hidden:!ft})),[]);return{state:ke,toggleModal:wt,setOpen:Fe}}const ye=(0,p.Z)(()=>({root:{display:"flex",alignItems:"center"},input:{flex:1}})),Se=({searchQuery:se,handleSearch:ke,handleClearSearchBar:ot})=>{const wt=ye();return e.createElement(W.Z,{component:"form",onSubmit:Fe=>ke(Fe),className:wt.root},e.createElement(o.Z,{disabled:!0,type:"submit","aria-label":"search"},e.createElement(H.Z,null)),e.createElement(m.Z,{className:wt.input,placeholder:"Search in Backstage",value:se,onChange:Fe=>ke(Fe),inputProps:{"aria-label":"search backstage"}}),e.createElement(o.Z,{"aria-label":"search",onClick:()=>ot()},e.createElement(re.Z,null)))},vt=(0,p.Z)(se=>({filters:{width:"250px",display:"flex"},icon:{margin:se.spacing(-1,0,0,0)}})),Rt=({numberOfSelectedFilters:se,handleToggleFilters:ke})=>{const ot=vt();return e.createElement("div",{className:ot.filters},e.createElement(o.Z,{className:ot.icon,"aria-label":"settings",onClick:ke},e.createElement(n.Z,null)),e.createElement(qe.Z,{variant:"h6"},"Filters (",se||0,")"))},Nt=(0,p.Z)(se=>({filters:{background:"transparent",boxShadow:"0px 0px 0px 0px"},checkbox:{padding:se.spacing(0,1,0,1)},dropdown:{width:"100%"}})),zt=({filters:se,filterOptions:ke,resetFilters:ot,updateSelected:wt,updateChecked:Fe})=>{const ft=Nt();return e.createElement($t.Z,{className:ft.filters},e.createElement(Ot.Z,{title:e.createElement(qe.Z,{variant:"h6"},"Filters"),action:e.createElement(T.Z,{color:"primary",onClick:()=>ot()},"CLEAR ALL")}),e.createElement(D.Z,null),ke.kind.length===0&&ke.lifecycle.length===0&&e.createElement(pn.Z,null,e.createElement(qe.Z,{variant:"subtitle2"},"Filters cannot be applied to available results")),ke.kind.length>0&&e.createElement(pn.Z,null,e.createElement(qe.Z,{variant:"subtitle2"},"Kind"),e.createElement($.Z,{id:"outlined-select",onChange:K=>{var l;return wt((l=K==null?void 0:K.target)==null?void 0:l.value)},variant:"outlined",className:ft.dropdown,value:se.selected},ke.kind.map(K=>e.createElement(J.Z,{selected:K==="",dense:!0,key:K,value:K},K)))),ke.lifecycle.length>0&&e.createElement(pn.Z,null,e.createElement(qe.Z,{variant:"subtitle2"},"Lifecycle"),e.createElement(Qe.Z,{disablePadding:!0,dense:!0},ke.lifecycle.map(K=>e.createElement(g.Z,{key:K,dense:!0,button:!0,onClick:()=>Fe(K)},e.createElement(M.Z,{edge:"start",disableRipple:!0,className:ft.checkbox,color:"primary",checked:se.checked.includes(K),tabIndex:-1,value:K,name:K}),e.createElement(E.Z,{id:K,primary:K}))))))},xn=(0,p.Z)(se=>({searchQuery:{color:se.palette.text.primary,background:se.palette.background.default,borderRadius:"10%"},tableHeader:{margin:se.spacing(1,0,0,0),display:"flex"},divider:{width:"1px",margin:se.spacing(0,2),padding:se.spacing(2,0)}})),zn=[{title:"Name",field:"name",highlight:!0,render:se=>e.createElement(ee.rU,{to:se.url||""},se.name)},{title:"Description",field:"description"},{title:"Owner",field:"owner"},{title:"Kind",field:"kind"},{title:"LifeCycle",field:"lifecycle"}],st=({searchQuery:se,numberOfSelectedFilters:ke,numberOfResults:ot,handleToggleFilters:wt})=>{const Fe=xn();return e.createElement("div",{className:Fe.tableHeader},e.createElement(Rt,{numberOfSelectedFilters:ke,handleToggleFilters:wt}),e.createElement(D.Z,{className:Fe.divider,orientation:"vertical"}),e.createElement($e.Z,{item:!0,xs:12},se?e.createElement(qe.Z,{variant:"h6"},`${ot} `,ot>1?"results for ":"result for ",e.createElement("span",{className:Fe.searchQuery},'"',se,'"')," "):e.createElement(qe.Z,{variant:"h6"},`${ot} results`)))},Ue=({searchQuery:se})=>{const ke=(0,A.h_)(Ye.Ah),[ot,wt]=(0,e.useState)(!1),[Fe,ft]=(0,e.useState)({selected:"",checked:[]}),[K,l]=(0,e.useState)([]),{loading:b,error:x,value:G}=(0,gn.default)(async()=>(await ke.getEntities()).items.map(Ft=>{var On,yn,Mn,jn,wn;return{name:Ft.metadata.name,description:Ft.metadata.description,owner:typeof((On=Ft.spec)==null?void 0:On.owner)=="string"?(yn=Ft.spec)==null?void 0:yn.owner:void 0,kind:Ft.kind,lifecycle:typeof((Mn=Ft.spec)==null?void 0:Mn.lifecycle)=="string"?(jn=Ft.spec)==null?void 0:jn.lifecycle:void 0,url:`/catalog/${((wn=Ft.metadata.namespace)==null?void 0:wn.toLocaleLowerCase("en-US"))||Y.zG}/${Ft.kind.toLocaleLowerCase("en-US")}/${Ft.metadata.name}`}}),[]);if((0,e.useEffect)(()=>{if(G){let Vt=G;Fe.selected!==""&&(Vt=G.filter(Ft=>Fe.selected.includes(Ft.kind))),Fe.checked.length>0&&(Vt=Vt.filter(Ft=>Ft.lifecycle&&Fe.checked.includes(Ft.lifecycle))),se&&(Vt=Vt.filter(Ft=>{var On,yn,Mn;return((On=Ft.name)==null?void 0:On.toLocaleLowerCase("en-US").includes(se))||((yn=Ft.name)==null?void 0:yn.toLocaleLowerCase("en-US").includes(se.split(" ").join("-")))||((Mn=Ft.description)==null?void 0:Mn.toLocaleLowerCase("en-US").includes(se))})),l(Vt)}},[Fe,se,G]),b)return e.createElement(ee.Ex,null);if(x)return e.createElement(Te.Z,{severity:"error"},"Error encountered while fetching search results. ",x.toString());if(!G||G.length===0)return e.createElement(ee.ub,{missing:"data",title:"Sorry, no results were found"});const Ae=()=>{ft({selected:"",checked:[]})},rt=Vt=>{ft(Ft=>({...Ft,selected:Vt}))},ut=Vt=>{if(Fe.checked.includes(Vt)){ft(Ft=>({...Ft,checked:Ft.checked.filter(On=>On!==Vt)}));return}ft(Ft=>({...Ft,checked:[...Ft.checked,Vt]}))},yt=G.reduce((Vt,Ft)=>(Ft.kind&&Vt.kind.indexOf(Ft.kind)<0&&Vt.kind.push(Ft.kind),Ft.lifecycle&&Vt.lifecycle.indexOf(Ft.lifecycle)<0&&Vt.lifecycle.push(Ft.lifecycle),Vt),{kind:[],lifecycle:[]});return e.createElement(e.Fragment,null,e.createElement($e.Z,{container:!0},ot&&e.createElement($e.Z,{item:!0,xs:3},e.createElement(zt,{filters:Fe,filterOptions:yt,resetFilters:Ae,updateSelected:rt,updateChecked:ut})),e.createElement($e.Z,{item:!0,xs:ot?9:12},e.createElement(ee.iA,{options:{paging:!0,pageSize:20,search:!1},data:K,columns:zn,title:e.createElement(st,{searchQuery:se,numberOfResults:K.length,numberOfSelectedFilters:(Fe.selected!==""?1:0)+Fe.checked.length,handleToggleFilters:()=>wt(!ot)})}))))},oe=()=>{const[se,ke]=(0,ee.tA)("query"),[ot,wt]=(0,e.useState)(se!=null?se:""),Fe=K=>{K.preventDefault(),wt(K.target.value)};(0,e.useEffect)(()=>wt(se!=null?se:""),[se]),(0,fe.Z)(()=>{ke(ot)},200,[ot]);const ft=()=>{wt("")};return e.createElement(ee.T3,{themeId:"home"},e.createElement(ee.h4,{title:"Search"}),e.createElement(ee.VY,null,e.createElement($e.Z,{container:!0,direction:"row"},e.createElement($e.Z,{item:!0,xs:12},e.createElement(Se,{handleSearch:Fe,handleClearSearchBar:ft,searchQuery:ot})),e.createElement($e.Z,{item:!0,xs:12},e.createElement(Ue,{searchQuery:(se!=null?se:"").toLocaleLowerCase("en-US")})))))},he=()=>{const se=(0,on.TH)(),{term:ke,setTerm:ot,types:wt,setTypes:Fe,pageCursor:ft,setPageCursor:K,filters:l,setFilters:b}=(0,Pe.Rx)(),x=(0,en.Z)(se.search);return(0,e.useEffect)(()=>{if(se.search===x)return;const G=Dt().parse(se.search.substring(1),{arrayLimit:0})||{};G.filters&&b(G.filters),G.query&&ot(G.query),G.pageCursor&&K(G.pageCursor),G.types&&Fe(G.types)},[x,se,ot,Fe,K,b]),(0,e.useEffect)(()=>{const G=Dt().stringify({query:ke,types:wt,pageCursor:ft,filters:l},{arrayFormat:"brackets"}),Ae=`${window.location.pathname}?${G}`;window.history.replaceState(null,document.title,Ae)},[ke,wt,ft,l]),null},De=()=>{const se=(0,on.pC)();return e.createElement(Pe.Nd,null,e.createElement(he,null),se||e.createElement(oe,null))},we=(0,p.Z)(se=>({card:{backgroundColor:"rgba(0, 0, 0, .11)"},cardContent:{paddingTop:se.spacing(1)},icon:{color:se.palette.common.black},list:{width:"100%"},listItemIcon:{width:"24px",height:"24px"},accordion:{backgroundColor:se.palette.background.paper},accordionSummary:{minHeight:"auto","&.Mui-expanded":{minHeight:"auto"}},accordionSummaryContent:{margin:se.spacing(2,0),"&.Mui-expanded":{margin:se.spacing(2,0)}},accordionDetails:{padding:se.spacing(0,0,1)}})),Ne=se=>{const ke=we(),{setPageCursor:ot,setTypes:wt,types:Fe}=(0,Pe.Rx)(),[ft,K]=(0,e.useState)(!0),{defaultValue:l,name:b,types:x}=se,G=()=>K(yt=>!yt),Ae=yt=>()=>{wt(yt!==""?[yt]:[]),ot(void 0),K(!1)};(0,e.useEffect)(()=>{l&&wt([l])},[]);const rt=[{value:"",name:"All",icon:e.createElement(Ze.Z,null)},...x],ut=Fe[0]||"";return e.createElement($t.Z,{className:ke.card},e.createElement(Ot.Z,{title:b,titleTypographyProps:{variant:"overline"}}),e.createElement(pn.Z,{className:ke.cardContent},e.createElement(_n.Z,{className:ke.accordion,expanded:ft,onChange:G},e.createElement(U.Z,{classes:{root:ke.accordionSummary,content:ke.accordionSummaryContent},expandIcon:e.createElement(_e.Z,{className:ke.icon}),IconButtonProps:{size:"small"}},ft?"Collapse":rt.filter(yt=>yt.value===ut)[0].name),e.createElement(Re.Z,{classes:{root:ke.accordionDetails}},e.createElement(Qe.Z,{className:ke.list,component:"nav","aria-label":"filter by type",disablePadding:!0,dense:!0},rt.map(yt=>e.createElement(e.Fragment,{key:yt.value},e.createElement(D.Z,null),e.createElement(g.Z,{selected:Fe[0]===yt.value||Fe.length===0&&yt.value==="",onClick:Ae(yt.value),button:!0},e.createElement(S.Z,null,(0,e.cloneElement)(yt.icon,{className:ke.listItemIcon})),e.createElement(E.Z,{primary:yt.name})))))))))},Ke=(0,p.Z)(se=>({tabs:{borderBottom:`1px solid ${se.palette.textVerySubtle}`,padding:se.spacing(0,4)},tab:{height:"50px",fontWeight:se.typography.fontWeightBold,fontSize:se.typography.pxToRem(13),color:se.palette.textSubtle,minWidth:"130px"}})),Be=se=>{const ke=Ke(),{setPageCursor:ot,setTypes:wt,types:Fe}=(0,Pe.Rx)(),{defaultValue:ft,types:K}=se,l=(x,G)=>{wt(G!==""?[G]:[]),ot(void 0)};(0,e.useEffect)(()=>{ft&&wt([ft])},[]);const b=[{value:"",name:"All"},...K];return e.createElement(w.Z,{className:ke.tabs,indicatorColor:"primary",value:Fe.length===0?"":Fe[0],onChange:l},b.map((x,G)=>e.createElement(Ie.Z,{key:G,className:ke.tab,disableRipple:!0,label:x.name,value:x.value})))},ct=(0,p.Z)(se=>({label:{textTransform:"capitalize"},chips:{display:"flex",flexWrap:"wrap",marginTop:se.spacing(1)},chip:{margin:2}})),Kt=se=>{const{className:ke,defaultValue:ot,name:wt,values:Fe=[]}=se,ft=ct(),{types:K,setTypes:l}=(0,Pe.Rx)();(0,ce.Z)(()=>{K.length||(ot&&Array.isArray(ot)?l(ot):ot&&l([ot]))});const b=x=>{const G=x.target.value;l(G)};return e.createElement(d.Z,{className:ke,variant:"filled",fullWidth:!0,"data-testid":"search-typefilter-next"},e.createElement(L.Z,{className:ft.label,margin:"dense"},wt),e.createElement($.Z,{multiple:!0,variant:"outlined",value:K,onChange:b,placeholder:"All Results",renderValue:x=>e.createElement("div",{className:ft.chips},x.map(G=>e.createElement(v.Z,{key:G,label:G,className:ft.chip,size:"small"})))},Fe.map(x=>e.createElement(J.Z,{key:x,value:x},e.createElement(M.Z,{checked:K.indexOf(x)>-1}),e.createElement(E.Z,{primary:x})))))};Kt.Accordion=se=>e.createElement(Ne,{...se}),Kt.Tabs=se=>e.createElement(Be,{...se});const mn=se=>{const ke=useRouteRef(Bn),{focusContent:ot}=useContent(),wt=useNavigate(),Fe=useCallback(ft=>{const K=qs.stringify({query:ft},{addQueryPrefix:!0});ot(),wt(`${ke()}${K}`)},[ot,wt,ke]);return React.createElement(SidebarSearchField,{icon:se.icon,onSearch:Fe,to:"/search"})}},23778:function(Lt,c,t){t.d(c,{E1:function(){return e.a},Sc:function(){return e.i},YC:function(){return e.p},Z9:function(){return e.m},ay:function(){return e.f},lt:function(){return e.o},yu:function(){return e.k}});var e=t(64514),n=t(2784),p=t(30705),a=t(97592),o=t(49558),m=t(15277),u=t.n(m),v=t(32272),d=t(19126),y=t.n(d),h=t(73495),M=t(34520)},44741:function(Lt,c,t){t.d(c,{Wf:function(){return gn}});var e=t(49558),n=t(30705),p=t(2784),a=t(64279),o=t(79692),m=t(38724),u=t(49429),v=t(77277),d=t(29611),y=t(60905),h=t(8629),M=t(79249),L=t(35292),$=t(71346),J=t.n($),g=t(45469),S=t(52669);const E=(0,n.T0)({id:"plugin.techradar.service"});var I=(Y=>(Y[Y.Down=-1]="Down",Y[Y.NoChange=0]="NoChange",Y[Y.Up=1]="Up",Y))(I||{});const D=(0,o.Z)(Y=>({ring:{fill:"none",stroke:"#bbb",strokeWidth:"1px"},axis:{fill:"none",stroke:"#bbb",strokeWidth:"1px"},text:{pointerEvents:"none",userSelect:"none",fill:Y.palette.text.primary,fontSize:"25px",fontWeight:800}})),T=Y=>{const{radius:ce,rings:_e}=Y,Ze=D(Y),ie=(ge,nt)=>[p.createElement("circle",{key:`c${ge}`,cx:0,cy:0,r:nt,className:Ze.ring}),p.createElement("text",{key:`t${ge}`,y:nt!==void 0?-nt+42:void 0,textAnchor:"middle",className:Ze.text},_e[ge].name)],de=[p.createElement("line",{key:"x",x1:0,y1:-ce,x2:0,y2:ce,className:Ze.axis,"data-testid":"radar-grid-x-line"}),p.createElement("line",{key:"y",x1:-ce,y1:0,x2:ce,y2:0,className:Ze.axis,"data-testid":"radar-grid-y-line"})],ve=_e.map(ge=>ge.outerRadius).map((ge,nt)=>ie(nt,ge));return p.createElement(p.Fragment,null,de.concat(...ve))};function i(Y){return Boolean(Y&&Y!=="#"&&Y.length>0)}const O=({url:Y,className:ce,children:_e})=>i(Y)?p.createElement(e.rU,{className:ce,to:Y},_e):p.createElement(p.Fragment,null,_e),W=Y=>{const{open:ce,onClose:_e,title:Ze,description:ie,url:de}=Y;return p.createElement(h.Z,{"data-testid":"radar-description",open:ce,onClose:_e},p.createElement(M.Z,{"data-testid":"radar-description-dialog-title"},Ze),p.createElement(m.Z,{dividers:!0},p.createElement(e.SA,{content:ie})),i(de)&&p.createElement(u.Z,null,p.createElement(v.Z,{component:e.rU,to:de,onClick:_e,color:"primary",startIcon:p.createElement(L.Z,null)},"LEARN MORE")))},Ce=(0,o.Z)(()=>({text:{pointerEvents:"none",userSelect:"none",fontSize:"9px",fill:"#fff",textAnchor:"middle"},link:{cursor:"pointer"}})),$e=(Y,ce)=>{const _e={fill:Y};let Ze=p.createElement("circle",{r:9,style:_e});return ce&&ce>0?Ze=p.createElement("path",{d:"M -11,5 11,5 0,-13 z",style:_e}):ce&&ce<0&&(Ze=p.createElement("path",{d:"M -11,-5 11,-5 0,13 z",style:_e})),Ze},Qe=Y=>{const ce=Ce(Y),[_e,Ze]=p.useState(!1),{moved:ie,description:de,title:ve,color:ge,url:nt,value:bt,x:kt,y:ln,onMouseEnter:Ut,onMouseLeave:Mt,onClick:Gt}=Y,bn=$e(ge,ie),vn=()=>{Ze(!0)},Me=()=>{Ze(!1)},ht=()=>{Ze(!_e)};return p.createElement("g",{transform:`translate(${kt}, ${ln})`,onMouseEnter:Ut,onMouseLeave:Mt,onClick:Gt,"data-testid":"radar-entry"}," ",_e&&p.createElement(W,{open:_e,onClose:Me,title:ve||"no title",description:de||"no description",url:nt}),de?p.createElement("a",{className:ce.link,onClick:vn,role:"button",href:"#",tabIndex:0,onKeyPress:ht},bn):p.createElement(O,{url:nt,className:ce.link},bn),p.createElement("text",{y:3,className:ce.text},bt))},it=(0,o.Z)(()=>({bubble:{pointerEvents:"none",userSelect:"none",opacity:0},visibleBubble:{pointerEvents:"none",userSelect:"none",opacity:.8},background:{fill:"#333"},text:{pointerEvents:"none",userSelect:"none",fontSize:"10px",fill:"#fff"}})),lt=Y=>{const ce=it(Y),{visible:_e,text:Ze}=Y,ie=(0,p.useRef)(null),de=(0,p.useRef)(null),ve=(0,p.useRef)(null),ge=(0,p.useRef)(null),nt=()=>{if(ie.current){const{x:bt,y:kt}=Y,ln=ie.current.getBBox(),Ut=5,Mt=4;de.current&&de.current.setAttribute("transform",`translate(${bt-ln.width/2}, ${kt-ln.height-Mt})`),ve.current&&(ve.current.setAttribute("x",String(-Ut)),ve.current.setAttribute("y",String(-ln.height)),ve.current.setAttribute("width",String(ln.width+2*Ut)),ve.current.setAttribute("height",String(ln.height+Mt))),ge.current&&ge.current.setAttribute("transform",`translate(${ln.width/2-Ut}, ${Mt-1})`)}};return(0,p.useLayoutEffect)(()=>{nt()}),p.createElement("g",{ref:de,x:0,y:0,className:_e?ce.visibleBubble:ce.bubble,"data-testid":"radar-bubble"},p.createElement("rect",{ref:ve,rx:4,ry:4,className:ce.background}),p.createElement("text",{ref:ie,className:ce.text},Ze),p.createElement("path",{ref:ge,d:"M 0,0 10,0 5,8 z",className:ce.background}))},qe=(0,o.Z)(Y=>({text:{pointerEvents:"none",userSelect:"none",fontSize:"10px",fill:Y.palette.text.secondary}})),$t=Y=>{const{x:ce,y:_e}=Y,Ze=qe(Y);return p.createElement("text",{"data-testid":"radar-footer",transform:`translate(${ce}, ${_e})`,className:Ze.text},"\u25B2 moved up\xA0\xA0\xA0\xA0\xA0\u25BC moved down")},Ot=(0,o.Z)(Y=>({quadrantLegend:{overflowY:"auto",scrollbarWidth:"thin"},quadrant:{height:"100%",width:"100%",scrollbarWidth:"thin",pointerEvents:"none"},quadrantHeading:{pointerEvents:"none",userSelect:"none",marginTop:0,marginBottom:Y.spacing(2),fontSize:"18px"},rings:{columns:3},ring:{breakInside:"avoid-column",pageBreakInside:"avoid","-webkit-column-break-inside":"avoid",fontSize:"12px",marginBottom:Y.spacing(2)},ringEmpty:{color:Y.palette.text.secondary},ringHeading:{pointerEvents:"none",userSelect:"none",marginTop:0,marginBottom:Y.spacing(1),fontSize:"12px",fontWeight:800},ringList:{listStylePosition:"inside",marginTop:0,paddingLeft:0,fontVariantNumeric:"proportional-nums","-moz-font-feature-settings":"pnum","-webkit-font-feature-settings":"pnum","font-feature-settings":"pnum"},entry:{pointerEvents:"visiblePainted",userSelect:"none",fontSize:"11px"},entryLink:{pointerEvents:"visiblePainted"}})),pn=Y=>{const ce=Ot(Y),_e=(Mt,Gt,bn,vn=0)=>{const Me=Gt.index,ht=bn.index,_t=Me===void 0?{}:Mt[Me]||{};return ht===void 0?[]:_t[ht+vn]||[]},Ze=({url:Mt,description:Gt,title:bn})=>{const[vn,Me]=p.useState(!1),ht=()=>{Me(!0)},_t=()=>{Me(!1)},tn=()=>{Me(!vn)};return Gt?p.createElement(p.Fragment,null,p.createElement("span",{className:ce.entryLink,onClick:ht,role:"button",tabIndex:0,onKeyPress:tn},p.createElement("span",{className:ce.entry},bn)),vn&&p.createElement(W,{open:vn,onClose:_t,title:bn||"no title",url:Mt,description:Gt})):p.createElement(O,{url:Mt,className:ce.entryLink},p.createElement("span",{className:ce.entry},bn))},ie=({ring:Mt,entries:Gt,onEntryMouseEnter:bn,onEntryMouseLeave:vn})=>p.createElement("div",{"data-testid":"radar-ring",key:Mt.id,className:ce.ring},p.createElement("h3",{className:ce.ringHeading},Mt.name),Gt.length===0?p.createElement("p",{className:ce.ringEmpty},"(empty)"):p.createElement("ol",{className:ce.ringList},Gt.map(Me=>p.createElement("li",{key:Me.id,value:(Me.index||0)+1,onMouseEnter:bn&&(()=>bn(Me)),onMouseLeave:vn&&(()=>vn(Me))},p.createElement(Ze,{url:Me.url,title:Me.title,description:Me.description}))))),de=({segments:Mt,quadrant:Gt,rings:bn,onEntryMouseEnter:vn,onEntryMouseLeave:Me})=>p.createElement("foreignObject",{key:Gt.id,x:Gt.legendX,y:Gt.legendY,width:Gt.legendWidth,height:Gt.legendHeight,className:ce.quadrantLegend,"data-testid":"radar-quadrant"},p.createElement("div",{className:ce.quadrant},p.createElement("h2",{className:ce.quadrantHeading},Gt.name),p.createElement("div",{className:ce.rings},bn.map(ht=>p.createElement(ie,{key:ht.id,ring:ht,entries:_e(Mt,Gt,ht),onEntryMouseEnter:vn,onEntryMouseLeave:Me}))))),ve=Mt=>{const Gt={};for(const bn of Mt){const vn=bn.quadrant.index,Me=bn.ring.index;let ht={};vn!==void 0&&(Gt[vn]===void 0&&(Gt[vn]={}),ht=Gt[vn]);let _t=[];Me!==void 0&&(ht[Me]===void 0&&(ht[Me]=[]),_t=ht[Me]),_t.push(bn)}return Gt},{quadrants:ge,rings:nt,entries:bt,onEntryMouseEnter:kt,onEntryMouseLeave:ln}=Y,Ut=ve(bt);return p.createElement("g",{"data-testid":"radar-legend"},ge.map(Mt=>p.createElement(de,{key:Mt.id,segments:Ut,quadrant:Mt,rings:nt,onEntryMouseEnter:kt,onEntryMouseLeave:ln})))},_n=Y=>{const{width:ce,height:_e,radius:Ze,quadrants:ie,rings:de,entries:ve,activeEntry:ge,onEntryMouseEnter:nt,onEntryMouseLeave:bt}=Y;return p.createElement("g",{"data-testid":"radar-plot"},p.createElement(pn,{quadrants:ie,rings:de,entries:ve,onEntryMouseEnter:nt&&(kt=>nt(kt)),onEntryMouseLeave:bt&&(kt=>bt(kt))}),p.createElement("g",{transform:`translate(${ce/2}, ${_e/2})`},p.createElement(T,{radius:Ze,rings:de}),p.createElement($t,{x:-.5*ce,y:.5*_e}),ve.map(kt=>p.createElement(Qe,{key:kt.id,x:kt.x||0,y:kt.y||0,color:kt.color||"",value:((kt==null?void 0:kt.index)||0)+1,url:kt.url,description:kt.description,moved:kt.moved,title:kt.title,onMouseEnter:nt&&(()=>nt(kt)),onMouseLeave:bt&&(()=>bt(kt))})),p.createElement(lt,{visible:!!ge,text:(ge==null?void 0:ge.title)||"",x:(ge==null?void 0:ge.x)||0,y:(ge==null?void 0:ge.y)||0})))};class U{constructor(ce,_e,Ze,ie){this.nextSeed=ie,this.polarMin={t:ce.radialMin,r:_e.innerRadius},this.polarMax={t:ce.radialMax,r:_e.outerRadius},this.cartesianMin={x:15*ce.offsetX,y:15*ce.offsetY},this.cartesianMax={x:Ze*ce.offsetX,y:Ze*ce.offsetY}}clipx(ce){const _e=A(ce,this.cartesianMin,this.cartesianMax),Ze=fe(Re(_e),this.polarMin.r+15,this.polarMax.r-15);return ce.x=w(Ze).x,ce.x}clipy(ce){const _e=A(ce,this.cartesianMin,this.cartesianMax),Ze=fe(Re(_e),this.polarMin.r+15,this.polarMax.r-15);return ce.y=w(Ze).y,ce.y}random(){return w({t:this._randomBetween(this.polarMin.t,this.polarMax.t),r:this._normalBetween(this.polarMin.r,this.polarMax.r)})}_random(){const ce=Math.sin(this.nextSeed())*1e4;return ce-Math.floor(ce)}_randomBetween(ce,_e){return ce+this._random()*(_e-ce)}_normalBetween(ce,_e){return ce+(this._random()+this._random())*.5*(_e-ce)}}function Re({x:Y,y:ce}){return{t:Math.atan2(ce,Y),r:Math.sqrt(Y*Y+ce*ce)}}function w({r:Y,t:ce}){return{x:Y*Math.cos(ce),y:Y*Math.sin(ce)}}function Ie(Y,ce,_e){const Ze=Math.min(ce,_e),ie=Math.max(ce,_e);return Math.min(Math.max(Y,Ze),ie)}function fe(Y,ce,_e){return{t:Y.t,r:Ie(Y.r,ce,_e)}}function A(Y,ce,_e){return{x:Ie(Y.x,ce.x,_e.x),y:Ie(Y.y,ce.y,_e.y)}}const H=(Y,ce,_e,Ze)=>{const de=[16,_e/2-ce-16,_e/2+ce+16,_e-16],ve=[16,Ze/2-16,Ze/2,Ze-16],ge=[{x:de[2],y:ve[2],width:de[3]-de[2],height:ve[3]-ve[2]},{x:de[0],y:ve[2],width:de[1]-de[0],height:ve[3]-ve[2]},{x:de[0],y:ve[0],width:de[1]-de[0],height:ve[1]-ve[0]},{x:de[2],y:ve[0],width:de[3]-de[2],height:ve[1]-ve[0]}];Y.forEach((nt,bt)=>{const kt=ge[bt%4];nt.index=bt,nt.radialMin=bt*Math.PI/2,nt.radialMax=(bt+1)*Math.PI/2,nt.offsetX=bt%4===0||bt%4===3?1:-1,nt.offsetY=bt%4===0||bt%4===1?1:-1,nt.legendX=kt.x,nt.legendY=kt.y,nt.legendWidth=kt.width,nt.legendHeight=kt.height})},re=(Y,ce,_e,Ze,ie)=>{let de=42;Y.forEach((ge,nt)=>{const bt=ce.find(Ut=>{const Mt=typeof ge.quadrant=="object"?ge.quadrant.id:ge.quadrant;return Ut.id===Mt}),kt=_e.find(Ut=>{const Mt=typeof ge.ring=="object"?ge.ring.id:ge.ring;return Ut.id===Mt});if(!bt)throw new Error(`Unknown quadrant ${ge.quadrant} for entry ${ge.id}!`);if(!kt)throw new Error(`Unknown ring ${ge.ring} for entry ${ge.id}!`);ge.index=nt,ge.quadrant=bt,ge.ring=kt,ge.segment=new U(bt,kt,Ze,()=>de++);const ln=ge.segment.random();ge.x=ln.x,ge.y=ln.y,ge.active=ie?ge.id===ie.id:!1,ge.color=ge.active?ge.ring.color:J()(ge.ring.color).desaturate(.5).lighten(.1).string()});const ve=(0,g.Z)().nodes(Y).velocityDecay(.19).force("collision",(0,S.Z)().radius(12).strength(.85)).stop();for(let ge=0,nt=Math.ceil(Math.log(ve.alphaMin())/Math.log(1-ve.alphaDecay()));ge<nt;++ge){ve.tick();for(const bt of Y)bt.segment&&(bt.x=bt.segment.clipx(bt),bt.y=bt.segment.clipy(bt))}},Pe=(Y,ce)=>{Y.forEach((_e,Ze)=>{_e.index=Ze,_e.outerRadius=(Ze+2)/(Y.length+1)*ce,_e.innerRadius=(Ze===0?0:Ze+1)/(Y.length+1)*ce})},ae=Y=>{const{width:ce,height:_e,quadrants:Ze,rings:ie,entries:de}=Y,ve=Math.min(ce,_e)/2,[ge,nt]=(0,p.useState)(),bt=(0,p.useRef)(null);return H(Ze,ve,ce,_e),Pe(ie,ve),re(de,Ze,ie,ve,ge),p.createElement("svg",{ref:bt,width:ce,height:_e,...Y.svgProps},p.createElement(_n,{width:ce,height:_e,radius:ve,entries:de,quadrants:Ze,rings:ie,activeEntry:ge,onEntryMouseEnter:kt=>nt(kt),onEntryMouseLeave:()=>nt(void 0)}))},Te=Y=>{const ce=(0,n.h_)(n.VE),_e=(0,n.h_)(E),{error:Ze,value:ie,loading:de}=(0,a.default)(async()=>_e.load(Y),[_e,Y]);return(0,p.useEffect)(()=>{Ze&&ce.post(Ze)},[Ze,ce]),{loading:de,value:ie,error:Ze}};function Et(Y){const ce=Y==null?void 0:Y.toLocaleLowerCase("en-US").split(/\s/).map(_e=>_e.trim()).filter(Boolean);return ce!=null&&ce.length?_e=>{var Ze;const ie=`${_e.title} ${((Ze=_e.timeline[0])==null?void 0:Ze.description)||""}`.toLocaleLowerCase("en-US");return ce.every(de=>ie.includes(de))}:()=>!0}function te(Y){const{loading:ce,error:_e,value:Ze}=Te(Y.id),ie=de=>de.entries.filter(Et(Y.searchText)).map(ve=>({id:ve.key,quadrant:de.quadrants.find(ge=>ge.id===ve.quadrant),title:ve.title,ring:de.rings.find(ge=>ge.id===ve.timeline[0].ringId),timeline:ve.timeline.map(ge=>({date:ge.date,ring:de.rings.find(nt=>nt.id===ge.ringId),description:ge.description,moved:ge.moved})),moved:ve.timeline[0].moved,description:ve.description||ve.timeline[0].description,url:ve.url}));return p.createElement(p.Fragment,null,ce&&p.createElement(e.Ex,null),!ce&&!_e&&Ze&&p.createElement(ae,{...Y,rings:Ze.rings,quadrants:Ze.quadrants,entries:ie(Ze)}))}const ee=(0,o.Z)(()=>({overflowXScroll:{overflowX:"scroll"}}));function Le(Y){const{title:ce="Tech Radar",subtitle:_e="Pick the recommended technologies for your projects",pageTitle:Ze="Company Radar",...ie}=Y,de=ee(),[ve,ge]=p.useState("");return p.createElement(e.T3,{themeId:"tool"},p.createElement(e.h4,{title:ce,subtitle:_e}),p.createElement(e.VY,{className:de.overflowXScroll},p.createElement(e.yW,{title:Ze},p.createElement(d.Z,{id:"tech-radar-filter",type:"search",placeholder:"Filter",onChange:nt=>ge(nt.target.value)}),p.createElement(e.qt,null,"This is used for visualizing the official guidelines of different areas of software development such as languages, frameworks, infrastructure and processes.")),p.createElement(y.Z,{container:!0,spacing:3,direction:"row"},p.createElement(y.Z,{item:!0,xs:12,sm:6,md:4},p.createElement(te,{searchText:ve,...ie})))))}var le=Object.freeze({__proto__:null,RadarPage:Le});const Q=new Array;Q.push({id:"use",name:"USE",color:"#93c47d"}),Q.push({id:"trial",name:"TRIAL",color:"#93d2c2"}),Q.push({id:"assess",name:"ASSESS",color:"#fbdb84"}),Q.push({id:"hold",name:"HOLD",color:"#efafa9"});const xe=new Array;xe.push({id:"infrastructure",name:"Infrastructure"}),xe.push({id:"frameworks",name:"Frameworks"}),xe.push({id:"languages",name:"Languages"}),xe.push({id:"process",name:"Process"});const at=new Array;at.push({timeline:[{moved:0,ringId:"use",date:new Date("2020-08-06"),description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua"}],url:"#",key:"javascript",id:"javascript",title:"JavaScript",quadrant:"languages",description:'Excepteur **sint** occaecat *cupidatat* non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n\n```ts\nconst x = "3";\n```\n'}),at.push({timeline:[{moved:-1,ringId:"use",date:new Date("2020-08-06"),description:"Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat"}],url:"#",key:"typescript",id:"typescript",title:"TypeScript",quadrant:"languages",description:"Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat"}),at.push({timeline:[{moved:1,ringId:"use",date:new Date("2020-08-06"),description:"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur"}],url:"https://webpack.js.org/",key:"webpack",id:"webpack",title:"Webpack",quadrant:"frameworks"}),at.push({timeline:[{moved:0,ringId:"use",date:new Date("2020-08-06")}],url:"https://reactjs.org/",key:"react",id:"react",title:"React",quadrant:"frameworks"}),at.push({timeline:[{moved:0,ringId:"use",date:new Date("2020-08-06")}],url:"#",key:"code-reviews",id:"code-reviews",title:"Code Reviews",quadrant:"process"}),at.push({timeline:[{moved:0,ringId:"assess",date:new Date("2020-08-06")}],url:"#",key:"mob-programming",id:"mob-programming",title:"Mob Programming",quadrant:"process"}),at.push({timeline:[{moved:0,ringId:"use",date:new Date("2020-08-06")}],url:"#",key:"docs-like-code",id:"docs-like-code",title:"Docs-like-code",quadrant:"process"}),at.push({timeline:[{ringId:"hold",date:new Date("2020-08-06")}],url:"#",key:"force-push",id:"force-push",title:"Force push to master",quadrant:"process"}),at.push({timeline:[{ringId:"use",date:new Date("2020-08-06"),description:"long description"}],url:"https://github.com",key:"github-actions",id:"github-actions",title:"GitHub Actions",quadrant:"infrastructure"});const Zt={entries:at,quadrants:xe,rings:Q};class Dt{async load(){return Zt}}const en=(0,n.NT)({id:"tech-radar"}),gn=(0,n.rx)({id:"tech-radar",routes:{root:en},apis:[(0,n.ni)(E,new Dt)]}).provide((0,n.P4)({name:"TechRadarPage",component:()=>Promise.resolve().then(function(){return le}).then(Y=>Y.RadarPage),mountPoint:en})),Ye=null},66565:function(Lt,c,t){t.d(c,{$L:function(){return S},ZS:function(){return i},Zz:function(){return y},oZ:function(){return it},x1:function(){return O}});var e=t(2784),n=t(10289),p=t(30705),a=t(64279),o=t(34520),m=t(18473),u=t(54073),v=t.n(u);const d="techdocs.addons.addon.v1",y="techdocs.addons.wrapper.v1",h=()=>null;(0,p.R5)(h,y,!0);const M=lt=>`${d}.${lt.toLocaleLowerCase("en-US")}`;function L(lt){const{name:qe,component:$t}=lt;return createReactExtension({name:qe,component:{sync:Ot=>React.createElement($t,{...Ot})},data:{[d]:lt,[M(qe)]:!0}})}const $=(lt,qe)=>lt.selectByComponentData({key:qe}).getElements()[0],J=lt=>lt.selectByComponentData({key:y}).selectByComponentData({key:d}),g=lt=>lt.selectByComponentData({key:y}).findComponentData({key:d}),S=()=>{const lt=(0,n.pC)(),qe=(0,p.vJ)(lt,J),$t=(0,p.vJ)(lt,g),Ot=(0,e.useCallback)(U=>{var Re;if(!qe||!U)return null;const w=M(U.name);return(Re=$(qe,w))!=null?Re:null},[qe]),pn=(0,e.useCallback)(U=>{const Re=$t.find(w=>w.name===U);return Re?Ot(Re):null},[$t,Ot]),_n=(0,e.useCallback)(U=>{const Re=$t.filter(w=>w.location===U);return Re.length?Re.map(Ot):null},[$t,Ot]);return{renderComponentByName:pn,renderComponentsByLocation:_n}},E=(0,p.T0)({id:"plugin.techdocs.service"}),I=(lt,qe)=>(0,o.eE)(lt)===(0,o.eE)(qe),D={title:"",subtitle:"",setTitle:()=>{},setSubtitle:()=>{},setShadowRoot:()=>{},metadata:{loading:!0},entityMetadata:{loading:!0},entityRef:{kind:"",name:"",namespace:""}},T=(0,m.CT)("techdocs-reader-page-context"),i=(0,e.memo)(({entityRef:lt,children:qe})=>{const $t=(0,p.h_)(E),Ot=(0,a.default)(async()=>$t.getTechDocsMetadata(lt),[lt]),pn=(0,a.default)(async()=>$t.getEntityMetadata(lt),[lt]),[_n,U]=(0,e.useState)(D.title),[Re,w]=(0,e.useState)(D.subtitle),[Ie,fe]=(0,e.useState)(D.shadowRoot),A={metadata:Ot,entityRef:lt,entityMetadata:pn,shadowRoot:Ie,setShadowRoot:fe,title:_n,setTitle:U,subtitle:Re,setSubtitle:w},H=(0,m.EI)({1:A});return e.createElement(T.Provider,{value:H},qe instanceof Function?qe(A):qe)},(lt,qe)=>I(lt.entityRef,qe.entityRef)),O=()=>{const lt=(0,e.useContext)(T);if(lt===void 0)return D;const qe=lt.atVersion(1);if(qe===void 0)throw new Error("No context found for version 1.");return qe},W=()=>{const{shadowRoot:lt}=O();return lt},Ce=lt=>{const qe=W();return qe?lt.map($t=>qe==null?void 0:qe.querySelectorAll($t)).filter($t=>$t.length).map($t=>Array.from($t)).flat():[]},$e=lt=>lt.toString()&&lt.rangeCount&&lt.getRangeAt(0).getBoundingClientRect().top,Qe=(lt=0)=>{const qe=W(),[$t,Ot]=useState(null),pn=useMemo(()=>debounce(()=>{const _n=qe,U=_n.getSelection?_n.getSelection():document.getSelection();U&&$e(U)?Ot(U):Ot(null)},lt),[qe,Ot,lt]);return useEffect(()=>(window.document.addEventListener("selectionchange",pn),()=>window.document.removeEventListener("selectionchange",pn)),[pn]),$t},it=Object.freeze({Header:"Header",Subheader:"Subheader",PrimarySidebar:"PrimarySidebar",SecondarySidebar:"SecondarySidebar",Content:"Content"})},45269:function(Lt,c,t){t.d(c,{D:function(){return ga},E:function(){return Ya},T:function(){return $a},a:function(){return Rr},b:function(){return Qr},c:function(){return Xr},e:function(){return Xa},g:function(){return Ma},r:function(){return er},t:function(){return ra}});var e=t(30705),n=t(32272),p=t(76372),a=t(2784),o=t(10289),m=t(49558),u=t(66565),v=t(7896),d=t(20653),y=t(87371),h=t(81665),M=t(80753),L=t(31461),$={}.constructor;function J(j){if(j==null||typeof j!="object")return j;if(Array.isArray(j))return j.map(J);if(j.constructor!==$)return j;var P={};for(var _ in j)P[_]=J(j[_]);return P}function g(j,P,_){j===void 0&&(j="unnamed");var f=_.jss,z=J(P),ue=f.plugins.onCreateRule(j,z,_);return ue||(j[0],null)}var S=function(P,_){for(var f="",z=0;z<P.length&&P[z]!=="!important";z++)f&&(f+=_),f+=P[z];return f},E=function(P,_){if(_===void 0&&(_=!1),!Array.isArray(P))return P;var f="";if(Array.isArray(P[0]))for(var z=0;z<P.length&&P[z]!=="!important";z++)f&&(f+=", "),f+=S(P[z]," ");else f=S(P,", ");return!_&&P[P.length-1]==="!important"&&(f+=" !important"),f};function I(j){return j&&j.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function D(j,P){for(var _="",f=0;f<P;f++)_+="  ";return _+j}function T(j,P,_){_===void 0&&(_={});var f="";if(!P)return f;var z=_,ue=z.indent,me=ue===void 0?0:ue,je=P.fallbacks;_.format===!1&&(me=-1/0);var nn=I(_),qt=nn.linebreak,fn=nn.space;if(j&&me++,je)if(Array.isArray(je))for(var Sn=0;Sn<je.length;Sn++){var Rn=je[Sn];for(var Fn in Rn){var Xn=Rn[Fn];Xn!=null&&(f&&(f+=qt),f+=D(Fn+":"+fn+E(Xn)+";",me))}}else for(var Gn in je){var Cr=je[Gn];Cr!=null&&(f&&(f+=qt),f+=D(Gn+":"+fn+E(Cr)+";",me))}for(var Pr in P){var _r=P[Pr];_r!=null&&Pr!=="fallbacks"&&(f&&(f+=qt),f+=D(Pr+":"+fn+E(_r)+";",me))}return!f&&!_.allowEmpty||!j?f:(me--,f&&(f=""+qt+f+qt),D(""+j+fn+"{"+f,me)+D("}",me))}var i=/([[\].#*$><+~=|^:(),"'`\s])/g,O=typeof CSS!="undefined"&&CSS.escape,W=function(j){return O?O(j):j.replace(i,"\\$1")},Ce=function(){function j(_,f,z){this.type="style",this.isProcessed=!1;var ue=z.sheet,me=z.Renderer;this.key=_,this.options=z,this.style=f,ue?this.renderer=ue.renderer:me&&(this.renderer=new me)}var P=j.prototype;return P.prop=function(f,z,ue){if(z===void 0)return this.style[f];var me=ue?ue.force:!1;if(!me&&this.style[f]===z)return this;var je=z;(!ue||ue.process!==!1)&&(je=this.options.jss.plugins.onChangeValue(z,f,this));var nn=je==null||je===!1,qt=f in this.style;if(nn&&!qt&&!me)return this;var fn=nn&&qt;if(fn?delete this.style[f]:this.style[f]=je,this.renderable&&this.renderer)return fn?this.renderer.removeProperty(this.renderable,f):this.renderer.setProperty(this.renderable,f,je),this;var Sn=this.options.sheet;return Sn&&Sn.attached,this},j}(),$e=function(j){(0,h.Z)(P,j);function P(f,z,ue){var me;me=j.call(this,f,z,ue)||this;var je=ue.selector,nn=ue.scoped,qt=ue.sheet,fn=ue.generateId;return je?me.selectorText=je:nn!==!1&&(me.id=fn((0,M.Z)((0,M.Z)(me)),qt),me.selectorText="."+W(me.id)),me}var _=P.prototype;return _.applyTo=function(z){var ue=this.renderer;if(ue){var me=this.toJSON();for(var je in me)ue.setProperty(z,je,me[je])}return this},_.toJSON=function(){var z={};for(var ue in this.style){var me=this.style[ue];typeof me!="object"?z[ue]=me:Array.isArray(me)&&(z[ue]=E(me))}return z},_.toString=function(z){var ue=this.options.sheet,me=ue?ue.options.link:!1,je=me?(0,v.Z)({},z,{allowEmpty:!0}):z;return T(this.selectorText,this.style,je)},(0,y.Z)(P,[{key:"selector",set:function(z){if(z!==this.selectorText){this.selectorText=z;var ue=this.renderer,me=this.renderable;if(!(!me||!ue)){var je=ue.setSelector(me,z);je||ue.replaceRule(me,this)}}},get:function(){return this.selectorText}}]),P}(Ce),Qe={onCreateRule:function(P,_,f){return P[0]==="@"||f.parent&&f.parent.type==="keyframes"?null:new $e(P,_,f)}},it={indent:1,children:!0},lt=/@([\w-]+)/,qe=function(){function j(_,f,z){this.type="conditional",this.isProcessed=!1,this.key=_;var ue=_.match(lt);this.at=ue?ue[1]:"unknown",this.query=z.name||"@"+this.at,this.options=z,this.rules=new Zt((0,v.Z)({},z,{parent:this}));for(var me in f)this.rules.add(me,f[me]);this.rules.process()}var P=j.prototype;return P.getRule=function(f){return this.rules.get(f)},P.indexOf=function(f){return this.rules.indexOf(f)},P.addRule=function(f,z,ue){var me=this.rules.add(f,z,ue);return me?(this.options.jss.plugins.onProcessRule(me),me):null},P.toString=function(f){f===void 0&&(f=it);var z=I(f),ue=z.linebreak;if(f.indent==null&&(f.indent=it.indent),f.children==null&&(f.children=it.children),f.children===!1)return this.query+" {}";var me=this.rules.toString(f);return me?this.query+" {"+ue+me+ue+"}":""},j}(),$t=/@media|@supports\s+/,Ot={onCreateRule:function(P,_,f){return $t.test(P)?new qe(P,_,f):null}},pn={indent:1,children:!0},_n=/@keyframes\s+([\w-]+)/,U=function(){function j(_,f,z){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var ue=_.match(_n);ue&&ue[1]?this.name=ue[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=z;var me=z.scoped,je=z.sheet,nn=z.generateId;this.id=me===!1?this.name:W(nn(this,je)),this.rules=new Zt((0,v.Z)({},z,{parent:this}));for(var qt in f)this.rules.add(qt,f[qt],(0,v.Z)({},z,{parent:this}));this.rules.process()}var P=j.prototype;return P.toString=function(f){f===void 0&&(f=pn);var z=I(f),ue=z.linebreak;if(f.indent==null&&(f.indent=pn.indent),f.children==null&&(f.children=pn.children),f.children===!1)return this.at+" "+this.id+" {}";var me=this.rules.toString(f);return me&&(me=""+ue+me+ue),this.at+" "+this.id+" {"+me+"}"},j}(),Re=/@keyframes\s+/,w=/\$([\w-]+)/g,Ie=function(P,_){return typeof P=="string"?P.replace(w,function(f,z){return z in _?_[z]:f}):P},fe=function(P,_,f){var z=P[_],ue=Ie(z,f);ue!==z&&(P[_]=ue)},A={onCreateRule:function(P,_,f){return typeof P=="string"&&Re.test(P)?new U(P,_,f):null},onProcessStyle:function(P,_,f){return _.type!=="style"||!f||("animation-name"in P&&fe(P,"animation-name",f.keyframes),"animation"in P&&fe(P,"animation",f.keyframes)),P},onChangeValue:function(P,_,f){var z=f.options.sheet;if(!z)return P;switch(_){case"animation":return Ie(P,z.keyframes);case"animation-name":return Ie(P,z.keyframes);default:return P}}},H=function(j){(0,h.Z)(P,j);function P(){return j.apply(this,arguments)||this}var _=P.prototype;return _.toString=function(z){var ue=this.options.sheet,me=ue?ue.options.link:!1,je=me?(0,v.Z)({},z,{allowEmpty:!0}):z;return T(this.key,this.style,je)},P}(Ce),re={onCreateRule:function(P,_,f){return f.parent&&f.parent.type==="keyframes"?new H(P,_,f):null}},Pe=function(){function j(_,f,z){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=_,this.style=f,this.options=z}var P=j.prototype;return P.toString=function(f){var z=I(f),ue=z.linebreak;if(Array.isArray(this.style)){for(var me="",je=0;je<this.style.length;je++)me+=T(this.at,this.style[je]),this.style[je+1]&&(me+=ue);return me}return T(this.at,this.style,f)},j}(),ae=/@font-face/,Te={onCreateRule:function(P,_,f){return ae.test(P)?new Pe(P,_,f):null}},Et=function(){function j(_,f,z){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=_,this.style=f,this.options=z}var P=j.prototype;return P.toString=function(f){return T(this.key,this.style,f)},j}(),te={onCreateRule:function(P,_,f){return P==="@viewport"||P==="@-ms-viewport"?new Et(P,_,f):null}},ee=function(){function j(_,f,z){this.type="simple",this.isProcessed=!1,this.key=_,this.value=f,this.options=z}var P=j.prototype;return P.toString=function(f){if(Array.isArray(this.value)){for(var z="",ue=0;ue<this.value.length;ue++)z+=this.key+" "+this.value[ue]+";",this.value[ue+1]&&(z+=`
`);return z}return this.key+" "+this.value+";"},j}(),Le={"@charset":!0,"@import":!0,"@namespace":!0},le={onCreateRule:function(P,_,f){return P in Le?new ee(P,_,f):null}},Q=[Qe,Ot,A,re,Te,te,le],xe={process:!0},at={force:!0,process:!0},Zt=function(){function j(_){this.map={},this.raw={},this.index=[],this.counter=0,this.options=_,this.classes=_.classes,this.keyframes=_.keyframes}var P=j.prototype;return P.add=function(f,z,ue){var me=this.options,je=me.parent,nn=me.sheet,qt=me.jss,fn=me.Renderer,Sn=me.generateId,Rn=me.scoped,Fn=(0,v.Z)({classes:this.classes,parent:je,sheet:nn,jss:qt,Renderer:fn,generateId:Sn,scoped:Rn,name:f,keyframes:this.keyframes,selector:void 0},ue),Xn=f;f in this.raw&&(Xn=f+"-d"+this.counter++),this.raw[Xn]=z,Xn in this.classes&&(Fn.selector="."+W(this.classes[Xn]));var Gn=g(Xn,z,Fn);if(!Gn)return null;this.register(Gn);var Cr=Fn.index===void 0?this.index.length:Fn.index;return this.index.splice(Cr,0,Gn),Gn},P.get=function(f){return this.map[f]},P.remove=function(f){this.unregister(f),delete this.raw[f.key],this.index.splice(this.index.indexOf(f),1)},P.indexOf=function(f){return this.index.indexOf(f)},P.process=function(){var f=this.options.jss.plugins;this.index.slice(0).forEach(f.onProcessRule,f)},P.register=function(f){this.map[f.key]=f,f instanceof $e?(this.map[f.selector]=f,f.id&&(this.classes[f.key]=f.id)):f instanceof U&&this.keyframes&&(this.keyframes[f.name]=f.id)},P.unregister=function(f){delete this.map[f.key],f instanceof $e?(delete this.map[f.selector],delete this.classes[f.key]):f instanceof U&&delete this.keyframes[f.name]},P.update=function(){var f,z,ue;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(f=arguments.length<=0?void 0:arguments[0],z=arguments.length<=1?void 0:arguments[1],ue=arguments.length<=2?void 0:arguments[2]):(z=arguments.length<=0?void 0:arguments[0],ue=arguments.length<=1?void 0:arguments[1],f=null),f)this.updateOne(this.map[f],z,ue);else for(var me=0;me<this.index.length;me++)this.updateOne(this.index[me],z,ue)},P.updateOne=function(f,z,ue){ue===void 0&&(ue=xe);var me=this.options,je=me.jss.plugins,nn=me.sheet;if(f.rules instanceof j){f.rules.update(z,ue);return}var qt=f.style;if(je.onUpdate(z,f,nn,ue),ue.process&&qt&&qt!==f.style){je.onProcessStyle(f.style,f,nn);for(var fn in f.style){var Sn=f.style[fn],Rn=qt[fn];Sn!==Rn&&f.prop(fn,Sn,at)}for(var Fn in qt){var Xn=f.style[Fn],Gn=qt[Fn];Xn==null&&Xn!==Gn&&f.prop(Fn,null,at)}}},P.toString=function(f){for(var z="",ue=this.options.sheet,me=ue?ue.options.link:!1,je=I(f),nn=je.linebreak,qt=0;qt<this.index.length;qt++){var fn=this.index[qt],Sn=fn.toString(f);!Sn&&!me||(z&&(z+=nn),z+=Sn)}return z},j}(),Dt=function(){function j(_,f){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=(0,v.Z)({},f,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),f.Renderer&&(this.renderer=new f.Renderer(this)),this.rules=new Zt(this.options);for(var z in _)this.rules.add(z,_[z]);this.rules.process()}var P=j.prototype;return P.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},P.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},P.addRule=function(f,z,ue){var me=this.queue;this.attached&&!me&&(this.queue=[]);var je=this.rules.add(f,z,ue);return je?(this.options.jss.plugins.onProcessRule(je),this.attached?(this.deployed&&(me?me.push(je):(this.insertRule(je),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),je):(this.deployed=!1,je)):null},P.insertRule=function(f){this.renderer&&this.renderer.insertRule(f)},P.addRules=function(f,z){var ue=[];for(var me in f){var je=this.addRule(me,f[me],z);je&&ue.push(je)}return ue},P.getRule=function(f){return this.rules.get(f)},P.deleteRule=function(f){var z=typeof f=="object"?f:this.rules.get(f);return!z||this.attached&&!z.renderable?!1:(this.rules.remove(z),this.attached&&z.renderable&&this.renderer?this.renderer.deleteRule(z.renderable):!0)},P.indexOf=function(f){return this.rules.indexOf(f)},P.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},P.update=function(){var f;return(f=this.rules).update.apply(f,arguments),this},P.updateOne=function(f,z,ue){return this.rules.updateOne(f,z,ue),this},P.toString=function(f){return this.rules.toString(f)},j}(),en=function(){function j(){this.plugins={internal:[],external:[]},this.registry={}}var P=j.prototype;return P.onCreateRule=function(f,z,ue){for(var me=0;me<this.registry.onCreateRule.length;me++){var je=this.registry.onCreateRule[me](f,z,ue);if(je)return je}return null},P.onProcessRule=function(f){if(!f.isProcessed){for(var z=f.options.sheet,ue=0;ue<this.registry.onProcessRule.length;ue++)this.registry.onProcessRule[ue](f,z);f.style&&this.onProcessStyle(f.style,f,z),f.isProcessed=!0}},P.onProcessStyle=function(f,z,ue){for(var me=0;me<this.registry.onProcessStyle.length;me++)z.style=this.registry.onProcessStyle[me](z.style,z,ue)},P.onProcessSheet=function(f){for(var z=0;z<this.registry.onProcessSheet.length;z++)this.registry.onProcessSheet[z](f)},P.onUpdate=function(f,z,ue,me){for(var je=0;je<this.registry.onUpdate.length;je++)this.registry.onUpdate[je](f,z,ue,me)},P.onChangeValue=function(f,z,ue){for(var me=f,je=0;je<this.registry.onChangeValue.length;je++)me=this.registry.onChangeValue[je](me,z,ue);return me},P.use=function(f,z){z===void 0&&(z={queue:"external"});var ue=this.plugins[z.queue];ue.indexOf(f)===-1&&(ue.push(f),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(me,je){for(var nn in je)nn in me&&me[nn].push(je[nn]);return me},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},j}(),on=function(){function j(){this.registry=[]}var P=j.prototype;return P.add=function(f){var z=this.registry,ue=f.options.index;if(z.indexOf(f)===-1){if(z.length===0||ue>=this.index){z.push(f);return}for(var me=0;me<z.length;me++)if(z[me].options.index>ue){z.splice(me,0,f);return}}},P.reset=function(){this.registry=[]},P.remove=function(f){var z=this.registry.indexOf(f);this.registry.splice(z,1)},P.toString=function(f){for(var z=f===void 0?{}:f,ue=z.attached,me=(0,L.Z)(z,["attached"]),je=I(me),nn=je.linebreak,qt="",fn=0;fn<this.registry.length;fn++){var Sn=this.registry[fn];ue!=null&&Sn.attached!==ue||(qt&&(qt+=nn),qt+=Sn.toString(me))}return qt},(0,y.Z)(j,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),j}(),gn=new on,Ye=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"&&window.Math===Math?window:typeof self!="undefined"&&self.Math===Math?self:Function("return this")(),Y="2f1acc6c3a606b082e5eef5e54414ffb";Ye[Y]==null&&(Ye[Y]=0);var ce=Ye[Y]++,_e=1e10,Ze=function(P){P===void 0&&(P={});var _=0,f=function(ue,me){_+=1,_>_e;var je="",nn="";return me&&(me.options.classNamePrefix&&(nn=me.options.classNamePrefix),me.options.jss.id!=null&&(je=String(me.options.jss.id))),P.minify?""+(nn||"c")+ce+je+_:nn+ue.key+"-"+ce+(je?"-"+je:"")+"-"+_};return f},ie=function(P){var _;return function(){return _||(_=P()),_}},de=function(P,_){try{return P.attributeStyleMap?P.attributeStyleMap.get(_):P.style.getPropertyValue(_)}catch{return""}},ve=function(P,_,f){try{var z=f;if(Array.isArray(f)&&(z=E(f,!0),f[f.length-1]==="!important"))return P.style.setProperty(_,z,"important"),!0;P.attributeStyleMap?P.attributeStyleMap.set(_,z):P.style.setProperty(_,z)}catch{return!1}return!0},ge=function(P,_){try{P.attributeStyleMap?P.attributeStyleMap.delete(_):P.style.removeProperty(_)}catch{}},nt=function(P,_){return P.selectorText=_,P.selectorText===_},bt=ie(function(){return document.querySelector("head")});function kt(j,P){for(var _=0;_<j.length;_++){var f=j[_];if(f.attached&&f.options.index>P.index&&f.options.insertionPoint===P.insertionPoint)return f}return null}function ln(j,P){for(var _=j.length-1;_>=0;_--){var f=j[_];if(f.attached&&f.options.insertionPoint===P.insertionPoint)return f}return null}function Ut(j){for(var P=bt(),_=0;_<P.childNodes.length;_++){var f=P.childNodes[_];if(f.nodeType===8&&f.nodeValue.trim()===j)return f}return null}function Mt(j){var P=gn.registry;if(P.length>0){var _=kt(P,j);if(_&&_.renderer)return{parent:_.renderer.element.parentNode,node:_.renderer.element};if(_=ln(P,j),_&&_.renderer)return{parent:_.renderer.element.parentNode,node:_.renderer.element.nextSibling}}var f=j.insertionPoint;if(f&&typeof f=="string"){var z=Ut(f);if(z)return{parent:z.parentNode,node:z.nextSibling}}return!1}function Gt(j,P){var _=P.insertionPoint,f=Mt(P);if(f!==!1&&f.parent){f.parent.insertBefore(j,f.node);return}if(_&&typeof _.nodeType=="number"){var z=_,ue=z.parentNode;ue&&ue.insertBefore(j,z.nextSibling);return}bt().appendChild(j)}var bn=ie(function(){var j=document.querySelector('meta[property="csp-nonce"]');return j?j.getAttribute("content"):null}),vn=function(P,_,f){try{"insertRule"in P?P.insertRule(_,f):"appendRule"in P&&P.appendRule(_)}catch{return!1}return P.cssRules[f]},Me=function(P,_){var f=P.cssRules.length;return _===void 0||_>f?f:_},ht=function(){var P=document.createElement("style");return P.textContent=`
`,P},_t=function(){function j(_){this.getPropertyValue=de,this.setProperty=ve,this.removeProperty=ge,this.setSelector=nt,this.hasInsertedRules=!1,this.cssRules=[],_&&gn.add(_),this.sheet=_;var f=this.sheet?this.sheet.options:{},z=f.media,ue=f.meta,me=f.element;this.element=me||ht(),this.element.setAttribute("data-jss",""),z&&this.element.setAttribute("media",z),ue&&this.element.setAttribute("data-meta",ue);var je=bn();je&&this.element.setAttribute("nonce",je)}var P=j.prototype;return P.attach=function(){if(!(this.element.parentNode||!this.sheet)){Gt(this.element,this.sheet.options);var f=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&f&&(this.hasInsertedRules=!1,this.deploy())}},P.detach=function(){if(!!this.sheet){var f=this.element.parentNode;f&&f.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},P.deploy=function(){var f=this.sheet;if(!!f){if(f.options.link){this.insertRules(f.rules);return}this.element.textContent=`
`+f.toString()+`
`}},P.insertRules=function(f,z){for(var ue=0;ue<f.index.length;ue++)this.insertRule(f.index[ue],ue,z)},P.insertRule=function(f,z,ue){if(ue===void 0&&(ue=this.element.sheet),f.rules){var me=f,je=ue;if(f.type==="conditional"||f.type==="keyframes"){var nn=Me(ue,z);if(je=vn(ue,me.toString({children:!1}),nn),je===!1)return!1;this.refCssRule(f,nn,je)}return this.insertRules(me.rules,je),je}var qt=f.toString();if(!qt)return!1;var fn=Me(ue,z),Sn=vn(ue,qt,fn);return Sn===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(f,fn,Sn),Sn)},P.refCssRule=function(f,z,ue){f.renderable=ue,f.options.parent instanceof Dt&&(this.cssRules[z]=ue)},P.deleteRule=function(f){var z=this.element.sheet,ue=this.indexOf(f);return ue===-1?!1:(z.deleteRule(ue),this.cssRules.splice(ue,1),!0)},P.indexOf=function(f){return this.cssRules.indexOf(f)},P.replaceRule=function(f,z){var ue=this.indexOf(f);return ue===-1?!1:(this.element.sheet.deleteRule(ue),this.cssRules.splice(ue,1),this.insertRule(z,ue))},P.getRules=function(){return this.element.sheet.cssRules},j}(),tn=0,Bt=function(){function j(_){this.id=tn++,this.version="10.8.2",this.plugins=new en,this.options={id:{minify:!1},createGenerateId:Ze,Renderer:d.Z?_t:null,plugins:[]},this.generateId=Ze({minify:!1});for(var f=0;f<Q.length;f++)this.plugins.use(Q[f],{queue:"internal"});this.setup(_)}var P=j.prototype;return P.setup=function(f){return f===void 0&&(f={}),f.createGenerateId&&(this.options.createGenerateId=f.createGenerateId),f.id&&(this.options.id=(0,v.Z)({},this.options.id,f.id)),(f.createGenerateId||f.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),f.insertionPoint!=null&&(this.options.insertionPoint=f.insertionPoint),"Renderer"in f&&(this.options.Renderer=f.Renderer),f.plugins&&this.use.apply(this,f.plugins),this},P.createStyleSheet=function(f,z){z===void 0&&(z={});var ue=z,me=ue.index;typeof me!="number"&&(me=gn.index===0?0:gn.index+1);var je=new Dt(f,(0,v.Z)({},z,{jss:this,generateId:z.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:me}));return this.plugins.onProcessSheet(je),je},P.removeStyleSheet=function(f){return f.detach(),gn.remove(f),this},P.createRule=function(f,z,ue){if(z===void 0&&(z={}),ue===void 0&&(ue={}),typeof f=="object")return this.createRule(void 0,f,z);var me=(0,v.Z)({},ue,{name:f,jss:this,Renderer:this.options.Renderer});me.generateId||(me.generateId=this.generateId),me.classes||(me.classes={}),me.keyframes||(me.keyframes={});var je=g(f,z,me);return je&&this.plugins.onProcessRule(je),je},P.use=function(){for(var f=this,z=arguments.length,ue=new Array(z),me=0;me<z;me++)ue[me]=arguments[me];return ue.forEach(function(je){f.plugins.use(je)}),this},j}(),hn=function(P){return new Bt(P)},kn=null,Bn=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function Un(j){var P=null;for(var _ in j){var f=j[_],z=typeof f;if(z==="function")P||(P={}),P[_]=f;else if(z==="object"&&f!==null&&!Array.isArray(f)){var ue=Un(f);ue&&(P||(P={}),P[_]=ue)}}return P}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */var An=hn(),Ge=null,Je=t(79692),mt=t(49378),dt=t(38402),It=t(85256),Wt=t(86619),Jt=t(50581),xt=t(61837),N=t(4614),F=t(12420),q=t(60905),ye=t(90436),Se=t(77277),vt=t(4190),Rt=t(15459),Nt=t(80030),zt=t(72379),xn=t(41547),zn=t(60364),st=t(8560),Ue=t(15223),oe=t(95544),he=t(94339),De=t(16111),we=t(24579),Ne=t(14503),Ke=t(50236),Be=t(19219),ct=t(2337),Kt=t(15277),mn=t.n(Kt),se=t(97592),ke=t(21853),ot=t(88013),wt=t(48760),Fe=t(99688),ft=t(98069),K=t(87685),l=t(64279),b=t(77446),x=t(41128),G=t(49462),Ae=t(1854),rt=t(67097),ut=t(47093),yt=t(82717),Vt=t.n(yt),Ft=t(44882),On=t(35368),yn=t.n(On),Mn=t(18671),jn=t(73250),wn=t(73495),sr=t(34520),Jn=t(95074),Or=t(76635),Ct=t(39981),Ve=t(11640),Xt=t(28347),Cn=t(48377);const Ln=(0,e.T0)({id:"plugin.techdocs.storageservice"}),Nn=(0,e.T0)({id:"plugin.techdocs.service"});class Qn{constructor(P){this.configApi=P.configApi,this.discoveryApi=P.discoveryApi,this.fetchApi=P.fetchApi}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getTechDocsMetadata(P){const{kind:_,namespace:f,name:z}=P,me=`${await this.getApiOrigin()}/metadata/techdocs/${f}/${_}/${z}`,je=await this.fetchApi.fetch(`${me}`);if(!je.ok)throw await n.VL.fromResponse(je);return await je.json()}async getEntityMetadata(P){const{kind:_,namespace:f,name:z}=P,me=`${await this.getApiOrigin()}/metadata/entity/${f}/${_}/${z}`,je=await this.fetchApi.fetch(`${me}`);if(!je.ok)throw await n.VL.fromResponse(je);return await je.json()}}class fr{constructor(P){this.configApi=P.configApi,this.discoveryApi=P.discoveryApi,this.identityApi=P.identityApi,this.fetchApi=P.fetchApi}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getStorageUrl(){var P;return(P=this.configApi.getOptionalString("techdocs.storageUrl"))!=null?P:`${await this.discoveryApi.getBaseUrl("techdocs")}/static/docs`}async getBuilder(){return this.configApi.getString("techdocs.builder")}async getEntityDocs(P,_){const{kind:f,namespace:z,name:ue}=P,je=`${await this.getStorageUrl()}/${z}/${f}/${ue}/${_}`,nn=await this.fetchApi.fetch(`${je.endsWith("/")?je:`${je}/`}index.html`);let qt="";switch(nn.status){case 404:throw qt="Page not found. ",_||(qt+="This could be because there is no index.md file in the root of the docs directory of this repository."),new n.dR(qt);case 500:throw qt="Could not generate documentation or an error in the TechDocs backend. ",new Error(qt)}return nn.text()}async syncEntityDocs(P,_=()=>{}){const{kind:f,namespace:z,name:ue}=P,je=`${await this.getApiOrigin()}/sync/${z}/${f}/${ue}`,{token:nn}=await this.identityApi.getCredentials();return new Promise((qt,fn)=>{const Sn=new p.EventSourcePolyfill(je,{withCredentials:!0,headers:nn?{Authorization:`Bearer ${nn}`}:{}});Sn.addEventListener("log",Rn=>{Rn.data&&_(JSON.parse(Rn.data))}),Sn.addEventListener("finish",Rn=>{let Fn=!1;Rn.data&&({updated:Fn}=JSON.parse(Rn.data)),qt(Fn?"updated":"cached")}),Sn.onerror=Rn=>{switch(Sn.close(),Rn.status){case 404:fn(new n.dR(Rn.message));return;default:fn(new Error(Rn.data));return}}})}async getBaseUrl(P,_,f){const{kind:z,namespace:ue,name:me}=_,nn=`${await this.getApiOrigin()}/static/docs/${ue}/${z}/${me}/${f}`;return new URL(P,nn.endsWith("/")?nn:`${nn}/`).toString()}}const pr=(0,Je.Z)({flexContainer:{flexWrap:"wrap"},itemText:{width:"100%",marginBottom:"1rem"}}),er=j=>{const{result:P,lineClamp:_=5,asListItem:f=!0,asLink:z=!0,title:ue}=j,me=pr(),je=()=>{var fn;return a.createElement(mt.Z,{className:me.itemText,primaryTypographyProps:{variant:"h6"},primary:ue||`${P.title} | ${(fn=P.entityTitle)!=null?fn:P.name} docs`,secondary:a.createElement(mn(),{line:_,truncateText:"\u2026",text:P.text,element:"span"})})},nn=({children:fn})=>z?a.createElement(m.rU,{to:P.location},fn):a.createElement(a.Fragment,null,fn),qt=({children:fn})=>f?a.createElement(a.Fragment,null,a.createElement(dt.Z,{alignItems:"flex-start",className:me.flexContainer},fn),a.createElement(It.Z,{component:"li"})):a.createElement(a.Fragment,null,fn);return a.createElement(nn,null,a.createElement(qt,null,a.createElement(je,null)))},ir=(0,Je.Z)({root:{width:"100%"}}),lr=j=>{const{entityId:P,debounceTime:_=150}=j,[f,z]=(0,a.useState)(!1),ue=(0,o.s0)(),{term:me,setTerm:je,setFilters:nn,result:{loading:qt,value:fn}}=(0,se.Rx)(),Sn=ir(),[Rn,Fn]=(0,a.useState)([]);(0,a.useEffect)(()=>{let hr=!0;if(hr&&fn){const ur=fn.results.slice(0,10);Fn(ur)}return()=>{hr=!1}},[qt,fn]);const[Xn,Gn]=(0,a.useState)(me);(0,wt.Z)(()=>je(Xn),_,[Xn]);const{kind:Cr,name:Pr,namespace:_r}=P;(0,a.useEffect)(()=>{nn(hr=>({...hr,kind:Cr,namespace:_r,name:Pr}))},[Cr,_r,Pr,nn]);const Dr=hr=>{f||z(!0),Gn(hr.target.value)},Zr=(hr,ur)=>{if(ur!=null&&ur.document){const{location:gr}=ur.document;ue(gr)}};return a.createElement(ot.ZP,{classes:{root:Sn.root},"data-testid":"techdocs-search-bar",size:"small",open:f,getOptionLabel:()=>"",filterOptions:hr=>hr,onClose:()=>{z(!1)},onFocus:()=>{z(!0)},onChange:Zr,blurOnSelect:!0,noOptionsText:"No results found",value:null,options:Rn,renderOption:({document:hr})=>a.createElement(er,{result:hr,lineClamp:3,asListItem:!1,asLink:!1,title:hr.title}),loading:qt,renderInput:hr=>a.createElement(Wt.Z,{...hr,"data-testid":"techdocs-search-bar-input",variant:"outlined",fullWidth:!0,placeholder:`Search ${P.name} docs`,value:Xn,onChange:Dr,InputProps:{...hr.InputProps,startAdornment:a.createElement(Jt.Z,{position:"start"},a.createElement(xt.Z,{"aria-label":"Query",disabled:!0},a.createElement(ke.Z,null))),endAdornment:a.createElement(a.Fragment,null,qt?a.createElement(N.Z,{color:"inherit",size:20}):null,hr.InputProps.endAdornment)}})})},k=j=>{const P={term:"",types:["techdocs"],pageCursor:"",filters:j.entityId};return a.createElement(se.Nd,{initialState:P},a.createElement(lr,{...j}))},Z=(0,Je.Z)(j=>(0,F.Z)({paper:{width:"100%",[j.breakpoints.up("sm")]:{width:"75%"},[j.breakpoints.up("md")]:{width:"50%"},padding:j.spacing(2.5)},root:{height:"100%",overflow:"hidden"},logs:{background:j.palette.background.default}})),X=({buildLog:j,onClose:P})=>{const _=Z(),f=j.length===0?"Waiting for logs...":j.join(`
`);return a.createElement(q.Z,{container:!0,direction:"column",className:_.root,spacing:0,wrap:"nowrap"},a.createElement(q.Z,{item:!0,container:!0,justifyContent:"space-between",alignItems:"center",spacing:0,wrap:"nowrap"},a.createElement(ye.Z,{variant:"h5"},"Build Details"),a.createElement(xt.Z,{key:"dismiss",title:"Close the drawer",onClick:P,color:"inherit"},a.createElement(K.Z,null))),a.createElement(m.nU,{text:f,classes:{root:_.logs}}))},pe=({buildLog:j})=>{const P=Z(),[_,f]=(0,a.useState)(!1);return a.createElement(a.Fragment,null,a.createElement(Se.Z,{color:"inherit",onClick:()=>f(!0)},"Show Build Logs"),a.createElement(vt.ZP,{classes:{paper:P.paper},anchor:"right",open:_,onClose:()=>f(!1)},a.createElement(X,{buildLog:j,onClose:()=>f(!1)})))},et=({errorMessage:j})=>{const P=(0,e.h_)(e.Ds).getOptionalString("techdocs.builder");let _="";return P!=="local"&&(_="Note that techdocs.builder is not set to 'local' in your config, which means this Backstage app will not generate docs if they are not found. Make sure the project's docs are generated and published by some external process (e.g. CI/CD pipeline). Or change techdocs.builder to 'local' to generate docs from this Backstage instance."),a.createElement(m.mf,{status:"404",statusMessage:j||"Documentation not found",additionalInfo:_})},tt=(0,Je.Z)(j=>({root:{marginBottom:j.spacing(2)},message:{wordBreak:"break-word",overflowWrap:"anywhere"}})),At=()=>{let j=null;const P=tt(),{state:_,contentReload:f,contentErrorMessage:z,syncErrorMessage:ue,buildLog:me}=In(),je=_==="CHECKING"?a.createElement(m.Ex,null):null;return _==="INITIAL_BUILD"&&(j=a.createElement(Fe.Z,{classes:{root:P.root},variant:"outlined",severity:"info",icon:a.createElement(N.Z,{size:"24px"}),action:a.createElement(pe,{buildLog:me})},"Documentation is accessed for the first time and is being prepared. The subsequent loads are much faster.")),_==="CONTENT_STALE_REFRESHING"&&(j=a.createElement(Fe.Z,{variant:"outlined",severity:"info",icon:a.createElement(N.Z,{size:"24px"}),action:a.createElement(pe,{buildLog:me}),classes:{root:P.root}},"A newer version of this documentation is being prepared and will be available shortly.")),_==="CONTENT_STALE_READY"&&(j=a.createElement(Fe.Z,{variant:"outlined",severity:"success",action:a.createElement(Se.Z,{color:"inherit",onClick:()=>f()},"Refresh"),classes:{root:P.root}},"A newer version of this documentation is now available, please refresh to view.")),_==="CONTENT_STALE_ERROR"&&(j=a.createElement(Fe.Z,{variant:"outlined",severity:"error",action:a.createElement(pe,{buildLog:me}),classes:{root:P.root,message:P.message}},"Building a newer version of this documentation failed."," ",ue)),_==="CONTENT_NOT_FOUND"&&(j=a.createElement(a.Fragment,null,ue&&a.createElement(Fe.Z,{variant:"outlined",severity:"error",action:a.createElement(pe,{buildLog:me}),classes:{root:P.root,message:P.message}},"Building a newer version of this documentation failed."," ",ue),a.createElement(et,{errorMessage:z}))),a.createElement(a.Fragment,null,je,j)};function Ht({contentLoading:j,content:P,activeSyncState:_}){return j||_==="BUILD_READY_RELOAD"||!P&&_==="CHECKING"?"CHECKING":!P&&_==="BUILDING"?"INITIAL_BUILD":P?_==="BUILDING"?"CONTENT_STALE_REFRESHING":_==="BUILD_READY"?"CONTENT_STALE_READY":_==="ERROR"?"CONTENT_STALE_ERROR":"CONTENT_FRESH":"CONTENT_NOT_FOUND"}function rn(j,P){const _={...j};switch(P.type){case"sync":P.state==="CHECKING"&&(_.buildLog=[]),_.activeSyncState=P.state,_.syncError=P.syncError;break;case"contentLoading":_.contentLoading=!0,_.contentError=void 0;break;case"content":typeof P.path=="string"&&(_.path=P.path),_.contentLoading=!1,_.content=P.content,_.contentError=P.contentError;break;case"buildLog":_.buildLog=_.buildLog.concat(P.log);break;default:throw new Error}return["BUILD_READY","BUILD_READY_RELOAD"].includes(_.activeSyncState)&&["contentLoading","content"].includes(P.type)&&(_.activeSyncState="UP_TO_DATE",_.buildLog=[]),_}function cn(j,P,_,f){var z,ue;const[me,je]=(0,a.useReducer)(rn,{activeSyncState:"CHECKING",path:f,contentLoading:!0,buildLog:[]}),nn=(0,e.h_)(Ln),{retry:qt}=(0,b.Z)(async()=>{je({type:"contentLoading"});try{const Rn=await nn.getEntityDocs({kind:j,namespace:P,name:_},f);return je({type:"content",content:Rn,path:f}),Rn}catch(Rn){je({type:"content",contentError:Rn,path:f})}},[nn,j,P,_,f]),fn=(0,a.useRef)({content:void 0,reload:()=>{}});return fn.current={content:me.content,reload:qt},(0,l.default)(async()=>{je({type:"sync",state:"CHECKING"});const Rn=setTimeout(()=>{je({type:"sync",state:"BUILDING"})},1e3);try{switch(await nn.syncEntityDocs({kind:j,namespace:P,name:_},Xn=>{je({type:"buildLog",log:Xn})})){case"updated":fn.current.content?je({type:"sync",state:"BUILD_READY"}):(fn.current.reload(),je({type:"sync",state:"BUILD_READY_RELOAD"}));break;case"cached":je({type:"sync",state:"UP_TO_DATE"});break;default:je({type:"sync",state:"ERROR",syncError:new Error("Unexpected return state")});break}}catch(Fn){je({type:"sync",state:"ERROR",syncError:Fn})}finally{clearTimeout(Rn)}},[j,_,P,nn,je,fn]),{state:(0,a.useMemo)(()=>Ht({activeSyncState:me.activeSyncState,contentLoading:me.contentLoading,content:me.content}),[me.activeSyncState,me.content,me.contentLoading]),contentReload:qt,path:me.path,content:me.content,contentErrorMessage:(z=me.contentError)==null?void 0:z.toString(),syncErrorMessage:(ue=me.syncError)==null?void 0:ue.toString(),buildLog:me.buildLog}}const $n=(0,a.createContext)({}),In=()=>(0,a.useContext)($n),Dn=({children:j})=>{const{"*":P=""}=(0,o.UO)(),{entityRef:_}=(0,u.x1)(),{kind:f,namespace:z,name:ue}=_,me=cn(f,z,ue,P);return a.createElement($n.Provider,{value:me},j instanceof Function?j(me):j)},Vn=j=>P=>a.createElement(Dn,null,a.createElement(j,{...P})),ar=(j,P,_)=>{const f=j==="src"&&P.endsWith(".svg"),z=!P.match(/^([a-z]*:)?\/\//i),ue=P.startsWith(_);return f&&(z||ue)},br=({techdocsStorageApi:j,entityId:P,path:_})=>async f=>{const z=await j.getApiOrigin(),ue=async(me,je)=>{for(const nn of me)if(nn.hasAttribute(je)){const qt=nn.getAttribute(je);if(!qt)return;const fn=await j.getBaseUrl(qt,P,_);if(ar(je,qt,z))try{const Rn=await(await fetch(fn,{credentials:"include"})).text();nn.setAttribute(je,`data:image/svg+xml;base64,${btoa(Rn)}`)}catch{nn.setAttribute("alt",`Error: ${qt}`)}else nn.setAttribute(je,fn)}};return await Promise.all([ue(f.querySelectorAll("img"),"src"),ue(f.querySelectorAll("script"),"src"),ue(f.querySelectorAll("source"),"src"),ue(f.querySelectorAll("link"),"href"),ue(f.querySelectorAll("a[download]"),"href")]),f},xr=j=>P=>{const _=P.querySelector('[title="Edit this page"]');if(!_||!_.href)return P;const f=new URL(_.href),z=j.byUrl(f);if((z==null?void 0:z.type)!=="github"&&(z==null?void 0:z.type)!=="gitlab")return P;const ue=P.querySelector("article>h1").childNodes[0].textContent,me=encodeURIComponent(`Documentation Feedback: ${ue}`),je=encodeURIComponent(`Page source:
${_.href}

Feedback:`),nn=(z==null?void 0:z.type)==="github"?(0,Ae.Pb)(f.href,"blob"):f.href,qt=Vt()(nn),fn=`/${qt.organization}/${qt.name}`,Sn=_.cloneNode();switch(z==null?void 0:z.type){case"gitlab":Sn.href=`${f.origin}${fn}/issues/new?issue[title]=${me}&issue[description]=${je}`;break;case"github":Sn.href=`${f.origin}${fn}/issues/new?title=${me}&body=${je}`;break;default:return P}return ut.render(a.createElement(rt.Z),Sn),Sn.style.paddingLeft="5px",Sn.title="Leave feedback for this page",Sn.id="git-feedback-link",_==null||_.insertAdjacentElement("beforebegin",Sn),P},Jr=()=>j=>{const P=j.querySelector('.md-header label[for="__drawer"]'),_=j.querySelector("article");if(!P||!_)return j;const f=P.cloneNode();return ut.render(a.createElement(Ft.Z),f),f.id="toggle-sidebar",f.title="Toggle Sidebar",f.classList.add("md-content__button"),f.style.setProperty("padding","0 0 0 5px"),f.style.setProperty("margin","0.4rem 0 0.4rem 0.4rem"),_==null||_.prepend(f),j},Ca=()=>j=>(((_,f)=>{Array.from(_).filter(z=>z.hasAttribute(f)).forEach(z=>{const ue=z.getAttribute(f);if(ue){ue.match(/^https?:\/\//i)&&z.setAttribute("target","_blank");try{const me=Pa(window.location.href);z.setAttribute(f,new URL(ue,me).toString())}catch{z.replaceWith(z.textContent||ue)}}})})(Array.from(j.getElementsByTagName("a")),"href"),j);function Pa(j){const P=new URL(j);return!P.pathname.endsWith("/")&&!P.pathname.endsWith(".html")&&(P.pathname+="/"),P.toString()}const _a=({baseUrl:j,onClick:P})=>_=>(Array.from(_.getElementsByTagName("a")).forEach(f=>{f.addEventListener("click",z=>{const me=f.getAttribute("href");!me||me.startsWith(j)&&!f.hasAttribute("download")&&(z.preventDefault(),P(z,me))})}),_),fa=(0,Rt.Z)(j=>({tooltip:{fontSize:"inherit",color:j.palette.text.primary,margin:0,padding:j.spacing(.5),backgroundColor:"transparent",boxShadow:"none"}}))(Nt.ZP),Sa=()=>a.createElement(zt.Z,null,a.createElement("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})),Ra=({text:j})=>{const[P,_]=(0,a.useState)(!1),f=(0,a.useCallback)(()=>{navigator.clipboard.writeText(j),_(!0)},[j]),z=(0,a.useCallback)(()=>{_(!1)},[_]);return a.createElement(fa,{title:"Copied to clipboard",placement:"left",open:P,onClose:z,leaveDelay:1e3},a.createElement("button",{className:"md-clipboard md-icon",onClick:f},a.createElement(Sa,null)))},Ta=j=>P=>{var _;const f=P.querySelectorAll("pre > code");for(const z of f){const ue=z.textContent||"",me=document.createElement("div");(_=z==null?void 0:z.parentElement)==null||_.prepend(me),ut.render(a.createElement(xn.Z,{theme:j},a.createElement(Ra,{text:ue})),me)}return P},ne=()=>j=>{var P;return(P=j.querySelector(".md-header"))==null||P.remove(),j},be=()=>j=>{var P,_;return(P=j.querySelector(".md-footer .md-copyright"))==null||P.remove(),(_=j.querySelector(".md-footer-copyright"))==null||_.remove(),j},He=({docStorageUrl:j,onLoading:P,onLoaded:_})=>f=>{const z=Array.from(f.querySelectorAll('head > link[rel="stylesheet"]')).filter(me=>{var je;return(je=me.getAttribute("href"))==null?void 0:je.startsWith(j)});let ue=z.length;return ue>0&&P(f),z.forEach(me=>me.addEventListener("load",()=>{ue-=1,ue===0&&_(f)})),f},We=/main\.[A-Fa-f0-9]{8}\.min\.css$/,pt=/^https:\/\/fonts\.googleapis\.com/,Tt=/^https:\/\/fonts\.gstatic\.com/,Pt=j=>{if(j.nodeName&&j.nodeName==="LINK"){const P=j.getAttribute("href")||"";P.match(We)&&j.setAttribute("rel","stylesheet"),P.match(pt)&&j.setAttribute("rel","stylesheet"),P.match(Tt)&&j.setAttribute("rel","preconnect")}return j},Yt=j=>P=>{if(P.nodeName==="IFRAME"){const _=P.getAttribute("src");if(!_)return P.remove(),P;try{const f=new URL(_);j.some(ue=>f.host===ue)||P.remove()}catch(f){console.warn(`Invalid iframe src, ${f}`),P.remove()}}return P},En=j=>{const P=(j==null?void 0:j.getOptionalStringArray("allowedIframeHosts"))||[];return _=>{yn().addHook("afterSanitizeAttributes",Pt);const f=["link"];return P.length>0&&(yn().addHook("beforeSanitizeElements",Yt(P)),f.push("iframe")),yn().sanitize(_.innerHTML,{ADD_TAGS:f,FORBID_TAGS:["style"],WHOLE_DOCUMENT:!0,RETURN_DOM:!0})}},sn=({css:j})=>P=>(P.getElementsByTagName("head")[0].insertAdjacentHTML("beforeend",`<style>${j}</style>`),P),un=()=>j=>(setTimeout(()=>{var P;if(window.location.hash){const _=window.location.hash.slice(1);(P=j==null?void 0:j.querySelector(`[id="${_}"]`))==null||P.scrollIntoView()}},200),j),an=async(j,P)=>{let _;if(typeof j=="string")_=new DOMParser().parseFromString(j,"text/html").documentElement;else if(j instanceof Element)_=j;else throw new Error("dom is not a recognized type");for(const f of P)_=await f(_);return _},Tn=["h1","h2","h3","h4","h5","h6"],Yn=j=>{const P=(0,o.s0)(),_=(0,zn.Z)(),f=(0,e.h_)(Ln),z=(0,e.h_)(G.q3),ue=(0,e.h_)(e.Ds),{namespace:me,kind:je,name:nn}=j,{state:qt,path:fn,content:Sn}=In(),Rn=_.palette.type==="dark",[Fn,Xn]=(0,a.useState)(),[Gn,Cr]=(0,a.useState)(null),{isPinned:Pr}=(0,a.useContext)(m.qn),_r=(0,a.useCallback)(()=>{if(!Gn||!Fn)return;const ur=Gn.querySelector(".md-container > .md-tabs"),gr=window.matchMedia("screen and (max-width: 76.1875em)").matches,Br=Math.max(Gn.getBoundingClientRect().top,0);Fn.forEach(Gr=>{gr?Gr.style.top="0px":ur?Gr.style.top=`${Br+ur.getBoundingClientRect().height}px`:Gr.style.top=`${Br}px`})},[Gn,Fn]);(0,a.useEffect)(()=>(_r(),window.addEventListener("scroll",_r,!0),window.addEventListener("resize",_r),()=>{window.removeEventListener("scroll",_r,!0),window.removeEventListener("resize",_r)}),[_r,qt]);const Dr=(0,a.useCallback)(()=>{if(!Gn)return;const ur=Gn.querySelector(".md-footer");ur&&(ur.style.width=`${Gn.getBoundingClientRect().width}px`)},[Gn]);(0,a.useEffect)(()=>(Dr(),window.addEventListener("resize",Dr),()=>{window.removeEventListener("resize",Dr)}));const Zr=(0,a.useCallback)((ur,gr)=>an(ur,[En(ue.getOptionalConfig("techdocs.sanitizer")),br({techdocsStorageApi:f,entityId:{kind:je,name:nn,namespace:me},path:gr}),Ca(),Jr(),ne(),be(),xr(z),sn({css:`
            /*
              As the MkDocs output is rendered in shadow DOM, the CSS variable definitions on the root selector are not applied. Instead, they have to be applied on :host.
              As there is no way to transform the served main*.css yet (for example in the backend), we have to copy from main*.css and modify them.
            */
            :host {
              /* FONT */
              --md-default-fg-color: ${_.palette.text.primary};
              --md-default-fg-color--light: ${_.palette.text.secondary};
              --md-default-fg-color--lighter: ${(0,x.$n)(_.palette.text.secondary,.7)};
              --md-default-fg-color--lightest: ${(0,x.$n)(_.palette.text.secondary,.3)};
  
              /* BACKGROUND */
              --md-default-bg-color:${_.palette.background.default};
              --md-default-bg-color--light: ${_.palette.background.paper};
              --md-default-bg-color--lighter: ${(0,x.$n)(_.palette.background.paper,.7)};
              --md-default-bg-color--lightest: ${(0,x.$n)(_.palette.background.paper,.3)};
  
              /* PRIMARY */
              --md-primary-fg-color: ${_.palette.primary.main};
              --md-primary-fg-color--light: ${_.palette.primary.light};
              --md-primary-fg-color--dark: ${_.palette.primary.dark};
              --md-primary-bg-color: ${_.palette.primary.contrastText};
              --md-primary-bg-color--light: ${(0,x.$n)(_.palette.primary.contrastText,.7)};
  
              /* ACCENT */
              --md-accent-fg-color: var(--md-primary-fg-color);
  
              /* SHADOW */
              --md-shadow-z1: ${_.shadows[1]};
              --md-shadow-z2: ${_.shadows[2]};
              --md-shadow-z3: ${_.shadows[3]};
  
              /* EXTENSIONS */
              --md-admonition-fg-color: var(--md-default-fg-color);
              --md-admonition-bg-color: var(--md-default-bg-color);
              /* Admonitions and others are using SVG masks to define icons. These masks are defined as CSS variables. */
              --md-admonition-icon--note: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>');
              --md-admonition-icon--abstract: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 5h16v2H4V5m0 4h16v2H4V9m0 4h16v2H4v-2m0 4h10v2H4v-2z"/></svg>');
              --md-admonition-icon--info: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 9h-2V7h2m0 10h-2v-6h2m-1-9A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10A10 10 0 0012 2z"/></svg>');
              --md-admonition-icon--tip: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.55 11.2c-.23-.3-.5-.56-.76-.82-.65-.6-1.4-1.03-2.03-1.66C13.3 7.26 13 4.85 13.91 3c-.91.23-1.75.75-2.45 1.32-2.54 2.08-3.54 5.75-2.34 8.9.04.1.08.2.08.33 0 .22-.15.42-.35.5-.22.1-.46.04-.64-.12a.83.83 0 01-.15-.17c-1.1-1.43-1.28-3.48-.53-5.12C5.89 10 5 12.3 5.14 14.47c.04.5.1 1 .27 1.5.14.6.4 1.2.72 1.73 1.04 1.73 2.87 2.97 4.84 3.22 2.1.27 4.35-.12 5.96-1.6 1.8-1.66 2.45-4.32 1.5-6.6l-.13-.26c-.2-.46-.47-.87-.8-1.25l.05-.01m-3.1 6.3c-.28.24-.73.5-1.08.6-1.1.4-2.2-.16-2.87-.82 1.19-.28 1.89-1.16 2.09-2.05.17-.8-.14-1.46-.27-2.23-.12-.74-.1-1.37.18-2.06.17.38.37.76.6 1.06.76 1 1.95 1.44 2.2 2.8.04.14.06.28.06.43.03.82-.32 1.72-.92 2.27h.01z"/></svg>');
              --md-admonition-icon--success: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2m-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
              --md-admonition-icon--question: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.07 11.25l-.9.92C13.45 12.89 13 13.5 13 15h-2v-.5c0-1.11.45-2.11 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41a2 2 0 00-2-2 2 2 0 00-2 2H8a4 4 0 014-4 4 4 0 014 4 3.2 3.2 0 01-.93 2.25M13 19h-2v-2h2M12 2A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10c0-5.53-4.5-10-10-10z"/></svg>');
              --md-admonition-icon--warning: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14h-2v-4h2m0 8h-2v-2h2M1 21h22L12 2 1 21z"/></svg>');
              --md-admonition-icon--failure: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12 6.47 2 12 2m3.59 5L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41 15.59 7z"/></svg>');
              --md-admonition-icon--danger: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.5 20l4.86-9.73H13V4l-5 9.73h3.5V20M12 2c2.75 0 5.1 1 7.05 2.95C21 6.9 22 9.25 22 12s-1 5.1-2.95 7.05C17.1 21 14.75 22 12 22s-5.1-1-7.05-2.95C3 17.1 2 14.75 2 12s1-5.1 2.95-7.05C6.9 3 9.25 2 12 2z"/></svg>');
              --md-admonition-icon--bug: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 12h-4v-2h4m0 6h-4v-2h4m6-6h-2.81a5.985 5.985 0 00-1.82-1.96L17 4.41 15.59 3l-2.17 2.17a6.002 6.002 0 00-2.83 0L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8z"/></svg>');
              --md-admonition-icon--example: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 13v-2h14v2H7m0 6v-2h14v2H7M7 7V5h14v2H7M3 8V5H2V4h2v4H3m-1 9v-1h3v4H2v-1h2v-.5H3v-1h1V17H2m2.25-7a.75.75 0 01.75.75c0 .2-.08.39-.21.52L3.12 13H5v1H2v-.92L4 11H2v-1h2.25z"/></svg>');
              --md-admonition-icon--quote: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 17h3l2-4V7h-6v6h3M6 17h3l2-4V7H5v6h3l-2 4z"/></svg>');
              --md-footnotes-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 7v4H5.83l3.58-3.59L8 6l-6 6 6 6 1.41-1.42L5.83 13H21V7h-2z"/></svg>');
              --md-details-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>');
              --md-tasklist-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/></svg>');
              --md-tasklist-icon--checked: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
              --md-nav-icon--prev: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>');
              --md-nav-icon--next: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>');
              --md-toc-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>');
              --md-clipboard-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1z"/></svg>');
              --md-search-result-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h7c-.41-.25-.8-.56-1.14-.9-.33-.33-.61-.7-.86-1.1H6V4h7v5h5v1.18c.71.16 1.39.43 2 .82V8l-6-6m6.31 16.9c1.33-2.11.69-4.9-1.4-6.22-2.11-1.33-4.91-.68-6.22 1.4-1.34 2.11-.69 4.89 1.4 6.22 1.46.93 3.32.93 4.79.02L22 23.39 23.39 22l-3.08-3.1m-3.81.1a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5z"/></svg>');
              --md-source-forks-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 3.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm0 2.122a2.25 2.25 0 1 0-1.5 0v.878A2.25 2.25 0 0 0 5.75 8.5h1.5v2.128a2.251 2.251 0 1 0 1.5 0V8.5h1.5a2.25 2.25 0 0 0 2.25-2.25v-.878a2.25 2.25 0 1 0-1.5 0v.878a.75.75 0 0 1-.75.75h-4.5A.75.75 0 0 1 5 6.25v-.878zm3.75 7.378a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm3-8.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5z"/></svg>');
              --md-source-repositories-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2 2.5A2.5 2.5 0 0 1 4.5 0h8.75a.75.75 0 0 1 .75.75v12.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 1 1 0-1.5h1.75v-2h-8a1 1 0 0 0-.714 1.7.75.75 0 0 1-1.072 1.05A2.495 2.495 0 0 1 2 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 0 1 1-1h8zM5 12.25v3.25a.25.25 0 0 0 .4.2l1.45-1.087a.25.25 0 0 1 .3 0L8.6 15.7a.25.25 0 0 0 .4-.2v-3.25a.25.25 0 0 0-.25-.25h-3.5a.25.25 0 0 0-.25.25z"/></svg>');
              --md-source-stars-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.75.75 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25zm0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41L8 2.694v.001z"/></svg>');
              --md-source-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2.5 7.775V2.75a.25.25 0 0 1 .25-.25h5.025a.25.25 0 0 1 .177.073l6.25 6.25a.25.25 0 0 1 0 .354l-5.025 5.025a.25.25 0 0 1-.354 0l-6.25-6.25a.25.25 0 0 1-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.75 1.75 0 0 1 1 7.775zM6 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/></svg>');
              --md-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="m310.6 246.6-127.1 128c-7.1 6.3-15.3 9.4-23.5 9.4s-16.38-3.125-22.63-9.375l-127.1-128C.224 237.5-2.516 223.7 2.438 211.8S19.07 192 32 192h255.1c12.94 0 24.62 7.781 29.58 19.75s3.12 25.75-6.08 34.85z"/></svg>');
            }
  
            :host > * {
              /* CODE */
              --md-code-fg-color: ${_.palette.text.primary};
              --md-code-bg-color: ${_.palette.background.paper};
              --md-code-hl-color: ${(0,x.Fq)(_.palette.warning.main,.5)};
              --md-code-hl-keyword-color: ${Rn?_.palette.primary.light:_.palette.primary.dark};
              --md-code-hl-function-color: ${Rn?_.palette.secondary.light:_.palette.secondary.dark};
              --md-code-hl-string-color: ${Rn?_.palette.success.light:_.palette.success.dark};
              --md-code-hl-number-color: ${Rn?_.palette.error.light:_.palette.error.dark};
              --md-code-hl-constant-color: var(--md-code-hl-function-color);
              --md-code-hl-special-color: var(--md-code-hl-function-color);
              --md-code-hl-name-color: var(--md-code-fg-color);
              --md-code-hl-comment-color: var(--md-default-fg-color--light);
              --md-code-hl-generic-color: var(--md-default-fg-color--light);
              --md-code-hl-variable-color: var(--md-default-fg-color--light);
              --md-code-hl-operator-color: var(--md-default-fg-color--light);
              --md-code-hl-punctuation-color: var(--md-default-fg-color--light);
  
              /* TYPESET */
              --md-typeset-font-size: 1rem;
              --md-typeset-color: var(--md-default-fg-color);
              --md-typeset-a-color: var(--md-accent-fg-color);
              --md-typeset-table-color: ${_.palette.text.primary};
              --md-typeset-del-color: ${Rn?(0,x.Fq)(_.palette.error.dark,.5):(0,x.Fq)(_.palette.error.light,.5)};
              --md-typeset-ins-color: ${Rn?(0,x.Fq)(_.palette.success.dark,.5):(0,x.Fq)(_.palette.success.light,.5)};
              --md-typeset-mark-color: ${Rn?(0,x.Fq)(_.palette.warning.dark,.5):(0,x.Fq)(_.palette.warning.light,.5)};
            }
  
            @media screen and (max-width: 76.1875em) {
              :host > * {
                /* TYPESET */
                --md-typeset-font-size: .9rem;
              }
            }
  
            @media screen and (max-width: 600px) {
              :host > * {
                /* TYPESET */
                --md-typeset-font-size: .7rem;
              }
            }
            `}),sn({css:`
              body {
                --md-text-color: var(--md-default-fg-color);
                --md-text-link-color: var(--md-accent-fg-color);
                --md-text-font-family: ${_.typography.fontFamily};
                font-family: var(--md-text-font-family);
                background-color: unset;
              }
            `}),sn({css:`
              .md-grid {
                max-width: 100%;
                margin: 0;
              }
  
              .md-nav {
                font-size: calc(var(--md-typeset-font-size) * 0.9);
              }
              .md-nav__link {
                display: flex;
                align-items: center;
                justify-content: space-between;
              }
              .md-nav__icon {
                height: 20px !important;
                width: 20px !important;
                margin-left:${_.spacing(1)}px;
              }
              .md-nav__icon svg {
                margin: 0;
                width: 20px !important;
                height: 20px !important;
              }
              .md-nav__icon:after {
                width: 20px !important;
                height: 20px !important;
              }
  
              .md-main__inner {
                margin-top: 0;
              }
  
              .md-sidebar {
                bottom: 75px;
                position: fixed;
                width: 16rem;
                overflow-y: auto;
                overflow-x: hidden;
                scrollbar-color: rgb(193, 193, 193) #eee;
                scrollbar-width: thin;
              }
              .md-sidebar .md-sidebar__scrollwrap {
                width: calc(16rem - 10px);
              }
              .md-sidebar--secondary {
                right: ${_.spacing(3)}px;
              }
              .md-sidebar::-webkit-scrollbar {
                width: 5px;
              }
              .md-sidebar::-webkit-scrollbar-button {
                width: 5px;
                height: 5px;
              }
              .md-sidebar::-webkit-scrollbar-track {
                background: #eee;
                border: 1 px solid rgb(250, 250, 250);
                box-shadow: 0px 0px 3px #dfdfdf inset;
                border-radius: 3px;
              }
              .md-sidebar::-webkit-scrollbar-thumb {
                width: 5px;
                background: rgb(193, 193, 193);
                border: transparent;
                border-radius: 3px;
              }
              .md-sidebar::-webkit-scrollbar-thumb:hover {
                background: rgb(125, 125, 125);
              }
  
              .md-content {
                max-width: calc(100% - 16rem * 2);
                margin-left: 16rem;
                margin-bottom: 50px;
              }
  
              .md-footer {
                position: fixed;
                bottom: 0px;
              }
              .md-footer__title {
                background-color: unset;
              }
              .md-footer-nav__link {
                width: 16rem;
              }
  
              .md-dialog {
                background-color: unset;
              }
  
              @media screen and (min-width: 76.25em) {
                .md-sidebar {
                  height: auto;
                }
              }
              
              @media screen and (max-width: 76.1875em) {
                .md-nav {
                  transition: none !important;
                  background-color: var(--md-default-bg-color)
                }
                .md-nav--primary .md-nav__title {
                  cursor: auto;
                  color: var(--md-default-fg-color);
                  font-weight: 700;
                  white-space: normal;
                  line-height: 1rem;
                  height: auto;
                  display: flex;
                  flex-flow: column;
                  row-gap: 1.6rem;
                  padding: 1.2rem .8rem .8rem;
                  background-color: var(--md-default-bg-color);
                }
                .md-nav--primary .md-nav__title~.md-nav__list {
                  box-shadow: none;
                }
                .md-nav--primary .md-nav__title ~ .md-nav__list > :first-child {
                  border-top: none;
                }
                .md-nav--primary .md-nav__title .md-nav__button {
                  display: none;
                }
                .md-nav--primary .md-nav__title .md-nav__icon {
                  color: var(--md-default-fg-color);
                  position: static;
                  height: auto;
                  margin: 0 0 0 -0.2rem;
                }
                .md-nav--primary > .md-nav__title [for="none"] {
                  padding-top: 0;
                }
                .md-nav--primary .md-nav__item {
                  border-top: none;
                }
                .md-nav--primary :is(.md-nav__title,.md-nav__item) {
                  font-size : var(--md-typeset-font-size);
                }
                .md-nav .md-source {
                  display: none;
                }
  
                .md-sidebar {
                  height: 100%;
                }
                .md-sidebar--primary {
                  width: 12.1rem !important;
                  z-index: 200;
                  left: ${Pr?"calc(-12.1rem + 242px)":"calc(-12.1rem + 72px)"} !important;
                }
                .md-sidebar--secondary:not([hidden]) {
                  display: none;
                }
  
                .md-content {
                  max-width: 100%;
                  margin-left: 0;
                }
  
                .md-header__button {
                  margin: 0.4rem 0;
                  margin-left: 0.4rem;
                  padding: 0;
                }
  
                .md-overlay {
                  left: 0;
                }
  
                .md-footer {
                  position: static;
                  padding-left: 0;
                }
                .md-footer-nav__link {
                  /* footer links begin to overlap at small sizes without setting width */
                  width: 50%;
                }
              }
  
              @media screen and (max-width: 600px) {
                .md-sidebar--primary {
                  left: -12.1rem !important;
                  width: 12.1rem;
                }
              }
            `}),sn({css:`
              .md-typeset {
                font-size: var(--md-typeset-font-size);
              }
  
              ${Tn.reduce((Br,Gr)=>{const Kr=_.typography[Gr],{lineHeight:Nr,fontFamily:to,fontWeight:no,fontSize:ro}=Kr,ao=va=>{let wa=1;return typeof va=="number"&&(wa=va/16*.6),typeof va=="string"&&(wa=va.replace("rem","")),`calc(${wa} * var(--md-typeset-font-size))`};return Br.concat(`
                  .md-typeset ${Gr} {
                    color: var(--md-default-fg-color);
                    line-height: ${Nr};
                    font-family: ${to};
                    font-weight: ${no};
                    font-size: ${ao(ro)};
                  }
                `)},"")}
  
              .md-typeset .md-content__button {
                color: var(--md-default-fg-color);
              }
  
              .md-typeset hr {
                border-bottom: 0.05rem dotted ${_.palette.divider};
              }
  
              .md-typeset details {
                font-size: var(--md-typeset-font-size) !important;
              }
              .md-typeset details summary {
                padding-left: 2.5rem !important;
              }
              .md-typeset details summary:before,
              .md-typeset details summary:after {
                top: 50% !important;
                width: 20px !important;
                height: 20px !important;
                transform: rotate(0deg) translateY(-50%) !important;
              }
              .md-typeset details[open] > summary:after {
                transform: rotate(90deg) translateX(-50%) !important;
              }
  
              .md-typeset blockquote {
                color: var(--md-default-fg-color--light);
                border-left: 0.2rem solid var(--md-default-fg-color--light);
              }
  
              .md-typeset table:not([class]) {
                font-size: var(--md-typeset-font-size);
                border: 1px solid var(--md-default-fg-color);
                border-bottom: none;
                border-collapse: collapse;
              }
              .md-typeset table:not([class]) th {
                font-weight: bold;
              }
              .md-typeset table:not([class]) td, .md-typeset table:not([class]) th {
                border-bottom: 1px solid var(--md-default-fg-color);
              }
  
              .md-typeset pre > code::-webkit-scrollbar-thumb {
                background-color: hsla(0, 0%, 0%, 0.32);
              }
              .md-typeset pre > code::-webkit-scrollbar-thumb:hover {
                background-color: hsla(0, 0%, 0%, 0.87);
              }
            `}),sn({css:`
              /*
                Disable CSS animations on link colors as they lead to issues in dark mode.
                The dark mode color theme is applied later and theirfore there is always an animation from light to dark mode when navigation between pages.
              */
              .md-dialog, .md-nav__link, .md-footer__link, .md-typeset a, .md-typeset a::before, .md-typeset .headerlink {
                transition: none;
              }
            `}),sn({css:`
              /* HIGHLIGHT */
              .highlight .md-clipboard:after {
                content: unset;
              }
  
              .highlight .nx {
                color: ${Rn?"#ff53a3":"#ec407a"};
              }
  
              /* CODE HILITE */
              .codehilite .gd {
                background-color: ${Rn?"rgba(248,81,73,0.65)":"#fdd"};
              }
  
              .codehilite .gi {
                background-color: ${Rn?"rgba(46,160,67,0.65)":"#dfd"};
              }
  
              /* TABBED */
              .tabbed-set>input:nth-child(1):checked~.tabbed-labels>:nth-child(1),
              .tabbed-set>input:nth-child(2):checked~.tabbed-labels>:nth-child(2),
              .tabbed-set>input:nth-child(3):checked~.tabbed-labels>:nth-child(3),
              .tabbed-set>input:nth-child(4):checked~.tabbed-labels>:nth-child(4),
              .tabbed-set>input:nth-child(5):checked~.tabbed-labels>:nth-child(5),
              .tabbed-set>input:nth-child(6):checked~.tabbed-labels>:nth-child(6),
              .tabbed-set>input:nth-child(7):checked~.tabbed-labels>:nth-child(7),
              .tabbed-set>input:nth-child(8):checked~.tabbed-labels>:nth-child(8),
              .tabbed-set>input:nth-child(9):checked~.tabbed-labels>:nth-child(9),
              .tabbed-set>input:nth-child(10):checked~.tabbed-labels>:nth-child(10),
              .tabbed-set>input:nth-child(11):checked~.tabbed-labels>:nth-child(11),
              .tabbed-set>input:nth-child(12):checked~.tabbed-labels>:nth-child(12),
              .tabbed-set>input:nth-child(13):checked~.tabbed-labels>:nth-child(13),
              .tabbed-set>input:nth-child(14):checked~.tabbed-labels>:nth-child(14),
              .tabbed-set>input:nth-child(15):checked~.tabbed-labels>:nth-child(15),
              .tabbed-set>input:nth-child(16):checked~.tabbed-labels>:nth-child(16),
              .tabbed-set>input:nth-child(17):checked~.tabbed-labels>:nth-child(17),
              .tabbed-set>input:nth-child(18):checked~.tabbed-labels>:nth-child(18),
              .tabbed-set>input:nth-child(19):checked~.tabbed-labels>:nth-child(19),
              .tabbed-set>input:nth-child(20):checked~.tabbed-labels>:nth-child(20) {
                color: var(--md-accent-fg-color);
                border-color: var(--md-accent-fg-color);
              }
  
              /* TASK-LIST */
              .task-list-control .task-list-indicator::before {
                background-color: ${_.palette.action.disabledBackground};
              }
              .task-list-control [type="checkbox"]:checked + .task-list-indicator:before {
               background-color: ${_.palette.success.main};
              }
  
              /* ADMONITION */
              .admonition {
                font-size: var(--md-typeset-font-size) !important;
              }
              .admonition .admonition-title {
                padding-left: 2.5rem !important;
              }
  
              .admonition .admonition-title:before {
                top: 50% !important;
                width: 20px !important;
                height: 20px !important;
                transform: translateY(-50%) !important;
              }
            `})]),[je,nn,me,z,ue,f,_,Rn,Pr]),hr=(0,a.useCallback)(async ur=>an(ur,[un(),Ta(_),_a({baseUrl:window.location.origin,onClick:(gr,Br)=>{var Gr;const Kr=gr.ctrlKey||gr.metaKey,Nr=new URL(Br);Nr.hash?Kr?window.open(`${Nr.pathname}${Nr.hash}`,"_blank"):(P(`${Nr.pathname}${Nr.hash}`),(Gr=ur==null?void 0:ur.querySelector(`#${Nr.hash.slice(1)}`))==null||Gr.scrollIntoView()):Kr?window.open(Nr.pathname,"_blank"):P(Nr.pathname)}}),He({docStorageUrl:await f.getApiOrigin(),onLoading:gr=>{gr.style.setProperty("opacity","0")},onLoaded:gr=>{var Br;gr.style.removeProperty("opacity"),(Br=gr.querySelector(".md-nav__title"))==null||Br.removeAttribute("for"),Xn(Array.from(gr.querySelectorAll(".md-sidebar")))}})]),[_,P,f]);return(0,a.useEffect)(()=>{if(!Sn)return()=>{};let ur=!0;return Zr(Sn,fn).then(async gr=>{if(!(gr!=null&&gr.innerHTML)||!ur)return;window.scroll({top:0});const Br=await hr(gr);Cr(Br)}),()=>{ur=!1}},[Sn,fn,Zr,hr]),Gn},Zn=(0,Je.Z)({search:{width:"100%","@media (min-width: 76.1875em)":{width:"calc(100% - 34.4rem)",margin:"0 auto"}}}),Pn=Vn(j=>{const{withSearch:P=!0,onReady:_}=j,f=Zn(),z=(0,u.$L)(),{entityRef:ue,shadowRoot:me,setShadowRoot:je}=(0,u.x1)(),nn=Yn(ue),[qt,fn]=(0,a.useState)(hn({...(0,Ke.Z)(),insertionPoint:void 0})),Sn=(0,a.useCallback)(Pr=>{var _r;if(!nn||!Pr)return;fn(hn({...(0,Ke.Z)(),insertionPoint:nn.querySelector("head")||void 0}));const Dr=(_r=Pr.shadowRoot)!=null?_r:Pr.attachShadow({mode:"open"});Dr.innerHTML="",Dr.appendChild(nn),je(Dr),_ instanceof Function&&_()},[nn,je,_]),Rn=me==null?void 0:me.querySelector('[data-md-component="content"]'),Fn=me==null?void 0:me.querySelector('div[data-md-component="sidebar"][data-md-type="navigation"], div[data-md-component="navigation"]'),Xn=me==null?void 0:me.querySelector('div[data-md-component="sidebar"][data-md-type="toc"], div[data-md-component="toc"]'),Gn=document.createElement("div");Fn==null||Fn.prepend(Gn);const Cr=document.createElement("div");return Xn==null||Xn.prepend(Cr),nn?a.createElement(m.VY,null,a.createElement(q.Z,{container:!0},a.createElement(q.Z,{xs:12,item:!0},a.createElement(At,null)),P&&a.createElement(q.Z,{className:f.search,xs:"auto",item:!0},a.createElement(k,{entityId:ue})),a.createElement(q.Z,{xs:12,item:!0},a.createElement(Be.ZP,{jss:qt,sheetsManager:new Map},a.createElement("div",{ref:Sn,"data-testid":"techdocs-native-shadowroot"}),a.createElement(st.Z,{container:Gn},z.renderComponentsByLocation(u.oZ.PrimarySidebar)),a.createElement(st.Z,{container:Rn},z.renderComponentsByLocation(u.oZ.Content)),a.createElement(st.Z,{container:Cr},z.renderComponentsByLocation(u.oZ.SecondarySidebar)))))):a.createElement(m.VY,null,a.createElement(m.Ex,null))}),Hn=null,rr=(0,e.NT)({id:"techdocs:index-page"}),Mr=(0,e.NT)({id:"techdocs:reader-page",params:["namespace","kind","name"]}),Ir=(0,e.NT)({id:"techdocs:catalog-reader-view"}),Tr=a.createElement(ft.Z,{animation:"wave",variant:"text",height:40}),kr=j=>{const{children:P}=j,_=(0,u.$L)(),f=(0,e.h_)(e.Ds),{title:z,setTitle:ue,subtitle:me,setSubtitle:je,entityRef:nn,metadata:{value:qt},entityMetadata:{value:fn}}=(0,u.x1)();(0,a.useEffect)(()=>{!qt||(ue(Dr=>{const{site_name:Zr}=qt;return Dr||Zr}),je(Dr=>{let{site_description:Zr}=qt;return(!Zr||Zr==="None")&&(Zr="Home"),Dr||Zr}))},[qt,ue,je]);const Sn=f.getOptional("app.title")||"Backstage",Rn=[me,z,Sn].filter(Boolean).join(" | "),{locationMetadata:Fn,spec:Xn}=fn||{},Gn=Xn==null?void 0:Xn.lifecycle,Cr=fn?(0,wn.hF)(fn,sr.S4):[],Pr=(0,e.tg)(rr)(),_r=a.createElement(a.Fragment,null,a.createElement(m.i9,{label:"Component",value:a.createElement(wn.dx,{color:"inherit",entityRef:nn,defaultKind:"Component"})}),Cr.length>0&&a.createElement(m.i9,{label:"Owner",value:a.createElement(wn.rI,{color:"inherit",entityRefs:Cr,defaultKind:"group"})}),Gn?a.createElement(m.i9,{label:"Lifecycle",value:Gn}):null,Fn&&Fn.type!=="dir"&&Fn.type!=="file"?a.createElement(m.i9,{label:"",value:a.createElement("a",{href:Fn.target,target:"_blank",rel:"noopener noreferrer"},a.createElement(jn.Z,{style:{marginTop:"-25px",fill:"#fff"}}))}):null);return a.createElement(m.h4,{type:"Documentation",typeLink:Pr,title:z||Tr,subtitle:me||Tr},a.createElement(Mn.Z,{titleTemplate:"%s"},a.createElement("title",null,Rn)),_r,P,_.renderComponentsByLocation(u.oZ.Header))},Sr=(0,Je.Z)(j=>({root:{gridArea:"pageSubheader",flexDirection:"column",minHeight:"auto",padding:j.spacing(3,3,0)}})),Yr=({toolbarProps:j})=>{const P=Sr(),f=(0,u.$L)().renderComponentsByLocation(u.oZ.Subheader);return f?a.createElement(Ue.Z,{classes:P,...j},f&&a.createElement(oe.Z,{display:"flex",justifyContent:"flex-end",width:"100%",flexWrap:"wrap"},f)):null},Xr=({withSearch:j,withHeader:P=!0})=>a.createElement(m.T3,{themeId:"documentation"},P&&a.createElement(kr,null),a.createElement(Yr,null),a.createElement(Pn,{withSearch:j})),Qr=j=>{const{kind:P,name:_,namespace:f}=(0,o.UO)(),{children:z,entityRef:ue={kind:P,name:_,namespace:f}}=j,me=(0,o.pC)();if(!z){const nn=(me?a.Children.toArray(me.props.children):[]).find(qt=>{var fn,Sn;const{type:Rn}=qt;return!((Sn=(fn=Rn==null?void 0:Rn.__backstage_data)==null?void 0:fn.map)!=null&&Sn.get(u.Zz))});return a.createElement(u.ZS,{entityRef:ue},nn||a.createElement(Xr,null))}return a.createElement(u.ZS,{entityRef:ue},({metadata:je,entityMetadata:nn,onReady:qt})=>a.createElement(m.T3,{themeId:"documentation"},z instanceof Function?z({entityRef:ue,techdocsMetadataValue:je.value,entityMetadataValue:nn.value,onReady:qt}):z))};function cr(j,P){return P.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")?j:j.toLocaleLowerCase("en-US")}const Rr=j=>{const{entities:P}=j,_=(0,e.tg)(Mr),f=(0,e.h_)(e.Ds);return P?a.createElement(m.Oh,{"data-testid":"docs-explore"},P!=null&&P.length?P.map((z,ue)=>{var me,je;return a.createElement(he.Z,{key:ue},a.createElement(De.Z,null,a.createElement(m.hu,{title:(me=z.metadata.title)!=null?me:z.metadata.name})),a.createElement(we.Z,null,z.metadata.description),a.createElement(Ne.Z,null,a.createElement(m.zx,{to:_({namespace:cr((je=z.metadata.namespace)!=null?je:"default",f),kind:cr(z.kind,f),name:cr(z.metadata.name,f)}),color:"primary","data-testid":"read_docs"},"Read Docs")))}):null):null},qr=()=>{const{loading:j,error:P,entities:_}=useEntityList();return P?React.createElement(WarningPanel,{severity:"error",title:"Could not load available documentation."},React.createElement(CodeSnippet,{language:"text",text:P.toString()})):j||!_?React.createElement(Progress,null):(_.sort((f,z)=>{var ue,me;return((ue=f.metadata.title)!=null?ue:f.metadata.name).localeCompare((me=z.metadata.title)!=null?me:z.metadata.name)}),React.createElement(Rr,{entities:_}))},pa=(0,ct.Z)({root:{color:"#f3ba37"}})(Ve.Z),sa={createCopyDocsUrlAction(j){return P=>({icon:()=>a.createElement(Ct.Z,{fontSize:"small"}),tooltip:"Click to copy documentation link to clipboard",onClick:()=>j(`${window.location.origin}${P.resolved.docsUrl}`)})},createStarEntityAction(j,P){return({entity:_})=>{const f=j(_);return{cellStyle:{paddingLeft:"1em"},icon:()=>f?a.createElement(pa,null):a.createElement(Xt.Z,null),tooltip:f?"Remove from favorites":"Add to favorites",onClick:()=>P(_)}}}};function Va(j){return j.metadata.title||j.metadata.name}const ha={createNameColumn(){return{title:"Document",field:"entity.metadata.name",highlight:!0,render:j=>a.createElement(m.uw,{value:a.createElement(m.rU,{to:j.resolved.docsUrl},Va(j.entity)),subvalue:j.entity.metadata.description})}},createOwnerColumn(){return{title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:j})=>a.createElement(wn.rI,{entityRefs:j.ownedByRelations,defaultKind:"group"})}},createTypeColumn(){return{title:"Type",field:"entity.spec.type"}}},ga=j=>{const{entities:P,title:_,loading:f,columns:z,actions:ue}=j,[,me]=(0,Jn.Z)(),je=(0,e.tg)(Mr),nn=(0,e.h_)(e.Ds);if(!P)return null;const qt=P.map(Rn=>{var Fn;const Xn=(0,wn.hF)(Rn,sr.S4);return{entity:Rn,resolved:{docsUrl:je({namespace:cr((Fn=Rn.metadata.namespace)!=null?Fn:"default",nn),kind:cr(Rn.kind,nn),name:cr(Rn.metadata.name,nn)}),ownedByRelations:Xn,ownedByRelationsTitle:Xn.map(Gn=>(0,wn.$3)(Gn,{defaultKind:"group"})).join(", ")}}}),fn=[ha.createNameColumn(),ha.createOwnerColumn(),ha.createTypeColumn()],Sn=[sa.createCopyDocsUrlAction(me)];return a.createElement(a.Fragment,null,f||qt&&qt.length>0?a.createElement(m.iA,{isLoading:f,options:{paging:!0,pageSize:20,search:!0,actionsColumnIndex:-1},data:qt,columns:z||fn,actions:ue||Sn,title:_?`${_} (${qt.length})`:`All (${qt.length})`}):a.createElement(m.ub,{missing:"data",title:"No documents to show",description:"Create your own document. Check out our Getting Started Information",action:a.createElement(m.zx,{color:"primary",to:"https://backstage.io/docs/features/techdocs/getting-started",variant:"contained"},"DOCS")}))};ga.columns=ha,ga.actions=sa;const Da=j=>{var P,_;const{columns:f,actions:z}=j,{loading:ue,error:me,entities:je,filters:nn}=(0,wn.wp)(),{isStarredEntity:qt,toggleStarredEntity:fn}=(0,wn.CR)(),[,Sn]=(0,Jn.Z)(),Rn=(0,Or.capitalize)((_=(P=nn.user)==null?void 0:P.value)!=null?_:"all"),Fn=[sa.createCopyDocsUrlAction(Sn),sa.createStarEntityAction(qt,fn)];return me?a.createElement(m.GB,{severity:"error",title:"Could not load available documentation."},a.createElement(m.Oi,{language:"text",text:me.toString()})):a.createElement(ga,{title:Rn,entities:je,loading:ue,actions:z||Fn,columns:f})};Da.columns=ha,Da.actions=sa;const $a=j=>{var P;const{children:_}=j,z=`Documentation available in ${(P=(0,e.h_)(e.Ds).getOptionalString("organization.name"))!=null?P:"Backstage"}`;return a.createElement(m.g9,{title:"Documentation",subtitle:z,themeId:"documentation"},_)};class Ha{getCatalogFilters(){return{"metadata.annotations.backstage.io/techdocs-ref":wn.n3}}}const Ga=()=>{const{updateFilters:j}=(0,wn.wp)();return(0,a.useEffect)(()=>{j({techdocs:new Ha})},[j]),null},Ja=j=>{const{initialFilter:P="all",columns:_,actions:f}=j;return a.createElement($a,null,a.createElement(m.VY,null,a.createElement(m.yW,{title:""},a.createElement(m.qt,null,"Discover documentation in your ecosystem.")),a.createElement(wn.UO,null,a.createElement(wn._i,null,a.createElement(wn._i.Filters,null,a.createElement(Ga,null),a.createElement(wn.EW,{initialFilter:P}),a.createElement(wn.dq,null),a.createElement(wn.xE,null)),a.createElement(wn._i.Content,null,a.createElement(Da,{actions:f,columns:_}))))))},ra=(0,e.rx)({id:"techdocs",apis:[(0,e.ni)({api:Ln,deps:{configApi:e.Ds,discoveryApi:e.NW,identityApi:e.$4,fetchApi:e.gP},factory:({configApi:j,discoveryApi:P,identityApi:_,fetchApi:f})=>new fr({configApi:j,discoveryApi:P,identityApi:_,fetchApi:f})}),(0,e.ni)({api:Nn,deps:{configApi:e.Ds,discoveryApi:e.NW,fetchApi:e.gP},factory:({configApi:j,discoveryApi:P,fetchApi:_})=>new Qn({configApi:j,discoveryApi:P,fetchApi:_})})],routes:{root:rr,docRoot:Mr,entityContent:Ir}}),vo=ra.provide((0,e.P4)({name:"TechdocsPage",component:()=>Promise.resolve().then(function(){return La}).then(j=>j.Router),mountPoint:rr})),Ya=ra.provide((0,e.P4)({name:"EntityTechdocsContent",component:()=>Promise.resolve().then(function(){return La}).then(j=>j.EmbeddedDocsRouter),mountPoint:Ir})),yo=ra.provide((0,e.P4)({name:"TechDocsCustomHome",component:()=>t.e(3393).then(t.bind(t,33393)).then(j=>j.TechDocsCustomHome),mountPoint:rr})),Xa=ra.provide((0,e.P4)({name:"TechDocsIndexPage",component:()=>Promise.resolve().then(function(){return qa}).then(j=>j.TechDocsIndexPage),mountPoint:rr})),Ma=ra.provide((0,e.P4)({name:"TechDocsReaderPage",component:()=>t.e(4916).then(t.bind(t,54916)).then(j=>j.TechDocsReaderPage),mountPoint:Mr})),Qa=({entity:j})=>{const P=(0,sr.iB)(j);return a.createElement(Ma,{entityRef:P},a.createElement(Yr,null),a.createElement(Pn,{withSearch:!1}))},ia=()=>(0,o.pC)()||a.createElement(Ja,null);var qa=Object.freeze({__proto__:null,TechDocsIndexPage:ia});const Ea="backstage.io/techdocs-ref";var La=Object.freeze({__proto__:null,isTechDocsAvailable:j=>{var P,_;return Boolean((_=(P=j==null?void 0:j.metadata)==null?void 0:P.annotations)==null?void 0:_[Ea])},Router:()=>a.createElement(o.Z5,null,a.createElement(o.AW,{path:"/",element:a.createElement(ia,null)}),a.createElement(o.AW,{path:"/:namespace/:kind/:name/*",element:a.createElement(Qr,null)})),EmbeddedDocsRouter:j=>{var P;const{children:_}=j,{entity:f}=(0,wn.X2)();return((P=f.metadata.annotations)==null?void 0:P[Ea])?a.createElement(Cn.wQ,null,a.createElement(o.AW,{path:"/*",element:a.createElement(Qa,{entity:f})},_)):a.createElement(m.sk,{annotation:Ea})}})},70557:function(Lt,c,t){t.d(c,{$d:function(){return e.E},I6:function(){return e.g},Jl:function(){return e.e},bf:function(){return e.r},s4:function(){return e.t}});var e=t(45269),n=t(30705),p=t(32272),a=t(76372),o=t.n(a),m=t(2784),u=t(49558),v=t(66565),d=t(15277),y=t.n(d),h=t(97592),M=t(49462),L=t(1854),$=t(47093),J=t(82717),g=t.n(J),S=t(35368),E=t.n(S),I=t(18671),D=t(73495),T=t(34520),i=t(76635),O=t.n(i),W=t(48377)},43229:function(Lt,c,t){t.d(c,{H2:function(){return pn},Zr:function(){return _n},kG:function(){return Et}});var e=t(30705),n=t(2784),p=t(47603),a=t(49558),o=t(10289),m=t(90436),u=t(77277),v=t(38402),d=t(86136),y=t(49378),h=t(80030),M=t(9520),L=t(11776),$=t(82938),J=t(60905),g=t(86619),S=t(61837),E=t(79692),I=t(43434),D=t(48348),T=t(12231),i=t(11640),O=t(33375),W=t(64279),Ce=t(71554),$e=t(43054),Qe=t(72164),it=t(59324),lt=t(13737),qe=t(31168);const $t=(0,e.NT)({id:"user-settings"}),pn=(0,e.rx)({id:"user-settings",routes:{settingsPage:$t}}).provide((0,e.P4)({name:"UserSettingsPage",component:()=>Promise.resolve().then(function(){return Ye}).then(Y=>Y.SettingsPage),mountPoint:$t})),_n=Y=>{const ce=(0,e.tg)($t),_e=Y.icon?Y.icon:p.Z;return n.createElement(a.R6,{text:"Settings",to:ce(),icon:_e})},U=`auth:
  providers:
    google:
      development:
        clientId: \${AUTH_GOOGLE_CLIENT_ID}
        clientSecret: \${AUTH_GOOGLE_CLIENT_SECRET}
`,Re=()=>n.createElement(a.ub,{missing:"content",title:"No Authentication Providers",description:"You can add Authentication Providers to Backstage which allows you to use these providers to authenticate yourself.",action:n.createElement(n.Fragment,null,n.createElement(m.Z,{variant:"body1"},"Open ",n.createElement("code",null,"app-config.yaml")," and make the changes as highlighted below:"),n.createElement(a.Oi,{text:U,language:"yaml",showLineNumbers:!0,highlightedNumbers:[3,4,5,6,7,8],customStyle:{background:"inherit",fontSize:"115%"}}),n.createElement(u.Z,{variant:"contained",color:"primary",href:"https://backstage.io/docs/auth/add-auth-provider"},"Read More"))}),w=({title:Y,description:ce,icon:_e,apiRef:Ze})=>{const ie=(0,e.h_)(Ze),[de,ve]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let ge=!1;const nt=ie.sessionState$().subscribe(bt=>{ge||ve(bt===e.sM.SignedIn)});return()=>{ge=!0,nt.unsubscribe()}},[ie]),n.createElement(v.Z,null,n.createElement(d.Z,null,n.createElement(_e,null)),n.createElement(y.Z,{primary:Y,secondary:n.createElement(h.ZP,{placement:"top",arrow:!0,title:ce},n.createElement("span",null,ce)),secondaryTypographyProps:{noWrap:!0,style:{width:"80%"}}}),n.createElement(M.Z,null,n.createElement(h.ZP,{placement:"top",arrow:!0,title:de?`Sign out from ${Y}`:`Sign in to ${Y}`},n.createElement(u.Z,{variant:"outlined",color:"primary",onClick:()=>de?ie.signOut():ie.signIn()},de?"Sign out":"Sign in"))))},Ie=({configuredProviders:Y})=>n.createElement(n.Fragment,null,Y.includes("google")&&n.createElement(w,{title:"Google",description:"Provides authentication towards Google APIs and identities",apiRef:e.Kp,icon:i.Z}),Y.includes("microsoft")&&n.createElement(w,{title:"Microsoft",description:"Provides authentication towards Microsoft APIs and identities",apiRef:e.p_,icon:i.Z}),Y.includes("github")&&n.createElement(w,{title:"GitHub",description:"Provides authentication towards GitHub APIs",apiRef:e.F4,icon:i.Z}),Y.includes("gitlab")&&n.createElement(w,{title:"GitLab",description:"Provides authentication towards GitLab APIs",apiRef:e.ux,icon:i.Z}),Y.includes("okta")&&n.createElement(w,{title:"Okta",description:"Provides authentication towards Okta APIs",apiRef:e.D,icon:i.Z}),Y.includes("bitbucket")&&n.createElement(w,{title:"Bitbucket",description:"Provides authentication towards Bitbucket APIs",apiRef:e.bq,icon:i.Z}),Y.includes("onelogin")&&n.createElement(w,{title:"OneLogin",description:"Provides authentication towards OneLogin APIs",apiRef:e.gW,icon:i.Z}),Y.includes("atlassian")&&n.createElement(w,{title:"Atlassian",description:"Provides authentication towards Atlassian APIs",apiRef:e.uB,icon:i.Z})),fe=({providerSettings:Y})=>{const _e=(0,e.h_)(e.Ds).getOptionalConfig("auth.providers"),Ze=(_e==null?void 0:_e.keys())||[],ie=Y!=null?Y:n.createElement(Ie,{configuredProviders:Ze});return!Y&&!(Ze!=null&&Ze.length)?n.createElement(Re,null):n.createElement(a.rJ,{title:"Available Providers"},n.createElement(L.Z,{dense:!0},ie))},A=`import { createPlugin } from '@backstage/core-plugin-api';

export default createPlugin({
  id: 'plugin-name',
  featureFlags: [{ name: 'enable-example-feature' }],
});
`,H=()=>n.createElement(a.ub,{missing:"content",title:"No Feature Flags",description:"Feature Flags make it possible for plugins to register features in Backstage for users to opt into. You can use this to split out logic in your code for manual A/B testing, etc.",action:n.createElement(n.Fragment,null,n.createElement(m.Z,{variant:"body1"},"An example for how to add a feature flag is highlighted below:"),n.createElement(a.Oi,{text:A,language:"typescript",showLineNumbers:!0,highlightedNumbers:[6],customStyle:{background:"inherit",fontSize:"115%"}}),n.createElement(u.Z,{variant:"contained",color:"primary",href:"https://backstage.io/docs/api/utility-apis"},"Read More"))}),re=({flag:Y,enabled:ce,toggleHandler:_e})=>n.createElement(v.Z,{divider:!0,button:!0,onClick:()=>_e(Y.name)},n.createElement(d.Z,null,n.createElement(h.ZP,{placement:"top",arrow:!0,title:ce?"Disable":"Enable"},n.createElement($.Z,{color:"primary",checked:ce,name:Y.name}))),n.createElement(y.Z,{primary:Y.name,secondary:`Registered in ${Y.pluginId} plugin`})),Pe=()=>{const Y=(0,e.h_)(e.W0),ce=Y.getRegisteredFlags(),_e=Object.fromEntries(ce.map(({name:Mt})=>[Mt,Y.isActive(Mt)])),[Ze,ie]=(0,n.useState)(_e),[de,ve]=(0,n.useState)(""),ge=n.useRef(),nt=(0,n.useCallback)(Mt=>{const Gt=Y.isActive(Mt)?e.CL.None:e.CL.Active;Y.save({states:{[Mt]:Gt},merge:!0}),ie(bn=>({...bn,[Mt]:Gt===e.CL.Active}))},[Y]);if(!ce.length)return n.createElement(H,null);const bt=()=>{var Mt;ve(""),(Mt=ge==null?void 0:ge.current)==null||Mt.focus()};let kt=Array.from(ce);de.split(/\s/).map(Mt=>Mt.trim().toLocaleLowerCase("en-US")).forEach(Mt=>kt=kt.filter(Gt=>Gt.name.toLocaleLowerCase("en-US").includes(Mt)));const Ut=()=>n.createElement(J.Z,{container:!0,style:{justifyContent:"space-between"}},n.createElement(J.Z,{item:!0,xs:6,md:8},n.createElement(m.Z,{variant:"h5"},"Feature Flags")),ce.length>=10&&n.createElement(J.Z,{item:!0,xs:6,md:4},n.createElement(g.Z,{label:"Filter",style:{display:"flex",justifyContent:"flex-end"},inputRef:Mt=>Mt&&Mt.focus(),InputProps:{...de.length&&{endAdornment:n.createElement(S.Z,{"aria-label":"Clear filter",onClick:bt,edge:"end"},n.createElement(O.Z,null))}},onChange:Mt=>ve(Mt.target.value),value:de})));return n.createElement(a.rJ,{title:n.createElement(Ut,null)},n.createElement(L.Z,{dense:!0},kt.map(Mt=>{const Gt=Boolean(Ze[Mt.name]);return n.createElement(re,{key:Mt.name,flag:Mt,enabled:Gt,toggleHandler:nt})})))},ae=()=>{var Y;const ce=(0,e.h_)(e.$4),_e=(0,e.h_)(e.$v),{value:Ze,loading:ie,error:de}=(0,W.default)(async()=>({profile:await ce.getProfileInfo(),identity:await ce.getBackstageIdentity()}),[]);return(0,n.useEffect)(()=>{de&&_e.post({message:`Failed to load user identity: ${de}`,severity:"error"})},[de,_e]),ie||de?{profile:{},displayName:"",loading:ie}:{profile:Ze.profile,displayName:(Y=Ze.profile.displayName)!=null?Y:Ze.identity.userEntityRef,loading:ie}},Te=(0,E.Z)(Y=>({avatar:{width:({size:ce})=>ce,height:({size:ce})=>ce,fontSize:({size:ce})=>ce*.7,border:`1px solid ${Y.palette.textSubtle}`}})),Et=({size:Y})=>{const{iconSize:ce}=a.po,_e=Te(Y?{size:Y}:{size:ce}),{profile:Ze}=ae();return n.createElement(I.Z,{src:Ze.picture,className:_e.avatar})},te=()=>{const Y=(0,e.h_)(e.$4),[ce,_e]=n.useState(!1),[Ze,ie]=n.useState(void 0),de=ge=>{ie(ge.currentTarget),_e(!0)},ve=()=>{ie(void 0),_e(!1)};return n.createElement(n.Fragment,null,n.createElement(S.Z,{"data-testid":"user-settings-menu","aria-label":"more",onClick:de},n.createElement($e.Z,null)),n.createElement(D.Z,{anchorEl:Ze,open:ce,onClose:ve},n.createElement(T.Z,{"data-testid":"sign-out",onClick:()=>Y.signOut()},n.createElement(d.Z,null,n.createElement(Ce.Z,null)),"Sign Out")))},ee=()=>{const{profile:Y,displayName:ce}=ae();return n.createElement(a.rJ,{title:"Profile",variant:"gridItem"},n.createElement(J.Z,{container:!0,spacing:6},n.createElement(J.Z,{item:!0},n.createElement(Et,{size:96})),n.createElement(J.Z,{item:!0,xs:12,sm:!0,container:!0},n.createElement(J.Z,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},n.createElement(J.Z,{item:!0,xs:!0},n.createElement(m.Z,{variant:"subtitle1",gutterBottom:!0},ce),n.createElement(m.Z,{variant:"body2",color:"textSecondary"},Y.email))),n.createElement(J.Z,{item:!0},n.createElement(te,null)))))},Le=()=>{const{isPinned:Y,toggleSidebarPinState:ce}=(0,n.useContext)(a.qn);return n.createElement(v.Z,null,n.createElement(y.Z,{primary:"Pin Sidebar",secondary:"Prevent the sidebar from collapsing"}),n.createElement(M.Z,null,n.createElement(h.ZP,{placement:"top",arrow:!0,title:`${Y?"Unpin":"Pin"} Sidebar`},n.createElement($.Z,{color:"primary",checked:Y,onChange:()=>ce(),name:"pin",inputProps:{"aria-label":"Pin Sidebar Switch"}}))))},le=({id:Y,activeId:ce,icon:_e})=>_e?(0,n.cloneElement)(_e,{color:ce===Y?"primary":void 0}):n.createElement(it.Z,{color:ce===Y?"primary":void 0}),Q=(0,E.Z)(Y=>({container:{display:"flex",flexWrap:"wrap",width:"100%",justifyContent:"space-between",alignItems:"center",paddingBottom:8,paddingRight:16},list:{width:"initial",[Y.breakpoints.down("xs")]:{width:"100%",padding:"0 0 12px"}},listItemText:{paddingRight:0,paddingLeft:0},listItemSecondaryAction:{position:"relative",transform:"unset",top:"auto",right:"auto",paddingLeft:16,[Y.breakpoints.down("xs")]:{paddingLeft:0}}})),xe=({children:Y,title:ce,value:_e,...Ze})=>n.createElement(h.ZP,{placement:"top",arrow:!0,title:ce},n.createElement(lt.Z,{value:_e,...Ze},Y)),at=()=>{const Y=Q(),ce=(0,e.h_)(e.hg),_e=(0,Qe.Z)(ce.activeThemeId$(),ce.getActiveThemeId()),Ze=ce.getInstalledThemes(),ie=(de,ve)=>{Ze.some(ge=>ge.id===ve)?ce.setActiveThemeId(ve):ce.setActiveThemeId(void 0)};return n.createElement(v.Z,{className:Y.list,classes:{container:Y.container}},n.createElement(y.Z,{className:Y.listItemText,primary:"Theme",secondary:"Change the theme mode"}),n.createElement(M.Z,{className:Y.listItemSecondaryAction},n.createElement(qe.Z,{exclusive:!0,size:"small",value:_e!=null?_e:"auto",onChange:ie},Ze.map(de=>{var ve;const ge=(ve=Ze.find(nt=>nt.id===de.id))==null?void 0:ve.icon;return n.createElement(xe,{key:de.id,title:`Select ${de.title}`,value:de.id},n.createElement(n.Fragment,null,de.title,"\xA0",n.createElement(le,{id:de.id,icon:ge,activeId:_e})))}),n.createElement(h.ZP,{placement:"top",arrow:!0,title:"Select auto theme"},n.createElement(lt.Z,{value:"auto",selected:_e===void 0},"Auto\xA0",n.createElement(it.Z,{color:_e===void 0?"primary":void 0}))))))},Zt=()=>{const{isMobile:Y}=(0,n.useContext)(a.qn);return n.createElement(a.rJ,{title:"Appearance",variant:"gridItem"},n.createElement(L.Z,{dense:!0},n.createElement(at,null),!Y&&n.createElement(Le,null)))},Dt=()=>n.createElement(J.Z,{container:!0,direction:"row",spacing:3},n.createElement(J.Z,{item:!0,xs:12,md:6},n.createElement(ee,null)),n.createElement(J.Z,{item:!0,xs:12,md:6},n.createElement(Zt,null))),en="user-settings.tab",on=Y=>n.createElement(n.Fragment,null,Y.children);(0,e.R5)(on,en,"UserSettingsTab");var Ye=Object.freeze({__proto__:null,SettingsPage:({providerSettings:Y})=>{const{isMobile:ce}=(0,n.useContext)(a.qn),_e=(0,o.pC)(),Ze=(0,e.vJ)(_e,ie=>ie.selectByComponentData({key:en}).getElements());return n.createElement(a.T3,{themeId:"home"},!ce&&n.createElement(a.h4,{title:"Settings"}),n.createElement(a.WD,null,n.createElement(a.WD.Route,{path:"general",title:"General"},n.createElement(Dt,null)),n.createElement(a.WD.Route,{path:"auth-providers",title:"Authentication Providers"},n.createElement(fe,{providerSettings:Y})),n.createElement(a.WD.Route,{path:"feature-flags",title:"Feature Flags"},n.createElement(Pe,null)),Ze.map((ie,de)=>n.createElement(a.WD.Route,{key:de,...ie.props},ie))))}})},86287:function(Lt,c,t){t.d(c,{$_:function(){return L},Wb:function(){return M}});var e=t(73689),n=t(48032),p=t(34505);const a={wave:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1368' height='401' x='0' y='0' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M437 116C223 116 112 0 112 0h1256v400c-82 0-225-21-282-109-112-175-436-175-649-175z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1368 400V282C891-29 788 40 711 161 608 324 121 372 0 361v39h1368z'/%3e%3cpath fill='url(%23paint2_linear)' d='M1368 244v156H0V94c92-24 198-46 375 0l135 41c176 51 195 109 858 109z'/%3e%3cpath fill='url(%23paint3_linear)' d='M1252 400h116c-14-7-35-14-116-16-663-14-837-128-1013-258l-85-61C98 28 46 8 0 0v400h1252z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M-172-98h1671v601H-172z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='602' x2='1093.5' y1='-960.5' y2='272' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='482' x2='480' y1='1058.5' y2='70.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='424' x2='446.1' y1='-587.5' y2='274.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='587' x2='349' y1='-1120.5' y2='341' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,wave2:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1764' height='479' x='-229' y='-6' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M0 400h1350C1321 336 525 33 179-2c-345-34-395 236-408 402H0z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1378 177v223H0V217s219 75 327 52C436 246 717-35 965 45s254 144 413 132z'/%3e%3cpath fill='url(%23paint2_linear)' d='M26 400l-78-16c-170 205-44-6-137-30l-4-1 4 1 137 30c37-45 89-110 159-201 399-514-45 238 1176-50 275-65 354-39 91 267H26z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='431' x2='397.3' y1='-599' y2='372.8' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='236.5' x2='446.6' y1='-586' y2='381.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='851.8' x2='640.4' y1='-867.2' y2='363.7' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,round:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='2269' height='1408' x='-610' y='-509' maskUnits='userSpaceOnUse'%3e%3ccircle cx='1212.8' cy='74.8' r='317.5' fill='url(%23paint0_linear)' transform='rotate(-52 1213 75)'/%3e%3ccircle cx='737.8' cy='445.8' r='317.5' fill='url(%23paint1_linear)' transform='rotate(-116 738 446)'/%3e%3ccircle cx='601.8' cy='52.8' r='418.6' fill='url(%23paint2_linear)' transform='rotate(-117 602 53)'/%3e%3ccircle cx='999.8' cy='364' r='389.1' fill='url(%23paint3_linear)' transform='rotate(31 1000 364)'/%3e%3cellipse cx='-109.2' cy='263.5' fill='url(%23paint4_linear)' rx='429.2' ry='465.8' transform='rotate(-85 -109 264)'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='1301.2' x2='161.4' y1='-1879.7' y2='-969.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='826.2' x2='-313.6' y1='-1508.7' y2='-598.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='718.4' x2='-784.3' y1='-2524' y2='-1324.2' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='1108.2' x2='-288.6' y1='-2031.1' y2='-915.9' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint4_linear' x1='10.4' x2='-1626.5' y1='-2603.8' y2='-1399.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`},o={darkGrey:["#171717","#383838"],marineBlue:["#006D8F","#0049A1"],veryBlue:["#0027AF","#270094"],rubyRed:["#98002B","#8D1134"],toastyOrange:["#BE2200","#A41D00"],purpleSky:["#8912CA","#3E00EA"],eveningSea:["#00FFF2","#035355"],teal:["#005B4B"],pinkSea:["#C8077A","#C2297D"]};function m($,J){const S=`linear-gradient(90deg, ${($.length===1?[$[0],$[0]]:$).join(", ")})`,E=`${J},  ${S}`;return{colors:$,shape:J,backgroundImage:E}}const u={home:m(o.teal,a.wave),documentation:m(o.pinkSea,a.wave2),tool:m(o.purpleSky,a.round),service:m(o.marineBlue,a.wave),website:m(o.veryBlue,a.wave),library:m(o.rubyRed,a.wave),other:m(o.darkGrey,a.wave),app:m(o.toastyOrange,a.wave),apis:m(o.teal,a.wave2)},v='"Helvetica Neue", Helvetica, Roboto, Arial, sans-serif';function d($){const{palette:J,fontFamily:g=v,defaultPageTheme:S,pageTheme:E=u}=$;if(!E[S])throw new Error(`${S} is not defined in pageTheme.`);return{palette:J,props:{MuiGrid:{spacing:2},MuiSwitch:{color:"primary"}},typography:{fontFamily:g,h5:{fontWeight:700},h4:{fontWeight:700,fontSize:28,marginBottom:6},h3:{fontSize:32,fontWeight:700,marginBottom:6},h2:{fontSize:40,fontWeight:700,marginBottom:8},h1:{fontSize:54,fontWeight:700,marginBottom:10}},page:E[S],getPageTheme:({themeId:I})=>{var D;return(D=E[I])!=null?D:E[S]}}}function y($){return{MuiCssBaseline:{"@global":{html:{height:"100%",fontFamily:$.typography.fontFamily},body:{height:"100%",fontFamily:$.typography.fontFamily,"overscroll-behavior-y":"none"},a:{color:"inherit",textDecoration:"none"}}},MuiTableRow:{root:{"&:nth-of-type(odd)":{backgroundColor:$.palette.background.default}},hover:{"&:hover":{cursor:"pointer"}},head:{"&:nth-of-type(odd)":{backgroundColor:$.palette.background.paper}}},MuiTableCell:{root:{wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:$.spacing(3,2,3,2.5),borderBottom:0},sizeSmall:{padding:$.spacing(1.5,2,1.5,2.5)},head:{wordBreak:"break-word",overflow:"hidden",color:"rgb(179, 179, 179)",fontWeight:"normal",lineHeight:"1"}},MuiTabs:{root:{minHeight:24}},MuiTab:{root:{color:$.palette.link,minHeight:24,textTransform:"initial",letterSpacing:"0.07em","&:hover":{color:(0,n.darken)($.palette.link,.3),background:(0,n.lighten)($.palette.link,.95)},[$.breakpoints.up("md")]:{minWidth:120,fontSize:$.typography.pxToRem(14),fontWeight:500}},textColorPrimary:{color:$.palette.link}},MuiTableSortLabel:{root:{color:"inherit","&:hover":{color:"inherit"},"&:focus":{color:"inherit"}},active:{fontWeight:"bold",color:"inherit"}},MuiListItemText:{dense:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},MuiButton:{text:{padding:void 0}},MuiChip:{root:{backgroundColor:"#D9D9D9",marginRight:$.spacing(1),marginBottom:$.spacing(1),color:$.palette.grey[900]},outlined:{color:$.palette.text.primary},label:{lineHeight:`${$.spacing(2.5)}px`,fontWeight:$.typography.fontWeightMedium,fontSize:`${$.spacing(1.75)}px`},labelSmall:{fontSize:`${$.spacing(1.5)}px`},deleteIcon:{color:$.palette.grey[500],width:`${$.spacing(3)}px`,height:`${$.spacing(3)}px`,margin:`0 ${$.spacing(.75)}px 0 -${$.spacing(.75)}px`},deleteIconSmall:{width:`${$.spacing(2)}px`,height:`${$.spacing(2)}px`,margin:`0 ${$.spacing(.5)}px 0 -${$.spacing(.5)}px`}},MuiCard:{root:{display:"flex",flexDirection:"column"}},MuiCardHeader:{root:{paddingBottom:0}},MuiCardContent:{root:{flexGrow:1,"&:last-child":{paddingBottom:void 0}}},MuiCardActions:{root:{justifyContent:"flex-end"}}}}function h($){const J=d($),g=(0,e.Z)(J),S=y(g);return{...g,overrides:S}}const M=h({palette:{type:"light",background:{default:"#F8F8F8"},status:{ok:"#1DB954",warning:"#FF9800",error:"#E22134",running:"#2E77D0",pending:"#FFED51",aborted:"#757575"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#2E77D0"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#000000",textVerySubtle:"#DDD",textSubtle:"#6E6E6E",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#2196F3",link:"#0A6EBE",gold:p.Z.A700,navigation:{background:"#171717",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#181818",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}},defaultPageTheme:"home",pageTheme:u}),L=h({palette:{type:"dark",background:{default:"#333333"},status:{ok:"#71CF88",warning:"#FFB84D",error:"#F84C55",running:"#3488E3",pending:"#FEF071",aborted:"#9E9E9E"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#9CC9FF",dark:"#82BAFD"},secondary:{main:"#FF88B2"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#FFFFFF",textVerySubtle:"#727272",textSubtle:"#CCCCCC",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#82BAFD",link:"#9CC9FF",gold:p.Z.A700,navigation:{background:"#424242",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#404040",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}},defaultPageTheme:"home",pageTheme:u})},18473:function(Lt,c,t){t.d(c,{CT:function(){return u},EI:function(){return m},Vt:function(){return v},uW:function(){return o}});var e=t(2784);function n(){return typeof window!="undefined"&&window.Math===Math?window:typeof self!="undefined"&&self.Math===Math?self:Function("return this")()}const p=n(),a=y=>`__@backstage/${y}__`;function o(y,h){const M=a(y);let L=p[M];return L||(L=h(),p[M]=L,L)}function m(y){return Object.freeze(y),{atVersion(h){return y[h]}}}function u(y){return o(y,()=>(0,e.createContext)(void 0))}function v(y){return(0,e.useContext)(u(y))}function d(y){return{set(h){globalThis[`__@backstage/${y}__`]=createContext(m(h))},reset(){delete globalThis[`__@backstage/${y}__`]}}}},85310:function(Lt){Lt.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON AnySchema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},51020:function(Lt){Lt.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')}}]);})();

//# sourceMappingURL=module-backstage.d3d55d72.js.map