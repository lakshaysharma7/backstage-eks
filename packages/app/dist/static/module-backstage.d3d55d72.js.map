{"version":3,"sources":["webpack://app/../node_modules/@backstage/app-defaults/dist/index.esm.js","webpack://app/../node_modules/@backstage/catalog-client/dist/index.esm.js","webpack://app/../node_modules/@backstage/catalog-model/dist/index.esm.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/ajv.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/compile/codegen/code.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/compile/codegen/index.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/compile/codegen/scope.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/compile/errors.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/compile/index.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/compile/names.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/compile/ref_error.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/compile/resolve.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/compile/rules.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/compile/util.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/compile/validate/applicability.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/compile/validate/boolSchema.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/compile/validate/dataType.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/compile/validate/defaults.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/compile/validate/index.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/compile/validate/keyword.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/compile/validate/subschema.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/core.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/runtime/equal.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/runtime/ucs2length.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/runtime/uri.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/runtime/validation_error.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/applicator/additionalItems.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/applicator/additionalProperties.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/applicator/allOf.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/applicator/anyOf.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/applicator/contains.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/applicator/dependencies.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/applicator/if.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/applicator/index.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/applicator/items.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/applicator/items2020.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/applicator/not.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/applicator/oneOf.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/applicator/patternProperties.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/applicator/prefixItems.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/applicator/properties.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/applicator/propertyNames.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/applicator/thenElse.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/code.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/core/id.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/core/index.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/core/ref.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/discriminator/index.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/discriminator/types.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/draft7.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/format/format.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/format/index.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/metadata.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/validation/const.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/validation/enum.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/validation/index.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/validation/limitItems.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/validation/limitLength.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/validation/limitNumber.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/validation/limitProperties.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/validation/multipleOf.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/validation/pattern.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/validation/required.js","webpack://app/../node_modules/@backstage/catalog-model/node_modules/ajv/dist/vocabularies/validation/uniqueItems.js","webpack://app/../node_modules/@backstage/config/dist/index.esm.js","webpack://app/../node_modules/@backstage/core-app-api/dist/index.esm.js","webpack://app/../node_modules/@backstage/core-components/dist/index.esm.js","webpack://app/../node_modules/@backstage/core-plugin-api/dist/index.esm.js","webpack://app/../node_modules/@backstage/errors/dist/index.esm.js","webpack://app/../node_modules/@backstage/integration-react/dist/index.esm.js","webpack://app/../node_modules/@backstage/integration/dist/index.esm.js","webpack://app/../node_modules/@backstage/plugin-api-docs/dist/index.esm.js","webpack://app/../node_modules/@backstage/plugin-catalog-common/dist/index.esm.js","webpack://app/../node_modules/@backstage/plugin-catalog-graph/dist/index.esm.js","webpack://app/../node_modules/@backstage/plugin-catalog-import/dist/index.esm.js","webpack://app/../node_modules/@backstage/plugin-catalog-react/dist/index.esm.js","webpack://app/../node_modules/@backstage/plugin-catalog/dist/esm/index-8dd5bf41.esm.js","webpack://app/../node_modules/@backstage/plugin-github-actions/dist/index.esm.js","webpack://app/../node_modules/@backstage/plugin-kubernetes/dist/index.esm.js","webpack://app/../node_modules/@backstage/plugin-org/dist/index.esm.js","webpack://app/../node_modules/@backstage/plugin-permission-common/dist/index.esm.js","webpack://app/../node_modules/@backstage/plugin-permission-react/dist/index.esm.js","webpack://app/../node_modules/@backstage/plugin-scaffolder/dist/esm/index-76cc5591.esm.js","webpack://app/../node_modules/@backstage/test-utils/dist/index.esm.js","webpack://app/../node_modules/@backstage/plugin-search-react/dist/index.esm.js","webpack://app/../node_modules/@backstage/plugin-search/dist/esm/index-1c49a9c7.esm.js","webpack://app/../node_modules/@backstage/plugin-tech-radar/dist/index.esm.js","webpack://app/../node_modules/@backstage/plugin-techdocs-react/dist/index.esm.js","webpack://app/../node_modules/@backstage/plugin-techdocs/node_modules/jss/dist/jss.esm.js","webpack://app/../node_modules/@backstage/plugin-techdocs/dist/esm/index-cb910cad.esm.js","webpack://app/../node_modules/@backstage/plugin-user-settings/dist/index.esm.js","webpack://app/../node_modules/@backstage/theme/dist/index.esm.js","webpack://app/../node_modules/@backstage/version-bridge/dist/index.esm.js"],"names":[],"mappings":"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CD,EACI,EAAyB,GACzB,EAAe,CAClB,WAAY,CACX,KAAM,SACN,YAAa,+FACb,UAAW,EACX,SAAU,CACT,wBACA,oBACA,KACD,CACD,EACA,KAAM,CACL,KAAM,SACN,YAAa,8CACb,UAAW,EACX,SAAU,CACT,MACA,YACA,SACA,QACA,WACA,WACA,SACA,WACA,MACD,CACD,EACA,SAAU,CACT,KAAM,SACN,SAAU,CACT,MACD,EACA,qBAAsB,GACtB,WAAY,CACX,KAAM,CACL,KAAM,SACN,YAAa,6HACb,SAAU,CACT,gBACD,EACA,UAAW,CACZ,EACA,UAAW,CACV,KAAM,SACN,YAAa,4CACb,QAAW,UACX,SAAU,CACT,UACA,OACD,EACA,UAAW,CACZ,CACD,CACD,CACD,EACI,EAAuB,CAC1B,QAAS,EACT,IAAK,EACL,YAAa,EACb,SAAU,EACV,KAAM,EACN,SAAU,EACV,qBAAsB,EACtB,WAAY,CACb,EAEI,EAAY,yCACZ,EAAQ,SACR,EAAgB,yEAChB,EAAa,CAChB,CACC,WAAY,wBACZ,KAAM,YACN,SAAU,CACT,KAAM,eACN,YAAa,6BACb,OAAQ,CACP,aAAc,wBACf,EACA,YAAa,CACZ,KAAM,0CACP,CACD,EACA,KAAM,CACL,KAAM,UACN,UAAW,aACX,MAAO,OACR,CACD,CACD,EACI,EAAS,SACT,EAAa,CAChB,aACA,OACA,UACD,EACI,GAAyB,GACzB,GAAe,CAClB,WAAY,CACX,KAAM,SACN,YAAa,+FACb,UAAW,EACX,SAAU,CACT,wBACA,oBACA,KACD,CACD,EACA,KAAM,CACL,KAAM,SACN,YAAa,8CACb,UAAW,EACX,SAAU,CACT,MACA,YACA,SACA,QACA,WACA,WACA,SACA,WACA,MACD,CACD,EACA,SAAU,CACT,KAAM,YACP,EACA,KAAM,CACL,KAAM,SACN,YAAa,sDACd,EACA,UAAW,CACV,KAAM,QACN,YAAa,0DACb,MAAO,CACN,KAAM,iBACP,CACD,EACA,OAAQ,CACP,KAAM,eACP,CACD,EACI,GAAe,CAClB,QAAS,EACT,IAAK,EACL,YAAa,EACb,SAAU,EACV,KAAM,EACN,SAAU,EACV,qBAAsB,GACtB,WAAY,EACb,EAEI,GAAY,yCACZ,GAAQ,aACR,GAAgB,0DAChB,GAAa,CAChB,CACC,IAAK,uCACL,KAAM,2BACN,KAAM,mBACN,UAAW,gBACX,OAAQ,CACP,sBAAuB,YACxB,EACA,YAAa,CACZ,uBAAwB,YACzB,EACA,KAAM,CACL,OACA,MACD,CACD,CACD,EACI,GAAS,SACT,GAAW,CACd,MACD,EACI,GAAuB,GACvB,EAAa,CAChB,IAAK,CACJ,KAAM,SACN,YAAa,iXACb,SAAU,CACT,sCACD,EACA,UAAW,CACZ,EACA,KAAM,CACL,KAAM,SACN,YAAa,mbACb,SAAU,CACT,0BACD,EACA,UAAW,CACZ,EACA,KAAM,CACL,KAAM,SACN,YAAa,6HACb,SAAU,CACT,gBACD,EACA,UAAW,CACZ,EACA,UAAW,CACV,KAAM,SACN,YAAa,4CACb,QAAW,UACX,SAAU,CACT,UACA,OACD,EACA,UAAW,CACZ,EACA,MAAO,CACN,KAAM,SACN,YAAa,iHACb,SAAU,CACT,oBACD,EACA,UAAW,CACZ,EACA,YAAa,CACZ,KAAM,SACN,YAAa,kFACd,EACA,OAAQ,CACP,KAAM,SACN,YAAa,qEACb,qBAAsB,GACtB,kBAAmB,CAClB,OAAQ,CACP,KAAM,QACP,CACD,CACD,EACA,YAAa,CACZ,KAAM,SACN,YAAa,mFACb,qBAAsB,GACtB,kBAAmB,CAClB,OAAQ,CACP,KAAM,QACP,CACD,CACD,EACA,KAAM,CACL,KAAM,QACN,YAAa,6FACb,MAAO,CACN,KAAM,SACN,UAAW,CACZ,CACD,EACA,MAAO,CACN,KAAM,QACN,YAAa,kNACb,MAAO,CACN,KAAM,SACN,SAAU,CACT,KACD,EACA,WAAY,CACX,IAAK,CACJ,KAAM,SACN,YAAa,kCACb,SAAU,CACT,+BACD,EACA,UAAW,CACZ,EACA,MAAO,CACN,KAAM,SACN,YAAa,6CACb,SAAU,CACT,iBACD,EACA,UAAW,CACZ,EACA,KAAM,CACL,KAAM,SACN,YAAa,8DACb,SAAU,CACT,WACD,EACA,UAAW,CACZ,CACD,CACD,CACD,CACD,EACI,GAAmB,CACtB,QAAS,GACT,IAAK,GACL,YAAa,GACb,SAAU,GACV,KAAM,GACN,SAAU,GACV,qBAAsB,GACtB,WAAY,CACb,EAEI,EAAY,yCACZ,GAAQ,SACR,GAAO,SACP,EAAgB,kDAChB,EAAc,CACjB,UAAW,CACV,IAAK,aACL,KAAM,SACN,YAAa,yCACb,SAAU,CACT,OACA,YACA,MACD,EACA,qBAAsB,GACtB,WAAY,CACX,KAAM,CACL,KAAM,SACN,YAAa,gCACb,UAAW,CACZ,EACA,UAAW,CACV,KAAM,SACN,YAAa,8CACb,UAAW,CACZ,EACA,KAAM,CACL,KAAM,SACN,YAAa,yCACb,UAAW,CACZ,CACD,CACD,EACA,SAAU,CACT,IAAK,YACL,KAAM,SACN,YAAa,kDACb,SAAU,CACT,OACA,QACD,EACA,qBAAsB,GACtB,WAAY,CACX,KAAM,CACL,KAAM,SACN,UAAW,EACX,QAAS,SACT,YAAa,uBACd,EACA,OAAQ,CACP,KAAM,YACP,CACD,CACD,EACA,OAAQ,CACP,IAAK,UACL,KAAM,SACN,YAAa,mEACb,SAAU,CACV,EACA,qBAAsB,GACtB,WAAY,CACX,MAAO,CACN,KAAM,QACN,MAAO,CACN,KAAM,aACP,CACD,CACD,CACD,EACA,WAAY,CACX,IAAK,cACL,KAAM,SACN,YAAa,iDACb,SAAU,CACT,OACA,QACA,SACD,EACA,qBAAsB,GACtB,WAAY,CACX,KAAM,CACL,KAAM,SACN,UAAW,CACZ,EACA,MAAO,CACN,KAAM,eACN,YAAa,iDACd,EACA,QAAS,CACR,KAAM,SACN,YAAa,wEACd,EACA,MAAO,CACN,KAAM,SACN,YAAa,4DACd,CACD,CACD,EACA,YAAa,CACZ,IAAK,eACL,KAAM,SACN,YAAa,6BACb,KAAQ,CACP,OACA,UACA,OACD,CACD,EACA,MAAO,CACN,IAAK,SACL,KAAM,SACN,YAAa,6BACb,SAAU,CACT,OACA,SACD,EACA,qBAAsB,GACtB,WAAY,CACX,KAAM,CACL,KAAM,SACN,SAAU,CACT,QACA,YACD,EACA,YAAa,6BACb,UAAW,CACZ,EACA,QAAS,CACR,KAAM,SACN,YAAa,0BACd,EACA,KAAM,CACL,KAAM,SACN,YAAa,yCACd,EACA,MAAO,CACN,KAAM,SACN,YAAa,sBACd,CACD,CACD,CACD,EACI,GAAe,CAClB,QAAS,EACT,IAAK,GACL,KAAM,GACN,YAAa,EACb,YAAa,CACd,EAEA,KAAM,IAAsC,GAAI,KAC1C,GAA0B,CAC9B,EACA,GACA,GACA,EACF,EACA,YAAuB,GAAQ,CAC7B,GAAI,CAAE,KAAU,MAAgB,GAAO,QACrC,KAAM,IAAI,WAAU,eAAe,EAErC,KAAM,IAAQ,GAAO,GACrB,KAAM,IAAI,WAAU,GAAG,GAAM,cAAgB,YAAY,GAAM,UAAU,GAAM,OAAS,MAAM,OAAO,QAAQ,GAAM,MAAM,EAAE,IAAI,CAAC,CAAC,GAAK,MAAS,GAAG,OAAQ,IAAK,EAAE,KAAK,IAAI,IAAM,IAAI,CACtL,CACA,YAA0B,GAAQ,GAAU,CAAC,EAAG,CAC9C,GAAI,IACJ,KAAM,IAAgB,IAAK,IAAW,KAAO,OAAS,GAAQ,eAAiB,KAAO,GAAK,GACrF,GAAW,GAAe,GAAK,KAAK,UAAU,EAAM,EAC1D,GAAI,CAAC,GAAc,CACjB,KAAM,IAAS,GAAoB,IAAI,EAAQ,EAC/C,GAAI,GACF,MAAO,GAEX,CACA,KAAM,IAAe,GAAgB,EAAM,EACrC,GAAM,GAAI,MAAI,CAClB,gBAAiB,GACjB,UAAW,GACX,eAAgB,EAClB,CAAC,EACG,GAAa,QACf,GAAI,UAAU,GAAc,OAAQ,OAAQ,EAAI,EAElD,KAAM,IAAW,GAAI,QAAQ,EAAM,EACnC,MAAK,KACH,GAAoB,IAAI,GAAU,EAAQ,EAErC,EACT,CACA,YAAyB,GAAQ,CAC/B,GAAI,MAAO,KAAW,SACpB,MAAO,CAAC,EAEV,KAAM,IAAuB,GAAI,KAC7B,GAAO,KACT,GAAK,IAAI,GAAO,GAAG,EAErB,KAAM,IAAW,GAAI,OACf,GAAO,CAAC,EAAM,EACpB,KAAO,GAAK,QAAQ,CAClB,KAAM,IAAU,GAAK,IAAI,EACzB,SAAW,MAAO,IAAW,EAAO,EAClC,GAAI,CAAC,GAAK,IAAI,EAAG,EAAG,CAClB,GAAK,IAAI,EAAG,EACZ,KAAM,IAAQ,GAAwB,KAAM,IAAM,GAAE,MAAQ,EAAG,EAC3D,IACF,IAAS,KAAK,EAAK,EACnB,GAAK,KAAK,EAAK,EAEnB,CAEJ,CACA,MAAO,GACT,CACA,YAAqB,GAAQ,CAC3B,KAAM,IAAO,CAAC,EAAM,EACpB,KAAO,GAAK,QAAQ,CAClB,KAAM,IAAU,GAAK,IAAI,EACzB,GAAI,MAAO,KAAY,UAAY,GACjC,SAAW,CAAC,GAAK,KAAU,QAAO,QAAQ,EAAO,EAC3C,KAAQ,QAAU,MAAO,KAAU,SACrC,KAAM,IAAM,MAAM,GAAG,EAAE,GAEvB,GAAK,KAAK,EAAK,CAIvB,CACF,CAEA,YAAuC,GAAQ,CAC7C,KAAM,IAAW,GAAiB,IAAkB,CAAoB,EACxE,MAAQ,KAAS,CAEf,GAAI,GADoB,EAAI,IACb,GACb,MAAO,IAET,KAAM,IAAc,GAAS,MAAM,CACrC,CACF,CAEA,YAAmC,GAAQ,CACzC,KAAM,IAAW,GAAiB,EAAM,EACxC,MAAQ,KAAS,CACf,GAAI,IAEJ,GAAI,GADoB,EAAI,IACb,GACb,MAAO,IAET,KAAM,IAAkB,IAAK,GAAS,SAAW,KAAO,OAAS,GAAG,OAAQ,IAAM,CAAC,QAAS,aAAa,EAAE,SAAS,GAAE,YAAY,CAAC,EACnI,GAAK,KAAkB,KAAO,OAAS,GAAe,SAAW,GAAe,MAAO,IAAM,GAAE,UAAY,MAAM,EAC/G,MAAO,GAET,KAAM,IAAc,GAAS,MAAM,CACrC,CACF,CAEA,WAA+B,GAAQ,CACrC,KAAM,IAAW,GAAiB,IAAkB,EAAY,EAChE,MAAQ,KAAS,CAEf,GAAI,GADoB,EAAI,IACb,GACb,MAAO,IAET,KAAM,IAAc,GAAS,MAAM,CACrC,CACF,CAEA,MAAM,EAA6B,OAC1B,mBAAkB,GAAO,CAC9B,MAAO,GAAyB,yBAAyB,GAAO,IAAK,EAAyB,oBAAsB,IAAM,GAAE,QAAU,GAAK,GAAE,QAAU,IAAM,iBAAiB,KAAK,EAAC,CAAC,CACvL,OACO,aAAY,GAAO,CACxB,MAAO,OAAO,KAAU,UAAY,GAAM,QAAU,GAAK,GAAM,QAAU,IAAM,yBAAyB,KAAK,EAAK,CACpH,OACO,mBAAkB,GAAO,CAC9B,MAAO,OAAO,KAAU,UAAY,GAAM,QAAU,GAAK,GAAM,QAAU,IAAM,6CAA6C,KAAK,EAAK,CACxI,OACO,kBAAiB,GAAO,CAC7B,MAAO,GAAyB,gBAAgB,EAAK,CACvD,OACO,iBAAgB,GAAO,CAC5B,MAAO,GAAyB,yBAAyB,GAAO,IAAK,EAAyB,oBAAqB,GAA6B,iBAAiB,CACnK,OACO,mBAAkB,GAAO,CAC9B,MAAO,MAAU,IAAM,GAA6B,kBAAkB,EAAK,CAC7E,OACO,sBAAqB,GAAO,CACjC,MAAO,GAAyB,yBAAyB,GAAO,IAAK,EAAyB,oBAAqB,GAA6B,iBAAiB,CACnK,OACO,wBAAuB,GAAO,CACnC,MAAO,OAAO,KAAU,QAC1B,CACF,CAEA,KAAM,IAAoB,CACxB,kBAAmB,GAA6B,kBAChD,YAAa,GAA6B,YAC1C,kBAAmB,GAA6B,kBAChD,iBAAkB,GAA6B,iBAC/C,gBAAiB,GAA6B,gBAC9C,kBAAmB,GAA6B,kBAChD,qBAAsB,GAA6B,qBACnD,uBAAwB,GAA6B,uBACrD,WAAa,IACJ,MAAO,KAAU,UAAY,GAAM,QAAU,GAAK,GAAM,QAAU,IAAM,kCAAkC,KAAK,EAAK,CAE/H,EACA,YAAuB,GAAY,CAAC,EAAG,CACrC,MAAO,IACF,MACA,EACL,CACF,CAEA,MAAM,EAAwB,CAC5B,YAAY,GAAa,GAAc,EAAG,CACxC,KAAK,WAAa,EACpB,MACM,SAAQ,GAAQ,CACpB,GAAI,IAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,YAAiB,EAAO,EAAO,GAAW,CACxC,GAAwB,GAAU,KAChC,KAAM,IAAI,OAAM,GAAG,qBAAyB,EAE9C,GAAI,IACJ,GAAI,CACF,GAAU,GAAU,CAAK,CAC3B,OAAS,GAAP,CACA,KAAM,IAAI,OAAM,GAAG,6BAAiC,IAAG,CACzD,CACA,GAAI,CAAC,GAAS,CACZ,GAAI,IACJ,OAAQ,GAAU,UACX,wBACA,oBACH,GAAc,sGACd,UACG,sBACA,wBACA,uBACH,GAAc,+BACd,UACG,uBACA,kBACH,GAAc,0FACd,UACG,aACH,GAAc,4FACd,UACG,yBACH,GAAc,WACd,UACG,cACH,GAAc,qFACd,UACG,aACH,GAAc,+BACd,UACG,oBACA,mBACH,GAAc,qBACd,cAEA,GAAc,OACd,MAEJ,KAAM,IAAU,GAAc,aAAa,iBAA0B,MAAY,GACjF,KAAM,IAAI,OAAM,IAAI,mBAAuB,yKAA8K,CAC3N,CACF,CACA,YAAkB,EAAO,EAAO,GAAW,CACzC,MAAO,KAAU,QAAU,GAAQ,EAAO,EAAO,EAAS,CAC5D,CACA,GAAQ,aAAc,GAAO,WAAY,KAAK,WAAW,iBAAiB,EAC1E,GAAQ,OAAQ,GAAO,KAAM,KAAK,WAAW,WAAW,EACxD,GAAQ,gBAAiB,GAAO,SAAS,KAAM,KAAK,WAAW,iBAAiB,EAChF,GAAS,qBAAsB,GAAO,SAAS,UAAW,KAAK,WAAW,gBAAgB,EAC1F,SAAW,CAAC,EAAG,IAAM,QAAO,QAAS,IAAK,GAAO,SAAS,SAAW,KAAO,GAAK,CAAC,CAAC,EACjF,GAAQ,UAAU,IAAK,EAAG,KAAK,WAAW,eAAe,EACzD,GAAQ,UAAU,IAAK,EAAG,KAAK,WAAW,iBAAiB,EAE7D,SAAW,CAAC,EAAG,IAAM,QAAO,QAAS,IAAK,GAAO,SAAS,cAAgB,KAAO,GAAK,CAAC,CAAC,EACtF,GAAQ,eAAe,IAAK,EAAG,KAAK,WAAW,oBAAoB,EACnE,GAAQ,eAAe,IAAK,EAAG,KAAK,WAAW,sBAAsB,EAEvE,KAAM,IAAQ,IAAK,GAAO,SAAS,OAAS,KAAO,GAAK,CAAC,EACzD,OAAS,GAAI,EAAG,EAAI,GAAK,OAAQ,EAAE,EACjC,GAAQ,QAAQ,IAAK,GAAK,GAAI,KAAK,WAAW,UAAU,EAE1D,KAAM,GAAS,IAAK,GAAO,SAAS,QAAU,KAAO,GAAK,CAAC,EAC3D,OAAS,GAAI,EAAG,EAAI,EAAM,OAAQ,EAAE,EAClC,GAAQ,SAAS,QAAU,IAAK,EAAM,KAAO,KAAO,OAAS,GAAG,IAAK,EAAyB,UAAU,EACxG,GAAS,SAAS,UAAY,IAAK,EAAM,KAAO,KAAO,OAAS,GAAG,MAAO,EAAyB,gBAAgB,EACnH,GAAS,SAAS,SAAW,IAAK,EAAM,KAAO,KAAO,OAAS,GAAG,KAAM,GAA6B,iBAAiB,EAExH,MAAO,GACT,CACF,CAEA,KAAM,IAAqB,KAC3B,MAAM,EAAgC,CACpC,YAAY,GAAc,GAAoB,CAC5C,KAAK,YAAc,EACrB,MACM,SAAQ,GAAQ,CACpB,SAAW,MAAS,QAAO,KAAK,EAAM,EACpC,GAAI,CAAC,KAAK,YAAY,SAAS,EAAK,EAClC,KAAM,IAAI,OAAM,iBAAiB,IAAO,EAG5C,MAAO,GACT,CACF,CAEA,MAAM,EAAwB,MACtB,SAAQ,GAAQ,CACpB,GAAI,CAAC,KAAK,SAAU,CAClB,KAAM,IAAM,GAAI,KAAI,CAAE,gBAAiB,EAAK,CAAC,EAC7C,KAAK,SAAW,GAAI,UAAU,CAAC,GAAc,EAAgB,EAAG,OAAQ,OAAQ,EAAI,EAAE,QAAQ,EAAY,CAC5G,CAEA,GAAI,KADgB,SAAS,EAAM,IACpB,GACb,MAAO,IAET,KAAM,CAAC,IAAS,KAAK,SAAS,QAAU,CAAC,EACzC,KAAK,IAGC,GAAI,OAAM,uBAAuB,GAAM,cAAgB,YAAY,GAAM,SAAS,EAFhF,GAAI,OAAM,mCAAmC,CAGvD,CACF,CAEA,YAAwB,GAAK,CAC3B,GAAI,IAAS,GAAI,QAAQ,GAAG,EAC5B,KAAM,IAAS,GAAI,QAAQ,GAAG,EAC1B,KAAW,IAAM,GAAS,IAC5B,IAAS,IAEX,KAAM,IAAO,KAAW,GAAK,OAAS,GAAI,MAAM,EAAG,EAAM,EACnD,GAAY,KAAW,GAAK,OAAS,GAAI,MAAM,GAAS,EAAG,EAAM,EACjE,GAAO,GAAI,MAAM,KAAK,IAAI,GAAS,EAAG,GAAS,CAAC,CAAC,EACvD,GAAI,KAAS,IAAM,KAAc,IAAM,KAAS,GAC9C,KAAM,IAAI,WAAU,qBAAqB,uDAAwD,EAEnG,MAAO,CAAE,QAAM,aAAW,OAAK,CACjC,CACA,WAA8B,GAAQ,CACpC,MAAO,CACL,KAAM,GAAO,KACb,UAAW,GAAO,SAAS,WAAa,EACxC,KAAM,GAAO,SAAS,IACxB,CACF,CACA,YAAwB,GAAK,GAAS,CACpC,GAAI,IAAI,GAAI,GAAI,GAChB,GAAI,CAAC,GACH,KAAM,IAAI,OAAM,oCAAoC,EAEtD,KAAM,IAAc,IAAW,KAAO,OAAS,GAAQ,YACjD,GAAoB,KAAW,KAAO,OAAS,GAAQ,mBAAqB,EAClF,GAAI,IACA,GACA,GACJ,GAAI,MAAO,KAAQ,SAAU,CAC3B,KAAM,IAAS,GAAe,EAAG,EACjC,GAAQ,IAAK,GAAO,OAAS,KAAO,GAAK,GACzC,GAAa,IAAK,GAAO,YAAc,KAAO,GAAK,GACnD,GAAO,GAAO,IAChB,KACE,IAAQ,IAAK,GAAI,OAAS,KAAO,GAAK,GACtC,GAAa,IAAK,GAAI,YAAc,KAAO,GAAK,GAChD,GAAO,GAAI,KAEb,GAAK,GAGE,GAAK,IAGL,GAAI,CAAC,GAAM,CAChB,KAAM,IAAU,KAAK,UAAU,EAAG,EAClC,KAAM,IAAI,OAAM,oBAAoB,8BAAmC,CACzE,MANuB,CACrB,KAAM,IAAU,KAAK,UAAU,EAAG,EAClC,KAAM,IAAI,OAAM,oBAAoB,mCAAwC,CAC9E,KANW,CACT,KAAM,IAAU,KAAK,UAAU,EAAG,EAClC,KAAM,IAAI,OAAM,oBAAoB,gFAAqF,CAC3H,CAOA,MAAO,CAAE,QAAM,aAAW,OAAK,CACjC,CACA,YAA4B,GAAK,CAC/B,GAAI,IAAI,GACR,GAAI,IACA,GACA,GACJ,MAAI,YAAc,IAChB,IAAO,GAAI,KACX,GAAa,IAAK,GAAI,SAAS,YAAc,KAAO,GAAK,EACzD,GAAO,GAAI,SAAS,MAEpB,IAAO,GAAI,KACX,GAAa,IAAK,GAAI,YAAc,KAAO,GAAK,EAChD,GAAO,GAAI,MAEN,GAAG,GAAK,kBAAkB,OAAO,KAAK,GAAU,kBAAkB,OAAO,KAAK,GAAK,kBAAkB,OAAO,GACrH,CAEA,MAAM,EAAkB,CACtB,YAAY,GAAU,CACpB,KAAK,SAAW,EAClB,MACM,SAAQ,GAAQ,CACpB,GAAI,IAAS,GACb,SAAW,MAAU,MAAK,SAAU,CAClC,KAAM,IAAS,KAAM,IAAO,QAAQ,EAAM,EAC1C,GAAI,CAAC,GACH,KAAM,IAAI,OAAM,UAAU,GAAO,YAAY,8BAA8B,EAE7E,GAAS,EACX,CACA,MAAO,GACT,CACF,CACA,MAAM,EAAgB,CACpB,YAAY,GAAU,CACpB,KAAK,SAAW,EAClB,MACM,SAAQ,GAAQ,CACpB,SAAW,MAAU,MAAK,SAAU,CAClC,KAAM,IAAS,KAAM,IAAO,QAAQ,EAAM,EAC1C,GAAI,GACF,MAAO,GAEX,CACA,KAAM,IAAI,OAAM,2CAA2C,CAC7D,CACF,CACA,KAAM,IAAiB,CACrB,MAAM,GAAU,CACd,MAAO,IAAI,IAAkB,EAAQ,CACvC,EACA,MAAM,GAAU,CACd,MAAO,IAAI,IAAgB,EAAQ,CACrC,CACF,EAEA,GAAI,IAAY,yCACZ,GAAQ,cACR,GAAgB,0KAChB,GAAa,CAChB,CACC,WAAY,wBACZ,KAAM,MACN,SAAU,CACT,KAAM,aACN,YAAa,0BACb,OAAQ,CACP,aAAc,wBACf,EACA,YAAa,CACZ,KAAM,0CACP,CACD,EACA,KAAM,CACL,KAAM,UACN,UAAW,aACX,MAAO,wBACP,OAAQ,2BACR,WAAY;AAAA,SACb,CACD,CACD,EACI,GAAU,CACb,CACC,KAAM,QACP,EACA,CACC,KAAM,SACN,SAAU,CACT,MACD,EACA,WAAY,CACX,WAAY,CACX,KAAQ,CACP,wBACA,sBACD,CACD,EACA,KAAM,CACL,KAAQ,CACP,KACD,CACD,EACA,KAAM,CACL,KAAM,SACN,SAAU,CACT,OACA,YACA,QACA,YACD,EACA,WAAY,CACX,KAAM,CACL,KAAM,SACN,YAAa,kCACb,SAAU,CACT,UACA,WACA,UACA,MACD,EACA,UAAW,CACZ,EACA,UAAW,CACV,KAAM,SACN,YAAa,kCACb,SAAU,CACT,eACA,aACA,YACD,EACA,UAAW,CACZ,EACA,MAAO,CACN,KAAM,SACN,YAAa,+CACb,SAAU,CACT,wBACA,mBACD,EACA,UAAW,CACZ,EACA,OAAQ,CACP,KAAM,SACN,YAAa,6DACb,UAAW,CACZ,EACA,WAAY,CACX,KAAM,SACN,YAAa,sEACb,UAAW,CACZ,CACD,CACD,CACD,CACD,CACD,EACI,GAAW,CACd,QAAS,GACT,IAAK,GACL,YAAa,GACb,SAAU,GACV,MAAO,EACR,EAEA,YAAwC,GAAQ,CAC9C,KAAM,IAAY,GAA0B,EAAM,EAClD,MAAO,MACC,OAAM,GAAM,CAChB,MAAO,IAAU,EAAI,IAAM,EAC7B,CACF,CACF,CAEA,KAAM,IAA6B,GAA+B,EAAQ,EAE1E,GAAI,IAAY,yCACZ,GAAQ,oBACR,GAAgB,4PAChB,GAAa,CAChB,CACC,WAAY,wBACZ,KAAM,YACN,SAAU,CACT,KAAM,eACN,YAAa,6BACb,OAAQ,CACP,aAAc,wBACf,EACA,YAAa,CACZ,KAAM,0CACP,CACD,EACA,KAAM,CACL,KAAM,UACN,UAAW,aACX,MAAO,OACR,CACD,CACD,EACI,GAAU,CACb,CACC,KAAM,QACP,EACA,CACC,KAAM,SACN,SAAU,CACT,MACD,EACA,WAAY,CACX,WAAY,CACX,KAAQ,CACP,wBACA,sBACD,CACD,EACA,KAAM,CACL,KAAQ,CACP,WACD,CACD,EACA,KAAM,CACL,KAAM,SACN,SAAU,CACT,OACA,YACA,OACD,EACA,WAAY,CACX,KAAM,CACL,KAAM,SACN,YAAa,yBACb,SAAU,CACT,UACA,UACA,SACD,EACA,UAAW,CACZ,EACA,UAAW,CACV,KAAM,SACN,YAAa,wCACb,SAAU,CACT,eACA,aACA,YACD,EACA,UAAW,CACZ,EACA,MAAO,CACN,KAAM,SACN,YAAa,qDACb,SAAU,CACT,wBACA,mBACD,EACA,UAAW,CACZ,EACA,OAAQ,CACP,KAAM,SACN,YAAa,mEACb,UAAW,CACZ,EACA,eAAgB,CACf,KAAM,SACN,YAAa,6EACb,UAAW,CACZ,EACA,aAAc,CACb,KAAM,QACN,YAAa,gFACb,MAAO,CACN,KAAM,SACN,UAAW,CACZ,CACD,EACA,aAAc,CACb,KAAM,QACN,YAAa,gFACb,MAAO,CACN,KAAM,SACN,UAAW,CACZ,CACD,EACA,UAAW,CACV,KAAM,QACN,YAAa,sFACb,MAAO,CACN,KAAM,SACN,UAAW,CACZ,CACD,CACD,CACD,CACD,CACD,CACD,EACI,GAAW,CACd,QAAS,GACT,IAAK,GACL,YAAa,GACb,SAAU,GACV,MAAO,EACR,EAEA,KAAM,IAAmC,GAA+B,EAAQ,EAEhF,GAAI,IAAY,yCACZ,GAAQ,iBACR,GAAgB,kJAChB,GAAa,CAChB,CACC,WAAY,wBACZ,KAAM,SACN,SAAU,CACT,KAAM,UACN,YAAa,0BACd,EACA,KAAM,CACL,MAAO,uBACR,CACD,CACD,EACI,GAAU,CACb,CACC,KAAM,QACP,EACA,CACC,KAAM,SACN,SAAU,CACT,MACD,EACA,WAAY,CACX,WAAY,CACX,KAAQ,CACP,wBACA,sBACD,CACD,EACA,KAAM,CACL,KAAQ,CACP,QACD,CACD,EACA,KAAM,CACL,KAAM,SACN,SAAU,CACT,OACD,EACA,WAAY,CACX,MAAO,CACN,KAAM,SACN,YAAa,qDACb,SAAU,CACT,wBACA,mBACD,EACA,UAAW,CACZ,CACD,CACD,CACD,CACD,CACD,EACI,GAAW,CACd,QAAS,GACT,IAAK,GACL,YAAa,GACb,SAAU,GACV,MAAO,EACR,EAEA,KAAM,IAAgC,GAA+B,EAAQ,EAE7E,GAAI,IAAY,yCACZ,GAAQ,gBACR,GAAgB,kNAChB,GAAa,CAChB,CACC,WAAY,wBACZ,KAAM,QACN,SAAU,CACT,KAAM,iBACN,YAAa,yBACd,EACA,KAAM,CACL,KAAM,gBACN,QAAS,CACR,YAAa,iBACb,MAAO,6BACP,QAAS,mDACV,EACA,OAAQ,MACR,SAAU,CACT,YACA,OACD,CACD,CACD,CACD,EACI,GAAU,CACb,CACC,KAAM,QACP,EACA,CACC,KAAM,SACN,SAAU,CACT,MACD,EACA,WAAY,CACX,WAAY,CACX,KAAQ,CACP,wBACA,sBACD,CACD,EACA,KAAM,CACL,KAAQ,CACP,OACD,CACD,EACA,KAAM,CACL,KAAM,SACN,SAAU,CACT,OACA,UACD,EACA,WAAY,CACX,KAAM,CACL,KAAM,SACN,YAAa,2LACb,SAAU,CACT,OACA,gBACA,eACA,MACD,EACA,UAAW,CACZ,EACA,QAAS,CACR,KAAM,SACN,YAAa,uYACb,WAAY,CACX,YAAa,CACZ,KAAM,SACN,YAAa,6CACb,SAAU,CACT,gBACD,EACA,UAAW,CACZ,EACA,MAAO,CACN,KAAM,SACN,YAAa,6CACb,SAAU,CACT,4BACD,EACA,UAAW,CACZ,EACA,QAAS,CACR,KAAM,SACN,YAAa,mDACb,SAAU,CACT,mDACD,EACA,UAAW,CACZ,CACD,CACD,EACA,OAAQ,CACP,KAAM,SACN,YAAa,4NACb,SAAU,CACT,KACD,EACA,UAAW,CACZ,EACA,SAAU,CACT,KAAM,QACN,YAAa,mSACb,MAAO,CACN,KAAM,SACN,SAAU,CACT,YACA,OACD,EACA,UAAW,CACZ,CACD,EACA,QAAS,CACR,KAAM,QACN,YAAa,6FACb,MAAO,CACN,KAAM,SACN,SAAU,CACT,MACD,EACA,UAAW,CACZ,CACD,CACD,CACD,CACD,CACD,CACD,EACI,GAAW,CACd,QAAS,GACT,IAAK,GACL,YAAa,GACb,SAAU,GACV,MAAO,EACR,EAEA,KAAM,IAA+B,GAA+B,EAAQ,EAE5E,GAAI,GAAY,yCACZ,EAAQ,mBACR,EAAgB,gFAChB,GAAa,CAChB,CACC,WAAY,wBACZ,KAAM,WACN,SAAU,CACT,KAAM,UACP,EACA,KAAM,CACL,KAAM,MACN,QAAS,CACR,0EACA,+EACD,CACD,CACD,CACD,EACI,GAAU,CACb,CACC,KAAM,QACP,EACA,CACC,KAAM,SACN,SAAU,CACT,MACD,EACA,WAAY,CACX,WAAY,CACX,KAAQ,CACP,wBACA,sBACD,CACD,EACA,KAAM,CACL,KAAQ,CACP,UACD,CACD,EACA,KAAM,CACL,KAAM,SACN,SAAU,CACV,EACA,WAAY,CACX,KAAM,CACL,KAAM,SACN,YAAa,gLACb,SAAU,CACT,KACD,EACA,UAAW,CACZ,EACA,OAAQ,CACP,KAAM,SACN,YAAa,6NACb,SAAU,CACT,6BACD,EACA,UAAW,CACZ,EACA,QAAS,CACR,KAAM,QACN,YAAa,sOACb,MAAO,CACN,KAAM,SACN,SAAU,CACT,8BACA,yEACD,EACA,UAAW,CACZ,CACD,EACA,SAAU,CACT,KAAM,SACN,YAAa,sHACb,QAAW,WACX,SAAU,CACT,UACD,EACA,KAAQ,CACP,WACA,UACD,CACD,CACD,CACD,CACD,CACD,CACD,EACI,GAAW,CACd,QAAS,EACT,IAAK,EACL,YAAa,EACb,SAAU,GACV,MAAO,EACR,EAEA,KAAM,IAAkC,GAA+B,EAAQ,EAEzE,GAAoB,UACpB,GAAoB,UACpB,GAAwB,cACxB,GAA2B,gBAC3B,GAAwB,cACxB,GAA2B,gBAC3B,GAAsB,YACtB,GAAyB,eACzB,GAAqB,WACrB,GAAoB,UACpB,GAAqB,WACrB,GAAsB,YACtB,GAAmB,SACnB,GAAoB,UAE1B,GAAI,IAAY,yCACZ,GAAQ,mBACR,GAAgB,8PAChB,GAAa,CAChB,CACC,WAAY,wBACZ,KAAM,WACN,SAAU,CACT,KAAM,aACN,YAAa,uBACd,EACA,KAAM,CACL,KAAM,WACN,MAAO,wBACP,OAAQ,0BACT,CACD,CACD,EACI,GAAU,CACb,CACC,KAAM,QACP,EACA,CACC,KAAM,SACN,SAAU,CACT,MACD,EACA,WAAY,CACX,WAAY,CACX,KAAQ,CACP,wBACA,sBACD,CACD,EACA,KAAM,CACL,KAAQ,CACP,UACD,CACD,EACA,KAAM,CACL,KAAM,SACN,SAAU,CACT,OACA,OACD,EACA,WAAY,CACX,KAAM,CACL,KAAM,SACN,YAAa,wBACb,SAAU,CACT,WACA,YACA,SACD,EACA,UAAW,CACZ,EACA,MAAO,CACN,KAAM,SACN,YAAa,oDACb,SAAU,CACT,wBACA,mBACD,EACA,UAAW,CACZ,EACA,UAAW,CACV,KAAM,QACN,YAAa,qFACb,MAAO,CACN,KAAM,SACN,UAAW,CACZ,CACD,EACA,OAAQ,CACP,KAAM,SACN,YAAa,kEACb,UAAW,CACZ,CACD,CACD,CACD,CACD,CACD,EACI,GAAW,CACd,QAAS,GACT,IAAK,GACL,YAAa,GACb,SAAU,GACV,MAAO,EACR,EAEA,KAAM,IAAkC,GAA+B,EAAQ,EAE/E,GAAI,IAAY,yCACZ,EAAQ,iBACR,EAAgB,uXAChB,EAAa,CAChB,CACC,WAAY,wBACZ,KAAM,SACN,SAAU,CACT,KAAM,2BACN,YAAa,yCACd,EACA,KAAM,CACL,MAAO,wBACP,OAAQ,SACT,CACD,CACD,EACI,EAAU,CACb,CACC,KAAM,QACP,EACA,CACC,KAAM,SACN,SAAU,CACT,MACD,EACA,WAAY,CACX,WAAY,CACX,KAAQ,CACP,wBACA,sBACD,CACD,EACA,KAAM,CACL,KAAQ,CACP,QACD,CACD,EACA,KAAM,CACL,KAAM,SACN,SAAU,CACT,OACD,EACA,WAAY,CACX,MAAO,CACN,KAAM,SACN,YAAa,qDACb,SAAU,CACT,wBACA,mBACD,EACA,UAAW,CACZ,EACA,OAAQ,CACP,KAAM,SACN,YAAa,gEACb,SAAU,CACT,SACD,EACA,UAAW,CACZ,CACD,CACD,CACD,CACD,CACD,EACI,EAAW,CACd,QAAS,GACT,IAAK,EACL,YAAa,EACb,SAAU,EACV,MAAO,CACR,EAEA,KAAM,IAAgC,GAA+B,CAAQ,EAE7E,GAAI,IAAU,yCACV,GAAM,eACN,GAAc,8SACd,GAAW,CACd,CACC,WAAY,wBACZ,KAAM,OACN,SAAU,CACT,KAAM,MACP,EACA,KAAM,CACL,QAAS,CACR,YAAa,YACb,MAAO,wBACP,QAAS,qDACV,EACA,SAAU,CACT,SACA,WACD,CACD,CACD,CACD,EACI,GAAQ,CACX,CACC,KAAM,QACP,EACA,CACC,KAAM,SACN,SAAU,CACT,MACD,EACA,WAAY,CACX,WAAY,CACX,KAAQ,CACP,wBACA,sBACD,CACD,EACA,KAAM,CACL,KAAQ,CACP,MACD,CACD,EACA,KAAM,CACL,KAAM,SACN,SAAU,CACT,UACD,EACA,WAAY,CACX,QAAS,CACR,KAAM,SACN,YAAa,wYACb,WAAY,CACX,YAAa,CACZ,KAAM,SACN,YAAa,6CACb,SAAU,CACT,WACD,EACA,UAAW,CACZ,EACA,MAAO,CACN,KAAM,SACN,YAAa,2CACb,SAAU,CACT,uBACD,EACA,UAAW,CACZ,EACA,QAAS,CACR,KAAM,SACN,YAAa,iDACb,SAAU,CACT,qDACD,EACA,UAAW,CACZ,CACD,CACD,EACA,SAAU,CACT,KAAM,QACN,YAAa,mTACb,MAAO,CACN,KAAM,SACN,SAAU,CACT,SACA,WACD,EACA,UAAW,CACZ,CACD,CACD,CACD,CACD,CACD,CACD,EACI,GAAS,CACZ,QAAS,GACT,IAAK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","file":"static/module-backstage.d3d55d72.js","sourcesContent":["import { UrlPatternDiscovery, AlertApiForwarder, NoOpAnalyticsApi, ErrorAlerter, ErrorApiForwarder, UnhandledErrorForwarder, WebStorage, createFetchApi, FetchMiddlewares, OAuthRequestManager, GoogleAuth, MicrosoftAuth, GithubAuth, OktaAuth, GitlabAuth, OneLoginAuth, BitbucketAuth, AtlassianAuth, createSpecializedApp } from '@backstage/core-app-api';\nimport { createApiFactory, discoveryApiRef, configApiRef, alertApiRef, analyticsApiRef, errorApiRef, storageApiRef, fetchApiRef, identityApiRef, oauthRequestApiRef, googleAuthApiRef, microsoftAuthApiRef, githubAuthApiRef, oktaAuthApiRef, gitlabAuthApiRef, oneloginAuthApiRef, bitbucketAuthApiRef, atlassianAuthApiRef } from '@backstage/core-plugin-api';\nimport { permissionApiRef, IdentityPermissionApi } from '@backstage/plugin-permission-react';\nimport React from 'react';\nimport Button from '@material-ui/core/Button';\nimport { Progress, ErrorPage, ErrorPanel } from '@backstage/core-components';\nimport { BrowserRouter, useInRouterContext, MemoryRouter } from 'react-router-dom';\nimport MuiApartmentIcon from '@material-ui/icons/Apartment';\nimport MuiBrokenImageIcon from '@material-ui/icons/BrokenImage';\nimport MuiCategoryIcon from '@material-ui/icons/Category';\nimport MuiCreateNewFolderIcon from '@material-ui/icons/CreateNewFolder';\nimport MuiSubjectIcon from '@material-ui/icons/Subject';\nimport MuiSearchIcon from '@material-ui/icons/Search';\nimport MuiChatIcon from '@material-ui/icons/Chat';\nimport MuiDashboardIcon from '@material-ui/icons/Dashboard';\nimport MuiDocsIcon from '@material-ui/icons/Description';\nimport MuiEmailIcon from '@material-ui/icons/Email';\nimport MuiExtensionIcon from '@material-ui/icons/Extension';\nimport MuiGitHubIcon from '@material-ui/icons/GitHub';\nimport MuiHelpIcon from '@material-ui/icons/Help';\nimport MuiLocationOnIcon from '@material-ui/icons/LocationOn';\nimport MuiMemoryIcon from '@material-ui/icons/Memory';\nimport MuiMenuBookIcon from '@material-ui/icons/MenuBook';\nimport MuiPeopleIcon from '@material-ui/icons/People';\nimport MuiPersonIcon from '@material-ui/icons/Person';\nimport MuiWarningIcon from '@material-ui/icons/Warning';\nimport { lightTheme, darkTheme } from '@backstage/theme';\nimport DarkIcon from '@material-ui/icons/Brightness2';\nimport LightIcon from '@material-ui/icons/WbSunny';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\n\nconst apis = [\n  createApiFactory({\n    api: discoveryApiRef,\n    deps: { configApi: configApiRef },\n    factory: ({ configApi }) => UrlPatternDiscovery.compile(`${configApi.getString(\"backend.baseUrl\")}/api/{{ pluginId }}`)\n  }),\n  createApiFactory({\n    api: alertApiRef,\n    deps: {},\n    factory: () => new AlertApiForwarder()\n  }),\n  createApiFactory({\n    api: analyticsApiRef,\n    deps: {},\n    factory: () => new NoOpAnalyticsApi()\n  }),\n  createApiFactory({\n    api: errorApiRef,\n    deps: { alertApi: alertApiRef },\n    factory: ({ alertApi }) => {\n      const errorApi = new ErrorAlerter(alertApi, new ErrorApiForwarder());\n      UnhandledErrorForwarder.forward(errorApi, { hidden: false });\n      return errorApi;\n    }\n  }),\n  createApiFactory({\n    api: storageApiRef,\n    deps: { errorApi: errorApiRef },\n    factory: ({ errorApi }) => WebStorage.create({ errorApi })\n  }),\n  createApiFactory({\n    api: fetchApiRef,\n    deps: {\n      configApi: configApiRef,\n      identityApi: identityApiRef,\n      discoveryApi: discoveryApiRef\n    },\n    factory: ({ configApi, identityApi, discoveryApi }) => {\n      return createFetchApi({\n        middleware: [\n          FetchMiddlewares.resolvePluginProtocol({\n            discoveryApi\n          }),\n          FetchMiddlewares.injectIdentityAuth({\n            identityApi,\n            config: configApi\n          })\n        ]\n      });\n    }\n  }),\n  createApiFactory({\n    api: oauthRequestApiRef,\n    deps: {},\n    factory: () => new OAuthRequestManager()\n  }),\n  createApiFactory({\n    api: googleAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => GoogleAuth.create({\n      discoveryApi,\n      oauthRequestApi,\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: microsoftAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => MicrosoftAuth.create({\n      discoveryApi,\n      oauthRequestApi,\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: githubAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => GithubAuth.create({\n      discoveryApi,\n      oauthRequestApi,\n      defaultScopes: [\"read:user\"],\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: oktaAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => OktaAuth.create({\n      discoveryApi,\n      oauthRequestApi,\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: gitlabAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => GitlabAuth.create({\n      discoveryApi,\n      oauthRequestApi,\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: oneloginAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => OneLoginAuth.create({\n      discoveryApi,\n      oauthRequestApi,\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: bitbucketAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => BitbucketAuth.create({\n      discoveryApi,\n      oauthRequestApi,\n      defaultScopes: [\"team\"],\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: atlassianAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => {\n      return AtlassianAuth.create({\n        discoveryApi,\n        oauthRequestApi,\n        environment: configApi.getOptionalString(\"auth.environment\")\n      });\n    }\n  }),\n  createApiFactory({\n    api: permissionApiRef,\n    deps: {\n      discovery: discoveryApiRef,\n      identity: identityApiRef,\n      config: configApiRef\n    },\n    factory: ({ config, discovery, identity }) => IdentityPermissionApi.create({ config, discovery, identity })\n  })\n];\n\nfunction OptionallyWrapInRouter({ children }) {\n  if (useInRouterContext()) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n  }\n  return /* @__PURE__ */ React.createElement(MemoryRouter, null, children);\n}\nconst DefaultNotFoundPage = () => /* @__PURE__ */ React.createElement(ErrorPage, {\n  status: \"404\",\n  statusMessage: \"PAGE NOT FOUND\"\n});\nconst DefaultBootErrorPage = ({ step, error }) => {\n  let message = \"\";\n  if (step === \"load-config\") {\n    message = `The configuration failed to load, someone should have a look at this error: ${error.message}`;\n  } else if (step === \"load-chunk\") {\n    message = `Lazy loaded chunk failed to load, try to reload the page: ${error.message}`;\n  }\n  return /* @__PURE__ */ React.createElement(OptionallyWrapInRouter, null, /* @__PURE__ */ React.createElement(ErrorPage, {\n    status: \"501\",\n    statusMessage: message\n  }));\n};\nconst DefaultErrorBoundaryFallback = ({\n  error,\n  resetError,\n  plugin\n}) => {\n  return /* @__PURE__ */ React.createElement(ErrorPanel, {\n    title: `Error in ${plugin == null ? void 0 : plugin.getId()}`,\n    defaultExpanded: true,\n    error\n  }, /* @__PURE__ */ React.createElement(Button, {\n    variant: \"outlined\",\n    onClick: resetError\n  }, \"Retry\"));\n};\nconst components = {\n  Progress,\n  Router: BrowserRouter,\n  NotFoundErrorPage: DefaultNotFoundPage,\n  BootErrorPage: DefaultBootErrorPage,\n  ErrorBoundaryFallback: DefaultErrorBoundaryFallback\n};\n\nconst icons = {\n  brokenImage: MuiBrokenImageIcon,\n  catalog: MuiMenuBookIcon,\n  scaffolder: MuiCreateNewFolderIcon,\n  techdocs: MuiSubjectIcon,\n  search: MuiSearchIcon,\n  chat: MuiChatIcon,\n  dashboard: MuiDashboardIcon,\n  docs: MuiDocsIcon,\n  email: MuiEmailIcon,\n  github: MuiGitHubIcon,\n  group: MuiPeopleIcon,\n  help: MuiHelpIcon,\n  \"kind:api\": MuiExtensionIcon,\n  \"kind:component\": MuiMemoryIcon,\n  \"kind:domain\": MuiApartmentIcon,\n  \"kind:group\": MuiPeopleIcon,\n  \"kind:location\": MuiLocationOnIcon,\n  \"kind:system\": MuiCategoryIcon,\n  \"kind:user\": MuiPersonIcon,\n  user: MuiPersonIcon,\n  warning: MuiWarningIcon\n};\n\nconst themes = [\n  {\n    id: \"light\",\n    title: \"Light Theme\",\n    variant: \"light\",\n    icon: /* @__PURE__ */ React.createElement(LightIcon, null),\n    Provider: ({ children }) => /* @__PURE__ */ React.createElement(ThemeProvider, {\n      theme: lightTheme\n    }, /* @__PURE__ */ React.createElement(CssBaseline, null, children))\n  },\n  {\n    id: \"dark\",\n    title: \"Dark Theme\",\n    variant: \"dark\",\n    icon: /* @__PURE__ */ React.createElement(DarkIcon, null),\n    Provider: ({ children }) => /* @__PURE__ */ React.createElement(ThemeProvider, {\n      theme: darkTheme\n    }, /* @__PURE__ */ React.createElement(CssBaseline, null, children))\n  }\n];\n\nfunction createApp(options) {\n  var _a, _b, _c;\n  return createSpecializedApp({\n    ...options,\n    apis: (_a = options == null ? void 0 : options.apis) != null ? _a : [],\n    bindRoutes: options == null ? void 0 : options.bindRoutes,\n    components: {\n      ...components,\n      ...options == null ? void 0 : options.components\n    },\n    configLoader: options == null ? void 0 : options.configLoader,\n    defaultApis: apis,\n    icons: {\n      ...icons,\n      ...options == null ? void 0 : options.icons\n    },\n    plugins: (_b = options == null ? void 0 : options.plugins) != null ? _b : [],\n    themes: (_c = options == null ? void 0 : options.themes) != null ? _c : themes\n  });\n}\n\nexport { createApp };\n//# sourceMappingURL=index.esm.js.map\n","import { parseEntityRef, stringifyLocationRef, stringifyEntityRef } from '@backstage/catalog-model';\nimport { ResponseError } from '@backstage/errors';\nimport crossFetch from 'cross-fetch';\n\nconst CATALOG_FILTER_EXISTS = Symbol.for(\"CATALOG_FILTER_EXISTS_0e15b590c0b343a2bae3e787e84c2111\");\n\nclass CatalogClient {\n  constructor(options) {\n    this.discoveryApi = options.discoveryApi;\n    this.fetchApi = options.fetchApi || { fetch: crossFetch };\n  }\n  async getEntityAncestors(request, options) {\n    const { kind, namespace, name } = parseEntityRef(request.entityRef);\n    return await this.requestRequired(\"GET\", `/entities/by-name/${encodeURIComponent(kind)}/${encodeURIComponent(namespace)}/${encodeURIComponent(name)}/ancestry`, options);\n  }\n  async getLocationById(id, options) {\n    return await this.requestOptional(\"GET\", `/locations/${encodeURIComponent(id)}`, options);\n  }\n  async getEntities(request, options) {\n    const { filter = [], fields = [], offset, limit, after } = request != null ? request : {};\n    const params = [];\n    for (const filterItem of [filter].flat()) {\n      const filterParts = [];\n      for (const [key, value] of Object.entries(filterItem)) {\n        for (const v of [value].flat()) {\n          if (v === CATALOG_FILTER_EXISTS) {\n            filterParts.push(encodeURIComponent(key));\n          } else if (typeof v === \"string\") {\n            filterParts.push(`${encodeURIComponent(key)}=${encodeURIComponent(v)}`);\n          }\n        }\n      }\n      if (filterParts.length) {\n        params.push(`filter=${filterParts.join(\",\")}`);\n      }\n    }\n    if (fields.length) {\n      params.push(`fields=${fields.map(encodeURIComponent).join(\",\")}`);\n    }\n    if (offset !== void 0) {\n      params.push(`offset=${offset}`);\n    }\n    if (limit !== void 0) {\n      params.push(`limit=${limit}`);\n    }\n    if (after !== void 0) {\n      params.push(`after=${encodeURIComponent(after)}`);\n    }\n    const query = params.length ? `?${params.join(\"&\")}` : \"\";\n    const entities = await this.requestRequired(\"GET\", `/entities${query}`, options);\n    const refCompare = (a, b) => {\n      var _a, _b;\n      if (((_a = a.metadata) == null ? void 0 : _a.name) === void 0 || a.kind === void 0 || ((_b = b.metadata) == null ? void 0 : _b.name) === void 0 || b.kind === void 0) {\n        return 0;\n      }\n      const aRef = stringifyEntityRef(a);\n      const bRef = stringifyEntityRef(b);\n      if (aRef < bRef) {\n        return -1;\n      }\n      if (aRef > bRef) {\n        return 1;\n      }\n      return 0;\n    };\n    return { items: entities.sort(refCompare) };\n  }\n  async getEntityByRef(entityRef, options) {\n    const { kind, namespace, name } = parseEntityRef(entityRef);\n    return this.requestOptional(\"GET\", `/entities/by-name/${encodeURIComponent(kind)}/${encodeURIComponent(namespace)}/${encodeURIComponent(name)}`, options);\n  }\n  async getEntityByName(compoundName, options) {\n    const { kind, namespace = \"default\", name } = compoundName;\n    return this.requestOptional(\"GET\", `/entities/by-name/${encodeURIComponent(kind)}/${encodeURIComponent(namespace)}/${encodeURIComponent(name)}`, options);\n  }\n  async refreshEntity(entityRef, options) {\n    const response = await this.fetchApi.fetch(`${await this.discoveryApi.getBaseUrl(\"catalog\")}/refresh`, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...(options == null ? void 0 : options.token) && { Authorization: `Bearer ${options == null ? void 0 : options.token}` }\n      },\n      method: \"POST\",\n      body: JSON.stringify({ entityRef })\n    });\n    if (response.status !== 200) {\n      throw new Error(await response.text());\n    }\n  }\n  async getEntityFacets(request, options) {\n    const { filter = [], facets } = request;\n    const params = [];\n    for (const filterItem of [filter].flat()) {\n      const filterParts = [];\n      for (const [key, value] of Object.entries(filterItem)) {\n        for (const v of [value].flat()) {\n          if (v === CATALOG_FILTER_EXISTS) {\n            filterParts.push(encodeURIComponent(key));\n          } else if (typeof v === \"string\") {\n            filterParts.push(`${encodeURIComponent(key)}=${encodeURIComponent(v)}`);\n          }\n        }\n      }\n      if (filterParts.length) {\n        params.push(`filter=${filterParts.join(\",\")}`);\n      }\n    }\n    for (const facet of facets) {\n      params.push(`facet=${encodeURIComponent(facet)}`);\n    }\n    const query = params.length ? `?${params.join(\"&\")}` : \"\";\n    return await this.requestOptional(\"GET\", `/entity-facets${query}`, options);\n  }\n  async addLocation({ type = \"url\", target, dryRun }, options) {\n    const response = await this.fetchApi.fetch(`${await this.discoveryApi.getBaseUrl(\"catalog\")}/locations${dryRun ? \"?dryRun=true\" : \"\"}`, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...(options == null ? void 0 : options.token) && { Authorization: `Bearer ${options == null ? void 0 : options.token}` }\n      },\n      method: \"POST\",\n      body: JSON.stringify({ type, target })\n    });\n    if (response.status !== 201) {\n      throw new Error(await response.text());\n    }\n    const { location, entities, exists } = await response.json();\n    if (!location) {\n      throw new Error(`Location wasn't added: ${target}`);\n    }\n    return {\n      location,\n      entities,\n      exists\n    };\n  }\n  async getLocationByRef(locationRef, options) {\n    const all = await this.requestRequired(\"GET\", \"/locations\", options);\n    return all.map((r) => r.data).find((l) => locationRef === stringifyLocationRef(l));\n  }\n  async removeLocationById(id, options) {\n    await this.requestIgnored(\"DELETE\", `/locations/${encodeURIComponent(id)}`, options);\n  }\n  async removeEntityByUid(uid, options) {\n    await this.requestIgnored(\"DELETE\", `/entities/by-uid/${encodeURIComponent(uid)}`, options);\n  }\n  async requestIgnored(method, path, options) {\n    const url = `${await this.discoveryApi.getBaseUrl(\"catalog\")}${path}`;\n    const headers = (options == null ? void 0 : options.token) ? { Authorization: `Bearer ${options.token}` } : {};\n    const response = await this.fetchApi.fetch(url, { method, headers });\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n  }\n  async requestRequired(method, path, options) {\n    const url = `${await this.discoveryApi.getBaseUrl(\"catalog\")}${path}`;\n    const headers = (options == null ? void 0 : options.token) ? { Authorization: `Bearer ${options.token}` } : {};\n    const response = await this.fetchApi.fetch(url, { method, headers });\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    return await response.json();\n  }\n  async requestOptional(method, path, options) {\n    const url = `${await this.discoveryApi.getBaseUrl(\"catalog\")}${path}`;\n    const headers = (options == null ? void 0 : options.token) ? { Authorization: `Bearer ${options.token}` } : {};\n    const response = await this.fetchApi.fetch(url, { method, headers });\n    if (!response.ok) {\n      if (response.status === 404) {\n        return void 0;\n      }\n      throw await ResponseError.fromResponse(response);\n    }\n    return await response.json();\n  }\n}\n\nconst ENTITY_STATUS_CATALOG_PROCESSING_TYPE = \"backstage.io/catalog-processing\";\n\nexport { CATALOG_FILTER_EXISTS, CatalogClient, ENTITY_STATUS_CATALOG_PROCESSING_TYPE };\n//# sourceMappingURL=index.esm.js.map\n","import lodash from 'lodash';\nimport Ajv from 'ajv';\n\nconst DEFAULT_NAMESPACE = \"default\";\nconst ANNOTATION_VIEW_URL = \"backstage.io/view-url\";\nconst ANNOTATION_EDIT_URL = \"backstage.io/edit-url\";\n\nclass DefaultNamespaceEntityPolicy {\n  constructor(namespace = DEFAULT_NAMESPACE) {\n    this.namespace = namespace;\n  }\n  async enforce(entity) {\n    if (entity.metadata.namespace) {\n      return entity;\n    }\n    return lodash.merge({ metadata: { namespace: this.namespace } }, entity);\n  }\n}\n\nclass CommonValidatorFunctions {\n  static isValidPrefixAndOrSuffix(value, separator, isValidPrefix, isValidSuffix) {\n    if (typeof value !== \"string\") {\n      return false;\n    }\n    const parts = value.split(separator);\n    if (parts.length === 1) {\n      return isValidSuffix(parts[0]);\n    } else if (parts.length === 2) {\n      return isValidPrefix(parts[0]) && isValidSuffix(parts[1]);\n    }\n    return false;\n  }\n  static isJsonSafe(value) {\n    try {\n      return lodash.isEqual(value, JSON.parse(JSON.stringify(value)));\n    } catch {\n      return false;\n    }\n  }\n  static isValidDnsSubdomain(value) {\n    return typeof value === \"string\" && value.length >= 1 && value.length <= 253 && value.split(\".\").every(CommonValidatorFunctions.isValidDnsLabel);\n  }\n  static isValidDnsLabel(value) {\n    return typeof value === \"string\" && value.length >= 1 && value.length <= 63 && /^[a-z0-9]+(\\-[a-z0-9]+)*$/.test(value);\n  }\n  static isValidTag(value) {\n    return typeof value === \"string\" && value.length >= 1 && value.length <= 63 && /^[a-z0-9+#]+(\\-[a-z0-9+#]+)*$/.test(value);\n  }\n  static isValidUrl(value) {\n    if (typeof value !== \"string\") {\n      return false;\n    }\n    try {\n      new URL(value);\n      return true;\n    } catch {\n      return false;\n    }\n  }\n  static isValidString(value) {\n    var _a;\n    return typeof value === \"string\" && ((_a = value == null ? void 0 : value.trim()) == null ? void 0 : _a.length) >= 1;\n  }\n  static isNonEmptyString(value) {\n    var _a;\n    return typeof value === \"string\" && ((_a = value == null ? void 0 : value.trim()) == null ? void 0 : _a.length) >= 1;\n  }\n}\n\nvar $schema$b = \"http://json-schema.org/draft-07/schema\";\nvar $id$b = \"EntityEnvelope\";\nvar description$b = \"The envelope skeleton parts of an entity - whatever is necessary to be able to give it a ref and pass to further validation / policy checking.\";\nvar examples$a = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"Component\",\n\t\tmetadata: {\n\t\t\tname: \"LoremService\"\n\t\t}\n\t}\n];\nvar type$3 = \"object\";\nvar required$2 = [\n\t\"apiVersion\",\n\t\"kind\",\n\t\"metadata\"\n];\nvar additionalProperties$2 = true;\nvar properties$2 = {\n\tapiVersion: {\n\t\ttype: \"string\",\n\t\tdescription: \"The version of specification format for this particular entity that this is written against.\",\n\t\tminLength: 1,\n\t\texamples: [\n\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\"my-company.net/v1\",\n\t\t\t\"1.0\"\n\t\t]\n\t},\n\tkind: {\n\t\ttype: \"string\",\n\t\tdescription: \"The high level entity type being described.\",\n\t\tminLength: 1,\n\t\texamples: [\n\t\t\t\"API\",\n\t\t\t\"Component\",\n\t\t\t\"Domain\",\n\t\t\t\"Group\",\n\t\t\t\"Location\",\n\t\t\t\"Resource\",\n\t\t\t\"System\",\n\t\t\t\"Template\",\n\t\t\t\"User\"\n\t\t]\n\t},\n\tmetadata: {\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"name\"\n\t\t],\n\t\tadditionalProperties: true,\n\t\tproperties: {\n\t\t\tname: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.\",\n\t\t\t\texamples: [\n\t\t\t\t\t\"metadata-proxy\"\n\t\t\t\t],\n\t\t\t\tminLength: 1\n\t\t\t},\n\t\t\tnamespace: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"The namespace that the entity belongs to.\",\n\t\t\t\t\"default\": \"default\",\n\t\t\t\texamples: [\n\t\t\t\t\t\"default\",\n\t\t\t\t\t\"admin\"\n\t\t\t\t],\n\t\t\t\tminLength: 1\n\t\t\t}\n\t\t}\n\t}\n};\nvar entityEnvelopeSchema = {\n\t$schema: $schema$b,\n\t$id: $id$b,\n\tdescription: description$b,\n\texamples: examples$a,\n\ttype: type$3,\n\trequired: required$2,\n\tadditionalProperties: additionalProperties$2,\n\tproperties: properties$2\n};\n\nvar $schema$a = \"http://json-schema.org/draft-07/schema\";\nvar $id$a = \"Entity\";\nvar description$a = \"The parts of the format that's common to all versions/kinds of entity.\";\nvar examples$9 = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"Component\",\n\t\tmetadata: {\n\t\t\tname: \"LoremService\",\n\t\t\tdescription: \"Creates Lorems like a pro.\",\n\t\t\tlabels: {\n\t\t\t\tproduct_name: \"Random value Generator\"\n\t\t\t},\n\t\t\tannotations: {\n\t\t\t\tdocs: \"https://github.com/..../tree/develop/doc\"\n\t\t\t}\n\t\t},\n\t\tspec: {\n\t\t\ttype: \"service\",\n\t\t\tlifecycle: \"production\",\n\t\t\towner: \"tools\"\n\t\t}\n\t}\n];\nvar type$2 = \"object\";\nvar required$1 = [\n\t\"apiVersion\",\n\t\"kind\",\n\t\"metadata\"\n];\nvar additionalProperties$1 = false;\nvar properties$1 = {\n\tapiVersion: {\n\t\ttype: \"string\",\n\t\tdescription: \"The version of specification format for this particular entity that this is written against.\",\n\t\tminLength: 1,\n\t\texamples: [\n\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\"my-company.net/v1\",\n\t\t\t\"1.0\"\n\t\t]\n\t},\n\tkind: {\n\t\ttype: \"string\",\n\t\tdescription: \"The high level entity type being described.\",\n\t\tminLength: 1,\n\t\texamples: [\n\t\t\t\"API\",\n\t\t\t\"Component\",\n\t\t\t\"Domain\",\n\t\t\t\"Group\",\n\t\t\t\"Location\",\n\t\t\t\"Resource\",\n\t\t\t\"System\",\n\t\t\t\"Template\",\n\t\t\t\"User\"\n\t\t]\n\t},\n\tmetadata: {\n\t\t$ref: \"EntityMeta\"\n\t},\n\tspec: {\n\t\ttype: \"object\",\n\t\tdescription: \"The specification data describing the entity itself.\"\n\t},\n\trelations: {\n\t\ttype: \"array\",\n\t\tdescription: \"The relations that this entity has with other entities.\",\n\t\titems: {\n\t\t\t$ref: \"common#relation\"\n\t\t}\n\t},\n\tstatus: {\n\t\t$ref: \"common#status\"\n\t}\n};\nvar entitySchema = {\n\t$schema: $schema$a,\n\t$id: $id$a,\n\tdescription: description$a,\n\texamples: examples$9,\n\ttype: type$2,\n\trequired: required$1,\n\tadditionalProperties: additionalProperties$1,\n\tproperties: properties$1\n};\n\nvar $schema$9 = \"http://json-schema.org/draft-07/schema\";\nvar $id$9 = \"EntityMeta\";\nvar description$9 = \"Metadata fields common to all versions/kinds of entity.\";\nvar examples$8 = [\n\t{\n\t\tuid: \"e01199ab-08cc-44c2-8e19-5c29ded82521\",\n\t\tetag: \"lsndfkjsndfkjnsdfkjnsd==\",\n\t\tname: \"my-component-yay\",\n\t\tnamespace: \"the-namespace\",\n\t\tlabels: {\n\t\t\t\"backstage.io/custom\": \"ValueStuff\"\n\t\t},\n\t\tannotations: {\n\t\t\t\"example.com/bindings\": \"are-secret\"\n\t\t},\n\t\ttags: [\n\t\t\t\"java\",\n\t\t\t\"data\"\n\t\t]\n\t}\n];\nvar type$1 = \"object\";\nvar required = [\n\t\"name\"\n];\nvar additionalProperties = true;\nvar properties = {\n\tuid: {\n\t\ttype: \"string\",\n\t\tdescription: \"A globally unique ID for the entity. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, but the server is free to reject requests that do so in such a way that it breaks semantics.\",\n\t\texamples: [\n\t\t\t\"e01199ab-08cc-44c2-8e19-5c29ded82521\"\n\t\t],\n\t\tminLength: 1\n\t},\n\tetag: {\n\t\ttype: \"string\",\n\t\tdescription: \"An opaque string that changes for each update operation to any part of the entity, including metadata. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, and the server will then reject the operation if it does not match the current stored value.\",\n\t\texamples: [\n\t\t\t\"lsndfkjsndfkjnsdfkjnsd==\"\n\t\t],\n\t\tminLength: 1\n\t},\n\tname: {\n\t\ttype: \"string\",\n\t\tdescription: \"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.\",\n\t\texamples: [\n\t\t\t\"metadata-proxy\"\n\t\t],\n\t\tminLength: 1\n\t},\n\tnamespace: {\n\t\ttype: \"string\",\n\t\tdescription: \"The namespace that the entity belongs to.\",\n\t\t\"default\": \"default\",\n\t\texamples: [\n\t\t\t\"default\",\n\t\t\t\"admin\"\n\t\t],\n\t\tminLength: 1\n\t},\n\ttitle: {\n\t\ttype: \"string\",\n\t\tdescription: \"A display name of the entity, to be presented in user interfaces instead of the name property, when available.\",\n\t\texamples: [\n\t\t\t\"React SSR Template\"\n\t\t],\n\t\tminLength: 1\n\t},\n\tdescription: {\n\t\ttype: \"string\",\n\t\tdescription: \"A short (typically relatively few words, on one line) description of the entity.\"\n\t},\n\tlabels: {\n\t\ttype: \"object\",\n\t\tdescription: \"Key/value pairs of identifying information attached to the entity.\",\n\t\tadditionalProperties: true,\n\t\tpatternProperties: {\n\t\t\t\"^.+$\": {\n\t\t\t\ttype: \"string\"\n\t\t\t}\n\t\t}\n\t},\n\tannotations: {\n\t\ttype: \"object\",\n\t\tdescription: \"Key/value pairs of non-identifying auxiliary information attached to the entity.\",\n\t\tadditionalProperties: true,\n\t\tpatternProperties: {\n\t\t\t\"^.+$\": {\n\t\t\t\ttype: \"string\"\n\t\t\t}\n\t\t}\n\t},\n\ttags: {\n\t\ttype: \"array\",\n\t\tdescription: \"A list of single-valued strings, to for example classify catalog entities in various ways.\",\n\t\titems: {\n\t\t\ttype: \"string\",\n\t\t\tminLength: 1\n\t\t}\n\t},\n\tlinks: {\n\t\ttype: \"array\",\n\t\tdescription: \"A list of external hyperlinks related to the entity. Links can provide additional contextual information that may be located outside of Backstage itself. For example, an admin dashboard or external CMS page.\",\n\t\titems: {\n\t\t\ttype: \"object\",\n\t\t\trequired: [\n\t\t\t\t\"url\"\n\t\t\t],\n\t\t\tproperties: {\n\t\t\t\turl: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"A url in a standard uri format.\",\n\t\t\t\t\texamples: [\n\t\t\t\t\t\t\"https://admin.example-org.com\"\n\t\t\t\t\t],\n\t\t\t\t\tminLength: 1\n\t\t\t\t},\n\t\t\t\ttitle: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"A user friendly display name for the link.\",\n\t\t\t\t\texamples: [\n\t\t\t\t\t\t\"Admin Dashboard\"\n\t\t\t\t\t],\n\t\t\t\t\tminLength: 1\n\t\t\t\t},\n\t\t\t\ticon: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"A key representing a visual icon to be displayed in the UI.\",\n\t\t\t\t\texamples: [\n\t\t\t\t\t\t\"dashboard\"\n\t\t\t\t\t],\n\t\t\t\t\tminLength: 1\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\nvar entityMetaSchema = {\n\t$schema: $schema$9,\n\t$id: $id$9,\n\tdescription: description$9,\n\texamples: examples$8,\n\ttype: type$1,\n\trequired: required,\n\tadditionalProperties: additionalProperties,\n\tproperties: properties\n};\n\nvar $schema$8 = \"http://json-schema.org/draft-07/schema\";\nvar $id$8 = \"common\";\nvar type = \"object\";\nvar description$8 = \"Common definitions to import from other schemas\";\nvar definitions = {\n\treference: {\n\t\t$id: \"#reference\",\n\t\ttype: \"object\",\n\t\tdescription: \"A reference by name to another entity.\",\n\t\trequired: [\n\t\t\t\"kind\",\n\t\t\t\"namespace\",\n\t\t\t\"name\"\n\t\t],\n\t\tadditionalProperties: false,\n\t\tproperties: {\n\t\t\tkind: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"The kind field of the entity.\",\n\t\t\t\tminLength: 1\n\t\t\t},\n\t\t\tnamespace: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"The metadata.namespace field of the entity.\",\n\t\t\t\tminLength: 1\n\t\t\t},\n\t\t\tname: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"The metadata.name field of the entity.\",\n\t\t\t\tminLength: 1\n\t\t\t}\n\t\t}\n\t},\n\trelation: {\n\t\t$id: \"#relation\",\n\t\ttype: \"object\",\n\t\tdescription: \"A directed relation from one entity to another.\",\n\t\trequired: [\n\t\t\t\"type\",\n\t\t\t\"target\"\n\t\t],\n\t\tadditionalProperties: false,\n\t\tproperties: {\n\t\t\ttype: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tminLength: 1,\n\t\t\t\tpattern: \"^\\\\w+$\",\n\t\t\t\tdescription: \"The type of relation.\"\n\t\t\t},\n\t\t\ttarget: {\n\t\t\t\t$ref: \"#reference\"\n\t\t\t}\n\t\t}\n\t},\n\tstatus: {\n\t\t$id: \"#status\",\n\t\ttype: \"object\",\n\t\tdescription: \"The current status of the entity, as claimed by various sources.\",\n\t\trequired: [\n\t\t],\n\t\tadditionalProperties: true,\n\t\tproperties: {\n\t\t\titems: {\n\t\t\t\ttype: \"array\",\n\t\t\t\titems: {\n\t\t\t\t\t$ref: \"#statusItem\"\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tstatusItem: {\n\t\t$id: \"#statusItem\",\n\t\ttype: \"object\",\n\t\tdescription: \"A specific status item on a well known format.\",\n\t\trequired: [\n\t\t\t\"type\",\n\t\t\t\"level\",\n\t\t\t\"message\"\n\t\t],\n\t\tadditionalProperties: true,\n\t\tproperties: {\n\t\t\ttype: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tminLength: 1\n\t\t\t},\n\t\t\tlevel: {\n\t\t\t\t$ref: \"#statusLevel\",\n\t\t\t\tdescription: \"The status level / severity of the status item.\"\n\t\t\t},\n\t\t\tmessage: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"A brief message describing the status, intended for human consumption.\"\n\t\t\t},\n\t\t\terror: {\n\t\t\t\t$ref: \"#error\",\n\t\t\t\tdescription: \"An optional serialized error object related to the status.\"\n\t\t\t}\n\t\t}\n\t},\n\tstatusLevel: {\n\t\t$id: \"#statusLevel\",\n\t\ttype: \"string\",\n\t\tdescription: \"A status level / severity.\",\n\t\t\"enum\": [\n\t\t\t\"info\",\n\t\t\t\"warning\",\n\t\t\t\"error\"\n\t\t]\n\t},\n\terror: {\n\t\t$id: \"#error\",\n\t\ttype: \"object\",\n\t\tdescription: \"A serialized error object.\",\n\t\trequired: [\n\t\t\t\"name\",\n\t\t\t\"message\"\n\t\t],\n\t\tadditionalProperties: true,\n\t\tproperties: {\n\t\t\tname: {\n\t\t\t\ttype: \"string\",\n\t\t\t\texamples: [\n\t\t\t\t\t\"Error\",\n\t\t\t\t\t\"InputError\"\n\t\t\t\t],\n\t\t\t\tdescription: \"The type name of the error\",\n\t\t\t\tminLength: 1\n\t\t\t},\n\t\t\tmessage: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"The message of the error\"\n\t\t\t},\n\t\t\tcode: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"An error code associated with the error\"\n\t\t\t},\n\t\t\tstack: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"An error stack trace\"\n\t\t\t}\n\t\t}\n\t}\n};\nvar commonSchema = {\n\t$schema: $schema$8,\n\t$id: $id$8,\n\ttype: type,\n\tdescription: description$8,\n\tdefinitions: definitions\n};\n\nconst compiledSchemaCache = /* @__PURE__ */ new Map();\nconst refDependencyCandidates = [\n  entityEnvelopeSchema,\n  entitySchema,\n  entityMetaSchema,\n  commonSchema\n];\nfunction throwAjvError(errors) {\n  if (!(errors == null ? void 0 : errors.length)) {\n    throw new TypeError(\"Unknown error\");\n  }\n  const error = errors[0];\n  throw new TypeError(`${error.instancePath || \"<root>\"} ${error.message}${error.params ? ` - ${Object.entries(error.params).map(([key, val]) => `${key}: ${val}`).join(\", \")}` : \"\"}`);\n}\nfunction compileAjvSchema(schema, options = {}) {\n  var _a;\n  const disableCache = (_a = options == null ? void 0 : options.disableCache) != null ? _a : false;\n  const cacheKey = disableCache ? \"\" : JSON.stringify(schema);\n  if (!disableCache) {\n    const cached = compiledSchemaCache.get(cacheKey);\n    if (cached) {\n      return cached;\n    }\n  }\n  const extraSchemas = getExtraSchemas(schema);\n  const ajv = new Ajv({\n    allowUnionTypes: true,\n    allErrors: true,\n    validateSchema: true\n  });\n  if (extraSchemas.length) {\n    ajv.addSchema(extraSchemas, void 0, void 0, true);\n  }\n  const compiled = ajv.compile(schema);\n  if (!disableCache) {\n    compiledSchemaCache.set(cacheKey, compiled);\n  }\n  return compiled;\n}\nfunction getExtraSchemas(schema) {\n  if (typeof schema !== \"object\") {\n    return [];\n  }\n  const seen = /* @__PURE__ */ new Set();\n  if (schema.$id) {\n    seen.add(schema.$id);\n  }\n  const selected = new Array();\n  const todo = [schema];\n  while (todo.length) {\n    const current = todo.pop();\n    for (const ref of getAllRefs(current)) {\n      if (!seen.has(ref)) {\n        seen.add(ref);\n        const match = refDependencyCandidates.find((c) => c.$id === ref);\n        if (match) {\n          selected.push(match);\n          todo.push(match);\n        }\n      }\n    }\n  }\n  return selected;\n}\nfunction* getAllRefs(schema) {\n  const todo = [schema];\n  while (todo.length) {\n    const current = todo.pop();\n    if (typeof current === \"object\" && current) {\n      for (const [key, value] of Object.entries(current)) {\n        if (key === \"$ref\" && typeof value === \"string\") {\n          yield value.split(\"#\")[0];\n        } else {\n          todo.push(value);\n        }\n      }\n    }\n  }\n}\n\nfunction entityEnvelopeSchemaValidator(schema) {\n  const validate = compileAjvSchema(schema ? schema : entityEnvelopeSchema);\n  return (data) => {\n    const result = validate(data);\n    if (result === true) {\n      return data;\n    }\n    throw throwAjvError(validate.errors);\n  };\n}\n\nfunction entityKindSchemaValidator(schema) {\n  const validate = compileAjvSchema(schema);\n  return (data) => {\n    var _a;\n    const result = validate(data);\n    if (result === true) {\n      return data;\n    }\n    const softCandidates = (_a = validate.errors) == null ? void 0 : _a.filter((e) => [\"/kind\", \"/apiVersion\"].includes(e.instancePath));\n    if ((softCandidates == null ? void 0 : softCandidates.length) && softCandidates.every((e) => e.keyword === \"enum\")) {\n      return false;\n    }\n    throw throwAjvError(validate.errors);\n  };\n}\n\nfunction entitySchemaValidator(schema) {\n  const validate = compileAjvSchema(schema ? schema : entitySchema);\n  return (data) => {\n    const result = validate(data);\n    if (result === true) {\n      return data;\n    }\n    throw throwAjvError(validate.errors);\n  };\n}\n\nclass KubernetesValidatorFunctions {\n  static isValidApiVersion(value) {\n    return CommonValidatorFunctions.isValidPrefixAndOrSuffix(value, \"/\", CommonValidatorFunctions.isValidDnsSubdomain, (n) => n.length >= 1 && n.length <= 63 && /^[a-z0-9A-Z]+$/.test(n));\n  }\n  static isValidKind(value) {\n    return typeof value === \"string\" && value.length >= 1 && value.length <= 63 && /^[a-zA-Z][a-z0-9A-Z]*$/.test(value);\n  }\n  static isValidObjectName(value) {\n    return typeof value === \"string\" && value.length >= 1 && value.length <= 63 && /^([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]$/.test(value);\n  }\n  static isValidNamespace(value) {\n    return CommonValidatorFunctions.isValidDnsLabel(value);\n  }\n  static isValidLabelKey(value) {\n    return CommonValidatorFunctions.isValidPrefixAndOrSuffix(value, \"/\", CommonValidatorFunctions.isValidDnsSubdomain, KubernetesValidatorFunctions.isValidObjectName);\n  }\n  static isValidLabelValue(value) {\n    return value === \"\" || KubernetesValidatorFunctions.isValidObjectName(value);\n  }\n  static isValidAnnotationKey(value) {\n    return CommonValidatorFunctions.isValidPrefixAndOrSuffix(value, \"/\", CommonValidatorFunctions.isValidDnsSubdomain, KubernetesValidatorFunctions.isValidObjectName);\n  }\n  static isValidAnnotationValue(value) {\n    return typeof value === \"string\";\n  }\n}\n\nconst defaultValidators = {\n  isValidApiVersion: KubernetesValidatorFunctions.isValidApiVersion,\n  isValidKind: KubernetesValidatorFunctions.isValidKind,\n  isValidEntityName: KubernetesValidatorFunctions.isValidObjectName,\n  isValidNamespace: KubernetesValidatorFunctions.isValidNamespace,\n  isValidLabelKey: KubernetesValidatorFunctions.isValidLabelKey,\n  isValidLabelValue: KubernetesValidatorFunctions.isValidLabelValue,\n  isValidAnnotationKey: KubernetesValidatorFunctions.isValidAnnotationKey,\n  isValidAnnotationValue: KubernetesValidatorFunctions.isValidAnnotationValue,\n  isValidTag: (value) => {\n    return typeof value === \"string\" && value.length >= 1 && value.length <= 63 && /^[a-z0-9:+#]+(\\-[a-z0-9:+#]+)*$/.test(value);\n  }\n};\nfunction makeValidator(overrides = {}) {\n  return {\n    ...defaultValidators,\n    ...overrides\n  };\n}\n\nclass FieldFormatEntityPolicy {\n  constructor(validators = makeValidator()) {\n    this.validators = validators;\n  }\n  async enforce(entity) {\n    var _a, _b, _c, _d, _e, _f, _g;\n    function require(field, value, validator) {\n      if (value === void 0 || value === null) {\n        throw new Error(`${field} must have a value`);\n      }\n      let isValid;\n      try {\n        isValid = validator(value);\n      } catch (e) {\n        throw new Error(`${field} could not be validated, ${e}`);\n      }\n      if (!isValid) {\n        let expectation;\n        switch (validator.name) {\n          case \"isValidLabelValue\":\n          case \"isValidObjectName\":\n            expectation = \"a string that is sequences of [a-zA-Z0-9] separated by any of [-_.], at most 63 characters in total\";\n            break;\n          case \"isValidLabelKey\":\n          case \"isValidApiVersion\":\n          case \"isValidAnnotationKey\":\n            expectation = \"a valid prefix and/or suffix\";\n            break;\n          case \"isValidNamespace\":\n          case \"isValidDnsLabel\":\n            expectation = \"a string that is sequences of [a-z0-9] separated by [-], at most 63 characters in total\";\n            break;\n          case \"isValidTag\":\n            expectation = \"a string that is sequences of [a-z0-9+#] separated by [-], at most 63 characters in total\";\n            break;\n          case \"isValidAnnotationValue\":\n            expectation = \"a string\";\n            break;\n          case \"isValidKind\":\n            expectation = \"a string that is a sequence of [a-zA-Z][a-z0-9A-Z], at most 63 characters in total\";\n            break;\n          case \"isValidUrl\":\n            expectation = \"a string that is a valid url\";\n            break;\n          case \"isValidString\":\n          case \"isNonEmptyString\":\n            expectation = \"a non empty string\";\n            break;\n          default:\n            expectation = void 0;\n            break;\n        }\n        const message = expectation ? ` expected ${expectation} but found \"${value}\".` : \"\";\n        throw new Error(`\"${field}\" is not valid;${message} To learn more about catalog file format, visit: https://github.com/backstage/backstage/blob/master/docs/architecture-decisions/adr002-default-catalog-file-format.md`);\n      }\n    }\n    function optional(field, value, validator) {\n      return value === void 0 || require(field, value, validator);\n    }\n    require(\"apiVersion\", entity.apiVersion, this.validators.isValidApiVersion);\n    require(\"kind\", entity.kind, this.validators.isValidKind);\n    require(\"metadata.name\", entity.metadata.name, this.validators.isValidEntityName);\n    optional(\"metadata.namespace\", entity.metadata.namespace, this.validators.isValidNamespace);\n    for (const [k, v] of Object.entries((_a = entity.metadata.labels) != null ? _a : [])) {\n      require(`labels.${k}`, k, this.validators.isValidLabelKey);\n      require(`labels.${k}`, v, this.validators.isValidLabelValue);\n    }\n    for (const [k, v] of Object.entries((_b = entity.metadata.annotations) != null ? _b : [])) {\n      require(`annotations.${k}`, k, this.validators.isValidAnnotationKey);\n      require(`annotations.${k}`, v, this.validators.isValidAnnotationValue);\n    }\n    const tags = (_c = entity.metadata.tags) != null ? _c : [];\n    for (let i = 0; i < tags.length; ++i) {\n      require(`tags.${i}`, tags[i], this.validators.isValidTag);\n    }\n    const links = (_d = entity.metadata.links) != null ? _d : [];\n    for (let i = 0; i < links.length; ++i) {\n      require(`links.${i}.url`, (_e = links[i]) == null ? void 0 : _e.url, CommonValidatorFunctions.isValidUrl);\n      optional(`links.${i}.title`, (_f = links[i]) == null ? void 0 : _f.title, CommonValidatorFunctions.isNonEmptyString);\n      optional(`links.${i}.icon`, (_g = links[i]) == null ? void 0 : _g.icon, KubernetesValidatorFunctions.isValidObjectName);\n    }\n    return entity;\n  }\n}\n\nconst defaultKnownFields = [\"apiVersion\", \"kind\", \"metadata\", \"spec\"];\nclass NoForeignRootFieldsEntityPolicy {\n  constructor(knownFields = defaultKnownFields) {\n    this.knownFields = knownFields;\n  }\n  async enforce(entity) {\n    for (const field of Object.keys(entity)) {\n      if (!this.knownFields.includes(field)) {\n        throw new Error(`Unknown field ${field}`);\n      }\n    }\n    return entity;\n  }\n}\n\nclass SchemaValidEntityPolicy {\n  async enforce(entity) {\n    if (!this.validate) {\n      const ajv = new Ajv({ allowUnionTypes: true });\n      this.validate = ajv.addSchema([commonSchema, entityMetaSchema], void 0, void 0, true).compile(entitySchema);\n    }\n    const result = this.validate(entity);\n    if (result === true) {\n      return entity;\n    }\n    const [error] = this.validate.errors || [];\n    if (!error) {\n      throw new Error(`Malformed envelope, Unknown error`);\n    }\n    throw new Error(`Malformed envelope, ${error.instancePath || \"<root>\"} ${error.message}`);\n  }\n}\n\nfunction parseRefString(ref) {\n  let colonI = ref.indexOf(\":\");\n  const slashI = ref.indexOf(\"/\");\n  if (slashI !== -1 && slashI < colonI) {\n    colonI = -1;\n  }\n  const kind = colonI === -1 ? void 0 : ref.slice(0, colonI);\n  const namespace = slashI === -1 ? void 0 : ref.slice(colonI + 1, slashI);\n  const name = ref.slice(Math.max(colonI + 1, slashI + 1));\n  if (kind === \"\" || namespace === \"\" || name === \"\") {\n    throw new TypeError(`Entity reference \"${ref}\" was not on the form [<kind>:][<namespace>/]<name>`);\n  }\n  return { kind, namespace, name };\n}\nfunction getCompoundEntityRef(entity) {\n  return {\n    kind: entity.kind,\n    namespace: entity.metadata.namespace || DEFAULT_NAMESPACE,\n    name: entity.metadata.name\n  };\n}\nfunction parseEntityRef(ref, context) {\n  var _a, _b, _c, _d;\n  if (!ref) {\n    throw new Error(`Entity reference must not be empty`);\n  }\n  const defaultKind = context == null ? void 0 : context.defaultKind;\n  const defaultNamespace = (context == null ? void 0 : context.defaultNamespace) || DEFAULT_NAMESPACE;\n  let kind;\n  let namespace;\n  let name;\n  if (typeof ref === \"string\") {\n    const parsed = parseRefString(ref);\n    kind = (_a = parsed.kind) != null ? _a : defaultKind;\n    namespace = (_b = parsed.namespace) != null ? _b : defaultNamespace;\n    name = parsed.name;\n  } else {\n    kind = (_c = ref.kind) != null ? _c : defaultKind;\n    namespace = (_d = ref.namespace) != null ? _d : defaultNamespace;\n    name = ref.name;\n  }\n  if (!kind) {\n    const textual = JSON.stringify(ref);\n    throw new Error(`Entity reference ${textual} had missing or empty kind (e.g. did not start with \"component:\" or similar)`);\n  } else if (!namespace) {\n    const textual = JSON.stringify(ref);\n    throw new Error(`Entity reference ${textual} had missing or empty namespace`);\n  } else if (!name) {\n    const textual = JSON.stringify(ref);\n    throw new Error(`Entity reference ${textual} had missing or empty name`);\n  }\n  return { kind, namespace, name };\n}\nfunction stringifyEntityRef(ref) {\n  var _a, _b;\n  let kind;\n  let namespace;\n  let name;\n  if (\"metadata\" in ref) {\n    kind = ref.kind;\n    namespace = (_a = ref.metadata.namespace) != null ? _a : DEFAULT_NAMESPACE;\n    name = ref.metadata.name;\n  } else {\n    kind = ref.kind;\n    namespace = (_b = ref.namespace) != null ? _b : DEFAULT_NAMESPACE;\n    name = ref.name;\n  }\n  return `${kind.toLocaleLowerCase(\"en-US\")}:${namespace.toLocaleLowerCase(\"en-US\")}/${name.toLocaleLowerCase(\"en-US\")}`;\n}\n\nclass AllEntityPolicies {\n  constructor(policies) {\n    this.policies = policies;\n  }\n  async enforce(entity) {\n    let result = entity;\n    for (const policy of this.policies) {\n      const output = await policy.enforce(result);\n      if (!output) {\n        throw new Error(`Policy ${policy.constructor.name} did not return a result`);\n      }\n      result = output;\n    }\n    return result;\n  }\n}\nclass AnyEntityPolicy {\n  constructor(policies) {\n    this.policies = policies;\n  }\n  async enforce(entity) {\n    for (const policy of this.policies) {\n      const output = await policy.enforce(entity);\n      if (output) {\n        return output;\n      }\n    }\n    throw new Error(`The entity did not match any known policy`);\n  }\n}\nconst EntityPolicies = {\n  allOf(policies) {\n    return new AllEntityPolicies(policies);\n  },\n  oneOf(policies) {\n    return new AnyEntityPolicy(policies);\n  }\n};\n\nvar $schema$7 = \"http://json-schema.org/draft-07/schema\";\nvar $id$7 = \"ApiV1alpha1\";\nvar description$7 = \"An API describes an interface that can be exposed by a component. The API can be defined in different formats, like OpenAPI, AsyncAPI, GraphQL, gRPC, or other formats.\";\nvar examples$7 = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"API\",\n\t\tmetadata: {\n\t\t\tname: \"artist-api\",\n\t\t\tdescription: \"Retrieve artist details\",\n\t\t\tlabels: {\n\t\t\t\tproduct_name: \"Random value Generator\"\n\t\t\t},\n\t\t\tannotations: {\n\t\t\t\tdocs: \"https://github.com/..../tree/develop/doc\"\n\t\t\t}\n\t\t},\n\t\tspec: {\n\t\t\ttype: \"openapi\",\n\t\t\tlifecycle: \"production\",\n\t\t\towner: \"artist-relations-team\",\n\t\t\tsystem: \"artist-engagement-portal\",\n\t\t\tdefinition: \"openapi: \\\"3.0.0\\\"\\ninfo:...\"\n\t\t}\n\t}\n];\nvar allOf$7 = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\t\t\"backstage.io/v1beta1\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"API\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t\t\"type\",\n\t\t\t\t\t\"lifecycle\",\n\t\t\t\t\t\"owner\",\n\t\t\t\t\t\"definition\"\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\ttype: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The type of the API definition.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"openapi\",\n\t\t\t\t\t\t\t\"asyncapi\",\n\t\t\t\t\t\t\t\"graphql\",\n\t\t\t\t\t\t\t\"grpc\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tlifecycle: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The lifecycle state of the API.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"experimental\",\n\t\t\t\t\t\t\t\"production\",\n\t\t\t\t\t\t\t\"deprecated\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\towner: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the owner of the API.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"artist-relations-team\",\n\t\t\t\t\t\t\t\"user:john.johnson\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tsystem: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the system that the API belongs to.\",\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tdefinition: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The definition of the API, based on the format defined by the type.\",\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema$7 = {\n\t$schema: $schema$7,\n\t$id: $id$7,\n\tdescription: description$7,\n\texamples: examples$7,\n\tallOf: allOf$7\n};\n\nfunction ajvCompiledJsonSchemaValidator(schema) {\n  const validator = entityKindSchemaValidator(schema);\n  return {\n    async check(data) {\n      return validator(data) === data;\n    }\n  };\n}\n\nconst apiEntityV1alpha1Validator = ajvCompiledJsonSchemaValidator(schema$7);\n\nvar $schema$6 = \"http://json-schema.org/draft-07/schema\";\nvar $id$6 = \"ComponentV1alpha1\";\nvar description$6 = \"A Component describes a software component. It is typically intimately linked to the source code that constitutes the component, and should be what a developer may regard a \\\"unit of software\\\", usually with a distinct deployable or linkable artifact.\";\nvar examples$6 = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"Component\",\n\t\tmetadata: {\n\t\t\tname: \"LoremService\",\n\t\t\tdescription: \"Creates Lorems like a pro.\",\n\t\t\tlabels: {\n\t\t\t\tproduct_name: \"Random value Generator\"\n\t\t\t},\n\t\t\tannotations: {\n\t\t\t\tdocs: \"https://github.com/..../tree/develop/doc\"\n\t\t\t}\n\t\t},\n\t\tspec: {\n\t\t\ttype: \"service\",\n\t\t\tlifecycle: \"production\",\n\t\t\towner: \"tools\"\n\t\t}\n\t}\n];\nvar allOf$6 = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\t\t\"backstage.io/v1beta1\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"Component\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t\t\"type\",\n\t\t\t\t\t\"lifecycle\",\n\t\t\t\t\t\"owner\"\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\ttype: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The type of component.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"service\",\n\t\t\t\t\t\t\t\"website\",\n\t\t\t\t\t\t\t\"library\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tlifecycle: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The lifecycle state of the component.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"experimental\",\n\t\t\t\t\t\t\t\"production\",\n\t\t\t\t\t\t\t\"deprecated\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\towner: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the owner of the component.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"artist-relations-team\",\n\t\t\t\t\t\t\t\"user:john.johnson\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tsystem: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the system that the component belongs to.\",\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tsubcomponentOf: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to another component of which the component is a part.\",\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tprovidesApis: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"An array of entity references to the APIs that are provided by the component.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tconsumesApis: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"An array of entity references to the APIs that are consumed by the component.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdependsOn: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"An array of references to other entities that the component depends on to function.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema$6 = {\n\t$schema: $schema$6,\n\t$id: $id$6,\n\tdescription: description$6,\n\texamples: examples$6,\n\tallOf: allOf$6\n};\n\nconst componentEntityV1alpha1Validator = ajvCompiledJsonSchemaValidator(schema$6);\n\nvar $schema$5 = \"http://json-schema.org/draft-07/schema\";\nvar $id$5 = \"DomainV1alpha1\";\nvar description$5 = \"A Domain groups a collection of systems that share terminology, domain models, business purpose, or documentation, i.e. form a bounded context.\";\nvar examples$5 = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"Domain\",\n\t\tmetadata: {\n\t\t\tname: \"artists\",\n\t\t\tdescription: \"Everything about artists\"\n\t\t},\n\t\tspec: {\n\t\t\towner: \"artist-relations-team\"\n\t\t}\n\t}\n];\nvar allOf$5 = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\t\t\"backstage.io/v1beta1\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"Domain\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t\t\"owner\"\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\towner: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the owner of the component.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"artist-relations-team\",\n\t\t\t\t\t\t\t\"user:john.johnson\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema$5 = {\n\t$schema: $schema$5,\n\t$id: $id$5,\n\tdescription: description$5,\n\texamples: examples$5,\n\tallOf: allOf$5\n};\n\nconst domainEntityV1alpha1Validator = ajvCompiledJsonSchemaValidator(schema$5);\n\nvar $schema$4 = \"http://json-schema.org/draft-07/schema\";\nvar $id$4 = \"GroupV1alpha1\";\nvar description$4 = \"A group describes an organizational entity, such as for example a team, a business unit, or a loose collection of people in an interest group. Members of these groups are modeled in the catalog as kind User.\";\nvar examples$4 = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"Group\",\n\t\tmetadata: {\n\t\t\tname: \"infrastructure\",\n\t\t\tdescription: \"The infra business unit\"\n\t\t},\n\t\tspec: {\n\t\t\ttype: \"business-unit\",\n\t\t\tprofile: {\n\t\t\t\tdisplayName: \"Infrastructure\",\n\t\t\t\temail: \"infrastructure@example.com\",\n\t\t\t\tpicture: \"https://example.com/groups/bu-infrastructure.jpeg\"\n\t\t\t},\n\t\t\tparent: \"ops\",\n\t\t\tchildren: [\n\t\t\t\t\"backstage\",\n\t\t\t\t\"other\"\n\t\t\t]\n\t\t}\n\t}\n];\nvar allOf$4 = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\t\t\"backstage.io/v1beta1\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"Group\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t\t\"type\",\n\t\t\t\t\t\"children\"\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\ttype: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The type of group. There is currently no enforced set of values for this field, so it is left up to the adopting organization to choose a nomenclature that matches their org hierarchy.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"team\",\n\t\t\t\t\t\t\t\"business-unit\",\n\t\t\t\t\t\t\t\"product-area\",\n\t\t\t\t\t\t\t\"root\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tprofile: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tdescription: \"Optional profile information about the group, mainly for display purposes. All fields of this structure are also optional. The email would be a group email of some form, that the group may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the group, and that a browser could fetch and render on a group page or similar.\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tdisplayName: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"A simple display name to present to users.\",\n\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\"Infrastructure\"\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\temail: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"An email where this entity can be reached.\",\n\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\"infrastructure@example.com\"\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tpicture: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"The URL of an image that represents this entity.\",\n\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\"https://example.com/groups/bu-infrastructure.jpeg\"\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tparent: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The immediate parent group in the hierarchy, if any. Not all groups must have a parent; the catalog supports multi-root hierarchies. Groups may however not have more than one parent. This field is an entity reference.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"ops\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tchildren: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"The immediate child groups of this group in the hierarchy (whose parent field points to this group). The list must be present, but may be empty if there are no child groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\"backstage\",\n\t\t\t\t\t\t\t\t\"other\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tmembers: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"The users that are members of this group. The entries of this array are entity references.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\"jdoe\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema$4 = {\n\t$schema: $schema$4,\n\t$id: $id$4,\n\tdescription: description$4,\n\texamples: examples$4,\n\tallOf: allOf$4\n};\n\nconst groupEntityV1alpha1Validator = ajvCompiledJsonSchemaValidator(schema$4);\n\nvar $schema$3 = \"http://json-schema.org/draft-07/schema\";\nvar $id$3 = \"LocationV1alpha1\";\nvar description$3 = \"A location is a marker that references other places to look for catalog data.\";\nvar examples$3 = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"Location\",\n\t\tmetadata: {\n\t\t\tname: \"org-data\"\n\t\t},\n\t\tspec: {\n\t\t\ttype: \"url\",\n\t\t\ttargets: [\n\t\t\t\t\"http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml\",\n\t\t\t\t\"http://github.com/myorg/myproject/org-data-dump/catalog-info-consultants.yaml\"\n\t\t\t]\n\t\t}\n\t}\n];\nvar allOf$3 = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\t\t\"backstage.io/v1beta1\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"Location\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\ttype: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The single location type, that's common to the targets specified in the spec. If it is left out, it is inherited from the location type that originally read the entity data.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"url\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\ttarget: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"A single target as a string. Can be either an absolute path/URL (depending on the type), or a relative path such as ./details/catalog-info.yaml which is resolved relative to the location of this Location entity itself.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"./details/catalog-info.yaml\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\ttargets: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"A list of targets as strings. They can all be either absolute paths/URLs (depending on the type), or relative paths such as ./details/catalog-info.yaml which are resolved relative to the location of this Location entity itself.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\"./details/catalog-info.yaml\",\n\t\t\t\t\t\t\t\t\"http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tpresence: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"Whether the presence of the location target is required and it should be considered an error if it can not be found\",\n\t\t\t\t\t\t\"default\": \"required\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"required\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\t\"enum\": [\n\t\t\t\t\t\t\t\"required\",\n\t\t\t\t\t\t\t\"optional\"\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema$3 = {\n\t$schema: $schema$3,\n\t$id: $id$3,\n\tdescription: description$3,\n\texamples: examples$3,\n\tallOf: allOf$3\n};\n\nconst locationEntityV1alpha1Validator = ajvCompiledJsonSchemaValidator(schema$3);\n\nconst RELATION_OWNED_BY = \"ownedBy\";\nconst RELATION_OWNER_OF = \"ownerOf\";\nconst RELATION_CONSUMES_API = \"consumesApi\";\nconst RELATION_API_CONSUMED_BY = \"apiConsumedBy\";\nconst RELATION_PROVIDES_API = \"providesApi\";\nconst RELATION_API_PROVIDED_BY = \"apiProvidedBy\";\nconst RELATION_DEPENDS_ON = \"dependsOn\";\nconst RELATION_DEPENDENCY_OF = \"dependencyOf\";\nconst RELATION_PARENT_OF = \"parentOf\";\nconst RELATION_CHILD_OF = \"childOf\";\nconst RELATION_MEMBER_OF = \"memberOf\";\nconst RELATION_HAS_MEMBER = \"hasMember\";\nconst RELATION_PART_OF = \"partOf\";\nconst RELATION_HAS_PART = \"hasPart\";\n\nvar $schema$2 = \"http://json-schema.org/draft-07/schema\";\nvar $id$2 = \"ResourceV1alpha1\";\nvar description$2 = \"A resource describes the infrastructure a system needs to operate, like BigTable databases, Pub/Sub topics, S3 buckets or CDNs. Modelling them together with components and systems allows to visualize resource footprint, and create tooling around them.\";\nvar examples$2 = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"Resource\",\n\t\tmetadata: {\n\t\t\tname: \"artists-db\",\n\t\t\tdescription: \"Stores artist details\"\n\t\t},\n\t\tspec: {\n\t\t\ttype: \"database\",\n\t\t\towner: \"artist-relations-team\",\n\t\t\tsystem: \"artist-engagement-portal\"\n\t\t}\n\t}\n];\nvar allOf$2 = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\t\t\"backstage.io/v1beta1\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"Resource\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t\t\"type\",\n\t\t\t\t\t\"owner\"\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\ttype: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The type of resource.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"database\",\n\t\t\t\t\t\t\t\"s3-bucket\",\n\t\t\t\t\t\t\t\"cluster\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\towner: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the owner of the resource.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"artist-relations-team\",\n\t\t\t\t\t\t\t\"user:john.johnson\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tdependsOn: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"An array of references to other entities that the resource depends on to function.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tsystem: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the system that the resource belongs to.\",\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema$2 = {\n\t$schema: $schema$2,\n\t$id: $id$2,\n\tdescription: description$2,\n\texamples: examples$2,\n\tallOf: allOf$2\n};\n\nconst resourceEntityV1alpha1Validator = ajvCompiledJsonSchemaValidator(schema$2);\n\nvar $schema$1 = \"http://json-schema.org/draft-07/schema\";\nvar $id$1 = \"SystemV1alpha1\";\nvar description$1 = \"A system is a collection of resources and components. The system may expose or consume one or several APIs. It is viewed as abstraction level that provides potential consumers insights into exposed features without needing a too detailed view into the details of all components. This also gives the owning team the possibility to decide about published artifacts and APIs.\";\nvar examples$1 = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"System\",\n\t\tmetadata: {\n\t\t\tname: \"artist-engagement-portal\",\n\t\t\tdescription: \"Handy tools to keep artists in the loop\"\n\t\t},\n\t\tspec: {\n\t\t\towner: \"artist-relations-team\",\n\t\t\tdomain: \"artists\"\n\t\t}\n\t}\n];\nvar allOf$1 = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\t\t\"backstage.io/v1beta1\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"System\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t\t\"owner\"\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\towner: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the owner of the component.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"artist-relations-team\",\n\t\t\t\t\t\t\t\"user:john.johnson\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t},\n\t\t\t\t\tdomain: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"An entity reference to the domain that the system belongs to.\",\n\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\"artists\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema$1 = {\n\t$schema: $schema$1,\n\t$id: $id$1,\n\tdescription: description$1,\n\texamples: examples$1,\n\tallOf: allOf$1\n};\n\nconst systemEntityV1alpha1Validator = ajvCompiledJsonSchemaValidator(schema$1);\n\nvar $schema = \"http://json-schema.org/draft-07/schema\";\nvar $id = \"UserV1alpha1\";\nvar description = \"A user describes a person, such as an employee, a contractor, or similar. Users belong to Group entities in the catalog. These catalog user entries are connected to the way that authentication within the Backstage ecosystem works. See the auth section of the docs for a discussion of these concepts.\";\nvar examples = [\n\t{\n\t\tapiVersion: \"backstage.io/v1alpha1\",\n\t\tkind: \"User\",\n\t\tmetadata: {\n\t\t\tname: \"jdoe\"\n\t\t},\n\t\tspec: {\n\t\t\tprofile: {\n\t\t\t\tdisplayName: \"Jenny Doe\",\n\t\t\t\temail: \"jenny-doe@example.com\",\n\t\t\t\tpicture: \"https://example.com/staff/jenny-with-party-hat.jpeg\"\n\t\t\t},\n\t\t\tmemberOf: [\n\t\t\t\t\"team-b\",\n\t\t\t\t\"employees\"\n\t\t\t]\n\t\t}\n\t}\n];\nvar allOf = [\n\t{\n\t\t$ref: \"Entity\"\n\t},\n\t{\n\t\ttype: \"object\",\n\t\trequired: [\n\t\t\t\"spec\"\n\t\t],\n\t\tproperties: {\n\t\t\tapiVersion: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"backstage.io/v1alpha1\",\n\t\t\t\t\t\"backstage.io/v1beta1\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tkind: {\n\t\t\t\t\"enum\": [\n\t\t\t\t\t\"User\"\n\t\t\t\t]\n\t\t\t},\n\t\t\tspec: {\n\t\t\t\ttype: \"object\",\n\t\t\t\trequired: [\n\t\t\t\t\t\"memberOf\"\n\t\t\t\t],\n\t\t\t\tproperties: {\n\t\t\t\t\tprofile: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tdescription: \"Optional profile information about the user, mainly for display purposes. All fields of this structure are also optional. The email would be a primary email of some form, that the user may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the user, and that a browser could fetch and render on a profile page or similar.\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tdisplayName: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"A simple display name to present to users.\",\n\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\"Jenny Doe\"\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\temail: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"An email where this user can be reached.\",\n\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\"jenny-doe@example.com\"\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tpicture: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"The URL of an image that represents this user.\",\n\t\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\t\"https://example.com/staff/jenny-with-party-hat.jpeg\"\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tmemberOf: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\tdescription: \"The list of groups that the user is a direct member of (i.e., no transitive memberships are listed here). The list must be present, but may be empty if the user is not member of any groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.\",\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\texamples: [\n\t\t\t\t\t\t\t\t\"team-b\",\n\t\t\t\t\t\t\t\t\"employees\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tminLength: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n];\nvar schema = {\n\t$schema: $schema,\n\t$id: $id,\n\tdescription: description,\n\texamples: examples,\n\tallOf: allOf\n};\n\nconst userEntityV1alpha1Validator = ajvCompiledJsonSchemaValidator(schema);\n\nconst ANNOTATION_LOCATION = \"backstage.io/managed-by-location\";\nconst ANNOTATION_ORIGIN_LOCATION = \"backstage.io/managed-by-origin-location\";\nconst ANNOTATION_SOURCE_LOCATION = \"backstage.io/source-location\";\n\nfunction parseLocationRef(ref) {\n  if (typeof ref !== \"string\") {\n    throw new TypeError(`Unable to parse location ref '${ref}', unexpected argument ${typeof ref}`);\n  }\n  const splitIndex = ref.indexOf(\":\");\n  if (splitIndex < 0) {\n    throw new TypeError(`Unable to parse location ref '${ref}', expected '<type>:<target>', e.g. 'url:https://host/path'`);\n  }\n  const type = ref.substring(0, splitIndex).trim();\n  const target = ref.substring(splitIndex + 1).trim();\n  if (!type || !target) {\n    throw new TypeError(`Unable to parse location ref '${ref}', expected '<type>:<target>', e.g. 'url:https://host/path'`);\n  }\n  if (type === \"http\" || type === \"https\") {\n    throw new TypeError(`Invalid location ref '${ref}', please prefix it with 'url:', e.g. 'url:${ref}'`);\n  }\n  return { type, target };\n}\nfunction stringifyLocationRef(ref) {\n  const { type, target } = ref;\n  if (!type) {\n    throw new TypeError(`Unable to stringify location ref, empty type`);\n  } else if (!target) {\n    throw new TypeError(`Unable to stringify location ref, empty target`);\n  }\n  return `${type}:${target}`;\n}\nfunction getEntitySourceLocation(entity) {\n  var _a, _b, _c, _d, _e;\n  const locationRef = (_e = (_b = (_a = entity.metadata) == null ? void 0 : _a.annotations) == null ? void 0 : _b[ANNOTATION_SOURCE_LOCATION]) != null ? _e : (_d = (_c = entity.metadata) == null ? void 0 : _c.annotations) == null ? void 0 : _d[ANNOTATION_LOCATION];\n  if (!locationRef) {\n    throw new Error(`Entity '${stringifyEntityRef(entity)}' is missing location`);\n  }\n  return parseLocationRef(locationRef);\n}\n\nexport { ANNOTATION_EDIT_URL, ANNOTATION_LOCATION, ANNOTATION_ORIGIN_LOCATION, ANNOTATION_SOURCE_LOCATION, ANNOTATION_VIEW_URL, CommonValidatorFunctions, DEFAULT_NAMESPACE, DefaultNamespaceEntityPolicy, EntityPolicies, FieldFormatEntityPolicy, KubernetesValidatorFunctions, NoForeignRootFieldsEntityPolicy, RELATION_API_CONSUMED_BY, RELATION_API_PROVIDED_BY, RELATION_CHILD_OF, RELATION_CONSUMES_API, RELATION_DEPENDENCY_OF, RELATION_DEPENDS_ON, RELATION_HAS_MEMBER, RELATION_HAS_PART, RELATION_MEMBER_OF, RELATION_OWNED_BY, RELATION_OWNER_OF, RELATION_PARENT_OF, RELATION_PART_OF, RELATION_PROVIDES_API, SchemaValidEntityPolicy, apiEntityV1alpha1Validator, componentEntityV1alpha1Validator, domainEntityV1alpha1Validator, entityEnvelopeSchemaValidator, entityKindSchemaValidator, entitySchemaValidator, getCompoundEntityRef, getEntitySourceLocation, groupEntityV1alpha1Validator, locationEntityV1alpha1Validator, makeValidator, parseEntityRef, parseLocationRef, resourceEntityV1alpha1Validator, stringifyEntityRef, stringifyLocationRef, systemEntityV1alpha1Validator, userEntityV1alpha1Validator };\n//# sourceMappingURL=index.esm.js.map\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CodeGen = exports.Name = exports.nil = exports.stringify = exports.str = exports._ = exports.KeywordCxt = void 0;\nconst core_1 = require(\"./core\");\nconst draft7_1 = require(\"./vocabularies/draft7\");\nconst discriminator_1 = require(\"./vocabularies/discriminator\");\nconst draft7MetaSchema = require(\"./refs/json-schema-draft-07.json\");\nconst META_SUPPORT_DATA = [\"/properties\"];\nconst META_SCHEMA_ID = \"http://json-schema.org/draft-07/schema\";\nclass Ajv extends core_1.default {\n    _addVocabularies() {\n        super._addVocabularies();\n        draft7_1.default.forEach((v) => this.addVocabulary(v));\n        if (this.opts.discriminator)\n            this.addKeyword(discriminator_1.default);\n    }\n    _addDefaultMetaSchema() {\n        super._addDefaultMetaSchema();\n        if (!this.opts.meta)\n            return;\n        const metaSchema = this.opts.$data\n            ? this.$dataMetaSchema(draft7MetaSchema, META_SUPPORT_DATA)\n            : draft7MetaSchema;\n        this.addMetaSchema(metaSchema, META_SCHEMA_ID, false);\n        this.refs[\"http://json-schema.org/schema\"] = META_SCHEMA_ID;\n    }\n    defaultMeta() {\n        return (this.opts.defaultMeta =\n            super.defaultMeta() || (this.getSchema(META_SCHEMA_ID) ? META_SCHEMA_ID : undefined));\n    }\n}\nmodule.exports = exports = Ajv;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = Ajv;\nvar validate_1 = require(\"./compile/validate\");\nObject.defineProperty(exports, \"KeywordCxt\", { enumerable: true, get: function () { return validate_1.KeywordCxt; } });\nvar codegen_1 = require(\"./compile/codegen\");\nObject.defineProperty(exports, \"_\", { enumerable: true, get: function () { return codegen_1._; } });\nObject.defineProperty(exports, \"str\", { enumerable: true, get: function () { return codegen_1.str; } });\nObject.defineProperty(exports, \"stringify\", { enumerable: true, get: function () { return codegen_1.stringify; } });\nObject.defineProperty(exports, \"nil\", { enumerable: true, get: function () { return codegen_1.nil; } });\nObject.defineProperty(exports, \"Name\", { enumerable: true, get: function () { return codegen_1.Name; } });\nObject.defineProperty(exports, \"CodeGen\", { enumerable: true, get: function () { return codegen_1.CodeGen; } });\n//# sourceMappingURL=ajv.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.regexpCode = exports.getEsmExportName = exports.getProperty = exports.safeStringify = exports.stringify = exports.strConcat = exports.addCodeArg = exports.str = exports._ = exports.nil = exports._Code = exports.Name = exports.IDENTIFIER = exports._CodeOrName = void 0;\nclass _CodeOrName {\n}\nexports._CodeOrName = _CodeOrName;\nexports.IDENTIFIER = /^[a-z$_][a-z$_0-9]*$/i;\nclass Name extends _CodeOrName {\n    constructor(s) {\n        super();\n        if (!exports.IDENTIFIER.test(s))\n            throw new Error(\"CodeGen: name must be a valid identifier\");\n        this.str = s;\n    }\n    toString() {\n        return this.str;\n    }\n    emptyStr() {\n        return false;\n    }\n    get names() {\n        return { [this.str]: 1 };\n    }\n}\nexports.Name = Name;\nclass _Code extends _CodeOrName {\n    constructor(code) {\n        super();\n        this._items = typeof code === \"string\" ? [code] : code;\n    }\n    toString() {\n        return this.str;\n    }\n    emptyStr() {\n        if (this._items.length > 1)\n            return false;\n        const item = this._items[0];\n        return item === \"\" || item === '\"\"';\n    }\n    get str() {\n        var _a;\n        return ((_a = this._str) !== null && _a !== void 0 ? _a : (this._str = this._items.reduce((s, c) => `${s}${c}`, \"\")));\n    }\n    get names() {\n        var _a;\n        return ((_a = this._names) !== null && _a !== void 0 ? _a : (this._names = this._items.reduce((names, c) => {\n            if (c instanceof Name)\n                names[c.str] = (names[c.str] || 0) + 1;\n            return names;\n        }, {})));\n    }\n}\nexports._Code = _Code;\nexports.nil = new _Code(\"\");\nfunction _(strs, ...args) {\n    const code = [strs[0]];\n    let i = 0;\n    while (i < args.length) {\n        addCodeArg(code, args[i]);\n        code.push(strs[++i]);\n    }\n    return new _Code(code);\n}\nexports._ = _;\nconst plus = new _Code(\"+\");\nfunction str(strs, ...args) {\n    const expr = [safeStringify(strs[0])];\n    let i = 0;\n    while (i < args.length) {\n        expr.push(plus);\n        addCodeArg(expr, args[i]);\n        expr.push(plus, safeStringify(strs[++i]));\n    }\n    optimize(expr);\n    return new _Code(expr);\n}\nexports.str = str;\nfunction addCodeArg(code, arg) {\n    if (arg instanceof _Code)\n        code.push(...arg._items);\n    else if (arg instanceof Name)\n        code.push(arg);\n    else\n        code.push(interpolate(arg));\n}\nexports.addCodeArg = addCodeArg;\nfunction optimize(expr) {\n    let i = 1;\n    while (i < expr.length - 1) {\n        if (expr[i] === plus) {\n            const res = mergeExprItems(expr[i - 1], expr[i + 1]);\n            if (res !== undefined) {\n                expr.splice(i - 1, 3, res);\n                continue;\n            }\n            expr[i++] = \"+\";\n        }\n        i++;\n    }\n}\nfunction mergeExprItems(a, b) {\n    if (b === '\"\"')\n        return a;\n    if (a === '\"\"')\n        return b;\n    if (typeof a == \"string\") {\n        if (b instanceof Name || a[a.length - 1] !== '\"')\n            return;\n        if (typeof b != \"string\")\n            return `${a.slice(0, -1)}${b}\"`;\n        if (b[0] === '\"')\n            return a.slice(0, -1) + b.slice(1);\n        return;\n    }\n    if (typeof b == \"string\" && b[0] === '\"' && !(a instanceof Name))\n        return `\"${a}${b.slice(1)}`;\n    return;\n}\nfunction strConcat(c1, c2) {\n    return c2.emptyStr() ? c1 : c1.emptyStr() ? c2 : str `${c1}${c2}`;\n}\nexports.strConcat = strConcat;\n// TODO do not allow arrays here\nfunction interpolate(x) {\n    return typeof x == \"number\" || typeof x == \"boolean\" || x === null\n        ? x\n        : safeStringify(Array.isArray(x) ? x.join(\",\") : x);\n}\nfunction stringify(x) {\n    return new _Code(safeStringify(x));\n}\nexports.stringify = stringify;\nfunction safeStringify(x) {\n    return JSON.stringify(x)\n        .replace(/\\u2028/g, \"\\\\u2028\")\n        .replace(/\\u2029/g, \"\\\\u2029\");\n}\nexports.safeStringify = safeStringify;\nfunction getProperty(key) {\n    return typeof key == \"string\" && exports.IDENTIFIER.test(key) ? new _Code(`.${key}`) : _ `[${key}]`;\n}\nexports.getProperty = getProperty;\n//Does best effort to format the name properly\nfunction getEsmExportName(key) {\n    if (typeof key == \"string\" && exports.IDENTIFIER.test(key)) {\n        return new _Code(`${key}`);\n    }\n    throw new Error(`CodeGen: invalid export name: ${key}, use explicit $id name mapping`);\n}\nexports.getEsmExportName = getEsmExportName;\nfunction regexpCode(rx) {\n    return new _Code(rx.toString());\n}\nexports.regexpCode = regexpCode;\n//# sourceMappingURL=code.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.or = exports.and = exports.not = exports.CodeGen = exports.operators = exports.varKinds = exports.ValueScopeName = exports.ValueScope = exports.Scope = exports.Name = exports.regexpCode = exports.stringify = exports.getProperty = exports.nil = exports.strConcat = exports.str = exports._ = void 0;\nconst code_1 = require(\"./code\");\nconst scope_1 = require(\"./scope\");\nvar code_2 = require(\"./code\");\nObject.defineProperty(exports, \"_\", { enumerable: true, get: function () { return code_2._; } });\nObject.defineProperty(exports, \"str\", { enumerable: true, get: function () { return code_2.str; } });\nObject.defineProperty(exports, \"strConcat\", { enumerable: true, get: function () { return code_2.strConcat; } });\nObject.defineProperty(exports, \"nil\", { enumerable: true, get: function () { return code_2.nil; } });\nObject.defineProperty(exports, \"getProperty\", { enumerable: true, get: function () { return code_2.getProperty; } });\nObject.defineProperty(exports, \"stringify\", { enumerable: true, get: function () { return code_2.stringify; } });\nObject.defineProperty(exports, \"regexpCode\", { enumerable: true, get: function () { return code_2.regexpCode; } });\nObject.defineProperty(exports, \"Name\", { enumerable: true, get: function () { return code_2.Name; } });\nvar scope_2 = require(\"./scope\");\nObject.defineProperty(exports, \"Scope\", { enumerable: true, get: function () { return scope_2.Scope; } });\nObject.defineProperty(exports, \"ValueScope\", { enumerable: true, get: function () { return scope_2.ValueScope; } });\nObject.defineProperty(exports, \"ValueScopeName\", { enumerable: true, get: function () { return scope_2.ValueScopeName; } });\nObject.defineProperty(exports, \"varKinds\", { enumerable: true, get: function () { return scope_2.varKinds; } });\nexports.operators = {\n    GT: new code_1._Code(\">\"),\n    GTE: new code_1._Code(\">=\"),\n    LT: new code_1._Code(\"<\"),\n    LTE: new code_1._Code(\"<=\"),\n    EQ: new code_1._Code(\"===\"),\n    NEQ: new code_1._Code(\"!==\"),\n    NOT: new code_1._Code(\"!\"),\n    OR: new code_1._Code(\"||\"),\n    AND: new code_1._Code(\"&&\"),\n    ADD: new code_1._Code(\"+\"),\n};\nclass Node {\n    optimizeNodes() {\n        return this;\n    }\n    optimizeNames(_names, _constants) {\n        return this;\n    }\n}\nclass Def extends Node {\n    constructor(varKind, name, rhs) {\n        super();\n        this.varKind = varKind;\n        this.name = name;\n        this.rhs = rhs;\n    }\n    render({ es5, _n }) {\n        const varKind = es5 ? scope_1.varKinds.var : this.varKind;\n        const rhs = this.rhs === undefined ? \"\" : ` = ${this.rhs}`;\n        return `${varKind} ${this.name}${rhs};` + _n;\n    }\n    optimizeNames(names, constants) {\n        if (!names[this.name.str])\n            return;\n        if (this.rhs)\n            this.rhs = optimizeExpr(this.rhs, names, constants);\n        return this;\n    }\n    get names() {\n        return this.rhs instanceof code_1._CodeOrName ? this.rhs.names : {};\n    }\n}\nclass Assign extends Node {\n    constructor(lhs, rhs, sideEffects) {\n        super();\n        this.lhs = lhs;\n        this.rhs = rhs;\n        this.sideEffects = sideEffects;\n    }\n    render({ _n }) {\n        return `${this.lhs} = ${this.rhs};` + _n;\n    }\n    optimizeNames(names, constants) {\n        if (this.lhs instanceof code_1.Name && !names[this.lhs.str] && !this.sideEffects)\n            return;\n        this.rhs = optimizeExpr(this.rhs, names, constants);\n        return this;\n    }\n    get names() {\n        const names = this.lhs instanceof code_1.Name ? {} : { ...this.lhs.names };\n        return addExprNames(names, this.rhs);\n    }\n}\nclass AssignOp extends Assign {\n    constructor(lhs, op, rhs, sideEffects) {\n        super(lhs, rhs, sideEffects);\n        this.op = op;\n    }\n    render({ _n }) {\n        return `${this.lhs} ${this.op}= ${this.rhs};` + _n;\n    }\n}\nclass Label extends Node {\n    constructor(label) {\n        super();\n        this.label = label;\n        this.names = {};\n    }\n    render({ _n }) {\n        return `${this.label}:` + _n;\n    }\n}\nclass Break extends Node {\n    constructor(label) {\n        super();\n        this.label = label;\n        this.names = {};\n    }\n    render({ _n }) {\n        const label = this.label ? ` ${this.label}` : \"\";\n        return `break${label};` + _n;\n    }\n}\nclass Throw extends Node {\n    constructor(error) {\n        super();\n        this.error = error;\n    }\n    render({ _n }) {\n        return `throw ${this.error};` + _n;\n    }\n    get names() {\n        return this.error.names;\n    }\n}\nclass AnyCode extends Node {\n    constructor(code) {\n        super();\n        this.code = code;\n    }\n    render({ _n }) {\n        return `${this.code};` + _n;\n    }\n    optimizeNodes() {\n        return `${this.code}` ? this : undefined;\n    }\n    optimizeNames(names, constants) {\n        this.code = optimizeExpr(this.code, names, constants);\n        return this;\n    }\n    get names() {\n        return this.code instanceof code_1._CodeOrName ? this.code.names : {};\n    }\n}\nclass ParentNode extends Node {\n    constructor(nodes = []) {\n        super();\n        this.nodes = nodes;\n    }\n    render(opts) {\n        return this.nodes.reduce((code, n) => code + n.render(opts), \"\");\n    }\n    optimizeNodes() {\n        const { nodes } = this;\n        let i = nodes.length;\n        while (i--) {\n            const n = nodes[i].optimizeNodes();\n            if (Array.isArray(n))\n                nodes.splice(i, 1, ...n);\n            else if (n)\n                nodes[i] = n;\n            else\n                nodes.splice(i, 1);\n        }\n        return nodes.length > 0 ? this : undefined;\n    }\n    optimizeNames(names, constants) {\n        const { nodes } = this;\n        let i = nodes.length;\n        while (i--) {\n            // iterating backwards improves 1-pass optimization\n            const n = nodes[i];\n            if (n.optimizeNames(names, constants))\n                continue;\n            subtractNames(names, n.names);\n            nodes.splice(i, 1);\n        }\n        return nodes.length > 0 ? this : undefined;\n    }\n    get names() {\n        return this.nodes.reduce((names, n) => addNames(names, n.names), {});\n    }\n}\nclass BlockNode extends ParentNode {\n    render(opts) {\n        return \"{\" + opts._n + super.render(opts) + \"}\" + opts._n;\n    }\n}\nclass Root extends ParentNode {\n}\nclass Else extends BlockNode {\n}\nElse.kind = \"else\";\nclass If extends BlockNode {\n    constructor(condition, nodes) {\n        super(nodes);\n        this.condition = condition;\n    }\n    render(opts) {\n        let code = `if(${this.condition})` + super.render(opts);\n        if (this.else)\n            code += \"else \" + this.else.render(opts);\n        return code;\n    }\n    optimizeNodes() {\n        super.optimizeNodes();\n        const cond = this.condition;\n        if (cond === true)\n            return this.nodes; // else is ignored here\n        let e = this.else;\n        if (e) {\n            const ns = e.optimizeNodes();\n            e = this.else = Array.isArray(ns) ? new Else(ns) : ns;\n        }\n        if (e) {\n            if (cond === false)\n                return e instanceof If ? e : e.nodes;\n            if (this.nodes.length)\n                return this;\n            return new If(not(cond), e instanceof If ? [e] : e.nodes);\n        }\n        if (cond === false || !this.nodes.length)\n            return undefined;\n        return this;\n    }\n    optimizeNames(names, constants) {\n        var _a;\n        this.else = (_a = this.else) === null || _a === void 0 ? void 0 : _a.optimizeNames(names, constants);\n        if (!(super.optimizeNames(names, constants) || this.else))\n            return;\n        this.condition = optimizeExpr(this.condition, names, constants);\n        return this;\n    }\n    get names() {\n        const names = super.names;\n        addExprNames(names, this.condition);\n        if (this.else)\n            addNames(names, this.else.names);\n        return names;\n    }\n}\nIf.kind = \"if\";\nclass For extends BlockNode {\n}\nFor.kind = \"for\";\nclass ForLoop extends For {\n    constructor(iteration) {\n        super();\n        this.iteration = iteration;\n    }\n    render(opts) {\n        return `for(${this.iteration})` + super.render(opts);\n    }\n    optimizeNames(names, constants) {\n        if (!super.optimizeNames(names, constants))\n            return;\n        this.iteration = optimizeExpr(this.iteration, names, constants);\n        return this;\n    }\n    get names() {\n        return addNames(super.names, this.iteration.names);\n    }\n}\nclass ForRange extends For {\n    constructor(varKind, name, from, to) {\n        super();\n        this.varKind = varKind;\n        this.name = name;\n        this.from = from;\n        this.to = to;\n    }\n    render(opts) {\n        const varKind = opts.es5 ? scope_1.varKinds.var : this.varKind;\n        const { name, from, to } = this;\n        return `for(${varKind} ${name}=${from}; ${name}<${to}; ${name}++)` + super.render(opts);\n    }\n    get names() {\n        const names = addExprNames(super.names, this.from);\n        return addExprNames(names, this.to);\n    }\n}\nclass ForIter extends For {\n    constructor(loop, varKind, name, iterable) {\n        super();\n        this.loop = loop;\n        this.varKind = varKind;\n        this.name = name;\n        this.iterable = iterable;\n    }\n    render(opts) {\n        return `for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})` + super.render(opts);\n    }\n    optimizeNames(names, constants) {\n        if (!super.optimizeNames(names, constants))\n            return;\n        this.iterable = optimizeExpr(this.iterable, names, constants);\n        return this;\n    }\n    get names() {\n        return addNames(super.names, this.iterable.names);\n    }\n}\nclass Func extends BlockNode {\n    constructor(name, args, async) {\n        super();\n        this.name = name;\n        this.args = args;\n        this.async = async;\n    }\n    render(opts) {\n        const _async = this.async ? \"async \" : \"\";\n        return `${_async}function ${this.name}(${this.args})` + super.render(opts);\n    }\n}\nFunc.kind = \"func\";\nclass Return extends ParentNode {\n    render(opts) {\n        return \"return \" + super.render(opts);\n    }\n}\nReturn.kind = \"return\";\nclass Try extends BlockNode {\n    render(opts) {\n        let code = \"try\" + super.render(opts);\n        if (this.catch)\n            code += this.catch.render(opts);\n        if (this.finally)\n            code += this.finally.render(opts);\n        return code;\n    }\n    optimizeNodes() {\n        var _a, _b;\n        super.optimizeNodes();\n        (_a = this.catch) === null || _a === void 0 ? void 0 : _a.optimizeNodes();\n        (_b = this.finally) === null || _b === void 0 ? void 0 : _b.optimizeNodes();\n        return this;\n    }\n    optimizeNames(names, constants) {\n        var _a, _b;\n        super.optimizeNames(names, constants);\n        (_a = this.catch) === null || _a === void 0 ? void 0 : _a.optimizeNames(names, constants);\n        (_b = this.finally) === null || _b === void 0 ? void 0 : _b.optimizeNames(names, constants);\n        return this;\n    }\n    get names() {\n        const names = super.names;\n        if (this.catch)\n            addNames(names, this.catch.names);\n        if (this.finally)\n            addNames(names, this.finally.names);\n        return names;\n    }\n}\nclass Catch extends BlockNode {\n    constructor(error) {\n        super();\n        this.error = error;\n    }\n    render(opts) {\n        return `catch(${this.error})` + super.render(opts);\n    }\n}\nCatch.kind = \"catch\";\nclass Finally extends BlockNode {\n    render(opts) {\n        return \"finally\" + super.render(opts);\n    }\n}\nFinally.kind = \"finally\";\nclass CodeGen {\n    constructor(extScope, opts = {}) {\n        this._values = {};\n        this._blockStarts = [];\n        this._constants = {};\n        this.opts = { ...opts, _n: opts.lines ? \"\\n\" : \"\" };\n        this._extScope = extScope;\n        this._scope = new scope_1.Scope({ parent: extScope });\n        this._nodes = [new Root()];\n    }\n    toString() {\n        return this._root.render(this.opts);\n    }\n    // returns unique name in the internal scope\n    name(prefix) {\n        return this._scope.name(prefix);\n    }\n    // reserves unique name in the external scope\n    scopeName(prefix) {\n        return this._extScope.name(prefix);\n    }\n    // reserves unique name in the external scope and assigns value to it\n    scopeValue(prefixOrName, value) {\n        const name = this._extScope.value(prefixOrName, value);\n        const vs = this._values[name.prefix] || (this._values[name.prefix] = new Set());\n        vs.add(name);\n        return name;\n    }\n    getScopeValue(prefix, keyOrRef) {\n        return this._extScope.getValue(prefix, keyOrRef);\n    }\n    // return code that assigns values in the external scope to the names that are used internally\n    // (same names that were returned by gen.scopeName or gen.scopeValue)\n    scopeRefs(scopeName) {\n        return this._extScope.scopeRefs(scopeName, this._values);\n    }\n    scopeCode() {\n        return this._extScope.scopeCode(this._values);\n    }\n    _def(varKind, nameOrPrefix, rhs, constant) {\n        const name = this._scope.toName(nameOrPrefix);\n        if (rhs !== undefined && constant)\n            this._constants[name.str] = rhs;\n        this._leafNode(new Def(varKind, name, rhs));\n        return name;\n    }\n    // `const` declaration (`var` in es5 mode)\n    const(nameOrPrefix, rhs, _constant) {\n        return this._def(scope_1.varKinds.const, nameOrPrefix, rhs, _constant);\n    }\n    // `let` declaration with optional assignment (`var` in es5 mode)\n    let(nameOrPrefix, rhs, _constant) {\n        return this._def(scope_1.varKinds.let, nameOrPrefix, rhs, _constant);\n    }\n    // `var` declaration with optional assignment\n    var(nameOrPrefix, rhs, _constant) {\n        return this._def(scope_1.varKinds.var, nameOrPrefix, rhs, _constant);\n    }\n    // assignment code\n    assign(lhs, rhs, sideEffects) {\n        return this._leafNode(new Assign(lhs, rhs, sideEffects));\n    }\n    // `+=` code\n    add(lhs, rhs) {\n        return this._leafNode(new AssignOp(lhs, exports.operators.ADD, rhs));\n    }\n    // appends passed SafeExpr to code or executes Block\n    code(c) {\n        if (typeof c == \"function\")\n            c();\n        else if (c !== code_1.nil)\n            this._leafNode(new AnyCode(c));\n        return this;\n    }\n    // returns code for object literal for the passed argument list of key-value pairs\n    object(...keyValues) {\n        const code = [\"{\"];\n        for (const [key, value] of keyValues) {\n            if (code.length > 1)\n                code.push(\",\");\n            code.push(key);\n            if (key !== value || this.opts.es5) {\n                code.push(\":\");\n                (0, code_1.addCodeArg)(code, value);\n            }\n        }\n        code.push(\"}\");\n        return new code_1._Code(code);\n    }\n    // `if` clause (or statement if `thenBody` and, optionally, `elseBody` are passed)\n    if(condition, thenBody, elseBody) {\n        this._blockNode(new If(condition));\n        if (thenBody && elseBody) {\n            this.code(thenBody).else().code(elseBody).endIf();\n        }\n        else if (thenBody) {\n            this.code(thenBody).endIf();\n        }\n        else if (elseBody) {\n            throw new Error('CodeGen: \"else\" body without \"then\" body');\n        }\n        return this;\n    }\n    // `else if` clause - invalid without `if` or after `else` clauses\n    elseIf(condition) {\n        return this._elseNode(new If(condition));\n    }\n    // `else` clause - only valid after `if` or `else if` clauses\n    else() {\n        return this._elseNode(new Else());\n    }\n    // end `if` statement (needed if gen.if was used only with condition)\n    endIf() {\n        return this._endBlockNode(If, Else);\n    }\n    _for(node, forBody) {\n        this._blockNode(node);\n        if (forBody)\n            this.code(forBody).endFor();\n        return this;\n    }\n    // a generic `for` clause (or statement if `forBody` is passed)\n    for(iteration, forBody) {\n        return this._for(new ForLoop(iteration), forBody);\n    }\n    // `for` statement for a range of values\n    forRange(nameOrPrefix, from, to, forBody, varKind = this.opts.es5 ? scope_1.varKinds.var : scope_1.varKinds.let) {\n        const name = this._scope.toName(nameOrPrefix);\n        return this._for(new ForRange(varKind, name, from, to), () => forBody(name));\n    }\n    // `for-of` statement (in es5 mode replace with a normal for loop)\n    forOf(nameOrPrefix, iterable, forBody, varKind = scope_1.varKinds.const) {\n        const name = this._scope.toName(nameOrPrefix);\n        if (this.opts.es5) {\n            const arr = iterable instanceof code_1.Name ? iterable : this.var(\"_arr\", iterable);\n            return this.forRange(\"_i\", 0, (0, code_1._) `${arr}.length`, (i) => {\n                this.var(name, (0, code_1._) `${arr}[${i}]`);\n                forBody(name);\n            });\n        }\n        return this._for(new ForIter(\"of\", varKind, name, iterable), () => forBody(name));\n    }\n    // `for-in` statement.\n    // With option `ownProperties` replaced with a `for-of` loop for object keys\n    forIn(nameOrPrefix, obj, forBody, varKind = this.opts.es5 ? scope_1.varKinds.var : scope_1.varKinds.const) {\n        if (this.opts.ownProperties) {\n            return this.forOf(nameOrPrefix, (0, code_1._) `Object.keys(${obj})`, forBody);\n        }\n        const name = this._scope.toName(nameOrPrefix);\n        return this._for(new ForIter(\"in\", varKind, name, obj), () => forBody(name));\n    }\n    // end `for` loop\n    endFor() {\n        return this._endBlockNode(For);\n    }\n    // `label` statement\n    label(label) {\n        return this._leafNode(new Label(label));\n    }\n    // `break` statement\n    break(label) {\n        return this._leafNode(new Break(label));\n    }\n    // `return` statement\n    return(value) {\n        const node = new Return();\n        this._blockNode(node);\n        this.code(value);\n        if (node.nodes.length !== 1)\n            throw new Error('CodeGen: \"return\" should have one node');\n        return this._endBlockNode(Return);\n    }\n    // `try` statement\n    try(tryBody, catchCode, finallyCode) {\n        if (!catchCode && !finallyCode)\n            throw new Error('CodeGen: \"try\" without \"catch\" and \"finally\"');\n        const node = new Try();\n        this._blockNode(node);\n        this.code(tryBody);\n        if (catchCode) {\n            const error = this.name(\"e\");\n            this._currNode = node.catch = new Catch(error);\n            catchCode(error);\n        }\n        if (finallyCode) {\n            this._currNode = node.finally = new Finally();\n            this.code(finallyCode);\n        }\n        return this._endBlockNode(Catch, Finally);\n    }\n    // `throw` statement\n    throw(error) {\n        return this._leafNode(new Throw(error));\n    }\n    // start self-balancing block\n    block(body, nodeCount) {\n        this._blockStarts.push(this._nodes.length);\n        if (body)\n            this.code(body).endBlock(nodeCount);\n        return this;\n    }\n    // end the current self-balancing block\n    endBlock(nodeCount) {\n        const len = this._blockStarts.pop();\n        if (len === undefined)\n            throw new Error(\"CodeGen: not in self-balancing block\");\n        const toClose = this._nodes.length - len;\n        if (toClose < 0 || (nodeCount !== undefined && toClose !== nodeCount)) {\n            throw new Error(`CodeGen: wrong number of nodes: ${toClose} vs ${nodeCount} expected`);\n        }\n        this._nodes.length = len;\n        return this;\n    }\n    // `function` heading (or definition if funcBody is passed)\n    func(name, args = code_1.nil, async, funcBody) {\n        this._blockNode(new Func(name, args, async));\n        if (funcBody)\n            this.code(funcBody).endFunc();\n        return this;\n    }\n    // end function definition\n    endFunc() {\n        return this._endBlockNode(Func);\n    }\n    optimize(n = 1) {\n        while (n-- > 0) {\n            this._root.optimizeNodes();\n            this._root.optimizeNames(this._root.names, this._constants);\n        }\n    }\n    _leafNode(node) {\n        this._currNode.nodes.push(node);\n        return this;\n    }\n    _blockNode(node) {\n        this._currNode.nodes.push(node);\n        this._nodes.push(node);\n    }\n    _endBlockNode(N1, N2) {\n        const n = this._currNode;\n        if (n instanceof N1 || (N2 && n instanceof N2)) {\n            this._nodes.pop();\n            return this;\n        }\n        throw new Error(`CodeGen: not in block \"${N2 ? `${N1.kind}/${N2.kind}` : N1.kind}\"`);\n    }\n    _elseNode(node) {\n        const n = this._currNode;\n        if (!(n instanceof If)) {\n            throw new Error('CodeGen: \"else\" without \"if\"');\n        }\n        this._currNode = n.else = node;\n        return this;\n    }\n    get _root() {\n        return this._nodes[0];\n    }\n    get _currNode() {\n        const ns = this._nodes;\n        return ns[ns.length - 1];\n    }\n    set _currNode(node) {\n        const ns = this._nodes;\n        ns[ns.length - 1] = node;\n    }\n}\nexports.CodeGen = CodeGen;\nfunction addNames(names, from) {\n    for (const n in from)\n        names[n] = (names[n] || 0) + (from[n] || 0);\n    return names;\n}\nfunction addExprNames(names, from) {\n    return from instanceof code_1._CodeOrName ? addNames(names, from.names) : names;\n}\nfunction optimizeExpr(expr, names, constants) {\n    if (expr instanceof code_1.Name)\n        return replaceName(expr);\n    if (!canOptimize(expr))\n        return expr;\n    return new code_1._Code(expr._items.reduce((items, c) => {\n        if (c instanceof code_1.Name)\n            c = replaceName(c);\n        if (c instanceof code_1._Code)\n            items.push(...c._items);\n        else\n            items.push(c);\n        return items;\n    }, []));\n    function replaceName(n) {\n        const c = constants[n.str];\n        if (c === undefined || names[n.str] !== 1)\n            return n;\n        delete names[n.str];\n        return c;\n    }\n    function canOptimize(e) {\n        return (e instanceof code_1._Code &&\n            e._items.some((c) => c instanceof code_1.Name && names[c.str] === 1 && constants[c.str] !== undefined));\n    }\n}\nfunction subtractNames(names, from) {\n    for (const n in from)\n        names[n] = (names[n] || 0) - (from[n] || 0);\n}\nfunction not(x) {\n    return typeof x == \"boolean\" || typeof x == \"number\" || x === null ? !x : (0, code_1._) `!${par(x)}`;\n}\nexports.not = not;\nconst andCode = mappend(exports.operators.AND);\n// boolean AND (&&) expression with the passed arguments\nfunction and(...args) {\n    return args.reduce(andCode);\n}\nexports.and = and;\nconst orCode = mappend(exports.operators.OR);\n// boolean OR (||) expression with the passed arguments\nfunction or(...args) {\n    return args.reduce(orCode);\n}\nexports.or = or;\nfunction mappend(op) {\n    return (x, y) => (x === code_1.nil ? y : y === code_1.nil ? x : (0, code_1._) `${par(x)} ${op} ${par(y)}`);\n}\nfunction par(x) {\n    return x instanceof code_1.Name ? x : (0, code_1._) `(${x})`;\n}\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ValueScope = exports.ValueScopeName = exports.Scope = exports.varKinds = exports.UsedValueState = void 0;\nconst code_1 = require(\"./code\");\nclass ValueError extends Error {\n    constructor(name) {\n        super(`CodeGen: \"code\" for ${name} not defined`);\n        this.value = name.value;\n    }\n}\nvar UsedValueState;\n(function (UsedValueState) {\n    UsedValueState[UsedValueState[\"Started\"] = 0] = \"Started\";\n    UsedValueState[UsedValueState[\"Completed\"] = 1] = \"Completed\";\n})(UsedValueState = exports.UsedValueState || (exports.UsedValueState = {}));\nexports.varKinds = {\n    const: new code_1.Name(\"const\"),\n    let: new code_1.Name(\"let\"),\n    var: new code_1.Name(\"var\"),\n};\nclass Scope {\n    constructor({ prefixes, parent } = {}) {\n        this._names = {};\n        this._prefixes = prefixes;\n        this._parent = parent;\n    }\n    toName(nameOrPrefix) {\n        return nameOrPrefix instanceof code_1.Name ? nameOrPrefix : this.name(nameOrPrefix);\n    }\n    name(prefix) {\n        return new code_1.Name(this._newName(prefix));\n    }\n    _newName(prefix) {\n        const ng = this._names[prefix] || this._nameGroup(prefix);\n        return `${prefix}${ng.index++}`;\n    }\n    _nameGroup(prefix) {\n        var _a, _b;\n        if (((_b = (_a = this._parent) === null || _a === void 0 ? void 0 : _a._prefixes) === null || _b === void 0 ? void 0 : _b.has(prefix)) || (this._prefixes && !this._prefixes.has(prefix))) {\n            throw new Error(`CodeGen: prefix \"${prefix}\" is not allowed in this scope`);\n        }\n        return (this._names[prefix] = { prefix, index: 0 });\n    }\n}\nexports.Scope = Scope;\nclass ValueScopeName extends code_1.Name {\n    constructor(prefix, nameStr) {\n        super(nameStr);\n        this.prefix = prefix;\n    }\n    setValue(value, { property, itemIndex }) {\n        this.value = value;\n        this.scopePath = (0, code_1._) `.${new code_1.Name(property)}[${itemIndex}]`;\n    }\n}\nexports.ValueScopeName = ValueScopeName;\nconst line = (0, code_1._) `\\n`;\nclass ValueScope extends Scope {\n    constructor(opts) {\n        super(opts);\n        this._values = {};\n        this._scope = opts.scope;\n        this.opts = { ...opts, _n: opts.lines ? line : code_1.nil };\n    }\n    get() {\n        return this._scope;\n    }\n    name(prefix) {\n        return new ValueScopeName(prefix, this._newName(prefix));\n    }\n    value(nameOrPrefix, value) {\n        var _a;\n        if (value.ref === undefined)\n            throw new Error(\"CodeGen: ref must be passed in value\");\n        const name = this.toName(nameOrPrefix);\n        const { prefix } = name;\n        const valueKey = (_a = value.key) !== null && _a !== void 0 ? _a : value.ref;\n        let vs = this._values[prefix];\n        if (vs) {\n            const _name = vs.get(valueKey);\n            if (_name)\n                return _name;\n        }\n        else {\n            vs = this._values[prefix] = new Map();\n        }\n        vs.set(valueKey, name);\n        const s = this._scope[prefix] || (this._scope[prefix] = []);\n        const itemIndex = s.length;\n        s[itemIndex] = value.ref;\n        name.setValue(value, { property: prefix, itemIndex });\n        return name;\n    }\n    getValue(prefix, keyOrRef) {\n        const vs = this._values[prefix];\n        if (!vs)\n            return;\n        return vs.get(keyOrRef);\n    }\n    scopeRefs(scopeName, values = this._values) {\n        return this._reduceValues(values, (name) => {\n            if (name.scopePath === undefined)\n                throw new Error(`CodeGen: name \"${name}\" has no value`);\n            return (0, code_1._) `${scopeName}${name.scopePath}`;\n        });\n    }\n    scopeCode(values = this._values, usedValues, getCode) {\n        return this._reduceValues(values, (name) => {\n            if (name.value === undefined)\n                throw new Error(`CodeGen: name \"${name}\" has no value`);\n            return name.value.code;\n        }, usedValues, getCode);\n    }\n    _reduceValues(values, valueCode, usedValues = {}, getCode) {\n        let code = code_1.nil;\n        for (const prefix in values) {\n            const vs = values[prefix];\n            if (!vs)\n                continue;\n            const nameSet = (usedValues[prefix] = usedValues[prefix] || new Map());\n            vs.forEach((name) => {\n                if (nameSet.has(name))\n                    return;\n                nameSet.set(name, UsedValueState.Started);\n                let c = valueCode(name);\n                if (c) {\n                    const def = this.opts.es5 ? exports.varKinds.var : exports.varKinds.const;\n                    code = (0, code_1._) `${code}${def} ${name} = ${c};${this.opts._n}`;\n                }\n                else if ((c = getCode === null || getCode === void 0 ? void 0 : getCode(name))) {\n                    code = (0, code_1._) `${code}${c}${this.opts._n}`;\n                }\n                else {\n                    throw new ValueError(name);\n                }\n                nameSet.set(name, UsedValueState.Completed);\n            });\n        }\n        return code;\n    }\n}\nexports.ValueScope = ValueScope;\n//# sourceMappingURL=scope.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.extendErrors = exports.resetErrorsCount = exports.reportExtraError = exports.reportError = exports.keyword$DataError = exports.keywordError = void 0;\nconst codegen_1 = require(\"./codegen\");\nconst util_1 = require(\"./util\");\nconst names_1 = require(\"./names\");\nexports.keywordError = {\n    message: ({ keyword }) => (0, codegen_1.str) `must pass \"${keyword}\" keyword validation`,\n};\nexports.keyword$DataError = {\n    message: ({ keyword, schemaType }) => schemaType\n        ? (0, codegen_1.str) `\"${keyword}\" keyword must be ${schemaType} ($data)`\n        : (0, codegen_1.str) `\"${keyword}\" keyword is invalid ($data)`,\n};\nfunction reportError(cxt, error = exports.keywordError, errorPaths, overrideAllErrors) {\n    const { it } = cxt;\n    const { gen, compositeRule, allErrors } = it;\n    const errObj = errorObjectCode(cxt, error, errorPaths);\n    if (overrideAllErrors !== null && overrideAllErrors !== void 0 ? overrideAllErrors : (compositeRule || allErrors)) {\n        addError(gen, errObj);\n    }\n    else {\n        returnErrors(it, (0, codegen_1._) `[${errObj}]`);\n    }\n}\nexports.reportError = reportError;\nfunction reportExtraError(cxt, error = exports.keywordError, errorPaths) {\n    const { it } = cxt;\n    const { gen, compositeRule, allErrors } = it;\n    const errObj = errorObjectCode(cxt, error, errorPaths);\n    addError(gen, errObj);\n    if (!(compositeRule || allErrors)) {\n        returnErrors(it, names_1.default.vErrors);\n    }\n}\nexports.reportExtraError = reportExtraError;\nfunction resetErrorsCount(gen, errsCount) {\n    gen.assign(names_1.default.errors, errsCount);\n    gen.if((0, codegen_1._) `${names_1.default.vErrors} !== null`, () => gen.if(errsCount, () => gen.assign((0, codegen_1._) `${names_1.default.vErrors}.length`, errsCount), () => gen.assign(names_1.default.vErrors, null)));\n}\nexports.resetErrorsCount = resetErrorsCount;\nfunction extendErrors({ gen, keyword, schemaValue, data, errsCount, it, }) {\n    /* istanbul ignore if */\n    if (errsCount === undefined)\n        throw new Error(\"ajv implementation error\");\n    const err = gen.name(\"err\");\n    gen.forRange(\"i\", errsCount, names_1.default.errors, (i) => {\n        gen.const(err, (0, codegen_1._) `${names_1.default.vErrors}[${i}]`);\n        gen.if((0, codegen_1._) `${err}.instancePath === undefined`, () => gen.assign((0, codegen_1._) `${err}.instancePath`, (0, codegen_1.strConcat)(names_1.default.instancePath, it.errorPath)));\n        gen.assign((0, codegen_1._) `${err}.schemaPath`, (0, codegen_1.str) `${it.errSchemaPath}/${keyword}`);\n        if (it.opts.verbose) {\n            gen.assign((0, codegen_1._) `${err}.schema`, schemaValue);\n            gen.assign((0, codegen_1._) `${err}.data`, data);\n        }\n    });\n}\nexports.extendErrors = extendErrors;\nfunction addError(gen, errObj) {\n    const err = gen.const(\"err\", errObj);\n    gen.if((0, codegen_1._) `${names_1.default.vErrors} === null`, () => gen.assign(names_1.default.vErrors, (0, codegen_1._) `[${err}]`), (0, codegen_1._) `${names_1.default.vErrors}.push(${err})`);\n    gen.code((0, codegen_1._) `${names_1.default.errors}++`);\n}\nfunction returnErrors(it, errs) {\n    const { gen, validateName, schemaEnv } = it;\n    if (schemaEnv.$async) {\n        gen.throw((0, codegen_1._) `new ${it.ValidationError}(${errs})`);\n    }\n    else {\n        gen.assign((0, codegen_1._) `${validateName}.errors`, errs);\n        gen.return(false);\n    }\n}\nconst E = {\n    keyword: new codegen_1.Name(\"keyword\"),\n    schemaPath: new codegen_1.Name(\"schemaPath\"),\n    params: new codegen_1.Name(\"params\"),\n    propertyName: new codegen_1.Name(\"propertyName\"),\n    message: new codegen_1.Name(\"message\"),\n    schema: new codegen_1.Name(\"schema\"),\n    parentSchema: new codegen_1.Name(\"parentSchema\"),\n};\nfunction errorObjectCode(cxt, error, errorPaths) {\n    const { createErrors } = cxt.it;\n    if (createErrors === false)\n        return (0, codegen_1._) `{}`;\n    return errorObject(cxt, error, errorPaths);\n}\nfunction errorObject(cxt, error, errorPaths = {}) {\n    const { gen, it } = cxt;\n    const keyValues = [\n        errorInstancePath(it, errorPaths),\n        errorSchemaPath(cxt, errorPaths),\n    ];\n    extraErrorProps(cxt, error, keyValues);\n    return gen.object(...keyValues);\n}\nfunction errorInstancePath({ errorPath }, { instancePath }) {\n    const instPath = instancePath\n        ? (0, codegen_1.str) `${errorPath}${(0, util_1.getErrorPath)(instancePath, util_1.Type.Str)}`\n        : errorPath;\n    return [names_1.default.instancePath, (0, codegen_1.strConcat)(names_1.default.instancePath, instPath)];\n}\nfunction errorSchemaPath({ keyword, it: { errSchemaPath } }, { schemaPath, parentSchema }) {\n    let schPath = parentSchema ? errSchemaPath : (0, codegen_1.str) `${errSchemaPath}/${keyword}`;\n    if (schemaPath) {\n        schPath = (0, codegen_1.str) `${schPath}${(0, util_1.getErrorPath)(schemaPath, util_1.Type.Str)}`;\n    }\n    return [E.schemaPath, schPath];\n}\nfunction extraErrorProps(cxt, { params, message }, keyValues) {\n    const { keyword, data, schemaValue, it } = cxt;\n    const { opts, propertyName, topSchemaRef, schemaPath } = it;\n    keyValues.push([E.keyword, keyword], [E.params, typeof params == \"function\" ? params(cxt) : params || (0, codegen_1._) `{}`]);\n    if (opts.messages) {\n        keyValues.push([E.message, typeof message == \"function\" ? message(cxt) : message]);\n    }\n    if (opts.verbose) {\n        keyValues.push([E.schema, schemaValue], [E.parentSchema, (0, codegen_1._) `${topSchemaRef}${schemaPath}`], [names_1.default.data, data]);\n    }\n    if (propertyName)\n        keyValues.push([E.propertyName, propertyName]);\n}\n//# sourceMappingURL=errors.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.resolveSchema = exports.getCompilingSchema = exports.resolveRef = exports.compileSchema = exports.SchemaEnv = void 0;\nconst codegen_1 = require(\"./codegen\");\nconst validation_error_1 = require(\"../runtime/validation_error\");\nconst names_1 = require(\"./names\");\nconst resolve_1 = require(\"./resolve\");\nconst util_1 = require(\"./util\");\nconst validate_1 = require(\"./validate\");\nclass SchemaEnv {\n    constructor(env) {\n        var _a;\n        this.refs = {};\n        this.dynamicAnchors = {};\n        let schema;\n        if (typeof env.schema == \"object\")\n            schema = env.schema;\n        this.schema = env.schema;\n        this.schemaId = env.schemaId;\n        this.root = env.root || this;\n        this.baseId = (_a = env.baseId) !== null && _a !== void 0 ? _a : (0, resolve_1.normalizeId)(schema === null || schema === void 0 ? void 0 : schema[env.schemaId || \"$id\"]);\n        this.schemaPath = env.schemaPath;\n        this.localRefs = env.localRefs;\n        this.meta = env.meta;\n        this.$async = schema === null || schema === void 0 ? void 0 : schema.$async;\n        this.refs = {};\n    }\n}\nexports.SchemaEnv = SchemaEnv;\n// let codeSize = 0\n// let nodeCount = 0\n// Compiles schema in SchemaEnv\nfunction compileSchema(sch) {\n    // TODO refactor - remove compilations\n    const _sch = getCompilingSchema.call(this, sch);\n    if (_sch)\n        return _sch;\n    const rootId = (0, resolve_1.getFullPath)(this.opts.uriResolver, sch.root.baseId); // TODO if getFullPath removed 1 tests fails\n    const { es5, lines } = this.opts.code;\n    const { ownProperties } = this.opts;\n    const gen = new codegen_1.CodeGen(this.scope, { es5, lines, ownProperties });\n    let _ValidationError;\n    if (sch.$async) {\n        _ValidationError = gen.scopeValue(\"Error\", {\n            ref: validation_error_1.default,\n            code: (0, codegen_1._) `require(\"ajv/dist/runtime/validation_error\").default`,\n        });\n    }\n    const validateName = gen.scopeName(\"validate\");\n    sch.validateName = validateName;\n    const schemaCxt = {\n        gen,\n        allErrors: this.opts.allErrors,\n        data: names_1.default.data,\n        parentData: names_1.default.parentData,\n        parentDataProperty: names_1.default.parentDataProperty,\n        dataNames: [names_1.default.data],\n        dataPathArr: [codegen_1.nil],\n        dataLevel: 0,\n        dataTypes: [],\n        definedProperties: new Set(),\n        topSchemaRef: gen.scopeValue(\"schema\", this.opts.code.source === true\n            ? { ref: sch.schema, code: (0, codegen_1.stringify)(sch.schema) }\n            : { ref: sch.schema }),\n        validateName,\n        ValidationError: _ValidationError,\n        schema: sch.schema,\n        schemaEnv: sch,\n        rootId,\n        baseId: sch.baseId || rootId,\n        schemaPath: codegen_1.nil,\n        errSchemaPath: sch.schemaPath || (this.opts.jtd ? \"\" : \"#\"),\n        errorPath: (0, codegen_1._) `\"\"`,\n        opts: this.opts,\n        self: this,\n    };\n    let sourceCode;\n    try {\n        this._compilations.add(sch);\n        (0, validate_1.validateFunctionCode)(schemaCxt);\n        gen.optimize(this.opts.code.optimize);\n        // gen.optimize(1)\n        const validateCode = gen.toString();\n        sourceCode = `${gen.scopeRefs(names_1.default.scope)}return ${validateCode}`;\n        // console.log((codeSize += sourceCode.length), (nodeCount += gen.nodeCount))\n        if (this.opts.code.process)\n            sourceCode = this.opts.code.process(sourceCode, sch);\n        // console.log(\"\\n\\n\\n *** \\n\", sourceCode)\n        const makeValidate = new Function(`${names_1.default.self}`, `${names_1.default.scope}`, sourceCode);\n        const validate = makeValidate(this, this.scope.get());\n        this.scope.value(validateName, { ref: validate });\n        validate.errors = null;\n        validate.schema = sch.schema;\n        validate.schemaEnv = sch;\n        if (sch.$async)\n            validate.$async = true;\n        if (this.opts.code.source === true) {\n            validate.source = { validateName, validateCode, scopeValues: gen._values };\n        }\n        if (this.opts.unevaluated) {\n            const { props, items } = schemaCxt;\n            validate.evaluated = {\n                props: props instanceof codegen_1.Name ? undefined : props,\n                items: items instanceof codegen_1.Name ? undefined : items,\n                dynamicProps: props instanceof codegen_1.Name,\n                dynamicItems: items instanceof codegen_1.Name,\n            };\n            if (validate.source)\n                validate.source.evaluated = (0, codegen_1.stringify)(validate.evaluated);\n        }\n        sch.validate = validate;\n        return sch;\n    }\n    catch (e) {\n        delete sch.validate;\n        delete sch.validateName;\n        if (sourceCode)\n            this.logger.error(\"Error compiling schema, function code:\", sourceCode);\n        // console.log(\"\\n\\n\\n *** \\n\", sourceCode, this.opts)\n        throw e;\n    }\n    finally {\n        this._compilations.delete(sch);\n    }\n}\nexports.compileSchema = compileSchema;\nfunction resolveRef(root, baseId, ref) {\n    var _a;\n    ref = (0, resolve_1.resolveUrl)(this.opts.uriResolver, baseId, ref);\n    const schOrFunc = root.refs[ref];\n    if (schOrFunc)\n        return schOrFunc;\n    let _sch = resolve.call(this, root, ref);\n    if (_sch === undefined) {\n        const schema = (_a = root.localRefs) === null || _a === void 0 ? void 0 : _a[ref]; // TODO maybe localRefs should hold SchemaEnv\n        const { schemaId } = this.opts;\n        if (schema)\n            _sch = new SchemaEnv({ schema, schemaId, root, baseId });\n    }\n    if (_sch === undefined)\n        return;\n    return (root.refs[ref] = inlineOrCompile.call(this, _sch));\n}\nexports.resolveRef = resolveRef;\nfunction inlineOrCompile(sch) {\n    if ((0, resolve_1.inlineRef)(sch.schema, this.opts.inlineRefs))\n        return sch.schema;\n    return sch.validate ? sch : compileSchema.call(this, sch);\n}\n// Index of schema compilation in the currently compiled list\nfunction getCompilingSchema(schEnv) {\n    for (const sch of this._compilations) {\n        if (sameSchemaEnv(sch, schEnv))\n            return sch;\n    }\n}\nexports.getCompilingSchema = getCompilingSchema;\nfunction sameSchemaEnv(s1, s2) {\n    return s1.schema === s2.schema && s1.root === s2.root && s1.baseId === s2.baseId;\n}\n// resolve and compile the references ($ref)\n// TODO returns AnySchemaObject (if the schema can be inlined) or validation function\nfunction resolve(root, // information about the root schema for the current schema\nref // reference to resolve\n) {\n    let sch;\n    while (typeof (sch = this.refs[ref]) == \"string\")\n        ref = sch;\n    return sch || this.schemas[ref] || resolveSchema.call(this, root, ref);\n}\n// Resolve schema, its root and baseId\nfunction resolveSchema(root, // root object with properties schema, refs TODO below SchemaEnv is assigned to it\nref // reference to resolve\n) {\n    const p = this.opts.uriResolver.parse(ref);\n    const refPath = (0, resolve_1._getFullPath)(this.opts.uriResolver, p);\n    let baseId = (0, resolve_1.getFullPath)(this.opts.uriResolver, root.baseId, undefined);\n    // TODO `Object.keys(root.schema).length > 0` should not be needed - but removing breaks 2 tests\n    if (Object.keys(root.schema).length > 0 && refPath === baseId) {\n        return getJsonPointer.call(this, p, root);\n    }\n    const id = (0, resolve_1.normalizeId)(refPath);\n    const schOrRef = this.refs[id] || this.schemas[id];\n    if (typeof schOrRef == \"string\") {\n        const sch = resolveSchema.call(this, root, schOrRef);\n        if (typeof (sch === null || sch === void 0 ? void 0 : sch.schema) !== \"object\")\n            return;\n        return getJsonPointer.call(this, p, sch);\n    }\n    if (typeof (schOrRef === null || schOrRef === void 0 ? void 0 : schOrRef.schema) !== \"object\")\n        return;\n    if (!schOrRef.validate)\n        compileSchema.call(this, schOrRef);\n    if (id === (0, resolve_1.normalizeId)(ref)) {\n        const { schema } = schOrRef;\n        const { schemaId } = this.opts;\n        const schId = schema[schemaId];\n        if (schId)\n            baseId = (0, resolve_1.resolveUrl)(this.opts.uriResolver, baseId, schId);\n        return new SchemaEnv({ schema, schemaId, root, baseId });\n    }\n    return getJsonPointer.call(this, p, schOrRef);\n}\nexports.resolveSchema = resolveSchema;\nconst PREVENT_SCOPE_CHANGE = new Set([\n    \"properties\",\n    \"patternProperties\",\n    \"enum\",\n    \"dependencies\",\n    \"definitions\",\n]);\nfunction getJsonPointer(parsedRef, { baseId, schema, root }) {\n    var _a;\n    if (((_a = parsedRef.fragment) === null || _a === void 0 ? void 0 : _a[0]) !== \"/\")\n        return;\n    for (const part of parsedRef.fragment.slice(1).split(\"/\")) {\n        if (typeof schema === \"boolean\")\n            return;\n        const partSchema = schema[(0, util_1.unescapeFragment)(part)];\n        if (partSchema === undefined)\n            return;\n        schema = partSchema;\n        // TODO PREVENT_SCOPE_CHANGE could be defined in keyword def?\n        const schId = typeof schema === \"object\" && schema[this.opts.schemaId];\n        if (!PREVENT_SCOPE_CHANGE.has(part) && schId) {\n            baseId = (0, resolve_1.resolveUrl)(this.opts.uriResolver, baseId, schId);\n        }\n    }\n    let env;\n    if (typeof schema != \"boolean\" && schema.$ref && !(0, util_1.schemaHasRulesButRef)(schema, this.RULES)) {\n        const $ref = (0, resolve_1.resolveUrl)(this.opts.uriResolver, baseId, schema.$ref);\n        env = resolveSchema.call(this, root, $ref);\n    }\n    // even though resolution failed we need to return SchemaEnv to throw exception\n    // so that compileAsync loads missing schema.\n    const { schemaId } = this.opts;\n    env = env || new SchemaEnv({ schema, schemaId, root, baseId });\n    if (env.schema !== env.root.schema)\n        return env;\n    return undefined;\n}\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"./codegen\");\nconst names = {\n    // validation function arguments\n    data: new codegen_1.Name(\"data\"),\n    // args passed from referencing schema\n    valCxt: new codegen_1.Name(\"valCxt\"),\n    instancePath: new codegen_1.Name(\"instancePath\"),\n    parentData: new codegen_1.Name(\"parentData\"),\n    parentDataProperty: new codegen_1.Name(\"parentDataProperty\"),\n    rootData: new codegen_1.Name(\"rootData\"),\n    dynamicAnchors: new codegen_1.Name(\"dynamicAnchors\"),\n    // function scoped variables\n    vErrors: new codegen_1.Name(\"vErrors\"),\n    errors: new codegen_1.Name(\"errors\"),\n    this: new codegen_1.Name(\"this\"),\n    // \"globals\"\n    self: new codegen_1.Name(\"self\"),\n    scope: new codegen_1.Name(\"scope\"),\n    // JTD serialize/parse name for JSON string and position\n    json: new codegen_1.Name(\"json\"),\n    jsonPos: new codegen_1.Name(\"jsonPos\"),\n    jsonLen: new codegen_1.Name(\"jsonLen\"),\n    jsonPart: new codegen_1.Name(\"jsonPart\"),\n};\nexports.default = names;\n//# sourceMappingURL=names.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst resolve_1 = require(\"./resolve\");\nclass MissingRefError extends Error {\n    constructor(resolver, baseId, ref, msg) {\n        super(msg || `can't resolve reference ${ref} from id ${baseId}`);\n        this.missingRef = (0, resolve_1.resolveUrl)(resolver, baseId, ref);\n        this.missingSchema = (0, resolve_1.normalizeId)((0, resolve_1.getFullPath)(resolver, this.missingRef));\n    }\n}\nexports.default = MissingRefError;\n//# sourceMappingURL=ref_error.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getSchemaRefs = exports.resolveUrl = exports.normalizeId = exports._getFullPath = exports.getFullPath = exports.inlineRef = void 0;\nconst util_1 = require(\"./util\");\nconst equal = require(\"fast-deep-equal\");\nconst traverse = require(\"json-schema-traverse\");\n// TODO refactor to use keyword definitions\nconst SIMPLE_INLINED = new Set([\n    \"type\",\n    \"format\",\n    \"pattern\",\n    \"maxLength\",\n    \"minLength\",\n    \"maxProperties\",\n    \"minProperties\",\n    \"maxItems\",\n    \"minItems\",\n    \"maximum\",\n    \"minimum\",\n    \"uniqueItems\",\n    \"multipleOf\",\n    \"required\",\n    \"enum\",\n    \"const\",\n]);\nfunction inlineRef(schema, limit = true) {\n    if (typeof schema == \"boolean\")\n        return true;\n    if (limit === true)\n        return !hasRef(schema);\n    if (!limit)\n        return false;\n    return countKeys(schema) <= limit;\n}\nexports.inlineRef = inlineRef;\nconst REF_KEYWORDS = new Set([\n    \"$ref\",\n    \"$recursiveRef\",\n    \"$recursiveAnchor\",\n    \"$dynamicRef\",\n    \"$dynamicAnchor\",\n]);\nfunction hasRef(schema) {\n    for (const key in schema) {\n        if (REF_KEYWORDS.has(key))\n            return true;\n        const sch = schema[key];\n        if (Array.isArray(sch) && sch.some(hasRef))\n            return true;\n        if (typeof sch == \"object\" && hasRef(sch))\n            return true;\n    }\n    return false;\n}\nfunction countKeys(schema) {\n    let count = 0;\n    for (const key in schema) {\n        if (key === \"$ref\")\n            return Infinity;\n        count++;\n        if (SIMPLE_INLINED.has(key))\n            continue;\n        if (typeof schema[key] == \"object\") {\n            (0, util_1.eachItem)(schema[key], (sch) => (count += countKeys(sch)));\n        }\n        if (count === Infinity)\n            return Infinity;\n    }\n    return count;\n}\nfunction getFullPath(resolver, id = \"\", normalize) {\n    if (normalize !== false)\n        id = normalizeId(id);\n    const p = resolver.parse(id);\n    return _getFullPath(resolver, p);\n}\nexports.getFullPath = getFullPath;\nfunction _getFullPath(resolver, p) {\n    const serialized = resolver.serialize(p);\n    return serialized.split(\"#\")[0] + \"#\";\n}\nexports._getFullPath = _getFullPath;\nconst TRAILING_SLASH_HASH = /#\\/?$/;\nfunction normalizeId(id) {\n    return id ? id.replace(TRAILING_SLASH_HASH, \"\") : \"\";\n}\nexports.normalizeId = normalizeId;\nfunction resolveUrl(resolver, baseId, id) {\n    id = normalizeId(id);\n    return resolver.resolve(baseId, id);\n}\nexports.resolveUrl = resolveUrl;\nconst ANCHOR = /^[a-z_][-a-z0-9._]*$/i;\nfunction getSchemaRefs(schema, baseId) {\n    if (typeof schema == \"boolean\")\n        return {};\n    const { schemaId, uriResolver } = this.opts;\n    const schId = normalizeId(schema[schemaId] || baseId);\n    const baseIds = { \"\": schId };\n    const pathPrefix = getFullPath(uriResolver, schId, false);\n    const localRefs = {};\n    const schemaRefs = new Set();\n    traverse(schema, { allKeys: true }, (sch, jsonPtr, _, parentJsonPtr) => {\n        if (parentJsonPtr === undefined)\n            return;\n        const fullPath = pathPrefix + jsonPtr;\n        let baseId = baseIds[parentJsonPtr];\n        if (typeof sch[schemaId] == \"string\")\n            baseId = addRef.call(this, sch[schemaId]);\n        addAnchor.call(this, sch.$anchor);\n        addAnchor.call(this, sch.$dynamicAnchor);\n        baseIds[jsonPtr] = baseId;\n        function addRef(ref) {\n            // eslint-disable-next-line @typescript-eslint/unbound-method\n            const _resolve = this.opts.uriResolver.resolve;\n            ref = normalizeId(baseId ? _resolve(baseId, ref) : ref);\n            if (schemaRefs.has(ref))\n                throw ambiguos(ref);\n            schemaRefs.add(ref);\n            let schOrRef = this.refs[ref];\n            if (typeof schOrRef == \"string\")\n                schOrRef = this.refs[schOrRef];\n            if (typeof schOrRef == \"object\") {\n                checkAmbiguosRef(sch, schOrRef.schema, ref);\n            }\n            else if (ref !== normalizeId(fullPath)) {\n                if (ref[0] === \"#\") {\n                    checkAmbiguosRef(sch, localRefs[ref], ref);\n                    localRefs[ref] = sch;\n                }\n                else {\n                    this.refs[ref] = fullPath;\n                }\n            }\n            return ref;\n        }\n        function addAnchor(anchor) {\n            if (typeof anchor == \"string\") {\n                if (!ANCHOR.test(anchor))\n                    throw new Error(`invalid anchor \"${anchor}\"`);\n                addRef.call(this, `#${anchor}`);\n            }\n        }\n    });\n    return localRefs;\n    function checkAmbiguosRef(sch1, sch2, ref) {\n        if (sch2 !== undefined && !equal(sch1, sch2))\n            throw ambiguos(ref);\n    }\n    function ambiguos(ref) {\n        return new Error(`reference \"${ref}\" resolves to more than one schema`);\n    }\n}\nexports.getSchemaRefs = getSchemaRefs;\n//# sourceMappingURL=resolve.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getRules = exports.isJSONType = void 0;\nconst _jsonTypes = [\"string\", \"number\", \"integer\", \"boolean\", \"null\", \"object\", \"array\"];\nconst jsonTypes = new Set(_jsonTypes);\nfunction isJSONType(x) {\n    return typeof x == \"string\" && jsonTypes.has(x);\n}\nexports.isJSONType = isJSONType;\nfunction getRules() {\n    const groups = {\n        number: { type: \"number\", rules: [] },\n        string: { type: \"string\", rules: [] },\n        array: { type: \"array\", rules: [] },\n        object: { type: \"object\", rules: [] },\n    };\n    return {\n        types: { ...groups, integer: true, boolean: true, null: true },\n        rules: [{ rules: [] }, groups.number, groups.string, groups.array, groups.object],\n        post: { rules: [] },\n        all: {},\n        keywords: {},\n    };\n}\nexports.getRules = getRules;\n//# sourceMappingURL=rules.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.checkStrictMode = exports.getErrorPath = exports.Type = exports.useFunc = exports.setEvaluated = exports.evaluatedPropsToName = exports.mergeEvaluated = exports.eachItem = exports.unescapeJsonPointer = exports.escapeJsonPointer = exports.escapeFragment = exports.unescapeFragment = exports.schemaRefOrVal = exports.schemaHasRulesButRef = exports.schemaHasRules = exports.checkUnknownRules = exports.alwaysValidSchema = exports.toHash = void 0;\nconst codegen_1 = require(\"./codegen\");\nconst code_1 = require(\"./codegen/code\");\n// TODO refactor to use Set\nfunction toHash(arr) {\n    const hash = {};\n    for (const item of arr)\n        hash[item] = true;\n    return hash;\n}\nexports.toHash = toHash;\nfunction alwaysValidSchema(it, schema) {\n    if (typeof schema == \"boolean\")\n        return schema;\n    if (Object.keys(schema).length === 0)\n        return true;\n    checkUnknownRules(it, schema);\n    return !schemaHasRules(schema, it.self.RULES.all);\n}\nexports.alwaysValidSchema = alwaysValidSchema;\nfunction checkUnknownRules(it, schema = it.schema) {\n    const { opts, self } = it;\n    if (!opts.strictSchema)\n        return;\n    if (typeof schema === \"boolean\")\n        return;\n    const rules = self.RULES.keywords;\n    for (const key in schema) {\n        if (!rules[key])\n            checkStrictMode(it, `unknown keyword: \"${key}\"`);\n    }\n}\nexports.checkUnknownRules = checkUnknownRules;\nfunction schemaHasRules(schema, rules) {\n    if (typeof schema == \"boolean\")\n        return !schema;\n    for (const key in schema)\n        if (rules[key])\n            return true;\n    return false;\n}\nexports.schemaHasRules = schemaHasRules;\nfunction schemaHasRulesButRef(schema, RULES) {\n    if (typeof schema == \"boolean\")\n        return !schema;\n    for (const key in schema)\n        if (key !== \"$ref\" && RULES.all[key])\n            return true;\n    return false;\n}\nexports.schemaHasRulesButRef = schemaHasRulesButRef;\nfunction schemaRefOrVal({ topSchemaRef, schemaPath }, schema, keyword, $data) {\n    if (!$data) {\n        if (typeof schema == \"number\" || typeof schema == \"boolean\")\n            return schema;\n        if (typeof schema == \"string\")\n            return (0, codegen_1._) `${schema}`;\n    }\n    return (0, codegen_1._) `${topSchemaRef}${schemaPath}${(0, codegen_1.getProperty)(keyword)}`;\n}\nexports.schemaRefOrVal = schemaRefOrVal;\nfunction unescapeFragment(str) {\n    return unescapeJsonPointer(decodeURIComponent(str));\n}\nexports.unescapeFragment = unescapeFragment;\nfunction escapeFragment(str) {\n    return encodeURIComponent(escapeJsonPointer(str));\n}\nexports.escapeFragment = escapeFragment;\nfunction escapeJsonPointer(str) {\n    if (typeof str == \"number\")\n        return `${str}`;\n    return str.replace(/~/g, \"~0\").replace(/\\//g, \"~1\");\n}\nexports.escapeJsonPointer = escapeJsonPointer;\nfunction unescapeJsonPointer(str) {\n    return str.replace(/~1/g, \"/\").replace(/~0/g, \"~\");\n}\nexports.unescapeJsonPointer = unescapeJsonPointer;\nfunction eachItem(xs, f) {\n    if (Array.isArray(xs)) {\n        for (const x of xs)\n            f(x);\n    }\n    else {\n        f(xs);\n    }\n}\nexports.eachItem = eachItem;\nfunction makeMergeEvaluated({ mergeNames, mergeToName, mergeValues, resultToName, }) {\n    return (gen, from, to, toName) => {\n        const res = to === undefined\n            ? from\n            : to instanceof codegen_1.Name\n                ? (from instanceof codegen_1.Name ? mergeNames(gen, from, to) : mergeToName(gen, from, to), to)\n                : from instanceof codegen_1.Name\n                    ? (mergeToName(gen, to, from), from)\n                    : mergeValues(from, to);\n        return toName === codegen_1.Name && !(res instanceof codegen_1.Name) ? resultToName(gen, res) : res;\n    };\n}\nexports.mergeEvaluated = {\n    props: makeMergeEvaluated({\n        mergeNames: (gen, from, to) => gen.if((0, codegen_1._) `${to} !== true && ${from} !== undefined`, () => {\n            gen.if((0, codegen_1._) `${from} === true`, () => gen.assign(to, true), () => gen.assign(to, (0, codegen_1._) `${to} || {}`).code((0, codegen_1._) `Object.assign(${to}, ${from})`));\n        }),\n        mergeToName: (gen, from, to) => gen.if((0, codegen_1._) `${to} !== true`, () => {\n            if (from === true) {\n                gen.assign(to, true);\n            }\n            else {\n                gen.assign(to, (0, codegen_1._) `${to} || {}`);\n                setEvaluated(gen, to, from);\n            }\n        }),\n        mergeValues: (from, to) => (from === true ? true : { ...from, ...to }),\n        resultToName: evaluatedPropsToName,\n    }),\n    items: makeMergeEvaluated({\n        mergeNames: (gen, from, to) => gen.if((0, codegen_1._) `${to} !== true && ${from} !== undefined`, () => gen.assign(to, (0, codegen_1._) `${from} === true ? true : ${to} > ${from} ? ${to} : ${from}`)),\n        mergeToName: (gen, from, to) => gen.if((0, codegen_1._) `${to} !== true`, () => gen.assign(to, from === true ? true : (0, codegen_1._) `${to} > ${from} ? ${to} : ${from}`)),\n        mergeValues: (from, to) => (from === true ? true : Math.max(from, to)),\n        resultToName: (gen, items) => gen.var(\"items\", items),\n    }),\n};\nfunction evaluatedPropsToName(gen, ps) {\n    if (ps === true)\n        return gen.var(\"props\", true);\n    const props = gen.var(\"props\", (0, codegen_1._) `{}`);\n    if (ps !== undefined)\n        setEvaluated(gen, props, ps);\n    return props;\n}\nexports.evaluatedPropsToName = evaluatedPropsToName;\nfunction setEvaluated(gen, props, ps) {\n    Object.keys(ps).forEach((p) => gen.assign((0, codegen_1._) `${props}${(0, codegen_1.getProperty)(p)}`, true));\n}\nexports.setEvaluated = setEvaluated;\nconst snippets = {};\nfunction useFunc(gen, f) {\n    return gen.scopeValue(\"func\", {\n        ref: f,\n        code: snippets[f.code] || (snippets[f.code] = new code_1._Code(f.code)),\n    });\n}\nexports.useFunc = useFunc;\nvar Type;\n(function (Type) {\n    Type[Type[\"Num\"] = 0] = \"Num\";\n    Type[Type[\"Str\"] = 1] = \"Str\";\n})(Type = exports.Type || (exports.Type = {}));\nfunction getErrorPath(dataProp, dataPropType, jsPropertySyntax) {\n    // let path\n    if (dataProp instanceof codegen_1.Name) {\n        const isNumber = dataPropType === Type.Num;\n        return jsPropertySyntax\n            ? isNumber\n                ? (0, codegen_1._) `\"[\" + ${dataProp} + \"]\"`\n                : (0, codegen_1._) `\"['\" + ${dataProp} + \"']\"`\n            : isNumber\n                ? (0, codegen_1._) `\"/\" + ${dataProp}`\n                : (0, codegen_1._) `\"/\" + ${dataProp}.replace(/~/g, \"~0\").replace(/\\\\//g, \"~1\")`; // TODO maybe use global escapePointer\n    }\n    return jsPropertySyntax ? (0, codegen_1.getProperty)(dataProp).toString() : \"/\" + escapeJsonPointer(dataProp);\n}\nexports.getErrorPath = getErrorPath;\nfunction checkStrictMode(it, msg, mode = it.opts.strictSchema) {\n    if (!mode)\n        return;\n    msg = `strict mode: ${msg}`;\n    if (mode === true)\n        throw new Error(msg);\n    it.self.logger.warn(msg);\n}\nexports.checkStrictMode = checkStrictMode;\n//# sourceMappingURL=util.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.shouldUseRule = exports.shouldUseGroup = exports.schemaHasRulesForType = void 0;\nfunction schemaHasRulesForType({ schema, self }, type) {\n    const group = self.RULES.types[type];\n    return group && group !== true && shouldUseGroup(schema, group);\n}\nexports.schemaHasRulesForType = schemaHasRulesForType;\nfunction shouldUseGroup(schema, group) {\n    return group.rules.some((rule) => shouldUseRule(schema, rule));\n}\nexports.shouldUseGroup = shouldUseGroup;\nfunction shouldUseRule(schema, rule) {\n    var _a;\n    return (schema[rule.keyword] !== undefined ||\n        ((_a = rule.definition.implements) === null || _a === void 0 ? void 0 : _a.some((kwd) => schema[kwd] !== undefined)));\n}\nexports.shouldUseRule = shouldUseRule;\n//# sourceMappingURL=applicability.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.boolOrEmptySchema = exports.topBoolOrEmptySchema = void 0;\nconst errors_1 = require(\"../errors\");\nconst codegen_1 = require(\"../codegen\");\nconst names_1 = require(\"../names\");\nconst boolError = {\n    message: \"boolean schema is false\",\n};\nfunction topBoolOrEmptySchema(it) {\n    const { gen, schema, validateName } = it;\n    if (schema === false) {\n        falseSchemaError(it, false);\n    }\n    else if (typeof schema == \"object\" && schema.$async === true) {\n        gen.return(names_1.default.data);\n    }\n    else {\n        gen.assign((0, codegen_1._) `${validateName}.errors`, null);\n        gen.return(true);\n    }\n}\nexports.topBoolOrEmptySchema = topBoolOrEmptySchema;\nfunction boolOrEmptySchema(it, valid) {\n    const { gen, schema } = it;\n    if (schema === false) {\n        gen.var(valid, false); // TODO var\n        falseSchemaError(it);\n    }\n    else {\n        gen.var(valid, true); // TODO var\n    }\n}\nexports.boolOrEmptySchema = boolOrEmptySchema;\nfunction falseSchemaError(it, overrideAllErrors) {\n    const { gen, data } = it;\n    // TODO maybe some other interface should be used for non-keyword validation errors...\n    const cxt = {\n        gen,\n        keyword: \"false schema\",\n        data,\n        schema: false,\n        schemaCode: false,\n        schemaValue: false,\n        params: {},\n        it,\n    };\n    (0, errors_1.reportError)(cxt, boolError, undefined, overrideAllErrors);\n}\n//# sourceMappingURL=boolSchema.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.reportTypeError = exports.checkDataTypes = exports.checkDataType = exports.coerceAndCheckDataType = exports.getJSONTypes = exports.getSchemaTypes = exports.DataType = void 0;\nconst rules_1 = require(\"../rules\");\nconst applicability_1 = require(\"./applicability\");\nconst errors_1 = require(\"../errors\");\nconst codegen_1 = require(\"../codegen\");\nconst util_1 = require(\"../util\");\nvar DataType;\n(function (DataType) {\n    DataType[DataType[\"Correct\"] = 0] = \"Correct\";\n    DataType[DataType[\"Wrong\"] = 1] = \"Wrong\";\n})(DataType = exports.DataType || (exports.DataType = {}));\nfunction getSchemaTypes(schema) {\n    const types = getJSONTypes(schema.type);\n    const hasNull = types.includes(\"null\");\n    if (hasNull) {\n        if (schema.nullable === false)\n            throw new Error(\"type: null contradicts nullable: false\");\n    }\n    else {\n        if (!types.length && schema.nullable !== undefined) {\n            throw new Error('\"nullable\" cannot be used without \"type\"');\n        }\n        if (schema.nullable === true)\n            types.push(\"null\");\n    }\n    return types;\n}\nexports.getSchemaTypes = getSchemaTypes;\nfunction getJSONTypes(ts) {\n    const types = Array.isArray(ts) ? ts : ts ? [ts] : [];\n    if (types.every(rules_1.isJSONType))\n        return types;\n    throw new Error(\"type must be JSONType or JSONType[]: \" + types.join(\",\"));\n}\nexports.getJSONTypes = getJSONTypes;\nfunction coerceAndCheckDataType(it, types) {\n    const { gen, data, opts } = it;\n    const coerceTo = coerceToTypes(types, opts.coerceTypes);\n    const checkTypes = types.length > 0 &&\n        !(coerceTo.length === 0 && types.length === 1 && (0, applicability_1.schemaHasRulesForType)(it, types[0]));\n    if (checkTypes) {\n        const wrongType = checkDataTypes(types, data, opts.strictNumbers, DataType.Wrong);\n        gen.if(wrongType, () => {\n            if (coerceTo.length)\n                coerceData(it, types, coerceTo);\n            else\n                reportTypeError(it);\n        });\n    }\n    return checkTypes;\n}\nexports.coerceAndCheckDataType = coerceAndCheckDataType;\nconst COERCIBLE = new Set([\"string\", \"number\", \"integer\", \"boolean\", \"null\"]);\nfunction coerceToTypes(types, coerceTypes) {\n    return coerceTypes\n        ? types.filter((t) => COERCIBLE.has(t) || (coerceTypes === \"array\" && t === \"array\"))\n        : [];\n}\nfunction coerceData(it, types, coerceTo) {\n    const { gen, data, opts } = it;\n    const dataType = gen.let(\"dataType\", (0, codegen_1._) `typeof ${data}`);\n    const coerced = gen.let(\"coerced\", (0, codegen_1._) `undefined`);\n    if (opts.coerceTypes === \"array\") {\n        gen.if((0, codegen_1._) `${dataType} == 'object' && Array.isArray(${data}) && ${data}.length == 1`, () => gen\n            .assign(data, (0, codegen_1._) `${data}[0]`)\n            .assign(dataType, (0, codegen_1._) `typeof ${data}`)\n            .if(checkDataTypes(types, data, opts.strictNumbers), () => gen.assign(coerced, data)));\n    }\n    gen.if((0, codegen_1._) `${coerced} !== undefined`);\n    for (const t of coerceTo) {\n        if (COERCIBLE.has(t) || (t === \"array\" && opts.coerceTypes === \"array\")) {\n            coerceSpecificType(t);\n        }\n    }\n    gen.else();\n    reportTypeError(it);\n    gen.endIf();\n    gen.if((0, codegen_1._) `${coerced} !== undefined`, () => {\n        gen.assign(data, coerced);\n        assignParentData(it, coerced);\n    });\n    function coerceSpecificType(t) {\n        switch (t) {\n            case \"string\":\n                gen\n                    .elseIf((0, codegen_1._) `${dataType} == \"number\" || ${dataType} == \"boolean\"`)\n                    .assign(coerced, (0, codegen_1._) `\"\" + ${data}`)\n                    .elseIf((0, codegen_1._) `${data} === null`)\n                    .assign(coerced, (0, codegen_1._) `\"\"`);\n                return;\n            case \"number\":\n                gen\n                    .elseIf((0, codegen_1._) `${dataType} == \"boolean\" || ${data} === null\n              || (${dataType} == \"string\" && ${data} && ${data} == +${data})`)\n                    .assign(coerced, (0, codegen_1._) `+${data}`);\n                return;\n            case \"integer\":\n                gen\n                    .elseIf((0, codegen_1._) `${dataType} === \"boolean\" || ${data} === null\n              || (${dataType} === \"string\" && ${data} && ${data} == +${data} && !(${data} % 1))`)\n                    .assign(coerced, (0, codegen_1._) `+${data}`);\n                return;\n            case \"boolean\":\n                gen\n                    .elseIf((0, codegen_1._) `${data} === \"false\" || ${data} === 0 || ${data} === null`)\n                    .assign(coerced, false)\n                    .elseIf((0, codegen_1._) `${data} === \"true\" || ${data} === 1`)\n                    .assign(coerced, true);\n                return;\n            case \"null\":\n                gen.elseIf((0, codegen_1._) `${data} === \"\" || ${data} === 0 || ${data} === false`);\n                gen.assign(coerced, null);\n                return;\n            case \"array\":\n                gen\n                    .elseIf((0, codegen_1._) `${dataType} === \"string\" || ${dataType} === \"number\"\n              || ${dataType} === \"boolean\" || ${data} === null`)\n                    .assign(coerced, (0, codegen_1._) `[${data}]`);\n        }\n    }\n}\nfunction assignParentData({ gen, parentData, parentDataProperty }, expr) {\n    // TODO use gen.property\n    gen.if((0, codegen_1._) `${parentData} !== undefined`, () => gen.assign((0, codegen_1._) `${parentData}[${parentDataProperty}]`, expr));\n}\nfunction checkDataType(dataType, data, strictNums, correct = DataType.Correct) {\n    const EQ = correct === DataType.Correct ? codegen_1.operators.EQ : codegen_1.operators.NEQ;\n    let cond;\n    switch (dataType) {\n        case \"null\":\n            return (0, codegen_1._) `${data} ${EQ} null`;\n        case \"array\":\n            cond = (0, codegen_1._) `Array.isArray(${data})`;\n            break;\n        case \"object\":\n            cond = (0, codegen_1._) `${data} && typeof ${data} == \"object\" && !Array.isArray(${data})`;\n            break;\n        case \"integer\":\n            cond = numCond((0, codegen_1._) `!(${data} % 1) && !isNaN(${data})`);\n            break;\n        case \"number\":\n            cond = numCond();\n            break;\n        default:\n            return (0, codegen_1._) `typeof ${data} ${EQ} ${dataType}`;\n    }\n    return correct === DataType.Correct ? cond : (0, codegen_1.not)(cond);\n    function numCond(_cond = codegen_1.nil) {\n        return (0, codegen_1.and)((0, codegen_1._) `typeof ${data} == \"number\"`, _cond, strictNums ? (0, codegen_1._) `isFinite(${data})` : codegen_1.nil);\n    }\n}\nexports.checkDataType = checkDataType;\nfunction checkDataTypes(dataTypes, data, strictNums, correct) {\n    if (dataTypes.length === 1) {\n        return checkDataType(dataTypes[0], data, strictNums, correct);\n    }\n    let cond;\n    const types = (0, util_1.toHash)(dataTypes);\n    if (types.array && types.object) {\n        const notObj = (0, codegen_1._) `typeof ${data} != \"object\"`;\n        cond = types.null ? notObj : (0, codegen_1._) `!${data} || ${notObj}`;\n        delete types.null;\n        delete types.array;\n        delete types.object;\n    }\n    else {\n        cond = codegen_1.nil;\n    }\n    if (types.number)\n        delete types.integer;\n    for (const t in types)\n        cond = (0, codegen_1.and)(cond, checkDataType(t, data, strictNums, correct));\n    return cond;\n}\nexports.checkDataTypes = checkDataTypes;\nconst typeError = {\n    message: ({ schema }) => `must be ${schema}`,\n    params: ({ schema, schemaValue }) => typeof schema == \"string\" ? (0, codegen_1._) `{type: ${schema}}` : (0, codegen_1._) `{type: ${schemaValue}}`,\n};\nfunction reportTypeError(it) {\n    const cxt = getTypeErrorContext(it);\n    (0, errors_1.reportError)(cxt, typeError);\n}\nexports.reportTypeError = reportTypeError;\nfunction getTypeErrorContext(it) {\n    const { gen, data, schema } = it;\n    const schemaCode = (0, util_1.schemaRefOrVal)(it, schema, \"type\");\n    return {\n        gen,\n        keyword: \"type\",\n        data,\n        schema: schema.type,\n        schemaCode,\n        schemaValue: schemaCode,\n        parentSchema: schema,\n        params: {},\n        it,\n    };\n}\n//# sourceMappingURL=dataType.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.assignDefaults = void 0;\nconst codegen_1 = require(\"../codegen\");\nconst util_1 = require(\"../util\");\nfunction assignDefaults(it, ty) {\n    const { properties, items } = it.schema;\n    if (ty === \"object\" && properties) {\n        for (const key in properties) {\n            assignDefault(it, key, properties[key].default);\n        }\n    }\n    else if (ty === \"array\" && Array.isArray(items)) {\n        items.forEach((sch, i) => assignDefault(it, i, sch.default));\n    }\n}\nexports.assignDefaults = assignDefaults;\nfunction assignDefault(it, prop, defaultValue) {\n    const { gen, compositeRule, data, opts } = it;\n    if (defaultValue === undefined)\n        return;\n    const childData = (0, codegen_1._) `${data}${(0, codegen_1.getProperty)(prop)}`;\n    if (compositeRule) {\n        (0, util_1.checkStrictMode)(it, `default is ignored for: ${childData}`);\n        return;\n    }\n    let condition = (0, codegen_1._) `${childData} === undefined`;\n    if (opts.useDefaults === \"empty\") {\n        condition = (0, codegen_1._) `${condition} || ${childData} === null || ${childData} === \"\"`;\n    }\n    // `${childData} === undefined` +\n    // (opts.useDefaults === \"empty\" ? ` || ${childData} === null || ${childData} === \"\"` : \"\")\n    gen.if(condition, (0, codegen_1._) `${childData} = ${(0, codegen_1.stringify)(defaultValue)}`);\n}\n//# sourceMappingURL=defaults.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getData = exports.KeywordCxt = exports.validateFunctionCode = void 0;\nconst boolSchema_1 = require(\"./boolSchema\");\nconst dataType_1 = require(\"./dataType\");\nconst applicability_1 = require(\"./applicability\");\nconst dataType_2 = require(\"./dataType\");\nconst defaults_1 = require(\"./defaults\");\nconst keyword_1 = require(\"./keyword\");\nconst subschema_1 = require(\"./subschema\");\nconst codegen_1 = require(\"../codegen\");\nconst names_1 = require(\"../names\");\nconst resolve_1 = require(\"../resolve\");\nconst util_1 = require(\"../util\");\nconst errors_1 = require(\"../errors\");\n// schema compilation - generates validation function, subschemaCode (below) is used for subschemas\nfunction validateFunctionCode(it) {\n    if (isSchemaObj(it)) {\n        checkKeywords(it);\n        if (schemaCxtHasRules(it)) {\n            topSchemaObjCode(it);\n            return;\n        }\n    }\n    validateFunction(it, () => (0, boolSchema_1.topBoolOrEmptySchema)(it));\n}\nexports.validateFunctionCode = validateFunctionCode;\nfunction validateFunction({ gen, validateName, schema, schemaEnv, opts }, body) {\n    if (opts.code.es5) {\n        gen.func(validateName, (0, codegen_1._) `${names_1.default.data}, ${names_1.default.valCxt}`, schemaEnv.$async, () => {\n            gen.code((0, codegen_1._) `\"use strict\"; ${funcSourceUrl(schema, opts)}`);\n            destructureValCxtES5(gen, opts);\n            gen.code(body);\n        });\n    }\n    else {\n        gen.func(validateName, (0, codegen_1._) `${names_1.default.data}, ${destructureValCxt(opts)}`, schemaEnv.$async, () => gen.code(funcSourceUrl(schema, opts)).code(body));\n    }\n}\nfunction destructureValCxt(opts) {\n    return (0, codegen_1._) `{${names_1.default.instancePath}=\"\", ${names_1.default.parentData}, ${names_1.default.parentDataProperty}, ${names_1.default.rootData}=${names_1.default.data}${opts.dynamicRef ? (0, codegen_1._) `, ${names_1.default.dynamicAnchors}={}` : codegen_1.nil}}={}`;\n}\nfunction destructureValCxtES5(gen, opts) {\n    gen.if(names_1.default.valCxt, () => {\n        gen.var(names_1.default.instancePath, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.instancePath}`);\n        gen.var(names_1.default.parentData, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.parentData}`);\n        gen.var(names_1.default.parentDataProperty, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.parentDataProperty}`);\n        gen.var(names_1.default.rootData, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.rootData}`);\n        if (opts.dynamicRef)\n            gen.var(names_1.default.dynamicAnchors, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.dynamicAnchors}`);\n    }, () => {\n        gen.var(names_1.default.instancePath, (0, codegen_1._) `\"\"`);\n        gen.var(names_1.default.parentData, (0, codegen_1._) `undefined`);\n        gen.var(names_1.default.parentDataProperty, (0, codegen_1._) `undefined`);\n        gen.var(names_1.default.rootData, names_1.default.data);\n        if (opts.dynamicRef)\n            gen.var(names_1.default.dynamicAnchors, (0, codegen_1._) `{}`);\n    });\n}\nfunction topSchemaObjCode(it) {\n    const { schema, opts, gen } = it;\n    validateFunction(it, () => {\n        if (opts.$comment && schema.$comment)\n            commentKeyword(it);\n        checkNoDefault(it);\n        gen.let(names_1.default.vErrors, null);\n        gen.let(names_1.default.errors, 0);\n        if (opts.unevaluated)\n            resetEvaluated(it);\n        typeAndKeywords(it);\n        returnResults(it);\n    });\n    return;\n}\nfunction resetEvaluated(it) {\n    // TODO maybe some hook to execute it in the end to check whether props/items are Name, as in assignEvaluated\n    const { gen, validateName } = it;\n    it.evaluated = gen.const(\"evaluated\", (0, codegen_1._) `${validateName}.evaluated`);\n    gen.if((0, codegen_1._) `${it.evaluated}.dynamicProps`, () => gen.assign((0, codegen_1._) `${it.evaluated}.props`, (0, codegen_1._) `undefined`));\n    gen.if((0, codegen_1._) `${it.evaluated}.dynamicItems`, () => gen.assign((0, codegen_1._) `${it.evaluated}.items`, (0, codegen_1._) `undefined`));\n}\nfunction funcSourceUrl(schema, opts) {\n    const schId = typeof schema == \"object\" && schema[opts.schemaId];\n    return schId && (opts.code.source || opts.code.process) ? (0, codegen_1._) `/*# sourceURL=${schId} */` : codegen_1.nil;\n}\n// schema compilation - this function is used recursively to generate code for sub-schemas\nfunction subschemaCode(it, valid) {\n    if (isSchemaObj(it)) {\n        checkKeywords(it);\n        if (schemaCxtHasRules(it)) {\n            subSchemaObjCode(it, valid);\n            return;\n        }\n    }\n    (0, boolSchema_1.boolOrEmptySchema)(it, valid);\n}\nfunction schemaCxtHasRules({ schema, self }) {\n    if (typeof schema == \"boolean\")\n        return !schema;\n    for (const key in schema)\n        if (self.RULES.all[key])\n            return true;\n    return false;\n}\nfunction isSchemaObj(it) {\n    return typeof it.schema != \"boolean\";\n}\nfunction subSchemaObjCode(it, valid) {\n    const { schema, gen, opts } = it;\n    if (opts.$comment && schema.$comment)\n        commentKeyword(it);\n    updateContext(it);\n    checkAsyncSchema(it);\n    const errsCount = gen.const(\"_errs\", names_1.default.errors);\n    typeAndKeywords(it, errsCount);\n    // TODO var\n    gen.var(valid, (0, codegen_1._) `${errsCount} === ${names_1.default.errors}`);\n}\nfunction checkKeywords(it) {\n    (0, util_1.checkUnknownRules)(it);\n    checkRefsAndKeywords(it);\n}\nfunction typeAndKeywords(it, errsCount) {\n    if (it.opts.jtd)\n        return schemaKeywords(it, [], false, errsCount);\n    const types = (0, dataType_1.getSchemaTypes)(it.schema);\n    const checkedTypes = (0, dataType_1.coerceAndCheckDataType)(it, types);\n    schemaKeywords(it, types, !checkedTypes, errsCount);\n}\nfunction checkRefsAndKeywords(it) {\n    const { schema, errSchemaPath, opts, self } = it;\n    if (schema.$ref && opts.ignoreKeywordsWithRef && (0, util_1.schemaHasRulesButRef)(schema, self.RULES)) {\n        self.logger.warn(`$ref: keywords ignored in schema at path \"${errSchemaPath}\"`);\n    }\n}\nfunction checkNoDefault(it) {\n    const { schema, opts } = it;\n    if (schema.default !== undefined && opts.useDefaults && opts.strictSchema) {\n        (0, util_1.checkStrictMode)(it, \"default is ignored in the schema root\");\n    }\n}\nfunction updateContext(it) {\n    const schId = it.schema[it.opts.schemaId];\n    if (schId)\n        it.baseId = (0, resolve_1.resolveUrl)(it.opts.uriResolver, it.baseId, schId);\n}\nfunction checkAsyncSchema(it) {\n    if (it.schema.$async && !it.schemaEnv.$async)\n        throw new Error(\"async schema in sync schema\");\n}\nfunction commentKeyword({ gen, schemaEnv, schema, errSchemaPath, opts }) {\n    const msg = schema.$comment;\n    if (opts.$comment === true) {\n        gen.code((0, codegen_1._) `${names_1.default.self}.logger.log(${msg})`);\n    }\n    else if (typeof opts.$comment == \"function\") {\n        const schemaPath = (0, codegen_1.str) `${errSchemaPath}/$comment`;\n        const rootName = gen.scopeValue(\"root\", { ref: schemaEnv.root });\n        gen.code((0, codegen_1._) `${names_1.default.self}.opts.$comment(${msg}, ${schemaPath}, ${rootName}.schema)`);\n    }\n}\nfunction returnResults(it) {\n    const { gen, schemaEnv, validateName, ValidationError, opts } = it;\n    if (schemaEnv.$async) {\n        // TODO assign unevaluated\n        gen.if((0, codegen_1._) `${names_1.default.errors} === 0`, () => gen.return(names_1.default.data), () => gen.throw((0, codegen_1._) `new ${ValidationError}(${names_1.default.vErrors})`));\n    }\n    else {\n        gen.assign((0, codegen_1._) `${validateName}.errors`, names_1.default.vErrors);\n        if (opts.unevaluated)\n            assignEvaluated(it);\n        gen.return((0, codegen_1._) `${names_1.default.errors} === 0`);\n    }\n}\nfunction assignEvaluated({ gen, evaluated, props, items }) {\n    if (props instanceof codegen_1.Name)\n        gen.assign((0, codegen_1._) `${evaluated}.props`, props);\n    if (items instanceof codegen_1.Name)\n        gen.assign((0, codegen_1._) `${evaluated}.items`, items);\n}\nfunction schemaKeywords(it, types, typeErrors, errsCount) {\n    const { gen, schema, data, allErrors, opts, self } = it;\n    const { RULES } = self;\n    if (schema.$ref && (opts.ignoreKeywordsWithRef || !(0, util_1.schemaHasRulesButRef)(schema, RULES))) {\n        gen.block(() => keywordCode(it, \"$ref\", RULES.all.$ref.definition)); // TODO typecast\n        return;\n    }\n    if (!opts.jtd)\n        checkStrictTypes(it, types);\n    gen.block(() => {\n        for (const group of RULES.rules)\n            groupKeywords(group);\n        groupKeywords(RULES.post);\n    });\n    function groupKeywords(group) {\n        if (!(0, applicability_1.shouldUseGroup)(schema, group))\n            return;\n        if (group.type) {\n            gen.if((0, dataType_2.checkDataType)(group.type, data, opts.strictNumbers));\n            iterateKeywords(it, group);\n            if (types.length === 1 && types[0] === group.type && typeErrors) {\n                gen.else();\n                (0, dataType_2.reportTypeError)(it);\n            }\n            gen.endIf();\n        }\n        else {\n            iterateKeywords(it, group);\n        }\n        // TODO make it \"ok\" call?\n        if (!allErrors)\n            gen.if((0, codegen_1._) `${names_1.default.errors} === ${errsCount || 0}`);\n    }\n}\nfunction iterateKeywords(it, group) {\n    const { gen, schema, opts: { useDefaults }, } = it;\n    if (useDefaults)\n        (0, defaults_1.assignDefaults)(it, group.type);\n    gen.block(() => {\n        for (const rule of group.rules) {\n            if ((0, applicability_1.shouldUseRule)(schema, rule)) {\n                keywordCode(it, rule.keyword, rule.definition, group.type);\n            }\n        }\n    });\n}\nfunction checkStrictTypes(it, types) {\n    if (it.schemaEnv.meta || !it.opts.strictTypes)\n        return;\n    checkContextTypes(it, types);\n    if (!it.opts.allowUnionTypes)\n        checkMultipleTypes(it, types);\n    checkKeywordTypes(it, it.dataTypes);\n}\nfunction checkContextTypes(it, types) {\n    if (!types.length)\n        return;\n    if (!it.dataTypes.length) {\n        it.dataTypes = types;\n        return;\n    }\n    types.forEach((t) => {\n        if (!includesType(it.dataTypes, t)) {\n            strictTypesError(it, `type \"${t}\" not allowed by context \"${it.dataTypes.join(\",\")}\"`);\n        }\n    });\n    it.dataTypes = it.dataTypes.filter((t) => includesType(types, t));\n}\nfunction checkMultipleTypes(it, ts) {\n    if (ts.length > 1 && !(ts.length === 2 && ts.includes(\"null\"))) {\n        strictTypesError(it, \"use allowUnionTypes to allow union type keyword\");\n    }\n}\nfunction checkKeywordTypes(it, ts) {\n    const rules = it.self.RULES.all;\n    for (const keyword in rules) {\n        const rule = rules[keyword];\n        if (typeof rule == \"object\" && (0, applicability_1.shouldUseRule)(it.schema, rule)) {\n            const { type } = rule.definition;\n            if (type.length && !type.some((t) => hasApplicableType(ts, t))) {\n                strictTypesError(it, `missing type \"${type.join(\",\")}\" for keyword \"${keyword}\"`);\n            }\n        }\n    }\n}\nfunction hasApplicableType(schTs, kwdT) {\n    return schTs.includes(kwdT) || (kwdT === \"number\" && schTs.includes(\"integer\"));\n}\nfunction includesType(ts, t) {\n    return ts.includes(t) || (t === \"integer\" && ts.includes(\"number\"));\n}\nfunction strictTypesError(it, msg) {\n    const schemaPath = it.schemaEnv.baseId + it.errSchemaPath;\n    msg += ` at \"${schemaPath}\" (strictTypes)`;\n    (0, util_1.checkStrictMode)(it, msg, it.opts.strictTypes);\n}\nclass KeywordCxt {\n    constructor(it, def, keyword) {\n        (0, keyword_1.validateKeywordUsage)(it, def, keyword);\n        this.gen = it.gen;\n        this.allErrors = it.allErrors;\n        this.keyword = keyword;\n        this.data = it.data;\n        this.schema = it.schema[keyword];\n        this.$data = def.$data && it.opts.$data && this.schema && this.schema.$data;\n        this.schemaValue = (0, util_1.schemaRefOrVal)(it, this.schema, keyword, this.$data);\n        this.schemaType = def.schemaType;\n        this.parentSchema = it.schema;\n        this.params = {};\n        this.it = it;\n        this.def = def;\n        if (this.$data) {\n            this.schemaCode = it.gen.const(\"vSchema\", getData(this.$data, it));\n        }\n        else {\n            this.schemaCode = this.schemaValue;\n            if (!(0, keyword_1.validSchemaType)(this.schema, def.schemaType, def.allowUndefined)) {\n                throw new Error(`${keyword} value must be ${JSON.stringify(def.schemaType)}`);\n            }\n        }\n        if (\"code\" in def ? def.trackErrors : def.errors !== false) {\n            this.errsCount = it.gen.const(\"_errs\", names_1.default.errors);\n        }\n    }\n    result(condition, successAction, failAction) {\n        this.failResult((0, codegen_1.not)(condition), successAction, failAction);\n    }\n    failResult(condition, successAction, failAction) {\n        this.gen.if(condition);\n        if (failAction)\n            failAction();\n        else\n            this.error();\n        if (successAction) {\n            this.gen.else();\n            successAction();\n            if (this.allErrors)\n                this.gen.endIf();\n        }\n        else {\n            if (this.allErrors)\n                this.gen.endIf();\n            else\n                this.gen.else();\n        }\n    }\n    pass(condition, failAction) {\n        this.failResult((0, codegen_1.not)(condition), undefined, failAction);\n    }\n    fail(condition) {\n        if (condition === undefined) {\n            this.error();\n            if (!this.allErrors)\n                this.gen.if(false); // this branch will be removed by gen.optimize\n            return;\n        }\n        this.gen.if(condition);\n        this.error();\n        if (this.allErrors)\n            this.gen.endIf();\n        else\n            this.gen.else();\n    }\n    fail$data(condition) {\n        if (!this.$data)\n            return this.fail(condition);\n        const { schemaCode } = this;\n        this.fail((0, codegen_1._) `${schemaCode} !== undefined && (${(0, codegen_1.or)(this.invalid$data(), condition)})`);\n    }\n    error(append, errorParams, errorPaths) {\n        if (errorParams) {\n            this.setParams(errorParams);\n            this._error(append, errorPaths);\n            this.setParams({});\n            return;\n        }\n        this._error(append, errorPaths);\n    }\n    _error(append, errorPaths) {\n        ;\n        (append ? errors_1.reportExtraError : errors_1.reportError)(this, this.def.error, errorPaths);\n    }\n    $dataError() {\n        (0, errors_1.reportError)(this, this.def.$dataError || errors_1.keyword$DataError);\n    }\n    reset() {\n        if (this.errsCount === undefined)\n            throw new Error('add \"trackErrors\" to keyword definition');\n        (0, errors_1.resetErrorsCount)(this.gen, this.errsCount);\n    }\n    ok(cond) {\n        if (!this.allErrors)\n            this.gen.if(cond);\n    }\n    setParams(obj, assign) {\n        if (assign)\n            Object.assign(this.params, obj);\n        else\n            this.params = obj;\n    }\n    block$data(valid, codeBlock, $dataValid = codegen_1.nil) {\n        this.gen.block(() => {\n            this.check$data(valid, $dataValid);\n            codeBlock();\n        });\n    }\n    check$data(valid = codegen_1.nil, $dataValid = codegen_1.nil) {\n        if (!this.$data)\n            return;\n        const { gen, schemaCode, schemaType, def } = this;\n        gen.if((0, codegen_1.or)((0, codegen_1._) `${schemaCode} === undefined`, $dataValid));\n        if (valid !== codegen_1.nil)\n            gen.assign(valid, true);\n        if (schemaType.length || def.validateSchema) {\n            gen.elseIf(this.invalid$data());\n            this.$dataError();\n            if (valid !== codegen_1.nil)\n                gen.assign(valid, false);\n        }\n        gen.else();\n    }\n    invalid$data() {\n        const { gen, schemaCode, schemaType, def, it } = this;\n        return (0, codegen_1.or)(wrong$DataType(), invalid$DataSchema());\n        function wrong$DataType() {\n            if (schemaType.length) {\n                /* istanbul ignore if */\n                if (!(schemaCode instanceof codegen_1.Name))\n                    throw new Error(\"ajv implementation error\");\n                const st = Array.isArray(schemaType) ? schemaType : [schemaType];\n                return (0, codegen_1._) `${(0, dataType_2.checkDataTypes)(st, schemaCode, it.opts.strictNumbers, dataType_2.DataType.Wrong)}`;\n            }\n            return codegen_1.nil;\n        }\n        function invalid$DataSchema() {\n            if (def.validateSchema) {\n                const validateSchemaRef = gen.scopeValue(\"validate$data\", { ref: def.validateSchema }); // TODO value.code for standalone\n                return (0, codegen_1._) `!${validateSchemaRef}(${schemaCode})`;\n            }\n            return codegen_1.nil;\n        }\n    }\n    subschema(appl, valid) {\n        const subschema = (0, subschema_1.getSubschema)(this.it, appl);\n        (0, subschema_1.extendSubschemaData)(subschema, this.it, appl);\n        (0, subschema_1.extendSubschemaMode)(subschema, appl);\n        const nextContext = { ...this.it, ...subschema, items: undefined, props: undefined };\n        subschemaCode(nextContext, valid);\n        return nextContext;\n    }\n    mergeEvaluated(schemaCxt, toName) {\n        const { it, gen } = this;\n        if (!it.opts.unevaluated)\n            return;\n        if (it.props !== true && schemaCxt.props !== undefined) {\n            it.props = util_1.mergeEvaluated.props(gen, schemaCxt.props, it.props, toName);\n        }\n        if (it.items !== true && schemaCxt.items !== undefined) {\n            it.items = util_1.mergeEvaluated.items(gen, schemaCxt.items, it.items, toName);\n        }\n    }\n    mergeValidEvaluated(schemaCxt, valid) {\n        const { it, gen } = this;\n        if (it.opts.unevaluated && (it.props !== true || it.items !== true)) {\n            gen.if(valid, () => this.mergeEvaluated(schemaCxt, codegen_1.Name));\n            return true;\n        }\n    }\n}\nexports.KeywordCxt = KeywordCxt;\nfunction keywordCode(it, keyword, def, ruleType) {\n    const cxt = new KeywordCxt(it, def, keyword);\n    if (\"code\" in def) {\n        def.code(cxt, ruleType);\n    }\n    else if (cxt.$data && def.validate) {\n        (0, keyword_1.funcKeywordCode)(cxt, def);\n    }\n    else if (\"macro\" in def) {\n        (0, keyword_1.macroKeywordCode)(cxt, def);\n    }\n    else if (def.compile || def.validate) {\n        (0, keyword_1.funcKeywordCode)(cxt, def);\n    }\n}\nconst JSON_POINTER = /^\\/(?:[^~]|~0|~1)*$/;\nconst RELATIVE_JSON_POINTER = /^([0-9]+)(#|\\/(?:[^~]|~0|~1)*)?$/;\nfunction getData($data, { dataLevel, dataNames, dataPathArr }) {\n    let jsonPointer;\n    let data;\n    if ($data === \"\")\n        return names_1.default.rootData;\n    if ($data[0] === \"/\") {\n        if (!JSON_POINTER.test($data))\n            throw new Error(`Invalid JSON-pointer: ${$data}`);\n        jsonPointer = $data;\n        data = names_1.default.rootData;\n    }\n    else {\n        const matches = RELATIVE_JSON_POINTER.exec($data);\n        if (!matches)\n            throw new Error(`Invalid JSON-pointer: ${$data}`);\n        const up = +matches[1];\n        jsonPointer = matches[2];\n        if (jsonPointer === \"#\") {\n            if (up >= dataLevel)\n                throw new Error(errorMsg(\"property/index\", up));\n            return dataPathArr[dataLevel - up];\n        }\n        if (up > dataLevel)\n            throw new Error(errorMsg(\"data\", up));\n        data = dataNames[dataLevel - up];\n        if (!jsonPointer)\n            return data;\n    }\n    let expr = data;\n    const segments = jsonPointer.split(\"/\");\n    for (const segment of segments) {\n        if (segment) {\n            data = (0, codegen_1._) `${data}${(0, codegen_1.getProperty)((0, util_1.unescapeJsonPointer)(segment))}`;\n            expr = (0, codegen_1._) `${expr} && ${data}`;\n        }\n    }\n    return expr;\n    function errorMsg(pointerType, up) {\n        return `Cannot access ${pointerType} ${up} levels up, current level is ${dataLevel}`;\n    }\n}\nexports.getData = getData;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateKeywordUsage = exports.validSchemaType = exports.funcKeywordCode = exports.macroKeywordCode = void 0;\nconst codegen_1 = require(\"../codegen\");\nconst names_1 = require(\"../names\");\nconst code_1 = require(\"../../vocabularies/code\");\nconst errors_1 = require(\"../errors\");\nfunction macroKeywordCode(cxt, def) {\n    const { gen, keyword, schema, parentSchema, it } = cxt;\n    const macroSchema = def.macro.call(it.self, schema, parentSchema, it);\n    const schemaRef = useKeyword(gen, keyword, macroSchema);\n    if (it.opts.validateSchema !== false)\n        it.self.validateSchema(macroSchema, true);\n    const valid = gen.name(\"valid\");\n    cxt.subschema({\n        schema: macroSchema,\n        schemaPath: codegen_1.nil,\n        errSchemaPath: `${it.errSchemaPath}/${keyword}`,\n        topSchemaRef: schemaRef,\n        compositeRule: true,\n    }, valid);\n    cxt.pass(valid, () => cxt.error(true));\n}\nexports.macroKeywordCode = macroKeywordCode;\nfunction funcKeywordCode(cxt, def) {\n    var _a;\n    const { gen, keyword, schema, parentSchema, $data, it } = cxt;\n    checkAsyncKeyword(it, def);\n    const validate = !$data && def.compile ? def.compile.call(it.self, schema, parentSchema, it) : def.validate;\n    const validateRef = useKeyword(gen, keyword, validate);\n    const valid = gen.let(\"valid\");\n    cxt.block$data(valid, validateKeyword);\n    cxt.ok((_a = def.valid) !== null && _a !== void 0 ? _a : valid);\n    function validateKeyword() {\n        if (def.errors === false) {\n            assignValid();\n            if (def.modifying)\n                modifyData(cxt);\n            reportErrs(() => cxt.error());\n        }\n        else {\n            const ruleErrs = def.async ? validateAsync() : validateSync();\n            if (def.modifying)\n                modifyData(cxt);\n            reportErrs(() => addErrs(cxt, ruleErrs));\n        }\n    }\n    function validateAsync() {\n        const ruleErrs = gen.let(\"ruleErrs\", null);\n        gen.try(() => assignValid((0, codegen_1._) `await `), (e) => gen.assign(valid, false).if((0, codegen_1._) `${e} instanceof ${it.ValidationError}`, () => gen.assign(ruleErrs, (0, codegen_1._) `${e}.errors`), () => gen.throw(e)));\n        return ruleErrs;\n    }\n    function validateSync() {\n        const validateErrs = (0, codegen_1._) `${validateRef}.errors`;\n        gen.assign(validateErrs, null);\n        assignValid(codegen_1.nil);\n        return validateErrs;\n    }\n    function assignValid(_await = def.async ? (0, codegen_1._) `await ` : codegen_1.nil) {\n        const passCxt = it.opts.passContext ? names_1.default.this : names_1.default.self;\n        const passSchema = !((\"compile\" in def && !$data) || def.schema === false);\n        gen.assign(valid, (0, codegen_1._) `${_await}${(0, code_1.callValidateCode)(cxt, validateRef, passCxt, passSchema)}`, def.modifying);\n    }\n    function reportErrs(errors) {\n        var _a;\n        gen.if((0, codegen_1.not)((_a = def.valid) !== null && _a !== void 0 ? _a : valid), errors);\n    }\n}\nexports.funcKeywordCode = funcKeywordCode;\nfunction modifyData(cxt) {\n    const { gen, data, it } = cxt;\n    gen.if(it.parentData, () => gen.assign(data, (0, codegen_1._) `${it.parentData}[${it.parentDataProperty}]`));\n}\nfunction addErrs(cxt, errs) {\n    const { gen } = cxt;\n    gen.if((0, codegen_1._) `Array.isArray(${errs})`, () => {\n        gen\n            .assign(names_1.default.vErrors, (0, codegen_1._) `${names_1.default.vErrors} === null ? ${errs} : ${names_1.default.vErrors}.concat(${errs})`)\n            .assign(names_1.default.errors, (0, codegen_1._) `${names_1.default.vErrors}.length`);\n        (0, errors_1.extendErrors)(cxt);\n    }, () => cxt.error());\n}\nfunction checkAsyncKeyword({ schemaEnv }, def) {\n    if (def.async && !schemaEnv.$async)\n        throw new Error(\"async keyword in sync schema\");\n}\nfunction useKeyword(gen, keyword, result) {\n    if (result === undefined)\n        throw new Error(`keyword \"${keyword}\" failed to compile`);\n    return gen.scopeValue(\"keyword\", typeof result == \"function\" ? { ref: result } : { ref: result, code: (0, codegen_1.stringify)(result) });\n}\nfunction validSchemaType(schema, schemaType, allowUndefined = false) {\n    // TODO add tests\n    return (!schemaType.length ||\n        schemaType.some((st) => st === \"array\"\n            ? Array.isArray(schema)\n            : st === \"object\"\n                ? schema && typeof schema == \"object\" && !Array.isArray(schema)\n                : typeof schema == st || (allowUndefined && typeof schema == \"undefined\")));\n}\nexports.validSchemaType = validSchemaType;\nfunction validateKeywordUsage({ schema, opts, self, errSchemaPath }, def, keyword) {\n    /* istanbul ignore if */\n    if (Array.isArray(def.keyword) ? !def.keyword.includes(keyword) : def.keyword !== keyword) {\n        throw new Error(\"ajv implementation error\");\n    }\n    const deps = def.dependencies;\n    if (deps === null || deps === void 0 ? void 0 : deps.some((kwd) => !Object.prototype.hasOwnProperty.call(schema, kwd))) {\n        throw new Error(`parent schema must have dependencies of ${keyword}: ${deps.join(\",\")}`);\n    }\n    if (def.validateSchema) {\n        const valid = def.validateSchema(schema[keyword]);\n        if (!valid) {\n            const msg = `keyword \"${keyword}\" value is invalid at path \"${errSchemaPath}\": ` +\n                self.errorsText(def.validateSchema.errors);\n            if (opts.validateSchema === \"log\")\n                self.logger.error(msg);\n            else\n                throw new Error(msg);\n        }\n    }\n}\nexports.validateKeywordUsage = validateKeywordUsage;\n//# sourceMappingURL=keyword.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.extendSubschemaMode = exports.extendSubschemaData = exports.getSubschema = void 0;\nconst codegen_1 = require(\"../codegen\");\nconst util_1 = require(\"../util\");\nfunction getSubschema(it, { keyword, schemaProp, schema, schemaPath, errSchemaPath, topSchemaRef }) {\n    if (keyword !== undefined && schema !== undefined) {\n        throw new Error('both \"keyword\" and \"schema\" passed, only one allowed');\n    }\n    if (keyword !== undefined) {\n        const sch = it.schema[keyword];\n        return schemaProp === undefined\n            ? {\n                schema: sch,\n                schemaPath: (0, codegen_1._) `${it.schemaPath}${(0, codegen_1.getProperty)(keyword)}`,\n                errSchemaPath: `${it.errSchemaPath}/${keyword}`,\n            }\n            : {\n                schema: sch[schemaProp],\n                schemaPath: (0, codegen_1._) `${it.schemaPath}${(0, codegen_1.getProperty)(keyword)}${(0, codegen_1.getProperty)(schemaProp)}`,\n                errSchemaPath: `${it.errSchemaPath}/${keyword}/${(0, util_1.escapeFragment)(schemaProp)}`,\n            };\n    }\n    if (schema !== undefined) {\n        if (schemaPath === undefined || errSchemaPath === undefined || topSchemaRef === undefined) {\n            throw new Error('\"schemaPath\", \"errSchemaPath\" and \"topSchemaRef\" are required with \"schema\"');\n        }\n        return {\n            schema,\n            schemaPath,\n            topSchemaRef,\n            errSchemaPath,\n        };\n    }\n    throw new Error('either \"keyword\" or \"schema\" must be passed');\n}\nexports.getSubschema = getSubschema;\nfunction extendSubschemaData(subschema, it, { dataProp, dataPropType: dpType, data, dataTypes, propertyName }) {\n    if (data !== undefined && dataProp !== undefined) {\n        throw new Error('both \"data\" and \"dataProp\" passed, only one allowed');\n    }\n    const { gen } = it;\n    if (dataProp !== undefined) {\n        const { errorPath, dataPathArr, opts } = it;\n        const nextData = gen.let(\"data\", (0, codegen_1._) `${it.data}${(0, codegen_1.getProperty)(dataProp)}`, true);\n        dataContextProps(nextData);\n        subschema.errorPath = (0, codegen_1.str) `${errorPath}${(0, util_1.getErrorPath)(dataProp, dpType, opts.jsPropertySyntax)}`;\n        subschema.parentDataProperty = (0, codegen_1._) `${dataProp}`;\n        subschema.dataPathArr = [...dataPathArr, subschema.parentDataProperty];\n    }\n    if (data !== undefined) {\n        const nextData = data instanceof codegen_1.Name ? data : gen.let(\"data\", data, true); // replaceable if used once?\n        dataContextProps(nextData);\n        if (propertyName !== undefined)\n            subschema.propertyName = propertyName;\n        // TODO something is possibly wrong here with not changing parentDataProperty and not appending dataPathArr\n    }\n    if (dataTypes)\n        subschema.dataTypes = dataTypes;\n    function dataContextProps(_nextData) {\n        subschema.data = _nextData;\n        subschema.dataLevel = it.dataLevel + 1;\n        subschema.dataTypes = [];\n        it.definedProperties = new Set();\n        subschema.parentData = it.data;\n        subschema.dataNames = [...it.dataNames, _nextData];\n    }\n}\nexports.extendSubschemaData = extendSubschemaData;\nfunction extendSubschemaMode(subschema, { jtdDiscriminator, jtdMetadata, compositeRule, createErrors, allErrors }) {\n    if (compositeRule !== undefined)\n        subschema.compositeRule = compositeRule;\n    if (createErrors !== undefined)\n        subschema.createErrors = createErrors;\n    if (allErrors !== undefined)\n        subschema.allErrors = allErrors;\n    subschema.jtdDiscriminator = jtdDiscriminator; // not inherited\n    subschema.jtdMetadata = jtdMetadata; // not inherited\n}\nexports.extendSubschemaMode = extendSubschemaMode;\n//# sourceMappingURL=subschema.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CodeGen = exports.Name = exports.nil = exports.stringify = exports.str = exports._ = exports.KeywordCxt = void 0;\nvar validate_1 = require(\"./compile/validate\");\nObject.defineProperty(exports, \"KeywordCxt\", { enumerable: true, get: function () { return validate_1.KeywordCxt; } });\nvar codegen_1 = require(\"./compile/codegen\");\nObject.defineProperty(exports, \"_\", { enumerable: true, get: function () { return codegen_1._; } });\nObject.defineProperty(exports, \"str\", { enumerable: true, get: function () { return codegen_1.str; } });\nObject.defineProperty(exports, \"stringify\", { enumerable: true, get: function () { return codegen_1.stringify; } });\nObject.defineProperty(exports, \"nil\", { enumerable: true, get: function () { return codegen_1.nil; } });\nObject.defineProperty(exports, \"Name\", { enumerable: true, get: function () { return codegen_1.Name; } });\nObject.defineProperty(exports, \"CodeGen\", { enumerable: true, get: function () { return codegen_1.CodeGen; } });\nconst validation_error_1 = require(\"./runtime/validation_error\");\nconst ref_error_1 = require(\"./compile/ref_error\");\nconst rules_1 = require(\"./compile/rules\");\nconst compile_1 = require(\"./compile\");\nconst codegen_2 = require(\"./compile/codegen\");\nconst resolve_1 = require(\"./compile/resolve\");\nconst dataType_1 = require(\"./compile/validate/dataType\");\nconst util_1 = require(\"./compile/util\");\nconst $dataRefSchema = require(\"./refs/data.json\");\nconst uri_1 = require(\"./runtime/uri\");\nconst defaultRegExp = (str, flags) => new RegExp(str, flags);\ndefaultRegExp.code = \"new RegExp\";\nconst META_IGNORE_OPTIONS = [\"removeAdditional\", \"useDefaults\", \"coerceTypes\"];\nconst EXT_SCOPE_NAMES = new Set([\n    \"validate\",\n    \"serialize\",\n    \"parse\",\n    \"wrapper\",\n    \"root\",\n    \"schema\",\n    \"keyword\",\n    \"pattern\",\n    \"formats\",\n    \"validate$data\",\n    \"func\",\n    \"obj\",\n    \"Error\",\n]);\nconst removedOptions = {\n    errorDataPath: \"\",\n    format: \"`validateFormats: false` can be used instead.\",\n    nullable: '\"nullable\" keyword is supported by default.',\n    jsonPointers: \"Deprecated jsPropertySyntax can be used instead.\",\n    extendRefs: \"Deprecated ignoreKeywordsWithRef can be used instead.\",\n    missingRefs: \"Pass empty schema with $id that should be ignored to ajv.addSchema.\",\n    processCode: \"Use option `code: {process: (code, schemaEnv: object) => string}`\",\n    sourceCode: \"Use option `code: {source: true}`\",\n    strictDefaults: \"It is default now, see option `strict`.\",\n    strictKeywords: \"It is default now, see option `strict`.\",\n    uniqueItems: '\"uniqueItems\" keyword is always validated.',\n    unknownFormats: \"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).\",\n    cache: \"Map is used as cache, schema object as key.\",\n    serialize: \"Map is used as cache, schema object as key.\",\n    ajvErrors: \"It is default now.\",\n};\nconst deprecatedOptions = {\n    ignoreKeywordsWithRef: \"\",\n    jsPropertySyntax: \"\",\n    unicode: '\"minLength\"/\"maxLength\" account for unicode characters by default.',\n};\nconst MAX_EXPRESSION = 200;\n// eslint-disable-next-line complexity\nfunction requiredOptions(o) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0;\n    const s = o.strict;\n    const _optz = (_a = o.code) === null || _a === void 0 ? void 0 : _a.optimize;\n    const optimize = _optz === true || _optz === undefined ? 1 : _optz || 0;\n    const regExp = (_c = (_b = o.code) === null || _b === void 0 ? void 0 : _b.regExp) !== null && _c !== void 0 ? _c : defaultRegExp;\n    const uriResolver = (_d = o.uriResolver) !== null && _d !== void 0 ? _d : uri_1.default;\n    return {\n        strictSchema: (_f = (_e = o.strictSchema) !== null && _e !== void 0 ? _e : s) !== null && _f !== void 0 ? _f : true,\n        strictNumbers: (_h = (_g = o.strictNumbers) !== null && _g !== void 0 ? _g : s) !== null && _h !== void 0 ? _h : true,\n        strictTypes: (_k = (_j = o.strictTypes) !== null && _j !== void 0 ? _j : s) !== null && _k !== void 0 ? _k : \"log\",\n        strictTuples: (_m = (_l = o.strictTuples) !== null && _l !== void 0 ? _l : s) !== null && _m !== void 0 ? _m : \"log\",\n        strictRequired: (_p = (_o = o.strictRequired) !== null && _o !== void 0 ? _o : s) !== null && _p !== void 0 ? _p : false,\n        code: o.code ? { ...o.code, optimize, regExp } : { optimize, regExp },\n        loopRequired: (_q = o.loopRequired) !== null && _q !== void 0 ? _q : MAX_EXPRESSION,\n        loopEnum: (_r = o.loopEnum) !== null && _r !== void 0 ? _r : MAX_EXPRESSION,\n        meta: (_s = o.meta) !== null && _s !== void 0 ? _s : true,\n        messages: (_t = o.messages) !== null && _t !== void 0 ? _t : true,\n        inlineRefs: (_u = o.inlineRefs) !== null && _u !== void 0 ? _u : true,\n        schemaId: (_v = o.schemaId) !== null && _v !== void 0 ? _v : \"$id\",\n        addUsedSchema: (_w = o.addUsedSchema) !== null && _w !== void 0 ? _w : true,\n        validateSchema: (_x = o.validateSchema) !== null && _x !== void 0 ? _x : true,\n        validateFormats: (_y = o.validateFormats) !== null && _y !== void 0 ? _y : true,\n        unicodeRegExp: (_z = o.unicodeRegExp) !== null && _z !== void 0 ? _z : true,\n        int32range: (_0 = o.int32range) !== null && _0 !== void 0 ? _0 : true,\n        uriResolver: uriResolver,\n    };\n}\nclass Ajv {\n    constructor(opts = {}) {\n        this.schemas = {};\n        this.refs = {};\n        this.formats = {};\n        this._compilations = new Set();\n        this._loading = {};\n        this._cache = new Map();\n        opts = this.opts = { ...opts, ...requiredOptions(opts) };\n        const { es5, lines } = this.opts.code;\n        this.scope = new codegen_2.ValueScope({ scope: {}, prefixes: EXT_SCOPE_NAMES, es5, lines });\n        this.logger = getLogger(opts.logger);\n        const formatOpt = opts.validateFormats;\n        opts.validateFormats = false;\n        this.RULES = (0, rules_1.getRules)();\n        checkOptions.call(this, removedOptions, opts, \"NOT SUPPORTED\");\n        checkOptions.call(this, deprecatedOptions, opts, \"DEPRECATED\", \"warn\");\n        this._metaOpts = getMetaSchemaOptions.call(this);\n        if (opts.formats)\n            addInitialFormats.call(this);\n        this._addVocabularies();\n        this._addDefaultMetaSchema();\n        if (opts.keywords)\n            addInitialKeywords.call(this, opts.keywords);\n        if (typeof opts.meta == \"object\")\n            this.addMetaSchema(opts.meta);\n        addInitialSchemas.call(this);\n        opts.validateFormats = formatOpt;\n    }\n    _addVocabularies() {\n        this.addKeyword(\"$async\");\n    }\n    _addDefaultMetaSchema() {\n        const { $data, meta, schemaId } = this.opts;\n        let _dataRefSchema = $dataRefSchema;\n        if (schemaId === \"id\") {\n            _dataRefSchema = { ...$dataRefSchema };\n            _dataRefSchema.id = _dataRefSchema.$id;\n            delete _dataRefSchema.$id;\n        }\n        if (meta && $data)\n            this.addMetaSchema(_dataRefSchema, _dataRefSchema[schemaId], false);\n    }\n    defaultMeta() {\n        const { meta, schemaId } = this.opts;\n        return (this.opts.defaultMeta = typeof meta == \"object\" ? meta[schemaId] || meta : undefined);\n    }\n    validate(schemaKeyRef, // key, ref or schema object\n    data // to be validated\n    ) {\n        let v;\n        if (typeof schemaKeyRef == \"string\") {\n            v = this.getSchema(schemaKeyRef);\n            if (!v)\n                throw new Error(`no schema with key or ref \"${schemaKeyRef}\"`);\n        }\n        else {\n            v = this.compile(schemaKeyRef);\n        }\n        const valid = v(data);\n        if (!(\"$async\" in v))\n            this.errors = v.errors;\n        return valid;\n    }\n    compile(schema, _meta) {\n        const sch = this._addSchema(schema, _meta);\n        return (sch.validate || this._compileSchemaEnv(sch));\n    }\n    compileAsync(schema, meta) {\n        if (typeof this.opts.loadSchema != \"function\") {\n            throw new Error(\"options.loadSchema should be a function\");\n        }\n        const { loadSchema } = this.opts;\n        return runCompileAsync.call(this, schema, meta);\n        async function runCompileAsync(_schema, _meta) {\n            await loadMetaSchema.call(this, _schema.$schema);\n            const sch = this._addSchema(_schema, _meta);\n            return sch.validate || _compileAsync.call(this, sch);\n        }\n        async function loadMetaSchema($ref) {\n            if ($ref && !this.getSchema($ref)) {\n                await runCompileAsync.call(this, { $ref }, true);\n            }\n        }\n        async function _compileAsync(sch) {\n            try {\n                return this._compileSchemaEnv(sch);\n            }\n            catch (e) {\n                if (!(e instanceof ref_error_1.default))\n                    throw e;\n                checkLoaded.call(this, e);\n                await loadMissingSchema.call(this, e.missingSchema);\n                return _compileAsync.call(this, sch);\n            }\n        }\n        function checkLoaded({ missingSchema: ref, missingRef }) {\n            if (this.refs[ref]) {\n                throw new Error(`AnySchema ${ref} is loaded but ${missingRef} cannot be resolved`);\n            }\n        }\n        async function loadMissingSchema(ref) {\n            const _schema = await _loadSchema.call(this, ref);\n            if (!this.refs[ref])\n                await loadMetaSchema.call(this, _schema.$schema);\n            if (!this.refs[ref])\n                this.addSchema(_schema, ref, meta);\n        }\n        async function _loadSchema(ref) {\n            const p = this._loading[ref];\n            if (p)\n                return p;\n            try {\n                return await (this._loading[ref] = loadSchema(ref));\n            }\n            finally {\n                delete this._loading[ref];\n            }\n        }\n    }\n    // Adds schema to the instance\n    addSchema(schema, // If array is passed, `key` will be ignored\n    key, // Optional schema key. Can be passed to `validate` method instead of schema object or id/ref. One schema per instance can have empty `id` and `key`.\n    _meta, // true if schema is a meta-schema. Used internally, addMetaSchema should be used instead.\n    _validateSchema = this.opts.validateSchema // false to skip schema validation. Used internally, option validateSchema should be used instead.\n    ) {\n        if (Array.isArray(schema)) {\n            for (const sch of schema)\n                this.addSchema(sch, undefined, _meta, _validateSchema);\n            return this;\n        }\n        let id;\n        if (typeof schema === \"object\") {\n            const { schemaId } = this.opts;\n            id = schema[schemaId];\n            if (id !== undefined && typeof id != \"string\") {\n                throw new Error(`schema ${schemaId} must be string`);\n            }\n        }\n        key = (0, resolve_1.normalizeId)(key || id);\n        this._checkUnique(key);\n        this.schemas[key] = this._addSchema(schema, _meta, key, _validateSchema, true);\n        return this;\n    }\n    // Add schema that will be used to validate other schemas\n    // options in META_IGNORE_OPTIONS are alway set to false\n    addMetaSchema(schema, key, // schema key\n    _validateSchema = this.opts.validateSchema // false to skip schema validation, can be used to override validateSchema option for meta-schema\n    ) {\n        this.addSchema(schema, key, true, _validateSchema);\n        return this;\n    }\n    //  Validate schema against its meta-schema\n    validateSchema(schema, throwOrLogError) {\n        if (typeof schema == \"boolean\")\n            return true;\n        let $schema;\n        $schema = schema.$schema;\n        if ($schema !== undefined && typeof $schema != \"string\") {\n            throw new Error(\"$schema must be a string\");\n        }\n        $schema = $schema || this.opts.defaultMeta || this.defaultMeta();\n        if (!$schema) {\n            this.logger.warn(\"meta-schema not available\");\n            this.errors = null;\n            return true;\n        }\n        const valid = this.validate($schema, schema);\n        if (!valid && throwOrLogError) {\n            const message = \"schema is invalid: \" + this.errorsText();\n            if (this.opts.validateSchema === \"log\")\n                this.logger.error(message);\n            else\n                throw new Error(message);\n        }\n        return valid;\n    }\n    // Get compiled schema by `key` or `ref`.\n    // (`key` that was passed to `addSchema` or full schema reference - `schema.$id` or resolved id)\n    getSchema(keyRef) {\n        let sch;\n        while (typeof (sch = getSchEnv.call(this, keyRef)) == \"string\")\n            keyRef = sch;\n        if (sch === undefined) {\n            const { schemaId } = this.opts;\n            const root = new compile_1.SchemaEnv({ schema: {}, schemaId });\n            sch = compile_1.resolveSchema.call(this, root, keyRef);\n            if (!sch)\n                return;\n            this.refs[keyRef] = sch;\n        }\n        return (sch.validate || this._compileSchemaEnv(sch));\n    }\n    // Remove cached schema(s).\n    // If no parameter is passed all schemas but meta-schemas are removed.\n    // If RegExp is passed all schemas with key/id matching pattern but meta-schemas are removed.\n    // Even if schema is referenced by other schemas it still can be removed as other schemas have local references.\n    removeSchema(schemaKeyRef) {\n        if (schemaKeyRef instanceof RegExp) {\n            this._removeAllSchemas(this.schemas, schemaKeyRef);\n            this._removeAllSchemas(this.refs, schemaKeyRef);\n            return this;\n        }\n        switch (typeof schemaKeyRef) {\n            case \"undefined\":\n                this._removeAllSchemas(this.schemas);\n                this._removeAllSchemas(this.refs);\n                this._cache.clear();\n                return this;\n            case \"string\": {\n                const sch = getSchEnv.call(this, schemaKeyRef);\n                if (typeof sch == \"object\")\n                    this._cache.delete(sch.schema);\n                delete this.schemas[schemaKeyRef];\n                delete this.refs[schemaKeyRef];\n                return this;\n            }\n            case \"object\": {\n                const cacheKey = schemaKeyRef;\n                this._cache.delete(cacheKey);\n                let id = schemaKeyRef[this.opts.schemaId];\n                if (id) {\n                    id = (0, resolve_1.normalizeId)(id);\n                    delete this.schemas[id];\n                    delete this.refs[id];\n                }\n                return this;\n            }\n            default:\n                throw new Error(\"ajv.removeSchema: invalid parameter\");\n        }\n    }\n    // add \"vocabulary\" - a collection of keywords\n    addVocabulary(definitions) {\n        for (const def of definitions)\n            this.addKeyword(def);\n        return this;\n    }\n    addKeyword(kwdOrDef, def // deprecated\n    ) {\n        let keyword;\n        if (typeof kwdOrDef == \"string\") {\n            keyword = kwdOrDef;\n            if (typeof def == \"object\") {\n                this.logger.warn(\"these parameters are deprecated, see docs for addKeyword\");\n                def.keyword = keyword;\n            }\n        }\n        else if (typeof kwdOrDef == \"object\" && def === undefined) {\n            def = kwdOrDef;\n            keyword = def.keyword;\n            if (Array.isArray(keyword) && !keyword.length) {\n                throw new Error(\"addKeywords: keyword must be string or non-empty array\");\n            }\n        }\n        else {\n            throw new Error(\"invalid addKeywords parameters\");\n        }\n        checkKeyword.call(this, keyword, def);\n        if (!def) {\n            (0, util_1.eachItem)(keyword, (kwd) => addRule.call(this, kwd));\n            return this;\n        }\n        keywordMetaschema.call(this, def);\n        const definition = {\n            ...def,\n            type: (0, dataType_1.getJSONTypes)(def.type),\n            schemaType: (0, dataType_1.getJSONTypes)(def.schemaType),\n        };\n        (0, util_1.eachItem)(keyword, definition.type.length === 0\n            ? (k) => addRule.call(this, k, definition)\n            : (k) => definition.type.forEach((t) => addRule.call(this, k, definition, t)));\n        return this;\n    }\n    getKeyword(keyword) {\n        const rule = this.RULES.all[keyword];\n        return typeof rule == \"object\" ? rule.definition : !!rule;\n    }\n    // Remove keyword\n    removeKeyword(keyword) {\n        // TODO return type should be Ajv\n        const { RULES } = this;\n        delete RULES.keywords[keyword];\n        delete RULES.all[keyword];\n        for (const group of RULES.rules) {\n            const i = group.rules.findIndex((rule) => rule.keyword === keyword);\n            if (i >= 0)\n                group.rules.splice(i, 1);\n        }\n        return this;\n    }\n    // Add format\n    addFormat(name, format) {\n        if (typeof format == \"string\")\n            format = new RegExp(format);\n        this.formats[name] = format;\n        return this;\n    }\n    errorsText(errors = this.errors, // optional array of validation errors\n    { separator = \", \", dataVar = \"data\" } = {} // optional options with properties `separator` and `dataVar`\n    ) {\n        if (!errors || errors.length === 0)\n            return \"No errors\";\n        return errors\n            .map((e) => `${dataVar}${e.instancePath} ${e.message}`)\n            .reduce((text, msg) => text + separator + msg);\n    }\n    $dataMetaSchema(metaSchema, keywordsJsonPointers) {\n        const rules = this.RULES.all;\n        metaSchema = JSON.parse(JSON.stringify(metaSchema));\n        for (const jsonPointer of keywordsJsonPointers) {\n            const segments = jsonPointer.split(\"/\").slice(1); // first segment is an empty string\n            let keywords = metaSchema;\n            for (const seg of segments)\n                keywords = keywords[seg];\n            for (const key in rules) {\n                const rule = rules[key];\n                if (typeof rule != \"object\")\n                    continue;\n                const { $data } = rule.definition;\n                const schema = keywords[key];\n                if ($data && schema)\n                    keywords[key] = schemaOrData(schema);\n            }\n        }\n        return metaSchema;\n    }\n    _removeAllSchemas(schemas, regex) {\n        for (const keyRef in schemas) {\n            const sch = schemas[keyRef];\n            if (!regex || regex.test(keyRef)) {\n                if (typeof sch == \"string\") {\n                    delete schemas[keyRef];\n                }\n                else if (sch && !sch.meta) {\n                    this._cache.delete(sch.schema);\n                    delete schemas[keyRef];\n                }\n            }\n        }\n    }\n    _addSchema(schema, meta, baseId, validateSchema = this.opts.validateSchema, addSchema = this.opts.addUsedSchema) {\n        let id;\n        const { schemaId } = this.opts;\n        if (typeof schema == \"object\") {\n            id = schema[schemaId];\n        }\n        else {\n            if (this.opts.jtd)\n                throw new Error(\"schema must be object\");\n            else if (typeof schema != \"boolean\")\n                throw new Error(\"schema must be object or boolean\");\n        }\n        let sch = this._cache.get(schema);\n        if (sch !== undefined)\n            return sch;\n        baseId = (0, resolve_1.normalizeId)(id || baseId);\n        const localRefs = resolve_1.getSchemaRefs.call(this, schema, baseId);\n        sch = new compile_1.SchemaEnv({ schema, schemaId, meta, baseId, localRefs });\n        this._cache.set(sch.schema, sch);\n        if (addSchema && !baseId.startsWith(\"#\")) {\n            // TODO atm it is allowed to overwrite schemas without id (instead of not adding them)\n            if (baseId)\n                this._checkUnique(baseId);\n            this.refs[baseId] = sch;\n        }\n        if (validateSchema)\n            this.validateSchema(schema, true);\n        return sch;\n    }\n    _checkUnique(id) {\n        if (this.schemas[id] || this.refs[id]) {\n            throw new Error(`schema with key or id \"${id}\" already exists`);\n        }\n    }\n    _compileSchemaEnv(sch) {\n        if (sch.meta)\n            this._compileMetaSchema(sch);\n        else\n            compile_1.compileSchema.call(this, sch);\n        /* istanbul ignore if */\n        if (!sch.validate)\n            throw new Error(\"ajv implementation error\");\n        return sch.validate;\n    }\n    _compileMetaSchema(sch) {\n        const currentOpts = this.opts;\n        this.opts = this._metaOpts;\n        try {\n            compile_1.compileSchema.call(this, sch);\n        }\n        finally {\n            this.opts = currentOpts;\n        }\n    }\n}\nexports.default = Ajv;\nAjv.ValidationError = validation_error_1.default;\nAjv.MissingRefError = ref_error_1.default;\nfunction checkOptions(checkOpts, options, msg, log = \"error\") {\n    for (const key in checkOpts) {\n        const opt = key;\n        if (opt in options)\n            this.logger[log](`${msg}: option ${key}. ${checkOpts[opt]}`);\n    }\n}\nfunction getSchEnv(keyRef) {\n    keyRef = (0, resolve_1.normalizeId)(keyRef); // TODO tests fail without this line\n    return this.schemas[keyRef] || this.refs[keyRef];\n}\nfunction addInitialSchemas() {\n    const optsSchemas = this.opts.schemas;\n    if (!optsSchemas)\n        return;\n    if (Array.isArray(optsSchemas))\n        this.addSchema(optsSchemas);\n    else\n        for (const key in optsSchemas)\n            this.addSchema(optsSchemas[key], key);\n}\nfunction addInitialFormats() {\n    for (const name in this.opts.formats) {\n        const format = this.opts.formats[name];\n        if (format)\n            this.addFormat(name, format);\n    }\n}\nfunction addInitialKeywords(defs) {\n    if (Array.isArray(defs)) {\n        this.addVocabulary(defs);\n        return;\n    }\n    this.logger.warn(\"keywords option as map is deprecated, pass array\");\n    for (const keyword in defs) {\n        const def = defs[keyword];\n        if (!def.keyword)\n            def.keyword = keyword;\n        this.addKeyword(def);\n    }\n}\nfunction getMetaSchemaOptions() {\n    const metaOpts = { ...this.opts };\n    for (const opt of META_IGNORE_OPTIONS)\n        delete metaOpts[opt];\n    return metaOpts;\n}\nconst noLogs = { log() { }, warn() { }, error() { } };\nfunction getLogger(logger) {\n    if (logger === false)\n        return noLogs;\n    if (logger === undefined)\n        return console;\n    if (logger.log && logger.warn && logger.error)\n        return logger;\n    throw new Error(\"logger must implement log, warn and error methods\");\n}\nconst KEYWORD_NAME = /^[a-z_$][a-z0-9_$:-]*$/i;\nfunction checkKeyword(keyword, def) {\n    const { RULES } = this;\n    (0, util_1.eachItem)(keyword, (kwd) => {\n        if (RULES.keywords[kwd])\n            throw new Error(`Keyword ${kwd} is already defined`);\n        if (!KEYWORD_NAME.test(kwd))\n            throw new Error(`Keyword ${kwd} has invalid name`);\n    });\n    if (!def)\n        return;\n    if (def.$data && !(\"code\" in def || \"validate\" in def)) {\n        throw new Error('$data keyword must have \"code\" or \"validate\" function');\n    }\n}\nfunction addRule(keyword, definition, dataType) {\n    var _a;\n    const post = definition === null || definition === void 0 ? void 0 : definition.post;\n    if (dataType && post)\n        throw new Error('keyword with \"post\" flag cannot have \"type\"');\n    const { RULES } = this;\n    let ruleGroup = post ? RULES.post : RULES.rules.find(({ type: t }) => t === dataType);\n    if (!ruleGroup) {\n        ruleGroup = { type: dataType, rules: [] };\n        RULES.rules.push(ruleGroup);\n    }\n    RULES.keywords[keyword] = true;\n    if (!definition)\n        return;\n    const rule = {\n        keyword,\n        definition: {\n            ...definition,\n            type: (0, dataType_1.getJSONTypes)(definition.type),\n            schemaType: (0, dataType_1.getJSONTypes)(definition.schemaType),\n        },\n    };\n    if (definition.before)\n        addBeforeRule.call(this, ruleGroup, rule, definition.before);\n    else\n        ruleGroup.rules.push(rule);\n    RULES.all[keyword] = rule;\n    (_a = definition.implements) === null || _a === void 0 ? void 0 : _a.forEach((kwd) => this.addKeyword(kwd));\n}\nfunction addBeforeRule(ruleGroup, rule, before) {\n    const i = ruleGroup.rules.findIndex((_rule) => _rule.keyword === before);\n    if (i >= 0) {\n        ruleGroup.rules.splice(i, 0, rule);\n    }\n    else {\n        ruleGroup.rules.push(rule);\n        this.logger.warn(`rule ${before} is not defined`);\n    }\n}\nfunction keywordMetaschema(def) {\n    let { metaSchema } = def;\n    if (metaSchema === undefined)\n        return;\n    if (def.$data && this.opts.$data)\n        metaSchema = schemaOrData(metaSchema);\n    def.validateSchema = this.compile(metaSchema, true);\n}\nconst $dataRef = {\n    $ref: \"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#\",\n};\nfunction schemaOrData(schema) {\n    return { anyOf: [schema, $dataRef] };\n}\n//# sourceMappingURL=core.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// https://github.com/ajv-validator/ajv/issues/889\nconst equal = require(\"fast-deep-equal\");\nequal.code = 'require(\"ajv/dist/runtime/equal\").default';\nexports.default = equal;\n//# sourceMappingURL=equal.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// https://mathiasbynens.be/notes/javascript-encoding\n// https://github.com/bestiejs/punycode.js - punycode.ucs2.decode\nfunction ucs2length(str) {\n    const len = str.length;\n    let length = 0;\n    let pos = 0;\n    let value;\n    while (pos < len) {\n        length++;\n        value = str.charCodeAt(pos++);\n        if (value >= 0xd800 && value <= 0xdbff && pos < len) {\n            // high surrogate, and there is a next character\n            value = str.charCodeAt(pos);\n            if ((value & 0xfc00) === 0xdc00)\n                pos++; // low surrogate\n        }\n    }\n    return length;\n}\nexports.default = ucs2length;\nucs2length.code = 'require(\"ajv/dist/runtime/ucs2length\").default';\n//# sourceMappingURL=ucs2length.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst uri = require(\"uri-js\");\nuri.code = 'require(\"ajv/dist/runtime/uri\").default';\nexports.default = uri;\n//# sourceMappingURL=uri.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass ValidationError extends Error {\n    constructor(errors) {\n        super(\"validation failed\");\n        this.errors = errors;\n        this.ajv = this.validation = true;\n    }\n}\nexports.default = ValidationError;\n//# sourceMappingURL=validation_error.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateAdditionalItems = void 0;\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params: { len } }) => (0, codegen_1.str) `must NOT have more than ${len} items`,\n    params: ({ params: { len } }) => (0, codegen_1._) `{limit: ${len}}`,\n};\nconst def = {\n    keyword: \"additionalItems\",\n    type: \"array\",\n    schemaType: [\"boolean\", \"object\"],\n    before: \"uniqueItems\",\n    error,\n    code(cxt) {\n        const { parentSchema, it } = cxt;\n        const { items } = parentSchema;\n        if (!Array.isArray(items)) {\n            (0, util_1.checkStrictMode)(it, '\"additionalItems\" is ignored when \"items\" is not an array of schemas');\n            return;\n        }\n        validateAdditionalItems(cxt, items);\n    },\n};\nfunction validateAdditionalItems(cxt, items) {\n    const { gen, schema, data, keyword, it } = cxt;\n    it.items = true;\n    const len = gen.const(\"len\", (0, codegen_1._) `${data}.length`);\n    if (schema === false) {\n        cxt.setParams({ len: items.length });\n        cxt.pass((0, codegen_1._) `${len} <= ${items.length}`);\n    }\n    else if (typeof schema == \"object\" && !(0, util_1.alwaysValidSchema)(it, schema)) {\n        const valid = gen.var(\"valid\", (0, codegen_1._) `${len} <= ${items.length}`); // TODO var\n        gen.if((0, codegen_1.not)(valid), () => validateItems(valid));\n        cxt.ok(valid);\n    }\n    function validateItems(valid) {\n        gen.forRange(\"i\", items.length, len, (i) => {\n            cxt.subschema({ keyword, dataProp: i, dataPropType: util_1.Type.Num }, valid);\n            if (!it.allErrors)\n                gen.if((0, codegen_1.not)(valid), () => gen.break());\n        });\n    }\n}\nexports.validateAdditionalItems = validateAdditionalItems;\nexports.default = def;\n//# sourceMappingURL=additionalItems.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst names_1 = require(\"../../compile/names\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: \"must NOT have additional properties\",\n    params: ({ params }) => (0, codegen_1._) `{additionalProperty: ${params.additionalProperty}}`,\n};\nconst def = {\n    keyword: \"additionalProperties\",\n    type: [\"object\"],\n    schemaType: [\"boolean\", \"object\"],\n    allowUndefined: true,\n    trackErrors: true,\n    error,\n    code(cxt) {\n        const { gen, schema, parentSchema, data, errsCount, it } = cxt;\n        /* istanbul ignore if */\n        if (!errsCount)\n            throw new Error(\"ajv implementation error\");\n        const { allErrors, opts } = it;\n        it.props = true;\n        if (opts.removeAdditional !== \"all\" && (0, util_1.alwaysValidSchema)(it, schema))\n            return;\n        const props = (0, code_1.allSchemaProperties)(parentSchema.properties);\n        const patProps = (0, code_1.allSchemaProperties)(parentSchema.patternProperties);\n        checkAdditionalProperties();\n        cxt.ok((0, codegen_1._) `${errsCount} === ${names_1.default.errors}`);\n        function checkAdditionalProperties() {\n            gen.forIn(\"key\", data, (key) => {\n                if (!props.length && !patProps.length)\n                    additionalPropertyCode(key);\n                else\n                    gen.if(isAdditional(key), () => additionalPropertyCode(key));\n            });\n        }\n        function isAdditional(key) {\n            let definedProp;\n            if (props.length > 8) {\n                // TODO maybe an option instead of hard-coded 8?\n                const propsSchema = (0, util_1.schemaRefOrVal)(it, parentSchema.properties, \"properties\");\n                definedProp = (0, code_1.isOwnProperty)(gen, propsSchema, key);\n            }\n            else if (props.length) {\n                definedProp = (0, codegen_1.or)(...props.map((p) => (0, codegen_1._) `${key} === ${p}`));\n            }\n            else {\n                definedProp = codegen_1.nil;\n            }\n            if (patProps.length) {\n                definedProp = (0, codegen_1.or)(definedProp, ...patProps.map((p) => (0, codegen_1._) `${(0, code_1.usePattern)(cxt, p)}.test(${key})`));\n            }\n            return (0, codegen_1.not)(definedProp);\n        }\n        function deleteAdditional(key) {\n            gen.code((0, codegen_1._) `delete ${data}[${key}]`);\n        }\n        function additionalPropertyCode(key) {\n            if (opts.removeAdditional === \"all\" || (opts.removeAdditional && schema === false)) {\n                deleteAdditional(key);\n                return;\n            }\n            if (schema === false) {\n                cxt.setParams({ additionalProperty: key });\n                cxt.error();\n                if (!allErrors)\n                    gen.break();\n                return;\n            }\n            if (typeof schema == \"object\" && !(0, util_1.alwaysValidSchema)(it, schema)) {\n                const valid = gen.name(\"valid\");\n                if (opts.removeAdditional === \"failing\") {\n                    applyAdditionalSchema(key, valid, false);\n                    gen.if((0, codegen_1.not)(valid), () => {\n                        cxt.reset();\n                        deleteAdditional(key);\n                    });\n                }\n                else {\n                    applyAdditionalSchema(key, valid);\n                    if (!allErrors)\n                        gen.if((0, codegen_1.not)(valid), () => gen.break());\n                }\n            }\n        }\n        function applyAdditionalSchema(key, valid, errors) {\n            const subschema = {\n                keyword: \"additionalProperties\",\n                dataProp: key,\n                dataPropType: util_1.Type.Str,\n            };\n            if (errors === false) {\n                Object.assign(subschema, {\n                    compositeRule: true,\n                    createErrors: false,\n                    allErrors: false,\n                });\n            }\n            cxt.subschema(subschema, valid);\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=additionalProperties.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util_1 = require(\"../../compile/util\");\nconst def = {\n    keyword: \"allOf\",\n    schemaType: \"array\",\n    code(cxt) {\n        const { gen, schema, it } = cxt;\n        /* istanbul ignore if */\n        if (!Array.isArray(schema))\n            throw new Error(\"ajv implementation error\");\n        const valid = gen.name(\"valid\");\n        schema.forEach((sch, i) => {\n            if ((0, util_1.alwaysValidSchema)(it, sch))\n                return;\n            const schCxt = cxt.subschema({ keyword: \"allOf\", schemaProp: i }, valid);\n            cxt.ok(valid);\n            cxt.mergeEvaluated(schCxt);\n        });\n    },\n};\nexports.default = def;\n//# sourceMappingURL=allOf.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst def = {\n    keyword: \"anyOf\",\n    schemaType: \"array\",\n    trackErrors: true,\n    code: code_1.validateUnion,\n    error: { message: \"must match a schema in anyOf\" },\n};\nexports.default = def;\n//# sourceMappingURL=anyOf.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params: { min, max } }) => max === undefined\n        ? (0, codegen_1.str) `must contain at least ${min} valid item(s)`\n        : (0, codegen_1.str) `must contain at least ${min} and no more than ${max} valid item(s)`,\n    params: ({ params: { min, max } }) => max === undefined ? (0, codegen_1._) `{minContains: ${min}}` : (0, codegen_1._) `{minContains: ${min}, maxContains: ${max}}`,\n};\nconst def = {\n    keyword: \"contains\",\n    type: \"array\",\n    schemaType: [\"object\", \"boolean\"],\n    before: \"uniqueItems\",\n    trackErrors: true,\n    error,\n    code(cxt) {\n        const { gen, schema, parentSchema, data, it } = cxt;\n        let min;\n        let max;\n        const { minContains, maxContains } = parentSchema;\n        if (it.opts.next) {\n            min = minContains === undefined ? 1 : minContains;\n            max = maxContains;\n        }\n        else {\n            min = 1;\n        }\n        const len = gen.const(\"len\", (0, codegen_1._) `${data}.length`);\n        cxt.setParams({ min, max });\n        if (max === undefined && min === 0) {\n            (0, util_1.checkStrictMode)(it, `\"minContains\" == 0 without \"maxContains\": \"contains\" keyword ignored`);\n            return;\n        }\n        if (max !== undefined && min > max) {\n            (0, util_1.checkStrictMode)(it, `\"minContains\" > \"maxContains\" is always invalid`);\n            cxt.fail();\n            return;\n        }\n        if ((0, util_1.alwaysValidSchema)(it, schema)) {\n            let cond = (0, codegen_1._) `${len} >= ${min}`;\n            if (max !== undefined)\n                cond = (0, codegen_1._) `${cond} && ${len} <= ${max}`;\n            cxt.pass(cond);\n            return;\n        }\n        it.items = true;\n        const valid = gen.name(\"valid\");\n        if (max === undefined && min === 1) {\n            validateItems(valid, () => gen.if(valid, () => gen.break()));\n        }\n        else if (min === 0) {\n            gen.let(valid, true);\n            if (max !== undefined)\n                gen.if((0, codegen_1._) `${data}.length > 0`, validateItemsWithCount);\n        }\n        else {\n            gen.let(valid, false);\n            validateItemsWithCount();\n        }\n        cxt.result(valid, () => cxt.reset());\n        function validateItemsWithCount() {\n            const schValid = gen.name(\"_valid\");\n            const count = gen.let(\"count\", 0);\n            validateItems(schValid, () => gen.if(schValid, () => checkLimits(count)));\n        }\n        function validateItems(_valid, block) {\n            gen.forRange(\"i\", 0, len, (i) => {\n                cxt.subschema({\n                    keyword: \"contains\",\n                    dataProp: i,\n                    dataPropType: util_1.Type.Num,\n                    compositeRule: true,\n                }, _valid);\n                block();\n            });\n        }\n        function checkLimits(count) {\n            gen.code((0, codegen_1._) `${count}++`);\n            if (max === undefined) {\n                gen.if((0, codegen_1._) `${count} >= ${min}`, () => gen.assign(valid, true).break());\n            }\n            else {\n                gen.if((0, codegen_1._) `${count} > ${max}`, () => gen.assign(valid, false).break());\n                if (min === 1)\n                    gen.assign(valid, true);\n                else\n                    gen.if((0, codegen_1._) `${count} >= ${min}`, () => gen.assign(valid, true));\n            }\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=contains.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateSchemaDeps = exports.validatePropertyDeps = exports.error = void 0;\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst code_1 = require(\"../code\");\nexports.error = {\n    message: ({ params: { property, depsCount, deps } }) => {\n        const property_ies = depsCount === 1 ? \"property\" : \"properties\";\n        return (0, codegen_1.str) `must have ${property_ies} ${deps} when property ${property} is present`;\n    },\n    params: ({ params: { property, depsCount, deps, missingProperty } }) => (0, codegen_1._) `{property: ${property},\n    missingProperty: ${missingProperty},\n    depsCount: ${depsCount},\n    deps: ${deps}}`, // TODO change to reference\n};\nconst def = {\n    keyword: \"dependencies\",\n    type: \"object\",\n    schemaType: \"object\",\n    error: exports.error,\n    code(cxt) {\n        const [propDeps, schDeps] = splitDependencies(cxt);\n        validatePropertyDeps(cxt, propDeps);\n        validateSchemaDeps(cxt, schDeps);\n    },\n};\nfunction splitDependencies({ schema }) {\n    const propertyDeps = {};\n    const schemaDeps = {};\n    for (const key in schema) {\n        if (key === \"__proto__\")\n            continue;\n        const deps = Array.isArray(schema[key]) ? propertyDeps : schemaDeps;\n        deps[key] = schema[key];\n    }\n    return [propertyDeps, schemaDeps];\n}\nfunction validatePropertyDeps(cxt, propertyDeps = cxt.schema) {\n    const { gen, data, it } = cxt;\n    if (Object.keys(propertyDeps).length === 0)\n        return;\n    const missing = gen.let(\"missing\");\n    for (const prop in propertyDeps) {\n        const deps = propertyDeps[prop];\n        if (deps.length === 0)\n            continue;\n        const hasProperty = (0, code_1.propertyInData)(gen, data, prop, it.opts.ownProperties);\n        cxt.setParams({\n            property: prop,\n            depsCount: deps.length,\n            deps: deps.join(\", \"),\n        });\n        if (it.allErrors) {\n            gen.if(hasProperty, () => {\n                for (const depProp of deps) {\n                    (0, code_1.checkReportMissingProp)(cxt, depProp);\n                }\n            });\n        }\n        else {\n            gen.if((0, codegen_1._) `${hasProperty} && (${(0, code_1.checkMissingProp)(cxt, deps, missing)})`);\n            (0, code_1.reportMissingProp)(cxt, missing);\n            gen.else();\n        }\n    }\n}\nexports.validatePropertyDeps = validatePropertyDeps;\nfunction validateSchemaDeps(cxt, schemaDeps = cxt.schema) {\n    const { gen, data, keyword, it } = cxt;\n    const valid = gen.name(\"valid\");\n    for (const prop in schemaDeps) {\n        if ((0, util_1.alwaysValidSchema)(it, schemaDeps[prop]))\n            continue;\n        gen.if((0, code_1.propertyInData)(gen, data, prop, it.opts.ownProperties), () => {\n            const schCxt = cxt.subschema({ keyword, schemaProp: prop }, valid);\n            cxt.mergeValidEvaluated(schCxt, valid);\n        }, () => gen.var(valid, true) // TODO var\n        );\n        cxt.ok(valid);\n    }\n}\nexports.validateSchemaDeps = validateSchemaDeps;\nexports.default = def;\n//# sourceMappingURL=dependencies.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params }) => (0, codegen_1.str) `must match \"${params.ifClause}\" schema`,\n    params: ({ params }) => (0, codegen_1._) `{failingKeyword: ${params.ifClause}}`,\n};\nconst def = {\n    keyword: \"if\",\n    schemaType: [\"object\", \"boolean\"],\n    trackErrors: true,\n    error,\n    code(cxt) {\n        const { gen, parentSchema, it } = cxt;\n        if (parentSchema.then === undefined && parentSchema.else === undefined) {\n            (0, util_1.checkStrictMode)(it, '\"if\" without \"then\" and \"else\" is ignored');\n        }\n        const hasThen = hasSchema(it, \"then\");\n        const hasElse = hasSchema(it, \"else\");\n        if (!hasThen && !hasElse)\n            return;\n        const valid = gen.let(\"valid\", true);\n        const schValid = gen.name(\"_valid\");\n        validateIf();\n        cxt.reset();\n        if (hasThen && hasElse) {\n            const ifClause = gen.let(\"ifClause\");\n            cxt.setParams({ ifClause });\n            gen.if(schValid, validateClause(\"then\", ifClause), validateClause(\"else\", ifClause));\n        }\n        else if (hasThen) {\n            gen.if(schValid, validateClause(\"then\"));\n        }\n        else {\n            gen.if((0, codegen_1.not)(schValid), validateClause(\"else\"));\n        }\n        cxt.pass(valid, () => cxt.error(true));\n        function validateIf() {\n            const schCxt = cxt.subschema({\n                keyword: \"if\",\n                compositeRule: true,\n                createErrors: false,\n                allErrors: false,\n            }, schValid);\n            cxt.mergeEvaluated(schCxt);\n        }\n        function validateClause(keyword, ifClause) {\n            return () => {\n                const schCxt = cxt.subschema({ keyword }, schValid);\n                gen.assign(valid, schValid);\n                cxt.mergeValidEvaluated(schCxt, valid);\n                if (ifClause)\n                    gen.assign(ifClause, (0, codegen_1._) `${keyword}`);\n                else\n                    cxt.setParams({ ifClause: keyword });\n            };\n        }\n    },\n};\nfunction hasSchema(it, keyword) {\n    const schema = it.schema[keyword];\n    return schema !== undefined && !(0, util_1.alwaysValidSchema)(it, schema);\n}\nexports.default = def;\n//# sourceMappingURL=if.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst additionalItems_1 = require(\"./additionalItems\");\nconst prefixItems_1 = require(\"./prefixItems\");\nconst items_1 = require(\"./items\");\nconst items2020_1 = require(\"./items2020\");\nconst contains_1 = require(\"./contains\");\nconst dependencies_1 = require(\"./dependencies\");\nconst propertyNames_1 = require(\"./propertyNames\");\nconst additionalProperties_1 = require(\"./additionalProperties\");\nconst properties_1 = require(\"./properties\");\nconst patternProperties_1 = require(\"./patternProperties\");\nconst not_1 = require(\"./not\");\nconst anyOf_1 = require(\"./anyOf\");\nconst oneOf_1 = require(\"./oneOf\");\nconst allOf_1 = require(\"./allOf\");\nconst if_1 = require(\"./if\");\nconst thenElse_1 = require(\"./thenElse\");\nfunction getApplicator(draft2020 = false) {\n    const applicator = [\n        // any\n        not_1.default,\n        anyOf_1.default,\n        oneOf_1.default,\n        allOf_1.default,\n        if_1.default,\n        thenElse_1.default,\n        // object\n        propertyNames_1.default,\n        additionalProperties_1.default,\n        dependencies_1.default,\n        properties_1.default,\n        patternProperties_1.default,\n    ];\n    // array\n    if (draft2020)\n        applicator.push(prefixItems_1.default, items2020_1.default);\n    else\n        applicator.push(additionalItems_1.default, items_1.default);\n    applicator.push(contains_1.default);\n    return applicator;\n}\nexports.default = getApplicator;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateTuple = void 0;\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst code_1 = require(\"../code\");\nconst def = {\n    keyword: \"items\",\n    type: \"array\",\n    schemaType: [\"object\", \"array\", \"boolean\"],\n    before: \"uniqueItems\",\n    code(cxt) {\n        const { schema, it } = cxt;\n        if (Array.isArray(schema))\n            return validateTuple(cxt, \"additionalItems\", schema);\n        it.items = true;\n        if ((0, util_1.alwaysValidSchema)(it, schema))\n            return;\n        cxt.ok((0, code_1.validateArray)(cxt));\n    },\n};\nfunction validateTuple(cxt, extraItems, schArr = cxt.schema) {\n    const { gen, parentSchema, data, keyword, it } = cxt;\n    checkStrictTuple(parentSchema);\n    if (it.opts.unevaluated && schArr.length && it.items !== true) {\n        it.items = util_1.mergeEvaluated.items(gen, schArr.length, it.items);\n    }\n    const valid = gen.name(\"valid\");\n    const len = gen.const(\"len\", (0, codegen_1._) `${data}.length`);\n    schArr.forEach((sch, i) => {\n        if ((0, util_1.alwaysValidSchema)(it, sch))\n            return;\n        gen.if((0, codegen_1._) `${len} > ${i}`, () => cxt.subschema({\n            keyword,\n            schemaProp: i,\n            dataProp: i,\n        }, valid));\n        cxt.ok(valid);\n    });\n    function checkStrictTuple(sch) {\n        const { opts, errSchemaPath } = it;\n        const l = schArr.length;\n        const fullTuple = l === sch.minItems && (l === sch.maxItems || sch[extraItems] === false);\n        if (opts.strictTuples && !fullTuple) {\n            const msg = `\"${keyword}\" is ${l}-tuple, but minItems or maxItems/${extraItems} are not specified or different at path \"${errSchemaPath}\"`;\n            (0, util_1.checkStrictMode)(it, msg, opts.strictTuples);\n        }\n    }\n}\nexports.validateTuple = validateTuple;\nexports.default = def;\n//# sourceMappingURL=items.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst code_1 = require(\"../code\");\nconst additionalItems_1 = require(\"./additionalItems\");\nconst error = {\n    message: ({ params: { len } }) => (0, codegen_1.str) `must NOT have more than ${len} items`,\n    params: ({ params: { len } }) => (0, codegen_1._) `{limit: ${len}}`,\n};\nconst def = {\n    keyword: \"items\",\n    type: \"array\",\n    schemaType: [\"object\", \"boolean\"],\n    before: \"uniqueItems\",\n    error,\n    code(cxt) {\n        const { schema, parentSchema, it } = cxt;\n        const { prefixItems } = parentSchema;\n        it.items = true;\n        if ((0, util_1.alwaysValidSchema)(it, schema))\n            return;\n        if (prefixItems)\n            (0, additionalItems_1.validateAdditionalItems)(cxt, prefixItems);\n        else\n            cxt.ok((0, code_1.validateArray)(cxt));\n    },\n};\nexports.default = def;\n//# sourceMappingURL=items2020.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util_1 = require(\"../../compile/util\");\nconst def = {\n    keyword: \"not\",\n    schemaType: [\"object\", \"boolean\"],\n    trackErrors: true,\n    code(cxt) {\n        const { gen, schema, it } = cxt;\n        if ((0, util_1.alwaysValidSchema)(it, schema)) {\n            cxt.fail();\n            return;\n        }\n        const valid = gen.name(\"valid\");\n        cxt.subschema({\n            keyword: \"not\",\n            compositeRule: true,\n            createErrors: false,\n            allErrors: false,\n        }, valid);\n        cxt.failResult(valid, () => cxt.reset(), () => cxt.error());\n    },\n    error: { message: \"must NOT be valid\" },\n};\nexports.default = def;\n//# sourceMappingURL=not.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: \"must match exactly one schema in oneOf\",\n    params: ({ params }) => (0, codegen_1._) `{passingSchemas: ${params.passing}}`,\n};\nconst def = {\n    keyword: \"oneOf\",\n    schemaType: \"array\",\n    trackErrors: true,\n    error,\n    code(cxt) {\n        const { gen, schema, parentSchema, it } = cxt;\n        /* istanbul ignore if */\n        if (!Array.isArray(schema))\n            throw new Error(\"ajv implementation error\");\n        if (it.opts.discriminator && parentSchema.discriminator)\n            return;\n        const schArr = schema;\n        const valid = gen.let(\"valid\", false);\n        const passing = gen.let(\"passing\", null);\n        const schValid = gen.name(\"_valid\");\n        cxt.setParams({ passing });\n        // TODO possibly fail straight away (with warning or exception) if there are two empty always valid schemas\n        gen.block(validateOneOf);\n        cxt.result(valid, () => cxt.reset(), () => cxt.error(true));\n        function validateOneOf() {\n            schArr.forEach((sch, i) => {\n                let schCxt;\n                if ((0, util_1.alwaysValidSchema)(it, sch)) {\n                    gen.var(schValid, true);\n                }\n                else {\n                    schCxt = cxt.subschema({\n                        keyword: \"oneOf\",\n                        schemaProp: i,\n                        compositeRule: true,\n                    }, schValid);\n                }\n                if (i > 0) {\n                    gen\n                        .if((0, codegen_1._) `${schValid} && ${valid}`)\n                        .assign(valid, false)\n                        .assign(passing, (0, codegen_1._) `[${passing}, ${i}]`)\n                        .else();\n                }\n                gen.if(schValid, () => {\n                    gen.assign(valid, true);\n                    gen.assign(passing, i);\n                    if (schCxt)\n                        cxt.mergeEvaluated(schCxt, codegen_1.Name);\n                });\n            });\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=oneOf.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst util_2 = require(\"../../compile/util\");\nconst def = {\n    keyword: \"patternProperties\",\n    type: \"object\",\n    schemaType: \"object\",\n    code(cxt) {\n        const { gen, schema, data, parentSchema, it } = cxt;\n        const { opts } = it;\n        const patterns = (0, code_1.allSchemaProperties)(schema);\n        const alwaysValidPatterns = patterns.filter((p) => (0, util_1.alwaysValidSchema)(it, schema[p]));\n        if (patterns.length === 0 ||\n            (alwaysValidPatterns.length === patterns.length &&\n                (!it.opts.unevaluated || it.props === true))) {\n            return;\n        }\n        const checkProperties = opts.strictSchema && !opts.allowMatchingProperties && parentSchema.properties;\n        const valid = gen.name(\"valid\");\n        if (it.props !== true && !(it.props instanceof codegen_1.Name)) {\n            it.props = (0, util_2.evaluatedPropsToName)(gen, it.props);\n        }\n        const { props } = it;\n        validatePatternProperties();\n        function validatePatternProperties() {\n            for (const pat of patterns) {\n                if (checkProperties)\n                    checkMatchingProperties(pat);\n                if (it.allErrors) {\n                    validateProperties(pat);\n                }\n                else {\n                    gen.var(valid, true); // TODO var\n                    validateProperties(pat);\n                    gen.if(valid);\n                }\n            }\n        }\n        function checkMatchingProperties(pat) {\n            for (const prop in checkProperties) {\n                if (new RegExp(pat).test(prop)) {\n                    (0, util_1.checkStrictMode)(it, `property ${prop} matches pattern ${pat} (use allowMatchingProperties)`);\n                }\n            }\n        }\n        function validateProperties(pat) {\n            gen.forIn(\"key\", data, (key) => {\n                gen.if((0, codegen_1._) `${(0, code_1.usePattern)(cxt, pat)}.test(${key})`, () => {\n                    const alwaysValid = alwaysValidPatterns.includes(pat);\n                    if (!alwaysValid) {\n                        cxt.subschema({\n                            keyword: \"patternProperties\",\n                            schemaProp: pat,\n                            dataProp: key,\n                            dataPropType: util_2.Type.Str,\n                        }, valid);\n                    }\n                    if (it.opts.unevaluated && props !== true) {\n                        gen.assign((0, codegen_1._) `${props}[${key}]`, true);\n                    }\n                    else if (!alwaysValid && !it.allErrors) {\n                        // can short-circuit if `unevaluatedProperties` is not supported (opts.next === false)\n                        // or if all properties were evaluated (props === true)\n                        gen.if((0, codegen_1.not)(valid), () => gen.break());\n                    }\n                });\n            });\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=patternProperties.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst items_1 = require(\"./items\");\nconst def = {\n    keyword: \"prefixItems\",\n    type: \"array\",\n    schemaType: [\"array\"],\n    before: \"uniqueItems\",\n    code: (cxt) => (0, items_1.validateTuple)(cxt, \"items\"),\n};\nexports.default = def;\n//# sourceMappingURL=prefixItems.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst validate_1 = require(\"../../compile/validate\");\nconst code_1 = require(\"../code\");\nconst util_1 = require(\"../../compile/util\");\nconst additionalProperties_1 = require(\"./additionalProperties\");\nconst def = {\n    keyword: \"properties\",\n    type: \"object\",\n    schemaType: \"object\",\n    code(cxt) {\n        const { gen, schema, parentSchema, data, it } = cxt;\n        if (it.opts.removeAdditional === \"all\" && parentSchema.additionalProperties === undefined) {\n            additionalProperties_1.default.code(new validate_1.KeywordCxt(it, additionalProperties_1.default, \"additionalProperties\"));\n        }\n        const allProps = (0, code_1.allSchemaProperties)(schema);\n        for (const prop of allProps) {\n            it.definedProperties.add(prop);\n        }\n        if (it.opts.unevaluated && allProps.length && it.props !== true) {\n            it.props = util_1.mergeEvaluated.props(gen, (0, util_1.toHash)(allProps), it.props);\n        }\n        const properties = allProps.filter((p) => !(0, util_1.alwaysValidSchema)(it, schema[p]));\n        if (properties.length === 0)\n            return;\n        const valid = gen.name(\"valid\");\n        for (const prop of properties) {\n            if (hasDefault(prop)) {\n                applyPropertySchema(prop);\n            }\n            else {\n                gen.if((0, code_1.propertyInData)(gen, data, prop, it.opts.ownProperties));\n                applyPropertySchema(prop);\n                if (!it.allErrors)\n                    gen.else().var(valid, true);\n                gen.endIf();\n            }\n            cxt.it.definedProperties.add(prop);\n            cxt.ok(valid);\n        }\n        function hasDefault(prop) {\n            return it.opts.useDefaults && !it.compositeRule && schema[prop].default !== undefined;\n        }\n        function applyPropertySchema(prop) {\n            cxt.subschema({\n                keyword: \"properties\",\n                schemaProp: prop,\n                dataProp: prop,\n            }, valid);\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=properties.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: \"property name must be valid\",\n    params: ({ params }) => (0, codegen_1._) `{propertyName: ${params.propertyName}}`,\n};\nconst def = {\n    keyword: \"propertyNames\",\n    type: \"object\",\n    schemaType: [\"object\", \"boolean\"],\n    error,\n    code(cxt) {\n        const { gen, schema, data, it } = cxt;\n        if ((0, util_1.alwaysValidSchema)(it, schema))\n            return;\n        const valid = gen.name(\"valid\");\n        gen.forIn(\"key\", data, (key) => {\n            cxt.setParams({ propertyName: key });\n            cxt.subschema({\n                keyword: \"propertyNames\",\n                data: key,\n                dataTypes: [\"string\"],\n                propertyName: key,\n                compositeRule: true,\n            }, valid);\n            gen.if((0, codegen_1.not)(valid), () => {\n                cxt.error(true);\n                if (!it.allErrors)\n                    gen.break();\n            });\n        });\n        cxt.ok(valid);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=propertyNames.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util_1 = require(\"../../compile/util\");\nconst def = {\n    keyword: [\"then\", \"else\"],\n    schemaType: [\"object\", \"boolean\"],\n    code({ keyword, parentSchema, it }) {\n        if (parentSchema.if === undefined)\n            (0, util_1.checkStrictMode)(it, `\"${keyword}\" without \"if\" is ignored`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=thenElse.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateUnion = exports.validateArray = exports.usePattern = exports.callValidateCode = exports.schemaProperties = exports.allSchemaProperties = exports.noPropertyInData = exports.propertyInData = exports.isOwnProperty = exports.hasPropFunc = exports.reportMissingProp = exports.checkMissingProp = exports.checkReportMissingProp = void 0;\nconst codegen_1 = require(\"../compile/codegen\");\nconst util_1 = require(\"../compile/util\");\nconst names_1 = require(\"../compile/names\");\nconst util_2 = require(\"../compile/util\");\nfunction checkReportMissingProp(cxt, prop) {\n    const { gen, data, it } = cxt;\n    gen.if(noPropertyInData(gen, data, prop, it.opts.ownProperties), () => {\n        cxt.setParams({ missingProperty: (0, codegen_1._) `${prop}` }, true);\n        cxt.error();\n    });\n}\nexports.checkReportMissingProp = checkReportMissingProp;\nfunction checkMissingProp({ gen, data, it: { opts } }, properties, missing) {\n    return (0, codegen_1.or)(...properties.map((prop) => (0, codegen_1.and)(noPropertyInData(gen, data, prop, opts.ownProperties), (0, codegen_1._) `${missing} = ${prop}`)));\n}\nexports.checkMissingProp = checkMissingProp;\nfunction reportMissingProp(cxt, missing) {\n    cxt.setParams({ missingProperty: missing }, true);\n    cxt.error();\n}\nexports.reportMissingProp = reportMissingProp;\nfunction hasPropFunc(gen) {\n    return gen.scopeValue(\"func\", {\n        // eslint-disable-next-line @typescript-eslint/unbound-method\n        ref: Object.prototype.hasOwnProperty,\n        code: (0, codegen_1._) `Object.prototype.hasOwnProperty`,\n    });\n}\nexports.hasPropFunc = hasPropFunc;\nfunction isOwnProperty(gen, data, property) {\n    return (0, codegen_1._) `${hasPropFunc(gen)}.call(${data}, ${property})`;\n}\nexports.isOwnProperty = isOwnProperty;\nfunction propertyInData(gen, data, property, ownProperties) {\n    const cond = (0, codegen_1._) `${data}${(0, codegen_1.getProperty)(property)} !== undefined`;\n    return ownProperties ? (0, codegen_1._) `${cond} && ${isOwnProperty(gen, data, property)}` : cond;\n}\nexports.propertyInData = propertyInData;\nfunction noPropertyInData(gen, data, property, ownProperties) {\n    const cond = (0, codegen_1._) `${data}${(0, codegen_1.getProperty)(property)} === undefined`;\n    return ownProperties ? (0, codegen_1.or)(cond, (0, codegen_1.not)(isOwnProperty(gen, data, property))) : cond;\n}\nexports.noPropertyInData = noPropertyInData;\nfunction allSchemaProperties(schemaMap) {\n    return schemaMap ? Object.keys(schemaMap).filter((p) => p !== \"__proto__\") : [];\n}\nexports.allSchemaProperties = allSchemaProperties;\nfunction schemaProperties(it, schemaMap) {\n    return allSchemaProperties(schemaMap).filter((p) => !(0, util_1.alwaysValidSchema)(it, schemaMap[p]));\n}\nexports.schemaProperties = schemaProperties;\nfunction callValidateCode({ schemaCode, data, it: { gen, topSchemaRef, schemaPath, errorPath }, it }, func, context, passSchema) {\n    const dataAndSchema = passSchema ? (0, codegen_1._) `${schemaCode}, ${data}, ${topSchemaRef}${schemaPath}` : data;\n    const valCxt = [\n        [names_1.default.instancePath, (0, codegen_1.strConcat)(names_1.default.instancePath, errorPath)],\n        [names_1.default.parentData, it.parentData],\n        [names_1.default.parentDataProperty, it.parentDataProperty],\n        [names_1.default.rootData, names_1.default.rootData],\n    ];\n    if (it.opts.dynamicRef)\n        valCxt.push([names_1.default.dynamicAnchors, names_1.default.dynamicAnchors]);\n    const args = (0, codegen_1._) `${dataAndSchema}, ${gen.object(...valCxt)}`;\n    return context !== codegen_1.nil ? (0, codegen_1._) `${func}.call(${context}, ${args})` : (0, codegen_1._) `${func}(${args})`;\n}\nexports.callValidateCode = callValidateCode;\nconst newRegExp = (0, codegen_1._) `new RegExp`;\nfunction usePattern({ gen, it: { opts } }, pattern) {\n    const u = opts.unicodeRegExp ? \"u\" : \"\";\n    const { regExp } = opts.code;\n    const rx = regExp(pattern, u);\n    return gen.scopeValue(\"pattern\", {\n        key: rx.toString(),\n        ref: rx,\n        code: (0, codegen_1._) `${regExp.code === \"new RegExp\" ? newRegExp : (0, util_2.useFunc)(gen, regExp)}(${pattern}, ${u})`,\n    });\n}\nexports.usePattern = usePattern;\nfunction validateArray(cxt) {\n    const { gen, data, keyword, it } = cxt;\n    const valid = gen.name(\"valid\");\n    if (it.allErrors) {\n        const validArr = gen.let(\"valid\", true);\n        validateItems(() => gen.assign(validArr, false));\n        return validArr;\n    }\n    gen.var(valid, true);\n    validateItems(() => gen.break());\n    return valid;\n    function validateItems(notValid) {\n        const len = gen.const(\"len\", (0, codegen_1._) `${data}.length`);\n        gen.forRange(\"i\", 0, len, (i) => {\n            cxt.subschema({\n                keyword,\n                dataProp: i,\n                dataPropType: util_1.Type.Num,\n            }, valid);\n            gen.if((0, codegen_1.not)(valid), notValid);\n        });\n    }\n}\nexports.validateArray = validateArray;\nfunction validateUnion(cxt) {\n    const { gen, schema, keyword, it } = cxt;\n    /* istanbul ignore if */\n    if (!Array.isArray(schema))\n        throw new Error(\"ajv implementation error\");\n    const alwaysValid = schema.some((sch) => (0, util_1.alwaysValidSchema)(it, sch));\n    if (alwaysValid && !it.opts.unevaluated)\n        return;\n    const valid = gen.let(\"valid\", false);\n    const schValid = gen.name(\"_valid\");\n    gen.block(() => schema.forEach((_sch, i) => {\n        const schCxt = cxt.subschema({\n            keyword,\n            schemaProp: i,\n            compositeRule: true,\n        }, schValid);\n        gen.assign(valid, (0, codegen_1._) `${valid} || ${schValid}`);\n        const merged = cxt.mergeValidEvaluated(schCxt, schValid);\n        // can short-circuit if `unevaluatedProperties/Items` not supported (opts.unevaluated !== true)\n        // or if all properties and items were evaluated (it.props === true && it.items === true)\n        if (!merged)\n            gen.if((0, codegen_1.not)(valid));\n    }));\n    cxt.result(valid, () => cxt.reset(), () => cxt.error(true));\n}\nexports.validateUnion = validateUnion;\n//# sourceMappingURL=code.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst def = {\n    keyword: \"id\",\n    code() {\n        throw new Error('NOT SUPPORTED: keyword \"id\", use \"$id\" for schema ID');\n    },\n};\nexports.default = def;\n//# sourceMappingURL=id.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst id_1 = require(\"./id\");\nconst ref_1 = require(\"./ref\");\nconst core = [\n    \"$schema\",\n    \"$id\",\n    \"$defs\",\n    \"$vocabulary\",\n    { keyword: \"$comment\" },\n    \"definitions\",\n    id_1.default,\n    ref_1.default,\n];\nexports.default = core;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.callRef = exports.getValidate = void 0;\nconst ref_error_1 = require(\"../../compile/ref_error\");\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst names_1 = require(\"../../compile/names\");\nconst compile_1 = require(\"../../compile\");\nconst util_1 = require(\"../../compile/util\");\nconst def = {\n    keyword: \"$ref\",\n    schemaType: \"string\",\n    code(cxt) {\n        const { gen, schema: $ref, it } = cxt;\n        const { baseId, schemaEnv: env, validateName, opts, self } = it;\n        const { root } = env;\n        if (($ref === \"#\" || $ref === \"#/\") && baseId === root.baseId)\n            return callRootRef();\n        const schOrEnv = compile_1.resolveRef.call(self, root, baseId, $ref);\n        if (schOrEnv === undefined)\n            throw new ref_error_1.default(it.opts.uriResolver, baseId, $ref);\n        if (schOrEnv instanceof compile_1.SchemaEnv)\n            return callValidate(schOrEnv);\n        return inlineRefSchema(schOrEnv);\n        function callRootRef() {\n            if (env === root)\n                return callRef(cxt, validateName, env, env.$async);\n            const rootName = gen.scopeValue(\"root\", { ref: root });\n            return callRef(cxt, (0, codegen_1._) `${rootName}.validate`, root, root.$async);\n        }\n        function callValidate(sch) {\n            const v = getValidate(cxt, sch);\n            callRef(cxt, v, sch, sch.$async);\n        }\n        function inlineRefSchema(sch) {\n            const schName = gen.scopeValue(\"schema\", opts.code.source === true ? { ref: sch, code: (0, codegen_1.stringify)(sch) } : { ref: sch });\n            const valid = gen.name(\"valid\");\n            const schCxt = cxt.subschema({\n                schema: sch,\n                dataTypes: [],\n                schemaPath: codegen_1.nil,\n                topSchemaRef: schName,\n                errSchemaPath: $ref,\n            }, valid);\n            cxt.mergeEvaluated(schCxt);\n            cxt.ok(valid);\n        }\n    },\n};\nfunction getValidate(cxt, sch) {\n    const { gen } = cxt;\n    return sch.validate\n        ? gen.scopeValue(\"validate\", { ref: sch.validate })\n        : (0, codegen_1._) `${gen.scopeValue(\"wrapper\", { ref: sch })}.validate`;\n}\nexports.getValidate = getValidate;\nfunction callRef(cxt, v, sch, $async) {\n    const { gen, it } = cxt;\n    const { allErrors, schemaEnv: env, opts } = it;\n    const passCxt = opts.passContext ? names_1.default.this : codegen_1.nil;\n    if ($async)\n        callAsyncRef();\n    else\n        callSyncRef();\n    function callAsyncRef() {\n        if (!env.$async)\n            throw new Error(\"async schema referenced by sync schema\");\n        const valid = gen.let(\"valid\");\n        gen.try(() => {\n            gen.code((0, codegen_1._) `await ${(0, code_1.callValidateCode)(cxt, v, passCxt)}`);\n            addEvaluatedFrom(v); // TODO will not work with async, it has to be returned with the result\n            if (!allErrors)\n                gen.assign(valid, true);\n        }, (e) => {\n            gen.if((0, codegen_1._) `!(${e} instanceof ${it.ValidationError})`, () => gen.throw(e));\n            addErrorsFrom(e);\n            if (!allErrors)\n                gen.assign(valid, false);\n        });\n        cxt.ok(valid);\n    }\n    function callSyncRef() {\n        cxt.result((0, code_1.callValidateCode)(cxt, v, passCxt), () => addEvaluatedFrom(v), () => addErrorsFrom(v));\n    }\n    function addErrorsFrom(source) {\n        const errs = (0, codegen_1._) `${source}.errors`;\n        gen.assign(names_1.default.vErrors, (0, codegen_1._) `${names_1.default.vErrors} === null ? ${errs} : ${names_1.default.vErrors}.concat(${errs})`); // TODO tagged\n        gen.assign(names_1.default.errors, (0, codegen_1._) `${names_1.default.vErrors}.length`);\n    }\n    function addEvaluatedFrom(source) {\n        var _a;\n        if (!it.opts.unevaluated)\n            return;\n        const schEvaluated = (_a = sch === null || sch === void 0 ? void 0 : sch.validate) === null || _a === void 0 ? void 0 : _a.evaluated;\n        // TODO refactor\n        if (it.props !== true) {\n            if (schEvaluated && !schEvaluated.dynamicProps) {\n                if (schEvaluated.props !== undefined) {\n                    it.props = util_1.mergeEvaluated.props(gen, schEvaluated.props, it.props);\n                }\n            }\n            else {\n                const props = gen.var(\"props\", (0, codegen_1._) `${source}.evaluated.props`);\n                it.props = util_1.mergeEvaluated.props(gen, props, it.props, codegen_1.Name);\n            }\n        }\n        if (it.items !== true) {\n            if (schEvaluated && !schEvaluated.dynamicItems) {\n                if (schEvaluated.items !== undefined) {\n                    it.items = util_1.mergeEvaluated.items(gen, schEvaluated.items, it.items);\n                }\n            }\n            else {\n                const items = gen.var(\"items\", (0, codegen_1._) `${source}.evaluated.items`);\n                it.items = util_1.mergeEvaluated.items(gen, items, it.items, codegen_1.Name);\n            }\n        }\n    }\n}\nexports.callRef = callRef;\nexports.default = def;\n//# sourceMappingURL=ref.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst types_1 = require(\"../discriminator/types\");\nconst compile_1 = require(\"../../compile\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params: { discrError, tagName } }) => discrError === types_1.DiscrError.Tag\n        ? `tag \"${tagName}\" must be string`\n        : `value of tag \"${tagName}\" must be in oneOf`,\n    params: ({ params: { discrError, tag, tagName } }) => (0, codegen_1._) `{error: ${discrError}, tag: ${tagName}, tagValue: ${tag}}`,\n};\nconst def = {\n    keyword: \"discriminator\",\n    type: \"object\",\n    schemaType: \"object\",\n    error,\n    code(cxt) {\n        const { gen, data, schema, parentSchema, it } = cxt;\n        const { oneOf } = parentSchema;\n        if (!it.opts.discriminator) {\n            throw new Error(\"discriminator: requires discriminator option\");\n        }\n        const tagName = schema.propertyName;\n        if (typeof tagName != \"string\")\n            throw new Error(\"discriminator: requires propertyName\");\n        if (schema.mapping)\n            throw new Error(\"discriminator: mapping is not supported\");\n        if (!oneOf)\n            throw new Error(\"discriminator: requires oneOf keyword\");\n        const valid = gen.let(\"valid\", false);\n        const tag = gen.const(\"tag\", (0, codegen_1._) `${data}${(0, codegen_1.getProperty)(tagName)}`);\n        gen.if((0, codegen_1._) `typeof ${tag} == \"string\"`, () => validateMapping(), () => cxt.error(false, { discrError: types_1.DiscrError.Tag, tag, tagName }));\n        cxt.ok(valid);\n        function validateMapping() {\n            const mapping = getMapping();\n            gen.if(false);\n            for (const tagValue in mapping) {\n                gen.elseIf((0, codegen_1._) `${tag} === ${tagValue}`);\n                gen.assign(valid, applyTagSchema(mapping[tagValue]));\n            }\n            gen.else();\n            cxt.error(false, { discrError: types_1.DiscrError.Mapping, tag, tagName });\n            gen.endIf();\n        }\n        function applyTagSchema(schemaProp) {\n            const _valid = gen.name(\"valid\");\n            const schCxt = cxt.subschema({ keyword: \"oneOf\", schemaProp }, _valid);\n            cxt.mergeEvaluated(schCxt, codegen_1.Name);\n            return _valid;\n        }\n        function getMapping() {\n            var _a;\n            const oneOfMapping = {};\n            const topRequired = hasRequired(parentSchema);\n            let tagRequired = true;\n            for (let i = 0; i < oneOf.length; i++) {\n                let sch = oneOf[i];\n                if ((sch === null || sch === void 0 ? void 0 : sch.$ref) && !(0, util_1.schemaHasRulesButRef)(sch, it.self.RULES)) {\n                    sch = compile_1.resolveRef.call(it.self, it.schemaEnv.root, it.baseId, sch === null || sch === void 0 ? void 0 : sch.$ref);\n                    if (sch instanceof compile_1.SchemaEnv)\n                        sch = sch.schema;\n                }\n                const propSch = (_a = sch === null || sch === void 0 ? void 0 : sch.properties) === null || _a === void 0 ? void 0 : _a[tagName];\n                if (typeof propSch != \"object\") {\n                    throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have \"properties/${tagName}\"`);\n                }\n                tagRequired = tagRequired && (topRequired || hasRequired(sch));\n                addMappings(propSch, i);\n            }\n            if (!tagRequired)\n                throw new Error(`discriminator: \"${tagName}\" must be required`);\n            return oneOfMapping;\n            function hasRequired({ required }) {\n                return Array.isArray(required) && required.includes(tagName);\n            }\n            function addMappings(sch, i) {\n                if (sch.const) {\n                    addMapping(sch.const, i);\n                }\n                else if (sch.enum) {\n                    for (const tagValue of sch.enum) {\n                        addMapping(tagValue, i);\n                    }\n                }\n                else {\n                    throw new Error(`discriminator: \"properties/${tagName}\" must have \"const\" or \"enum\"`);\n                }\n            }\n            function addMapping(tagValue, i) {\n                if (typeof tagValue != \"string\" || tagValue in oneOfMapping) {\n                    throw new Error(`discriminator: \"${tagName}\" values must be unique strings`);\n                }\n                oneOfMapping[tagValue] = i;\n            }\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DiscrError = void 0;\nvar DiscrError;\n(function (DiscrError) {\n    DiscrError[\"Tag\"] = \"tag\";\n    DiscrError[\"Mapping\"] = \"mapping\";\n})(DiscrError = exports.DiscrError || (exports.DiscrError = {}));\n//# sourceMappingURL=types.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst core_1 = require(\"./core\");\nconst validation_1 = require(\"./validation\");\nconst applicator_1 = require(\"./applicator\");\nconst format_1 = require(\"./format\");\nconst metadata_1 = require(\"./metadata\");\nconst draft7Vocabularies = [\n    core_1.default,\n    validation_1.default,\n    (0, applicator_1.default)(),\n    format_1.default,\n    metadata_1.metadataVocabulary,\n    metadata_1.contentVocabulary,\n];\nexports.default = draft7Vocabularies;\n//# sourceMappingURL=draft7.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message: ({ schemaCode }) => (0, codegen_1.str) `must match format \"${schemaCode}\"`,\n    params: ({ schemaCode }) => (0, codegen_1._) `{format: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"format\",\n    type: [\"number\", \"string\"],\n    schemaType: \"string\",\n    $data: true,\n    error,\n    code(cxt, ruleType) {\n        const { gen, data, $data, schema, schemaCode, it } = cxt;\n        const { opts, errSchemaPath, schemaEnv, self } = it;\n        if (!opts.validateFormats)\n            return;\n        if ($data)\n            validate$DataFormat();\n        else\n            validateFormat();\n        function validate$DataFormat() {\n            const fmts = gen.scopeValue(\"formats\", {\n                ref: self.formats,\n                code: opts.code.formats,\n            });\n            const fDef = gen.const(\"fDef\", (0, codegen_1._) `${fmts}[${schemaCode}]`);\n            const fType = gen.let(\"fType\");\n            const format = gen.let(\"format\");\n            // TODO simplify\n            gen.if((0, codegen_1._) `typeof ${fDef} == \"object\" && !(${fDef} instanceof RegExp)`, () => gen.assign(fType, (0, codegen_1._) `${fDef}.type || \"string\"`).assign(format, (0, codegen_1._) `${fDef}.validate`), () => gen.assign(fType, (0, codegen_1._) `\"string\"`).assign(format, fDef));\n            cxt.fail$data((0, codegen_1.or)(unknownFmt(), invalidFmt()));\n            function unknownFmt() {\n                if (opts.strictSchema === false)\n                    return codegen_1.nil;\n                return (0, codegen_1._) `${schemaCode} && !${format}`;\n            }\n            function invalidFmt() {\n                const callFormat = schemaEnv.$async\n                    ? (0, codegen_1._) `(${fDef}.async ? await ${format}(${data}) : ${format}(${data}))`\n                    : (0, codegen_1._) `${format}(${data})`;\n                const validData = (0, codegen_1._) `(typeof ${format} == \"function\" ? ${callFormat} : ${format}.test(${data}))`;\n                return (0, codegen_1._) `${format} && ${format} !== true && ${fType} === ${ruleType} && !${validData}`;\n            }\n        }\n        function validateFormat() {\n            const formatDef = self.formats[schema];\n            if (!formatDef) {\n                unknownFormat();\n                return;\n            }\n            if (formatDef === true)\n                return;\n            const [fmtType, format, fmtRef] = getFormat(formatDef);\n            if (fmtType === ruleType)\n                cxt.pass(validCondition());\n            function unknownFormat() {\n                if (opts.strictSchema === false) {\n                    self.logger.warn(unknownMsg());\n                    return;\n                }\n                throw new Error(unknownMsg());\n                function unknownMsg() {\n                    return `unknown format \"${schema}\" ignored in schema at path \"${errSchemaPath}\"`;\n                }\n            }\n            function getFormat(fmtDef) {\n                const code = fmtDef instanceof RegExp\n                    ? (0, codegen_1.regexpCode)(fmtDef)\n                    : opts.code.formats\n                        ? (0, codegen_1._) `${opts.code.formats}${(0, codegen_1.getProperty)(schema)}`\n                        : undefined;\n                const fmt = gen.scopeValue(\"formats\", { key: schema, ref: fmtDef, code });\n                if (typeof fmtDef == \"object\" && !(fmtDef instanceof RegExp)) {\n                    return [fmtDef.type || \"string\", fmtDef.validate, (0, codegen_1._) `${fmt}.validate`];\n                }\n                return [\"string\", fmtDef, fmt];\n            }\n            function validCondition() {\n                if (typeof formatDef == \"object\" && !(formatDef instanceof RegExp) && formatDef.async) {\n                    if (!schemaEnv.$async)\n                        throw new Error(\"async format in sync schema\");\n                    return (0, codegen_1._) `await ${fmtRef}(${data})`;\n                }\n                return typeof format == \"function\" ? (0, codegen_1._) `${fmtRef}(${data})` : (0, codegen_1._) `${fmtRef}.test(${data})`;\n            }\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=format.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst format_1 = require(\"./format\");\nconst format = [format_1.default];\nexports.default = format;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.contentVocabulary = exports.metadataVocabulary = void 0;\nexports.metadataVocabulary = [\n    \"title\",\n    \"description\",\n    \"default\",\n    \"deprecated\",\n    \"readOnly\",\n    \"writeOnly\",\n    \"examples\",\n];\nexports.contentVocabulary = [\n    \"contentMediaType\",\n    \"contentEncoding\",\n    \"contentSchema\",\n];\n//# sourceMappingURL=metadata.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst equal_1 = require(\"../../runtime/equal\");\nconst error = {\n    message: \"must be equal to constant\",\n    params: ({ schemaCode }) => (0, codegen_1._) `{allowedValue: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"const\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, data, $data, schemaCode, schema } = cxt;\n        if ($data || (schema && typeof schema == \"object\")) {\n            cxt.fail$data((0, codegen_1._) `!${(0, util_1.useFunc)(gen, equal_1.default)}(${data}, ${schemaCode})`);\n        }\n        else {\n            cxt.fail((0, codegen_1._) `${schema} !== ${data}`);\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=const.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst equal_1 = require(\"../../runtime/equal\");\nconst error = {\n    message: \"must be equal to one of the allowed values\",\n    params: ({ schemaCode }) => (0, codegen_1._) `{allowedValues: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"enum\",\n    schemaType: \"array\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, data, $data, schema, schemaCode, it } = cxt;\n        if (!$data && schema.length === 0)\n            throw new Error(\"enum must have non-empty array\");\n        const useLoop = schema.length >= it.opts.loopEnum;\n        let eql;\n        const getEql = () => (eql !== null && eql !== void 0 ? eql : (eql = (0, util_1.useFunc)(gen, equal_1.default)));\n        let valid;\n        if (useLoop || $data) {\n            valid = gen.let(\"valid\");\n            cxt.block$data(valid, loopEnum);\n        }\n        else {\n            /* istanbul ignore if */\n            if (!Array.isArray(schema))\n                throw new Error(\"ajv implementation error\");\n            const vSchema = gen.const(\"vSchema\", schemaCode);\n            valid = (0, codegen_1.or)(...schema.map((_x, i) => equalCode(vSchema, i)));\n        }\n        cxt.pass(valid);\n        function loopEnum() {\n            gen.assign(valid, false);\n            gen.forOf(\"v\", schemaCode, (v) => gen.if((0, codegen_1._) `${getEql()}(${data}, ${v})`, () => gen.assign(valid, true).break()));\n        }\n        function equalCode(vSchema, i) {\n            const sch = schema[i];\n            return typeof sch === \"object\" && sch !== null\n                ? (0, codegen_1._) `${getEql()}(${data}, ${vSchema}[${i}])`\n                : (0, codegen_1._) `${data} === ${sch}`;\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=enum.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst limitNumber_1 = require(\"./limitNumber\");\nconst multipleOf_1 = require(\"./multipleOf\");\nconst limitLength_1 = require(\"./limitLength\");\nconst pattern_1 = require(\"./pattern\");\nconst limitProperties_1 = require(\"./limitProperties\");\nconst required_1 = require(\"./required\");\nconst limitItems_1 = require(\"./limitItems\");\nconst uniqueItems_1 = require(\"./uniqueItems\");\nconst const_1 = require(\"./const\");\nconst enum_1 = require(\"./enum\");\nconst validation = [\n    // number\n    limitNumber_1.default,\n    multipleOf_1.default,\n    // string\n    limitLength_1.default,\n    pattern_1.default,\n    // object\n    limitProperties_1.default,\n    required_1.default,\n    // array\n    limitItems_1.default,\n    uniqueItems_1.default,\n    // any\n    { keyword: \"type\", schemaType: [\"string\", \"array\"] },\n    { keyword: \"nullable\", schemaType: \"boolean\" },\n    const_1.default,\n    enum_1.default,\n];\nexports.default = validation;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message({ keyword, schemaCode }) {\n        const comp = keyword === \"maxItems\" ? \"more\" : \"fewer\";\n        return (0, codegen_1.str) `must NOT have ${comp} than ${schemaCode} items`;\n    },\n    params: ({ schemaCode }) => (0, codegen_1._) `{limit: ${schemaCode}}`,\n};\nconst def = {\n    keyword: [\"maxItems\", \"minItems\"],\n    type: \"array\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { keyword, data, schemaCode } = cxt;\n        const op = keyword === \"maxItems\" ? codegen_1.operators.GT : codegen_1.operators.LT;\n        cxt.fail$data((0, codegen_1._) `${data}.length ${op} ${schemaCode}`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=limitItems.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst ucs2length_1 = require(\"../../runtime/ucs2length\");\nconst error = {\n    message({ keyword, schemaCode }) {\n        const comp = keyword === \"maxLength\" ? \"more\" : \"fewer\";\n        return (0, codegen_1.str) `must NOT have ${comp} than ${schemaCode} characters`;\n    },\n    params: ({ schemaCode }) => (0, codegen_1._) `{limit: ${schemaCode}}`,\n};\nconst def = {\n    keyword: [\"maxLength\", \"minLength\"],\n    type: \"string\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { keyword, data, schemaCode, it } = cxt;\n        const op = keyword === \"maxLength\" ? codegen_1.operators.GT : codegen_1.operators.LT;\n        const len = it.opts.unicode === false ? (0, codegen_1._) `${data}.length` : (0, codegen_1._) `${(0, util_1.useFunc)(cxt.gen, ucs2length_1.default)}(${data})`;\n        cxt.fail$data((0, codegen_1._) `${len} ${op} ${schemaCode}`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=limitLength.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst ops = codegen_1.operators;\nconst KWDs = {\n    maximum: { okStr: \"<=\", ok: ops.LTE, fail: ops.GT },\n    minimum: { okStr: \">=\", ok: ops.GTE, fail: ops.LT },\n    exclusiveMaximum: { okStr: \"<\", ok: ops.LT, fail: ops.GTE },\n    exclusiveMinimum: { okStr: \">\", ok: ops.GT, fail: ops.LTE },\n};\nconst error = {\n    message: ({ keyword, schemaCode }) => (0, codegen_1.str) `must be ${KWDs[keyword].okStr} ${schemaCode}`,\n    params: ({ keyword, schemaCode }) => (0, codegen_1._) `{comparison: ${KWDs[keyword].okStr}, limit: ${schemaCode}}`,\n};\nconst def = {\n    keyword: Object.keys(KWDs),\n    type: \"number\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { keyword, data, schemaCode } = cxt;\n        cxt.fail$data((0, codegen_1._) `${data} ${KWDs[keyword].fail} ${schemaCode} || isNaN(${data})`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=limitNumber.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message({ keyword, schemaCode }) {\n        const comp = keyword === \"maxProperties\" ? \"more\" : \"fewer\";\n        return (0, codegen_1.str) `must NOT have ${comp} than ${schemaCode} properties`;\n    },\n    params: ({ schemaCode }) => (0, codegen_1._) `{limit: ${schemaCode}}`,\n};\nconst def = {\n    keyword: [\"maxProperties\", \"minProperties\"],\n    type: \"object\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { keyword, data, schemaCode } = cxt;\n        const op = keyword === \"maxProperties\" ? codegen_1.operators.GT : codegen_1.operators.LT;\n        cxt.fail$data((0, codegen_1._) `Object.keys(${data}).length ${op} ${schemaCode}`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=limitProperties.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message: ({ schemaCode }) => (0, codegen_1.str) `must be multiple of ${schemaCode}`,\n    params: ({ schemaCode }) => (0, codegen_1._) `{multipleOf: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"multipleOf\",\n    type: \"number\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, data, schemaCode, it } = cxt;\n        // const bdt = bad$DataType(schemaCode, <string>def.schemaType, $data)\n        const prec = it.opts.multipleOfPrecision;\n        const res = gen.let(\"res\");\n        const invalid = prec\n            ? (0, codegen_1._) `Math.abs(Math.round(${res}) - ${res}) > 1e-${prec}`\n            : (0, codegen_1._) `${res} !== parseInt(${res})`;\n        cxt.fail$data((0, codegen_1._) `(${schemaCode} === 0 || (${res} = ${data}/${schemaCode}, ${invalid}))`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=multipleOf.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message: ({ schemaCode }) => (0, codegen_1.str) `must match pattern \"${schemaCode}\"`,\n    params: ({ schemaCode }) => (0, codegen_1._) `{pattern: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"pattern\",\n    type: \"string\",\n    schemaType: \"string\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { data, $data, schema, schemaCode, it } = cxt;\n        // TODO regexp should be wrapped in try/catchs\n        const u = it.opts.unicodeRegExp ? \"u\" : \"\";\n        const regExp = $data ? (0, codegen_1._) `(new RegExp(${schemaCode}, ${u}))` : (0, code_1.usePattern)(cxt, schema);\n        cxt.fail$data((0, codegen_1._) `!${regExp}.test(${data})`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=pattern.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params: { missingProperty } }) => (0, codegen_1.str) `must have required property '${missingProperty}'`,\n    params: ({ params: { missingProperty } }) => (0, codegen_1._) `{missingProperty: ${missingProperty}}`,\n};\nconst def = {\n    keyword: \"required\",\n    type: \"object\",\n    schemaType: \"array\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, schema, schemaCode, data, $data, it } = cxt;\n        const { opts } = it;\n        if (!$data && schema.length === 0)\n            return;\n        const useLoop = schema.length >= opts.loopRequired;\n        if (it.allErrors)\n            allErrorsMode();\n        else\n            exitOnErrorMode();\n        if (opts.strictRequired) {\n            const props = cxt.parentSchema.properties;\n            const { definedProperties } = cxt.it;\n            for (const requiredKey of schema) {\n                if ((props === null || props === void 0 ? void 0 : props[requiredKey]) === undefined && !definedProperties.has(requiredKey)) {\n                    const schemaPath = it.schemaEnv.baseId + it.errSchemaPath;\n                    const msg = `required property \"${requiredKey}\" is not defined at \"${schemaPath}\" (strictRequired)`;\n                    (0, util_1.checkStrictMode)(it, msg, it.opts.strictRequired);\n                }\n            }\n        }\n        function allErrorsMode() {\n            if (useLoop || $data) {\n                cxt.block$data(codegen_1.nil, loopAllRequired);\n            }\n            else {\n                for (const prop of schema) {\n                    (0, code_1.checkReportMissingProp)(cxt, prop);\n                }\n            }\n        }\n        function exitOnErrorMode() {\n            const missing = gen.let(\"missing\");\n            if (useLoop || $data) {\n                const valid = gen.let(\"valid\", true);\n                cxt.block$data(valid, () => loopUntilMissing(missing, valid));\n                cxt.ok(valid);\n            }\n            else {\n                gen.if((0, code_1.checkMissingProp)(cxt, schema, missing));\n                (0, code_1.reportMissingProp)(cxt, missing);\n                gen.else();\n            }\n        }\n        function loopAllRequired() {\n            gen.forOf(\"prop\", schemaCode, (prop) => {\n                cxt.setParams({ missingProperty: prop });\n                gen.if((0, code_1.noPropertyInData)(gen, data, prop, opts.ownProperties), () => cxt.error());\n            });\n        }\n        function loopUntilMissing(missing, valid) {\n            cxt.setParams({ missingProperty: missing });\n            gen.forOf(missing, schemaCode, () => {\n                gen.assign(valid, (0, code_1.propertyInData)(gen, data, missing, opts.ownProperties));\n                gen.if((0, codegen_1.not)(valid), () => {\n                    cxt.error();\n                    gen.break();\n                });\n            }, codegen_1.nil);\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=required.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst dataType_1 = require(\"../../compile/validate/dataType\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst equal_1 = require(\"../../runtime/equal\");\nconst error = {\n    message: ({ params: { i, j } }) => (0, codegen_1.str) `must NOT have duplicate items (items ## ${j} and ${i} are identical)`,\n    params: ({ params: { i, j } }) => (0, codegen_1._) `{i: ${i}, j: ${j}}`,\n};\nconst def = {\n    keyword: \"uniqueItems\",\n    type: \"array\",\n    schemaType: \"boolean\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, data, $data, schema, parentSchema, schemaCode, it } = cxt;\n        if (!$data && !schema)\n            return;\n        const valid = gen.let(\"valid\");\n        const itemTypes = parentSchema.items ? (0, dataType_1.getSchemaTypes)(parentSchema.items) : [];\n        cxt.block$data(valid, validateUniqueItems, (0, codegen_1._) `${schemaCode} === false`);\n        cxt.ok(valid);\n        function validateUniqueItems() {\n            const i = gen.let(\"i\", (0, codegen_1._) `${data}.length`);\n            const j = gen.let(\"j\");\n            cxt.setParams({ i, j });\n            gen.assign(valid, true);\n            gen.if((0, codegen_1._) `${i} > 1`, () => (canOptimize() ? loopN : loopN2)(i, j));\n        }\n        function canOptimize() {\n            return itemTypes.length > 0 && !itemTypes.some((t) => t === \"object\" || t === \"array\");\n        }\n        function loopN(i, j) {\n            const item = gen.name(\"item\");\n            const wrongType = (0, dataType_1.checkDataTypes)(itemTypes, item, it.opts.strictNumbers, dataType_1.DataType.Wrong);\n            const indices = gen.const(\"indices\", (0, codegen_1._) `{}`);\n            gen.for((0, codegen_1._) `;${i}--;`, () => {\n                gen.let(item, (0, codegen_1._) `${data}[${i}]`);\n                gen.if(wrongType, (0, codegen_1._) `continue`);\n                if (itemTypes.length > 1)\n                    gen.if((0, codegen_1._) `typeof ${item} == \"string\"`, (0, codegen_1._) `${item} += \"_\"`);\n                gen\n                    .if((0, codegen_1._) `typeof ${indices}[${item}] == \"number\"`, () => {\n                    gen.assign(j, (0, codegen_1._) `${indices}[${item}]`);\n                    cxt.error();\n                    gen.assign(valid, false).break();\n                })\n                    .code((0, codegen_1._) `${indices}[${item}] = ${i}`);\n            });\n        }\n        function loopN2(i, j) {\n            const eql = (0, util_1.useFunc)(gen, equal_1.default);\n            const outer = gen.name(\"outer\");\n            gen.label(outer).for((0, codegen_1._) `;${i}--;`, () => gen.for((0, codegen_1._) `${j} = ${i}; ${j}--;`, () => gen.if((0, codegen_1._) `${eql}(${data}[${i}], ${data}[${j}])`, () => {\n                cxt.error();\n                gen.assign(valid, false).break(outer);\n            })));\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=uniqueItems.js.map","import cloneDeep from 'lodash/cloneDeep';\nimport mergeWith from 'lodash/mergeWith';\n\nconst CONFIG_KEY_PART_PATTERN = /^[a-z][a-z0-9]*(?:[-_][a-z][a-z0-9]*)*$/i;\nfunction isObject(value) {\n  return typeof value === \"object\" && value !== null && !Array.isArray(value);\n}\nfunction typeOf(value) {\n  if (value === null) {\n    return \"null\";\n  } else if (Array.isArray(value)) {\n    return \"array\";\n  }\n  const type = typeof value;\n  if (type === \"number\" && isNaN(value)) {\n    return \"nan\";\n  }\n  if (type === \"string\" && value === \"\") {\n    return \"empty-string\";\n  }\n  return type;\n}\nconst errors = {\n  type(key, context, typeName, expected) {\n    return `Invalid type in config for key '${key}' in '${context}', got ${typeName}, wanted ${expected}`;\n  },\n  missing(key) {\n    return `Missing required config value at '${key}'`;\n  },\n  convert(key, context, expected) {\n    return `Unable to convert config value for key '${key}' in '${context}' to a ${expected}`;\n  }\n};\nclass ConfigReader {\n  constructor(data, context = \"mock-config\", fallback, prefix = \"\") {\n    this.data = data;\n    this.context = context;\n    this.fallback = fallback;\n    this.prefix = prefix;\n    this.notifiedFilteredKeys = /* @__PURE__ */ new Set();\n  }\n  static fromConfigs(configs) {\n    if (configs.length === 0) {\n      return new ConfigReader(void 0);\n    }\n    return configs.reduce((previousReader, { data, context, filteredKeys, deprecatedKeys }) => {\n      const reader = new ConfigReader(data, context, previousReader);\n      reader.filteredKeys = filteredKeys;\n      if (deprecatedKeys) {\n        for (const { key, description } of deprecatedKeys) {\n          console.warn(`The configuration key '${key}' of ${context} is deprecated and may be removed soon. ${description || \"\"}`);\n        }\n      }\n      return reader;\n    }, void 0);\n  }\n  has(key) {\n    var _a, _b;\n    const value = this.readValue(key);\n    if (value !== void 0) {\n      return true;\n    }\n    return (_b = (_a = this.fallback) == null ? void 0 : _a.has(key)) != null ? _b : false;\n  }\n  keys() {\n    var _a, _b;\n    const localKeys = this.data ? Object.keys(this.data) : [];\n    const fallbackKeys = (_b = (_a = this.fallback) == null ? void 0 : _a.keys()) != null ? _b : [];\n    return [.../* @__PURE__ */ new Set([...localKeys, ...fallbackKeys])];\n  }\n  get(key) {\n    const value = this.getOptional(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key != null ? key : \"\")));\n    }\n    return value;\n  }\n  getOptional(key) {\n    var _a, _b;\n    const value = cloneDeep(this.readValue(key));\n    const fallbackValue = (_a = this.fallback) == null ? void 0 : _a.getOptional(key);\n    if (value === void 0) {\n      if (process.env.NODE_ENV === \"development\") {\n        if (fallbackValue === void 0 && key) {\n          const fullKey = this.fullKey(key);\n          if (((_b = this.filteredKeys) == null ? void 0 : _b.includes(fullKey)) && !this.notifiedFilteredKeys.has(fullKey)) {\n            this.notifiedFilteredKeys.add(fullKey);\n            console.warn(`Failed to read configuration value at '${fullKey}' as it is not visible. See https://backstage.io/docs/conf/defining#visibility for instructions on how to make it visible.`);\n          }\n        }\n      }\n      return fallbackValue;\n    } else if (fallbackValue === void 0) {\n      return value;\n    }\n    return mergeWith({}, { value: fallbackValue }, { value }, (into, from) => !isObject(from) || !isObject(into) ? from : void 0).value;\n  }\n  getConfig(key) {\n    const value = this.getOptionalConfig(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  getOptionalConfig(key) {\n    var _a;\n    const value = this.readValue(key);\n    const fallbackConfig = (_a = this.fallback) == null ? void 0 : _a.getOptionalConfig(key);\n    if (isObject(value)) {\n      return this.copy(value, key, fallbackConfig);\n    }\n    if (value !== void 0) {\n      throw new TypeError(errors.type(this.fullKey(key), this.context, typeOf(value), \"object\"));\n    }\n    return fallbackConfig;\n  }\n  getConfigArray(key) {\n    const value = this.getOptionalConfigArray(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  getOptionalConfigArray(key) {\n    var _a;\n    const configs = this.readConfigValue(key, (values) => {\n      if (!Array.isArray(values)) {\n        return { expected: \"object-array\" };\n      }\n      for (const [index, value] of values.entries()) {\n        if (!isObject(value)) {\n          return { expected: \"object-array\", value, key: `${key}[${index}]` };\n        }\n      }\n      return true;\n    });\n    if (!configs) {\n      if (process.env.NODE_ENV === \"development\") {\n        const fullKey = this.fullKey(key);\n        if (((_a = this.filteredKeys) == null ? void 0 : _a.some((k) => k.startsWith(fullKey))) && !this.notifiedFilteredKeys.has(key)) {\n          this.notifiedFilteredKeys.add(key);\n          console.warn(`Failed to read configuration array at '${key}' as it does not have any visible elements. See https://backstage.io/docs/conf/defining#visibility for instructions on how to make it visible.`);\n        }\n      }\n      return void 0;\n    }\n    return configs.map((obj, index) => this.copy(obj, `${key}[${index}]`));\n  }\n  getNumber(key) {\n    const value = this.getOptionalNumber(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  getOptionalNumber(key) {\n    const value = this.readConfigValue(key, (val) => typeof val === \"number\" || typeof val === \"string\" || { expected: \"number\" });\n    if (typeof value === \"number\" || value === void 0) {\n      return value;\n    }\n    const number = Number(value);\n    if (!Number.isFinite(number)) {\n      throw new Error(errors.convert(this.fullKey(key), this.context, \"number\"));\n    }\n    return number;\n  }\n  getBoolean(key) {\n    const value = this.getOptionalBoolean(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  getOptionalBoolean(key) {\n    return this.readConfigValue(key, (value) => typeof value === \"boolean\" || { expected: \"boolean\" });\n  }\n  getString(key) {\n    const value = this.getOptionalString(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  getOptionalString(key) {\n    return this.readConfigValue(key, (value) => typeof value === \"string\" && value !== \"\" || { expected: \"string\" });\n  }\n  getStringArray(key) {\n    const value = this.getOptionalStringArray(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  getOptionalStringArray(key) {\n    return this.readConfigValue(key, (values) => {\n      if (!Array.isArray(values)) {\n        return { expected: \"string-array\" };\n      }\n      for (const [index, value] of values.entries()) {\n        if (typeof value !== \"string\" || value === \"\") {\n          return { expected: \"string-array\", value, key: `${key}[${index}]` };\n        }\n      }\n      return true;\n    });\n  }\n  fullKey(key) {\n    return `${this.prefix}${this.prefix ? \".\" : \"\"}${key}`;\n  }\n  copy(data, key, fallback) {\n    const reader = new ConfigReader(data, this.context, fallback, this.fullKey(key));\n    reader.filteredKeys = this.filteredKeys;\n    return reader;\n  }\n  readConfigValue(key, validate) {\n    var _a, _b;\n    const value = this.readValue(key);\n    if (value === void 0) {\n      if (process.env.NODE_ENV === \"development\") {\n        const fullKey = this.fullKey(key);\n        if (((_a = this.filteredKeys) == null ? void 0 : _a.includes(fullKey)) && !this.notifiedFilteredKeys.has(fullKey)) {\n          this.notifiedFilteredKeys.add(fullKey);\n          console.warn(`Failed to read configuration value at '${fullKey}' as it is not visible. See https://backstage.io/docs/conf/defining#visibility for instructions on how to make it visible.`);\n        }\n      }\n      return (_b = this.fallback) == null ? void 0 : _b.readConfigValue(key, validate);\n    }\n    const result = validate(value);\n    if (result !== true) {\n      const { key: keyName = key, value: theValue = value, expected } = result;\n      throw new TypeError(errors.type(this.fullKey(keyName), this.context, typeOf(theValue), expected));\n    }\n    return value;\n  }\n  readValue(key) {\n    const parts = key ? key.split(\".\") : [];\n    for (const part of parts) {\n      if (!CONFIG_KEY_PART_PATTERN.test(part)) {\n        throw new TypeError(`Invalid config key '${key}'`);\n      }\n    }\n    if (this.data === void 0) {\n      return void 0;\n    }\n    let value = this.data;\n    for (const [index, part] of parts.entries()) {\n      if (isObject(value)) {\n        value = value[part];\n      } else if (value !== void 0) {\n        const badKey = this.fullKey(parts.slice(0, index).join(\".\"));\n        throw new TypeError(errors.type(badKey, this.context, typeOf(value), \"object\"));\n      }\n    }\n    return value;\n  }\n}\n\nexport { ConfigReader };\n//# sourceMappingURL=index.esm.js.map\n","import React, { useContext, Children, isValidElement, useEffect, useMemo, useState, createContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { createVersionedContext, createVersionedValueMap, getOrCreateGlobalSingleton } from '@backstage/version-bridge';\nimport ObservableImpl from 'zen-observable';\nimport { SessionState, FeatureFlagState, getComponentData, attachComponentData, useApi, featureFlagsApiRef, AnalyticsContext, useAnalytics, appThemeApiRef, configApiRef, identityApiRef, useApp, useElementFilter } from '@backstage/core-plugin-api';\nimport { z } from 'zod';\nimport { ConfigReader } from '@backstage/config';\nexport { ConfigReader } from '@backstage/config';\nimport { matchRoutes, generatePath, useLocation, Routes, Route, useRoutes } from 'react-router-dom';\nimport useAsync from 'react-use/lib/useAsync';\nimport useObservable from 'react-use/lib/useObservable';\n\nclass ApiAggregator {\n  constructor(...holders) {\n    this.holders = holders;\n  }\n  get(apiRef) {\n    for (const holder of this.holders) {\n      const api = holder.get(apiRef);\n      if (api) {\n        return api;\n      }\n    }\n    return void 0;\n  }\n}\n\nconst ApiContext = createVersionedContext(\"api-context\");\nconst ApiProvider = (props) => {\n  var _a;\n  const { apis, children } = props;\n  const parentHolder = (_a = useContext(ApiContext)) == null ? void 0 : _a.atVersion(1);\n  const holder = parentHolder ? new ApiAggregator(apis, parentHolder) : apis;\n  return /* @__PURE__ */ React.createElement(ApiContext.Provider, {\n    value: createVersionedValueMap({ 1: holder }),\n    children\n  });\n};\nApiProvider.propTypes = {\n  apis: PropTypes.shape({ get: PropTypes.func.isRequired }).isRequired,\n  children: PropTypes.node\n};\n\nclass ApiResolver {\n  constructor(factories) {\n    this.factories = factories;\n    this.apis = /* @__PURE__ */ new Map();\n  }\n  static validateFactories(factories, apis) {\n    for (const api of apis) {\n      const heap = [api];\n      const allDeps = /* @__PURE__ */ new Set();\n      while (heap.length) {\n        const apiRef = heap.shift();\n        const factory = factories.get(apiRef);\n        if (!factory) {\n          continue;\n        }\n        for (const dep of Object.values(factory.deps)) {\n          if (dep.id === api.id) {\n            throw new Error(`Circular dependency of api factory for ${api}`);\n          }\n          if (!allDeps.has(dep)) {\n            allDeps.add(dep);\n            heap.push(dep);\n          }\n        }\n      }\n    }\n  }\n  get(ref) {\n    return this.load(ref);\n  }\n  load(ref, loading = []) {\n    const impl = this.apis.get(ref.id);\n    if (impl) {\n      return impl;\n    }\n    const factory = this.factories.get(ref);\n    if (!factory) {\n      return void 0;\n    }\n    if (loading.includes(factory.api)) {\n      throw new Error(`Circular dependency of api factory for ${factory.api}`);\n    }\n    const deps = this.loadDeps(ref, factory.deps, [...loading, factory.api]);\n    const api = factory.factory(deps);\n    this.apis.set(ref.id, api);\n    return api;\n  }\n  loadDeps(dependent, apis, loading) {\n    const impls = {};\n    for (const key in apis) {\n      if (apis.hasOwnProperty(key)) {\n        const ref = apis[key];\n        const api = this.load(ref, loading);\n        if (!api) {\n          throw new Error(`No API factory available for dependency ${ref} of dependent ${dependent}`);\n        }\n        impls[key] = api;\n      }\n    }\n    return impls;\n  }\n}\n\nvar ScopePriority = /* @__PURE__ */ ((ScopePriority2) => {\n  ScopePriority2[ScopePriority2[\"default\"] = 10] = \"default\";\n  ScopePriority2[ScopePriority2[\"app\"] = 50] = \"app\";\n  ScopePriority2[ScopePriority2[\"static\"] = 100] = \"static\";\n  return ScopePriority2;\n})(ScopePriority || {});\nclass ApiFactoryRegistry {\n  constructor() {\n    this.factories = /* @__PURE__ */ new Map();\n  }\n  register(scope, factory) {\n    const priority = ScopePriority[scope];\n    const existing = this.factories.get(factory.api.id);\n    if (existing && existing.priority >= priority) {\n      return false;\n    }\n    this.factories.set(factory.api.id, { priority, factory });\n    return true;\n  }\n  get(api) {\n    const tuple = this.factories.get(api.id);\n    if (!tuple) {\n      return void 0;\n    }\n    return tuple.factory;\n  }\n  getAllApis() {\n    const refs = /* @__PURE__ */ new Set();\n    for (const { factory } of this.factories.values()) {\n      refs.add(factory.api);\n    }\n    return refs;\n  }\n}\n\nfunction showLoginPopup(options) {\n  return new Promise((resolve, reject) => {\n    const width = options.width || 500;\n    const height = options.height || 700;\n    const left = window.screen.width / 2 - width / 2;\n    const top = window.screen.height / 2 - height / 2;\n    const popup = window.open(options.url, options.name, `menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=${width},height=${height},top=${top},left=${left}`);\n    let targetOrigin = \"\";\n    if (!popup || typeof popup.closed === \"undefined\" || popup.closed) {\n      const error = new Error(\"Failed to open auth popup.\");\n      error.name = \"PopupRejectedError\";\n      reject(error);\n      return;\n    }\n    const messageListener = (event) => {\n      if (event.source !== popup) {\n        return;\n      }\n      if (event.origin !== options.origin) {\n        return;\n      }\n      const { data } = event;\n      if (data.type === \"config_info\") {\n        targetOrigin = data.targetOrigin;\n        return;\n      }\n      if (data.type !== \"authorization_response\") {\n        return;\n      }\n      const authResult = data;\n      if (\"error\" in authResult) {\n        const error = new Error(authResult.error.message);\n        error.name = authResult.error.name;\n        reject(error);\n      } else {\n        resolve(authResult.response);\n      }\n      done();\n    };\n    const intervalId = setInterval(() => {\n      if (popup.closed) {\n        const errMessage = `Login failed, ${targetOrigin && targetOrigin !== window.location.origin ? `Incorrect app origin, expected ${targetOrigin}` : \"popup was closed\"}`;\n        const error = new Error(errMessage);\n        error.name = \"PopupClosedError\";\n        reject(error);\n        done();\n      }\n    }, 100);\n    function done() {\n      window.removeEventListener(\"message\", messageListener);\n      clearInterval(intervalId);\n    }\n    window.addEventListener(\"message\", messageListener);\n  });\n}\n\nfunction defaultJoinScopes(scopes) {\n  return [...scopes].join(\" \");\n}\nclass DefaultAuthConnector {\n  constructor(options) {\n    const {\n      discoveryApi,\n      environment,\n      provider,\n      joinScopes = defaultJoinScopes,\n      oauthRequestApi,\n      sessionTransform = (id) => id\n    } = options;\n    this.authRequester = oauthRequestApi.createAuthRequester({\n      provider,\n      onAuthRequest: (scopes) => this.showPopup(scopes)\n    });\n    this.discoveryApi = discoveryApi;\n    this.environment = environment;\n    this.provider = provider;\n    this.joinScopesFunc = joinScopes;\n    this.sessionTransform = sessionTransform;\n  }\n  async createSession(options) {\n    if (options.instantPopup) {\n      return this.showPopup(options.scopes);\n    }\n    return this.authRequester(options.scopes);\n  }\n  async refreshSession() {\n    const res = await fetch(await this.buildUrl(\"/refresh\", { optional: true }), {\n      headers: {\n        \"x-requested-with\": \"XMLHttpRequest\"\n      },\n      credentials: \"include\"\n    }).catch((error) => {\n      throw new Error(`Auth refresh request failed, ${error}`);\n    });\n    if (!res.ok) {\n      const error = new Error(`Auth refresh request failed, ${res.statusText}`);\n      error.status = res.status;\n      throw error;\n    }\n    const authInfo = await res.json();\n    if (authInfo.error) {\n      const error = new Error(authInfo.error.message);\n      if (authInfo.error.name) {\n        error.name = authInfo.error.name;\n      }\n      throw error;\n    }\n    return await this.sessionTransform(authInfo);\n  }\n  async removeSession() {\n    const res = await fetch(await this.buildUrl(\"/logout\"), {\n      method: \"POST\",\n      headers: {\n        \"x-requested-with\": \"XMLHttpRequest\"\n      },\n      credentials: \"include\"\n    }).catch((error) => {\n      throw new Error(`Logout request failed, ${error}`);\n    });\n    if (!res.ok) {\n      const error = new Error(`Logout request failed, ${res.statusText}`);\n      error.status = res.status;\n      throw error;\n    }\n  }\n  async showPopup(scopes) {\n    const scope = this.joinScopesFunc(scopes);\n    const popupUrl = await this.buildUrl(\"/start\", {\n      scope,\n      origin: location.origin\n    });\n    const payload = await showLoginPopup({\n      url: popupUrl,\n      name: `${this.provider.title} Login`,\n      origin: new URL(popupUrl).origin,\n      width: 450,\n      height: 730\n    });\n    return await this.sessionTransform(payload);\n  }\n  async buildUrl(path, query) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"auth\");\n    const queryString = this.buildQueryString({\n      ...query,\n      env: this.environment\n    });\n    return `${baseUrl}/${this.provider.id}${path}${queryString}`;\n  }\n  buildQueryString(query) {\n    if (!query) {\n      return \"\";\n    }\n    const queryString = Object.entries(query).map(([key, value]) => {\n      if (typeof value === \"string\") {\n        return `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;\n      } else if (value) {\n        return encodeURIComponent(key);\n      }\n      return void 0;\n    }).filter(Boolean).join(\"&\");\n    if (!queryString) {\n      return \"\";\n    }\n    return `?${queryString}`;\n  }\n}\n\nclass DirectAuthConnector {\n  constructor(options) {\n    const { discoveryApi, environment, provider } = options;\n    this.discoveryApi = discoveryApi;\n    this.environment = environment;\n    this.provider = provider;\n  }\n  async createSession() {\n    const popupUrl = await this.buildUrl(\"/start\");\n    const payload = await showLoginPopup({\n      url: popupUrl,\n      name: `${this.provider.title} Login`,\n      origin: new URL(popupUrl).origin,\n      width: 450,\n      height: 730\n    });\n    return {\n      ...payload,\n      id: payload.profile.email\n    };\n  }\n  async refreshSession() {\n  }\n  async removeSession() {\n    const res = await fetch(await this.buildUrl(\"/logout\"), {\n      method: \"POST\",\n      headers: {\n        \"x-requested-with\": \"XMLHttpRequest\"\n      },\n      credentials: \"include\"\n    }).catch((error) => {\n      throw new Error(`Logout request failed, ${error}`);\n    });\n    if (!res.ok) {\n      const error = new Error(`Logout request failed, ${res.statusText}`);\n      error.status = res.status;\n      throw error;\n    }\n  }\n  async buildUrl(path) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"auth\");\n    return `${baseUrl}/${this.provider.id}${path}?env=${this.environment}`;\n  }\n}\n\nfunction hasScopes$1(searched, searchFor) {\n  for (const scope of searchFor) {\n    if (!searched.has(scope)) {\n      return false;\n    }\n  }\n  return true;\n}\nclass SessionScopeHelper {\n  constructor(options) {\n    this.options = options;\n  }\n  sessionExistsAndHasScope(session, scopes) {\n    if (!session) {\n      return false;\n    }\n    if (!scopes) {\n      return true;\n    }\n    if (this.options.sessionScopes === void 0) {\n      return true;\n    }\n    const sessionScopes = this.options.sessionScopes(session);\n    return hasScopes$1(sessionScopes, scopes);\n  }\n  getExtendedScope(session, scopes) {\n    const newScope = new Set(this.options.defaultScopes);\n    if (session && this.options.sessionScopes !== void 0) {\n      const sessionScopes = this.options.sessionScopes(session);\n      for (const scope of sessionScopes) {\n        newScope.add(scope);\n      }\n    }\n    if (scopes) {\n      for (const scope of scopes) {\n        newScope.add(scope);\n      }\n    }\n    return newScope;\n  }\n}\n\nclass PublishSubject {\n  constructor() {\n    this.isClosed = false;\n    this.observable = new ObservableImpl((subscriber) => {\n      if (this.isClosed) {\n        if (this.terminatingError) {\n          subscriber.error(this.terminatingError);\n        } else {\n          subscriber.complete();\n        }\n        return () => {\n        };\n      }\n      this.subscribers.add(subscriber);\n      return () => {\n        this.subscribers.delete(subscriber);\n      };\n    });\n    this.subscribers = /* @__PURE__ */ new Set();\n  }\n  [Symbol.observable]() {\n    return this;\n  }\n  get closed() {\n    return this.isClosed;\n  }\n  next(value) {\n    if (this.isClosed) {\n      throw new Error(\"PublishSubject is closed\");\n    }\n    this.subscribers.forEach((subscriber) => subscriber.next(value));\n  }\n  error(error) {\n    if (this.isClosed) {\n      throw new Error(\"PublishSubject is closed\");\n    }\n    this.isClosed = true;\n    this.terminatingError = error;\n    this.subscribers.forEach((subscriber) => subscriber.error(error));\n  }\n  complete() {\n    if (this.isClosed) {\n      throw new Error(\"PublishSubject is closed\");\n    }\n    this.isClosed = true;\n    this.subscribers.forEach((subscriber) => subscriber.complete());\n  }\n  subscribe(onNext, onError, onComplete) {\n    const observer = typeof onNext === \"function\" ? {\n      next: onNext,\n      error: onError,\n      complete: onComplete\n    } : onNext;\n    return this.observable.subscribe(observer);\n  }\n}\nclass BehaviorSubject {\n  constructor(value) {\n    this.subscribers = /* @__PURE__ */ new Set();\n    this.isClosed = false;\n    this.currentValue = value;\n    this.terminatingError = void 0;\n    this.observable = new ObservableImpl((subscriber) => {\n      if (this.isClosed) {\n        if (this.terminatingError) {\n          subscriber.error(this.terminatingError);\n        } else {\n          subscriber.complete();\n        }\n        return () => {\n        };\n      }\n      subscriber.next(this.currentValue);\n      this.subscribers.add(subscriber);\n      return () => {\n        this.subscribers.delete(subscriber);\n      };\n    });\n  }\n  [Symbol.observable]() {\n    return this;\n  }\n  get closed() {\n    return this.isClosed;\n  }\n  next(value) {\n    if (this.isClosed) {\n      throw new Error(\"BehaviorSubject is closed\");\n    }\n    this.currentValue = value;\n    this.subscribers.forEach((subscriber) => subscriber.next(value));\n  }\n  error(error) {\n    if (this.isClosed) {\n      throw new Error(\"BehaviorSubject is closed\");\n    }\n    this.isClosed = true;\n    this.terminatingError = error;\n    this.subscribers.forEach((subscriber) => subscriber.error(error));\n  }\n  complete() {\n    if (this.isClosed) {\n      throw new Error(\"BehaviorSubject is closed\");\n    }\n    this.isClosed = true;\n    this.subscribers.forEach((subscriber) => subscriber.complete());\n  }\n  subscribe(onNext, onError, onComplete) {\n    const observer = typeof onNext === \"function\" ? {\n      next: onNext,\n      error: onError,\n      complete: onComplete\n    } : onNext;\n    return this.observable.subscribe(observer);\n  }\n}\n\nclass SessionStateTracker {\n  constructor() {\n    this.subject = new BehaviorSubject(SessionState.SignedOut);\n    this.signedIn = false;\n  }\n  setIsSignedIn(isSignedIn) {\n    if (this.signedIn !== isSignedIn) {\n      this.signedIn = isSignedIn;\n      this.subject.next(this.signedIn ? SessionState.SignedIn : SessionState.SignedOut);\n    }\n  }\n  sessionState$() {\n    return this.subject;\n  }\n}\n\nclass RefreshingAuthSessionManager {\n  constructor(options) {\n    this.stateTracker = new SessionStateTracker();\n    const {\n      connector,\n      defaultScopes = /* @__PURE__ */ new Set(),\n      sessionScopes,\n      sessionShouldRefresh\n    } = options;\n    this.connector = connector;\n    this.sessionScopesFunc = sessionScopes;\n    this.sessionShouldRefreshFunc = sessionShouldRefresh;\n    this.helper = new SessionScopeHelper({ sessionScopes, defaultScopes });\n  }\n  async getSession(options) {\n    if (this.helper.sessionExistsAndHasScope(this.currentSession, options.scopes)) {\n      const shouldRefresh = this.sessionShouldRefreshFunc(this.currentSession);\n      if (!shouldRefresh) {\n        return this.currentSession;\n      }\n      try {\n        const refreshedSession = await this.collapsedSessionRefresh();\n        const currentScopes = this.sessionScopesFunc(this.currentSession);\n        const refreshedScopes = this.sessionScopesFunc(refreshedSession);\n        if (hasScopes$1(refreshedScopes, currentScopes)) {\n          this.currentSession = refreshedSession;\n        }\n        return refreshedSession;\n      } catch (error) {\n        if (options.optional) {\n          return void 0;\n        }\n        throw error;\n      }\n    }\n    if (!this.currentSession && !options.instantPopup) {\n      try {\n        const newSession = await this.collapsedSessionRefresh();\n        this.currentSession = newSession;\n        return this.getSession(options);\n      } catch {\n      }\n    }\n    if (options.optional) {\n      return void 0;\n    }\n    this.currentSession = await this.connector.createSession({\n      ...options,\n      scopes: this.helper.getExtendedScope(this.currentSession, options.scopes)\n    });\n    this.stateTracker.setIsSignedIn(true);\n    return this.currentSession;\n  }\n  async removeSession() {\n    this.currentSession = void 0;\n    await this.connector.removeSession();\n    this.stateTracker.setIsSignedIn(false);\n  }\n  sessionState$() {\n    return this.stateTracker.sessionState$();\n  }\n  async collapsedSessionRefresh() {\n    if (this.refreshPromise) {\n      return this.refreshPromise;\n    }\n    this.refreshPromise = this.connector.refreshSession();\n    try {\n      const session = await this.refreshPromise;\n      this.stateTracker.setIsSignedIn(true);\n      return session;\n    } finally {\n      delete this.refreshPromise;\n    }\n  }\n}\n\nclass StaticAuthSessionManager {\n  constructor(options) {\n    this.stateTracker = new SessionStateTracker();\n    const { connector, defaultScopes = /* @__PURE__ */ new Set(), sessionScopes } = options;\n    this.connector = connector;\n    this.helper = new SessionScopeHelper({ sessionScopes, defaultScopes });\n  }\n  setSession(session) {\n    this.currentSession = session;\n    this.stateTracker.setIsSignedIn(Boolean(session));\n  }\n  async getSession(options) {\n    if (this.helper.sessionExistsAndHasScope(this.currentSession, options.scopes)) {\n      return this.currentSession;\n    }\n    if (options.optional) {\n      return void 0;\n    }\n    this.currentSession = await this.connector.createSession({\n      ...options,\n      scopes: this.helper.getExtendedScope(this.currentSession, options.scopes)\n    });\n    this.stateTracker.setIsSignedIn(true);\n    return this.currentSession;\n  }\n  async removeSession() {\n    this.currentSession = void 0;\n    this.stateTracker.setIsSignedIn(false);\n  }\n  sessionState$() {\n    return this.stateTracker.sessionState$();\n  }\n}\n\nclass AuthSessionStore {\n  constructor(options) {\n    const {\n      manager,\n      storageKey,\n      schema,\n      sessionScopes,\n      sessionShouldRefresh = () => false\n    } = options;\n    this.manager = manager;\n    this.storageKey = storageKey;\n    this.schema = schema;\n    this.sessionShouldRefreshFunc = sessionShouldRefresh;\n    this.helper = new SessionScopeHelper({\n      sessionScopes,\n      defaultScopes: /* @__PURE__ */ new Set()\n    });\n  }\n  setSession(session) {\n    this.manager.setSession(session);\n    this.saveSession(session);\n  }\n  async getSession(options) {\n    const { scopes } = options;\n    const session = this.loadSession();\n    if (this.helper.sessionExistsAndHasScope(session, scopes)) {\n      const shouldRefresh = this.sessionShouldRefreshFunc(session);\n      if (!shouldRefresh) {\n        this.manager.setSession(session);\n        return session;\n      }\n    }\n    const newSession = await this.manager.getSession(options);\n    this.saveSession(newSession);\n    return newSession;\n  }\n  async removeSession() {\n    localStorage.removeItem(this.storageKey);\n    await this.manager.removeSession();\n  }\n  sessionState$() {\n    return this.manager.sessionState$();\n  }\n  loadSession() {\n    try {\n      const sessionJson = localStorage.getItem(this.storageKey);\n      if (sessionJson) {\n        const session = JSON.parse(sessionJson, (_key, value) => {\n          if ((value == null ? void 0 : value.__type) === \"Set\") {\n            return new Set(value.__value);\n          }\n          return value;\n        });\n        try {\n          return this.schema.parse(session);\n        } catch (e) {\n          console.log(`Failed to load session from local storage because it did not conform to the expected schema, ${e}`);\n          throw e;\n        }\n      }\n      return void 0;\n    } catch (error) {\n      localStorage.removeItem(this.storageKey);\n      return void 0;\n    }\n  }\n  saveSession(session) {\n    if (session === void 0) {\n      localStorage.removeItem(this.storageKey);\n      return;\n    }\n    try {\n      this.schema.parse(session);\n    } catch (e) {\n      console.warn(`Failed to save session to local storage because it did not conform to the expected schema, ${e}`);\n      return;\n    }\n    localStorage.setItem(this.storageKey, JSON.stringify(session, (_key, value) => {\n      if (value instanceof Set) {\n        return {\n          __type: \"Set\",\n          __value: Array.from(value)\n        };\n      }\n      return value;\n    }));\n  }\n}\n\nconst DEFAULT_PROVIDER$9 = {\n  id: \"oauth2\",\n  title: \"Your Identity Provider\",\n  icon: () => null\n};\nclass OAuth2 {\n  static create(options) {\n    const {\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$9,\n      oauthRequestApi,\n      defaultScopes = [],\n      scopeTransform = (x) => x\n    } = options;\n    const connector = new DefaultAuthConnector({\n      discoveryApi,\n      environment,\n      provider,\n      oauthRequestApi,\n      sessionTransform(res) {\n        return {\n          ...res,\n          providerInfo: {\n            idToken: res.providerInfo.idToken,\n            accessToken: res.providerInfo.accessToken,\n            scopes: OAuth2.normalizeScopes(scopeTransform, res.providerInfo.scope),\n            expiresAt: new Date(Date.now() + res.providerInfo.expiresInSeconds * 1e3)\n          }\n        };\n      }\n    });\n    const sessionManager = new RefreshingAuthSessionManager({\n      connector,\n      defaultScopes: new Set(defaultScopes),\n      sessionScopes: (session) => session.providerInfo.scopes,\n      sessionShouldRefresh: (session) => {\n        const expiresInSec = (session.providerInfo.expiresAt.getTime() - Date.now()) / 1e3;\n        return expiresInSec < 60 * 5;\n      }\n    });\n    return new OAuth2({ sessionManager, scopeTransform });\n  }\n  constructor(options) {\n    this.sessionManager = options.sessionManager;\n    this.scopeTransform = options.scopeTransform;\n  }\n  async signIn() {\n    await this.getAccessToken();\n  }\n  async signOut() {\n    await this.sessionManager.removeSession();\n  }\n  sessionState$() {\n    return this.sessionManager.sessionState$();\n  }\n  async getAccessToken(scope, options) {\n    var _a;\n    const normalizedScopes = OAuth2.normalizeScopes(this.scopeTransform, scope);\n    const session = await this.sessionManager.getSession({\n      ...options,\n      scopes: normalizedScopes\n    });\n    return (_a = session == null ? void 0 : session.providerInfo.accessToken) != null ? _a : \"\";\n  }\n  async getIdToken(options = {}) {\n    var _a;\n    const session = await this.sessionManager.getSession(options);\n    return (_a = session == null ? void 0 : session.providerInfo.idToken) != null ? _a : \"\";\n  }\n  async getBackstageIdentity(options = {}) {\n    const session = await this.sessionManager.getSession(options);\n    return session == null ? void 0 : session.backstageIdentity;\n  }\n  async getProfile(options = {}) {\n    const session = await this.sessionManager.getSession(options);\n    return session == null ? void 0 : session.profile;\n  }\n  static normalizeScopes(scopeTransform, scopes) {\n    if (!scopes) {\n      return /* @__PURE__ */ new Set();\n    }\n    const scopeList = Array.isArray(scopes) ? scopes : scopes.split(/[\\s|,]/).filter(Boolean);\n    return new Set(scopeTransform(scopeList));\n  }\n}\n\nconst DEFAULT_PROVIDER$8 = {\n  id: \"github\",\n  title: \"GitHub\",\n  icon: () => null\n};\nclass GithubAuth {\n  static create(options) {\n    const {\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$8,\n      oauthRequestApi,\n      defaultScopes = [\"read:user\"]\n    } = options;\n    return OAuth2.create({\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER$7 = {\n  id: \"gitlab\",\n  title: \"GitLab\",\n  icon: () => null\n};\nclass GitlabAuth {\n  static create(options) {\n    const {\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$7,\n      oauthRequestApi,\n      defaultScopes = [\"read_user\"]\n    } = options;\n    return OAuth2.create({\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER$6 = {\n  id: \"google\",\n  title: \"Google\",\n  icon: () => null\n};\nconst SCOPE_PREFIX$1 = \"https://www.googleapis.com/auth/\";\nclass GoogleAuth {\n  static create(options) {\n    const {\n      discoveryApi,\n      oauthRequestApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$6,\n      defaultScopes = [\n        \"openid\",\n        `${SCOPE_PREFIX$1}userinfo.email`,\n        `${SCOPE_PREFIX$1}userinfo.profile`\n      ]\n    } = options;\n    return OAuth2.create({\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes,\n      scopeTransform(scopes) {\n        return scopes.map((scope) => {\n          if (scope === \"openid\") {\n            return scope;\n          }\n          if (scope === \"profile\" || scope === \"email\") {\n            return `${SCOPE_PREFIX$1}userinfo.${scope}`;\n          }\n          if (scope.startsWith(SCOPE_PREFIX$1)) {\n            return scope;\n          }\n          return `${SCOPE_PREFIX$1}${scope}`;\n        });\n      }\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER$5 = {\n  id: \"okta\",\n  title: \"Okta\",\n  icon: () => null\n};\nconst OKTA_OIDC_SCOPES = /* @__PURE__ */ new Set([\n  \"openid\",\n  \"profile\",\n  \"email\",\n  \"phone\",\n  \"address\",\n  \"groups\",\n  \"offline_access\"\n]);\nconst OKTA_SCOPE_PREFIX = \"okta.\";\nclass OktaAuth {\n  static create(options) {\n    const {\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$5,\n      oauthRequestApi,\n      defaultScopes = [\"openid\", \"email\", \"profile\", \"offline_access\"]\n    } = options;\n    return OAuth2.create({\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes,\n      scopeTransform(scopes) {\n        return scopes.map((scope) => {\n          if (OKTA_OIDC_SCOPES.has(scope)) {\n            return scope;\n          }\n          if (scope.startsWith(OKTA_SCOPE_PREFIX)) {\n            return scope;\n          }\n          return `${OKTA_SCOPE_PREFIX}${scope}`;\n        });\n      }\n    });\n  }\n}\n\nconst samlSessionSchema = z.object({\n  profile: z.object({\n    email: z.string().optional(),\n    displayName: z.string().optional(),\n    picture: z.string().optional()\n  }),\n  backstageIdentity: z.object({\n    id: z.string(),\n    token: z.string(),\n    identity: z.object({\n      type: z.literal(\"user\"),\n      userEntityRef: z.string(),\n      ownershipEntityRefs: z.array(z.string())\n    })\n  })\n});\n\nconst DEFAULT_PROVIDER$4 = {\n  id: \"saml\",\n  title: \"SAML\",\n  icon: () => null\n};\nclass SamlAuth {\n  constructor(sessionManager) {\n    this.sessionManager = sessionManager;\n  }\n  static create(options) {\n    const {\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$4\n    } = options;\n    const connector = new DirectAuthConnector({\n      discoveryApi,\n      environment,\n      provider\n    });\n    const sessionManager = new StaticAuthSessionManager({\n      connector\n    });\n    const authSessionStore = new AuthSessionStore({\n      manager: sessionManager,\n      storageKey: `${provider.id}Session`,\n      schema: samlSessionSchema\n    });\n    return new SamlAuth(authSessionStore);\n  }\n  sessionState$() {\n    return this.sessionManager.sessionState$();\n  }\n  async signIn() {\n    await this.getBackstageIdentity({});\n  }\n  async signOut() {\n    await this.sessionManager.removeSession();\n  }\n  async getBackstageIdentity(options = {}) {\n    const session = await this.sessionManager.getSession(options);\n    return session == null ? void 0 : session.backstageIdentity;\n  }\n  async getProfile(options = {}) {\n    const session = await this.sessionManager.getSession(options);\n    return session == null ? void 0 : session.profile;\n  }\n}\n\nconst DEFAULT_PROVIDER$3 = {\n  id: \"microsoft\",\n  title: \"Microsoft\",\n  icon: () => null\n};\nclass MicrosoftAuth {\n  static create(options) {\n    const {\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$3,\n      oauthRequestApi,\n      discoveryApi,\n      defaultScopes = [\n        \"openid\",\n        \"offline_access\",\n        \"profile\",\n        \"email\",\n        \"User.Read\"\n      ]\n    } = options;\n    return OAuth2.create({\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER$2 = {\n  id: \"onelogin\",\n  title: \"onelogin\",\n  icon: () => null\n};\nconst OIDC_SCOPES = /* @__PURE__ */ new Set([\n  \"openid\",\n  \"profile\",\n  \"email\",\n  \"phone\",\n  \"address\",\n  \"groups\",\n  \"offline_access\"\n]);\nconst SCOPE_PREFIX = \"onelogin.\";\nclass OneLoginAuth {\n  static create(options) {\n    const {\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$2,\n      oauthRequestApi\n    } = options;\n    return OAuth2.create({\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes: [\"openid\", \"email\", \"profile\", \"offline_access\"],\n      scopeTransform(scopes) {\n        return scopes.map((scope) => {\n          if (OIDC_SCOPES.has(scope)) {\n            return scope;\n          }\n          if (scope.startsWith(SCOPE_PREFIX)) {\n            return scope;\n          }\n          return `${SCOPE_PREFIX}${scope}`;\n        });\n      }\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER$1 = {\n  id: \"bitbucket\",\n  title: \"Bitbucket\",\n  icon: () => null\n};\nclass BitbucketAuth {\n  static create(options) {\n    const {\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$1,\n      oauthRequestApi,\n      defaultScopes = [\"team\"]\n    } = options;\n    return OAuth2.create({\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER = {\n  id: \"atlassian\",\n  title: \"Atlassian\",\n  icon: () => null\n};\nclass AtlassianAuth {\n  static create(options) {\n    const {\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER,\n      oauthRequestApi\n    } = options;\n    return OAuth2.create({\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment\n    });\n  }\n}\n\nclass AlertApiForwarder {\n  constructor() {\n    this.subject = new PublishSubject();\n  }\n  post(alert) {\n    this.subject.next(alert);\n  }\n  alert$() {\n    return this.subject;\n  }\n}\n\nclass NoOpAnalyticsApi {\n  captureEvent(_event) {\n  }\n}\n\nconst STORAGE_KEY = \"theme\";\nclass AppThemeSelector {\n  constructor(themes) {\n    this.themes = themes;\n    this.subject = new BehaviorSubject(void 0);\n  }\n  static createWithStorage(themes) {\n    var _a;\n    const selector = new AppThemeSelector(themes);\n    if (!window.localStorage) {\n      return selector;\n    }\n    const initialThemeId = (_a = window.localStorage.getItem(STORAGE_KEY)) != null ? _a : void 0;\n    selector.setActiveThemeId(initialThemeId);\n    selector.activeThemeId$().subscribe((themeId) => {\n      if (themeId) {\n        window.localStorage.setItem(STORAGE_KEY, themeId);\n      } else {\n        window.localStorage.removeItem(STORAGE_KEY);\n      }\n    });\n    window.addEventListener(\"storage\", (event) => {\n      var _a2;\n      if (event.key === STORAGE_KEY) {\n        const themeId = (_a2 = localStorage.getItem(STORAGE_KEY)) != null ? _a2 : void 0;\n        selector.setActiveThemeId(themeId);\n      }\n    });\n    return selector;\n  }\n  getInstalledThemes() {\n    return this.themes.slice();\n  }\n  activeThemeId$() {\n    return this.subject;\n  }\n  getActiveThemeId() {\n    return this.activeThemeId;\n  }\n  setActiveThemeId(themeId) {\n    this.activeThemeId = themeId;\n    this.subject.next(themeId);\n  }\n}\n\nconst ERROR_PREFIX = \"Invalid discovery URL pattern,\";\nclass UrlPatternDiscovery {\n  constructor(parts) {\n    this.parts = parts;\n  }\n  static compile(pattern) {\n    const parts = pattern.split(/\\{\\{\\s*pluginId\\s*\\}\\}/);\n    const urlStr = parts.join(\"pluginId\");\n    let url;\n    try {\n      url = new URL(urlStr);\n    } catch {\n      throw new Error(`${ERROR_PREFIX} URL '${urlStr}' is invalid`);\n    }\n    if (url.hash) {\n      throw new Error(`${ERROR_PREFIX} URL must not have a hash`);\n    }\n    if (url.search) {\n      throw new Error(`${ERROR_PREFIX} URL must not have a query`);\n    }\n    if (urlStr.endsWith(\"/\")) {\n      throw new Error(`${ERROR_PREFIX} URL must not end with a slash`);\n    }\n    return new UrlPatternDiscovery(parts);\n  }\n  async getBaseUrl(pluginId) {\n    return this.parts.join(pluginId);\n  }\n}\n\nclass ErrorAlerter {\n  constructor(alertApi, errorApi) {\n    this.alertApi = alertApi;\n    this.errorApi = errorApi;\n  }\n  post(error, context) {\n    if (!(context == null ? void 0 : context.hidden)) {\n      this.alertApi.post({ message: error.message, severity: \"error\" });\n    }\n    return this.errorApi.post(error, context);\n  }\n  error$() {\n    return this.errorApi.error$();\n  }\n}\n\nclass ErrorApiForwarder {\n  constructor() {\n    this.subject = new PublishSubject();\n  }\n  post(error, context) {\n    this.subject.next({ error, context });\n  }\n  error$() {\n    return this.subject;\n  }\n}\n\nclass UnhandledErrorForwarder {\n  static forward(errorApi, errorContext) {\n    window.addEventListener(\"unhandledrejection\", (e) => {\n      errorApi.post(e.reason, errorContext);\n    });\n  }\n}\n\nfunction validateFlagName(name) {\n  if (name.length < 3) {\n    throw new Error(`The '${name}' feature flag must have a minimum length of three characters.`);\n  }\n  if (name.length > 150) {\n    throw new Error(`The '${name}' feature flag must not exceed 150 characters.`);\n  }\n  if (!name.match(/^[a-z]+[a-z0-9-]+$/)) {\n    throw new Error(`The '${name}' feature flag must start with a lowercase letter and only contain lowercase letters, numbers and hyphens. Examples: feature-flag-one, alpha, release-2020`);\n  }\n}\nclass LocalStorageFeatureFlags {\n  constructor() {\n    this.registeredFeatureFlags = [];\n  }\n  registerFlag(flag) {\n    validateFlagName(flag.name);\n    this.registeredFeatureFlags.push(flag);\n  }\n  getRegisteredFlags() {\n    return this.registeredFeatureFlags.slice();\n  }\n  isActive(name) {\n    if (!this.flags) {\n      this.flags = this.load();\n    }\n    return this.flags.get(name) === FeatureFlagState.Active;\n  }\n  save(options) {\n    if (!this.flags) {\n      this.flags = this.load();\n    }\n    if (!options.merge) {\n      this.flags.clear();\n    }\n    for (const [name, state] of Object.entries(options.states)) {\n      this.flags.set(name, state);\n    }\n    const enabled = Array.from(this.flags.entries()).filter(([, state]) => state === FeatureFlagState.Active);\n    window.localStorage.setItem(\"featureFlags\", JSON.stringify(Object.fromEntries(enabled)));\n  }\n  load() {\n    try {\n      const jsonStr = window.localStorage.getItem(\"featureFlags\");\n      if (!jsonStr) {\n        return /* @__PURE__ */ new Map();\n      }\n      const json = JSON.parse(jsonStr);\n      if (typeof json !== \"object\" || json === null || Array.isArray(json)) {\n        return /* @__PURE__ */ new Map();\n      }\n      const entries = Object.entries(json).filter(([name, value]) => {\n        validateFlagName(name);\n        return value === FeatureFlagState.Active;\n      });\n      return new Map(entries);\n    } catch {\n      return /* @__PURE__ */ new Map();\n    }\n  }\n}\n\nfunction createFetchApi(options) {\n  var _a;\n  let result = options.baseImplementation || global.fetch;\n  const middleware = [(_a = options.middleware) != null ? _a : []].flat().reverse();\n  for (const m of middleware) {\n    result = m.apply(result);\n  }\n  return {\n    fetch: result\n  };\n}\n\nclass IdentityAuthInjectorFetchMiddleware {\n  constructor(identityApi, allowUrl, headerName, headerValue) {\n    this.identityApi = identityApi;\n    this.allowUrl = allowUrl;\n    this.headerName = headerName;\n    this.headerValue = headerValue;\n  }\n  static create(options) {\n    var _a, _b;\n    const matcher = buildMatcher(options);\n    const headerName = ((_a = options.header) == null ? void 0 : _a.name) || \"authorization\";\n    const headerValue = ((_b = options.header) == null ? void 0 : _b.value) || ((token) => `Bearer ${token}`);\n    return new IdentityAuthInjectorFetchMiddleware(options.identityApi, matcher, headerName, headerValue);\n  }\n  apply(next) {\n    return async (input, init) => {\n      const request = new Request(input, init);\n      const { token } = await this.identityApi.getCredentials();\n      if (request.headers.get(this.headerName) || typeof token !== \"string\" || !token || !this.allowUrl(request.url)) {\n        return next(input, init);\n      }\n      request.headers.set(this.headerName, this.headerValue(token));\n      return next(request);\n    };\n  }\n}\nfunction buildMatcher(options) {\n  if (options.allowUrl) {\n    return options.allowUrl;\n  } else if (options.urlPrefixAllowlist) {\n    return buildPrefixMatcher(options.urlPrefixAllowlist);\n  } else if (options.config) {\n    return buildPrefixMatcher([options.config.getString(\"backend.baseUrl\")]);\n  }\n  return () => false;\n}\nfunction buildPrefixMatcher(prefixes) {\n  const trimmedPrefixes = prefixes.map((prefix) => prefix.replace(/\\/$/, \"\"));\n  return (url) => trimmedPrefixes.some((prefix) => url === prefix || url.startsWith(`${prefix}/`));\n}\n\nfunction join(left, right) {\n  if (!right || right === \"/\") {\n    return left;\n  }\n  return `${left.replace(/\\/$/, \"\")}/${right.replace(/^\\//, \"\")}`;\n}\nclass PluginProtocolResolverFetchMiddleware {\n  constructor(discoveryApi) {\n    this.discoveryApi = discoveryApi;\n  }\n  apply(next) {\n    return async (input, init) => {\n      const request = new Request(input, init);\n      const prefix = \"plugin://\";\n      if (!request.url.startsWith(prefix)) {\n        return next(input, init);\n      }\n      const { hostname, pathname, search, hash, username, password } = new URL(`http://${request.url.substring(prefix.length)}`);\n      let base = await this.discoveryApi.getBaseUrl(hostname);\n      if (username || password) {\n        const baseUrl = new URL(base);\n        const authority = `${username}${password ? `:${password}` : \"\"}@`;\n        base = `${baseUrl.protocol}//${authority}${baseUrl.host}${baseUrl.pathname}`;\n      }\n      const target = `${join(base, pathname)}${search}${hash}`;\n      return next(target, typeof input === \"string\" ? init : input);\n    };\n  }\n}\n\nclass FetchMiddlewares {\n  static resolvePluginProtocol(options) {\n    return new PluginProtocolResolverFetchMiddleware(options.discoveryApi);\n  }\n  static injectIdentityAuth(options) {\n    return IdentityAuthInjectorFetchMiddleware.create(options);\n  }\n  constructor() {\n  }\n}\n\nfunction hasScopes(searched, searchFor) {\n  for (const scope of searchFor) {\n    if (!searched.has(scope)) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction joinScopes(scopes, ...moreScopess) {\n  const result = new Set(scopes);\n  for (const moreScopes of moreScopess) {\n    for (const scope of moreScopes) {\n      result.add(scope);\n    }\n  }\n  return result;\n}\nclass OAuthPendingRequests {\n  constructor() {\n    this.requests = [];\n    this.subject = new BehaviorSubject(this.getCurrentPending());\n  }\n  request(scopes) {\n    return new Promise((resolve, reject) => {\n      this.requests.push({ scopes, resolve, reject });\n      this.subject.next(this.getCurrentPending());\n    });\n  }\n  resolve(scopes, result) {\n    this.requests = this.requests.filter((request) => {\n      if (hasScopes(scopes, request.scopes)) {\n        request.resolve(result);\n        return false;\n      }\n      return true;\n    });\n    this.subject.next(this.getCurrentPending());\n  }\n  reject(error) {\n    this.requests.forEach((request) => request.reject(error));\n    this.requests = [];\n    this.subject.next(this.getCurrentPending());\n  }\n  pending() {\n    return this.subject;\n  }\n  getCurrentPending() {\n    const currentScopes = this.requests.length === 0 ? void 0 : this.requests.slice(1).reduce((acc, current) => joinScopes(acc, current.scopes), this.requests[0].scopes);\n    return {\n      scopes: currentScopes,\n      resolve: (value) => {\n        if (currentScopes) {\n          this.resolve(currentScopes, value);\n        }\n      },\n      reject: (reason) => {\n        if (currentScopes) {\n          this.reject(reason);\n        }\n      }\n    };\n  }\n}\n\nclass OAuthRequestManager {\n  constructor() {\n    this.subject = new BehaviorSubject([]);\n    this.currentRequests = [];\n    this.handlerCount = 0;\n  }\n  createAuthRequester(options) {\n    const handler = new OAuthPendingRequests();\n    const index = this.handlerCount;\n    this.handlerCount++;\n    handler.pending().subscribe({\n      next: (scopeRequest) => {\n        const newRequests = this.currentRequests.slice();\n        const request = this.makeAuthRequest(scopeRequest, options);\n        if (!request) {\n          delete newRequests[index];\n        } else {\n          newRequests[index] = request;\n        }\n        this.currentRequests = newRequests;\n        this.subject.next(newRequests.filter(Boolean));\n      }\n    });\n    return (scopes) => {\n      return handler.request(scopes);\n    };\n  }\n  makeAuthRequest(request, options) {\n    const { scopes } = request;\n    if (!scopes) {\n      return void 0;\n    }\n    return {\n      provider: options.provider,\n      trigger: async () => {\n        const result = await options.onAuthRequest(scopes);\n        request.resolve(result);\n      },\n      reject: () => {\n        const error = new Error(\"Login failed, rejected by user\");\n        error.name = \"RejectedError\";\n        request.reject(error);\n      }\n    };\n  }\n  authRequest$() {\n    return this.subject;\n  }\n}\n\nconst buckets = /* @__PURE__ */ new Map();\nclass WebStorage {\n  constructor(namespace, errorApi) {\n    this.namespace = namespace;\n    this.errorApi = errorApi;\n    this.subscribers = /* @__PURE__ */ new Set();\n    this.observable = new ObservableImpl((subscriber) => {\n      this.subscribers.add(subscriber);\n      return () => {\n        this.subscribers.delete(subscriber);\n      };\n    });\n  }\n  static create(options) {\n    var _a;\n    return new WebStorage((_a = options.namespace) != null ? _a : \"\", options.errorApi);\n  }\n  get(key) {\n    return this.snapshot(key).value;\n  }\n  snapshot(key) {\n    let value = void 0;\n    let presence = \"absent\";\n    try {\n      const item = localStorage.getItem(this.getKeyName(key));\n      if (item) {\n        value = JSON.parse(item, (_key, val) => {\n          if (typeof val === \"object\" && val !== null) {\n            Object.freeze(val);\n          }\n          return val;\n        });\n        presence = \"present\";\n      }\n    } catch (e) {\n      this.errorApi.post(new Error(`Error when parsing JSON config from storage for: ${key}`));\n    }\n    return { key, value, presence };\n  }\n  forBucket(name) {\n    const bucketPath = `${this.namespace}/${name}`;\n    if (!buckets.has(bucketPath)) {\n      buckets.set(bucketPath, new WebStorage(bucketPath, this.errorApi));\n    }\n    return buckets.get(bucketPath);\n  }\n  async set(key, data) {\n    localStorage.setItem(this.getKeyName(key), JSON.stringify(data));\n    this.notifyChanges(key);\n  }\n  async remove(key) {\n    localStorage.removeItem(this.getKeyName(key));\n    this.notifyChanges(key);\n  }\n  observe$(key) {\n    return this.observable.filter(({ key: messageKey }) => messageKey === key);\n  }\n  getKeyName(key) {\n    return `${this.namespace}/${encodeURIComponent(key)}`;\n  }\n  notifyChanges(key) {\n    const snapshot = this.snapshot(key);\n    for (const subscription of this.subscribers) {\n      subscription.next(snapshot);\n    }\n  }\n}\n\nfunction traverseElementTree(options) {\n  const collectors = {};\n  for (const name in options.collectors) {\n    if (options.collectors.hasOwnProperty(name)) {\n      collectors[name] = options.collectors[name]();\n    }\n  }\n  const queue = [\n    {\n      node: Children.toArray(options.root),\n      parent: void 0,\n      contexts: {}\n    }\n  ];\n  while (queue.length !== 0) {\n    const { node, parent, contexts } = queue.shift();\n    Children.forEach(node, (element) => {\n      if (!isValidElement(element)) {\n        return;\n      }\n      const nextContexts = {};\n      for (const name in collectors) {\n        if (collectors.hasOwnProperty(name)) {\n          const collector = collectors[name];\n          nextContexts[name] = collector.visit(collector.accumulator, element, parent, contexts[name]);\n        }\n      }\n      for (const discoverer of options.discoverers) {\n        const children = discoverer(element);\n        if (children) {\n          queue.push({\n            node: children,\n            parent: element,\n            contexts: nextContexts\n          });\n        }\n      }\n    });\n  }\n  return Object.fromEntries(Object.entries(collectors).map(([name, c]) => [name, c.accumulator]));\n}\nfunction createCollector(accumulatorFactory, visit) {\n  return () => ({ accumulator: accumulatorFactory(), visit });\n}\nfunction childDiscoverer(element) {\n  var _a;\n  return (_a = element.props) == null ? void 0 : _a.children;\n}\nfunction routeElementDiscoverer(element) {\n  var _a, _b, _c;\n  if (((_a = element.props) == null ? void 0 : _a.path) && ((_b = element.props) == null ? void 0 : _b.element)) {\n    return (_c = element.props) == null ? void 0 : _c.element;\n  }\n  return void 0;\n}\n\nconst pluginCollector = createCollector(() => /* @__PURE__ */ new Set(), (acc, node) => {\n  const plugin = getComponentData(node, \"core.plugin\");\n  if (plugin) {\n    acc.add(plugin);\n  }\n});\n\nconst FeatureFlagged = (props) => {\n  const { children } = props;\n  const featureFlagApi = useApi(featureFlagsApiRef);\n  const isEnabled = \"with\" in props ? featureFlagApi.isActive(props.with) : !featureFlagApi.isActive(props.without);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, isEnabled ? children : null);\n};\nattachComponentData(FeatureFlagged, \"core.featureFlagged\", true);\n\nconst MATCH_ALL_ROUTE = {\n  caseSensitive: false,\n  path: \"/*\",\n  element: \"match-all\",\n  routeRefs: /* @__PURE__ */ new Set()\n};\nconst routingV1Collector = createCollector(() => ({\n  paths: /* @__PURE__ */ new Map(),\n  parents: /* @__PURE__ */ new Map(),\n  objects: new Array()\n}), (acc, node, parent, ctx) => {\n  var _a, _b, _c, _d, _e;\n  if ((parent == null ? void 0 : parent.props.element) === node) {\n    return ctx;\n  }\n  let currentObj = ctx == null ? void 0 : ctx.obj;\n  let currentParentRouteRef = ctx == null ? void 0 : ctx.routeRef;\n  let sticky = ctx == null ? void 0 : ctx.sticky;\n  const path = (_a = node.props) == null ? void 0 : _a.path;\n  const parentChildren = (_b = currentObj == null ? void 0 : currentObj.children) != null ? _b : acc.objects;\n  const caseSensitive = Boolean((_c = node.props) == null ? void 0 : _c.caseSensitive);\n  let currentCtxPath = ctx == null ? void 0 : ctx.path;\n  if (getComponentData(node, \"core.gatherMountPoints\")) {\n    if (!path) {\n      throw new Error(\"Mount point gatherer must have a path\");\n    }\n    currentCtxPath = path;\n  }\n  const element = (_d = node.props) == null ? void 0 : _d.element;\n  let routeRef = getComponentData(node, \"core.mountPoint\");\n  if (!routeRef && isValidElement(element)) {\n    routeRef = getComponentData(element, \"core.mountPoint\");\n  }\n  if (routeRef) {\n    let routePath = path;\n    if (currentCtxPath) {\n      if (routePath) {\n        currentCtxPath = void 0;\n      } else {\n        routePath = currentCtxPath;\n      }\n    }\n    if (!routePath) {\n      throw new Error(\"Mounted routable extension must have a path\");\n    }\n    acc.paths.set(routeRef, routePath);\n    if (currentParentRouteRef && sticky) {\n      acc.parents.set(routeRef, currentParentRouteRef);\n      if (path) {\n        currentParentRouteRef = routeRef;\n        sticky = false;\n      }\n    } else {\n      acc.parents.set(routeRef, currentParentRouteRef);\n      currentParentRouteRef = routeRef;\n    }\n    if (path) {\n      currentObj = {\n        caseSensitive,\n        path,\n        element: \"mounted\",\n        routeRefs: /* @__PURE__ */ new Set([routeRef]),\n        children: [MATCH_ALL_ROUTE],\n        plugin: getComponentData(node.props.element, \"core.plugin\")\n      };\n      parentChildren.push(currentObj);\n    } else {\n      currentObj == null ? void 0 : currentObj.routeRefs.add(routeRef);\n    }\n  }\n  if (getComponentData(node, \"core.gatherMountPoints\")) {\n    sticky = true;\n  }\n  const isGatherer = getComponentData(node, \"core.gatherMountPoints\");\n  if (isGatherer) {\n    if (!path) {\n      throw new Error(\"Mount point gatherer must have a path\");\n    }\n    if (!routeRef) {\n      currentObj = {\n        caseSensitive,\n        path,\n        element: \"gathered\",\n        routeRefs: /* @__PURE__ */ new Set(),\n        children: [MATCH_ALL_ROUTE],\n        plugin: (_e = ctx == null ? void 0 : ctx.obj) == null ? void 0 : _e.plugin\n      };\n      parentChildren.push(currentObj);\n    }\n  }\n  return {\n    obj: currentObj,\n    path: currentCtxPath,\n    routeRef: currentParentRouteRef,\n    sticky\n  };\n});\nconst featureFlagCollector = createCollector(() => /* @__PURE__ */ new Set(), (acc, node) => {\n  if (node.type === FeatureFlagged) {\n    const props = node.props;\n    acc.add(\"with\" in props ? props.with : props.without);\n  }\n});\n\nconst routeRefType = getOrCreateGlobalSingleton(\"route-ref-type\", () => Symbol(\"route-ref-type\"));\nfunction isRouteRef(routeRef) {\n  return routeRef[routeRefType] === \"absolute\";\n}\nfunction isSubRouteRef(routeRef) {\n  return routeRef[routeRefType] === \"sub\";\n}\nfunction isExternalRouteRef(routeRef) {\n  return routeRef[routeRefType] === \"external\";\n}\n\nfunction joinPaths(...paths) {\n  const normalized = paths.join(\"/\").replace(/\\/\\/+/g, \"/\");\n  if (normalized !== \"/\" && normalized.endsWith(\"/\")) {\n    return normalized.slice(0, -1);\n  }\n  return normalized;\n}\nfunction resolveTargetRef(anyRouteRef, routePaths, routeBindings) {\n  let targetRef;\n  let subRoutePath = \"\";\n  if (isRouteRef(anyRouteRef)) {\n    targetRef = anyRouteRef;\n  } else if (isSubRouteRef(anyRouteRef)) {\n    targetRef = anyRouteRef.parent;\n    subRoutePath = anyRouteRef.path;\n  } else if (isExternalRouteRef(anyRouteRef)) {\n    const resolvedRoute = routeBindings.get(anyRouteRef);\n    if (!resolvedRoute) {\n      return [void 0, \"\"];\n    }\n    if (isRouteRef(resolvedRoute)) {\n      targetRef = resolvedRoute;\n    } else if (isSubRouteRef(resolvedRoute)) {\n      targetRef = resolvedRoute.parent;\n      subRoutePath = resolvedRoute.path;\n    } else {\n      throw new Error(`ExternalRouteRef was bound to invalid target, ${resolvedRoute}`);\n    }\n  } else if (anyRouteRef[routeRefType]) {\n    throw new Error(`Unknown or invalid route ref type, ${anyRouteRef[routeRefType]}`);\n  } else {\n    throw new Error(`Unknown object passed to useRouteRef, got ${anyRouteRef}`);\n  }\n  if (!targetRef) {\n    return [void 0, \"\"];\n  }\n  const resolvedPath = routePaths.get(targetRef);\n  if (!resolvedPath) {\n    return [void 0, \"\"];\n  }\n  const targetPath = joinPaths(resolvedPath, subRoutePath);\n  return [targetRef, targetPath];\n}\nfunction resolveBasePath(targetRef, sourceLocation, routePaths, routeParents, routeObjects) {\n  var _a;\n  const match = (_a = matchRoutes(routeObjects, sourceLocation)) != null ? _a : [];\n  const refDiffList = Array();\n  let matchIndex = -1;\n  for (let targetSearchRef = targetRef; targetSearchRef; targetSearchRef = routeParents.get(targetSearchRef)) {\n    matchIndex = match.findIndex((m) => m.route.routeRefs.has(targetSearchRef));\n    if (matchIndex !== -1) {\n      break;\n    }\n    refDiffList.unshift(targetSearchRef);\n  }\n  if (refDiffList.length === 0) {\n    matchIndex -= 1;\n  }\n  const parentPath = matchIndex === -1 ? \"\" : match[matchIndex].pathname;\n  const diffPath = joinPaths(...refDiffList.slice(0, -1).map((ref) => {\n    const path = routePaths.get(ref);\n    if (!path) {\n      throw new Error(`No path for ${ref}`);\n    }\n    if (path.includes(\":\")) {\n      throw new Error(`Cannot route to ${targetRef} with parent ${ref} as it has parameters`);\n    }\n    return path;\n  }));\n  return parentPath + diffPath;\n}\nclass RouteResolver {\n  constructor(routePaths, routeParents, routeObjects, routeBindings, appBasePath) {\n    this.routePaths = routePaths;\n    this.routeParents = routeParents;\n    this.routeObjects = routeObjects;\n    this.routeBindings = routeBindings;\n    this.appBasePath = appBasePath;\n  }\n  resolve(anyRouteRef, sourceLocation) {\n    const [targetRef, targetPath] = resolveTargetRef(anyRouteRef, this.routePaths, this.routeBindings);\n    if (!targetRef) {\n      return void 0;\n    }\n    let relativeSourceLocation;\n    if (typeof sourceLocation === \"string\") {\n      relativeSourceLocation = this.trimPath(sourceLocation);\n    } else if (sourceLocation.pathname) {\n      relativeSourceLocation = {\n        ...sourceLocation,\n        pathname: this.trimPath(sourceLocation.pathname)\n      };\n    } else {\n      relativeSourceLocation = sourceLocation;\n    }\n    const basePath = this.appBasePath + resolveBasePath(targetRef, relativeSourceLocation, this.routePaths, this.routeParents, this.routeObjects);\n    const routeFunc = (...[params]) => {\n      return basePath + generatePath(targetPath, params);\n    };\n    return routeFunc;\n  }\n  trimPath(targetPath) {\n    if (!targetPath) {\n      return targetPath;\n    }\n    if (targetPath.startsWith(this.appBasePath)) {\n      return targetPath.slice(this.appBasePath.length);\n    }\n    return targetPath;\n  }\n}\n\nconst RoutingContext = createVersionedContext(\"routing-context\");\nconst RoutingProvider = ({\n  routePaths,\n  routeParents,\n  routeObjects,\n  routeBindings,\n  basePath = \"\",\n  children\n}) => {\n  const resolver = new RouteResolver(routePaths, routeParents, routeObjects, routeBindings, basePath);\n  const versionedValue = createVersionedValueMap({ 1: resolver });\n  return /* @__PURE__ */ React.createElement(RoutingContext.Provider, {\n    value: versionedValue\n  }, children);\n};\n\nconst getExtensionContext = (pathname, routes) => {\n  var _a, _b;\n  try {\n    const matches = matchRoutes(routes, { pathname });\n    const routeObject = (_a = matches == null ? void 0 : matches.filter((match) => {\n      var _a2;\n      return ((_a2 = match == null ? void 0 : match.route.routeRefs) == null ? void 0 : _a2.size) > 0;\n    }).pop()) == null ? void 0 : _a.route;\n    if (!routeObject) {\n      return {};\n    }\n    let routeRef;\n    if (routeObject.routeRefs.size === 1) {\n      routeRef = routeObject.routeRefs.values().next().value;\n    }\n    return {\n      extension: \"App\",\n      pluginId: ((_b = routeObject.plugin) == null ? void 0 : _b.getId()) || \"root\",\n      ...routeRef ? { routeRef: routeRef.id } : {}\n    };\n  } catch {\n    return {};\n  }\n};\nconst TrackNavigation = ({\n  pathname,\n  search,\n  hash\n}) => {\n  const analytics = useAnalytics();\n  useEffect(() => {\n    analytics.captureEvent(\"navigate\", `${pathname}${search}${hash}`);\n  }, [analytics, pathname, search, hash]);\n  return null;\n};\nconst RouteTracker = ({\n  routeObjects\n}) => {\n  const { pathname, search, hash } = useLocation();\n  return /* @__PURE__ */ React.createElement(AnalyticsContext, {\n    attributes: getExtensionContext(pathname, routeObjects)\n  }, /* @__PURE__ */ React.createElement(TrackNavigation, {\n    pathname,\n    search,\n    hash\n  }));\n};\n\nfunction validateRouteParameters(routePaths, routeParents) {\n  const notLeafRoutes = new Set(routeParents.values());\n  notLeafRoutes.delete(void 0);\n  for (const route of routeParents.keys()) {\n    if (notLeafRoutes.has(route)) {\n      continue;\n    }\n    let currentRouteRef = route;\n    let fullPath = \"\";\n    while (currentRouteRef) {\n      const path = routePaths.get(currentRouteRef);\n      if (!path) {\n        throw new Error(`No path for ${currentRouteRef}`);\n      }\n      fullPath = `${path}${fullPath}`;\n      currentRouteRef = routeParents.get(currentRouteRef);\n    }\n    const params = fullPath.match(/:(\\w+)/g);\n    if (params) {\n      for (let j = 0; j < params.length; j++) {\n        for (let i = j + 1; i < params.length; i++) {\n          if (params[i] === params[j]) {\n            throw new Error(`Parameter ${params[i]} is duplicated in path ${fullPath}`);\n          }\n        }\n      }\n    }\n  }\n}\nfunction validateRouteBindings(routeBindings, plugins) {\n  for (const plugin of plugins) {\n    if (!plugin.externalRoutes) {\n      continue;\n    }\n    for (const [name, externalRouteRef] of Object.entries(plugin.externalRoutes)) {\n      if (externalRouteRef.optional) {\n        continue;\n      }\n      if (!routeBindings.has(externalRouteRef)) {\n        throw new Error(`External route '${name}' of the '${plugin.getId()}' plugin must be bound to a target route. See https://backstage.io/link?bind-routes for details.`);\n      }\n    }\n  }\n}\n\nconst AppContext = createVersionedContext(\"app-context\");\nconst AppContextProvider = ({\n  appContext,\n  children\n}) => {\n  const versionedValue = createVersionedValueMap({ 1: appContext });\n  return /* @__PURE__ */ React.createElement(AppContext.Provider, {\n    value: versionedValue,\n    children\n  });\n};\n\nfunction mkError(thing) {\n  return new Error(`Tried to access IdentityApi ${thing} before app was loaded`);\n}\nfunction logDeprecation(thing) {\n  console.warn(`WARNING: Call to ${thing} is deprecated and will break in the future`);\n}\nclass AppIdentityProxy {\n  constructor() {\n    this.resolveTarget = () => {\n    };\n    this.waitForTarget = new Promise((resolve) => {\n      this.resolveTarget = resolve;\n    });\n  }\n  setTarget(identityApi) {\n    this.target = identityApi;\n    this.resolveTarget(identityApi);\n  }\n  getUserId() {\n    if (!this.target) {\n      throw mkError(\"getUserId\");\n    }\n    if (!this.target.getUserId) {\n      throw new Error(\"IdentityApi does not implement getUserId\");\n    }\n    logDeprecation(\"getUserId\");\n    return this.target.getUserId();\n  }\n  getProfile() {\n    if (!this.target) {\n      throw mkError(\"getProfile\");\n    }\n    if (!this.target.getProfile) {\n      throw new Error(\"IdentityApi does not implement getProfile\");\n    }\n    logDeprecation(\"getProfile\");\n    return this.target.getProfile();\n  }\n  async getProfileInfo() {\n    return this.waitForTarget.then((target) => target.getProfileInfo());\n  }\n  async getBackstageIdentity() {\n    const identity = await this.waitForTarget.then((target) => target.getBackstageIdentity());\n    if (!identity.userEntityRef.match(/^.*:.*\\/.*$/)) {\n      console.warn(`WARNING: The App IdentityApi provided an invalid userEntityRef, '${identity.userEntityRef}'. It must be a full Entity Reference of the form '<kind>:<namespace>/<name>'.`);\n    }\n    return identity;\n  }\n  async getCredentials() {\n    return this.waitForTarget.then((target) => target.getCredentials());\n  }\n  async getIdToken() {\n    return this.waitForTarget.then((target) => {\n      if (!target.getIdToken) {\n        throw new Error(\"IdentityApi does not implement getIdToken\");\n      }\n      logDeprecation(\"getIdToken\");\n      return target.getIdToken();\n    });\n  }\n  async signOut() {\n    await this.waitForTarget.then((target) => target.signOut());\n    location.reload();\n  }\n}\n\nfunction resolveTheme(themeId, shouldPreferDark, themes) {\n  if (themeId !== void 0) {\n    const selectedTheme = themes.find((theme) => theme.id === themeId);\n    if (selectedTheme) {\n      return selectedTheme;\n    }\n  }\n  if (shouldPreferDark) {\n    const darkTheme = themes.find((theme) => theme.variant === \"dark\");\n    if (darkTheme) {\n      return darkTheme;\n    }\n  }\n  const lightTheme = themes.find((theme) => theme.variant === \"light\");\n  if (lightTheme) {\n    return lightTheme;\n  }\n  return themes[0];\n}\nconst useShouldPreferDarkTheme = () => {\n  const mediaQuery = useMemo(() => window.matchMedia(\"(prefers-color-scheme: dark)\"), []);\n  const [shouldPreferDark, setPrefersDark] = useState(mediaQuery.matches);\n  useEffect(() => {\n    const listener = (event) => {\n      setPrefersDark(event.matches);\n    };\n    mediaQuery.addListener(listener);\n    return () => {\n      mediaQuery.removeListener(listener);\n    };\n  }, [mediaQuery]);\n  return shouldPreferDark;\n};\nfunction AppThemeProvider({ children }) {\n  const appThemeApi = useApi(appThemeApiRef);\n  const themeId = useObservable(appThemeApi.activeThemeId$(), appThemeApi.getActiveThemeId());\n  const shouldPreferDark = Boolean(window.matchMedia) ? useShouldPreferDarkTheme() : false;\n  const appTheme = resolveTheme(themeId, shouldPreferDark, appThemeApi.getInstalledThemes());\n  if (!appTheme) {\n    throw new Error(\"App has no themes\");\n  }\n  return /* @__PURE__ */ React.createElement(appTheme.Provider, {\n    children\n  });\n}\n\nconst defaultConfigLoader = async (runtimeConfigJson = \"__APP_INJECTED_RUNTIME_CONFIG__\") => {\n  const appConfig = process.env.APP_CONFIG;\n  if (!appConfig) {\n    throw new Error(\"No static configuration provided\");\n  }\n  if (!Array.isArray(appConfig)) {\n    throw new Error(\"Static configuration has invalid format\");\n  }\n  const configs = appConfig.slice();\n  if (runtimeConfigJson !== \"__app_injected_runtime_config__\".toLocaleUpperCase(\"en-US\")) {\n    try {\n      const data = JSON.parse(runtimeConfigJson);\n      if (Array.isArray(data)) {\n        configs.push(...data);\n      } else {\n        configs.push({ data, context: \"env\" });\n      }\n    } catch (error) {\n      throw new Error(`Failed to load runtime configuration, ${error}`);\n    }\n  }\n  const windowAppConfig = window.__APP_CONFIG__;\n  if (windowAppConfig) {\n    configs.push({\n      context: \"window\",\n      data: windowAppConfig\n    });\n  }\n  return configs;\n};\n\nclass ApiRegistryBuilder {\n  constructor() {\n    this.apis = [];\n  }\n  add(api, impl) {\n    this.apis.push([api.id, impl]);\n    return impl;\n  }\n  build() {\n    return new ApiRegistry(new Map(this.apis));\n  }\n}\nclass ApiRegistry {\n  constructor(apis) {\n    this.apis = apis;\n  }\n  static builder() {\n    return new ApiRegistryBuilder();\n  }\n  static from(apis) {\n    return new ApiRegistry(new Map(apis.map(([api, impl]) => [api.id, impl])));\n  }\n  static with(api, impl) {\n    return new ApiRegistry(/* @__PURE__ */ new Map([[api.id, impl]]));\n  }\n  with(api, impl) {\n    return new ApiRegistry(new Map([...this.apis, [api.id, impl]]));\n  }\n  get(api) {\n    return this.apis.get(api.id);\n  }\n}\n\nfunction resolveRouteBindings(bindRoutes) {\n  const result = /* @__PURE__ */ new Map();\n  if (bindRoutes) {\n    const bind = (externalRoutes, targetRoutes) => {\n      for (const [key, value] of Object.entries(targetRoutes)) {\n        const externalRoute = externalRoutes[key];\n        if (!externalRoute) {\n          throw new Error(`Key ${key} is not an existing external route`);\n        }\n        if (!value && !externalRoute.optional) {\n          throw new Error(`External route ${key} is required but was undefined`);\n        }\n        if (value) {\n          result.set(externalRoute, value);\n        }\n      }\n    };\n    bindRoutes({ bind });\n  }\n  return result;\n}\n\nconst InternalAppContext = createContext({ routeObjects: [] });\nfunction getBasePath(configApi) {\n  var _a;\n  let { pathname } = new URL((_a = configApi.getOptionalString(\"app.baseUrl\")) != null ? _a : \"/\", \"http://dummy.dev\");\n  pathname = pathname.replace(/\\/*$/, \"\");\n  return pathname;\n}\nfunction useConfigLoader(configLoader, components, appThemeApi) {\n  var _a;\n  const hasConfig = Boolean(configLoader);\n  const config = useAsync(configLoader || (() => Promise.resolve([])));\n  let noConfigNode = void 0;\n  if (hasConfig && config.loading) {\n    const { Progress } = components;\n    noConfigNode = /* @__PURE__ */ React.createElement(Progress, null);\n  } else if (config.error) {\n    const { BootErrorPage } = components;\n    noConfigNode = /* @__PURE__ */ React.createElement(BootErrorPage, {\n      step: \"load-config\",\n      error: config.error\n    });\n  }\n  const { ThemeProvider = AppThemeProvider } = components;\n  if (noConfigNode) {\n    return {\n      node: /* @__PURE__ */ React.createElement(ApiProvider, {\n        apis: ApiRegistry.with(appThemeApiRef, appThemeApi)\n      }, /* @__PURE__ */ React.createElement(ThemeProvider, null, noConfigNode))\n    };\n  }\n  const configReader = ConfigReader.fromConfigs((_a = config.value) != null ? _a : []);\n  return { api: configReader };\n}\nclass AppContextImpl {\n  constructor(app) {\n    this.app = app;\n  }\n  getPlugins() {\n    return this.app.getPlugins();\n  }\n  getSystemIcon(key) {\n    return this.app.getSystemIcon(key);\n  }\n  getComponents() {\n    return this.app.getComponents();\n  }\n}\nclass AppManager {\n  constructor(options) {\n    this.appIdentityProxy = new AppIdentityProxy();\n    var _a, _b, _c, _d;\n    this.apis = (_a = options.apis) != null ? _a : [];\n    this.icons = options.icons;\n    this.plugins = new Set((_b = options.plugins) != null ? _b : []);\n    this.components = options.components;\n    this.themes = options.themes;\n    this.configLoader = (_c = options.configLoader) != null ? _c : defaultConfigLoader;\n    this.defaultApis = (_d = options.defaultApis) != null ? _d : [];\n    this.bindRoutes = options.bindRoutes;\n    this.apiFactoryRegistry = new ApiFactoryRegistry();\n  }\n  getPlugins() {\n    return Array.from(this.plugins);\n  }\n  getSystemIcon(key) {\n    return this.icons[key];\n  }\n  getComponents() {\n    return this.components;\n  }\n  getProvider() {\n    const appContext = new AppContextImpl(this);\n    let routesHaveBeenValidated = false;\n    const Provider = ({ children }) => {\n      const appThemeApi = useMemo(() => AppThemeSelector.createWithStorage(this.themes), []);\n      const { routing, featureFlags, routeBindings } = useMemo(() => {\n        const result = traverseElementTree({\n          root: children,\n          discoverers: [childDiscoverer, routeElementDiscoverer],\n          collectors: {\n            routing: routingV1Collector,\n            collectedPlugins: pluginCollector,\n            featureFlags: featureFlagCollector\n          }\n        });\n        result.collectedPlugins.forEach((plugin) => this.plugins.add(plugin));\n        this.verifyPlugins(this.plugins);\n        this.getApiHolder();\n        return {\n          ...result,\n          routeBindings: resolveRouteBindings(this.bindRoutes)\n        };\n      }, [children]);\n      if (!routesHaveBeenValidated) {\n        routesHaveBeenValidated = true;\n        validateRouteParameters(routing.paths, routing.parents);\n        validateRouteBindings(routeBindings, this.plugins);\n      }\n      const loadedConfig = useConfigLoader(this.configLoader, this.components, appThemeApi);\n      const hasConfigApi = \"api\" in loadedConfig;\n      if (hasConfigApi) {\n        const { api } = loadedConfig;\n        this.configApi = api;\n      }\n      useEffect(() => {\n        if (hasConfigApi) {\n          const featureFlagsApi = this.getApiHolder().get(featureFlagsApiRef);\n          for (const plugin of this.plugins.values()) {\n            if (\"getFeatureFlags\" in plugin) {\n              for (const flag of plugin.getFeatureFlags()) {\n                featureFlagsApi.registerFlag({\n                  name: flag.name,\n                  pluginId: plugin.getId()\n                });\n              }\n            } else {\n              for (const output of plugin.output()) {\n                if (output.type === \"feature-flag\") {\n                  featureFlagsApi.registerFlag({\n                    name: output.name,\n                    pluginId: plugin.getId()\n                  });\n                }\n              }\n            }\n          }\n          for (const name of featureFlags) {\n            featureFlagsApi.registerFlag({ name, pluginId: \"\" });\n          }\n        }\n      }, [hasConfigApi, loadedConfig, featureFlags]);\n      if (\"node\" in loadedConfig) {\n        return loadedConfig.node;\n      }\n      const { ThemeProvider = AppThemeProvider } = this.components;\n      return /* @__PURE__ */ React.createElement(ApiProvider, {\n        apis: this.getApiHolder()\n      }, /* @__PURE__ */ React.createElement(AppContextProvider, {\n        appContext\n      }, /* @__PURE__ */ React.createElement(ThemeProvider, null, /* @__PURE__ */ React.createElement(RoutingProvider, {\n        routePaths: routing.paths,\n        routeParents: routing.parents,\n        routeObjects: routing.objects,\n        routeBindings,\n        basePath: getBasePath(loadedConfig.api)\n      }, /* @__PURE__ */ React.createElement(InternalAppContext.Provider, {\n        value: { routeObjects: routing.objects }\n      }, children)))));\n    };\n    return Provider;\n  }\n  getRouter() {\n    const { Router: RouterComponent, SignInPage: SignInPageComponent } = this.components;\n    const SignInPageWrapper = ({\n      component: Component,\n      children\n    }) => {\n      const [identityApi, setIdentityApi] = useState();\n      if (!identityApi) {\n        return /* @__PURE__ */ React.createElement(Component, {\n          onSignInSuccess: setIdentityApi\n        });\n      }\n      this.appIdentityProxy.setTarget(identityApi);\n      return children;\n    };\n    const AppRouter = ({ children }) => {\n      const configApi = useApi(configApiRef);\n      const mountPath = `${getBasePath(configApi)}/*`;\n      const { routeObjects } = useContext(InternalAppContext);\n      if (!SignInPageComponent) {\n        this.appIdentityProxy.setTarget({\n          getUserId: () => \"guest\",\n          getIdToken: async () => void 0,\n          getProfile: () => ({\n            email: \"guest@example.com\",\n            displayName: \"Guest\"\n          }),\n          getProfileInfo: async () => ({\n            email: \"guest@example.com\",\n            displayName: \"Guest\"\n          }),\n          getBackstageIdentity: async () => ({\n            type: \"user\",\n            userEntityRef: \"user:default/guest\",\n            ownershipEntityRefs: [\"user:default/guest\"]\n          }),\n          getCredentials: async () => ({}),\n          signOut: async () => {\n          }\n        });\n        return /* @__PURE__ */ React.createElement(RouterComponent, null, /* @__PURE__ */ React.createElement(RouteTracker, {\n          routeObjects\n        }), /* @__PURE__ */ React.createElement(Routes, null, /* @__PURE__ */ React.createElement(Route, {\n          path: mountPath,\n          element: /* @__PURE__ */ React.createElement(React.Fragment, null, children)\n        })));\n      }\n      return /* @__PURE__ */ React.createElement(RouterComponent, null, /* @__PURE__ */ React.createElement(RouteTracker, {\n        routeObjects\n      }), /* @__PURE__ */ React.createElement(SignInPageWrapper, {\n        component: SignInPageComponent\n      }, /* @__PURE__ */ React.createElement(Routes, null, /* @__PURE__ */ React.createElement(Route, {\n        path: mountPath,\n        element: /* @__PURE__ */ React.createElement(React.Fragment, null, children)\n      }))));\n    };\n    return AppRouter;\n  }\n  getApiHolder() {\n    if (this.apiHolder) {\n      for (const plugin of this.plugins) {\n        for (const factory of plugin.getApis()) {\n          if (!this.apiFactoryRegistry.get(factory.api)) {\n            this.apiFactoryRegistry.register(\"default\", factory);\n          }\n        }\n      }\n      ApiResolver.validateFactories(this.apiFactoryRegistry, this.apiFactoryRegistry.getAllApis());\n      return this.apiHolder;\n    }\n    this.apiFactoryRegistry.register(\"static\", {\n      api: appThemeApiRef,\n      deps: {},\n      factory: () => AppThemeSelector.createWithStorage(this.themes)\n    });\n    this.apiFactoryRegistry.register(\"static\", {\n      api: configApiRef,\n      deps: {},\n      factory: () => {\n        if (!this.configApi) {\n          throw new Error(\"Tried to access config API before config was loaded\");\n        }\n        return this.configApi;\n      }\n    });\n    this.apiFactoryRegistry.register(\"static\", {\n      api: identityApiRef,\n      deps: {},\n      factory: () => this.appIdentityProxy\n    });\n    this.apiFactoryRegistry.register(\"default\", {\n      api: featureFlagsApiRef,\n      deps: {},\n      factory: () => new LocalStorageFeatureFlags()\n    });\n    for (const factory of this.defaultApis) {\n      this.apiFactoryRegistry.register(\"default\", factory);\n    }\n    for (const plugin of this.plugins) {\n      for (const factory of plugin.getApis()) {\n        if (!this.apiFactoryRegistry.register(\"default\", factory)) {\n          throw new Error(`Plugin ${plugin.getId()} tried to register duplicate or forbidden API factory for ${factory.api}`);\n        }\n      }\n    }\n    for (const factory of this.apis) {\n      if (!this.apiFactoryRegistry.register(\"app\", factory)) {\n        throw new Error(`Duplicate or forbidden API factory for ${factory.api} in app`);\n      }\n    }\n    ApiResolver.validateFactories(this.apiFactoryRegistry, this.apiFactoryRegistry.getAllApis());\n    this.apiHolder = new ApiResolver(this.apiFactoryRegistry);\n    return this.apiHolder;\n  }\n  verifyPlugins(plugins) {\n    const pluginIds = /* @__PURE__ */ new Set();\n    for (const plugin of plugins) {\n      const id = plugin.getId();\n      if (pluginIds.has(id)) {\n        throw new Error(`Duplicate plugin found '${id}'`);\n      }\n      pluginIds.add(id);\n    }\n  }\n}\n\nfunction createSpecializedApp(options) {\n  return new AppManager(options);\n}\n\nconst FlatRoutes = (props) => {\n  const app = useApp();\n  const { NotFoundErrorPage } = app.getComponents();\n  const routes = useElementFilter(props.children, (elements) => elements.getElements().flatMap((child) => {\n    var _a;\n    let path = child.props.path;\n    if (path === \"\") {\n      return [];\n    }\n    path = (_a = path == null ? void 0 : path.replace(/\\/\\*$/, \"\")) != null ? _a : \"/\";\n    return [\n      {\n        path,\n        element: child,\n        children: child.props.children ? [\n          {\n            path: path === \"/\" ? \"/\" : \"/*\",\n            element: child.props.children\n          }\n        ] : void 0\n      }\n    ];\n  }).sort((a, b) => b.path.localeCompare(a.path)).map((obj) => {\n    obj.path = obj.path === \"/\" ? \"/\" : `${obj.path}/*`;\n    return obj;\n  }));\n  routes.push({\n    element: /* @__PURE__ */ React.createElement(NotFoundErrorPage, null),\n    path: \"/*\"\n  });\n  return useRoutes(routes);\n};\n\nexport { AlertApiForwarder, ApiFactoryRegistry, ApiProvider, ApiResolver, AppThemeSelector, AtlassianAuth, BitbucketAuth, ErrorAlerter, ErrorApiForwarder, FeatureFlagged, FetchMiddlewares, FlatRoutes, GithubAuth, GitlabAuth, GoogleAuth, LocalStorageFeatureFlags, MicrosoftAuth, NoOpAnalyticsApi, OAuth2, OAuthRequestManager, OktaAuth, OneLoginAuth, SamlAuth, UnhandledErrorForwarder, UrlPatternDiscovery, WebStorage, createFetchApi, createSpecializedApp, defaultConfigLoader };\n//# sourceMappingURL=index.esm.js.map\n","import React, { useState, useEffect, useRef, useCallback, useLayoutEffect, lazy, Suspense, useMemo, Component as Component$3, Children, isValidElement, useContext, Fragment, createContext, forwardRef } from 'react';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { Alert } from '@material-ui/lab';\nimport { useApi, alertApiRef, useAnalytics, errorApiRef, storageApiRef, useApp, oauthRequestApiRef, useApiHolder, configApiRef, useElementFilter, attachComponentData, discoveryApiRef } from '@backstage/core-plugin-api';\nimport pluralize from 'pluralize';\nimport { makeStyles, createStyles, useTheme, darken, lighten, withStyles, styled, ThemeProvider } from '@material-ui/core/styles';\nimport MaterialAvatar from '@material-ui/core/Avatar';\nimport Button$1 from '@material-ui/core/Button';\nimport Link$1 from '@material-ui/core/Link';\nimport { Link as Link$2, useSearchParams, useLocation, useResolvedPath, resolvePath } from 'react-router-dom';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport CopyIcon from '@material-ui/icons/FileCopy';\nimport useCopyToClipboard from 'react-use/lib/useCopyToClipboard';\nimport { LightAsync } from 'react-syntax-highlighter';\nimport dark from 'react-syntax-highlighter/dist/esm/styles/hljs/dark';\nimport docco from 'react-syntax-highlighter/dist/esm/styles/hljs/docco';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport AddCircleOutline from '@material-ui/icons/AddCircleOutline';\nimport * as d3Zoom from 'd3-zoom';\nimport * as d3Selection from 'd3-selection';\nimport useTheme$1 from '@material-ui/core/styles/useTheme';\nimport dagre from 'dagre';\nimport debounce from 'lodash/debounce';\nimport makeStyles$1 from '@material-ui/core/styles/makeStyles';\nimport * as d3Shape from 'd3-shape';\nimport isFinite from 'lodash/isFinite';\nimport useObservable from 'react-use/lib/useObservable';\nimport classNames from 'classnames';\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport missingAnnotation from './components/EmptyState/assets/missingAnnotation.svg';\nimport noInformation from './components/EmptyState/assets/noInformation.svg';\nimport createComponent from './components/EmptyState/assets/createComponent.svg';\nimport noBuild from './components/EmptyState/assets/noBuild.svg';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Accordion from '@material-ui/core/Accordion';\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\nimport ErrorOutline from '@material-ui/icons/ErrorOutline';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport Divider from '@material-ui/core/Divider';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport { createPortal } from 'react-dom';\nimport LinkIcon from '@material-ui/icons/Link';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRight from '@material-ui/icons/ChevronRight';\nimport ReactMarkdown from 'react-markdown';\nimport gfm from 'remark-gfm';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport { isError, ResponseError, ForwardedError } from '@backstage/errors';\nimport TextTruncate from 'react-text-truncate';\nimport { useIsMounted, useDebouncedEffect, useLocalStorageValue, useAsync, useMountEffect } from '@react-hookz/web';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport Box from '@material-ui/core/Box';\nimport ArrowIcon from '@material-ui/icons/ArrowForward';\nimport { Circle, Line } from 'rc-progress';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Chip from '@material-ui/core/Chip';\nimport FormControl from '@material-ui/core/FormControl';\nimport InputBase from '@material-ui/core/InputBase';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport SvgIcon from '@material-ui/core/SvgIcon';\nimport MuiStepper from '@material-ui/core/Stepper';\nimport MuiStep from '@material-ui/core/Step';\nimport StepContent from '@material-ui/core/StepContent';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport startCase from 'lodash/startCase';\nimport Table$1 from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport Popover from '@material-ui/core/Popover';\nimport { isEqual, orderBy, isMatch, transform } from 'lodash';\nimport qs from 'qs';\nimport MuiBrokenImageIcon from '@material-ui/icons/BrokenImage';\nimport { Helmet } from 'react-helmet';\nimport { useLocation as useLocation$1, useNavigate, useParams, useRoutes, matchRoutes } from 'react-router';\nimport BottomNavigation from '@material-ui/core/BottomNavigation';\nimport Drawer from '@material-ui/core/Drawer';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport ArrowDropUpIcon from '@material-ui/icons/ArrowDropUp';\nimport Badge from '@material-ui/core/Badge';\nimport TextField from '@material-ui/core/TextField';\nimport ArrowRightIcon from '@material-ui/icons/ArrowRight';\nimport SearchIcon from '@material-ui/icons/Search';\nimport Collapse from '@material-ui/core/Collapse';\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\nimport Tab from '@material-ui/core/Tab';\nimport Tabs$1 from '@material-ui/core/Tabs';\nimport AddBox from '@material-ui/icons/AddBox';\nimport ArrowUpward from '@material-ui/icons/ArrowUpward';\nimport Check from '@material-ui/icons/Check';\nimport Clear from '@material-ui/icons/Clear';\nimport DeleteOutline from '@material-ui/icons/DeleteOutline';\nimport Edit from '@material-ui/icons/Edit';\nimport FilterList from '@material-ui/icons/FilterList';\nimport FirstPage from '@material-ui/icons/FirstPage';\nimport LastPage from '@material-ui/icons/LastPage';\nimport Remove from '@material-ui/icons/Remove';\nimport SaveAlt from '@material-ui/icons/SaveAlt';\nimport ViewColumn from '@material-ui/icons/ViewColumn';\nimport MTable, { MTableHeader, MTableToolbar, MTableBody } from '@material-table/core';\nimport AppBar from '@material-ui/core/AppBar';\nimport NavigateBeforeIcon from '@material-ui/icons/NavigateBefore';\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext';\nimport useWindowSize from 'react-use/lib/useWindowSize';\nimport { Sparklines, SparklinesLine } from 'react-sparklines';\nimport MicDropSvgUrl from './layout/ErrorPage/mic-drop.svg';\nimport MaterialBreadcrumbs from '@material-ui/core/Breadcrumbs';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport { z } from 'zod';\nimport { useForm } from 'react-hook-form';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport isEmpty from 'lodash/isEmpty';\n\nfunction AlertDisplay(_props) {\n  const [messages, setMessages] = useState([]);\n  const alertApi = useApi(alertApiRef);\n  useEffect(() => {\n    const subscription = alertApi.alert$().subscribe((message) => setMessages((msgs) => msgs.concat(message)));\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, [alertApi]);\n  if (messages.length === 0) {\n    return null;\n  }\n  const [firstMessage] = messages;\n  const handleClose = () => {\n    setMessages((msgs) => msgs.filter((msg) => msg !== firstMessage));\n  };\n  return /* @__PURE__ */ React.createElement(Snackbar, {\n    open: true,\n    anchorOrigin: { vertical: \"top\", horizontal: \"center\" }\n  }, /* @__PURE__ */ React.createElement(Alert, {\n    action: /* @__PURE__ */ React.createElement(IconButton, {\n      color: \"inherit\",\n      size: \"small\",\n      onClick: handleClose,\n      \"data-testid\": \"error-button-close\"\n    }, /* @__PURE__ */ React.createElement(CloseIcon, null)),\n    severity: firstMessage.severity\n  }, /* @__PURE__ */ React.createElement(\"span\", null, firstMessage.message.toString(), messages.length > 1 && /* @__PURE__ */ React.createElement(\"em\", null, ` (${messages.length - 1} older ${pluralize(\"message\", messages.length - 1)})`))));\n}\n\nfunction stringToColor(str) {\n  let hash = 0;\n  for (let i = 0; i < str.length; i++) {\n    hash = str.charCodeAt(i) + ((hash << 5) - hash);\n  }\n  let color = \"#\";\n  for (let i = 0; i < 3; i++) {\n    const value = hash >> i * 8 & 255;\n    color += `00${value.toString(16)}`.substr(-2);\n  }\n  return color;\n}\nfunction extractInitials(value) {\n  var _a;\n  return (_a = value.match(/\\b\\w/g)) == null ? void 0 : _a.join(\"\").substring(0, 2);\n}\n\nconst useStyles$R = makeStyles((theme) => createStyles({\n  avatar: {\n    width: \"4rem\",\n    height: \"4rem\",\n    color: \"#fff\",\n    fontWeight: theme.typography.fontWeightBold,\n    letterSpacing: \"1px\",\n    textTransform: \"uppercase\"\n  }\n}), { name: \"BackstageAvatar\" });\nfunction Avatar(props) {\n  const { displayName, picture, customStyles } = props;\n  const classes = useStyles$R();\n  return /* @__PURE__ */ React.createElement(MaterialAvatar, {\n    alt: displayName,\n    src: picture,\n    className: classes.avatar,\n    style: {\n      backgroundColor: stringToColor(displayName || picture || \"\"),\n      ...customStyles\n    }\n  }, displayName && extractInitials(displayName));\n}\n\nconst isExternalUri = (uri) => /^([a-z+.-]+):/.test(uri);\nconst getNodeText = (node) => {\n  var _a;\n  if (node instanceof Array) {\n    return node.map(getNodeText).join(\" \").trim();\n  }\n  if (typeof node === \"object\" && node) {\n    return getNodeText((_a = node == null ? void 0 : node.props) == null ? void 0 : _a.children);\n  }\n  if ([\"string\", \"number\"].includes(typeof node)) {\n    return String(node);\n  }\n  return \"\";\n};\nconst Link = React.forwardRef(({ onClick, noTrack, ...props }, ref) => {\n  const analytics = useAnalytics();\n  const to = String(props.to);\n  const linkText = getNodeText(props.children) || to;\n  const external = isExternalUri(to);\n  const newWindow = external && !!/^https?:/.exec(to);\n  const handleClick = (event) => {\n    onClick == null ? void 0 : onClick(event);\n    if (!noTrack) {\n      analytics.captureEvent(\"click\", linkText, { attributes: { to } });\n    }\n  };\n  return external ? /* @__PURE__ */ React.createElement(Link$1, {\n    ref,\n    href: to,\n    onClick: handleClick,\n    ...newWindow ? { target: \"_blank\", rel: \"noopener\" } : {},\n    ...props\n  }) : /* @__PURE__ */ React.createElement(Link$1, {\n    ref,\n    component: Link$2,\n    onClick: handleClick,\n    ...props\n  });\n});\n\nconst LinkWrapper = React.forwardRef((props, ref) => /* @__PURE__ */ React.createElement(Link, {\n  ref,\n  ...props,\n  color: \"initial\"\n}));\nconst Button = React.forwardRef((props, ref) => /* @__PURE__ */ React.createElement(Button$1, {\n  ref,\n  component: LinkWrapper,\n  ...props\n}));\n\nfunction CopyTextButton(props) {\n  const {\n    text,\n    tooltipDelay = 1e3,\n    tooltipText = \"Text copied to clipboard\"\n  } = props;\n  const errorApi = useApi(errorApiRef);\n  const [open, setOpen] = useState(false);\n  const [{ error }, copyToClipboard] = useCopyToClipboard();\n  useEffect(() => {\n    if (error) {\n      errorApi.post(error);\n    }\n  }, [error, errorApi]);\n  const handleCopyClick = (e) => {\n    e.stopPropagation();\n    setOpen(true);\n    copyToClipboard(text);\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Tooltip, {\n    id: \"copy-test-tooltip\",\n    title: tooltipText,\n    placement: \"top\",\n    leaveDelay: tooltipDelay,\n    onClose: () => setOpen(false),\n    open\n  }, /* @__PURE__ */ React.createElement(IconButton, {\n    onClick: handleCopyClick\n  }, /* @__PURE__ */ React.createElement(CopyIcon, null))));\n}\n\nfunction CodeSnippet(props) {\n  const {\n    text,\n    language,\n    showLineNumbers = false,\n    highlightedNumbers,\n    customStyle,\n    showCopyCodeButton = false\n  } = props;\n  const theme = useTheme();\n  const mode = theme.palette.type === \"dark\" ? dark : docco;\n  const highlightColor = theme.palette.type === \"dark\" ? \"#256bf3\" : \"#e6ffed\";\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    style: { position: \"relative\" }\n  }, /* @__PURE__ */ React.createElement(LightAsync, {\n    customStyle,\n    language,\n    style: mode,\n    showLineNumbers,\n    wrapLines: true,\n    lineNumberStyle: { color: theme.palette.textVerySubtle },\n    lineProps: (lineNumber) => (highlightedNumbers == null ? void 0 : highlightedNumbers.includes(lineNumber)) ? {\n      style: {\n        backgroundColor: highlightColor\n      }\n    } : {}\n  }, text), showCopyCodeButton && /* @__PURE__ */ React.createElement(\"div\", {\n    style: { position: \"absolute\", top: 0, right: 0 }\n  }, /* @__PURE__ */ React.createElement(CopyTextButton, {\n    text\n  })));\n}\n\nfunction CreateButton(props) {\n  const { title, to } = props;\n  const isXSScreen = useMediaQuery((theme) => theme.breakpoints.down(\"xs\"));\n  if (!to) {\n    return null;\n  }\n  return isXSScreen ? /* @__PURE__ */ React.createElement(IconButton, {\n    component: Link$2,\n    color: \"primary\",\n    title,\n    size: \"small\",\n    to\n  }, /* @__PURE__ */ React.createElement(AddCircleOutline, null)) : /* @__PURE__ */ React.createElement(Button$1, {\n    component: Link$2,\n    variant: \"contained\",\n    color: \"primary\",\n    to\n  }, title);\n}\n\nvar Direction = /* @__PURE__ */ ((Direction2) => {\n  Direction2[\"TOP_BOTTOM\"] = \"TB\";\n  Direction2[\"BOTTOM_TOP\"] = \"BT\";\n  Direction2[\"LEFT_RIGHT\"] = \"LR\";\n  Direction2[\"RIGHT_LEFT\"] = \"RL\";\n  return Direction2;\n})(Direction || {});\nvar Alignment = /* @__PURE__ */ ((Alignment2) => {\n  Alignment2[\"UP_LEFT\"] = \"UL\";\n  Alignment2[\"UP_RIGHT\"] = \"UR\";\n  Alignment2[\"DOWN_LEFT\"] = \"DL\";\n  Alignment2[\"DOWN_RIGHT\"] = \"DR\";\n  return Alignment2;\n})(Alignment || {});\nvar Ranker = /* @__PURE__ */ ((Ranker2) => {\n  Ranker2[\"NETWORK_SIMPLEX\"] = \"network-simplex\";\n  Ranker2[\"TIGHT_TREE\"] = \"tight-tree\";\n  Ranker2[\"LONGEST_PATH\"] = \"longest-path\";\n  return Ranker2;\n})(Ranker || {});\nvar LabelPosition = /* @__PURE__ */ ((LabelPosition2) => {\n  LabelPosition2[\"LEFT\"] = \"l\";\n  LabelPosition2[\"RIGHT\"] = \"r\";\n  LabelPosition2[\"CENTER\"] = \"c\";\n  return LabelPosition2;\n})(LabelPosition || {});\n\nvar types = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  Direction: Direction,\n  Alignment: Alignment,\n  Ranker: Ranker,\n  LabelPosition: LabelPosition\n});\n\nconst useStyles$Q = makeStyles((theme) => ({\n  node: {\n    fill: theme.palette.primary.light,\n    stroke: theme.palette.primary.light\n  },\n  text: {\n    fill: theme.palette.primary.contrastText\n  }\n}), { name: \"BackstageDependencyGraphDefaultNode\" });\nfunction DefaultNode({ node: { id } }) {\n  const classes = useStyles$Q();\n  const [width, setWidth] = React.useState(0);\n  const [height, setHeight] = React.useState(0);\n  const idRef = React.useRef(null);\n  React.useLayoutEffect(() => {\n    if (idRef.current) {\n      let { height: renderedHeight, width: renderedWidth } = idRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setWidth(renderedWidth);\n        setHeight(renderedHeight);\n      }\n    }\n  }, [width, height]);\n  const padding = 10;\n  const paddedWidth = width + padding * 2;\n  const paddedHeight = height + padding * 2;\n  return /* @__PURE__ */ React.createElement(\"g\", null, /* @__PURE__ */ React.createElement(\"rect\", {\n    className: classes.node,\n    width: paddedWidth,\n    height: paddedHeight,\n    rx: 10\n  }), /* @__PURE__ */ React.createElement(\"text\", {\n    ref: idRef,\n    className: classes.text,\n    y: paddedHeight / 2,\n    x: paddedWidth / 2,\n    textAnchor: \"middle\",\n    alignmentBaseline: \"middle\"\n  }, id));\n}\n\nconst ARROW_MARKER_ID = \"arrow-marker\";\nconst NODE_TEST_ID = \"node\";\nconst EDGE_TEST_ID = \"edge\";\nconst LABEL_TEST_ID = \"label\";\n\nconst useStyles$P = makeStyles$1((theme) => ({\n  node: {\n    transition: `${theme.transitions.duration.shortest}ms`\n  }\n}), { name: \"BackstageDependencyGraphNode\" });\nconst renderDefault$1 = (props) => /* @__PURE__ */ React.createElement(DefaultNode, {\n  ...props\n});\nfunction Node({\n  render = renderDefault$1,\n  setNode,\n  node\n}) {\n  const { width, height, x = 0, y = 0 } = node;\n  const nodeProps = node;\n  const classes = useStyles$P();\n  const nodeRef = React.useRef(null);\n  React.useLayoutEffect(() => {\n    if (nodeRef.current) {\n      let { height: renderedHeight, width: renderedWidth } = nodeRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setNode(node.id, {\n          ...node,\n          height: renderedHeight,\n          width: renderedWidth\n        });\n      }\n    }\n  }, [node, width, height, setNode]);\n  return /* @__PURE__ */ React.createElement(\"g\", {\n    ref: nodeRef,\n    \"data-testid\": NODE_TEST_ID,\n    className: classes.node,\n    transform: `translate(${x - width / 2},${y - height / 2})`\n  }, render({ node: nodeProps }));\n}\n\nconst useStyles$O = makeStyles$1((theme) => ({\n  text: {\n    fill: theme.palette.textContrast\n  }\n}), { name: \"BackstageDependencyGraphDefaultLabel\" });\nfunction DefaultLabel({ edge: { label } }) {\n  const classes = useStyles$O();\n  return /* @__PURE__ */ React.createElement(\"text\", {\n    className: classes.text,\n    textAnchor: \"middle\"\n  }, label);\n}\n\nconst useStyles$N = makeStyles$1((theme) => ({\n  path: {\n    strokeWidth: 2,\n    stroke: theme.palette.textSubtle,\n    fill: \"none\",\n    transition: `${theme.transitions.duration.shortest}ms`\n  },\n  label: {\n    transition: `${theme.transitions.duration.shortest}ms`\n  }\n}), { name: \"BackstageDependencyGraphEdge\" });\nconst renderDefault = (props) => /* @__PURE__ */ React.createElement(DefaultLabel, {\n  ...props\n});\nconst createPath = d3Shape.line().x((d) => d.x).y((d) => d.y).curve(d3Shape.curveMonotoneX);\nfunction Edge({\n  render = renderDefault,\n  setEdge,\n  id,\n  edge\n}) {\n  const { x = 0, y = 0, width, height, points } = edge;\n  const labelProps = edge;\n  const classes = useStyles$N();\n  const labelRef = React.useRef(null);\n  React.useLayoutEffect(() => {\n    if (labelRef.current) {\n      let { height: renderedHeight, width: renderedWidth } = labelRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setEdge(id, {\n          ...edge,\n          height: renderedHeight,\n          width: renderedWidth\n        });\n      }\n    }\n  }, [edge, height, width, setEdge, id]);\n  let path = \"\";\n  if (points) {\n    const finitePoints = points.filter((point) => isFinite(point.x) && isFinite(point.y));\n    path = createPath(finitePoints) || \"\";\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, path && /* @__PURE__ */ React.createElement(\"path\", {\n    \"data-testid\": EDGE_TEST_ID,\n    className: classes.path,\n    markerEnd: `url(#${ARROW_MARKER_ID})`,\n    d: path\n  }), labelProps.label ? /* @__PURE__ */ React.createElement(\"g\", {\n    ref: labelRef,\n    \"data-testid\": LABEL_TEST_ID,\n    className: classes.label,\n    transform: `translate(${x},${y})`\n  }, render({ edge: labelProps })) : null);\n}\n\nconst WORKSPACE_ID = \"workspace\";\nfunction DependencyGraph(props) {\n  var _a, _b;\n  const {\n    edges,\n    nodes,\n    renderNode,\n    direction = Direction.TOP_BOTTOM,\n    align,\n    nodeMargin = 50,\n    edgeMargin = 10,\n    rankMargin = 50,\n    paddingX = 0,\n    paddingY = 0,\n    acyclicer,\n    ranker = Ranker.NETWORK_SIMPLEX,\n    labelPosition = LabelPosition.RIGHT,\n    labelOffset = 10,\n    edgeRanks = 1,\n    edgeWeight = 1,\n    renderLabel,\n    defs,\n    zoom = \"enabled\",\n    ...svgProps\n  } = props;\n  const theme = useTheme$1();\n  const [containerWidth, setContainerWidth] = React.useState(100);\n  const [containerHeight, setContainerHeight] = React.useState(100);\n  const graph = React.useRef(new dagre.graphlib.Graph());\n  const [graphWidth, setGraphWidth] = React.useState(((_a = graph.current.graph()) == null ? void 0 : _a.width) || 0);\n  const [graphHeight, setGraphHeight] = React.useState(((_b = graph.current.graph()) == null ? void 0 : _b.height) || 0);\n  const [graphNodes, setGraphNodes] = React.useState([]);\n  const [graphEdges, setGraphEdges] = React.useState([]);\n  const maxWidth = Math.max(graphWidth, containerWidth);\n  const maxHeight = Math.max(graphHeight, containerHeight);\n  const containerRef = React.useMemo(() => debounce((node) => {\n    if (!node) {\n      return;\n    }\n    const container = d3Selection.select(node);\n    const workspace = d3Selection.select(node.getElementById(WORKSPACE_ID));\n    function enableZoom() {\n      container.call(d3Zoom.zoom().scaleExtent([1, 10]).on(\"zoom\", (event) => {\n        event.transform.x = Math.min(0, Math.max(event.transform.x, maxWidth - maxWidth * event.transform.k));\n        event.transform.y = Math.min(0, Math.max(event.transform.y, maxHeight - maxHeight * event.transform.k));\n        workspace.attr(\"transform\", event.transform);\n      }));\n    }\n    if (zoom === \"enabled\") {\n      enableZoom();\n    } else if (zoom === \"enable-on-click\") {\n      container.on(\"click\", () => enableZoom());\n    }\n    const { width: newContainerWidth, height: newContainerHeight } = node.getBoundingClientRect();\n    if (containerWidth !== newContainerWidth) {\n      setContainerWidth(newContainerWidth);\n    }\n    if (containerHeight !== newContainerHeight) {\n      setContainerHeight(newContainerHeight);\n    }\n  }, 100), [containerHeight, containerWidth, maxWidth, maxHeight, zoom]);\n  const setNodesAndEdges = React.useCallback(() => {\n    const currentGraphNodes = graph.current.nodes();\n    const currentGraphEdges = graph.current.edges();\n    currentGraphNodes.forEach((nodeId) => {\n      const remainingNode = nodes.some((node) => node.id === nodeId);\n      if (!remainingNode) {\n        graph.current.removeNode(nodeId);\n      }\n    });\n    currentGraphEdges.forEach((e) => {\n      const remainingEdge = edges.some((edge) => edge.from === e.v && edge.to === e.w);\n      if (!remainingEdge) {\n        graph.current.removeEdge(e.v, e.w);\n      }\n    });\n    nodes.forEach((node) => {\n      const existingNode = graph.current.nodes().find((nodeId) => node.id === nodeId);\n      if (existingNode && graph.current.node(existingNode)) {\n        const { width, height, x, y } = graph.current.node(existingNode);\n        graph.current.setNode(existingNode, { ...node, width, height, x, y });\n      } else {\n        graph.current.setNode(node.id, { ...node, width: 0, height: 0 });\n      }\n    });\n    edges.forEach((e) => {\n      graph.current.setEdge(e.from, e.to, {\n        ...e,\n        label: e.label,\n        width: 0,\n        height: 0,\n        labelpos: labelPosition,\n        labeloffset: labelOffset,\n        weight: edgeWeight,\n        minlen: edgeRanks\n      });\n    });\n  }, [edges, nodes, labelPosition, labelOffset, edgeWeight, edgeRanks]);\n  const updateGraph = React.useMemo(() => debounce(() => {\n    dagre.layout(graph.current);\n    const { height, width } = graph.current.graph();\n    const newHeight = Math.max(0, height || 0);\n    const newWidth = Math.max(0, width || 0);\n    setGraphWidth(newWidth);\n    setGraphHeight(newHeight);\n    setGraphNodes(graph.current.nodes());\n    setGraphEdges(graph.current.edges());\n  }, 250, { leading: true }), []);\n  React.useEffect(() => {\n    graph.current.setGraph({\n      rankdir: direction,\n      align,\n      nodesep: nodeMargin,\n      edgesep: edgeMargin,\n      ranksep: rankMargin,\n      marginx: paddingX,\n      marginy: paddingY,\n      acyclicer,\n      ranker\n    });\n    setNodesAndEdges();\n    updateGraph();\n    return updateGraph.cancel;\n  }, [\n    acyclicer,\n    align,\n    direction,\n    edgeMargin,\n    paddingX,\n    paddingY,\n    nodeMargin,\n    rankMargin,\n    ranker,\n    setNodesAndEdges,\n    updateGraph\n  ]);\n  function setNode(id, node) {\n    graph.current.setNode(id, node);\n    updateGraph();\n    return graph.current;\n  }\n  function setEdge(id, edge) {\n    graph.current.setEdge(id, edge);\n    updateGraph();\n    return graph.current;\n  }\n  return /* @__PURE__ */ React.createElement(\"svg\", {\n    ref: containerRef,\n    ...svgProps,\n    width: \"100%\",\n    height: maxHeight,\n    viewBox: `0 0 ${maxWidth} ${maxHeight}`\n  }, /* @__PURE__ */ React.createElement(\"defs\", null, /* @__PURE__ */ React.createElement(\"marker\", {\n    id: ARROW_MARKER_ID,\n    viewBox: \"0 0 24 24\",\n    markerWidth: \"14\",\n    markerHeight: \"14\",\n    refX: \"16\",\n    refY: \"12\",\n    orient: \"auto\",\n    markerUnits: \"strokeWidth\"\n  }, /* @__PURE__ */ React.createElement(\"path\", {\n    fill: theme.palette.textSubtle,\n    d: \"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z\"\n  })), defs), /* @__PURE__ */ React.createElement(\"g\", {\n    id: WORKSPACE_ID\n  }, /* @__PURE__ */ React.createElement(\"svg\", {\n    width: graphWidth,\n    height: graphHeight,\n    y: maxHeight / 2 - graphHeight / 2,\n    x: maxWidth / 2 - graphWidth / 2,\n    viewBox: `0 0 ${graphWidth} ${graphHeight}`\n  }, graphEdges.map((e) => {\n    const edge = graph.current.edge(e);\n    if (!edge)\n      return null;\n    return /* @__PURE__ */ React.createElement(Edge, {\n      key: `${e.v}-${e.w}`,\n      id: e,\n      setEdge,\n      render: renderLabel,\n      edge\n    });\n  }), graphNodes.map((id) => {\n    const node = graph.current.node(id);\n    if (!node)\n      return null;\n    return /* @__PURE__ */ React.createElement(Node, {\n      key: id,\n      setNode,\n      render: renderNode,\n      node\n    });\n  }))));\n}\n\nconst useStyles$M = makeStyles((theme) => {\n  var _a;\n  return {\n    root: {\n      padding: theme.spacing(0),\n      marginBottom: theme.spacing(0),\n      marginTop: theme.spacing(0),\n      display: \"flex\",\n      flexFlow: \"row nowrap\"\n    },\n    topPosition: {\n      position: \"relative\",\n      marginBottom: theme.spacing(6),\n      marginTop: -theme.spacing(3),\n      zIndex: \"unset\"\n    },\n    icon: {\n      fontSize: 20\n    },\n    content: {\n      width: \"100%\",\n      maxWidth: \"inherit\",\n      flexWrap: \"nowrap\"\n    },\n    message: {\n      display: \"flex\",\n      alignItems: \"center\",\n      color: theme.palette.banner.text,\n      \"& a\": {\n        color: theme.palette.banner.link\n      }\n    },\n    info: {\n      backgroundColor: theme.palette.banner.info\n    },\n    error: {\n      backgroundColor: theme.palette.banner.error\n    },\n    warning: {\n      backgroundColor: (_a = theme.palette.banner.warning) != null ? _a : theme.palette.banner.error\n    }\n  };\n}, { name: \"BackstageDismissableBanner\" });\nconst DismissableBanner = (props) => {\n  var _a;\n  const { variant, message, id, fixed = false } = props;\n  const classes = useStyles$M();\n  const storageApi = useApi(storageApiRef);\n  const notificationsStore = storageApi.forBucket(\"notifications\");\n  const rawDismissedBanners = (_a = notificationsStore.snapshot(\"dismissedBanners\").value) != null ? _a : [];\n  const [dismissedBanners, setDismissedBanners] = useState(new Set(rawDismissedBanners));\n  const observedItems = useObservable(notificationsStore.observe$(\"dismissedBanners\"));\n  useEffect(() => {\n    var _a2;\n    if (observedItems == null ? void 0 : observedItems.value) {\n      const currentValue = (_a2 = observedItems == null ? void 0 : observedItems.value) != null ? _a2 : [];\n      setDismissedBanners(new Set(currentValue));\n    }\n  }, [observedItems == null ? void 0 : observedItems.value]);\n  const handleClick = () => {\n    notificationsStore.set(\"dismissedBanners\", [...dismissedBanners, id]);\n  };\n  return /* @__PURE__ */ React.createElement(Snackbar, {\n    anchorOrigin: fixed ? { vertical: \"bottom\", horizontal: \"center\" } : { vertical: \"top\", horizontal: \"center\" },\n    open: !dismissedBanners.has(id),\n    classes: {\n      root: classNames(classes.root, !fixed && classes.topPosition)\n    }\n  }, /* @__PURE__ */ React.createElement(SnackbarContent, {\n    classes: {\n      root: classNames(classes.content, classes[variant]),\n      message: classes.message\n    },\n    message,\n    action: [\n      /* @__PURE__ */ React.createElement(IconButton, {\n        key: \"dismiss\",\n        title: \"Permanently dismiss this message\",\n        color: \"inherit\",\n        onClick: handleClick\n      }, /* @__PURE__ */ React.createElement(CloseIcon, {\n        className: classes.icon\n      }))\n    ]\n  }));\n};\n\nconst useStyles$L = makeStyles({\n  generalImg: {\n    width: \"95%\",\n    zIndex: 2,\n    position: \"relative\",\n    left: \"50%\",\n    top: \"50%\",\n    transform: \"translate(-50%, 15%)\"\n  }\n}, { name: \"BackstageEmptyStateImage\" });\nconst EmptyStateImage = ({ missing }) => {\n  const classes = useStyles$L();\n  switch (missing) {\n    case \"field\":\n      return /* @__PURE__ */ React.createElement(\"img\", {\n        src: missingAnnotation,\n        className: classes.generalImg,\n        alt: \"annotation is missing\"\n      });\n    case \"info\":\n      return /* @__PURE__ */ React.createElement(\"img\", {\n        src: noInformation,\n        alt: \"no Information\",\n        className: classes.generalImg\n      });\n    case \"content\":\n      return /* @__PURE__ */ React.createElement(\"img\", {\n        src: createComponent,\n        alt: \"create Component\",\n        className: classes.generalImg\n      });\n    case \"data\":\n      return /* @__PURE__ */ React.createElement(\"img\", {\n        src: noBuild,\n        alt: \"no Build\",\n        className: classes.generalImg\n      });\n    default:\n      return null;\n  }\n};\n\nconst useStyles$K = makeStyles((theme) => ({\n  root: {\n    backgroundColor: theme.palette.background.default,\n    padding: theme.spacing(2, 0, 0, 0)\n  },\n  action: {\n    marginTop: theme.spacing(2)\n  },\n  imageContainer: {\n    position: \"relative\"\n  }\n}), { name: \"BackstageEmptyState\" });\nfunction EmptyState(props) {\n  const { title, description, missing, action } = props;\n  const classes = useStyles$K();\n  return /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    direction: \"row\",\n    justifyContent: \"space-around\",\n    alignItems: \"flex-start\",\n    className: classes.root,\n    spacing: 2\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    md: 6\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    direction: \"column\"\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: true\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"h5\"\n  }, title)), /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: true\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"body1\"\n  }, description)), /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: true,\n    className: classes.action\n  }, action))), /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    md: 6,\n    className: classes.imageContainer\n  }, /* @__PURE__ */ React.createElement(EmptyStateImage, {\n    missing\n  })));\n}\n\nconst COMPONENT_YAML = `apiVersion: backstage.io/v1alpha1\nkind: Component\nmetadata:\n  name: example\n  description: example.com\n  annotations:\n    ANNOTATION: value\nspec:\n  type: website\n  lifecycle: production\n  owner: user:guest`;\nconst useStyles$J = makeStyles((theme) => ({\n  code: {\n    borderRadius: 6,\n    margin: `${theme.spacing(2)}px 0px`,\n    background: theme.palette.type === \"dark\" ? \"#444\" : \"#fff\"\n  }\n}), { name: \"BackstageMissingAnnotationEmptyState\" });\nfunction MissingAnnotationEmptyState(props) {\n  const { annotation } = props;\n  const classes = useStyles$J();\n  const description = /* @__PURE__ */ React.createElement(React.Fragment, null, \"The \", /* @__PURE__ */ React.createElement(\"code\", null, annotation), \" annotation is missing. You need to add the annotation to your component if you want to enable this tool.\");\n  return /* @__PURE__ */ React.createElement(EmptyState, {\n    missing: \"field\",\n    title: \"Missing Annotation\",\n    description,\n    action: /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"body1\"\n    }, \"Add the annotation to your component YAML as shown in the highlighted example below:\"), /* @__PURE__ */ React.createElement(\"div\", {\n      className: classes.code\n    }, /* @__PURE__ */ React.createElement(CodeSnippet, {\n      text: COMPONENT_YAML.replace(\"ANNOTATION\", annotation),\n      language: \"yaml\",\n      showLineNumbers: true,\n      highlightedNumbers: [6, 7],\n      customStyle: { background: \"inherit\", fontSize: \"115%\" }\n    })), /* @__PURE__ */ React.createElement(Button$1, {\n      color: \"primary\",\n      component: Link,\n      to: \"https://backstage.io/docs/features/software-catalog/well-known-annotations\"\n    }, \"Read more\"))\n  });\n}\n\nconst getWarningTextColor = (severity, theme) => {\n  const getColor = theme.palette.type === \"light\" ? darken : lighten;\n  return getColor(theme.palette[severity].light, 0.6);\n};\nconst getWarningBackgroundColor = (severity, theme) => {\n  const getBackgroundColor = theme.palette.type === \"light\" ? lighten : darken;\n  return getBackgroundColor(theme.palette[severity].light, 0.9);\n};\nconst useErrorOutlineStyles = makeStyles((theme) => ({\n  root: {\n    marginRight: theme.spacing(1),\n    fill: ({ severity }) => getWarningTextColor(severity, theme)\n  }\n}));\nconst ErrorOutlineStyled = ({ severity }) => {\n  const classes = useErrorOutlineStyles({ severity });\n  return /* @__PURE__ */ React.createElement(ErrorOutline, {\n    classes\n  });\n};\nconst ExpandMoreIconStyled = ({ severity }) => {\n  const classes = useErrorOutlineStyles({ severity });\n  return /* @__PURE__ */ React.createElement(ExpandMoreIcon, {\n    classes\n  });\n};\nconst useStyles$I = makeStyles((theme) => ({\n  panel: {\n    backgroundColor: ({ severity }) => getWarningBackgroundColor(severity, theme),\n    color: ({ severity }) => getWarningTextColor(severity, theme),\n    verticalAlign: \"middle\"\n  },\n  summary: {\n    display: \"flex\",\n    flexDirection: \"row\"\n  },\n  summaryText: {\n    color: ({ severity }) => getWarningTextColor(severity, theme),\n    fontWeight: \"bold\"\n  },\n  message: {\n    width: \"100%\",\n    display: \"block\",\n    color: ({ severity }) => getWarningTextColor(severity, theme),\n    backgroundColor: ({ severity }) => getWarningBackgroundColor(severity, theme)\n  },\n  details: {\n    width: \"100%\",\n    display: \"block\",\n    color: theme.palette.textContrast,\n    backgroundColor: theme.palette.background.default,\n    border: `1px solid ${theme.palette.border}`,\n    padding: theme.spacing(2),\n    fontFamily: \"sans-serif\"\n  }\n}), { name: \"BackstageWarningPanel\" });\nconst capitalize = (s) => {\n  return s.charAt(0).toLocaleUpperCase(\"en-US\") + s.slice(1);\n};\nfunction WarningPanel(props) {\n  const {\n    severity = \"warning\",\n    title,\n    message,\n    children,\n    defaultExpanded\n  } = props;\n  const classes = useStyles$I({ severity });\n  const subTitle = capitalize(severity) + (title ? `: ${title}` : \"\");\n  return /* @__PURE__ */ React.createElement(Accordion, {\n    defaultExpanded: defaultExpanded != null ? defaultExpanded : false,\n    className: classes.panel,\n    role: \"alert\"\n  }, /* @__PURE__ */ React.createElement(AccordionSummary, {\n    expandIcon: /* @__PURE__ */ React.createElement(ExpandMoreIconStyled, {\n      severity\n    }),\n    className: classes.summary\n  }, /* @__PURE__ */ React.createElement(ErrorOutlineStyled, {\n    severity\n  }), /* @__PURE__ */ React.createElement(Typography, {\n    className: classes.summaryText,\n    variant: \"subtitle1\"\n  }, subTitle)), (message || children) && /* @__PURE__ */ React.createElement(AccordionDetails, null, /* @__PURE__ */ React.createElement(Grid, {\n    container: true\n  }, message && /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 12\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    className: classes.message,\n    variant: \"body1\"\n  }, message)), children && /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    className: classes.details\n  }, children))));\n}\n\nconst useStyles$H = makeStyles((theme) => ({\n  text: {\n    fontFamily: \"monospace\",\n    whiteSpace: \"pre\",\n    overflowX: \"auto\",\n    marginRight: theme.spacing(2)\n  },\n  divider: {\n    margin: theme.spacing(2)\n  }\n}), { name: \"BackstageErrorPanel\" });\nconst ErrorList = ({\n  error,\n  message,\n  stack,\n  children\n}) => {\n  const classes = useStyles$H();\n  return /* @__PURE__ */ React.createElement(List, {\n    dense: true\n  }, /* @__PURE__ */ React.createElement(ListItem, {\n    alignItems: \"flex-start\"\n  }, /* @__PURE__ */ React.createElement(ListItemText, {\n    classes: { secondary: classes.text },\n    primary: \"Error\",\n    secondary: error\n  }), /* @__PURE__ */ React.createElement(CopyTextButton, {\n    text: error\n  })), /* @__PURE__ */ React.createElement(ListItem, {\n    alignItems: \"flex-start\"\n  }, /* @__PURE__ */ React.createElement(ListItemText, {\n    classes: { secondary: classes.text },\n    primary: \"Message\",\n    secondary: message\n  }), /* @__PURE__ */ React.createElement(CopyTextButton, {\n    text: message\n  })), stack && /* @__PURE__ */ React.createElement(ListItem, {\n    alignItems: \"flex-start\"\n  }, /* @__PURE__ */ React.createElement(ListItemText, {\n    classes: { secondary: classes.text },\n    primary: \"Stack Trace\",\n    secondary: stack\n  }), /* @__PURE__ */ React.createElement(CopyTextButton, {\n    text: stack\n  })), children);\n};\nfunction ErrorPanel(props) {\n  const { title, error, defaultExpanded, children } = props;\n  return /* @__PURE__ */ React.createElement(WarningPanel, {\n    severity: \"error\",\n    title: title != null ? title : error.message,\n    defaultExpanded\n  }, /* @__PURE__ */ React.createElement(ErrorList, {\n    error: error.name,\n    message: error.message,\n    stack: error.stack,\n    children\n  }));\n}\n\nconst useStyles$G = makeStyles((theme) => ({\n  text: {\n    fontFamily: \"monospace\",\n    whiteSpace: \"pre\",\n    overflowX: \"auto\",\n    marginRight: theme.spacing(2)\n  },\n  divider: {\n    margin: theme.spacing(2)\n  }\n}), { name: \"BackstageResponseErrorPanel\" });\nfunction ResponseErrorPanel(props) {\n  var _a;\n  const { title, error, defaultExpanded } = props;\n  const classes = useStyles$G();\n  if (error.name !== \"ResponseError\") {\n    return /* @__PURE__ */ React.createElement(ErrorPanel, {\n      title: title != null ? title : error.message,\n      defaultExpanded,\n      error\n    });\n  }\n  const { body, cause } = error;\n  const { request, response } = body;\n  const errorString = `${response.statusCode}: ${cause.name}`;\n  const requestString = request && `${request.method} ${request.url}`;\n  const messageString = cause.message.replace(/\\\\n/g, \"\\n\");\n  const stackString = (_a = cause.stack) == null ? void 0 : _a.replace(/\\\\n/g, \"\\n\");\n  const jsonString = JSON.stringify(body, void 0, 2);\n  return /* @__PURE__ */ React.createElement(ErrorPanel, {\n    title: title != null ? title : error.message,\n    defaultExpanded,\n    error: { name: errorString, message: messageString, stack: stackString }\n  }, requestString && /* @__PURE__ */ React.createElement(ListItem, {\n    alignItems: \"flex-start\"\n  }, /* @__PURE__ */ React.createElement(ListItemText, {\n    classes: { secondary: classes.text },\n    primary: \"Request\",\n    secondary: request ? `${requestString}` : void 0\n  }), /* @__PURE__ */ React.createElement(CopyTextButton, {\n    text: requestString\n  })), /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Divider, {\n    component: \"li\",\n    className: classes.divider\n  }), /* @__PURE__ */ React.createElement(ListItem, {\n    alignItems: \"flex-start\"\n  }, /* @__PURE__ */ React.createElement(ListItemText, {\n    classes: { secondary: classes.text },\n    primary: \"Full Error as JSON\"\n  })), /* @__PURE__ */ React.createElement(CodeSnippet, {\n    language: \"json\",\n    text: jsonString,\n    showCopyCodeButton: true\n  })));\n}\n\nfunction createRootElement(id) {\n  const rootContainer = document.createElement(\"div\");\n  rootContainer.setAttribute(\"id\", id);\n  return rootContainer;\n}\nfunction addRootElement(rootElem) {\n  document.body.insertBefore(rootElem, document.body.lastElementChild.nextElementSibling);\n}\nfunction usePortal(id) {\n  const rootElemRef = useRef(null);\n  useEffect(function setupElement() {\n    const existingParent = document.querySelector(`#${id}`);\n    const parentElem = existingParent || createRootElement(id);\n    if (!existingParent) {\n      addRootElement(parentElem);\n    }\n    parentElem.appendChild(rootElemRef.current);\n    return function removeElement() {\n      rootElemRef.current.remove();\n      if (parentElem.childNodes.length === -1) {\n        parentElem.remove();\n      }\n    };\n  }, [id]);\n  function getRootElem() {\n    if (!rootElemRef.current) {\n      rootElemRef.current = document.createElement(\"div\");\n    }\n    return rootElemRef.current;\n  }\n  return getRootElem();\n}\n\nconst STATES_LOCAL_STORAGE_KEY = \"core.calloutSeen\";\nfunction useCalloutStates() {\n  const [states, setStates] = useState(() => {\n    const raw = localStorage.getItem(STATES_LOCAL_STORAGE_KEY);\n    return raw ? JSON.parse(raw) : {};\n  });\n  const setState = useCallback((key, value) => {\n    const raw = localStorage.getItem(STATES_LOCAL_STORAGE_KEY);\n    const oldStates = raw ? JSON.parse(raw) : {};\n    const newStates = { ...oldStates, [key]: value };\n    setStates(newStates);\n    localStorage.setItem(STATES_LOCAL_STORAGE_KEY, JSON.stringify(newStates));\n  }, []);\n  return { states, setState };\n}\nfunction useCalloutHasBeenSeen(featureId) {\n  const { states, setState } = useCalloutStates();\n  const markSeen = useCallback(() => {\n    setState(featureId, true);\n  }, [setState, featureId]);\n  return { seen: states[featureId] === true, markSeen };\n}\nfunction useShowCallout(featureId) {\n  const { seen, markSeen } = useCalloutHasBeenSeen(featureId);\n  return { show: seen === false, hide: markSeen };\n}\n\nconst useStyles$F = makeStyles({\n  \"@keyframes pulsateSlightly\": {\n    \"0%\": { transform: \"scale(1.0)\" },\n    \"100%\": { transform: \"scale(1.1)\" }\n  },\n  \"@keyframes pulsateAndFade\": {\n    \"0%\": { transform: \"scale(1.0)\", opacity: 0.9 },\n    \"100%\": { transform: \"scale(1.5)\", opacity: 0 }\n  },\n  featureWrapper: {\n    position: \"relative\"\n  },\n  backdrop: {\n    zIndex: 2e3,\n    position: \"fixed\",\n    overflow: \"hidden\",\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0\n  },\n  dot: {\n    position: \"absolute\",\n    backgroundColor: \"transparent\",\n    borderRadius: \"100%\",\n    border: \"1px solid rgba(103, 146, 180, 0.98)\",\n    boxShadow: \"0px 0px 0px 20000px rgba(0, 0, 0, 0.5)\",\n    zIndex: 2001,\n    transformOrigin: \"center center\",\n    animation: \"$pulsateSlightly 1744ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) alternate infinite\"\n  },\n  pulseCircle: {\n    width: \"100%\",\n    height: \"100%\",\n    backgroundColor: \"transparent\",\n    borderRadius: \"100%\",\n    border: \"2px solid white\",\n    zIndex: 2001,\n    transformOrigin: \"center center\",\n    animation: \"$pulsateAndFade 872ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) infinite\"\n  },\n  text: {\n    position: \"absolute\",\n    color: \"white\",\n    zIndex: 2003\n  }\n}, { name: \"BackstageFeatureCalloutCircular\" });\nfunction FeatureCalloutCircular(props) {\n  const { featureId, title, description, children } = props;\n  const { show, hide } = useShowCallout(featureId);\n  const portalElement = usePortal(\"core.callout\");\n  const wrapperRef = useRef(null);\n  const [placement, setPlacement] = useState();\n  const classes = useStyles$F();\n  const update = useCallback(() => {\n    if (wrapperRef.current) {\n      const wrapperBounds = wrapperRef.current.getBoundingClientRect();\n      const longest = Math.max(wrapperBounds.width, wrapperBounds.height);\n      const borderWidth = 800;\n      const dotLeft = wrapperBounds.x - (longest - wrapperBounds.width) / 2 - borderWidth;\n      const dotTop = wrapperBounds.y - (longest - wrapperBounds.height) / 2 - borderWidth;\n      const dotSize = longest + 2 * borderWidth;\n      const textWidth = 450;\n      const textLeft = wrapperBounds.x + wrapperBounds.width / 2 - textWidth;\n      const textTop = wrapperBounds.y - (longest - wrapperBounds.height) / 2 + longest + 20;\n      setPlacement({\n        dotLeft,\n        dotTop,\n        dotSize,\n        borderWidth,\n        textTop,\n        textLeft,\n        textWidth\n      });\n    }\n  }, []);\n  useEffect(() => {\n    window.addEventListener(\"resize\", update);\n    window.addEventListener(\"scroll\", update);\n    return () => {\n      window.removeEventListener(\"resize\", update);\n      window.removeEventListener(\"scroll\", update);\n    };\n  }, [update]);\n  useLayoutEffect(update, [wrapperRef.current, update]);\n  if (!show) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.featureWrapper,\n    ref: wrapperRef\n  }, children), createPortal(/* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.backdrop\n  }, /* @__PURE__ */ React.createElement(ClickAwayListener, {\n    onClickAway: hide\n  }, /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.dot,\n    \"data-testid\": \"dot\",\n    style: {\n      left: placement == null ? void 0 : placement.dotLeft,\n      top: placement == null ? void 0 : placement.dotTop,\n      width: placement == null ? void 0 : placement.dotSize,\n      height: placement == null ? void 0 : placement.dotSize,\n      borderWidth: placement == null ? void 0 : placement.borderWidth\n    },\n    onClick: hide,\n    onKeyDown: hide,\n    role: \"button\",\n    tabIndex: 0\n  }, /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.pulseCircle\n  })), /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.text,\n    \"data-testid\": \"text\",\n    style: {\n      left: placement == null ? void 0 : placement.textLeft,\n      top: placement == null ? void 0 : placement.textTop,\n      width: placement == null ? void 0 : placement.textWidth\n    }\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"h2\",\n    paragraph: true\n  }, title), /* @__PURE__ */ React.createElement(Typography, null, description))))), portalElement));\n}\n\nconst useIconStyles = makeStyles((theme) => ({\n  link: {\n    display: \"grid\",\n    justifyItems: \"center\",\n    gridGap: 4,\n    textAlign: \"center\"\n  },\n  disabled: {\n    color: \"gray\",\n    cursor: \"default\"\n  },\n  primary: {\n    color: theme.palette.primary.main\n  },\n  secondary: {\n    color: theme.palette.secondary.main\n  },\n  label: {\n    fontSize: \"0.7rem\",\n    textTransform: \"uppercase\",\n    fontWeight: 600,\n    letterSpacing: 1.2\n  }\n}), { name: \"BackstageIconLinkVertical\" });\nfunction IconLinkVertical({\n  color = \"primary\",\n  disabled = false,\n  href = \"#\",\n  icon = /* @__PURE__ */ React.createElement(LinkIcon, null),\n  label,\n  onClick,\n  title\n}) {\n  const classes = useIconStyles();\n  if (disabled) {\n    return /* @__PURE__ */ React.createElement(Link$1, {\n      title,\n      className: classNames(classes.link, classes.disabled),\n      underline: \"none\"\n    }, icon, /* @__PURE__ */ React.createElement(\"span\", {\n      className: classes.label\n    }, label));\n  }\n  return /* @__PURE__ */ React.createElement(Link$1, {\n    title,\n    className: classNames(classes.link, classes[color]),\n    to: href,\n    component: Link,\n    onClick\n  }, icon, /* @__PURE__ */ React.createElement(\"span\", {\n    className: classes.label\n  }, label));\n}\n\nconst useStyles$E = makeStyles((theme) => ({\n  links: {\n    margin: theme.spacing(2, 0),\n    display: \"grid\",\n    gridAutoFlow: \"column\",\n    gridAutoColumns: \"min-content\",\n    gridGap: theme.spacing(3)\n  }\n}), { name: \"BackstageHeaderIconLinkRow\" });\nfunction HeaderIconLinkRow(props) {\n  const { links } = props;\n  const classes = useStyles$E();\n  return /* @__PURE__ */ React.createElement(\"nav\", {\n    className: classes.links\n  }, links.map((link, index) => /* @__PURE__ */ React.createElement(IconLinkVertical, {\n    key: index + 1,\n    ...link\n  })));\n}\n\nconst generateGradientStops = (themeType) => {\n  const luminance = themeType === \"dark\" ? \"16%\" : \"97%\";\n  return `\n    hsl(0, 0%, ${luminance}) 0%,\n    hsla(0, 0%, ${luminance}, 0.987) 8.1%,\n    hsla(0, 0%, ${luminance}, 0.951) 15.5%,\n    hsla(0, 0%, ${luminance}, 0.896) 22.5%,\n    hsla(0, 0%, ${luminance}, 0.825) 29%,\n    hsla(0, 0%, ${luminance}, 0.741) 35.3%,\n    hsla(0, 0%, ${luminance}, 0.648) 41.2%,\n    hsla(0, 0%, ${luminance}, 0.55) 47.1%,\n    hsla(0, 0%, ${luminance}, 0.45) 52.9%,\n    hsla(0, 0%, ${luminance}, 0.352) 58.8%,\n    hsla(0, 0%, ${luminance}, 0.259) 64.7%,\n    hsla(0, 0%, ${luminance}, 0.175) 71%,\n    hsla(0, 0%, ${luminance}, 0.104) 77.5%,\n    hsla(0, 0%, ${luminance}, 0.049) 84.5%,\n    hsla(0, 0%, ${luminance}, 0.013) 91.9%,\n    hsla(0, 0%, ${luminance}, 0) 100%\n  `;\n};\nconst fadeSize = 100;\nconst fadePadding = 10;\nconst useStyles$D = makeStyles((theme) => ({\n  root: {\n    position: \"relative\",\n    display: \"flex\",\n    flexFlow: \"row nowrap\",\n    alignItems: \"center\"\n  },\n  container: {\n    overflow: \"auto\",\n    scrollbarWidth: 0,\n    \"&::-webkit-scrollbar\": {\n      display: \"none\"\n    }\n  },\n  fade: {\n    position: \"absolute\",\n    width: fadeSize,\n    height: `calc(100% + ${fadePadding}px)`,\n    transition: \"opacity 300ms\",\n    pointerEvents: \"none\"\n  },\n  fadeLeft: {\n    left: -fadePadding,\n    background: `linear-gradient(90deg, ${generateGradientStops(theme.palette.type)})`\n  },\n  fadeRight: {\n    right: -fadePadding,\n    background: `linear-gradient(270deg, ${generateGradientStops(theme.palette.type)})`\n  },\n  fadeHidden: {\n    opacity: 0\n  },\n  button: {\n    position: \"absolute\"\n  },\n  buttonLeft: {\n    left: -theme.spacing(2)\n  },\n  buttonRight: {\n    right: -theme.spacing(2)\n  }\n}), { name: \"BackstageHorizontalScrollGrid\" });\nfunction useScrollDistance(ref) {\n  const [[scrollLeft, scrollRight], setScroll] = React.useState([0, 0]);\n  React.useLayoutEffect(() => {\n    const el = ref.current;\n    if (!el) {\n      setScroll([0, 0]);\n      return;\n    }\n    const handleUpdate = () => {\n      const left = el.scrollLeft;\n      const right = el.scrollWidth - el.offsetWidth - el.scrollLeft;\n      setScroll([left, right]);\n    };\n    handleUpdate();\n    el.addEventListener(\"scroll\", handleUpdate);\n    window.addEventListener(\"resize\", handleUpdate);\n    return () => {\n      el.removeEventListener(\"scroll\", handleUpdate);\n      window.removeEventListener(\"resize\", handleUpdate);\n    };\n  }, [ref]);\n  return [scrollLeft, scrollRight];\n}\nfunction useSmoothScroll(ref, speed, minDistance) {\n  const [scrollTarget, setScrollTarget] = React.useState(0);\n  React.useLayoutEffect(() => {\n    if (scrollTarget === 0) {\n      return;\n    }\n    const startTime = performance.now();\n    const id = requestAnimationFrame((frameTime) => {\n      if (!ref.current) {\n        return;\n      }\n      const frameDuration = frameTime - startTime;\n      const scrollDistance = Math.abs(scrollTarget) * frameDuration / speed;\n      const cappedScrollDistance = Math.max(minDistance, scrollDistance);\n      const scrollAmount = cappedScrollDistance * Math.sign(scrollTarget);\n      ref.current.scrollBy({ left: scrollAmount });\n      const newScrollTarget = scrollTarget - scrollAmount;\n      if (Math.sign(scrollTarget) !== Math.sign(newScrollTarget)) {\n        setScrollTarget(0);\n      } else {\n        setScrollTarget(newScrollTarget);\n      }\n    });\n    return () => cancelAnimationFrame(id);\n  }, [ref, scrollTarget, speed, minDistance]);\n  return setScrollTarget;\n}\nfunction HorizontalScrollGrid(props) {\n  const {\n    scrollStep = 100,\n    scrollSpeed = 50,\n    minScrollDistance = 5,\n    children,\n    ...otherProps\n  } = props;\n  const classes = useStyles$D(props);\n  const ref = React.useRef();\n  const [scrollLeft, scrollRight] = useScrollDistance(ref);\n  const setScrollTarget = useSmoothScroll(ref, scrollSpeed, minScrollDistance);\n  const handleScrollClick = (forwards) => {\n    const el = ref.current;\n    if (!el) {\n      return;\n    }\n    setScrollTarget(forwards ? scrollStep : -scrollStep);\n  };\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    ...otherProps,\n    className: classes.root\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    direction: \"row\",\n    wrap: \"nowrap\",\n    className: classes.container,\n    ref\n  }, children), /* @__PURE__ */ React.createElement(\"div\", {\n    className: classNames(classes.fade, classes.fadeLeft, {\n      [classes.fadeHidden]: scrollLeft === 0\n    })\n  }), /* @__PURE__ */ React.createElement(\"div\", {\n    className: classNames(classes.fade, classes.fadeRight, {\n      [classes.fadeHidden]: scrollRight === 0\n    })\n  }), scrollLeft > 0 && /* @__PURE__ */ React.createElement(IconButton, {\n    title: \"Scroll Left\",\n    onClick: () => handleScrollClick(false),\n    className: classNames(classes.button, classes.buttonLeft, {})\n  }, /* @__PURE__ */ React.createElement(ChevronLeftIcon, null)), scrollRight > 0 && /* @__PURE__ */ React.createElement(IconButton, {\n    title: \"Scroll Right\",\n    onClick: () => handleScrollClick(true),\n    className: classNames(classes.button, classes.buttonRight, {})\n  }, /* @__PURE__ */ React.createElement(ChevronRight, null)));\n}\n\nconst useStyles$C = makeStyles({\n  alpha: {\n    color: \"#ffffff\",\n    fontFamily: \"serif\",\n    fontWeight: \"normal\",\n    fontStyle: \"italic\"\n  },\n  beta: {\n    color: \"#4d65cc\",\n    fontFamily: \"serif\",\n    fontWeight: \"normal\",\n    fontStyle: \"italic\"\n  }\n}, { name: \"BackstageLifecycle\" });\nfunction Lifecycle(props) {\n  const classes = useStyles$C(props);\n  const { shorthand, alpha } = props;\n  return shorthand ? /* @__PURE__ */ React.createElement(\"span\", {\n    className: classes[alpha ? \"alpha\" : \"beta\"],\n    style: { fontSize: \"120%\" }\n  }, alpha ? /* @__PURE__ */ React.createElement(React.Fragment, null, \"\\u03B1\") : /* @__PURE__ */ React.createElement(React.Fragment, null, \"\\u03B2\")) : /* @__PURE__ */ React.createElement(\"span\", {\n    className: classes[alpha ? \"alpha\" : \"beta\"]\n  }, alpha ? \"Alpha\" : \"Beta\");\n}\n\nconst RealLogViewer = lazy(() => import('./esm/RealLogViewer-5b0c3451.esm.js').then((m) => ({ default: m.RealLogViewer })));\nfunction LogViewer(props) {\n  const { Progress } = useApp().getComponents();\n  return /* @__PURE__ */ React.createElement(Suspense, {\n    fallback: /* @__PURE__ */ React.createElement(Progress, null)\n  }, /* @__PURE__ */ React.createElement(RealLogViewer, {\n    ...props\n  }));\n}\n\nconst useStyles$B = makeStyles((theme) => ({\n  markdown: {\n    \"& table\": {\n      borderCollapse: \"collapse\",\n      border: `1px solid ${theme.palette.border}`\n    },\n    \"& th, & td\": {\n      border: `1px solid ${theme.palette.border}`,\n      padding: theme.spacing(1)\n    },\n    \"& td\": {\n      wordBreak: \"break-word\",\n      overflow: \"hidden\",\n      verticalAlign: \"middle\",\n      lineHeight: \"1\",\n      margin: 0,\n      padding: theme.spacing(3, 2, 3, 2.5),\n      borderBottom: 0\n    },\n    \"& th\": {\n      backgroundColor: theme.palette.background.paper\n    },\n    \"& tr\": {\n      backgroundColor: theme.palette.background.paper\n    },\n    \"& tr:nth-child(odd)\": {\n      backgroundColor: theme.palette.background.default\n    },\n    \"& a\": {\n      color: theme.palette.link\n    },\n    \"& img\": {\n      maxWidth: \"100%\"\n    }\n  }\n}), { name: \"BackstageMarkdownContent\" });\nconst components = {\n  code: ({ inline, className, children, ...props }) => {\n    const text = String(children).replace(/\\n+$/, \"\");\n    const match = /language-(\\w+)/.exec(className || \"\");\n    return !inline && match ? /* @__PURE__ */ React.createElement(CodeSnippet, {\n      language: match[1],\n      text\n    }) : /* @__PURE__ */ React.createElement(\"code\", {\n      className,\n      ...props\n    }, children);\n  }\n};\nfunction MarkdownContent(props) {\n  const { content, dialect = \"gfm\", linkTarget } = props;\n  const classes = useStyles$B();\n  return /* @__PURE__ */ React.createElement(ReactMarkdown, {\n    remarkPlugins: dialect === \"gfm\" ? [gfm] : [],\n    className: classes.markdown,\n    children: content,\n    components,\n    linkTarget\n  });\n}\n\nconst useItemStyles = makeStyles((theme) => ({\n  root: {\n    paddingLeft: theme.spacing(3)\n  }\n}), { name: \"BackstageLoginRequestListItem\" });\nconst LoginRequestListItem = ({ request, busy, setBusy }) => {\n  const classes = useItemStyles();\n  const [error, setError] = useState();\n  const handleContinue = async () => {\n    setBusy(true);\n    try {\n      await request.trigger();\n    } catch (e) {\n      setError(isError(e) ? e.message : \"An unspecified error occurred\");\n    } finally {\n      setBusy(false);\n    }\n  };\n  const IconComponent = request.provider.icon;\n  return /* @__PURE__ */ React.createElement(ListItem, {\n    button: true,\n    disabled: busy,\n    classes: { root: classes.root }\n  }, /* @__PURE__ */ React.createElement(ListItemAvatar, null, /* @__PURE__ */ React.createElement(IconComponent, {\n    fontSize: \"large\"\n  })), /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: request.provider.title,\n    secondary: error && /* @__PURE__ */ React.createElement(Typography, {\n      color: \"error\"\n    }, error)\n  }), /* @__PURE__ */ React.createElement(Button$1, {\n    color: \"primary\",\n    variant: \"contained\",\n    onClick: handleContinue\n  }, \"Log in\"));\n};\n\nconst useStyles$A = makeStyles((theme) => ({\n  dialog: {\n    paddingTop: theme.spacing(1)\n  },\n  title: {\n    minWidth: 0\n  },\n  contentList: {\n    padding: 0\n  },\n  actionButtons: {\n    padding: theme.spacing(2, 0)\n  }\n}), { name: \"OAuthRequestDialog\" });\nfunction OAuthRequestDialog(_props) {\n  const classes = useStyles$A();\n  const [busy, setBusy] = useState(false);\n  const oauthRequestApi = useApi(oauthRequestApiRef);\n  const requests = useObservable(useMemo(() => oauthRequestApi.authRequest$(), [oauthRequestApi]), []);\n  const handleRejectAll = () => {\n    requests.forEach((request) => request.reject());\n  };\n  return /* @__PURE__ */ React.createElement(Dialog, {\n    open: Boolean(requests.length),\n    fullWidth: true,\n    maxWidth: \"xs\",\n    classes: { paper: classes.dialog }\n  }, /* @__PURE__ */ React.createElement(DialogTitle, {\n    classes: { root: classes.title }\n  }, \"Login Required\"), /* @__PURE__ */ React.createElement(DialogContent, {\n    dividers: true,\n    classes: { root: classes.contentList }\n  }, /* @__PURE__ */ React.createElement(List, null, requests.map((request) => /* @__PURE__ */ React.createElement(LoginRequestListItem, {\n    key: request.provider.title,\n    request,\n    busy,\n    setBusy\n  })))), /* @__PURE__ */ React.createElement(DialogActions, {\n    classes: { root: classes.actionButtons }\n  }, /* @__PURE__ */ React.createElement(Button$1, {\n    onClick: handleRejectAll\n  }, \"Reject All\")));\n}\n\nconst useStyles$z = makeStyles({\n  container: {\n    overflow: \"visible !important\"\n  }\n}, { name: \"BackstageOverflowTooltip\" });\nfunction OverflowTooltip(props) {\n  var _a;\n  const [hover, setHover] = useState(false);\n  const isMounted = useIsMounted();\n  const classes = useStyles$z();\n  const handleToggled = (truncated) => {\n    if (isMounted()) {\n      setHover(truncated);\n    }\n  };\n  return /* @__PURE__ */ React.createElement(Tooltip, {\n    title: (_a = props.title) != null ? _a : props.text || \"\",\n    placement: props.placement,\n    disableHoverListener: !hover\n  }, /* @__PURE__ */ React.createElement(TextTruncate, {\n    text: props.text,\n    line: props.line,\n    onToggled: handleToggled,\n    containerClassName: classes.container\n  }));\n}\n\nfunction Progress(props) {\n  const [isVisible, setIsVisible] = useState(false);\n  useEffect(() => {\n    const handle = setTimeout(() => setIsVisible(true), 250);\n    return () => clearTimeout(handle);\n  }, []);\n  return isVisible ? /* @__PURE__ */ React.createElement(LinearProgress, {\n    ...props,\n    \"data-testid\": \"progress\"\n  }) : /* @__PURE__ */ React.createElement(\"div\", {\n    style: { display: \"none\" }\n  });\n}\n\nconst useStyles$y = makeStyles((theme) => ({\n  root: {\n    maxWidth: \"fit-content\",\n    padding: theme.spacing(2, 2, 2, 2.5)\n  },\n  boxTitle: {\n    margin: 0,\n    color: theme.palette.textSubtle\n  },\n  arrow: {\n    color: theme.palette.textSubtle\n  }\n}), { name: \"BackstageBottomLink\" });\nfunction BottomLink(props) {\n  const { link, title, onClick } = props;\n  const classes = useStyles$y();\n  return /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(Divider, null), /* @__PURE__ */ React.createElement(Link, {\n    to: link,\n    onClick,\n    underline: \"none\"\n  }, /* @__PURE__ */ React.createElement(Box, {\n    display: \"flex\",\n    alignItems: \"center\",\n    className: classes.root\n  }, /* @__PURE__ */ React.createElement(Box, {\n    className: classes.boxTitle,\n    fontWeight: \"fontWeightBold\",\n    m: 1\n  }, /* @__PURE__ */ React.createElement(Typography, null, /* @__PURE__ */ React.createElement(\"strong\", null, title))), /* @__PURE__ */ React.createElement(ArrowIcon, {\n    className: classes.arrow\n  }))));\n}\n\nconst SlackLink = (props) => {\n  const { slackChannel } = props;\n  if (!slackChannel) {\n    return null;\n  } else if (typeof slackChannel === \"string\") {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, \"Please contact \", slackChannel, \" for help.\");\n  } else if (!slackChannel.href) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, \"Please contact \", slackChannel.name, \" for help.\");\n  }\n  return /* @__PURE__ */ React.createElement(Button, {\n    to: slackChannel.href,\n    variant: \"contained\"\n  }, slackChannel.name);\n};\nconst ErrorBoundary = class ErrorBoundary2 extends Component$3 {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: void 0,\n      errorInfo: void 0\n    };\n  }\n  componentDidCatch(error, errorInfo) {\n    console.error(`ErrorBoundary, error: ${error}, info: ${errorInfo}`);\n    this.setState({ error, errorInfo });\n  }\n  render() {\n    const { slackChannel, children } = this.props;\n    const { error } = this.state;\n    if (!error) {\n      return children;\n    }\n    return /* @__PURE__ */ React.createElement(ErrorPanel, {\n      title: \"Something Went Wrong\",\n      error\n    }, /* @__PURE__ */ React.createElement(SlackLink, {\n      slackChannel\n    }));\n  }\n};\n\nconst useStyles$x = makeStyles((theme) => ({\n  noPadding: {\n    padding: 0,\n    \"&:last-child\": {\n      paddingBottom: 0\n    }\n  },\n  header: {\n    padding: theme.spacing(2, 2, 2, 2.5)\n  },\n  headerTitle: {\n    fontWeight: 700\n  },\n  headerSubheader: {\n    paddingTop: theme.spacing(1)\n  },\n  headerAvatar: {},\n  headerAction: {},\n  headerContent: {},\n  subheader: {\n    display: \"flex\"\n  }\n}), { name: \"BackstageInfoCard\" });\nconst CardActionsTopRight = withStyles((theme) => ({\n  root: {\n    display: \"inline-block\",\n    padding: theme.spacing(8, 8, 0, 0),\n    float: \"right\"\n  }\n}), { name: \"BackstageInfoCardCardActionsTopRight\" })(CardActions);\nconst VARIANT_STYLES = {\n  card: {\n    flex: {\n      display: \"flex\",\n      flexDirection: \"column\"\n    },\n    fullHeight: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      height: \"100%\"\n    },\n    gridItem: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      height: \"calc(100% - 10px)\",\n      marginBottom: \"10px\"\n    }\n  },\n  cardContent: {\n    fullHeight: {\n      flex: 1\n    },\n    gridItem: {\n      flex: 1\n    }\n  }\n};\nfunction InfoCard(props) {\n  const {\n    title,\n    subheader,\n    divider = true,\n    deepLink,\n    slackChannel,\n    errorBoundaryProps,\n    variant,\n    children,\n    headerStyle,\n    headerProps,\n    icon,\n    action,\n    actionsClassName,\n    actions,\n    cardClassName,\n    actionsTopRight,\n    className,\n    noPadding,\n    titleTypographyProps\n  } = props;\n  const classes = useStyles$x();\n  let calculatedStyle = {};\n  let calculatedCardStyle = {};\n  if (variant) {\n    const variants = variant.split(/[\\s]+/g);\n    variants.forEach((name) => {\n      calculatedStyle = {\n        ...calculatedStyle,\n        ...VARIANT_STYLES.card[name]\n      };\n      calculatedCardStyle = {\n        ...calculatedCardStyle,\n        ...VARIANT_STYLES.cardContent[name]\n      };\n    });\n  }\n  const cardSubTitle = () => {\n    return /* @__PURE__ */ React.createElement(\"div\", {\n      className: classes.headerSubheader\n    }, subheader && /* @__PURE__ */ React.createElement(\"div\", {\n      className: classes.subheader\n    }, subheader), icon);\n  };\n  const errProps = errorBoundaryProps || (slackChannel ? { slackChannel } : {});\n  return /* @__PURE__ */ React.createElement(Card, {\n    style: calculatedStyle,\n    className\n  }, /* @__PURE__ */ React.createElement(ErrorBoundary, {\n    ...errProps\n  }, title && /* @__PURE__ */ React.createElement(CardHeader, {\n    classes: {\n      root: classes.header,\n      title: classes.headerTitle,\n      subheader: classes.headerSubheader,\n      avatar: classes.headerAvatar,\n      action: classes.headerAction,\n      content: classes.headerContent\n    },\n    title,\n    subheader: cardSubTitle(),\n    action,\n    style: { ...headerStyle },\n    titleTypographyProps,\n    ...headerProps\n  }), actionsTopRight && /* @__PURE__ */ React.createElement(CardActionsTopRight, null, actionsTopRight), divider && /* @__PURE__ */ React.createElement(Divider, null), /* @__PURE__ */ React.createElement(CardContent, {\n    className: classNames(cardClassName, {\n      [classes.noPadding]: noPadding\n    }),\n    style: calculatedCardStyle\n  }, children), actions && /* @__PURE__ */ React.createElement(CardActions, {\n    className: actionsClassName\n  }, actions), deepLink && /* @__PURE__ */ React.createElement(BottomLink, {\n    ...deepLink\n  })));\n}\n\nconst useStyles$w = makeStyles((theme) => ({\n  root: {\n    position: \"relative\",\n    lineHeight: 0\n  },\n  overlay: {\n    position: \"absolute\",\n    top: \"50%\",\n    left: \"50%\",\n    transform: \"translate(-50%, -60%)\",\n    fontSize: 45,\n    fontWeight: \"bold\",\n    color: theme.palette.textContrast\n  },\n  description: {\n    fontSize: \"100%\",\n    top: \"50%\",\n    left: \"50%\",\n    transform: \"translate(-50%, -50%)\",\n    position: \"absolute\",\n    wordBreak: \"break-all\",\n    display: \"inline-block\"\n  },\n  circle: {\n    width: \"80%\",\n    transform: \"translate(10%, 0)\"\n  },\n  colorUnknown: {}\n}), { name: \"BackstageGauge\" });\nconst defaultGaugeProps = {\n  fractional: true,\n  inverse: false,\n  unit: \"%\",\n  max: 100\n};\nconst getProgressColor = ({\n  palette,\n  value,\n  inverse,\n  max\n}) => {\n  if (isNaN(value)) {\n    return \"#ddd\";\n  }\n  const actualMax = max ? max : defaultGaugeProps.max;\n  const actualValue = inverse ? actualMax - value : value;\n  if (actualValue < actualMax / 3) {\n    return palette.status.error;\n  } else if (actualValue < actualMax * (2 / 3)) {\n    return palette.status.warning;\n  }\n  return palette.status.ok;\n};\nfunction Gauge(props) {\n  const [hoverRef, setHoverRef] = useState(null);\n  const { getColor = getProgressColor } = props;\n  const classes = useStyles$w(props);\n  const { palette } = useTheme();\n  const { value, fractional, inverse, unit, max, description } = {\n    ...defaultGaugeProps,\n    ...props\n  };\n  const asPercentage = fractional ? Math.round(value * max) : value;\n  const asActual = max !== 100 ? Math.round(value) : asPercentage;\n  const [isHovering, setIsHovering] = useState(false);\n  useEffect(() => {\n    const node = hoverRef;\n    const handleMouseOver = () => setIsHovering(true);\n    const handleMouseOut = () => setIsHovering(false);\n    if (node && description) {\n      node.addEventListener(\"mouseenter\", handleMouseOver);\n      node.addEventListener(\"mouseleave\", handleMouseOut);\n      return () => {\n        node.removeEventListener(\"mouseenter\", handleMouseOver);\n        node.removeEventListener(\"mouseleave\", handleMouseOut);\n      };\n    }\n    return () => {\n      setIsHovering(false);\n    };\n  }, [description, hoverRef]);\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    ref: setHoverRef,\n    className: classes.root\n  }, /* @__PURE__ */ React.createElement(Circle, {\n    strokeLinecap: \"butt\",\n    percent: asPercentage,\n    strokeWidth: 12,\n    trailWidth: 12,\n    strokeColor: getColor({ palette, value: asActual, inverse, max }),\n    className: classes.circle\n  }), description && isHovering ? /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.description\n  }, description) : /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.overlay\n  }, isNaN(value) ? \"N/A\" : `${asActual}${unit}`));\n}\n\nconst useStyles$v = makeStyles({\n  root: {\n    height: \"100%\",\n    width: 250\n  }\n}, { name: \"BackstageGaugeCard\" });\nfunction GaugeCard(props) {\n  const classes = useStyles$v(props);\n  const {\n    title,\n    subheader,\n    progress,\n    inverse,\n    deepLink,\n    description,\n    icon,\n    variant,\n    getColor\n  } = props;\n  const gaugeProps = {\n    inverse,\n    description,\n    getColor,\n    value: progress\n  };\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.root\n  }, /* @__PURE__ */ React.createElement(InfoCard, {\n    title,\n    subheader,\n    deepLink,\n    variant,\n    icon\n  }, /* @__PURE__ */ React.createElement(Gauge, {\n    ...gaugeProps\n  })));\n}\n\nfunction LinearGauge(props) {\n  const { value, getColor = getProgressColor } = props;\n  const { palette } = useTheme();\n  if (isNaN(value)) {\n    return null;\n  }\n  let percent = Math.round(value * 100 * 100) / 100;\n  if (percent > 100) {\n    percent = 100;\n  }\n  const strokeColor = getColor({\n    palette,\n    value: percent,\n    inverse: false,\n    max: 100\n  });\n  return /* @__PURE__ */ React.createElement(Tooltip, {\n    title: `${percent}%`\n  }, /* @__PURE__ */ React.createElement(\"span\", null, /* @__PURE__ */ React.createElement(Line, {\n    percent,\n    strokeWidth: 4,\n    trailWidth: 4,\n    strokeColor\n  })));\n}\n\nconst useStyles$u = makeStyles(() => createStyles({\n  icon: {\n    position: \"absolute\",\n    right: \"4px\",\n    pointerEvents: \"none\"\n  }\n}), { name: \"BackstageClosedDropdown\" });\nconst ClosedDropdown = () => {\n  const classes = useStyles$u();\n  return /* @__PURE__ */ React.createElement(SvgIcon, {\n    className: classes.icon,\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, /* @__PURE__ */ React.createElement(\"path\", {\n    d: \"M7.5 8L6 9.5L12.0703 15.5703L18.1406 9.5L16.6406 8L12.0703 12.5703L7.5 8Z\",\n    fill: \"#616161\"\n  }));\n};\n\nconst useStyles$t = makeStyles(() => createStyles({\n  icon: {\n    position: \"absolute\",\n    right: \"4px\",\n    pointerEvents: \"none\"\n  }\n}), { name: \"BackstageOpenedDropdown\" });\nconst OpenedDropdown = () => {\n  const classes = useStyles$t();\n  return /* @__PURE__ */ React.createElement(SvgIcon, {\n    className: classes.icon,\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, /* @__PURE__ */ React.createElement(\"path\", {\n    d: \"M16.5 16L18 14.5L11.9297 8.42969L5.85938 14.5L7.35938 16L11.9297 11.4297L16.5 16Z\",\n    fill: \"#616161\"\n  }));\n};\n\nconst BootstrapInput = withStyles((theme) => createStyles({\n  root: {\n    \"label + &\": {\n      marginTop: theme.spacing(3)\n    }\n  },\n  input: {\n    borderRadius: 4,\n    position: \"relative\",\n    backgroundColor: theme.palette.background.paper,\n    border: \"1px solid #ced4da\",\n    fontSize: 16,\n    padding: \"10px 26px 10px 12px\",\n    transition: theme.transitions.create([\"border-color\", \"box-shadow\"]),\n    fontFamily: \"Helvetica Neue\",\n    \"&:focus\": {\n      background: theme.palette.background.paper,\n      borderRadius: 4\n    }\n  }\n}), { name: \"BackstageSelectInputBase\" })(InputBase);\nconst useStyles$s = makeStyles((theme) => createStyles({\n  formControl: {\n    margin: `${theme.spacing(1)} 0px`,\n    maxWidth: 300\n  },\n  label: {\n    transform: \"initial\",\n    fontWeight: \"bold\",\n    fontSize: 14,\n    fontFamily: theme.typography.fontFamily,\n    color: theme.palette.text.primary,\n    \"&.Mui-focused\": {\n      color: theme.palette.text.primary\n    }\n  },\n  chips: {\n    display: \"flex\",\n    flexWrap: \"wrap\"\n  },\n  chip: {\n    margin: 2\n  },\n  checkbox: {},\n  root: {\n    display: \"flex\",\n    flexDirection: \"column\"\n  }\n}), { name: \"BackstageSelect\" });\nfunction SelectComponent(props) {\n  const {\n    multiple,\n    items,\n    label,\n    placeholder,\n    selected,\n    onChange,\n    triggerReset,\n    native = false,\n    disabled = false\n  } = props;\n  const classes = useStyles$s();\n  const [value, setValue] = useState(selected || (multiple ? [] : \"\"));\n  const [isOpen, setOpen] = useState(false);\n  useEffect(() => {\n    setValue(multiple ? [] : \"\");\n  }, [triggerReset, multiple]);\n  useEffect(() => {\n    if (selected !== void 0) {\n      setValue(selected);\n    }\n  }, [selected]);\n  const handleChange = (event) => {\n    setValue(event.target.value);\n    onChange(event.target.value);\n  };\n  const handleClick = (event) => {\n    if (disabled) {\n      event.preventDefault();\n      return;\n    }\n    setOpen((previous) => {\n      if (multiple && !(event.target instanceof HTMLElement)) {\n        return true;\n      }\n      return !previous;\n    });\n  };\n  const handleClickAway = () => {\n    setOpen(false);\n  };\n  const handleDelete = (selectedValue) => () => {\n    const newValue = value.filter((chip) => chip !== selectedValue);\n    setValue(newValue);\n    onChange(newValue);\n  };\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.root\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"button\"\n  }, label), /* @__PURE__ */ React.createElement(ClickAwayListener, {\n    onClickAway: handleClickAway\n  }, /* @__PURE__ */ React.createElement(FormControl, {\n    className: classes.formControl\n  }, /* @__PURE__ */ React.createElement(Select, {\n    value,\n    native,\n    disabled,\n    \"data-testid\": \"select\",\n    displayEmpty: true,\n    multiple,\n    onChange: handleChange,\n    onClick: handleClick,\n    open: isOpen,\n    input: /* @__PURE__ */ React.createElement(BootstrapInput, null),\n    renderValue: (s) => {\n      var _a;\n      return multiple && value.length !== 0 ? /* @__PURE__ */ React.createElement(\"div\", {\n        className: classes.chips\n      }, s.map((selectedValue) => {\n        var _a2, _b;\n        return /* @__PURE__ */ React.createElement(Chip, {\n          key: (_a2 = items.find((el) => el.value === selectedValue)) == null ? void 0 : _a2.value,\n          label: (_b = items.find((el) => el.value === selectedValue)) == null ? void 0 : _b.label,\n          clickable: true,\n          onDelete: handleDelete(selectedValue),\n          className: classes.chip\n        });\n      })) : /* @__PURE__ */ React.createElement(Typography, null, value.length === 0 ? placeholder || \"\" : (_a = items.find((el) => el.value === s)) == null ? void 0 : _a.label);\n    },\n    IconComponent: () => !isOpen ? /* @__PURE__ */ React.createElement(ClosedDropdown, null) : /* @__PURE__ */ React.createElement(OpenedDropdown, null),\n    MenuProps: {\n      anchorOrigin: {\n        vertical: \"bottom\",\n        horizontal: \"left\"\n      },\n      transformOrigin: {\n        vertical: \"top\",\n        horizontal: \"left\"\n      },\n      getContentAnchorEl: null\n    }\n  }, placeholder && !multiple && /* @__PURE__ */ React.createElement(MenuItem, {\n    value: []\n  }, placeholder), native ? items && items.map((item) => /* @__PURE__ */ React.createElement(\"option\", {\n    value: item.value,\n    key: item.value\n  }, item.label)) : items && items.map((item) => /* @__PURE__ */ React.createElement(MenuItem, {\n    key: item.value,\n    value: item.value\n  }, multiple && /* @__PURE__ */ React.createElement(Checkbox, {\n    color: \"primary\",\n    checked: value.includes(item.value) || false,\n    className: classes.checkbox\n  }), item.label))))));\n}\n\nconst noop = () => {\n};\nconst VerticalStepperContext = React.createContext({\n  stepperLength: 0,\n  stepIndex: 0,\n  setStepIndex: noop,\n  stepHistory: [],\n  setStepHistory: noop,\n  onStepChange: noop\n});\nfunction SimpleStepper(props) {\n  const { children, elevated, onStepChange, activeStep = 0 } = props;\n  const [stepIndex, setStepIndex] = useState(activeStep);\n  const [stepHistory, setStepHistory] = useState([0]);\n  useEffect(() => {\n    setStepIndex(activeStep);\n  }, [activeStep]);\n  const steps = [];\n  let endStep;\n  Children.forEach(children, (child) => {\n    if (isValidElement(child)) {\n      if (child.props.end) {\n        endStep = child;\n      } else {\n        steps.push(child);\n      }\n    }\n  });\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(VerticalStepperContext.Provider, {\n    value: {\n      stepIndex,\n      setStepIndex,\n      stepHistory,\n      setStepHistory,\n      onStepChange,\n      stepperLength: Children.count(children)\n    }\n  }, /* @__PURE__ */ React.createElement(MuiStepper, {\n    activeStep: stepIndex,\n    orientation: \"vertical\",\n    elevation: elevated ? 2 : 0\n  }, steps)), stepIndex >= Children.count(children) - 1 && endStep);\n}\n\nconst useStyles$r = makeStyles((theme) => ({\n  root: {\n    marginTop: theme.spacing(3),\n    \"& button\": {\n      marginRight: theme.spacing(1)\n    }\n  }\n}), { name: \"BackstageSimpleStepperFooter\" });\nconst RestartBtn = ({ text, handleClick }) => /* @__PURE__ */ React.createElement(Button$1, {\n  onClick: handleClick\n}, text || \"Reset\");\nconst NextBtn = ({\n  text,\n  handleClick,\n  disabled,\n  last,\n  stepIndex\n}) => /* @__PURE__ */ React.createElement(Button$1, {\n  variant: \"contained\",\n  color: \"primary\",\n  disabled,\n  \"data-testid\": `nextButton-${stepIndex}`,\n  onClick: handleClick\n}, text || (last ? \"Finish\" : \"Next\"));\nconst BackBtn = ({ text, handleClick, disabled, stepIndex }) => /* @__PURE__ */ React.createElement(Button$1, {\n  onClick: handleClick,\n  \"data-testid\": `backButton-${stepIndex}`,\n  disabled\n}, text || \"Back\");\nconst SimpleStepperFooter = ({\n  actions = {},\n  children\n}) => {\n  const classes = useStyles$r();\n  const {\n    stepperLength,\n    stepIndex,\n    setStepIndex,\n    stepHistory,\n    setStepHistory,\n    onStepChange\n  } = useContext(VerticalStepperContext);\n  const onChange = (newIndex, callback) => {\n    if (callback) {\n      callback();\n    }\n    if (onStepChange) {\n      onStepChange(stepIndex, newIndex);\n    }\n    setStepIndex(newIndex);\n  };\n  const handleNext = () => {\n    const newIndex = actions.nextStep ? actions.nextStep(stepIndex, stepperLength - 1) : stepIndex + 1;\n    onChange(newIndex, actions.onNext);\n    setStepHistory([...stepHistory, newIndex]);\n  };\n  const handleBack = () => {\n    stepHistory.pop();\n    onChange(stepHistory[stepHistory.length - 1], actions.onBack);\n    setStepHistory([...stepHistory]);\n  };\n  const handleRestart = () => {\n    onChange(0, actions.onRestart);\n    setStepHistory([0]);\n  };\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.root\n  }, [void 0, true].includes(actions.showBack) && stepIndex !== 0 && /* @__PURE__ */ React.createElement(BackBtn, {\n    text: actions.backText,\n    handleClick: handleBack,\n    disabled: stepIndex === 0,\n    stepIndex\n  }), [void 0, true].includes(actions.showNext) && /* @__PURE__ */ React.createElement(NextBtn, {\n    text: actions.nextText,\n    handleClick: handleNext,\n    disabled: !!stepperLength && stepIndex >= stepperLength || !!actions.canNext && !actions.canNext(),\n    stepIndex\n  }), actions.showRestart && stepIndex !== 0 && /* @__PURE__ */ React.createElement(RestartBtn, {\n    text: actions.restartText,\n    handleClick: handleRestart,\n    stepIndex\n  }), children);\n};\n\nconst useStyles$q = makeStyles((theme) => ({\n  end: {\n    padding: theme.spacing(3)\n  }\n}), { name: \"SimpleStepperStep\" });\nfunction SimpleStepperStep(props) {\n  const { title, children, end, actions, ...muiProps } = props;\n  const classes = useStyles$q();\n  return end ? /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.end\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"h6\"\n  }, title), children, /* @__PURE__ */ React.createElement(SimpleStepperFooter, {\n    actions: { ...actions || {}, showNext: false }\n  })) : /* @__PURE__ */ React.createElement(MuiStep, {\n    ...muiProps\n  }, /* @__PURE__ */ React.createElement(StepLabel, null, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"h6\"\n  }, title)), /* @__PURE__ */ React.createElement(StepContent, null, children, /* @__PURE__ */ React.createElement(SimpleStepperFooter, {\n    actions\n  })));\n}\n\nconst useStyles$p = makeStyles((theme) => ({\n  status: {\n    fontWeight: 500,\n    \"&::before\": {\n      width: \"0.7em\",\n      height: \"0.7em\",\n      display: \"inline-block\",\n      marginRight: 8,\n      borderRadius: \"50%\",\n      content: '\"\"'\n    }\n  },\n  ok: {\n    \"&::before\": {\n      backgroundColor: theme.palette.status.ok\n    }\n  },\n  warning: {\n    \"&::before\": {\n      backgroundColor: theme.palette.status.warning\n    }\n  },\n  error: {\n    \"&::before\": {\n      backgroundColor: theme.palette.status.error\n    }\n  },\n  pending: {\n    \"&::before\": {\n      backgroundColor: theme.palette.status.pending\n    }\n  },\n  running: {\n    \"&::before\": {\n      backgroundColor: theme.palette.status.running\n    }\n  },\n  aborted: {\n    \"&::before\": {\n      backgroundColor: theme.palette.status.aborted\n    }\n  }\n}), { name: \"BackstageStatus\" });\nfunction StatusOK(props) {\n  const classes = useStyles$p(props);\n  return /* @__PURE__ */ React.createElement(\"span\", {\n    className: classNames(classes.status, classes.ok),\n    \"aria-label\": \"Status ok\",\n    \"aria-hidden\": \"true\",\n    ...props\n  });\n}\nfunction StatusWarning(props) {\n  const classes = useStyles$p(props);\n  return /* @__PURE__ */ React.createElement(\"span\", {\n    className: classNames(classes.status, classes.warning),\n    \"aria-label\": \"Status warning\",\n    \"aria-hidden\": \"true\",\n    ...props\n  });\n}\nfunction StatusError(props) {\n  const classes = useStyles$p(props);\n  return /* @__PURE__ */ React.createElement(\"span\", {\n    className: classNames(classes.status, classes.error),\n    \"aria-label\": \"Status error\",\n    \"aria-hidden\": \"true\",\n    ...props\n  });\n}\nfunction StatusPending(props) {\n  const classes = useStyles$p(props);\n  return /* @__PURE__ */ React.createElement(\"span\", {\n    className: classNames(classes.status, classes.pending),\n    \"aria-label\": \"Status pending\",\n    \"aria-hidden\": \"true\",\n    ...props\n  });\n}\nfunction StatusRunning(props) {\n  const classes = useStyles$p(props);\n  return /* @__PURE__ */ React.createElement(\"span\", {\n    className: classNames(classes.status, classes.running),\n    \"aria-label\": \"Status running\",\n    \"aria-hidden\": \"true\",\n    ...props\n  });\n}\nfunction StatusAborted(props) {\n  const classes = useStyles$p(props);\n  return /* @__PURE__ */ React.createElement(\"span\", {\n    className: classNames(classes.status, classes.aborted),\n    \"aria-label\": \"Status aborted\",\n    \"aria-hidden\": \"true\",\n    ...props\n  });\n}\n\nconst tableTitleCellStyles = (theme) => createStyles({\n  root: {\n    fontWeight: \"bolder\",\n    whiteSpace: \"nowrap\",\n    paddingRight: theme.spacing(4),\n    border: \"0\",\n    verticalAlign: \"top\"\n  }\n});\nconst tableContentCellStyles = {\n  root: {\n    border: \"0\",\n    verticalAlign: \"top\"\n  }\n};\nconst listStyles = (theme) => createStyles({\n  root: {\n    listStyle: \"none\",\n    margin: theme.spacing(0, 0, -1, 0),\n    padding: \"0\"\n  }\n});\nconst listItemStyles = (theme) => createStyles({\n  root: {\n    padding: theme.spacing(0, 0, 1, 0)\n  },\n  random: {}\n});\nconst TitleCell = withStyles(tableTitleCellStyles, {\n  name: \"BackstageMetadataTableTitleCell\"\n})(TableCell);\nconst ContentCell = withStyles(tableContentCellStyles, {\n  name: \"BackstageMetadataTableCell\"\n})(TableCell);\nconst MetadataTable = ({\n  dense,\n  children\n}) => /* @__PURE__ */ React.createElement(Table$1, {\n  size: dense ? \"small\" : \"medium\"\n}, /* @__PURE__ */ React.createElement(TableBody, null, children));\nconst MetadataTableItem = ({\n  title,\n  children,\n  ...rest\n}) => /* @__PURE__ */ React.createElement(TableRow, null, title && /* @__PURE__ */ React.createElement(TitleCell, null, title), /* @__PURE__ */ React.createElement(ContentCell, {\n  colSpan: title ? 1 : 2,\n  ...rest\n}, children));\nconst MetadataList = withStyles(listStyles, {\n  name: \"BackstageMetadataTableList\"\n})(({ classes, children }) => /* @__PURE__ */ React.createElement(\"ul\", {\n  className: classes.root\n}, children));\nconst MetadataListItem = withStyles(listItemStyles, {\n  name: \"BackstageMetadataTableListItem\"\n})(({ classes, children }) => /* @__PURE__ */ React.createElement(\"li\", {\n  className: classes.root\n}, children));\n\nconst listStyle = createStyles({\n  root: {\n    margin: \"0 0\",\n    listStyleType: \"none\"\n  }\n});\nconst nestedListStyle = (theme) => createStyles({\n  root: {\n    ...listStyle.root,\n    paddingLeft: theme.spacing(1)\n  }\n});\nconst StyledList = withStyles(listStyle, {\n  name: \"BackstageStructuredMetadataTableList\"\n})(({ classes, children }) => /* @__PURE__ */ React.createElement(MetadataList, {\n  classes\n}, children));\nconst StyledNestedList = withStyles(nestedListStyle, {\n  name: \"BackstageStructuredMetadataTableNestedList\"\n})(({ classes, children }) => /* @__PURE__ */ React.createElement(MetadataList, {\n  classes\n}, children));\nfunction renderList(list, nested) {\n  const values = list.map((item, index) => /* @__PURE__ */ React.createElement(MetadataListItem, {\n    key: index\n  }, toValue(item)));\n  return nested ? /* @__PURE__ */ React.createElement(StyledNestedList, null, values) : /* @__PURE__ */ React.createElement(StyledList, null, values);\n}\nfunction renderMap(map, nested, options) {\n  const values = Object.keys(map).map((key) => {\n    const value = toValue(map[key], true);\n    const fmtKey = options && options.titleFormat ? options.titleFormat(key) : startCase(key);\n    return /* @__PURE__ */ React.createElement(MetadataListItem, {\n      key\n    }, `${fmtKey}: `, value);\n  });\n  return nested ? /* @__PURE__ */ React.createElement(StyledNestedList, null, values) : /* @__PURE__ */ React.createElement(StyledList, null, values);\n}\nfunction toValue(value, options, nested) {\n  if (React.isValidElement(value)) {\n    return /* @__PURE__ */ React.createElement(Fragment, null, value);\n  }\n  if (typeof value === \"object\" && !Array.isArray(value)) {\n    return renderMap(value, options, nested);\n  }\n  if (Array.isArray(value)) {\n    return renderList(value, nested);\n  }\n  if (typeof value === \"boolean\") {\n    return /* @__PURE__ */ React.createElement(Fragment, null, value ? \"\\u2705\" : \"\\u274C\");\n  }\n  return /* @__PURE__ */ React.createElement(Fragment, null, value);\n}\nconst ItemValue = ({ value, options }) => /* @__PURE__ */ React.createElement(Fragment, null, toValue(value, options));\nconst TableItem = ({\n  title,\n  value,\n  options\n}) => {\n  return /* @__PURE__ */ React.createElement(MetadataTableItem, {\n    title: options && options.titleFormat ? options.titleFormat(title) : startCase(title)\n  }, /* @__PURE__ */ React.createElement(ItemValue, {\n    value,\n    options\n  }));\n};\nfunction mapToItems(info, options) {\n  return Object.keys(info).map((key) => /* @__PURE__ */ React.createElement(TableItem, {\n    key,\n    title: key,\n    value: info[key],\n    options\n  }));\n}\nfunction StructuredMetadataTable(props) {\n  const { metadata, dense = true, options } = props;\n  const metadataItems = mapToItems(metadata, options || {});\n  return /* @__PURE__ */ React.createElement(MetadataTable, {\n    dense\n  }, metadataItems);\n}\n\nfunction stringify(queryParams) {\n  return qs.stringify(queryParams, {\n    strictNullHandling: true\n  });\n}\nfunction parse(queryString) {\n  return qs.parse(queryString, {\n    ignoreQueryPrefix: true,\n    strictNullHandling: true\n  });\n}\nfunction extractState(queryString, stateName) {\n  const queryParams = parse(queryString);\n  return queryParams[stateName];\n}\nfunction joinQueryString(queryString, stateName, state) {\n  const queryParams = {\n    ...parse(queryString),\n    [stateName]: state\n  };\n  return stringify(queryParams);\n}\nfunction useQueryParamState(stateName, debounceTime = 250) {\n  const [searchParams, setSearchParams] = useSearchParams();\n  const searchParamsString = searchParams.toString();\n  const [queryParamState, setQueryParamState] = useState(extractState(searchParamsString, stateName));\n  useEffect(() => {\n    const newState = extractState(searchParamsString, stateName);\n    setQueryParamState((oldState) => isEqual(newState, oldState) ? oldState : newState);\n  }, [searchParamsString, setQueryParamState, stateName]);\n  useDebouncedEffect(() => {\n    const queryString = joinQueryString(searchParamsString, stateName, queryParamState);\n    if (searchParamsString !== queryString) {\n      setSearchParams(queryString, { replace: true });\n    }\n  }, [setSearchParams, queryParamState, searchParamsString, stateName], debounceTime);\n  return [queryParamState, setQueryParamState];\n}\n\nconst DEFAULT_SUPPORT_CONFIG = {\n  url: \"https://github.com/backstage/backstage/issues\",\n  items: [\n    {\n      title: \"Support Not Configured\",\n      icon: \"warning\",\n      links: [\n        {\n          title: \"Add `app.support` config key\",\n          url: \"https://github.com/backstage/backstage/blob/master/app-config.yaml\"\n        }\n      ]\n    }\n  ]\n};\nfunction useSupportConfig() {\n  const apiHolder = useApiHolder();\n  const config = apiHolder.get(configApiRef);\n  const supportConfig = config == null ? void 0 : config.getOptionalConfig(\"app.support\");\n  if (!supportConfig) {\n    return DEFAULT_SUPPORT_CONFIG;\n  }\n  return {\n    url: supportConfig.getString(\"url\"),\n    items: supportConfig.getConfigArray(\"items\").flatMap((itemConf) => {\n      var _a;\n      return {\n        title: itemConf.getString(\"title\"),\n        icon: itemConf.getOptionalString(\"icon\"),\n        links: ((_a = itemConf.getOptionalConfigArray(\"links\")) != null ? _a : []).flatMap((linkConf) => ({\n          url: linkConf.getString(\"url\"),\n          title: linkConf.getString(\"title\")\n        }))\n      };\n    })\n  };\n}\n\nfunction useSystemIcon(key, props) {\n  const app = useApp();\n  const Icon = app.getSystemIcon(key);\n  return Icon ? /* @__PURE__ */ React.createElement(Icon, {\n    ...props\n  }) : /* @__PURE__ */ React.createElement(MuiBrokenImageIcon, {\n    ...props\n  });\n}\nfunction BrokenImageIcon(props) {\n  return useSystemIcon(\"brokenImage\", props);\n}\nfunction CatalogIcon(props) {\n  return useSystemIcon(\"catalog\", props);\n}\nfunction ChatIcon(props) {\n  return useSystemIcon(\"chat\", props);\n}\nfunction DashboardIcon(props) {\n  return useSystemIcon(\"dashboard\", props);\n}\nfunction DocsIcon(props) {\n  return useSystemIcon(\"docs\", props);\n}\nfunction EmailIcon(props) {\n  return useSystemIcon(\"email\", props);\n}\nfunction GitHubIcon(props) {\n  return useSystemIcon(\"github\", props);\n}\nfunction GroupIcon(props) {\n  return useSystemIcon(\"group\", props);\n}\nfunction HelpIcon(props) {\n  return useSystemIcon(\"help\", props);\n}\nfunction UserIcon(props) {\n  return useSystemIcon(\"user\", props);\n}\nfunction WarningIcon(props) {\n  return useSystemIcon(\"warning\", props);\n}\n\nconst useStyles$o = makeStyles({\n  popoverList: {\n    minWidth: 260,\n    maxWidth: 400\n  }\n}, { name: \"BackstageSupportButton\" });\nconst SupportIcon = ({ icon }) => {\n  var _a;\n  const app = useApp();\n  const Icon = icon ? (_a = app.getSystemIcon(icon)) != null ? _a : HelpIcon : HelpIcon;\n  return /* @__PURE__ */ React.createElement(Icon, null);\n};\nconst SupportLink = ({ link }) => {\n  var _a;\n  return /* @__PURE__ */ React.createElement(Link, {\n    to: link.url\n  }, (_a = link.title) != null ? _a : link.url);\n};\nconst SupportListItem = ({ item }) => {\n  var _a;\n  return /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(SupportIcon, {\n    icon: item.icon\n  })), /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: item.title,\n    secondary: (_a = item.links) == null ? void 0 : _a.reduce((prev, link, idx) => [\n      ...prev,\n      idx > 0 && /* @__PURE__ */ React.createElement(\"br\", {\n        key: idx\n      }),\n      /* @__PURE__ */ React.createElement(SupportLink, {\n        link,\n        key: link.url\n      })\n    ], [])\n  }));\n};\nfunction SupportButton(props) {\n  const { title, children } = props;\n  const { items } = useSupportConfig();\n  const [popoverOpen, setPopoverOpen] = useState(false);\n  const [anchorEl, setAnchorEl] = useState(null);\n  const classes = useStyles$o();\n  const isSmallScreen = useMediaQuery((theme) => theme.breakpoints.down(\"sm\"));\n  const onClickHandler = (event) => {\n    setAnchorEl(event.currentTarget);\n    setPopoverOpen(true);\n  };\n  const popoverCloseHandler = () => {\n    setPopoverOpen(false);\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Box, {\n    display: \"flex\",\n    ml: 1\n  }, isSmallScreen ? /* @__PURE__ */ React.createElement(IconButton, {\n    color: \"primary\",\n    size: \"small\",\n    onClick: onClickHandler,\n    \"data-testid\": \"support-button\"\n  }, /* @__PURE__ */ React.createElement(HelpIcon, null)) : /* @__PURE__ */ React.createElement(Button$1, {\n    \"data-testid\": \"support-button\",\n    color: \"primary\",\n    onClick: onClickHandler,\n    startIcon: /* @__PURE__ */ React.createElement(HelpIcon, null)\n  }, \"Support\")), /* @__PURE__ */ React.createElement(Popover, {\n    \"data-testid\": \"support-button-popover\",\n    open: popoverOpen,\n    anchorEl,\n    anchorOrigin: {\n      vertical: \"bottom\",\n      horizontal: \"right\"\n    },\n    transformOrigin: {\n      vertical: \"top\",\n      horizontal: \"right\"\n    },\n    onClose: popoverCloseHandler\n  }, /* @__PURE__ */ React.createElement(List, {\n    className: classes.popoverList\n  }, title && /* @__PURE__ */ React.createElement(ListItem, {\n    alignItems: \"flex-start\"\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"subtitle1\"\n  }, title)), React.Children.map(children, (child, i) => /* @__PURE__ */ React.createElement(ListItem, {\n    alignItems: \"flex-start\",\n    key: `child-${i}`\n  }, child)), items && items.map((item, i) => /* @__PURE__ */ React.createElement(SupportListItem, {\n    item,\n    key: `item-${i}`\n  }))), /* @__PURE__ */ React.createElement(DialogActions, null, /* @__PURE__ */ React.createElement(Button$1, {\n    color: \"primary\",\n    onClick: popoverCloseHandler\n  }, \"Close\"))));\n}\n\nconst drawerWidthClosed = 72;\nconst iconPadding = 24;\nconst userBadgePadding = 18;\nconst sidebarConfig = {\n  drawerWidthClosed,\n  drawerWidthOpen: 224,\n  defaultOpenDelayMs: 100,\n  defaultCloseDelayMs: 0,\n  defaultFadeDuration: 200,\n  logoHeight: 32,\n  iconContainerWidth: drawerWidthClosed,\n  iconSize: drawerWidthClosed - iconPadding * 2,\n  iconPadding,\n  selectedIndicatorWidth: 3,\n  userBadgePadding,\n  userBadgeDiameter: drawerWidthClosed - userBadgePadding * 2,\n  mobileSidebarHeight: 56\n};\nconst makeSidebarConfig = (customSidebarConfig) => ({\n  ...sidebarConfig,\n  ...customSidebarConfig,\n  iconContainerWidth: sidebarConfig.drawerWidthClosed,\n  iconSize: sidebarConfig.drawerWidthClosed - sidebarConfig.iconPadding * 2,\n  userBadgeDiameter: sidebarConfig.drawerWidthClosed - sidebarConfig.userBadgePadding * 2\n});\nconst submenuConfig = {\n  drawerWidthClosed: 0,\n  drawerWidthOpen: 202,\n  defaultOpenDelayMs: sidebarConfig.defaultOpenDelayMs + 200\n};\nconst makeSidebarSubmenuConfig = (customSubmenuConfig) => ({\n  ...submenuConfig,\n  ...customSubmenuConfig\n});\nconst SIDEBAR_INTRO_LOCAL_STORAGE = \"@backstage/core/sidebar-intro-dismissed\";\nconst SidebarContext = createContext({\n  isOpen: false,\n  setOpen: () => {\n  }\n});\nconst SidebarConfigContext = createContext({\n  sidebarConfig,\n  submenuConfig\n});\nconst SidebarItemWithSubmenuContext = createContext({\n  isHoveredOn: false,\n  setIsHoveredOn: () => {\n  }\n});\n\nconst LocalStorage = {\n  getSidebarPinState() {\n    let value;\n    try {\n      value = JSON.parse(window.localStorage.getItem(\"sidebarPinState\" /* SIDEBAR_PIN_STATE */) || \"true\");\n    } catch {\n      return true;\n    }\n    return !!value;\n  },\n  setSidebarPinState(state) {\n    return window.localStorage.setItem(\"sidebarPinState\" /* SIDEBAR_PIN_STATE */, JSON.stringify(state));\n  }\n};\n\nconst useStyles$n = makeStyles((theme) => ({\n  root: (props) => ({\n    width: \"100%\",\n    transition: \"padding-left 0.1s ease-out\",\n    isolation: \"isolate\",\n    [theme.breakpoints.up(\"sm\")]: {\n      paddingLeft: () => props.isPinned ? props.sidebarConfig.drawerWidthOpen : props.sidebarConfig.drawerWidthClosed\n    },\n    [theme.breakpoints.down(\"xs\")]: {\n      paddingBottom: props.sidebarConfig.mobileSidebarHeight\n    }\n  }),\n  content: {\n    zIndex: 0,\n    isolation: \"isolate\",\n    \"&:focus\": {\n      outline: 0\n    }\n  }\n}), { name: \"BackstageSidebarPage\" });\nconst SidebarPinStateContext = createContext({\n  isPinned: true,\n  toggleSidebarPinState: () => {\n  },\n  isMobile: false\n});\nconst PageContext = createContext({\n  content: {\n    contentRef: void 0\n  }\n});\nfunction SidebarPage(props) {\n  const [isPinned, setIsPinned] = useState(() => LocalStorage.getSidebarPinState());\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const contentRef = useRef(null);\n  const pageContext = useMemo(() => ({\n    content: {\n      contentRef\n    }\n  }), [contentRef]);\n  useEffect(() => {\n    LocalStorage.setSidebarPinState(isPinned);\n  }, [isPinned]);\n  const isMobile = useMediaQuery((theme) => theme.breakpoints.down(\"xs\"), { noSsr: true });\n  const toggleSidebarPinState = () => setIsPinned(!isPinned);\n  const classes = useStyles$n({ isPinned, sidebarConfig });\n  return /* @__PURE__ */ React.createElement(SidebarPinStateContext.Provider, {\n    value: {\n      isPinned,\n      toggleSidebarPinState,\n      isMobile\n    }\n  }, /* @__PURE__ */ React.createElement(PageContext.Provider, {\n    value: pageContext\n  }, /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.root\n  }, props.children)));\n}\nfunction useContent() {\n  const { content } = useContext(PageContext);\n  const focusContent = useCallback(() => {\n    var _a, _b;\n    (_b = (_a = content == null ? void 0 : content.contentRef) == null ? void 0 : _a.current) == null ? void 0 : _b.focus();\n  }, [content]);\n  return { focusContent, contentRef: content == null ? void 0 : content.contentRef };\n}\n\nconst useStyles$m = makeStyles((theme) => ({\n  root: {\n    flexGrow: 0,\n    margin: theme.spacing(0, 2),\n    color: theme.palette.navigation.color\n  },\n  selected: (props) => ({\n    color: `${theme.palette.navigation.selectedColor}!important`,\n    borderTop: `solid ${props.sidebarConfig.selectedIndicatorWidth}px ${theme.palette.navigation.indicator}`,\n    marginTop: \"-1px\"\n  }),\n  label: {\n    display: \"none\"\n  }\n}));\nconst MobileSidebarGroup = (props) => {\n  const { to, label, icon, value } = props;\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useStyles$m({ sidebarConfig });\n  const location = useLocation();\n  const { selectedMenuItemIndex, setSelectedMenuItemIndex } = useContext(MobileSidebarContext);\n  const onChange = (_, value2) => {\n    if (value2 === selectedMenuItemIndex) {\n      setSelectedMenuItemIndex(-1);\n    } else {\n      setSelectedMenuItemIndex(value2);\n    }\n  };\n  const selected = value === selectedMenuItemIndex && selectedMenuItemIndex >= 0 || !(value === selectedMenuItemIndex) && !(selectedMenuItemIndex >= 0) && to === location.pathname;\n  return /* @__PURE__ */ React.createElement(BottomNavigationAction, {\n    label,\n    icon,\n    component: Link,\n    to: to ? to : location.pathname,\n    onChange,\n    value,\n    selected,\n    classes\n  });\n};\nconst SidebarGroup = (props) => {\n  const { children, to, label, icon, value } = props;\n  const { isMobile } = useContext(SidebarPinStateContext);\n  return isMobile ? /* @__PURE__ */ React.createElement(MobileSidebarGroup, {\n    to,\n    label,\n    icon,\n    value\n  }) : /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n};\n\nconst useStyles$l = makeStyles((theme) => ({\n  root: {\n    position: \"fixed\",\n    backgroundColor: theme.palette.navigation.background,\n    color: theme.palette.navigation.color,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    zIndex: theme.zIndex.snackbar,\n    borderTop: \"1px solid #383838\"\n  },\n  overlay: (props) => ({\n    background: theme.palette.navigation.background,\n    width: \"100%\",\n    bottom: `${props.sidebarConfig.mobileSidebarHeight}px`,\n    height: `calc(100% - ${props.sidebarConfig.mobileSidebarHeight}px)`,\n    flex: \"0 1 auto\",\n    overflow: \"auto\"\n  }),\n  overlayHeader: {\n    display: \"flex\",\n    color: theme.palette.bursts.fontColor,\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n    padding: theme.spacing(2, 3)\n  },\n  overlayHeaderClose: {\n    color: theme.palette.bursts.fontColor\n  },\n  marginMobileSidebar: (props) => ({\n    marginBottom: `${props.sidebarConfig.mobileSidebarHeight}px`\n  })\n}));\nconst sortSidebarGroupsForPriority = (children) => orderBy(children, ({ props: { priority } }) => Number.isInteger(priority) ? priority : -1, \"desc\");\nconst sidebarGroupType = React.createElement(SidebarGroup).type;\nconst OverlayMenu = ({\n  children,\n  label = \"Menu\",\n  open,\n  onClose\n}) => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useStyles$l({ sidebarConfig });\n  return /* @__PURE__ */ React.createElement(Drawer, {\n    anchor: \"bottom\",\n    open,\n    onClose,\n    ModalProps: {\n      BackdropProps: { classes: { root: classes.marginMobileSidebar } }\n    },\n    classes: {\n      root: classes.marginMobileSidebar,\n      paperAnchorBottom: classes.overlay\n    }\n  }, /* @__PURE__ */ React.createElement(Box, {\n    className: classes.overlayHeader\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"h3\"\n  }, label), /* @__PURE__ */ React.createElement(IconButton, {\n    onClick: onClose,\n    classes: { root: classes.overlayHeaderClose }\n  }, /* @__PURE__ */ React.createElement(CloseIcon, null))), /* @__PURE__ */ React.createElement(Box, null, children));\n};\nconst MobileSidebarContext = createContext({\n  selectedMenuItemIndex: -1,\n  setSelectedMenuItemIndex: () => {\n  }\n});\nconst MobileSidebar = (props) => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const { children } = props;\n  const classes = useStyles$l({ sidebarConfig });\n  const location = useLocation$1();\n  const [selectedMenuItemIndex, setSelectedMenuItemIndex] = useState(-1);\n  useEffect(() => {\n    setSelectedMenuItemIndex(-1);\n  }, [location.pathname]);\n  let sidebarGroups = useElementFilter(children, (elements) => elements.getElements().filter((child) => child.type === sidebarGroupType));\n  if (!children) {\n    return null;\n  } else if (!sidebarGroups.length) {\n    sidebarGroups.push(/* @__PURE__ */ React.createElement(SidebarGroup, {\n      key: \"default_menu\",\n      icon: /* @__PURE__ */ React.createElement(MenuIcon, null)\n    }, children));\n  } else {\n    sidebarGroups = sortSidebarGroupsForPriority(sidebarGroups);\n  }\n  const shouldShowGroupChildren = selectedMenuItemIndex >= 0 && !sidebarGroups[selectedMenuItemIndex].props.to;\n  return /* @__PURE__ */ React.createElement(SidebarContext.Provider, {\n    value: { isOpen: true, setOpen: () => {\n    } }\n  }, /* @__PURE__ */ React.createElement(MobileSidebarContext.Provider, {\n    value: { selectedMenuItemIndex, setSelectedMenuItemIndex }\n  }, /* @__PURE__ */ React.createElement(OverlayMenu, {\n    label: sidebarGroups[selectedMenuItemIndex] && sidebarGroups[selectedMenuItemIndex].props.label,\n    open: shouldShowGroupChildren,\n    onClose: () => setSelectedMenuItemIndex(-1)\n  }, sidebarGroups[selectedMenuItemIndex] && sidebarGroups[selectedMenuItemIndex].props.children), /* @__PURE__ */ React.createElement(BottomNavigation, {\n    className: classes.root,\n    \"data-testid\": \"mobile-sidebar-root\"\n  }, sidebarGroups)));\n};\n\nconst useStyles$k = makeStyles((theme) => ({\n  drawer: (props) => ({\n    display: \"flex\",\n    flexFlow: \"column nowrap\",\n    alignItems: \"flex-start\",\n    position: \"fixed\",\n    left: 0,\n    top: 0,\n    bottom: 0,\n    zIndex: theme.zIndex.appBar,\n    background: theme.palette.navigation.background,\n    overflowX: \"hidden\",\n    msOverflowStyle: \"none\",\n    scrollbarWidth: \"none\",\n    width: props.sidebarConfig.drawerWidthClosed,\n    transition: theme.transitions.create(\"width\", {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.shortest\n    }),\n    \"& > *\": {\n      flexShrink: 0\n    },\n    \"&::-webkit-scrollbar\": {\n      display: \"none\"\n    }\n  }),\n  drawerOpen: (props) => ({\n    width: props.sidebarConfig.drawerWidthOpen,\n    transition: theme.transitions.create(\"width\", {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.shorter\n    })\n  }),\n  visuallyHidden: {\n    top: 0,\n    position: \"absolute\",\n    zIndex: 1e3,\n    transform: \"translateY(-200%)\",\n    \"&:focus\": {\n      transform: \"translateY(5px)\"\n    }\n  }\n}), { name: \"BackstageSidebar\" });\nconst DesktopSidebar = (props) => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const {\n    openDelayMs = sidebarConfig.defaultOpenDelayMs,\n    closeDelayMs = sidebarConfig.defaultCloseDelayMs,\n    disableExpandOnHover,\n    children\n  } = props;\n  const classes = useStyles$k({ sidebarConfig });\n  const isSmallScreen = useMediaQuery((theme) => theme.breakpoints.down(\"md\"), { noSsr: true });\n  const [state, setState] = useState(0 /* Closed */);\n  const hoverTimerRef = useRef();\n  const { isPinned, toggleSidebarPinState } = useContext(SidebarPinStateContext);\n  const handleOpen = () => {\n    if (isPinned || disableExpandOnHover) {\n      return;\n    }\n    if (hoverTimerRef.current) {\n      clearTimeout(hoverTimerRef.current);\n      hoverTimerRef.current = void 0;\n    }\n    if (state !== 2 /* Open */ && !isSmallScreen) {\n      hoverTimerRef.current = window.setTimeout(() => {\n        hoverTimerRef.current = void 0;\n        setState(2 /* Open */);\n      }, openDelayMs);\n      setState(1 /* Idle */);\n    }\n  };\n  const handleClose = () => {\n    if (isPinned || disableExpandOnHover) {\n      return;\n    }\n    if (hoverTimerRef.current) {\n      clearTimeout(hoverTimerRef.current);\n      hoverTimerRef.current = void 0;\n    }\n    if (state === 1 /* Idle */) {\n      setState(0 /* Closed */);\n    } else if (state === 2 /* Open */) {\n      hoverTimerRef.current = window.setTimeout(() => {\n        hoverTimerRef.current = void 0;\n        setState(0 /* Closed */);\n      }, closeDelayMs);\n    }\n  };\n  const isOpen = state === 2 /* Open */ && !isSmallScreen || isPinned;\n  const setOpen = (open) => {\n    if (open) {\n      setState(2 /* Open */);\n      toggleSidebarPinState();\n    } else {\n      setState(0 /* Closed */);\n      toggleSidebarPinState();\n    }\n  };\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    style: {}\n  }, /* @__PURE__ */ React.createElement(A11ySkipSidebar, null), /* @__PURE__ */ React.createElement(SidebarContext.Provider, {\n    value: { isOpen, setOpen }\n  }, /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.root,\n    \"data-testid\": \"sidebar-root\",\n    onMouseEnter: disableExpandOnHover ? () => {\n    } : handleOpen,\n    onFocus: disableExpandOnHover ? () => {\n    } : handleOpen,\n    onMouseLeave: disableExpandOnHover ? () => {\n    } : handleClose,\n    onBlur: disableExpandOnHover ? () => {\n    } : handleClose\n  }, /* @__PURE__ */ React.createElement(\"div\", {\n    className: classNames(classes.drawer, {\n      [classes.drawerOpen]: isOpen\n    })\n  }, children))));\n};\nconst Sidebar = (props) => {\n  var _a, _b;\n  const sidebarConfig = makeSidebarConfig((_a = props.sidebarOptions) != null ? _a : {});\n  const submenuConfig = makeSidebarSubmenuConfig((_b = props.submenuOptions) != null ? _b : {});\n  const { children, disableExpandOnHover, openDelayMs, closeDelayMs } = props;\n  const { isMobile } = useContext(SidebarPinStateContext);\n  return isMobile ? /* @__PURE__ */ React.createElement(MobileSidebar, null, children) : /* @__PURE__ */ React.createElement(SidebarConfigContext.Provider, {\n    value: { sidebarConfig, submenuConfig }\n  }, /* @__PURE__ */ React.createElement(DesktopSidebar, {\n    openDelayMs,\n    closeDelayMs,\n    disableExpandOnHover\n  }, children));\n};\nfunction A11ySkipSidebar() {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const { focusContent, contentRef } = useContent();\n  const classes = useStyles$k({ sidebarConfig });\n  if (!(contentRef == null ? void 0 : contentRef.current)) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(Button$1, {\n    onClick: focusContent,\n    variant: \"contained\",\n    className: classNames(classes.visuallyHidden)\n  }, \"Skip to content\");\n}\n\nfunction isLocationMatch(currentLocation, toLocation) {\n  const toDecodedSearch = new URLSearchParams(toLocation.search).toString();\n  const toQueryParameters = qs.parse(toDecodedSearch);\n  const currentDecodedSearch = new URLSearchParams(currentLocation.search).toString();\n  const currentQueryParameters = qs.parse(currentDecodedSearch);\n  const matching = isEqual(toLocation.pathname, currentLocation.pathname) && isMatch(currentQueryParameters, toQueryParameters);\n  return matching;\n}\n\nconst useStyles$j = makeStyles((theme) => ({\n  item: {\n    height: 48,\n    width: \"100%\",\n    \"&:hover\": {\n      background: \"#6f6f6f\",\n      color: theme.palette.navigation.selectedColor\n    },\n    display: \"flex\",\n    alignItems: \"center\",\n    color: theme.palette.navigation.color,\n    padding: 20,\n    cursor: \"pointer\",\n    position: \"relative\",\n    background: \"none\",\n    border: \"none\"\n  },\n  itemContainer: {\n    width: \"100%\"\n  },\n  selected: {\n    background: \"#6f6f6f\",\n    color: \"#FFF\"\n  },\n  label: {\n    margin: 14,\n    marginLeft: 7,\n    fontSize: 14\n  },\n  dropdownArrow: {\n    position: \"absolute\",\n    right: 21\n  },\n  dropdown: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"end\"\n  },\n  dropdownItem: {\n    width: \"100%\",\n    padding: \"10px 0 10px 0\"\n  },\n  textContent: {\n    color: theme.palette.navigation.color,\n    display: \"flex\",\n    justifyContent: \"center\",\n    [theme.breakpoints.down(\"xs\")]: {\n      display: \"block\",\n      paddingLeft: theme.spacing(4)\n    },\n    fontSize: \"14px\"\n  }\n}), { name: \"BackstageSidebarSubmenuItem\" });\nconst SidebarSubmenuItem = (props) => {\n  const { title, to, icon: Icon, dropdownItems } = props;\n  const classes = useStyles$j();\n  const { setIsHoveredOn } = useContext(SidebarItemWithSubmenuContext);\n  const closeSubmenu = () => {\n    setIsHoveredOn(false);\n  };\n  const toLocation = useResolvedPath(to);\n  const currentLocation = useLocation();\n  let isActive = isLocationMatch(currentLocation, toLocation);\n  const [showDropDown, setShowDropDown] = useState(false);\n  const handleClickDropdown = () => {\n    setShowDropDown(!showDropDown);\n  };\n  if (dropdownItems !== void 0) {\n    dropdownItems.some((item) => {\n      const resolvedPath = resolvePath(item.to);\n      isActive = isLocationMatch(currentLocation, resolvedPath);\n      return isActive;\n    });\n    return /* @__PURE__ */ React.createElement(\"div\", {\n      className: classes.itemContainer\n    }, /* @__PURE__ */ React.createElement(\"button\", {\n      onClick: handleClickDropdown,\n      onTouchStart: (e) => e.stopPropagation(),\n      className: classNames(classes.item, isActive ? classes.selected : void 0)\n    }, /* @__PURE__ */ React.createElement(Icon, {\n      fontSize: \"small\"\n    }), /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"subtitle1\",\n      className: classes.label\n    }, title), showDropDown ? /* @__PURE__ */ React.createElement(ArrowDropUpIcon, {\n      className: classes.dropdownArrow\n    }) : /* @__PURE__ */ React.createElement(ArrowDropDownIcon, {\n      className: classes.dropdownArrow\n    })), dropdownItems && showDropDown && /* @__PURE__ */ React.createElement(\"div\", {\n      className: classes.dropdown\n    }, dropdownItems.map((object, key) => /* @__PURE__ */ React.createElement(Link, {\n      to: object.to,\n      underline: \"none\",\n      className: classes.dropdownItem,\n      onClick: closeSubmenu,\n      onTouchStart: (e) => e.stopPropagation(),\n      key\n    }, /* @__PURE__ */ React.createElement(Typography, {\n      className: classes.textContent\n    }, object.title)))));\n  }\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.itemContainer\n  }, /* @__PURE__ */ React.createElement(Link, {\n    to,\n    underline: \"none\",\n    className: classNames(classes.item, isActive ? classes.selected : void 0),\n    onClick: closeSubmenu,\n    onTouchStart: (e) => e.stopPropagation()\n  }, /* @__PURE__ */ React.createElement(Icon, {\n    fontSize: \"small\"\n  }), /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"subtitle1\",\n    className: classes.label\n  }, title)));\n};\n\nconst useStyles$i = makeStyles((theme) => ({\n  root: {\n    zIndex: 1e3,\n    position: \"relative\",\n    overflow: \"visible\",\n    width: theme.spacing(7) + 1\n  },\n  drawer: (props) => {\n    var _a, _b;\n    return {\n      display: \"flex\",\n      flexFlow: \"column nowrap\",\n      alignItems: \"flex-start\",\n      position: \"fixed\",\n      [theme.breakpoints.up(\"sm\")]: {\n        marginLeft: props.left,\n        transition: theme.transitions.create(\"margin-left\", {\n          easing: theme.transitions.easing.sharp,\n          duration: theme.transitions.duration.shortest\n        })\n      },\n      top: 0,\n      bottom: 0,\n      padding: 0,\n      background: (_b = (_a = theme.palette.navigation.submenu) == null ? void 0 : _a.background) != null ? _b : \"#404040\",\n      overflowX: \"hidden\",\n      msOverflowStyle: \"none\",\n      scrollbarWidth: \"none\",\n      cursor: \"default\",\n      width: props.submenuConfig.drawerWidthClosed,\n      transitionDelay: `${props.submenuConfig.defaultOpenDelayMs}ms`,\n      \"& > *\": {\n        flexShrink: 0\n      },\n      \"&::-webkit-scrollbar\": {\n        display: \"none\"\n      }\n    };\n  },\n  drawerOpen: (props) => ({\n    width: props.submenuConfig.drawerWidthOpen,\n    [theme.breakpoints.down(\"xs\")]: {\n      width: \"100%\",\n      position: \"relative\",\n      paddingLeft: theme.spacing(3),\n      left: 0,\n      top: 0\n    }\n  }),\n  title: {\n    fontSize: 24,\n    fontWeight: 500,\n    color: \"#FFF\",\n    padding: 20,\n    [theme.breakpoints.down(\"xs\")]: {\n      display: \"none\"\n    }\n  }\n}), { name: \"BackstageSidebarSubmenu\" });\nconst SidebarSubmenu = (props) => {\n  const { isOpen } = useContext(SidebarContext);\n  const { sidebarConfig, submenuConfig } = useContext(SidebarConfigContext);\n  const left = isOpen ? sidebarConfig.drawerWidthOpen : sidebarConfig.drawerWidthClosed;\n  const classes = useStyles$i({ left, submenuConfig });\n  const { isHoveredOn } = useContext(SidebarItemWithSubmenuContext);\n  const [isSubmenuOpen, setIsSubmenuOpen] = useState(false);\n  useEffect(() => {\n    setIsSubmenuOpen(isHoveredOn);\n  }, [isHoveredOn]);\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: classNames(classes.drawer, {\n      [classes.drawerOpen]: isSubmenuOpen\n    })\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"h5\",\n    className: classes.title\n  }, props.title), props.children);\n};\n\nconst useStyles$h = makeStyles({\n  iconContainer: {\n    display: \"flex\",\n    position: \"relative\",\n    width: \"100%\"\n  },\n  arrow1: {\n    right: \"6px\",\n    position: \"absolute\"\n  }\n});\nconst DoubleArrowLeft = () => {\n  const classes = useStyles$h();\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.iconContainer\n  }, /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.arrow1\n  }, /* @__PURE__ */ React.createElement(ArrowBackIosIcon, {\n    style: { fontSize: \"12px\" }\n  })), /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(ArrowBackIosIcon, {\n    style: { fontSize: \"12px\" }\n  })));\n};\n\nconst useStyles$g = makeStyles({\n  iconContainer: {\n    display: \"flex\",\n    position: \"relative\",\n    width: \"100%\"\n  },\n  arrow1: {\n    right: \"6px\",\n    position: \"absolute\"\n  }\n});\nconst DoubleArrowRight = () => {\n  const classes = useStyles$g();\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.iconContainer\n  }, /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.arrow1\n  }, /* @__PURE__ */ React.createElement(ArrowForwardIosIcon, {\n    style: { fontSize: \"12px\" }\n  })), /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(ArrowForwardIosIcon, {\n    style: { fontSize: \"12px\" }\n  })));\n};\n\nconst makeSidebarStyles = (sidebarConfig) => makeStyles((theme) => {\n  var _a, _b, _c, _d;\n  return {\n    root: {\n      color: theme.palette.navigation.color,\n      display: \"flex\",\n      flexFlow: \"row nowrap\",\n      alignItems: \"center\",\n      height: 48,\n      cursor: \"pointer\"\n    },\n    buttonItem: {\n      background: \"none\",\n      border: \"none\",\n      width: \"100%\",\n      margin: 0,\n      padding: 0,\n      textAlign: \"inherit\",\n      font: \"inherit\"\n    },\n    closed: {\n      width: sidebarConfig.drawerWidthClosed,\n      justifyContent: \"center\"\n    },\n    open: {\n      [theme.breakpoints.up(\"sm\")]: {\n        width: sidebarConfig.drawerWidthOpen\n      }\n    },\n    highlightable: {\n      \"&:hover\": {\n        background: (_b = (_a = theme.palette.navigation.navItem) == null ? void 0 : _a.hoverBackground) != null ? _b : \"#404040\"\n      }\n    },\n    highlighted: {\n      background: (_d = (_c = theme.palette.navigation.navItem) == null ? void 0 : _c.hoverBackground) != null ? _d : \"#404040\"\n    },\n    label: {\n      fontWeight: \"bold\",\n      whiteSpace: \"nowrap\",\n      lineHeight: \"auto\",\n      flex: \"3 1 auto\",\n      width: \"110px\",\n      overflow: \"hidden\",\n      \"text-overflow\": \"ellipsis\"\n    },\n    iconContainer: {\n      boxSizing: \"border-box\",\n      height: \"100%\",\n      width: sidebarConfig.iconContainerWidth,\n      marginRight: -theme.spacing(2),\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\"\n    },\n    searchRoot: {\n      marginBottom: 12\n    },\n    searchField: {\n      color: \"#b5b5b5\",\n      fontWeight: \"bold\",\n      fontSize: theme.typography.fontSize\n    },\n    searchFieldHTMLInput: {\n      padding: theme.spacing(2, 0, 2)\n    },\n    searchContainer: {\n      width: sidebarConfig.drawerWidthOpen - sidebarConfig.iconContainerWidth\n    },\n    secondaryAction: {\n      width: theme.spacing(6),\n      textAlign: \"center\",\n      marginRight: theme.spacing(1)\n    },\n    closedItemIcon: {\n      width: \"100%\",\n      justifyContent: \"center\"\n    },\n    submenuArrow: {\n      display: \"flex\"\n    },\n    expandButton: {\n      background: \"none\",\n      border: \"none\",\n      color: theme.palette.navigation.color,\n      width: \"100%\",\n      cursor: \"pointer\",\n      position: \"relative\",\n      height: 48\n    },\n    arrows: {\n      position: \"absolute\",\n      right: 10\n    },\n    selected: {\n      \"&$root\": {\n        borderLeft: `solid ${sidebarConfig.selectedIndicatorWidth}px ${theme.palette.navigation.indicator}`,\n        color: theme.palette.navigation.selectedColor\n      },\n      \"&$closed\": {\n        width: sidebarConfig.drawerWidthClosed\n      },\n      \"& $closedItemIcon\": {\n        paddingRight: sidebarConfig.selectedIndicatorWidth\n      },\n      \"& $iconContainer\": {\n        marginLeft: -sidebarConfig.selectedIndicatorWidth\n      }\n    }\n  };\n}, { name: \"BackstageSidebarItem\" });\nfunction useMemoStyles(sidebarConfig) {\n  const useStyles = useMemo(() => makeSidebarStyles(sidebarConfig), [sidebarConfig]);\n  return useStyles();\n}\nconst useLocationMatch = (submenu, location) => useElementFilter(submenu.props.children, (elements) => {\n  let active = false;\n  elements.getElements().forEach(({\n    props: { to, dropdownItems }\n  }) => {\n    if (!active) {\n      if (dropdownItems == null ? void 0 : dropdownItems.length) {\n        dropdownItems.forEach(({ to: _to }) => active = active || isLocationMatch(location, resolvePath(_to)));\n        return;\n      }\n      if (to) {\n        active = isLocationMatch(location, resolvePath(to));\n      }\n    }\n  });\n  return active;\n}, [location.pathname]);\nfunction isButtonItem(props) {\n  return props.to === void 0;\n}\nconst sidebarSubmenuType = React.createElement(SidebarSubmenu).type;\nconst WorkaroundNavLink = React.forwardRef(function WorkaroundNavLinkWithRef({\n  to,\n  end,\n  style,\n  className,\n  activeStyle,\n  caseSensitive,\n  activeClassName = \"active\",\n  \"aria-current\": ariaCurrentProp = \"page\",\n  ...rest\n}, ref) {\n  let { pathname: locationPathname } = useLocation();\n  let { pathname: toPathname } = useResolvedPath(to);\n  if (!caseSensitive) {\n    locationPathname = locationPathname.toLocaleLowerCase(\"en-US\");\n    toPathname = toPathname.toLocaleLowerCase(\"en-US\");\n  }\n  let isActive = locationPathname === toPathname;\n  if (!isActive && !end) {\n    isActive = locationPathname.startsWith(`${toPathname}/`);\n  }\n  const ariaCurrent = isActive ? ariaCurrentProp : void 0;\n  return /* @__PURE__ */ React.createElement(Link$2, {\n    ...rest,\n    to,\n    ref,\n    \"aria-current\": ariaCurrent,\n    style: { ...style, ...isActive ? activeStyle : void 0 },\n    className: classNames([\n      className,\n      isActive ? activeClassName : void 0\n    ])\n  });\n});\nconst SidebarItemBase = forwardRef((props, ref) => {\n  const {\n    icon: Icon,\n    text,\n    hasNotifications = false,\n    disableHighlight = false,\n    onClick,\n    children,\n    className,\n    ...navLinkProps\n  } = props;\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useMemoStyles(sidebarConfig);\n  const { isOpen } = useContext(SidebarContext);\n  const itemIcon = /* @__PURE__ */ React.createElement(Badge, {\n    color: \"secondary\",\n    variant: \"dot\",\n    overlap: \"circular\",\n    invisible: !hasNotifications,\n    className: classNames({ [classes.closedItemIcon]: !isOpen })\n  }, /* @__PURE__ */ React.createElement(Icon, {\n    fontSize: \"small\"\n  }));\n  const openContent = /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\"div\", {\n    \"data-testid\": \"login-button\",\n    className: classes.iconContainer\n  }, itemIcon), text && /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"subtitle2\",\n    className: classes.label\n  }, text), /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.secondaryAction\n  }, children));\n  const content = isOpen ? openContent : itemIcon;\n  const childProps = {\n    onClick,\n    className: classNames(className, classes.root, isOpen ? classes.open : classes.closed, isButtonItem(props) && classes.buttonItem, { [classes.highlightable]: !disableHighlight })\n  };\n  if (isButtonItem(props)) {\n    return /* @__PURE__ */ React.createElement(\"button\", {\n      \"aria-label\": text,\n      ...childProps,\n      ref\n    }, content);\n  }\n  return /* @__PURE__ */ React.createElement(WorkaroundNavLink, {\n    ...childProps,\n    activeClassName: classes.selected,\n    to: props.to ? props.to : \"\",\n    ref,\n    \"aria-label\": text ? text : props.to,\n    ...navLinkProps\n  }, content);\n});\nconst SidebarItemWithSubmenu = ({\n  children,\n  ...props\n}) => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useMemoStyles(sidebarConfig);\n  const [isHoveredOn, setIsHoveredOn] = useState(false);\n  const location = useLocation();\n  const isActive = useLocationMatch(children, location);\n  const isSmallScreen = useMediaQuery((theme) => theme.breakpoints.down(\"sm\"));\n  const handleMouseEnter = () => {\n    setIsHoveredOn(true);\n  };\n  const handleMouseLeave = () => {\n    setIsHoveredOn(false);\n  };\n  const arrowIcon = () => {\n    if (isSmallScreen) {\n      return isHoveredOn ? /* @__PURE__ */ React.createElement(ArrowDropUpIcon, {\n        fontSize: \"small\",\n        className: classes.submenuArrow\n      }) : /* @__PURE__ */ React.createElement(ArrowDropDownIcon, {\n        fontSize: \"small\",\n        className: classes.submenuArrow\n      });\n    }\n    return !isHoveredOn && /* @__PURE__ */ React.createElement(ArrowRightIcon, {\n      fontSize: \"small\",\n      className: classes.submenuArrow\n    });\n  };\n  return /* @__PURE__ */ React.createElement(SidebarItemWithSubmenuContext.Provider, {\n    value: {\n      isHoveredOn,\n      setIsHoveredOn\n    }\n  }, /* @__PURE__ */ React.createElement(\"div\", {\n    \"data-testid\": \"item-with-submenu\",\n    onMouseLeave: handleMouseLeave,\n    onTouchStart: isHoveredOn ? handleMouseLeave : handleMouseEnter,\n    onMouseEnter: handleMouseEnter,\n    className: classNames(isHoveredOn && classes.highlighted)\n  }, /* @__PURE__ */ React.createElement(SidebarItemBase, {\n    className: isActive ? classes.selected : \"\",\n    ...props\n  }, arrowIcon()), isHoveredOn && children));\n};\nconst SidebarItem = forwardRef((props, ref) => {\n  const [submenu] = useElementFilter(props.children, (elements) => elements.getElements().filter((child) => child.type === sidebarSubmenuType));\n  if (submenu) {\n    return /* @__PURE__ */ React.createElement(SidebarItemWithSubmenu, {\n      ...props\n    }, submenu);\n  }\n  return /* @__PURE__ */ React.createElement(SidebarItemBase, {\n    ...props,\n    ref\n  });\n});\nfunction SidebarSearchField(props) {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const [input, setInput] = useState(\"\");\n  const classes = useMemoStyles(sidebarConfig);\n  const Icon = props.icon ? props.icon : SearchIcon;\n  const search = () => {\n    props.onSearch(input);\n    setInput(\"\");\n  };\n  const handleEnter = (ev) => {\n    if (ev.key === \"Enter\") {\n      ev.preventDefault();\n      search();\n    }\n  };\n  const handleInput = (ev) => {\n    setInput(ev.target.value);\n  };\n  const handleInputClick = (ev) => {\n    ev.preventDefault();\n    ev.stopPropagation();\n  };\n  const handleItemClick = (ev) => {\n    search();\n    ev.preventDefault();\n  };\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.searchRoot\n  }, /* @__PURE__ */ React.createElement(SidebarItem, {\n    icon: Icon,\n    to: props.to,\n    onClick: handleItemClick,\n    disableHighlight: true\n  }, /* @__PURE__ */ React.createElement(TextField, {\n    placeholder: \"Search\",\n    value: input,\n    onClick: handleInputClick,\n    onChange: handleInput,\n    onKeyDown: handleEnter,\n    className: classes.searchContainer,\n    InputProps: {\n      disableUnderline: true,\n      className: classes.searchField\n    },\n    inputProps: {\n      className: classes.searchFieldHTMLInput\n    }\n  })));\n}\nconst SidebarSpace = styled(\"div\")({\n  flex: 1\n}, { name: \"BackstageSidebarSpace\" });\nconst SidebarSpacer = styled(\"div\")({\n  height: 8\n}, { name: \"BackstageSidebarSpacer\" });\nconst SidebarDivider = styled(\"hr\")({\n  height: 1,\n  width: \"100%\",\n  background: \"#383838\",\n  border: \"none\",\n  margin: \"12px 0px\"\n}, { name: \"BackstageSidebarDivider\" });\nconst styledScrollbar = (theme) => ({\n  overflowY: \"auto\",\n  \"&::-webkit-scrollbar\": {\n    backgroundColor: theme.palette.background.default,\n    width: \"5px\",\n    borderRadius: \"5px\"\n  },\n  \"&::-webkit-scrollbar-thumb\": {\n    backgroundColor: theme.palette.text.hint,\n    borderRadius: \"5px\"\n  }\n});\nconst SidebarScrollWrapper = styled(\"div\")(({ theme }) => {\n  const scrollbarStyles = styledScrollbar(theme);\n  return {\n    flex: \"0 1 auto\",\n    overflowX: \"hidden\",\n    width: \"calc(100% - 5px)\",\n    minHeight: \"48px\",\n    overflowY: \"hidden\",\n    \"@media (hover: none)\": scrollbarStyles,\n    \"&:hover\": scrollbarStyles\n  };\n});\nconst SidebarExpandButton = () => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useMemoStyles(sidebarConfig);\n  const { isOpen, setOpen } = useContext(SidebarContext);\n  const isSmallScreen = useMediaQuery((theme) => theme.breakpoints.down(\"md\"), { noSsr: true });\n  if (isSmallScreen) {\n    return null;\n  }\n  const handleClick = () => {\n    setOpen(!isOpen);\n  };\n  return /* @__PURE__ */ React.createElement(\"button\", {\n    onClick: handleClick,\n    className: classes.expandButton,\n    \"aria-label\": \"Expand Sidebar\",\n    \"data-testid\": \"sidebar-expand-button\"\n  }, /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.arrows\n  }, isOpen ? /* @__PURE__ */ React.createElement(DoubleArrowLeft, null) : /* @__PURE__ */ React.createElement(DoubleArrowRight, null)));\n};\n\nconst useStyles$f = makeStyles((theme) => ({\n  introCard: (props) => ({\n    color: \"#b5b5b5\",\n    fontSize: 12,\n    width: props.sidebarConfig.drawerWidthOpen,\n    marginTop: 18,\n    marginBottom: 12,\n    paddingLeft: props.sidebarConfig.iconPadding,\n    paddingRight: props.sidebarConfig.iconPadding\n  }),\n  introDismiss: {\n    display: \"flex\",\n    justifyContent: \"flex-end\",\n    alignItems: \"center\",\n    marginTop: 12\n  },\n  introDismissLink: {\n    color: \"#dddddd\",\n    display: \"flex\",\n    alignItems: \"center\",\n    marginBottom: 4,\n    \"&:hover\": {\n      color: theme.palette.linkHover,\n      transition: theme.transitions.create(\"color\", {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.shortest\n      })\n    }\n  },\n  introDismissText: {\n    fontSize: \"0.7rem\",\n    fontWeight: \"bold\",\n    textTransform: \"uppercase\",\n    letterSpacing: 1\n  },\n  introDismissIcon: {\n    width: 18,\n    height: 18,\n    marginRight: 12\n  }\n}), { name: \"BackstageSidebarIntro\" });\nfunction IntroCard(props) {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useStyles$f({ sidebarConfig });\n  const { text, onClose } = props;\n  const handleClose = () => onClose();\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.introCard\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"subtitle2\"\n  }, text), /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.introDismiss\n  }, /* @__PURE__ */ React.createElement(Link$1, {\n    component: \"button\",\n    onClick: handleClose,\n    underline: \"none\",\n    className: classes.introDismissLink\n  }, /* @__PURE__ */ React.createElement(CloseIcon, {\n    className: classes.introDismissIcon\n  }), /* @__PURE__ */ React.createElement(Typography, {\n    component: \"span\",\n    className: classes.introDismissText\n  }, \"Dismiss\"))));\n}\nconst SidebarIntroCard = (props) => {\n  const { text, onDismiss } = props;\n  const [collapsing, setCollapsing] = useState(false);\n  const startDismissing = () => {\n    setCollapsing(true);\n  };\n  return /* @__PURE__ */ React.createElement(Collapse, {\n    in: !collapsing,\n    onExited: onDismiss\n  }, /* @__PURE__ */ React.createElement(IntroCard, {\n    text,\n    onClose: startDismissing\n  }));\n};\nconst starredIntroText = `Fun fact! As you explore all the awesome plugins in Backstage, you can actually pin them to this side nav.\nKeep an eye out for the little star icon (\\u2B50) next to the plugin name and give it a click!`;\nconst recentlyViewedIntroText = \"And your recently viewed plugins will pop up here!\";\nfunction SidebarIntro(_props) {\n  const { isOpen } = useContext(SidebarContext);\n  const defaultValue = {\n    starredItemsDismissed: false,\n    recentlyViewedItemsDismissed: false\n  };\n  const [dismissedIntro, setDismissedIntro] = useLocalStorageValue(SIDEBAR_INTRO_LOCAL_STORAGE);\n  const { starredItemsDismissed, recentlyViewedItemsDismissed } = dismissedIntro != null ? dismissedIntro : {};\n  const dismissStarred = () => {\n    setDismissedIntro((state) => ({\n      ...defaultValue,\n      ...state,\n      starredItemsDismissed: true\n    }));\n  };\n  const dismissRecentlyViewed = () => {\n    setDismissedIntro((state) => ({\n      ...defaultValue,\n      ...state,\n      recentlyViewedItemsDismissed: true\n    }));\n  };\n  if (!isOpen) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, !starredItemsDismissed && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(SidebarIntroCard, {\n    text: starredIntroText,\n    onDismiss: dismissStarred\n  }), /* @__PURE__ */ React.createElement(SidebarDivider, null)), !recentlyViewedItemsDismissed && /* @__PURE__ */ React.createElement(SidebarIntroCard, {\n    text: recentlyViewedIntroText,\n    onDismiss: dismissRecentlyViewed\n  }));\n}\n\nconst useStyles$e = makeStyles((theme) => ({\n  root: {\n    gridArea: \"pageContent\",\n    minWidth: 0,\n    paddingTop: theme.spacing(3),\n    paddingBottom: theme.spacing(3),\n    paddingLeft: theme.spacing(2),\n    paddingRight: theme.spacing(2),\n    [theme.breakpoints.up(\"sm\")]: {\n      paddingLeft: theme.spacing(3),\n      paddingRight: theme.spacing(3)\n    }\n  },\n  stretch: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    flexGrow: 1\n  },\n  noPadding: {\n    padding: 0\n  }\n}), { name: \"BackstageContent\" });\nfunction Content(props) {\n  const { className, stretch, noPadding, children, ...restProps } = props;\n  const { contentRef } = useContent();\n  const classes = useStyles$e();\n  return /* @__PURE__ */ React.createElement(\"article\", {\n    ref: contentRef,\n    tabIndex: -1,\n    ...restProps,\n    className: classNames(classes.root, className, {\n      [classes.stretch]: stretch,\n      [classes.noPadding]: noPadding\n    })\n  }, children);\n}\n\nconst useStyles$d = makeStyles((theme) => ({\n  tabsWrapper: {\n    gridArea: \"pageSubheader\",\n    backgroundColor: theme.palette.background.paper,\n    paddingLeft: theme.spacing(3)\n  },\n  defaultTab: {\n    padding: theme.spacing(3, 3),\n    ...theme.typography.caption,\n    textTransform: \"uppercase\",\n    fontWeight: \"bold\",\n    color: theme.palette.text.secondary\n  },\n  selected: {\n    color: theme.palette.text.primary\n  },\n  tabRoot: {\n    \"&:hover\": {\n      backgroundColor: theme.palette.background.default,\n      color: theme.palette.text.primary\n    }\n  }\n}), { name: \"BackstageHeaderTabs\" });\nfunction HeaderTabs(props) {\n  const { tabs, onChange, selectedIndex } = props;\n  const [selectedTab, setSelectedTab] = useState(selectedIndex != null ? selectedIndex : 0);\n  const styles = useStyles$d();\n  const handleChange = (_, index) => {\n    if (selectedIndex === void 0) {\n      setSelectedTab(index);\n    }\n    if (onChange)\n      onChange(index);\n  };\n  useEffect(() => {\n    if (selectedIndex !== void 0) {\n      setSelectedTab(selectedIndex);\n    }\n  }, [selectedIndex]);\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: styles.tabsWrapper\n  }, /* @__PURE__ */ React.createElement(Tabs$1, {\n    selectionFollowsFocus: true,\n    indicatorColor: \"primary\",\n    textColor: \"inherit\",\n    variant: \"scrollable\",\n    scrollButtons: \"auto\",\n    \"aria-label\": \"scrollable auto tabs example\",\n    onChange: handleChange,\n    value: selectedTab\n  }, tabs.map((tab, index) => /* @__PURE__ */ React.createElement(Tab, {\n    ...tab.tabProps,\n    \"data-testid\": `header-tab-${index}`,\n    label: tab.label,\n    key: tab.id,\n    value: index,\n    className: styles.defaultTab,\n    classes: { selected: styles.selected, root: styles.tabRoot }\n  }))));\n}\n\nfunction useSelectedSubRoute(subRoutes) {\n  var _a, _b, _c;\n  const params = useParams();\n  const routes = subRoutes.map(({ path, children }) => ({\n    caseSensitive: false,\n    path: `${path}/*`,\n    element: children\n  }));\n  const sortedRoutes = routes.sort((a, b) => b.path.replace(/\\/\\*$/, \"\").localeCompare(a.path.replace(/\\/\\*$/, \"\")));\n  const element = (_a = useRoutes(sortedRoutes)) != null ? _a : subRoutes[0].children;\n  const [matchedRoute] = (_b = matchRoutes(sortedRoutes, `/${params[\"*\"]}`)) != null ? _b : [];\n  const foundIndex = matchedRoute ? subRoutes.findIndex((t) => `${t.path}/*` === matchedRoute.route.path) : 0;\n  return {\n    index: foundIndex === -1 ? 0 : foundIndex,\n    element,\n    route: (_c = subRoutes[foundIndex]) != null ? _c : subRoutes[0]\n  };\n}\nfunction RoutedTabs(props) {\n  const { routes } = props;\n  const navigate = useNavigate();\n  const { index, route, element } = useSelectedSubRoute(routes);\n  const headerTabs = useMemo(() => routes.map((t) => ({\n    id: t.path,\n    label: t.title,\n    tabProps: t.tabProps\n  })), [routes]);\n  const onTabChange = (tabIndex) => navigate(routes[tabIndex].path.replace(/\\/\\*$/, \"\").replace(/^\\//, \"\"));\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(HeaderTabs, {\n    tabs: headerTabs,\n    selectedIndex: index,\n    onChange: onTabChange\n  }), /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(Helmet, {\n    title: route.title\n  }), element));\n}\n\nconst Route = () => null;\nattachComponentData(Route, \"core.gatherMountPoints\", true);\nfunction createSubRoutesFromChildren(childrenProps) {\n  const routeType = (/* @__PURE__ */ React.createElement(Route, {\n    path: \"\",\n    title: \"\"\n  }, /* @__PURE__ */ React.createElement(\"div\", null))).type;\n  return Children.toArray(childrenProps).flatMap((child) => {\n    if (!isValidElement(child)) {\n      return [];\n    }\n    if (child.type === Fragment) {\n      return createSubRoutesFromChildren(child.props.children);\n    }\n    if (child.type !== routeType) {\n      throw new Error(\"Child of TabbedLayout must be an TabbedLayout.Route\");\n    }\n    const { path, title, children, tabProps } = child.props;\n    return [{ path, title, children, tabProps }];\n  });\n}\nfunction TabbedLayout(props) {\n  const routes = createSubRoutesFromChildren(props.children);\n  return /* @__PURE__ */ React.createElement(RoutedTabs, {\n    routes\n  });\n}\nTabbedLayout.Route = Route;\n\nconst useSubvalueCellStyles = makeStyles((theme) => ({\n  value: {\n    marginBottom: \"6px\"\n  },\n  subvalue: {\n    color: theme.palette.textSubtle,\n    fontWeight: \"normal\"\n  }\n}), { name: \"BackstageSubvalueCell\" });\nfunction SubvalueCell(props) {\n  const { value, subvalue } = props;\n  const classes = useSubvalueCellStyles();\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.value\n  }, value), /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.subvalue\n  }, subvalue));\n}\n\nconst useFilterStyles$1 = makeStyles((theme) => ({\n  root: {\n    height: \"100%\",\n    width: \"315px\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    marginRight: theme.spacing(3)\n  },\n  value: {\n    fontWeight: \"bold\",\n    fontSize: 18\n  },\n  header: {\n    display: \"flex\",\n    alignItems: \"center\",\n    height: \"60px\",\n    justifyContent: \"space-between\",\n    borderBottom: `1px solid ${theme.palette.grey[500]}`\n  },\n  filters: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    \"& > *\": {\n      marginTop: theme.spacing(2)\n    }\n  }\n}), { name: \"BackstageTableFilters\" });\nconst Filters = (props) => {\n  var _a;\n  const classes = useFilterStyles$1();\n  const { onChangeFilters } = props;\n  const [selectedFilters, setSelectedFilters] = useState({\n    ...props.selectedFilters\n  });\n  const [reset, triggerReset] = useState(false);\n  const handleClick = () => {\n    setSelectedFilters({});\n    triggerReset((el) => !el);\n  };\n  useEffect(() => {\n    onChangeFilters(selectedFilters);\n  }, [selectedFilters, onChangeFilters]);\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.root\n  }, /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.header\n  }, /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.value\n  }, \"Filters\"), /* @__PURE__ */ React.createElement(Button$1, {\n    color: \"primary\",\n    onClick: handleClick\n  }, \"Clear all\")), /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.filters\n  }, ((_a = props.filters) == null ? void 0 : _a.length) && props.filters.map((filter) => /* @__PURE__ */ React.createElement(SelectComponent, {\n    triggerReset: reset,\n    key: filter.element.label,\n    ...filter.element,\n    selected: selectedFilters[filter.element.label],\n    onChange: (el) => setSelectedFilters({\n      ...selectedFilters,\n      [filter.element.label]: el\n    })\n  }))));\n};\n\nconst tableIcons = {\n  Add: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(AddBox, {\n    ...props,\n    ref\n  })),\n  Check: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(Check, {\n    ...props,\n    ref\n  })),\n  Clear: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(Clear, {\n    ...props,\n    ref\n  })),\n  Delete: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(DeleteOutline, {\n    ...props,\n    ref\n  })),\n  DetailPanel: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(ChevronRight, {\n    ...props,\n    ref\n  })),\n  Edit: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(Edit, {\n    ...props,\n    ref\n  })),\n  Export: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(SaveAlt, {\n    ...props,\n    ref\n  })),\n  Filter: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(FilterList, {\n    ...props,\n    ref\n  })),\n  FirstPage: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(FirstPage, {\n    ...props,\n    ref\n  })),\n  LastPage: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(LastPage, {\n    ...props,\n    ref\n  })),\n  NextPage: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(ChevronRight, {\n    ...props,\n    ref\n  })),\n  PreviousPage: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(ChevronLeftIcon, {\n    ...props,\n    ref\n  })),\n  ResetSearch: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(Clear, {\n    ...props,\n    ref\n  })),\n  Search: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(FilterList, {\n    ...props,\n    ref\n  })),\n  SortArrow: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(ArrowUpward, {\n    ...props,\n    ref\n  })),\n  ThirdStateCheck: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(Remove, {\n    ...props,\n    ref\n  })),\n  ViewColumn: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(ViewColumn, {\n    ...props,\n    ref\n  }))\n};\nfunction extractValueByField(data, field) {\n  const path = field.split(\".\");\n  let value = data[path[0]];\n  for (let i = 1; i < path.length; ++i) {\n    if (value === void 0) {\n      return value;\n    }\n    const f = path[i];\n    value = value[f];\n  }\n  return value;\n}\nconst StyledMTableHeader = withStyles((theme) => ({\n  header: {\n    padding: theme.spacing(1, 2, 1, 2.5),\n    borderTop: `1px solid ${theme.palette.grey.A100}`,\n    borderBottom: `1px solid ${theme.palette.grey.A100}`,\n    color: theme.palette.textSubtle,\n    fontWeight: theme.typography.fontWeightBold,\n    position: \"static\",\n    wordBreak: \"normal\"\n  }\n}), { name: \"BackstageTableHeader\" })(MTableHeader);\nconst StyledMTableToolbar = withStyles((theme) => ({\n  root: {\n    padding: theme.spacing(3, 0, 2.5, 2.5)\n  },\n  title: {\n    \"& > h6\": {\n      fontWeight: \"bold\"\n    }\n  },\n  searchField: {\n    paddingRight: theme.spacing(2)\n  }\n}), { name: \"BackstageTableToolbar\" })(MTableToolbar);\nconst useFilterStyles = makeStyles(() => ({\n  root: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\"\n  },\n  title: {\n    fontWeight: \"bold\",\n    fontSize: 18,\n    whiteSpace: \"nowrap\"\n  }\n}), { name: \"BackstageTableFiltersContainer\" });\nconst useTableStyles = makeStyles(() => ({\n  root: {\n    display: \"flex\",\n    alignItems: \"start\"\n  }\n}), { name: \"BackstageTable\" });\nfunction convertColumns(columns, theme) {\n  return columns.map((column) => {\n    const headerStyle = {};\n    let cellStyle = column.cellStyle || {};\n    if (column.highlight) {\n      headerStyle.color = theme.palette.textContrast;\n      if (typeof cellStyle === \"object\") {\n        cellStyle.fontWeight = theme.typography.fontWeightBold;\n      } else {\n        const cellStyleFn = cellStyle;\n        cellStyle = (data, rowData, rowColumn) => {\n          const style = cellStyleFn(data, rowData, rowColumn);\n          return { ...style, fontWeight: theme.typography.fontWeightBold };\n        };\n      }\n    }\n    return {\n      ...column,\n      headerStyle,\n      cellStyle\n    };\n  });\n}\nfunction removeDefaultValues(state, defaultState) {\n  return transform(state, (result, value, key) => {\n    if (!isEqual(value, defaultState[key])) {\n      result[key] = value;\n    }\n  });\n}\nconst defaultInitialState = {\n  search: \"\",\n  filtersOpen: false,\n  filters: {}\n};\nfunction TableToolbar(toolbarProps) {\n  const {\n    toolbarRef,\n    setSearch,\n    hasFilters,\n    selectedFiltersLength,\n    toggleFilters\n  } = toolbarProps;\n  const filtersClasses = useFilterStyles();\n  const onSearchChanged = useCallback((searchText) => {\n    toolbarProps.onSearchChanged(searchText);\n    setSearch(searchText);\n  }, [toolbarProps, setSearch]);\n  if (hasFilters) {\n    return /* @__PURE__ */ React.createElement(\"div\", {\n      className: filtersClasses.root\n    }, /* @__PURE__ */ React.createElement(\"div\", {\n      className: filtersClasses.root\n    }, /* @__PURE__ */ React.createElement(IconButton, {\n      onClick: toggleFilters,\n      \"aria-label\": \"filter list\"\n    }, /* @__PURE__ */ React.createElement(FilterList, null)), /* @__PURE__ */ React.createElement(Typography, {\n      className: filtersClasses.title\n    }, \"Filters (\", selectedFiltersLength, \")\")), /* @__PURE__ */ React.createElement(StyledMTableToolbar, {\n      ...toolbarProps,\n      ref: toolbarRef,\n      onSearchChanged\n    }));\n  }\n  return /* @__PURE__ */ React.createElement(StyledMTableToolbar, {\n    ...toolbarProps,\n    ref: toolbarRef,\n    onSearchChanged\n  });\n}\nfunction Table(props) {\n  const {\n    data,\n    columns,\n    options,\n    title,\n    subtitle,\n    filters,\n    initialState,\n    emptyContent,\n    onStateChange,\n    ...restProps\n  } = props;\n  const tableClasses = useTableStyles();\n  const theme = useTheme();\n  const calculatedInitialState = { ...defaultInitialState, ...initialState };\n  const [filtersOpen, setFiltersOpen] = useState(calculatedInitialState.filtersOpen);\n  const toggleFilters = useCallback(() => setFiltersOpen((v) => !v), [setFiltersOpen]);\n  const [selectedFiltersLength, setSelectedFiltersLength] = useState(0);\n  const [tableData, setTableData] = useState(data);\n  const [selectedFilters, setSelectedFilters] = useState(calculatedInitialState.filters);\n  const MTColumns = convertColumns(columns, theme);\n  const [search, setSearch] = useState(calculatedInitialState.search);\n  useEffect(() => {\n    if (onStateChange) {\n      const state = removeDefaultValues({\n        search,\n        filtersOpen,\n        filters: selectedFilters\n      }, defaultInitialState);\n      onStateChange(state);\n    }\n  }, [search, filtersOpen, selectedFilters, onStateChange]);\n  const defaultOptions = {\n    headerStyle: {\n      textTransform: \"uppercase\"\n    }\n  };\n  const getFieldByTitle = useCallback((titleValue) => {\n    var _a;\n    return (_a = columns.find((el) => el.title === titleValue)) == null ? void 0 : _a.field;\n  }, [columns]);\n  useEffect(() => {\n    if (typeof data === \"function\") {\n      return;\n    }\n    if (!selectedFilters) {\n      setTableData(data);\n      return;\n    }\n    const selectedFiltersArray = Object.values(selectedFilters);\n    if (data && selectedFiltersArray.flat().length) {\n      const newData = data.filter((el) => !!Object.entries(selectedFilters).filter(([, value]) => !!value.length).every(([key, filterValue]) => {\n        const fieldValue = extractValueByField(el, getFieldByTitle(key));\n        if (Array.isArray(fieldValue) && Array.isArray(filterValue)) {\n          return fieldValue.some((v) => filterValue.includes(v));\n        } else if (Array.isArray(fieldValue)) {\n          return fieldValue.includes(filterValue);\n        } else if (Array.isArray(filterValue)) {\n          return filterValue.includes(fieldValue);\n        }\n        return fieldValue === filterValue;\n      }));\n      setTableData(newData);\n    } else {\n      setTableData(data);\n    }\n    setSelectedFiltersLength(selectedFiltersArray.flat().length);\n  }, [data, selectedFilters, getFieldByTitle]);\n  const constructFilters = (filterConfig, dataValue) => {\n    const extractDistinctValues = (field) => {\n      const distinctValues = /* @__PURE__ */ new Set();\n      const addValue = (value) => {\n        if (value !== void 0 && value !== null) {\n          distinctValues.add(value);\n        }\n      };\n      if (dataValue) {\n        dataValue.forEach((el) => {\n          const value = extractValueByField(el, getFieldByTitle(field));\n          if (Array.isArray(value)) {\n            value.forEach(addValue);\n          } else {\n            addValue(value);\n          }\n        });\n      }\n      return distinctValues;\n    };\n    const constructSelect = (filter) => {\n      return {\n        placeholder: \"All results\",\n        label: filter.column,\n        multiple: filter.type === \"multiple-select\",\n        items: [...extractDistinctValues(filter.column)].sort().map((value) => ({\n          label: value,\n          value\n        }))\n      };\n    };\n    return filterConfig.map((filter) => ({\n      type: filter.type,\n      element: constructSelect(filter)\n    }));\n  };\n  const hasFilters = !!(filters == null ? void 0 : filters.length);\n  const Toolbar = useCallback((toolbarProps) => {\n    return /* @__PURE__ */ React.createElement(TableToolbar, {\n      setSearch,\n      hasFilters,\n      selectedFiltersLength,\n      toggleFilters,\n      ...toolbarProps\n    });\n  }, [toggleFilters, hasFilters, selectedFiltersLength, setSearch]);\n  const hasNoRows = typeof data !== \"function\" && data.length === 0;\n  const columnCount = columns.length;\n  const Body = useCallback((bodyProps) => {\n    if (emptyContent && hasNoRows) {\n      return /* @__PURE__ */ React.createElement(\"tbody\", null, /* @__PURE__ */ React.createElement(\"tr\", null, /* @__PURE__ */ React.createElement(\"td\", {\n        colSpan: columnCount\n      }, emptyContent)));\n    }\n    return /* @__PURE__ */ React.createElement(MTableBody, {\n      ...bodyProps\n    });\n  }, [hasNoRows, emptyContent, columnCount]);\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: tableClasses.root\n  }, filtersOpen && data && typeof data !== \"function\" && (filters == null ? void 0 : filters.length) && /* @__PURE__ */ React.createElement(Filters, {\n    filters: constructFilters(filters, data),\n    selectedFilters,\n    onChangeFilters: setSelectedFilters\n  }), /* @__PURE__ */ React.createElement(MTable, {\n    components: {\n      Header: StyledMTableHeader,\n      Toolbar,\n      Body\n    },\n    options: { ...defaultOptions, ...options },\n    columns: MTColumns,\n    icons: tableIcons,\n    title: /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"h5\",\n      component: \"h3\"\n    }, title), subtitle && /* @__PURE__ */ React.createElement(Typography, {\n      color: \"textSecondary\",\n      variant: \"body1\"\n    }, subtitle)),\n    data: typeof data === \"function\" ? data : tableData,\n    style: { width: \"100%\" },\n    localization: { toolbar: { searchPlaceholder: \"Filter\" } },\n    ...restProps\n  }));\n}\n\nfunction chunkArray(array, chunkSize) {\n  if (chunkSize <= 0) {\n    return [array];\n  }\n  const result = [];\n  for (let i = 0; i < array.length; i += chunkSize) {\n    result.push(array.slice(i, i + chunkSize));\n  }\n  return result;\n}\n\nconst TabPanel = (props) => {\n  const { children, value, index, ...other } = props;\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    role: \"tabpanel\",\n    hidden: value !== index,\n    \"aria-labelledby\": `scrollable-auto-tab-${index}`,\n    ...other\n  }, value === index && /* @__PURE__ */ React.createElement(Box, {\n    p: 3\n  }, children));\n};\n\nconst useStyles$c = makeStyles(() => ({\n  root: {\n    color: \"#6E6E6E\",\n    overflow: \"visible\",\n    fontSize: \"1.5rem\",\n    textAlign: \"center\",\n    borderRadius: \"50%\",\n    backgroundColor: \"#E6E6E6\",\n    marginLeft: (props) => props.isNext ? \"auto\" : \"0\",\n    marginRight: (props) => props.isNext ? \"0\" : \"10px\",\n    \"&:hover\": {\n      backgroundColor: \"#E6E6E6\",\n      opacity: \"1\"\n    }\n  }\n}), { name: \"BackstageTabIcon\" });\nconst StyledIcon = (props) => {\n  const classes = useStyles$c(props);\n  const { ariaLabel, onClick } = props;\n  return /* @__PURE__ */ React.createElement(IconButton, {\n    onClick,\n    className: classes.root,\n    size: \"small\",\n    disableRipple: true,\n    disableFocusRipple: true,\n    \"aria-label\": ariaLabel\n  }, props.children);\n};\n\nconst tabMarginLeft = (isFirstNav, isFirstIndex) => {\n  if (isFirstIndex) {\n    if (isFirstNav) {\n      return \"20px\";\n    }\n    return \"0\";\n  }\n  return \"40px\";\n};\nconst useStyles$b = makeStyles((theme) => ({\n  root: {\n    textTransform: \"none\",\n    height: \"64px\",\n    fontWeight: theme.typography.fontWeightBold,\n    fontSize: theme.typography.pxToRem(13),\n    color: theme.palette.textSubtle,\n    marginLeft: (props) => tabMarginLeft(props.isFirstNav, props.isFirstIndex),\n    width: \"130px\",\n    minWidth: \"130px\",\n    \"&:hover\": {\n      outline: \"none\",\n      backgroundColor: \"transparent\",\n      color: theme.palette.textSubtle\n    }\n  }\n}), { name: \"BackstageTab\" });\nconst StyledTab = (props) => {\n  const classes = useStyles$b(props);\n  const { isFirstNav, isFirstIndex, ...rest } = props;\n  return /* @__PURE__ */ React.createElement(Tab, {\n    classes,\n    disableRipple: true,\n    ...rest\n  });\n};\n\nconst useStyles$a = makeStyles((theme) => ({\n  indicator: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    backgroundColor: theme.palette.tabbar.indicator,\n    height: \"4px\"\n  },\n  flexContainer: {\n    alignItems: \"center\"\n  },\n  root: {\n    \"&:last-child\": {\n      marginLeft: \"auto\"\n    }\n  }\n}), { name: \"BackstageTabBar\" });\nconst StyledTabs = (props) => {\n  const classes = useStyles$a(props);\n  return /* @__PURE__ */ React.createElement(Tabs$1, {\n    classes,\n    ...props,\n    TabIndicatorProps: { children: /* @__PURE__ */ React.createElement(\"span\", null) }\n  });\n};\n\nconst useStyles$9 = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n    width: \"100%\"\n  },\n  styledTabs: {\n    backgroundColor: theme.palette.background.paper\n  },\n  appbar: {\n    boxShadow: \"none\",\n    backgroundColor: theme.palette.background.paper,\n    paddingLeft: \"10px\",\n    paddingRight: \"10px\"\n  }\n}), { name: \"BackstageTabs\" });\nfunction Tabs(props) {\n  const { tabs } = props;\n  const classes = useStyles$9();\n  const [value, setValue] = useState([0, 0]);\n  const [navIndex, setNavIndex] = useState(0);\n  const [numberOfChunkedElement, setNumberOfChunkedElement] = useState(0);\n  const [chunkedTabs, setChunkedTabs] = useState([[]]);\n  const wrapper = useRef();\n  const { width } = useWindowSize();\n  const handleChange = (_, newValue) => {\n    setValue([navIndex, newValue]);\n  };\n  const navigateToPrevChunk = () => {\n    setNavIndex(navIndex - 1);\n  };\n  const navigateToNextChunk = () => {\n    setNavIndex(navIndex + 1);\n  };\n  const hasNextNavIndex = () => navIndex + 1 < chunkedTabs.length;\n  useEffect(() => {\n    const padding = 20;\n    const numberOfTabIcons = navIndex === 0 ? 1 : 2;\n    const wrapperWidth = wrapper.current.offsetWidth - padding - numberOfTabIcons * 30;\n    const flattenIndex = value[0] * numberOfChunkedElement + value[1];\n    const newChunkedElementSize = Math.floor(wrapperWidth / 170);\n    setNumberOfChunkedElement(newChunkedElementSize);\n    setChunkedTabs(chunkArray(tabs, newChunkedElementSize));\n    setValue([\n      Math.floor(flattenIndex / newChunkedElementSize),\n      flattenIndex % newChunkedElementSize\n    ]);\n  }, [width, tabs]);\n  const currentIndex = navIndex === value[0] ? value[1] : false;\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.root\n  }, /* @__PURE__ */ React.createElement(AppBar, {\n    ref: wrapper,\n    className: classes.appbar,\n    position: \"static\"\n  }, /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(StyledTabs, {\n    value: currentIndex,\n    onChange: handleChange,\n    selectionFollowsFocus: true\n  }, navIndex !== 0 && /* @__PURE__ */ React.createElement(StyledIcon, {\n    onClick: navigateToPrevChunk,\n    ariaLabel: \"navigate-before\"\n  }, /* @__PURE__ */ React.createElement(NavigateBeforeIcon, null)), chunkedTabs[navIndex].map((tab, index) => /* @__PURE__ */ React.createElement(StyledTab, {\n    value: index,\n    isFirstIndex: index === 0,\n    isFirstNav: navIndex === 0,\n    key: index,\n    icon: tab.icon || void 0,\n    label: tab.label || void 0\n  })), hasNextNavIndex() && /* @__PURE__ */ React.createElement(StyledIcon, {\n    isNext: true,\n    onClick: navigateToNextChunk,\n    ariaLabel: \"navigate-next\"\n  }, /* @__PURE__ */ React.createElement(NavigateNextIcon, null))))), currentIndex !== false ? chunkedTabs[navIndex].map((tab, index) => /* @__PURE__ */ React.createElement(TabPanel, {\n    key: index,\n    value: index,\n    index: currentIndex\n  }, tab.content)) : /* @__PURE__ */ React.createElement(TabPanel, {\n    key: \"panel_outside_chunked_array\",\n    value: value[1],\n    index: value[1]\n  }, chunkedTabs[value[0]][value[1]].content));\n}\n\nfunction color(data, theme) {\n  const lastNum = data[data.length - 1];\n  if (!lastNum)\n    return void 0;\n  if (lastNum >= 0.9)\n    return theme.palette.status.ok;\n  if (lastNum >= 0.5)\n    return theme.palette.status.warning;\n  return theme.palette.status.error;\n}\nfunction TrendLine(props) {\n  var _a;\n  const theme = useTheme();\n  if (!props.data)\n    return null;\n  return /* @__PURE__ */ React.createElement(Sparklines, {\n    width: 120,\n    height: 30,\n    min: 0,\n    max: 1,\n    ...props\n  }, props.title && /* @__PURE__ */ React.createElement(\"title\", null, props.title), /* @__PURE__ */ React.createElement(SparklinesLine, {\n    color: (_a = props.color) != null ? _a : color(props.data, theme)\n  }));\n}\n\nconst useStyles$8 = (props) => makeStyles((theme) => ({\n  container: {\n    width: \"100%\",\n    display: \"flex\",\n    flexDirection: \"row\",\n    flexWrap: \"wrap\",\n    justifyContent: \"flex-end\",\n    alignItems: \"center\",\n    marginBottom: theme.spacing(2),\n    textAlign: props.textAlign\n  },\n  leftItemsBox: {\n    flex: \"1 1 auto\",\n    minWidth: 0,\n    overflow: \"visible\"\n  },\n  rightItemsBox: {\n    flex: \"0 1 auto\",\n    display: \"flex\",\n    flexDirection: \"row\",\n    flexWrap: \"wrap\",\n    alignItems: \"center\",\n    marginLeft: theme.spacing(1),\n    minWidth: 0,\n    overflow: \"visible\"\n  },\n  description: {},\n  title: {\n    display: \"inline-flex\",\n    marginBottom: 0\n  }\n}), { name: \"BackstageContentHeader\" });\nconst ContentHeaderTitle = ({\n  title = \"Unknown page\",\n  className\n}) => /* @__PURE__ */ React.createElement(Typography, {\n  variant: \"h4\",\n  component: \"h2\",\n  className,\n  \"data-testid\": \"header-title\"\n}, title);\nfunction ContentHeader(props) {\n  const {\n    description,\n    title,\n    titleComponent: TitleComponent = void 0,\n    children,\n    textAlign = \"left\"\n  } = props;\n  const classes = useStyles$8({ textAlign })();\n  const renderedTitle = TitleComponent ? TitleComponent : /* @__PURE__ */ React.createElement(ContentHeaderTitle, {\n    title,\n    className: classes.title\n  });\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Helmet, {\n    title\n  }), /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.container\n  }, /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.leftItemsBox\n  }, renderedTitle, description && /* @__PURE__ */ React.createElement(Typography, {\n    className: classes.description,\n    variant: \"body2\"\n  }, description)), /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.rightItemsBox\n  }, children)));\n}\n\nconst useStyles$7 = makeStyles((theme) => ({\n  micDrop: {\n    maxWidth: \"60%\",\n    position: \"absolute\",\n    bottom: theme.spacing(2),\n    right: theme.spacing(2),\n    [theme.breakpoints.down(\"xs\")]: {\n      maxWidth: \"96%\",\n      position: \"relative\",\n      bottom: \"unset\",\n      right: \"unset\",\n      margin: `${theme.spacing(10)}px auto ${theme.spacing(4)}px`\n    }\n  }\n}), { name: \"BackstageErrorPageMicDrop\" });\nconst MicDrop = () => {\n  const classes = useStyles$7();\n  return /* @__PURE__ */ React.createElement(\"img\", {\n    src: MicDropSvgUrl,\n    className: classes.micDrop,\n    alt: \"Girl dropping mic from her hands\"\n  });\n};\n\nconst useStyles$6 = makeStyles((theme) => ({\n  container: {\n    padding: theme.spacing(8),\n    [theme.breakpoints.down(\"xs\")]: {\n      padding: theme.spacing(2)\n    }\n  },\n  title: {\n    paddingBottom: theme.spacing(5),\n    [theme.breakpoints.down(\"xs\")]: {\n      paddingBottom: theme.spacing(4),\n      fontSize: 32\n    }\n  },\n  subtitle: {\n    color: theme.palette.textSubtle\n  }\n}), { name: \"BackstageErrorPage\" });\nfunction ErrorPage(props) {\n  const { status, statusMessage, additionalInfo, supportUrl } = props;\n  const classes = useStyles$6();\n  const navigate = useNavigate();\n  const support = useSupportConfig();\n  return /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    spacing: 0,\n    className: classes.container\n  }, /* @__PURE__ */ React.createElement(MicDrop, null), /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 8,\n    md: 4\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    \"data-testid\": \"error\",\n    variant: \"body1\",\n    className: classes.subtitle\n  }, \"ERROR \", status, \": \", statusMessage), /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"body1\",\n    className: classes.subtitle\n  }, additionalInfo), /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"h2\",\n    className: classes.title\n  }, \"Looks like someone dropped the mic!\"), /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"h6\"\n  }, /* @__PURE__ */ React.createElement(Link, {\n    to: \"#\",\n    \"data-testid\": \"go-back-link\",\n    onClick: () => navigate(-1)\n  }, \"Go back\"), \"... or please\", \" \", /* @__PURE__ */ React.createElement(Link, {\n    to: supportUrl || support.url\n  }, \"contact support\"), \" if you think this is a bug.\")));\n}\n\nconst ClickableText = withStyles({\n  root: {\n    textDecoration: \"underline\",\n    cursor: \"pointer\"\n  }\n}, { name: \"BackstageBreadcrumbsClickableText\" })(Typography);\nconst StyledBox = withStyles({\n  root: {\n    textDecoration: \"underline\",\n    color: \"inherit\"\n  }\n}, { name: \"BackstageBreadcrumbsStyledBox\" })(Box);\nfunction Breadcrumbs(props) {\n  const { children, ...restProps } = props;\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const childrenArray = React.Children.toArray(children);\n  const [firstPage, secondPage, ...expandablePages] = childrenArray;\n  const currentPage = expandablePages.length ? expandablePages.pop() : childrenArray[childrenArray.length - 1];\n  const hasHiddenBreadcrumbs = childrenArray.length > 3;\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n  const open = Boolean(anchorEl);\n  return /* @__PURE__ */ React.createElement(Fragment, null, /* @__PURE__ */ React.createElement(MaterialBreadcrumbs, {\n    \"aria-label\": \"breadcrumb\",\n    ...restProps\n  }, childrenArray.length > 1 && /* @__PURE__ */ React.createElement(StyledBox, {\n    clone: true\n  }, firstPage), childrenArray.length > 2 && /* @__PURE__ */ React.createElement(StyledBox, {\n    clone: true\n  }, secondPage), hasHiddenBreadcrumbs && /* @__PURE__ */ React.createElement(ClickableText, {\n    onClick: handleClick\n  }, \"...\"), /* @__PURE__ */ React.createElement(Box, {\n    style: { fontStyle: \"italic\" }\n  }, currentPage)), /* @__PURE__ */ React.createElement(Popover, {\n    open,\n    anchorEl,\n    onClose: handleClose,\n    anchorOrigin: {\n      vertical: \"bottom\",\n      horizontal: \"left\"\n    },\n    transformOrigin: {\n      vertical: \"top\",\n      horizontal: \"left\"\n    }\n  }, /* @__PURE__ */ React.createElement(List, null, expandablePages.map((pageLink, index) => /* @__PURE__ */ React.createElement(ListItem, {\n    key: index,\n    button: true\n  }, /* @__PURE__ */ React.createElement(StyledBox, {\n    clone: true\n  }, pageLink))))));\n}\n\nconst useStyles$5 = makeStyles((theme) => ({\n  header: {\n    gridArea: \"pageHeader\",\n    padding: theme.spacing(3),\n    width: \"100%\",\n    boxShadow: theme.shadows[4],\n    position: \"relative\",\n    zIndex: 100,\n    display: \"flex\",\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    backgroundImage: theme.page.backgroundImage,\n    backgroundPosition: \"center\",\n    backgroundSize: \"cover\",\n    [theme.breakpoints.down(\"sm\")]: {\n      flexWrap: \"wrap\"\n    }\n  },\n  leftItemsBox: {\n    maxWidth: \"100%\",\n    flexGrow: 1\n  },\n  rightItemsBox: {\n    width: \"auto\"\n  },\n  title: {\n    color: theme.palette.bursts.fontColor,\n    wordBreak: \"break-word\",\n    fontSize: theme.typography.h3.fontSize,\n    marginBottom: 0\n  },\n  subtitle: {\n    color: theme.palette.bursts.fontColor,\n    opacity: 0.8,\n    display: \"inline-block\",\n    marginTop: theme.spacing(1),\n    maxWidth: \"75ch\"\n  },\n  type: {\n    textTransform: \"uppercase\",\n    fontSize: 11,\n    opacity: 0.8,\n    marginBottom: theme.spacing(1),\n    color: theme.palette.bursts.fontColor\n  },\n  breadcrumb: {\n    color: theme.palette.bursts.fontColor\n  },\n  breadcrumbType: {\n    fontSize: \"inherit\",\n    opacity: 0.7,\n    marginRight: -theme.spacing(0.3),\n    marginBottom: theme.spacing(0.3)\n  },\n  breadcrumbTitle: {\n    fontSize: \"inherit\",\n    marginLeft: -theme.spacing(0.3),\n    marginBottom: theme.spacing(0.3)\n  }\n}), { name: \"BackstageHeader\" });\nconst TypeFragment = ({\n  type,\n  typeLink,\n  classes,\n  pageTitle\n}) => {\n  if (!type) {\n    return null;\n  }\n  if (!typeLink) {\n    return /* @__PURE__ */ React.createElement(Typography, {\n      className: classes.type\n    }, type);\n  }\n  return /* @__PURE__ */ React.createElement(Breadcrumbs, {\n    className: classes.breadcrumb\n  }, /* @__PURE__ */ React.createElement(Link, {\n    to: typeLink\n  }, type), /* @__PURE__ */ React.createElement(Typography, null, pageTitle));\n};\nconst TitleFragment = ({ pageTitle, classes, tooltip }) => {\n  const FinalTitle = /* @__PURE__ */ React.createElement(Typography, {\n    className: classes.title,\n    variant: \"h1\"\n  }, pageTitle);\n  if (!tooltip) {\n    return FinalTitle;\n  }\n  return /* @__PURE__ */ React.createElement(Tooltip, {\n    title: tooltip,\n    placement: \"top-start\"\n  }, FinalTitle);\n};\nconst SubtitleFragment = ({ classes, subtitle }) => {\n  if (!subtitle) {\n    return null;\n  }\n  if (typeof subtitle !== \"string\") {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, subtitle);\n  }\n  return /* @__PURE__ */ React.createElement(Typography, {\n    className: classes.subtitle,\n    variant: \"subtitle2\",\n    component: \"span\"\n  }, subtitle);\n};\nfunction Header(props) {\n  const {\n    children,\n    pageTitleOverride,\n    style,\n    subtitle,\n    title,\n    tooltip,\n    type,\n    typeLink\n  } = props;\n  const classes = useStyles$5();\n  const configApi = useApi(configApiRef);\n  const appTitle = configApi.getOptionalString(\"app.title\") || \"Backstage\";\n  const documentTitle = pageTitleOverride || title;\n  const pageTitle = title || pageTitleOverride;\n  const titleTemplate = `${documentTitle} | %s | ${appTitle}`;\n  const defaultTitle = `${documentTitle} | ${appTitle}`;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Helmet, {\n    titleTemplate,\n    defaultTitle\n  }), /* @__PURE__ */ React.createElement(\"header\", {\n    style,\n    className: classes.header\n  }, /* @__PURE__ */ React.createElement(Box, {\n    className: classes.leftItemsBox\n  }, /* @__PURE__ */ React.createElement(TypeFragment, {\n    classes,\n    type,\n    typeLink,\n    pageTitle\n  }), /* @__PURE__ */ React.createElement(TitleFragment, {\n    classes,\n    pageTitle,\n    tooltip\n  }), /* @__PURE__ */ React.createElement(SubtitleFragment, {\n    classes,\n    subtitle\n  })), /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    className: classes.rightItemsBox,\n    spacing: 4\n  }, children)));\n}\n\nconst useStyles$4 = makeStyles((theme) => ({\n  root: {\n    textAlign: \"left\"\n  },\n  label: {\n    color: theme.palette.common.white,\n    fontWeight: \"bold\",\n    letterSpacing: 0,\n    fontSize: theme.typography.fontSize,\n    marginBottom: theme.spacing(1) / 2,\n    lineHeight: 1\n  },\n  value: {\n    color: \"rgba(255, 255, 255, 0.8)\",\n    fontSize: theme.typography.fontSize,\n    lineHeight: 1\n  }\n}), { name: \"BackstageHeaderLabel\" });\nconst HeaderLabelContent = ({ value, className }) => /* @__PURE__ */ React.createElement(Typography, {\n  className\n}, value);\nfunction HeaderLabel(props) {\n  const { label, value, url } = props;\n  const classes = useStyles$4();\n  const content = /* @__PURE__ */ React.createElement(HeaderLabelContent, {\n    className: classes.value,\n    value: value || \"<Unknown>\"\n  });\n  return /* @__PURE__ */ React.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React.createElement(\"span\", {\n    className: classes.root\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    className: classes.label\n  }, label), url ? /* @__PURE__ */ React.createElement(Link, {\n    to: url\n  }, content) : content));\n}\n\nconst timeFormat = {\n  hour: \"2-digit\",\n  minute: \"2-digit\"\n};\nfunction getTimes(configApi) {\n  const d = new Date();\n  const lang = window.navigator.language;\n  const clocks = [];\n  if (!configApi.has(\"homepage.clocks\")) {\n    return clocks;\n  }\n  const clockConfigs = configApi.getConfigArray(\"homepage.clocks\");\n  for (const clock of clockConfigs) {\n    if (clock.has(\"label\") && clock.has(\"timezone\")) {\n      let label = clock.getString(\"label\");\n      const options = {\n        timeZone: clock.getString(\"timezone\"),\n        ...timeFormat\n      };\n      try {\n        new Date().toLocaleString(lang, options);\n      } catch (e) {\n        console.warn(`The timezone ${options.timeZone} is invalid. Defaulting to GMT`);\n        options.timeZone = \"GMT\";\n        label = \"GMT\";\n      }\n      const time = d.toLocaleTimeString(lang, options);\n      clocks.push({ time, label });\n    }\n  }\n  return clocks;\n}\nfunction HomepageTimer(_props) {\n  const configApi = useApi(configApiRef);\n  const defaultTimes = [];\n  const [clocks, setTimes] = React.useState(defaultTimes);\n  React.useEffect(() => {\n    setTimes(getTimes(configApi));\n    const intervalId = setInterval(() => {\n      setTimes(getTimes(configApi));\n    }, 1e3);\n    return () => {\n      clearInterval(intervalId);\n    };\n  }, [configApi]);\n  if (clocks.length !== 0) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, clocks.map((clock) => /* @__PURE__ */ React.createElement(HeaderLabel, {\n      label: clock.label,\n      value: clock.time,\n      key: clock.label\n    })));\n  }\n  return null;\n}\n\nconst styles$1 = (theme) => createStyles({\n  root: {\n    color: theme.palette.common.white,\n    padding: theme.spacing(2, 2, 3),\n    backgroundImage: theme.palette.bursts.gradient.linear,\n    backgroundPosition: 0,\n    backgroundSize: \"inherit\"\n  }\n});\nconst useStyles$3 = makeStyles(styles$1, { name: \"BackstageItemCardHeader\" });\nfunction ItemCardHeader(props) {\n  const { title, subtitle, children } = props;\n  const classes = useStyles$3(props);\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.root\n  }, subtitle && /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"subtitle2\",\n    component: \"h3\"\n  }, subtitle), title && /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"h6\",\n    component: \"h4\"\n  }, title), children);\n}\n\nfunction ItemCard(props) {\n  const { description, tags, title, type, subtitle, label, onClick, href } = props;\n  return /* @__PURE__ */ React.createElement(Card, null, /* @__PURE__ */ React.createElement(CardMedia, null, /* @__PURE__ */ React.createElement(ItemCardHeader, {\n    title,\n    subtitle: subtitle || type\n  })), /* @__PURE__ */ React.createElement(CardContent, null, (tags == null ? void 0 : tags.length) ? /* @__PURE__ */ React.createElement(Box, null, tags.map((tag, i) => /* @__PURE__ */ React.createElement(Chip, {\n    size: \"small\",\n    label: tag,\n    key: i\n  }))) : null, description), /* @__PURE__ */ React.createElement(CardActions, null, !href && /* @__PURE__ */ React.createElement(Button, {\n    to: \"#\",\n    onClick,\n    color: \"primary\"\n  }, label), href && /* @__PURE__ */ React.createElement(Button, {\n    to: href,\n    color: \"primary\"\n  }, label)));\n}\n\nconst styles = (theme) => createStyles({\n  root: {\n    display: \"grid\",\n    gridTemplateColumns: \"repeat(auto-fill, minmax(22em, 1fr))\",\n    gridAutoRows: \"1fr\",\n    gridGap: theme.spacing(2)\n  }\n});\nconst useStyles$2 = makeStyles(styles, { name: \"BackstageItemCardGrid\" });\nfunction ItemCardGrid(props) {\n  const { children, ...otherProps } = props;\n  const classes = useStyles$2(otherProps);\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.root,\n    ...otherProps\n  }, children);\n}\n\nconst useStyles$1 = makeStyles(() => ({\n  root: ({ isMobile }) => ({\n    display: \"grid\",\n    gridTemplateAreas: \"'pageHeader pageHeader pageHeader' 'pageSubheader pageSubheader pageSubheader' 'pageNav pageContent pageSidebar'\",\n    gridTemplateRows: \"max-content auto 1fr\",\n    gridTemplateColumns: \"auto 1fr auto\",\n    height: isMobile ? \"100%\" : \"100vh\",\n    overflowY: \"auto\"\n  })\n}), { name: \"BackstagePage\" });\nfunction Page(props) {\n  const { themeId, children } = props;\n  const { isMobile } = useContext(SidebarPinStateContext);\n  const classes = useStyles$1({ isMobile });\n  return /* @__PURE__ */ React.createElement(ThemeProvider, {\n    theme: (baseTheme) => ({\n      ...baseTheme,\n      page: baseTheme.getPageTheme({ themeId })\n    })\n  }, /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.root\n  }, children));\n}\n\nfunction PageWithHeader(props) {\n  const { themeId, children, ...restProps } = props;\n  return /* @__PURE__ */ React.createElement(Page, {\n    themeId\n  }, /* @__PURE__ */ React.createElement(Header, {\n    ...restProps\n  }), children);\n}\n\nconst proxiedSessionSchema = z.object({\n  providerInfo: z.object({}).catchall(z.unknown()).optional(),\n  profile: z.object({\n    email: z.string().optional(),\n    displayName: z.string().optional(),\n    picture: z.string().optional()\n  }),\n  backstageIdentity: z.object({\n    token: z.string(),\n    identity: z.object({\n      type: z.literal(\"user\"),\n      userEntityRef: z.string(),\n      ownershipEntityRefs: z.array(z.string())\n    })\n  })\n});\n\nconst DEFAULTS = {\n  defaultTokenExpiryMillis: 5 * 60 * 1e3,\n  tokenExpiryMarginMillis: 5 * 60 * 1e3\n};\nfunction tokenToExpiry(jwtToken) {\n  const fallback = new Date(Date.now() + DEFAULTS.defaultTokenExpiryMillis);\n  if (!jwtToken) {\n    return fallback;\n  }\n  const [_header, rawPayload, _signature] = jwtToken.split(\".\");\n  const payload = JSON.parse(atob(rawPayload));\n  if (typeof payload.exp !== \"number\") {\n    return fallback;\n  }\n  return new Date(payload.exp * 1e3 - DEFAULTS.tokenExpiryMarginMillis);\n}\nclass ProxiedSignInIdentity {\n  constructor(options) {\n    this.options = options;\n    this.abortController = new AbortController();\n    this.state = { type: \"empty\" };\n  }\n  async start() {\n    await this.getSessionAsync();\n  }\n  getUserId() {\n    const { backstageIdentity } = this.getSessionSync();\n    const ref = backstageIdentity.identity.userEntityRef;\n    const match = /^([^:/]+:)?([^:/]+\\/)?([^:/]+)$/.exec(ref);\n    if (!match) {\n      throw new TypeError(`Invalid user entity reference \"${ref}\"`);\n    }\n    return match[3];\n  }\n  async getIdToken() {\n    const session = await this.getSessionAsync();\n    return session.backstageIdentity.token;\n  }\n  getProfile() {\n    const session = this.getSessionSync();\n    return session.profile;\n  }\n  async getProfileInfo() {\n    const session = await this.getSessionAsync();\n    return session.profile;\n  }\n  async getBackstageIdentity() {\n    const session = await this.getSessionAsync();\n    return session.backstageIdentity.identity;\n  }\n  async getCredentials() {\n    const session = await this.getSessionAsync();\n    return {\n      token: session.backstageIdentity.token\n    };\n  }\n  async signOut() {\n    this.abortController.abort();\n  }\n  getSessionSync() {\n    if (this.state.type === \"active\") {\n      return this.state.session;\n    } else if (this.state.type === \"fetching\" && this.state.previous) {\n      return this.state.previous;\n    }\n    throw new Error(\"No session available. Try reloading your browser page.\");\n  }\n  async getSessionAsync() {\n    if (this.state.type === \"fetching\") {\n      return this.state.promise;\n    } else if (this.state.type === \"active\" && new Date() < this.state.expiresAt) {\n      return this.state.session;\n    }\n    const previous = this.state.type === \"active\" ? this.state.session : void 0;\n    const promise = this.fetchSession().then((session) => {\n      this.state = {\n        type: \"active\",\n        session,\n        expiresAt: tokenToExpiry(session.backstageIdentity.token)\n      };\n      return session;\n    }, (error) => {\n      this.state = {\n        type: \"failed\",\n        error\n      };\n      throw error;\n    });\n    this.state = {\n      type: \"fetching\",\n      promise,\n      previous\n    };\n    return promise;\n  }\n  async fetchSession() {\n    const baseUrl = await this.options.discoveryApi.getBaseUrl(\"auth\");\n    const response = await fetch(`${baseUrl}/${this.options.provider}/refresh`, {\n      signal: this.abortController.signal,\n      headers: { \"x-requested-with\": \"XMLHttpRequest\" },\n      credentials: \"include\"\n    });\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    return proxiedSessionSchema.parse(await response.json());\n  }\n}\n\nconst ProxiedSignInPage = (props) => {\n  const discoveryApi = useApi(discoveryApiRef);\n  const [{ status, error }, { execute }] = useAsync(async () => {\n    const identity = new ProxiedSignInIdentity({\n      provider: props.provider,\n      discoveryApi\n    });\n    await identity.start();\n    props.onSignInSuccess(identity);\n  });\n  useMountEffect(execute);\n  if (status === \"loading\") {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  } else if (error) {\n    return /* @__PURE__ */ React.createElement(ErrorPanel, {\n      title: \"You do not appear to be signed in. Please try reloading the browser page.\",\n      error\n    });\n  }\n  return null;\n};\n\nclass GuestUserIdentity {\n  getUserId() {\n    return \"guest\";\n  }\n  async getIdToken() {\n    return void 0;\n  }\n  getProfile() {\n    return {\n      email: \"guest@example.com\",\n      displayName: \"Guest\"\n    };\n  }\n  async getProfileInfo() {\n    return {\n      email: \"guest@example.com\",\n      displayName: \"Guest\"\n    };\n  }\n  async getBackstageIdentity() {\n    const userEntityRef = `user:default/guest`;\n    return {\n      type: \"user\",\n      userEntityRef,\n      ownershipEntityRefs: [userEntityRef]\n    };\n  }\n  async getCredentials() {\n    return {};\n  }\n  async signOut() {\n  }\n}\n\nfunction parseJwtPayload(token) {\n  const [_header, payload, _signature] = token.split(\".\");\n  return JSON.parse(atob(payload));\n}\nclass LegacyUserIdentity {\n  constructor(result) {\n    this.result = result;\n  }\n  getUserId() {\n    return this.result.userId;\n  }\n  static fromResult(result) {\n    return new LegacyUserIdentity(result);\n  }\n  async getIdToken() {\n    var _a, _b;\n    return (_b = (_a = this.result).getIdToken) == null ? void 0 : _b.call(_a);\n  }\n  getProfile() {\n    return this.result.profile;\n  }\n  async getProfileInfo() {\n    return this.result.profile;\n  }\n  async getBackstageIdentity() {\n    const token = await this.getIdToken();\n    if (!token) {\n      const userEntityRef = `user:default/${this.getUserId()}`;\n      return {\n        type: \"user\",\n        userEntityRef,\n        ownershipEntityRefs: [userEntityRef]\n      };\n    }\n    const { sub, ent } = parseJwtPayload(token);\n    return {\n      type: \"user\",\n      userEntityRef: sub,\n      ownershipEntityRefs: ent != null ? ent : []\n    };\n  }\n  async getCredentials() {\n    var _a, _b;\n    const token = await ((_b = (_a = this.result).getIdToken) == null ? void 0 : _b.call(_a));\n    return { token };\n  }\n  async signOut() {\n    var _a, _b;\n    return (_b = (_a = this.result).signOut) == null ? void 0 : _b.call(_a);\n  }\n}\n\nclass UserIdentity {\n  constructor(identity, authApi, profile) {\n    this.identity = identity;\n    this.authApi = authApi;\n    this.profile = profile;\n  }\n  static createGuest() {\n    return new GuestUserIdentity();\n  }\n  static fromLegacy(result) {\n    return LegacyUserIdentity.fromResult(result);\n  }\n  static create(options) {\n    return new UserIdentity(options.identity, options.authApi, options.profile);\n  }\n  getUserId() {\n    const ref = this.identity.userEntityRef;\n    const match = /^([^:/]+:)?([^:/]+\\/)?([^:/]+)$/.exec(ref);\n    if (!match) {\n      throw new TypeError(`Invalid user entity reference \"${ref}\"`);\n    }\n    return match[3];\n  }\n  async getIdToken() {\n    const identity = await this.authApi.getBackstageIdentity();\n    return identity.token;\n  }\n  getProfile() {\n    if (!this.profile) {\n      throw new Error(\"The identity API does not implement synchronous profile fetching, use getProfileInfo() instead\");\n    }\n    return this.profile;\n  }\n  async getProfileInfo() {\n    if (this.profilePromise) {\n      return await this.profilePromise;\n    }\n    try {\n      this.profilePromise = this.authApi.getProfile();\n      return await this.profilePromise;\n    } catch (ex) {\n      this.profilePromise = void 0;\n      throw ex;\n    }\n  }\n  async getBackstageIdentity() {\n    return this.identity;\n  }\n  async getCredentials() {\n    const identity = await this.authApi.getBackstageIdentity();\n    return { token: identity.token };\n  }\n  async signOut() {\n    return this.authApi.signOut();\n  }\n}\n\nconst useStyles = makeStyles({\n  container: {\n    padding: 0,\n    listStyle: \"none\"\n  },\n  item: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    width: \"100%\",\n    maxWidth: \"400px\",\n    margin: 0,\n    padding: 0\n  }\n}, { name: \"BackstageSignInPage\" });\nconst GridItem = ({ children }) => {\n  const classes = useStyles();\n  return /* @__PURE__ */ React.createElement(Grid, {\n    component: \"li\",\n    item: true,\n    classes\n  }, children);\n};\n\nconst Component$2 = ({ config, onSignInSuccess }) => {\n  const { apiRef, title, message } = config;\n  const authApi = useApi(apiRef);\n  const errorApi = useApi(errorApiRef);\n  const handleLogin = async () => {\n    try {\n      const identityResponse = await authApi.getBackstageIdentity({\n        instantPopup: true\n      });\n      if (!identityResponse) {\n        throw new Error(`The ${title} provider is not configured to support sign-in`);\n      }\n      const profile = await authApi.getProfile();\n      onSignInSuccess(UserIdentity.create({\n        identity: identityResponse.identity,\n        profile,\n        authApi\n      }));\n    } catch (error) {\n      errorApi.post(new ForwardedError(\"Login failed\", error));\n    }\n  };\n  return /* @__PURE__ */ React.createElement(GridItem, null, /* @__PURE__ */ React.createElement(InfoCard, {\n    variant: \"fullHeight\",\n    title,\n    actions: /* @__PURE__ */ React.createElement(Button$1, {\n      color: \"primary\",\n      variant: \"outlined\",\n      onClick: handleLogin\n    }, \"Sign In\")\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"body1\"\n  }, message)));\n};\nconst loader$2 = async (apis, apiRef) => {\n  const authApi = apis.get(apiRef);\n  const identityResponse = await authApi.getBackstageIdentity({\n    optional: true\n  });\n  if (!identityResponse) {\n    return void 0;\n  }\n  const profile = await authApi.getProfile();\n  return UserIdentity.create({\n    identity: identityResponse.identity,\n    profile,\n    authApi\n  });\n};\nconst commonProvider = { Component: Component$2, loader: loader$2 };\n\nconst Component$1 = ({ onSignInSuccess }) => /* @__PURE__ */ React.createElement(GridItem, null, /* @__PURE__ */ React.createElement(InfoCard, {\n  title: \"Guest\",\n  variant: \"fullHeight\",\n  actions: /* @__PURE__ */ React.createElement(Button$1, {\n    color: \"primary\",\n    variant: \"outlined\",\n    onClick: () => onSignInSuccess(new GuestUserIdentity())\n  }, \"Enter\")\n}, /* @__PURE__ */ React.createElement(Typography, {\n  variant: \"body1\"\n}, \"Enter as a Guest User.\", /* @__PURE__ */ React.createElement(\"br\", null), \"You will not have a verified identity,\", /* @__PURE__ */ React.createElement(\"br\", null), \"meaning some features might be unavailable.\")));\nconst loader$1 = async () => {\n  return new GuestUserIdentity();\n};\nconst guestProvider = { Component: Component$1, loader: loader$1 };\n\nconst ID_TOKEN_REGEX = /^[a-z0-9_\\-]+\\.[a-z0-9_\\-]+\\.[a-z0-9_\\-]+$/i;\nconst useFormStyles = makeStyles((theme) => ({\n  form: {\n    display: \"flex\",\n    flexFlow: \"column nowrap\"\n  },\n  button: {\n    alignSelf: \"center\",\n    marginTop: theme.spacing(2)\n  }\n}), { name: \"BackstageCustomProvider\" });\nconst asInputRef = (renderResult) => {\n  const { ref, ...rest } = renderResult;\n  return {\n    inputRef: ref,\n    ...rest\n  };\n};\nconst Component = ({ onSignInSuccess }) => {\n  const classes = useFormStyles();\n  const { register, handleSubmit, formState } = useForm({\n    mode: \"onChange\"\n  });\n  const { errors } = formState;\n  const handleResult = ({ userId }) => {\n    onSignInSuccess(UserIdentity.fromLegacy({\n      userId,\n      profile: {\n        email: `${userId}@example.com`\n      }\n    }));\n  };\n  return /* @__PURE__ */ React.createElement(GridItem, null, /* @__PURE__ */ React.createElement(InfoCard, {\n    title: \"Custom User\",\n    variant: \"fullHeight\"\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"body1\"\n  }, \"Enter your own User ID and credentials.\", /* @__PURE__ */ React.createElement(\"br\", null), \"This selection will not be stored.\"), /* @__PURE__ */ React.createElement(\"form\", {\n    className: classes.form,\n    onSubmit: handleSubmit(handleResult)\n  }, /* @__PURE__ */ React.createElement(FormControl, null, /* @__PURE__ */ React.createElement(TextField, {\n    ...asInputRef(register(\"userId\", { required: true })),\n    label: \"User ID\",\n    margin: \"normal\",\n    error: Boolean(errors.userId)\n  }), errors.userId && /* @__PURE__ */ React.createElement(FormHelperText, {\n    error: true\n  }, errors.userId.message)), /* @__PURE__ */ React.createElement(FormControl, null, /* @__PURE__ */ React.createElement(TextField, {\n    ...asInputRef(register(\"idToken\", {\n      required: false,\n      validate: (token) => !token || ID_TOKEN_REGEX.test(token) || \"Token is not a valid OpenID Connect JWT Token\"\n    })),\n    label: \"ID Token (optional)\",\n    margin: \"normal\",\n    autoComplete: \"off\",\n    error: Boolean(errors.idToken)\n  }), errors.idToken && /* @__PURE__ */ React.createElement(FormHelperText, {\n    error: true\n  }, errors.idToken.message)), /* @__PURE__ */ React.createElement(Button$1, {\n    type: \"submit\",\n    color: \"primary\",\n    variant: \"outlined\",\n    className: classes.button,\n    disabled: !(formState == null ? void 0 : formState.isDirty) || !isEmpty(errors)\n  }, \"Continue\"))));\n};\nconst loader = async () => void 0;\nconst customProvider = { Component, loader };\n\nclass IdentityApiSignOutProxy {\n  constructor(config) {\n    this.config = config;\n  }\n  static from(config) {\n    return new IdentityApiSignOutProxy(config);\n  }\n  getUserId() {\n    if (!this.config.identityApi.getUserId) {\n      throw new Error(`SignOutProxy IdentityApi.getUserId is not implemented`);\n    }\n    return this.config.identityApi.getUserId();\n  }\n  getIdToken() {\n    if (!this.config.identityApi.getIdToken) {\n      throw new Error(`SignOutProxy IdentityApi.getIdToken is not implemented`);\n    }\n    return this.config.identityApi.getIdToken();\n  }\n  getProfile() {\n    if (!this.config.identityApi.getProfile) {\n      throw new Error(`SignOutProxy IdentityApi.getProfile is not implemented`);\n    }\n    return this.config.identityApi.getProfile();\n  }\n  getProfileInfo() {\n    return this.config.identityApi.getProfileInfo();\n  }\n  getBackstageIdentity() {\n    return this.config.identityApi.getBackstageIdentity();\n  }\n  getCredentials() {\n    return this.config.identityApi.getCredentials();\n  }\n  signOut() {\n    return this.config.signOut();\n  }\n}\n\nconst PROVIDER_STORAGE_KEY = \"@backstage/core:SignInPage:provider\";\nconst signInProviders = {\n  guest: guestProvider,\n  custom: customProvider,\n  common: commonProvider\n};\nfunction validateIDs(id, providers) {\n  if (id in providers)\n    throw new Error(`\"${id}\" ID is duplicated. IDs of identity providers have to be unique.`);\n}\nfunction getSignInProviders(identityProviders) {\n  const providers = identityProviders.reduce((acc, config) => {\n    if (typeof config === \"string\") {\n      validateIDs(config, acc);\n      acc[config] = { components: signInProviders[config], id: config };\n      return acc;\n    }\n    const { id } = config;\n    validateIDs(id, acc);\n    acc[id] = { components: signInProviders.common, id, config };\n    return acc;\n  }, {});\n  return providers;\n}\nconst useSignInProviders = (providers, onSignInSuccess) => {\n  const errorApi = useApi(errorApiRef);\n  const apiHolder = useApiHolder();\n  const [loading, setLoading] = useState(true);\n  const handleWrappedResult = useCallback((identityApi) => {\n    onSignInSuccess(IdentityApiSignOutProxy.from({\n      identityApi,\n      signOut: async () => {\n        var _a;\n        localStorage.removeItem(PROVIDER_STORAGE_KEY);\n        await ((_a = identityApi.signOut) == null ? void 0 : _a.call(identityApi));\n      }\n    }));\n  }, [onSignInSuccess]);\n  useLayoutEffect(() => {\n    var _a;\n    if (!loading) {\n      return void 0;\n    }\n    const selectedProviderId = localStorage.getItem(PROVIDER_STORAGE_KEY);\n    if (selectedProviderId === null) {\n      setLoading(false);\n      return void 0;\n    }\n    const provider = providers[selectedProviderId];\n    if (!provider) {\n      setLoading(false);\n      return void 0;\n    }\n    let didCancel = false;\n    provider.components.loader(apiHolder, (_a = provider.config) == null ? void 0 : _a.apiRef).then((result) => {\n      if (didCancel) {\n        return;\n      }\n      if (result) {\n        handleWrappedResult(result);\n      } else {\n        setLoading(false);\n      }\n    }).catch((error) => {\n      if (didCancel) {\n        return;\n      }\n      localStorage.removeItem(PROVIDER_STORAGE_KEY);\n      errorApi.post(error);\n      setLoading(false);\n    });\n    return () => {\n      didCancel = true;\n    };\n  }, [\n    loading,\n    errorApi,\n    onSignInSuccess,\n    apiHolder,\n    providers,\n    handleWrappedResult\n  ]);\n  const elements = useMemo(() => Object.keys(providers).map((key) => {\n    const provider = providers[key];\n    const { Component } = provider.components;\n    const handleSignInSuccess = (result) => {\n      localStorage.setItem(PROVIDER_STORAGE_KEY, provider.id);\n      handleWrappedResult(result);\n    };\n    return /* @__PURE__ */ React.createElement(Component, {\n      key: provider.id,\n      config: provider.config,\n      onSignInSuccess: handleSignInSuccess\n    });\n  }), [providers, handleWrappedResult]);\n  return [loading, elements];\n};\n\nconst MultiSignInPage = ({\n  onSignInSuccess,\n  providers = [],\n  title,\n  align = \"left\"\n}) => {\n  const configApi = useApi(configApiRef);\n  const classes = useStyles();\n  const signInProviders = getSignInProviders(providers);\n  const [loading, providerElements] = useSignInProviders(signInProviders, onSignInSuccess);\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  }\n  return /* @__PURE__ */ React.createElement(Page, {\n    themeId: \"home\"\n  }, /* @__PURE__ */ React.createElement(Header, {\n    title: configApi.getString(\"app.title\")\n  }), /* @__PURE__ */ React.createElement(Content, null, title && /* @__PURE__ */ React.createElement(ContentHeader, {\n    title,\n    textAlign: align\n  }), /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    justifyContent: align === \"center\" ? align : \"flex-start\",\n    spacing: 2,\n    component: \"ul\",\n    classes\n  }, providerElements)));\n};\nconst SingleSignInPage = ({\n  provider,\n  auto,\n  onSignInSuccess\n}) => {\n  const classes = useStyles();\n  const authApi = useApi(provider.apiRef);\n  const configApi = useApi(configApiRef);\n  const [error, setError] = useState();\n  const [showLoginPage, setShowLoginPage] = useState(false);\n  const login = async ({ checkExisting, showPopup }) => {\n    try {\n      let identityResponse;\n      if (checkExisting) {\n        identityResponse = await authApi.getBackstageIdentity({\n          optional: true\n        });\n      }\n      if (!identityResponse && (showPopup || auto)) {\n        setShowLoginPage(true);\n        identityResponse = await authApi.getBackstageIdentity({\n          instantPopup: true\n        });\n        if (!identityResponse) {\n          throw new Error(`The ${provider.title} provider is not configured to support sign-in`);\n        }\n      }\n      if (!identityResponse) {\n        setShowLoginPage(true);\n        return;\n      }\n      const profile = await authApi.getProfile();\n      onSignInSuccess(UserIdentity.create({\n        identity: identityResponse.identity,\n        authApi,\n        profile\n      }));\n    } catch (err) {\n      setError(err);\n      setShowLoginPage(true);\n    }\n  };\n  useMountEffect(() => login({ checkExisting: true }));\n  return showLoginPage ? /* @__PURE__ */ React.createElement(Page, {\n    themeId: \"home\"\n  }, /* @__PURE__ */ React.createElement(Header, {\n    title: configApi.getString(\"app.title\")\n  }), /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    justifyContent: \"center\",\n    spacing: 2,\n    component: \"ul\",\n    classes\n  }, /* @__PURE__ */ React.createElement(GridItem, null, /* @__PURE__ */ React.createElement(InfoCard, {\n    variant: \"fullHeight\",\n    title: provider.title,\n    actions: /* @__PURE__ */ React.createElement(Button$1, {\n      color: \"primary\",\n      variant: \"outlined\",\n      onClick: () => {\n        login({ showPopup: true });\n      }\n    }, \"Sign In\")\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"body1\"\n  }, provider.message), error && error.name !== \"PopupRejectedError\" && /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"body1\",\n    color: \"error\"\n  }, error.message)))))) : /* @__PURE__ */ React.createElement(Progress, null);\n};\nfunction SignInPage(props) {\n  if (\"provider\" in props) {\n    return /* @__PURE__ */ React.createElement(SingleSignInPage, {\n      ...props\n    });\n  }\n  return /* @__PURE__ */ React.createElement(MultiSignInPage, {\n    ...props\n  });\n}\n\nconst useTabsStyles = makeStyles((theme) => ({\n  root: {\n    padding: theme.spacing(0, 2, 0, 2.5),\n    minHeight: theme.spacing(3)\n  },\n  indicator: {\n    backgroundColor: theme.palette.info.main,\n    height: theme.spacing(0.3)\n  }\n}), { name: \"BackstageTabbedCard\" });\nconst BoldHeader = withStyles((theme) => ({\n  root: { padding: theme.spacing(2, 2, 2, 2.5), display: \"inline-block\" },\n  title: { fontWeight: 700 },\n  subheader: { paddingTop: theme.spacing(1) }\n}), { name: \"BackstageTabbedCardBoldHeader\" })(CardHeader);\nfunction TabbedCard(props) {\n  const {\n    slackChannel,\n    errorBoundaryProps,\n    children,\n    title,\n    deepLink,\n    value,\n    onChange\n  } = props;\n  const tabsClasses = useTabsStyles();\n  const [selectedIndex, selectIndex] = useState(0);\n  const handleChange = onChange ? onChange : (_ev, newSelectedIndex) => selectIndex(newSelectedIndex);\n  let selectedTabContent;\n  if (!value) {\n    React.Children.map(children, (child, index) => {\n      if (React.isValidElement(child) && index === selectedIndex) {\n        selectedTabContent = child == null ? void 0 : child.props.children;\n      }\n    });\n  } else {\n    React.Children.map(children, (child) => {\n      if (React.isValidElement(child) && (child == null ? void 0 : child.props.value) === value) {\n        selectedTabContent = child == null ? void 0 : child.props.children;\n      }\n    });\n  }\n  const errProps = errorBoundaryProps || (slackChannel ? { slackChannel } : {});\n  return /* @__PURE__ */ React.createElement(Card, null, /* @__PURE__ */ React.createElement(ErrorBoundary, {\n    ...errProps\n  }, title && /* @__PURE__ */ React.createElement(BoldHeader, {\n    title\n  }), /* @__PURE__ */ React.createElement(Tabs$1, {\n    selectionFollowsFocus: true,\n    classes: tabsClasses,\n    value: value || selectedIndex,\n    onChange: handleChange\n  }, children), /* @__PURE__ */ React.createElement(Divider, null), /* @__PURE__ */ React.createElement(CardContent, null, selectedTabContent), deepLink && /* @__PURE__ */ React.createElement(BottomLink, {\n    ...deepLink\n  })));\n}\nconst useCardTabStyles = makeStyles((theme) => ({\n  root: {\n    minWidth: theme.spacing(6),\n    minHeight: theme.spacing(3),\n    margin: theme.spacing(0, 2, 0, 0),\n    padding: theme.spacing(0.5, 0, 0.5, 0),\n    textTransform: \"none\",\n    \"&:hover\": {\n      opacity: 1,\n      backgroundColor: \"transparent\",\n      color: theme.palette.text.primary\n    }\n  },\n  selected: {\n    fontWeight: \"bold\"\n  }\n}), { name: \"BackstageCardTab\" });\nfunction CardTab(props) {\n  const { children, ...restProps } = props;\n  const classes = useCardTabStyles();\n  return /* @__PURE__ */ React.createElement(Tab, {\n    disableRipple: true,\n    classes,\n    ...restProps\n  });\n}\n\nexport { AlertDisplay, Avatar, BottomLink, Breadcrumbs, BrokenImageIcon, Button, CardTab, CatalogIcon, ChatIcon, CodeSnippet, Content, ContentHeader, CopyTextButton, CreateButton, DashboardIcon, DependencyGraph, types as DependencyGraphTypes, DismissableBanner, DocsIcon, EmailIcon, EmptyState, ErrorBoundary, ErrorPage, ErrorPanel, FeatureCalloutCircular, Gauge, GaugeCard, GitHubIcon, GroupIcon, Header, HeaderIconLinkRow, HeaderLabel, HeaderTabs, HelpIcon, HomepageTimer, HorizontalScrollGrid, InfoCard, IntroCard, ItemCard, ItemCardGrid, ItemCardHeader, Lifecycle, LinearGauge, Link, LogViewer, MarkdownContent, MissingAnnotationEmptyState, MobileSidebar, OAuthRequestDialog, OverflowTooltip, Page, PageWithHeader, Progress, ProxiedSignInPage, ResponseErrorPanel, RoutedTabs, SIDEBAR_INTRO_LOCAL_STORAGE, SelectComponent as Select, Sidebar, SidebarContext, SidebarDivider, SidebarExpandButton, SidebarGroup, SidebarIntro, SidebarItem, SidebarPage, SidebarPinStateContext, SidebarScrollWrapper, SidebarSearchField, SidebarSpace, SidebarSpacer, SidebarSubmenu, SidebarSubmenuItem, SignInPage, SimpleStepper, SimpleStepperStep, StatusAborted, StatusError, StatusOK, StatusPending, StatusRunning, StatusWarning, StructuredMetadataTable, SubvalueCell, SupportButton, TabbedCard, TabbedLayout, Table, Tabs, TrendLine, UserIcon, UserIdentity, WarningIcon, WarningPanel, sidebarConfig, useContent, useQueryParamState, useSupportConfig };\n//# sourceMappingURL=index.esm.js.map\n","import { createVersionedContext, createVersionedValueMap, useVersionedContext, getOrCreateGlobalSingleton } from '@backstage/version-bridge';\nimport React, { useContext, useRef, useMemo, lazy, Suspense, Children, isValidElement, Fragment } from 'react';\nimport { useLocation, useParams } from 'react-router-dom';\n\nconst AnalyticsReactContext = createVersionedContext(\"analytics-context\");\nconst useAnalyticsContext = () => {\n  const theContext = useContext(AnalyticsReactContext);\n  if (theContext === void 0) {\n    return {\n      routeRef: \"unknown\",\n      pluginId: \"root\",\n      extension: \"App\"\n    };\n  }\n  const theValue = theContext.atVersion(1);\n  if (theValue === void 0) {\n    throw new Error(\"No context found for version 1.\");\n  }\n  return theValue;\n};\nconst AnalyticsContext = (options) => {\n  const { attributes, children } = options;\n  const parentValues = useAnalyticsContext();\n  const combinedValue = {\n    ...parentValues,\n    ...attributes\n  };\n  const versionedCombinedValue = createVersionedValueMap({ 1: combinedValue });\n  return /* @__PURE__ */ React.createElement(AnalyticsReactContext.Provider, {\n    value: versionedCombinedValue\n  }, children);\n};\n\nfunction useApiHolder() {\n  const versionedHolder = useVersionedContext(\"api-context\");\n  if (!versionedHolder) {\n    throw new Error(\"API context is not available\");\n  }\n  const apiHolder = versionedHolder.atVersion(1);\n  if (!apiHolder) {\n    throw new Error(\"ApiContext v1 not available\");\n  }\n  return apiHolder;\n}\nfunction useApi(apiRef) {\n  const apiHolder = useApiHolder();\n  const api = apiHolder.get(apiRef);\n  if (!api) {\n    throw new Error(`No implementation available for ${apiRef}`);\n  }\n  return api;\n}\nfunction withApis(apis) {\n  return function withApisWrapper(WrappedComponent) {\n    const Hoc = (props) => {\n      const apiHolder = useApiHolder();\n      const impls = {};\n      for (const key in apis) {\n        if (apis.hasOwnProperty(key)) {\n          const ref = apis[key];\n          const api = apiHolder.get(ref);\n          if (!api) {\n            throw new Error(`No implementation available for ${ref}`);\n          }\n          impls[key] = api;\n        }\n      }\n      return /* @__PURE__ */ React.createElement(WrappedComponent, {\n        ...props,\n        ...impls\n      });\n    };\n    const displayName = WrappedComponent.displayName || WrappedComponent.name || \"Component\";\n    Hoc.displayName = `withApis(${displayName})`;\n    return Hoc;\n  };\n}\n\nclass ApiRefImpl {\n  constructor(config) {\n    this.config = config;\n    const valid = config.id.split(\".\").flatMap((part) => part.split(\"-\")).every((part) => part.match(/^[a-z][a-z0-9]*$/));\n    if (!valid) {\n      throw new Error(`API id must only contain period separated lowercase alphanum tokens with dashes, got '${config.id}'`);\n    }\n  }\n  get id() {\n    return this.config.id;\n  }\n  get T() {\n    throw new Error(`tried to read ApiRef.T of ${this}`);\n  }\n  toString() {\n    return `apiRef{${this.config.id}}`;\n  }\n}\nfunction createApiRef(config) {\n  return new ApiRefImpl(config);\n}\n\nfunction createApiFactory(factory, instance) {\n  if (\"id\" in factory) {\n    return {\n      api: factory,\n      deps: {},\n      factory: () => instance\n    };\n  }\n  return factory;\n}\n\nvar SessionState = /* @__PURE__ */ ((SessionState2) => {\n  SessionState2[\"SignedIn\"] = \"SignedIn\";\n  SessionState2[\"SignedOut\"] = \"SignedOut\";\n  return SessionState2;\n})(SessionState || {});\nconst googleAuthApiRef = createApiRef({\n  id: \"core.auth.google\"\n});\nconst githubAuthApiRef = createApiRef({\n  id: \"core.auth.github\"\n});\nconst oktaAuthApiRef = createApiRef({\n  id: \"core.auth.okta\"\n});\nconst gitlabAuthApiRef = createApiRef({\n  id: \"core.auth.gitlab\"\n});\nconst microsoftAuthApiRef = createApiRef({\n  id: \"core.auth.microsoft\"\n});\nconst oneloginAuthApiRef = createApiRef({\n  id: \"core.auth.onelogin\"\n});\nconst bitbucketAuthApiRef = createApiRef({\n  id: \"core.auth.bitbucket\"\n});\nconst atlassianAuthApiRef = createApiRef({\n  id: \"core.auth.atlassian\"\n});\n\nconst alertApiRef = createApiRef({\n  id: \"core.alert\"\n});\n\nconst analyticsApiRef = createApiRef({\n  id: \"core.analytics\"\n});\n\nconst appThemeApiRef = createApiRef({\n  id: \"core.apptheme\"\n});\n\nconst configApiRef = createApiRef({\n  id: \"core.config\"\n});\n\nconst discoveryApiRef = createApiRef({\n  id: \"core.discovery\"\n});\n\nconst errorApiRef = createApiRef({\n  id: \"core.error\"\n});\n\nvar FeatureFlagState = /* @__PURE__ */ ((FeatureFlagState2) => {\n  FeatureFlagState2[FeatureFlagState2[\"None\"] = 0] = \"None\";\n  FeatureFlagState2[FeatureFlagState2[\"Active\"] = 1] = \"Active\";\n  return FeatureFlagState2;\n})(FeatureFlagState || {});\nconst featureFlagsApiRef = createApiRef({\n  id: \"core.featureflags\"\n});\n\nconst fetchApiRef = createApiRef({\n  id: \"core.fetch\"\n});\n\nconst identityApiRef = createApiRef({\n  id: \"core.identity\"\n});\n\nconst oauthRequestApiRef = createApiRef({\n  id: \"core.oauthrequest\"\n});\n\nconst storageApiRef = createApiRef({\n  id: \"core.storage\"\n});\n\nclass Tracker {\n  constructor(analyticsApi, context = {\n    routeRef: \"unknown\",\n    pluginId: \"root\",\n    extension: \"App\"\n  }) {\n    this.analyticsApi = analyticsApi;\n    this.context = context;\n  }\n  setContext(context) {\n    this.context = context;\n  }\n  captureEvent(action, subject, {\n    value,\n    attributes\n  } = {}) {\n    try {\n      this.analyticsApi.captureEvent({\n        action,\n        subject,\n        value,\n        attributes,\n        context: this.context\n      });\n    } catch (e) {\n      console.warn(\"Error during analytics event capture. %o\", e);\n    }\n  }\n}\n\nfunction useAnalyticsApi() {\n  try {\n    return useApi(analyticsApiRef);\n  } catch {\n    return { captureEvent: () => {\n    } };\n  }\n}\nfunction useAnalytics() {\n  const trackerRef = useRef(null);\n  const context = useAnalyticsContext();\n  const analyticsApi = useAnalyticsApi();\n  function getTracker() {\n    if (trackerRef.current === null) {\n      trackerRef.current = new Tracker(analyticsApi);\n    }\n    return trackerRef.current;\n  }\n  const tracker = getTracker();\n  tracker.setContext(context);\n  return tracker;\n}\n\nconst useApp = () => {\n  const versionedContext = useVersionedContext(\"app-context\");\n  if (!versionedContext) {\n    throw new Error(\"App context is not available\");\n  }\n  const appContext = versionedContext.atVersion(1);\n  if (!appContext) {\n    throw new Error(\"AppContext v1 not available\");\n  }\n  return appContext;\n};\n\nconst globalStore = getOrCreateGlobalSingleton(\"component-data-store\", () => /* @__PURE__ */ new WeakMap());\nconst componentDataKey = \"__backstage_data\";\nfunction attachComponentData(component, type, data) {\n  var _a;\n  const dataComponent = component;\n  let container = (_a = dataComponent[componentDataKey]) != null ? _a : globalStore.get(component);\n  if (!container) {\n    container = { map: /* @__PURE__ */ new Map() };\n    Object.defineProperty(dataComponent, componentDataKey, {\n      enumerable: false,\n      configurable: true,\n      writable: false,\n      value: container\n    });\n    globalStore.set(component, container);\n  }\n  if (container.map.has(type)) {\n    const name = component.displayName || component.name;\n    throw new Error(`Attempted to attach duplicate data \"${type}\" to component \"${name}\"`);\n  }\n  container.map.set(type, data);\n}\nfunction getComponentData(node, type) {\n  var _a;\n  if (!node) {\n    return void 0;\n  }\n  const component = node.type;\n  if (!component) {\n    return void 0;\n  }\n  const container = (_a = component[componentDataKey]) != null ? _a : globalStore.get(component);\n  if (!container) {\n    return void 0;\n  }\n  return container.map.get(type);\n}\n\nconst routeRefType = getOrCreateGlobalSingleton(\"route-ref-type\", () => Symbol(\"route-ref-type\"));\n\nvar _a$2;\nclass RouteRefImpl {\n  constructor(id, params) {\n    this.id = id;\n    this.params = params;\n    this[_a$2] = \"absolute\";\n  }\n  get title() {\n    return this.id;\n  }\n  toString() {\n    return `routeRef{type=absolute,id=${this.id}}`;\n  }\n}\n_a$2 = routeRefType;\nfunction createRouteRef(config) {\n  var _a2;\n  return new RouteRefImpl(config.id, (_a2 = config.params) != null ? _a2 : []);\n}\n\nvar _a$1;\nconst PARAM_PATTERN = /^\\w+$/;\nclass SubRouteRefImpl {\n  constructor(id, path, parent, params) {\n    this.id = id;\n    this.path = path;\n    this.parent = parent;\n    this.params = params;\n    this[_a$1] = \"sub\";\n  }\n  toString() {\n    return `routeRef{type=sub,id=${this.id}}`;\n  }\n}\n_a$1 = routeRefType;\nfunction createSubRouteRef(config) {\n  const { id, path, parent } = config;\n  const pathParams = path.split(\"/\").filter((p) => p.startsWith(\":\")).map((p) => p.substring(1));\n  const params = [...parent.params, ...pathParams];\n  if (parent.params.some((p) => pathParams.includes(p))) {\n    throw new Error(\"SubRouteRef may not have params that overlap with its parent\");\n  }\n  if (!path.startsWith(\"/\")) {\n    throw new Error(`SubRouteRef path must start with '/', got '${path}'`);\n  }\n  if (path.endsWith(\"/\")) {\n    throw new Error(`SubRouteRef path must not end with '/', got '${path}'`);\n  }\n  for (const param of pathParams) {\n    if (!PARAM_PATTERN.test(param)) {\n      throw new Error(`SubRouteRef path has invalid param, got '${param}'`);\n    }\n  }\n  const subRouteRef = new SubRouteRefImpl(id, path, parent, params);\n  return subRouteRef;\n}\n\nvar _a;\nclass ExternalRouteRefImpl {\n  constructor(id, params, optional) {\n    this.id = id;\n    this.params = params;\n    this.optional = optional;\n    this[_a] = \"external\";\n  }\n  toString() {\n    return `routeRef{type=external,id=${this.id}}`;\n  }\n}\n_a = routeRefType;\nfunction createExternalRouteRef(options) {\n  var _a2;\n  return new ExternalRouteRefImpl(options.id, (_a2 = options.params) != null ? _a2 : [], Boolean(options.optional));\n}\n\nfunction useRouteRef(routeRef) {\n  const sourceLocation = useLocation();\n  const versionedContext = useVersionedContext(\"routing-context\");\n  if (!versionedContext) {\n    throw new Error(\"Routing context is not available\");\n  }\n  const resolver = versionedContext.atVersion(1);\n  const routeFunc = useMemo(() => resolver && resolver.resolve(routeRef, sourceLocation), [resolver, routeRef, sourceLocation]);\n  if (!versionedContext) {\n    throw new Error(\"useRouteRef used outside of routing context\");\n  }\n  if (!resolver) {\n    throw new Error(\"RoutingContext v1 not available\");\n  }\n  const isOptional = \"optional\" in routeRef && routeRef.optional;\n  if (!routeFunc && !isOptional) {\n    throw new Error(`No path for ${routeRef}`);\n  }\n  return routeFunc;\n}\n\nfunction useRouteRefParams(_routeRef) {\n  return useParams();\n}\n\nclass PluginErrorBoundary extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = { error: void 0 };\n    this.handleErrorReset = () => {\n      this.setState({ error: void 0 });\n    };\n  }\n  static getDerivedStateFromError(error) {\n    return { error };\n  }\n  render() {\n    const { error } = this.state;\n    const { app, plugin } = this.props;\n    const { ErrorBoundaryFallback } = app.getComponents();\n    if (error) {\n      return /* @__PURE__ */ React.createElement(ErrorBoundaryFallback, {\n        error,\n        resetError: this.handleErrorReset,\n        plugin\n      });\n    }\n    return this.props.children;\n  }\n}\n\nfunction createRoutableExtension(options) {\n  const { component, mountPoint, name } = options;\n  return createReactExtension({\n    component: {\n      lazy: () => component().then((InnerComponent) => {\n        const RoutableExtensionWrapper = (props) => {\n          try {\n            useRouteRef(mountPoint);\n          } catch (error) {\n            if (typeof error === \"object\" && error !== null) {\n              const { message } = error;\n              if (typeof message === \"string\" && message.startsWith(\"No path for \")) {\n                throw new Error(`Routable extension component with mount point ${mountPoint} was not discovered in the app element tree. Routable extension components may not be rendered by other components and must be directly available as an element within the App provider component.`);\n              }\n            }\n            throw error;\n          }\n          return /* @__PURE__ */ React.createElement(InnerComponent, {\n            ...props\n          });\n        };\n        const componentName = name || InnerComponent.displayName || InnerComponent.name || \"LazyComponent\";\n        RoutableExtensionWrapper.displayName = `RoutableExtension(${componentName})`;\n        return RoutableExtensionWrapper;\n      }, (error) => {\n        const RoutableExtensionWrapper = (_) => {\n          const app = useApp();\n          const { BootErrorPage } = app.getComponents();\n          return /* @__PURE__ */ React.createElement(BootErrorPage, {\n            step: \"load-chunk\",\n            error\n          });\n        };\n        return RoutableExtensionWrapper;\n      })\n    },\n    data: {\n      \"core.mountPoint\": mountPoint\n    },\n    name\n  });\n}\nfunction createComponentExtension(options) {\n  const { component, name } = options;\n  return createReactExtension({ component, name });\n}\nfunction createReactExtension(options) {\n  const { data = {}, name } = options;\n  if (!name) {\n    console.warn(\"Declaring extensions without name is DEPRECATED. Make sure that all usages of createReactExtension, createComponentExtension and createRoutableExtension provide a name.\");\n  }\n  let Component;\n  if (\"lazy\" in options.component) {\n    const lazyLoader = options.component.lazy;\n    Component = lazy(() => lazyLoader().then((component) => ({ default: component })));\n  } else {\n    Component = options.component.sync;\n  }\n  const componentName = name || Component.displayName || Component.name || \"Component\";\n  return {\n    expose(plugin) {\n      const Result = (props) => {\n        const app = useApp();\n        const { Progress } = app.getComponents();\n        const mountPoint = data == null ? void 0 : data[\"core.mountPoint\"];\n        return /* @__PURE__ */ React.createElement(Suspense, {\n          fallback: /* @__PURE__ */ React.createElement(Progress, null)\n        }, /* @__PURE__ */ React.createElement(PluginErrorBoundary, {\n          app,\n          plugin\n        }, /* @__PURE__ */ React.createElement(AnalyticsContext, {\n          attributes: {\n            pluginId: plugin.getId(),\n            ...name && { extension: name },\n            ...mountPoint && { routeRef: mountPoint.id }\n          }\n        }, /* @__PURE__ */ React.createElement(Component, {\n          ...props\n        }))));\n      };\n      attachComponentData(Result, \"core.plugin\", plugin);\n      for (const [key, value] of Object.entries(data)) {\n        attachComponentData(Result, key, value);\n      }\n      Result.displayName = `Extension(${componentName})`;\n      return Result;\n    }\n  };\n}\n\nfunction selectChildren(rootNode, featureFlagsApi, selector, strictError) {\n  return Children.toArray(rootNode).flatMap((node) => {\n    if (!isValidElement(node)) {\n      return [];\n    }\n    if (node.type === Fragment) {\n      return selectChildren(node.props.children, featureFlagsApi, selector, strictError);\n    }\n    if (getComponentData(node, \"core.featureFlagged\")) {\n      const props = node.props;\n      const isEnabled = \"with\" in props ? featureFlagsApi.isActive(props.with) : !featureFlagsApi.isActive(props.without);\n      if (isEnabled) {\n        return selectChildren(node.props.children, featureFlagsApi, selector, strictError);\n      }\n      return [];\n    }\n    if (selector === void 0 || selector(node)) {\n      return [node];\n    }\n    if (strictError) {\n      throw new Error(strictError);\n    }\n    return selectChildren(node.props.children, featureFlagsApi, selector, strictError);\n  });\n}\nclass Collection {\n  constructor(node, featureFlagsApi) {\n    this.node = node;\n    this.featureFlagsApi = featureFlagsApi;\n  }\n  selectByComponentData(query) {\n    const selection = selectChildren(this.node, this.featureFlagsApi, (node) => getComponentData(node, query.key) !== void 0, query.withStrictError);\n    return new Collection(selection, this.featureFlagsApi);\n  }\n  findComponentData(query) {\n    const selection = selectChildren(this.node, this.featureFlagsApi, (node) => getComponentData(node, query.key) !== void 0);\n    return selection.map((node) => getComponentData(node, query.key)).filter((data) => data !== void 0);\n  }\n  getElements() {\n    return selectChildren(this.node, this.featureFlagsApi);\n  }\n}\nfunction useElementFilter(node, filterFn, dependencies = []) {\n  const featureFlagsApi = useApi(featureFlagsApiRef);\n  const elements = new Collection(node, featureFlagsApi);\n  return useMemo(() => filterFn(elements), [node, ...dependencies]);\n}\n\nclass PluginImpl {\n  constructor(config) {\n    this.config = config;\n  }\n  getId() {\n    return this.config.id;\n  }\n  getApis() {\n    var _a;\n    return (_a = this.config.apis) != null ? _a : [];\n  }\n  getFeatureFlags() {\n    var _a, _b;\n    return (_b = (_a = this.config.featureFlags) == null ? void 0 : _a.slice()) != null ? _b : [];\n  }\n  get routes() {\n    var _a;\n    return (_a = this.config.routes) != null ? _a : {};\n  }\n  get externalRoutes() {\n    var _a;\n    return (_a = this.config.externalRoutes) != null ? _a : {};\n  }\n  provide(extension) {\n    return extension.expose(this);\n  }\n  toString() {\n    return `plugin{${this.config.id}}`;\n  }\n}\nfunction createPlugin(config) {\n  return new PluginImpl(config);\n}\n\nexport { AnalyticsContext, FeatureFlagState, SessionState, alertApiRef, analyticsApiRef, appThemeApiRef, atlassianAuthApiRef, attachComponentData, bitbucketAuthApiRef, configApiRef, createApiFactory, createApiRef, createComponentExtension, createExternalRouteRef, createPlugin, createReactExtension, createRoutableExtension, createRouteRef, createSubRouteRef, discoveryApiRef, errorApiRef, featureFlagsApiRef, fetchApiRef, getComponentData, githubAuthApiRef, gitlabAuthApiRef, googleAuthApiRef, identityApiRef, microsoftAuthApiRef, oauthRequestApiRef, oktaAuthApiRef, oneloginAuthApiRef, storageApiRef, useAnalytics, useApi, useApiHolder, useApp, useElementFilter, useRouteRef, useRouteRefParams, withApis };\n//# sourceMappingURL=index.esm.js.map\n","import { serializeError as serializeError$1, deserializeError as deserializeError$1 } from 'serialize-error';\n\nfunction isError(value) {\n  if (typeof value !== \"object\" || value === null || Array.isArray(value)) {\n    return false;\n  }\n  const maybe = value;\n  if (typeof maybe.name !== \"string\" || maybe.name === \"\") {\n    return false;\n  }\n  if (typeof maybe.message !== \"string\") {\n    return false;\n  }\n  return true;\n}\nfunction assertError(value) {\n  if (typeof value !== \"object\" || value === null || Array.isArray(value)) {\n    throw new Error(`Encountered invalid error, not an object, got '${value}'`);\n  }\n  const maybe = value;\n  if (typeof maybe.name !== \"string\" || maybe.name === \"\") {\n    throw new Error(`Encountered error object without a name, got '${value}'`);\n  }\n  if (typeof maybe.message !== \"string\") {\n    throw new Error(`Encountered error object without a message, got '${value}'`);\n  }\n}\n\nfunction serializeError(error, options) {\n  const serialized = serializeError$1(error);\n  const result = {\n    name: \"Unknown\",\n    message: \"<no reason given>\",\n    ...serialized\n  };\n  if (!(options == null ? void 0 : options.includeStack)) {\n    delete result.stack;\n  }\n  return result;\n}\nfunction deserializeError(data) {\n  const result = deserializeError$1(data);\n  if (!data.stack) {\n    result.stack = void 0;\n  }\n  return result;\n}\nfunction stringifyError(error) {\n  if (isError(error)) {\n    const str = String(error);\n    return str !== \"[object Object]\" ? str : `${error.name}: ${error.message}`;\n  }\n  return `unknown error '${error}'`;\n}\n\nasync function parseErrorResponseBody(response) {\n  var _a;\n  try {\n    const text = await response.text();\n    if (text) {\n      if ((_a = response.headers.get(\"content-type\")) == null ? void 0 : _a.startsWith(\"application/json\")) {\n        try {\n          const body = JSON.parse(text);\n          if (body.error && body.response) {\n            return body;\n          }\n        } catch {\n        }\n      }\n      return {\n        error: {\n          name: \"Error\",\n          message: `Request failed with status ${response.status} ${response.statusText}, ${text}`\n        },\n        response: {\n          statusCode: response.status\n        }\n      };\n    }\n  } catch {\n  }\n  return {\n    error: {\n      name: \"Error\",\n      message: `Request failed with status ${response.status} ${response.statusText}`\n    },\n    response: {\n      statusCode: response.status\n    }\n  };\n}\n\nclass CustomErrorBase extends Error {\n  constructor(message, cause) {\n    var _a;\n    let fullMessage = message;\n    if (cause !== void 0) {\n      const causeStr = stringifyError(cause);\n      if (fullMessage) {\n        fullMessage += `; caused by ${causeStr}`;\n      } else {\n        fullMessage = `caused by ${causeStr}`;\n      }\n    }\n    super(fullMessage);\n    (_a = Error.captureStackTrace) == null ? void 0 : _a.call(Error, this, this.constructor);\n    this.name = this.constructor.name;\n    this.cause = isError(cause) ? cause : void 0;\n  }\n}\n\nclass InputError extends CustomErrorBase {\n}\nclass AuthenticationError extends CustomErrorBase {\n}\nclass NotAllowedError extends CustomErrorBase {\n}\nclass NotFoundError extends CustomErrorBase {\n}\nclass ConflictError extends CustomErrorBase {\n}\nclass NotModifiedError extends CustomErrorBase {\n}\nclass ForwardedError extends CustomErrorBase {\n  constructor(message, cause) {\n    super(message, cause);\n    this.name = isError(cause) ? cause.name : \"Error\";\n  }\n}\n\nclass ResponseError extends Error {\n  static async fromResponse(response) {\n    const data = await parseErrorResponseBody(response);\n    const status = data.response.statusCode || response.status;\n    const statusText = data.error.name || response.statusText;\n    const message = `Request failed with ${status} ${statusText}`;\n    const cause = deserializeError(data.error);\n    return new ResponseError({\n      message,\n      response,\n      data,\n      cause\n    });\n  }\n  constructor(props) {\n    super(props.message);\n    this.name = \"ResponseError\";\n    this.response = props.response;\n    this.body = props.data;\n    this.cause = props.cause;\n  }\n}\n\nexport { AuthenticationError, ConflictError, CustomErrorBase, ForwardedError, InputError, NotAllowedError, NotFoundError, NotModifiedError, ResponseError, assertError, deserializeError, isError, parseErrorResponseBody, serializeError, stringifyError };\n//# sourceMappingURL=index.esm.js.map\n","import { createApiRef, createApiFactory, githubAuthApiRef, gitlabAuthApiRef, microsoftAuthApiRef, bitbucketAuthApiRef, useApp } from '@backstage/core-plugin-api';\nimport { ScmIntegrations } from '@backstage/integration';\nimport CodeIcon from '@material-ui/icons/Code';\nimport React from 'react';\n\nconst scmAuthApiRef = createApiRef({\n  id: \"core.scmauth\"\n});\n\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _providers, _api, _host, _scopeMapping, _providerName;\nclass ScmAuthMux {\n  constructor(providers) {\n    __privateAdd(this, _providers, void 0);\n    __privateSet(this, _providers, providers);\n  }\n  async getCredentials(options) {\n    const url = new URL(options.url);\n    const provider = __privateGet(this, _providers).find((p) => p.isUrlSupported(url));\n    if (!provider) {\n      throw new Error(`No auth provider available for '${options.url}', see https://backstage.io/link?scm-auth`);\n    }\n    return provider.getCredentials(options);\n  }\n}\n_providers = new WeakMap();\nconst _ScmAuth = class {\n  constructor(providerName, api, host, scopeMapping) {\n    __privateAdd(this, _api, void 0);\n    __privateAdd(this, _host, void 0);\n    __privateAdd(this, _scopeMapping, void 0);\n    __privateAdd(this, _providerName, void 0);\n    __privateSet(this, _api, api);\n    __privateSet(this, _host, host);\n    __privateSet(this, _scopeMapping, scopeMapping);\n    __privateSet(this, _providerName, providerName);\n  }\n  static createDefaultApiFactory() {\n    return createApiFactory({\n      api: scmAuthApiRef,\n      deps: {\n        github: githubAuthApiRef,\n        gitlab: gitlabAuthApiRef,\n        azure: microsoftAuthApiRef,\n        bitbucket: bitbucketAuthApiRef\n      },\n      factory: ({ github, gitlab, azure, bitbucket }) => _ScmAuth.merge(_ScmAuth.forGithub(github), _ScmAuth.forGitlab(gitlab), _ScmAuth.forAzure(azure), _ScmAuth.forBitbucket(bitbucket))\n    });\n  }\n  static forAuthApi(authApi, options) {\n    return new _ScmAuth(\"generic\", authApi, options.host, options.scopeMapping);\n  }\n  static forGithub(githubAuthApi, options) {\n    var _a;\n    const host = (_a = options == null ? void 0 : options.host) != null ? _a : \"github.com\";\n    return new _ScmAuth(\"github\", githubAuthApi, host, {\n      default: [\"repo\", \"read:org\", \"read:user\"],\n      repoWrite: [\"gist\"]\n    });\n  }\n  static forGitlab(gitlabAuthApi, options) {\n    var _a;\n    const host = (_a = options == null ? void 0 : options.host) != null ? _a : \"gitlab.com\";\n    return new _ScmAuth(\"gitlab\", gitlabAuthApi, host, {\n      default: [\"read_user\", \"read_api\", \"read_repository\"],\n      repoWrite: [\"write_repository\", \"api\"]\n    });\n  }\n  static forAzure(microsoftAuthApi, options) {\n    var _a;\n    const host = (_a = options == null ? void 0 : options.host) != null ? _a : \"dev.azure.com\";\n    return new _ScmAuth(\"azure\", microsoftAuthApi, host, {\n      default: [\n        \"vso.build\",\n        \"vso.code\",\n        \"vso.graph\",\n        \"vso.project\",\n        \"vso.profile\"\n      ],\n      repoWrite: [\"vso.code_manage\"]\n    });\n  }\n  static forBitbucket(bitbucketAuthApi, options) {\n    var _a;\n    const host = (_a = options == null ? void 0 : options.host) != null ? _a : \"bitbucket.org\";\n    return new _ScmAuth(\"bitbucket\", bitbucketAuthApi, host, {\n      default: [\"account\", \"team\", \"pullrequest\", \"snippet\", \"issue\"],\n      repoWrite: [\"pullrequest:write\", \"snippet:write\", \"issue:write\"]\n    });\n  }\n  static merge(...providers) {\n    return new ScmAuthMux(providers);\n  }\n  isUrlSupported(url) {\n    return url.host === __privateGet(this, _host);\n  }\n  getAdditionalScopesForProvider(additionalScopes) {\n    var _a, _b;\n    if (!(additionalScopes == null ? void 0 : additionalScopes.customScopes) || __privateGet(this, _providerName) === \"generic\") {\n      return [];\n    }\n    return (_b = (_a = additionalScopes.customScopes) == null ? void 0 : _a[__privateGet(this, _providerName)]) != null ? _b : [];\n  }\n  async getCredentials(options) {\n    const { url, additionalScope, ...restOptions } = options;\n    const scopes = __privateGet(this, _scopeMapping).default.slice();\n    if (additionalScope == null ? void 0 : additionalScope.repoWrite) {\n      scopes.push(...__privateGet(this, _scopeMapping).repoWrite);\n    }\n    const additionalScopes = this.getAdditionalScopesForProvider(additionalScope);\n    if (additionalScopes.length) {\n      scopes.push(...additionalScopes);\n    }\n    const uniqueScopes = [...new Set(scopes)];\n    const token = await __privateGet(this, _api).getAccessToken(uniqueScopes, restOptions);\n    return {\n      token,\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    };\n  }\n};\nlet ScmAuth = _ScmAuth;\n_api = new WeakMap();\n_host = new WeakMap();\n_scopeMapping = new WeakMap();\n_providerName = new WeakMap();\n\nclass ScmIntegrationsApi {\n  static fromConfig(config) {\n    return ScmIntegrations.fromConfig(config);\n  }\n}\nconst scmIntegrationsApiRef = createApiRef({\n  id: \"integration.scmintegrations\"\n});\n\nconst ScmIntegrationIcon = (props) => {\n  var _a;\n  const { type } = props;\n  const app = useApp();\n  const DefaultIcon = CodeIcon;\n  const Icon = type ? (_a = app.getSystemIcon(type)) != null ? _a : DefaultIcon : DefaultIcon;\n  return /* @__PURE__ */ React.createElement(Icon, null);\n};\n\nexport { ScmAuth, ScmIntegrationIcon, ScmIntegrationsApi, scmAuthApiRef, scmIntegrationsApiRef };\n//# sourceMappingURL=index.esm.js.map\n","import parseGitUrl from 'git-url-parse';\nimport { trimEnd, trimStart } from 'lodash';\nimport fetch from 'cross-fetch';\nimport { createAppAuth } from '@octokit/auth-app';\nimport { Octokit } from '@octokit/rest';\nimport { DateTime } from 'luxon';\n\nfunction isValidHost(host) {\n  const check = new URL(\"http://example.com\");\n  check.host = host;\n  return check.host === host;\n}\nfunction isValidUrl(url) {\n  try {\n    new URL(url);\n    return true;\n  } catch {\n    return false;\n  }\n}\nfunction basicIntegrations(integrations, getHost) {\n  return {\n    list() {\n      return integrations;\n    },\n    byUrl(url) {\n      try {\n        const parsed = typeof url === \"string\" ? new URL(url) : url;\n        return integrations.find((i) => getHost(i) === parsed.host);\n      } catch {\n        return void 0;\n      }\n    },\n    byHost(host) {\n      return integrations.find((i) => getHost(i) === host);\n    }\n  };\n}\nfunction defaultScmResolveUrl(options) {\n  const { url, base, lineNumber } = options;\n  try {\n    new URL(url);\n    return url;\n  } catch {\n  }\n  let updated;\n  if (url.startsWith(\"/\")) {\n    const { filepath } = parseGitUrl(base);\n    updated = new URL(base);\n    const repoRootPath = trimEnd(updated.pathname.substring(0, updated.pathname.length - filepath.length), \"/\");\n    updated.pathname = `${repoRootPath}${url}`;\n  } else {\n    updated = new URL(url, base);\n  }\n  updated.search = new URL(base).search;\n  if (lineNumber) {\n    updated.hash = `L${lineNumber}`;\n  }\n  return updated.toString();\n}\n\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _origin, _owner, _project, _repo, _path, _ref, _baseUrl;\nconst VERSION_PREFIX_GIT_BRANCH = \"GB\";\nconst _AzureUrl = class {\n  constructor(origin, owner, project, repo, path, ref) {\n    __privateAdd(this, _origin, void 0);\n    __privateAdd(this, _owner, void 0);\n    __privateAdd(this, _project, void 0);\n    __privateAdd(this, _repo, void 0);\n    __privateAdd(this, _path, void 0);\n    __privateAdd(this, _ref, void 0);\n    __privateAdd(this, _baseUrl, (...parts) => {\n      const url = new URL(__privateGet(this, _origin));\n      url.pathname = parts.map((part) => encodeURIComponent(part)).join(\"/\");\n      return url;\n    });\n    __privateSet(this, _origin, origin);\n    __privateSet(this, _owner, owner);\n    __privateSet(this, _project, project);\n    __privateSet(this, _repo, repo);\n    __privateSet(this, _path, path);\n    __privateSet(this, _ref, ref);\n  }\n  static fromRepoUrl(repoUrl) {\n    var _a;\n    const url = new URL(repoUrl);\n    let owner;\n    let project;\n    let repo;\n    const parts = url.pathname.split(\"/\").map((part) => decodeURIComponent(part));\n    if (parts[2] === \"_git\") {\n      owner = parts[1];\n      project = repo = parts[3];\n    } else if (parts[3] === \"_git\") {\n      owner = parts[1];\n      project = parts[2];\n      repo = parts[4];\n    }\n    if (!owner || !project || !repo) {\n      throw new Error(\"Azure URL must point to a git repository\");\n    }\n    const path = (_a = url.searchParams.get(\"path\")) != null ? _a : void 0;\n    let ref;\n    const version = url.searchParams.get(\"version\");\n    if (version) {\n      const prefix = version.slice(0, 2);\n      if (prefix !== \"GB\") {\n        throw new Error(\"Azure URL version must point to a git branch\");\n      }\n      ref = version.slice(2);\n    }\n    return new _AzureUrl(url.origin, owner, project, repo, path, ref);\n  }\n  toRepoUrl() {\n    let url;\n    if (__privateGet(this, _project) === __privateGet(this, _repo)) {\n      url = __privateGet(this, _baseUrl).call(this, __privateGet(this, _owner), \"_git\", __privateGet(this, _repo));\n    } else {\n      url = __privateGet(this, _baseUrl).call(this, __privateGet(this, _owner), __privateGet(this, _project), \"_git\", __privateGet(this, _repo));\n    }\n    if (__privateGet(this, _path)) {\n      url.searchParams.set(\"path\", __privateGet(this, _path));\n    }\n    if (__privateGet(this, _ref)) {\n      url.searchParams.set(\"version\", VERSION_PREFIX_GIT_BRANCH + __privateGet(this, _ref));\n    }\n    return url.toString();\n  }\n  toFileUrl() {\n    if (!__privateGet(this, _path)) {\n      throw new Error(\"Azure URL must point to a specific path to be able to download a file\");\n    }\n    const url = __privateGet(this, _baseUrl).call(this, __privateGet(this, _owner), __privateGet(this, _project), \"_apis\", \"git\", \"repositories\", __privateGet(this, _repo), \"items\");\n    url.searchParams.set(\"api-version\", \"6.0\");\n    url.searchParams.set(\"path\", __privateGet(this, _path));\n    if (__privateGet(this, _ref)) {\n      url.searchParams.set(\"version\", __privateGet(this, _ref));\n    }\n    return url.toString();\n  }\n  toArchiveUrl() {\n    const url = __privateGet(this, _baseUrl).call(this, __privateGet(this, _owner), __privateGet(this, _project), \"_apis\", \"git\", \"repositories\", __privateGet(this, _repo), \"items\");\n    url.searchParams.set(\"recursionLevel\", \"full\");\n    url.searchParams.set(\"download\", \"true\");\n    url.searchParams.set(\"api-version\", \"6.0\");\n    if (__privateGet(this, _path)) {\n      url.searchParams.set(\"scopePath\", __privateGet(this, _path));\n    }\n    if (__privateGet(this, _ref)) {\n      url.searchParams.set(\"version\", __privateGet(this, _ref));\n    }\n    return url.toString();\n  }\n  toCommitsUrl() {\n    const url = __privateGet(this, _baseUrl).call(this, __privateGet(this, _owner), __privateGet(this, _project), \"_apis\", \"git\", \"repositories\", __privateGet(this, _repo), \"commits\");\n    url.searchParams.set(\"api-version\", \"6.0\");\n    if (__privateGet(this, _ref)) {\n      url.searchParams.set(\"searchCriteria.itemVersion.version\", __privateGet(this, _ref));\n    }\n    return url.toString();\n  }\n  getOwner() {\n    return __privateGet(this, _owner);\n  }\n  getProject() {\n    return __privateGet(this, _project);\n  }\n  getRepo() {\n    return __privateGet(this, _repo);\n  }\n  getPath() {\n    return __privateGet(this, _path);\n  }\n  getRef() {\n    return __privateGet(this, _ref);\n  }\n};\nlet AzureUrl = _AzureUrl;\n_origin = new WeakMap();\n_owner = new WeakMap();\n_project = new WeakMap();\n_repo = new WeakMap();\n_path = new WeakMap();\n_ref = new WeakMap();\n_baseUrl = new WeakMap();\n\nconst AZURE_HOST = \"dev.azure.com\";\nfunction readAzureIntegrationConfig(config) {\n  var _a;\n  const host = (_a = config.getOptionalString(\"host\")) != null ? _a : AZURE_HOST;\n  const token = config.getOptionalString(\"token\");\n  if (!isValidHost(host)) {\n    throw new Error(`Invalid Azure integration config, '${host}' is not a valid host`);\n  }\n  return { host, token };\n}\nfunction readAzureIntegrationConfigs(configs) {\n  const result = configs.map(readAzureIntegrationConfig);\n  if (!result.some((c) => c.host === AZURE_HOST)) {\n    result.push({ host: AZURE_HOST });\n  }\n  return result;\n}\n\nconst _AzureIntegration = class {\n  constructor(integrationConfig) {\n    this.integrationConfig = integrationConfig;\n  }\n  get type() {\n    return \"azure\";\n  }\n  get title() {\n    return this.integrationConfig.host;\n  }\n  get config() {\n    return this.integrationConfig;\n  }\n  resolveUrl(options) {\n    var _a;\n    const { url, base } = options;\n    if (isValidUrl(url)) {\n      return url;\n    }\n    try {\n      const azureUrl = AzureUrl.fromRepoUrl(base);\n      const newUrl = new URL(base);\n      const mockBaseUrl = new URL(`https://a.com${(_a = azureUrl.getPath()) != null ? _a : \"\"}`);\n      const updatedPath = new URL(url, mockBaseUrl).pathname;\n      newUrl.searchParams.set(\"path\", updatedPath);\n      if (options.lineNumber) {\n        newUrl.searchParams.set(\"line\", String(options.lineNumber));\n        newUrl.searchParams.set(\"lineEnd\", String(options.lineNumber + 1));\n        newUrl.searchParams.set(\"lineStartColumn\", \"1\");\n        newUrl.searchParams.set(\"lineEndColumn\", \"1\");\n      }\n      return newUrl.toString();\n    } catch {\n      return new URL(url, base).toString();\n    }\n  }\n  resolveEditUrl(url) {\n    return url;\n  }\n};\nlet AzureIntegration = _AzureIntegration;\nAzureIntegration.factory = ({ config }) => {\n  var _a;\n  const configs = readAzureIntegrationConfigs((_a = config.getOptionalConfigArray(\"integrations.azure\")) != null ? _a : []);\n  return basicIntegrations(configs.map((c) => new _AzureIntegration(c)), (i) => i.config.host);\n};\n\nfunction getAzureFileFetchUrl(url) {\n  return AzureUrl.fromRepoUrl(url).toFileUrl();\n}\nfunction getAzureDownloadUrl(url) {\n  return AzureUrl.fromRepoUrl(url).toArchiveUrl();\n}\nfunction getAzureCommitsUrl(url) {\n  return AzureUrl.fromRepoUrl(url).toCommitsUrl();\n}\nfunction getAzureRequestOptions(config, additionalHeaders) {\n  const headers = additionalHeaders ? { ...additionalHeaders } : {};\n  if (config.token) {\n    const buffer = Buffer.from(`:${config.token}`, \"utf8\");\n    headers.Authorization = `Basic ${buffer.toString(\"base64\")}`;\n  }\n  return { headers };\n}\n\nconst BITBUCKET_HOST = \"bitbucket.org\";\nconst BITBUCKET_API_BASE_URL = \"https://api.bitbucket.org/2.0\";\nfunction readBitbucketIntegrationConfig(config) {\n  var _a;\n  const host = (_a = config.getOptionalString(\"host\")) != null ? _a : BITBUCKET_HOST;\n  let apiBaseUrl = config.getOptionalString(\"apiBaseUrl\");\n  const token = config.getOptionalString(\"token\");\n  const username = config.getOptionalString(\"username\");\n  const appPassword = config.getOptionalString(\"appPassword\");\n  if (!isValidHost(host)) {\n    throw new Error(`Invalid Bitbucket integration config, '${host}' is not a valid host`);\n  }\n  if (apiBaseUrl) {\n    apiBaseUrl = trimEnd(apiBaseUrl, \"/\");\n  } else if (host === BITBUCKET_HOST) {\n    apiBaseUrl = BITBUCKET_API_BASE_URL;\n  } else {\n    apiBaseUrl = `https://${host}/rest/api/1.0`;\n  }\n  return {\n    host,\n    apiBaseUrl,\n    token,\n    username,\n    appPassword\n  };\n}\nfunction readBitbucketIntegrationConfigs(configs) {\n  const result = configs.map(readBitbucketIntegrationConfig);\n  if (!result.some((c) => c.host === BITBUCKET_HOST)) {\n    result.push({\n      host: BITBUCKET_HOST,\n      apiBaseUrl: BITBUCKET_API_BASE_URL\n    });\n  }\n  return result;\n}\n\nconst _BitbucketIntegration = class {\n  constructor(integrationConfig) {\n    this.integrationConfig = integrationConfig;\n  }\n  get type() {\n    return \"bitbucket\";\n  }\n  get title() {\n    return this.integrationConfig.host;\n  }\n  get config() {\n    return this.integrationConfig;\n  }\n  resolveUrl(options) {\n    const resolved = defaultScmResolveUrl(options);\n    if (!options.lineNumber) {\n      return resolved;\n    }\n    const url = new URL(resolved);\n    if (this.integrationConfig.host === \"bitbucket.org\") {\n      url.hash = `lines-${options.lineNumber}`;\n    } else {\n      url.hash = `${options.lineNumber}`;\n    }\n    return url.toString();\n  }\n  resolveEditUrl(url) {\n    const urlData = parseGitUrl(url);\n    const editUrl = new URL(url);\n    editUrl.searchParams.set(\"mode\", \"edit\");\n    editUrl.searchParams.set(\"spa\", \"0\");\n    editUrl.searchParams.set(\"at\", urlData.ref);\n    return editUrl.toString();\n  }\n};\nlet BitbucketIntegration = _BitbucketIntegration;\nBitbucketIntegration.factory = ({\n  config\n}) => {\n  var _a;\n  const configs = readBitbucketIntegrationConfigs((_a = config.getOptionalConfigArray(\"integrations.bitbucket\")) != null ? _a : []);\n  return basicIntegrations(configs.map((c) => new _BitbucketIntegration(c)), (i) => i.config.host);\n};\n\nasync function getBitbucketDefaultBranch(url, config) {\n  const { name: repoName, owner: project, resource } = parseGitUrl(url);\n  const isHosted = resource === \"bitbucket.org\";\n  let branchUrl = isHosted ? `${config.apiBaseUrl}/repositories/${project}/${repoName}` : `${config.apiBaseUrl}/projects/${project}/repos/${repoName}/default-branch`;\n  let response = await fetch(branchUrl, getBitbucketRequestOptions(config));\n  if (response.status === 404 && !isHosted) {\n    branchUrl = `${config.apiBaseUrl}/projects/${project}/repos/${repoName}/branches/default`;\n    response = await fetch(branchUrl, getBitbucketRequestOptions(config));\n  }\n  if (!response.ok) {\n    const message = `Failed to retrieve default branch from ${branchUrl}, ${response.status} ${response.statusText}`;\n    throw new Error(message);\n  }\n  let defaultBranch;\n  if (isHosted) {\n    const repoInfo = await response.json();\n    defaultBranch = repoInfo.mainbranch.name;\n  } else {\n    const { displayId } = await response.json();\n    defaultBranch = displayId;\n  }\n  if (!defaultBranch) {\n    throw new Error(`Failed to read default branch from ${branchUrl}. Response ${response.status} ${response.json()}`);\n  }\n  return defaultBranch;\n}\nasync function getBitbucketDownloadUrl(url, config) {\n  const {\n    name: repoName,\n    owner: project,\n    ref,\n    protocol,\n    resource,\n    filepath\n  } = parseGitUrl(url);\n  const isHosted = resource === \"bitbucket.org\";\n  let branch = ref;\n  if (!branch) {\n    branch = await getBitbucketDefaultBranch(url, config);\n  }\n  const path = filepath ? `&path=${encodeURIComponent(filepath)}` : \"\";\n  const archiveUrl = isHosted ? `${protocol}://${resource}/${project}/${repoName}/get/${branch}.tar.gz` : `${config.apiBaseUrl}/projects/${project}/repos/${repoName}/archive?format=tgz&at=${branch}&prefix=${project}-${repoName}${path}`;\n  return archiveUrl;\n}\nfunction getBitbucketFileFetchUrl(url, config) {\n  try {\n    const { owner, name, ref, filepathtype, filepath } = parseGitUrl(url);\n    if (!owner || !name || filepathtype !== \"browse\" && filepathtype !== \"raw\" && filepathtype !== \"src\") {\n      throw new Error(\"Invalid Bitbucket URL or file path\");\n    }\n    const pathWithoutSlash = filepath.replace(/^\\//, \"\");\n    if (config.host === \"bitbucket.org\") {\n      if (!ref) {\n        throw new Error(\"Invalid Bitbucket URL or file path\");\n      }\n      return `${config.apiBaseUrl}/repositories/${owner}/${name}/src/${ref}/${pathWithoutSlash}`;\n    }\n    return `${config.apiBaseUrl}/projects/${owner}/repos/${name}/raw/${pathWithoutSlash}?at=${ref}`;\n  } catch (e) {\n    throw new Error(`Incorrect URL: ${url}, ${e}`);\n  }\n}\nfunction getBitbucketRequestOptions(config) {\n  const headers = {};\n  if (config.token) {\n    headers.Authorization = `Bearer ${config.token}`;\n  } else if (config.username && config.appPassword) {\n    const buffer = Buffer.from(`${config.username}:${config.appPassword}`, \"utf8\");\n    headers.Authorization = `Basic ${buffer.toString(\"base64\")}`;\n  }\n  return {\n    headers\n  };\n}\n\nfunction readGerritIntegrationConfig(config) {\n  const host = config.getString(\"host\");\n  let baseUrl = config.getOptionalString(\"baseUrl\");\n  let gitilesBaseUrl = config.getOptionalString(\"gitilesBaseUrl\");\n  const username = config.getOptionalString(\"username\");\n  const password = config.getOptionalString(\"password\");\n  if (!isValidHost(host)) {\n    throw new Error(`Invalid Gerrit integration config, '${host}' is not a valid host`);\n  } else if (baseUrl && !isValidUrl(baseUrl)) {\n    throw new Error(`Invalid Gerrit integration config, '${baseUrl}' is not a valid baseUrl`);\n  } else if (gitilesBaseUrl && !isValidUrl(gitilesBaseUrl)) {\n    throw new Error(`Invalid Gerrit integration config, '${gitilesBaseUrl}' is not a valid gitilesBaseUrl`);\n  }\n  if (baseUrl) {\n    baseUrl = trimEnd(baseUrl, \"/\");\n  } else {\n    baseUrl = `https://${host}`;\n  }\n  if (gitilesBaseUrl) {\n    gitilesBaseUrl = trimEnd(gitilesBaseUrl, \"/\");\n  } else {\n    gitilesBaseUrl = `https://${host}`;\n  }\n  return {\n    host,\n    baseUrl,\n    gitilesBaseUrl,\n    username,\n    password\n  };\n}\nfunction readGerritIntegrationConfigs(configs) {\n  return configs.map(readGerritIntegrationConfig);\n}\n\nconst _GerritIntegration = class {\n  constructor(integrationConfig) {\n    this.integrationConfig = integrationConfig;\n  }\n  get type() {\n    return \"gerrit\";\n  }\n  get title() {\n    return this.integrationConfig.host;\n  }\n  get config() {\n    return this.integrationConfig;\n  }\n  resolveUrl(options) {\n    const { url, base, lineNumber } = options;\n    let updated;\n    if (url) {\n      updated = new URL(url, base);\n    } else {\n      updated = new URL(base);\n    }\n    if (lineNumber) {\n      updated.hash = lineNumber.toString();\n    }\n    return updated.toString();\n  }\n  resolveEditUrl(url) {\n    return url;\n  }\n};\nlet GerritIntegration = _GerritIntegration;\nGerritIntegration.factory = ({ config }) => {\n  var _a;\n  const configs = readGerritIntegrationConfigs((_a = config.getOptionalConfigArray(\"integrations.gerrit\")) != null ? _a : []);\n  return basicIntegrations(configs.map((c) => new _GerritIntegration(c)), (i) => i.config.host);\n};\n\nconst GERRIT_BODY_PREFIX = \")]}'\";\nfunction parseGitilesUrl(config, url) {\n  const urlPath = url.replace(config.gitilesBaseUrl, \"\");\n  const parts = urlPath.split(\"/\").filter((p) => !!p);\n  const projectEndIndex = parts.indexOf(\"+\");\n  if (projectEndIndex <= 0) {\n    throw new Error(`Unable to parse project from url: ${url}`);\n  }\n  const project = trimStart(parts.slice(0, projectEndIndex).join(\"/\"), \"/\");\n  const branchIndex = parts.indexOf(\"heads\");\n  if (branchIndex <= 0) {\n    throw new Error(`Unable to parse branch from url: ${url}`);\n  }\n  const branch = parts[branchIndex + 1];\n  const filePath = parts.slice(branchIndex + 2).join(\"/\");\n  return {\n    branch,\n    filePath: filePath === \"\" ? \"/\" : filePath,\n    project\n  };\n}\nfunction getAuthenticationPrefix(config) {\n  return config.password ? \"/a/\" : \"/\";\n}\nfunction getGerritFileContentsApiUrl(config, url) {\n  const { branch, filePath, project } = parseGitilesUrl(config, url);\n  return `${config.baseUrl}${getAuthenticationPrefix(config)}projects/${encodeURIComponent(project)}/branches/${branch}/files/${encodeURIComponent(filePath)}/content`;\n}\nfunction getGerritRequestOptions(config) {\n  const headers = {};\n  if (!config.password) {\n    return headers;\n  }\n  const buffer = Buffer.from(`${config.username}:${config.password}`, \"utf8\");\n  headers.Authorization = `Basic ${buffer.toString(\"base64\")}`;\n  return {\n    headers\n  };\n}\nasync function parseGerritJsonResponse(response) {\n  const responseBody = await response.text();\n  if (responseBody.startsWith(GERRIT_BODY_PREFIX)) {\n    try {\n      return JSON.parse(responseBody.slice(GERRIT_BODY_PREFIX.length));\n    } catch (ex) {\n      throw new Error(`Invalid response from Gerrit: ${responseBody.slice(0, 10)} - ${ex}`);\n    }\n  }\n  throw new Error(`Gerrit JSON body prefix missing. Found: ${responseBody.slice(0, 10)}`);\n}\n\nconst GITHUB_HOST = \"github.com\";\nconst GITHUB_API_BASE_URL = \"https://api.github.com\";\nconst GITHUB_RAW_BASE_URL = \"https://raw.githubusercontent.com\";\nfunction readGitHubIntegrationConfig(config) {\n  var _a, _b;\n  const host = (_a = config.getOptionalString(\"host\")) != null ? _a : GITHUB_HOST;\n  let apiBaseUrl = config.getOptionalString(\"apiBaseUrl\");\n  let rawBaseUrl = config.getOptionalString(\"rawBaseUrl\");\n  const token = config.getOptionalString(\"token\");\n  const apps = (_b = config.getOptionalConfigArray(\"apps\")) == null ? void 0 : _b.map((c) => ({\n    appId: c.getNumber(\"appId\"),\n    clientId: c.getString(\"clientId\"),\n    clientSecret: c.getString(\"clientSecret\"),\n    webhookSecret: c.getString(\"webhookSecret\"),\n    privateKey: c.getString(\"privateKey\"),\n    allowedInstallationOwners: c.getOptionalStringArray(\"allowedInstallationOwners\")\n  }));\n  if (!isValidHost(host)) {\n    throw new Error(`Invalid GitHub integration config, '${host}' is not a valid host`);\n  }\n  if (apiBaseUrl) {\n    apiBaseUrl = trimEnd(apiBaseUrl, \"/\");\n  } else if (host === GITHUB_HOST) {\n    apiBaseUrl = GITHUB_API_BASE_URL;\n  }\n  if (rawBaseUrl) {\n    rawBaseUrl = trimEnd(rawBaseUrl, \"/\");\n  } else if (host === GITHUB_HOST) {\n    rawBaseUrl = GITHUB_RAW_BASE_URL;\n  }\n  return { host, apiBaseUrl, rawBaseUrl, token, apps };\n}\nfunction readGitHubIntegrationConfigs(configs) {\n  const result = configs.map(readGitHubIntegrationConfig);\n  if (!result.some((c) => c.host === GITHUB_HOST)) {\n    result.push({\n      host: GITHUB_HOST,\n      apiBaseUrl: GITHUB_API_BASE_URL,\n      rawBaseUrl: GITHUB_RAW_BASE_URL\n    });\n  }\n  return result;\n}\n\nfunction getGitHubFileFetchUrl(url, config, credentials) {\n  try {\n    const { owner, name, ref, filepathtype, filepath } = parseGitUrl(url);\n    if (!owner || !name || !ref || filepathtype !== \"blob\" && filepathtype !== \"raw\" && filepathtype !== \"tree\") {\n      throw new Error(\"Invalid GitHub URL or file path\");\n    }\n    const pathWithoutSlash = filepath.replace(/^\\//, \"\");\n    if (chooseEndpoint(config, credentials) === \"api\") {\n      return `${config.apiBaseUrl}/repos/${owner}/${name}/contents/${pathWithoutSlash}?ref=${ref}`;\n    }\n    return `${config.rawBaseUrl}/${owner}/${name}/${ref}/${pathWithoutSlash}`;\n  } catch (e) {\n    throw new Error(`Incorrect URL: ${url}, ${e}`);\n  }\n}\nfunction getGitHubRequestOptions(config, credentials) {\n  const headers = {};\n  if (chooseEndpoint(config, credentials) === \"api\") {\n    headers.Accept = \"application/vnd.github.v3.raw\";\n  }\n  if (credentials.token) {\n    headers.Authorization = `token ${credentials.token}`;\n  }\n  return { headers };\n}\nfunction chooseEndpoint(config, credentials) {\n  if (config.apiBaseUrl && (credentials.token || !config.rawBaseUrl)) {\n    return \"api\";\n  }\n  return \"raw\";\n}\n\nclass Cache {\n  constructor() {\n    this.tokenCache = /* @__PURE__ */ new Map();\n    this.isNotExpired = (date) => date.diff(DateTime.local(), \"minutes\").minutes > 50;\n  }\n  async getOrCreateToken(key, supplier) {\n    const item = this.tokenCache.get(key);\n    if (item && this.isNotExpired(item.expiresAt)) {\n      return { accessToken: item.token };\n    }\n    const result = await supplier();\n    this.tokenCache.set(key, result);\n    return { accessToken: result.token };\n  }\n}\nconst HEADERS = {\n  Accept: \"application/vnd.github.machine-man-preview+json\"\n};\nclass GithubAppManager {\n  constructor(config, baseUrl) {\n    this.cache = new Cache();\n    this.allowedInstallationOwners = config.allowedInstallationOwners;\n    this.baseUrl = baseUrl;\n    this.baseAuthConfig = {\n      appId: config.appId,\n      privateKey: config.privateKey.replace(/\\\\n/gm, \"\\n\")\n    };\n    this.appClient = new Octokit({\n      baseUrl,\n      headers: HEADERS,\n      authStrategy: createAppAuth,\n      auth: this.baseAuthConfig\n    });\n  }\n  async getInstallationCredentials(owner, repo) {\n    var _a;\n    const { installationId, suspended } = await this.getInstallationData(owner);\n    if (this.allowedInstallationOwners) {\n      if (!((_a = this.allowedInstallationOwners) == null ? void 0 : _a.includes(owner))) {\n        return { accessToken: void 0 };\n      }\n    }\n    if (suspended) {\n      throw new Error(`The GitHub application for ${owner} is suspended`);\n    }\n    const cacheKey = repo ? `${owner}/${repo}` : owner;\n    return this.cache.getOrCreateToken(cacheKey, async () => {\n      const result = await this.appClient.apps.createInstallationAccessToken({\n        installation_id: installationId,\n        headers: HEADERS\n      });\n      if (repo && result.data.repository_selection === \"selected\") {\n        const installationClient = new Octokit({\n          baseUrl: this.baseUrl,\n          auth: result.data.token\n        });\n        const repos = await installationClient.paginate(installationClient.apps.listReposAccessibleToInstallation);\n        const hasRepo = repos.some((repository) => {\n          return repository.name === repo;\n        });\n        if (!hasRepo) {\n          throw new Error(`The Backstage GitHub application used in the ${owner} organization does not have access to a repository with the name ${repo}`);\n        }\n      }\n      return {\n        token: result.data.token,\n        expiresAt: DateTime.fromISO(result.data.expires_at)\n      };\n    });\n  }\n  getInstallations() {\n    return this.appClient.paginate(this.appClient.apps.listInstallations);\n  }\n  async getInstallationData(owner) {\n    const allInstallations = await this.getInstallations();\n    const installation = allInstallations.find((inst) => {\n      var _a, _b;\n      return ((_b = (_a = inst.account) == null ? void 0 : _a.login) == null ? void 0 : _b.toLocaleLowerCase(\"en-US\")) === owner.toLocaleLowerCase(\"en-US\");\n    });\n    if (installation) {\n      return {\n        installationId: installation.id,\n        suspended: Boolean(installation.suspended_by)\n      };\n    }\n    const notFoundError = new Error(`No app installation found for ${owner} in ${this.baseAuthConfig.appId}`);\n    notFoundError.name = \"NotFoundError\";\n    throw notFoundError;\n  }\n}\nclass GithubAppCredentialsMux {\n  constructor(config) {\n    var _a, _b;\n    this.apps = (_b = (_a = config.apps) == null ? void 0 : _a.map((ac) => new GithubAppManager(ac, config.apiBaseUrl))) != null ? _b : [];\n  }\n  async getAllInstallations() {\n    if (!this.apps.length) {\n      return [];\n    }\n    const installs = await Promise.all(this.apps.map((app) => app.getInstallations()));\n    return installs.flat();\n  }\n  async getAppToken(owner, repo) {\n    if (this.apps.length === 0) {\n      return void 0;\n    }\n    const results = await Promise.all(this.apps.map((app) => app.getInstallationCredentials(owner, repo).then((credentials) => ({ credentials, error: void 0 }), (error) => ({ credentials: void 0, error }))));\n    const result = results.find((resultItem) => resultItem.credentials);\n    if (result) {\n      return result.credentials.accessToken;\n    }\n    const errors = results.map((r) => r.error);\n    const notNotFoundError = errors.find((err) => err.name !== \"NotFoundError\");\n    if (notNotFoundError) {\n      throw notNotFoundError;\n    }\n    return void 0;\n  }\n}\nconst _SingleInstanceGithubCredentialsProvider = class {\n  constructor(githubAppCredentialsMux, token) {\n    this.githubAppCredentialsMux = githubAppCredentialsMux;\n    this.token = token;\n  }\n  async getCredentials(opts) {\n    const parsed = parseGitUrl(opts.url);\n    const owner = parsed.owner || parsed.name;\n    const repo = parsed.owner ? parsed.name : void 0;\n    let type = \"app\";\n    let token = await this.githubAppCredentialsMux.getAppToken(owner, repo);\n    if (!token) {\n      type = \"token\";\n      token = this.token;\n    }\n    return {\n      headers: token ? { Authorization: `Bearer ${token}` } : void 0,\n      token,\n      type\n    };\n  }\n};\nlet SingleInstanceGithubCredentialsProvider = _SingleInstanceGithubCredentialsProvider;\nSingleInstanceGithubCredentialsProvider.create = (config) => {\n  return new _SingleInstanceGithubCredentialsProvider(new GithubAppCredentialsMux(config), config.token);\n};\n\nclass DefaultGithubCredentialsProvider {\n  constructor(providers) {\n    this.providers = providers;\n  }\n  static fromIntegrations(integrations) {\n    const credentialsProviders = /* @__PURE__ */ new Map();\n    integrations.github.list().forEach((integration) => {\n      const credentialsProvider = SingleInstanceGithubCredentialsProvider.create(integration.config);\n      credentialsProviders.set(integration.config.host, credentialsProvider);\n    });\n    return new DefaultGithubCredentialsProvider(credentialsProviders);\n  }\n  async getCredentials(opts) {\n    const parsed = new URL(opts.url);\n    const provider = this.providers.get(parsed.host);\n    if (!provider) {\n      throw new Error(`There is no GitHub integration that matches ${opts.url}. Please add a configuration for an integration.`);\n    }\n    return provider.getCredentials(opts);\n  }\n}\n\nconst _GitHubIntegration = class {\n  constructor(integrationConfig) {\n    this.integrationConfig = integrationConfig;\n  }\n  get type() {\n    return \"github\";\n  }\n  get title() {\n    return this.integrationConfig.host;\n  }\n  get config() {\n    return this.integrationConfig;\n  }\n  resolveUrl(options) {\n    return replaceGitHubUrlType(defaultScmResolveUrl(options), \"tree\");\n  }\n  resolveEditUrl(url) {\n    return replaceGitHubUrlType(url, \"edit\");\n  }\n};\nlet GitHubIntegration = _GitHubIntegration;\nGitHubIntegration.factory = ({ config }) => {\n  var _a;\n  const configs = readGitHubIntegrationConfigs((_a = config.getOptionalConfigArray(\"integrations.github\")) != null ? _a : []);\n  return basicIntegrations(configs.map((c) => new _GitHubIntegration(c)), (i) => i.config.host);\n};\nfunction replaceGitHubUrlType(url, type) {\n  return url.replace(/\\/\\/([^/]+)\\/([^/]+)\\/([^/]+)\\/(blob|tree|edit)\\//, (_, host, owner, repo) => {\n    return `//${host}/${owner}/${repo}/${type}/`;\n  });\n}\n\nconst GITLAB_HOST = \"gitlab.com\";\nconst GITLAB_API_BASE_URL = \"https://gitlab.com/api/v4\";\nfunction readGitLabIntegrationConfig(config) {\n  const host = config.getString(\"host\");\n  let apiBaseUrl = config.getOptionalString(\"apiBaseUrl\");\n  const token = config.getOptionalString(\"token\");\n  let baseUrl = config.getOptionalString(\"baseUrl\");\n  if (apiBaseUrl) {\n    apiBaseUrl = trimEnd(apiBaseUrl, \"/\");\n  } else if (host === GITLAB_HOST) {\n    apiBaseUrl = GITLAB_API_BASE_URL;\n  }\n  if (baseUrl) {\n    baseUrl = trimEnd(baseUrl, \"/\");\n  } else {\n    baseUrl = `https://${host}`;\n  }\n  if (!isValidHost(host)) {\n    throw new Error(`Invalid GitLab integration config, '${host}' is not a valid host`);\n  } else if (!apiBaseUrl || !isValidUrl(apiBaseUrl)) {\n    throw new Error(`Invalid GitLab integration config, '${apiBaseUrl}' is not a valid apiBaseUrl`);\n  } else if (!isValidUrl(baseUrl)) {\n    throw new Error(`Invalid GitLab integration config, '${baseUrl}' is not a valid baseUrl`);\n  }\n  return { host, token, apiBaseUrl, baseUrl };\n}\nfunction readGitLabIntegrationConfigs(configs) {\n  const result = configs.map(readGitLabIntegrationConfig);\n  if (!result.some((c) => c.host === GITLAB_HOST)) {\n    result.push({\n      host: GITLAB_HOST,\n      apiBaseUrl: GITLAB_API_BASE_URL,\n      baseUrl: `https://${GITLAB_HOST}`\n    });\n  }\n  return result;\n}\n\nasync function getGitLabFileFetchUrl(url, config) {\n  if (url.includes(\"/-/blob/\")) {\n    const projectID = await getProjectId(url, config);\n    return buildProjectUrl(url, projectID).toString();\n  }\n  return buildRawUrl(url).toString();\n}\nfunction getGitLabRequestOptions(config) {\n  const { token = \"\" } = config;\n  return {\n    headers: {\n      \"PRIVATE-TOKEN\": token\n    }\n  };\n}\nfunction buildRawUrl(target) {\n  try {\n    const url = new URL(target);\n    const [empty, userOrOrg, repoName, blobKeyword, ...restOfPath] = url.pathname.split(\"/\");\n    if (empty !== \"\" || userOrOrg === \"\" || repoName === \"\" || blobKeyword !== \"blob\" || !restOfPath.join(\"/\").match(/\\.(yaml|yml)$/)) {\n      throw new Error(\"Wrong GitLab URL\");\n    }\n    url.pathname = [empty, userOrOrg, repoName, \"raw\", ...restOfPath].join(\"/\");\n    return url;\n  } catch (e) {\n    throw new Error(`Incorrect url: ${target}, ${e}`);\n  }\n}\nfunction buildProjectUrl(target, projectID) {\n  try {\n    const url = new URL(target);\n    const branchAndFilePath = url.pathname.split(\"/-/blob/\")[1];\n    const [branch, ...filePath] = branchAndFilePath.split(\"/\");\n    url.pathname = [\n      \"/api/v4/projects\",\n      projectID,\n      \"repository/files\",\n      encodeURIComponent(decodeURIComponent(filePath.join(\"/\"))),\n      \"raw\"\n    ].join(\"/\");\n    url.search = `?ref=${branch}`;\n    return url;\n  } catch (e) {\n    throw new Error(`Incorrect url: ${target}, ${e}`);\n  }\n}\nasync function getProjectId(target, config) {\n  const url = new URL(target);\n  if (!url.pathname.includes(\"/-/blob/\")) {\n    throw new Error(\"Please provide full path to yaml file from GitLab\");\n  }\n  try {\n    const repo = url.pathname.split(\"/-/blob/\")[0];\n    const repoIDLookup = new URL(`${url.origin}/api/v4/projects/${encodeURIComponent(repo.replace(/^\\//, \"\"))}`);\n    const response = await fetch(repoIDLookup.toString(), getGitLabRequestOptions(config));\n    const data = await response.json();\n    if (!response.ok) {\n      throw new Error(`GitLab Error '${data.error}', ${data.error_description}`);\n    }\n    return Number(data.id);\n  } catch (e) {\n    throw new Error(`Could not get GitLab project ID for: ${target}, ${e}`);\n  }\n}\n\nconst _GitLabIntegration = class {\n  constructor(integrationConfig) {\n    this.integrationConfig = integrationConfig;\n  }\n  get type() {\n    return \"gitlab\";\n  }\n  get title() {\n    return this.integrationConfig.host;\n  }\n  get config() {\n    return this.integrationConfig;\n  }\n  resolveUrl(options) {\n    return defaultScmResolveUrl(options);\n  }\n  resolveEditUrl(url) {\n    return replaceGitLabUrlType(url, \"edit\");\n  }\n};\nlet GitLabIntegration = _GitLabIntegration;\nGitLabIntegration.factory = ({ config }) => {\n  var _a;\n  const configs = readGitLabIntegrationConfigs((_a = config.getOptionalConfigArray(\"integrations.gitlab\")) != null ? _a : []);\n  return basicIntegrations(configs.map((c) => new _GitLabIntegration(c)), (i) => i.config.host);\n};\nfunction replaceGitLabUrlType(url, type) {\n  return url.replace(/\\/\\-\\/(blob|tree|edit)\\//, `/-/${type}/`);\n}\n\nfunction readGoogleGcsIntegrationConfig(config) {\n  if (!config) {\n    return {};\n  }\n  if (!config.has(\"clientEmail\") && !config.has(\"privateKey\")) {\n    return {};\n  }\n  const privateKey = config.getString(\"privateKey\").split(\"\\\\n\").join(\"\\n\");\n  const clientEmail = config.getString(\"clientEmail\");\n  return { clientEmail, privateKey };\n}\n\nconst AMAZON_AWS_HOST = \"amazonaws.com\";\nfunction readAwsS3IntegrationConfig(config) {\n  var _a;\n  const endpoint = config.getOptionalString(\"endpoint\");\n  const s3ForcePathStyle = (_a = config.getOptionalBoolean(\"s3ForcePathStyle\")) != null ? _a : false;\n  let host;\n  let pathname;\n  if (endpoint) {\n    try {\n      const url = new URL(endpoint);\n      host = url.host;\n      pathname = url.pathname;\n    } catch {\n      throw new Error(`invalid awsS3 integration config, endpoint '${endpoint}' is not a valid URL`);\n    }\n    if (pathname !== \"/\") {\n      throw new Error(`invalid awsS3 integration config, endpoints cannot contain path, got '${endpoint}'`);\n    }\n  } else {\n    host = AMAZON_AWS_HOST;\n  }\n  const accessKeyId = config.getOptionalString(\"accessKeyId\");\n  const secretAccessKey = config.getOptionalString(\"secretAccessKey\");\n  const roleArn = config.getOptionalString(\"roleArn\");\n  const externalId = config.getOptionalString(\"externalId\");\n  return {\n    host,\n    endpoint,\n    s3ForcePathStyle,\n    accessKeyId,\n    secretAccessKey,\n    roleArn,\n    externalId\n  };\n}\nfunction readAwsS3IntegrationConfigs(configs) {\n  const result = configs.map(readAwsS3IntegrationConfig);\n  if (!result.some((c) => c.host === AMAZON_AWS_HOST)) {\n    result.push({\n      host: AMAZON_AWS_HOST\n    });\n  }\n  return result;\n}\n\nconst _AwsS3Integration = class {\n  constructor(integrationConfig) {\n    this.integrationConfig = integrationConfig;\n  }\n  get type() {\n    return \"awsS3\";\n  }\n  get title() {\n    return this.integrationConfig.host;\n  }\n  get config() {\n    return this.integrationConfig;\n  }\n  resolveUrl(options) {\n    const resolved = defaultScmResolveUrl(options);\n    return resolved;\n  }\n  resolveEditUrl(url) {\n    return url;\n  }\n};\nlet AwsS3Integration = _AwsS3Integration;\nAwsS3Integration.factory = ({ config }) => {\n  var _a;\n  const configs = readAwsS3IntegrationConfigs((_a = config.getOptionalConfigArray(\"integrations.awsS3\")) != null ? _a : []);\n  return basicIntegrations(configs.map((c) => new _AwsS3Integration(c)), (i) => i.config.host);\n};\n\nclass ScmIntegrations {\n  static fromConfig(config) {\n    return new ScmIntegrations({\n      awsS3: AwsS3Integration.factory({ config }),\n      azure: AzureIntegration.factory({ config }),\n      bitbucket: BitbucketIntegration.factory({ config }),\n      gerrit: GerritIntegration.factory({ config }),\n      github: GitHubIntegration.factory({ config }),\n      gitlab: GitLabIntegration.factory({ config })\n    });\n  }\n  constructor(integrationsByType) {\n    this.byType = integrationsByType;\n  }\n  get awsS3() {\n    return this.byType.awsS3;\n  }\n  get azure() {\n    return this.byType.azure;\n  }\n  get bitbucket() {\n    return this.byType.bitbucket;\n  }\n  get gerrit() {\n    return this.byType.gerrit;\n  }\n  get github() {\n    return this.byType.github;\n  }\n  get gitlab() {\n    return this.byType.gitlab;\n  }\n  list() {\n    return Object.values(this.byType).flatMap((i) => i.list());\n  }\n  byUrl(url) {\n    return Object.values(this.byType).map((i) => i.byUrl(url)).find(Boolean);\n  }\n  byHost(host) {\n    return Object.values(this.byType).map((i) => i.byHost(host)).find(Boolean);\n  }\n  resolveUrl(options) {\n    const integration = this.byUrl(options.base);\n    if (!integration) {\n      return defaultScmResolveUrl(options);\n    }\n    return integration.resolveUrl(options);\n  }\n  resolveEditUrl(url) {\n    const integration = this.byUrl(url);\n    if (!integration) {\n      return url;\n    }\n    return integration.resolveEditUrl(url);\n  }\n}\n\nexport { AwsS3Integration, AzureIntegration, BitbucketIntegration, DefaultGithubCredentialsProvider, GerritIntegration, GitHubIntegration, GitLabIntegration, GithubAppCredentialsMux, ScmIntegrations, SingleInstanceGithubCredentialsProvider, defaultScmResolveUrl, getAzureCommitsUrl, getAzureDownloadUrl, getAzureFileFetchUrl, getAzureRequestOptions, getBitbucketDefaultBranch, getBitbucketDownloadUrl, getBitbucketFileFetchUrl, getBitbucketRequestOptions, getGerritFileContentsApiUrl, getGerritRequestOptions, getGitHubFileFetchUrl, getGitHubRequestOptions, getGitLabFileFetchUrl, getGitLabRequestOptions, parseGerritJsonResponse, readAwsS3IntegrationConfig, readAwsS3IntegrationConfigs, readAzureIntegrationConfig, readAzureIntegrationConfigs, readBitbucketIntegrationConfig, readBitbucketIntegrationConfigs, readGerritIntegrationConfig, readGerritIntegrationConfigs, readGitHubIntegrationConfig, readGitHubIntegrationConfigs, readGitLabIntegrationConfig, readGitLabIntegrationConfigs, readGoogleGcsIntegrationConfig, replaceGitHubUrlType, replaceGitLabUrlType };\n//# sourceMappingURL=index.esm.js.map\n","import React, { Suspense } from 'react';\nimport { useOutlet } from 'react-router';\nimport { PageWithHeader, Content, ContentHeader, CreateButton, SupportButton, CodeSnippet, TabbedCard, CardTab, Progress, InfoCard, WarningPanel, Link } from '@backstage/core-components';\nimport { createRouteRef, createExternalRouteRef, useApi, configApiRef, useRouteRef, createApiRef, createPlugin, createApiFactory, createRoutableExtension, createComponentExtension } from '@backstage/core-plugin-api';\nimport { CatalogTable } from '@backstage/plugin-catalog';\nimport { EntityListProvider, CatalogFilterLayout, EntityKindPicker, EntityTypePicker, UserListPicker, EntityOwnerPicker, EntityLifecyclePicker, EntityTagPicker, useEntity, EntityTable, useRelatedEntities } from '@backstage/plugin-catalog-react';\nimport { Alert } from '@material-ui/lab';\nimport { useTheme } from '@material-ui/core/styles';\nimport { RELATION_CONSUMES_API, RELATION_HAS_PART, RELATION_PROVIDES_API, RELATION_API_CONSUMED_BY, RELATION_API_PROVIDED_BY } from '@backstage/catalog-model';\nimport { Typography } from '@material-ui/core';\n\nconst rootRoute = createRouteRef({\n  id: \"api-docs\"\n});\nconst registerComponentRouteRef = createExternalRouteRef({\n  id: \"register-component\",\n  optional: true\n});\n\nconst defaultColumns = [\n  CatalogTable.columns.createNameColumn({ defaultKind: \"API\" }),\n  CatalogTable.columns.createSystemColumn(),\n  CatalogTable.columns.createOwnerColumn(),\n  CatalogTable.columns.createSpecTypeColumn(),\n  CatalogTable.columns.createSpecLifecycleColumn(),\n  CatalogTable.columns.createMetadataDescriptionColumn(),\n  CatalogTable.columns.createTagsColumn()\n];\nconst DefaultApiExplorerPage = ({\n  initiallySelectedFilter = \"all\",\n  columns,\n  actions\n}) => {\n  var _a;\n  const configApi = useApi(configApiRef);\n  const generatedSubtitle = `${(_a = configApi.getOptionalString(\"organization.name\")) != null ? _a : \"Backstage\"} API Explorer`;\n  const registerComponentLink = useRouteRef(registerComponentRouteRef);\n  return /* @__PURE__ */ React.createElement(PageWithHeader, {\n    themeId: \"apis\",\n    title: \"APIs\",\n    subtitle: generatedSubtitle,\n    pageTitleOverride: \"APIs\"\n  }, /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(ContentHeader, {\n    title: \"\"\n  }, /* @__PURE__ */ React.createElement(CreateButton, {\n    title: \"Register Existing API\",\n    to: registerComponentLink == null ? void 0 : registerComponentLink()\n  }), /* @__PURE__ */ React.createElement(SupportButton, null, \"All your APIs\")), /* @__PURE__ */ React.createElement(EntityListProvider, null, /* @__PURE__ */ React.createElement(CatalogFilterLayout, null, /* @__PURE__ */ React.createElement(CatalogFilterLayout.Filters, null, /* @__PURE__ */ React.createElement(EntityKindPicker, {\n    initialFilter: \"api\",\n    hidden: true\n  }), /* @__PURE__ */ React.createElement(EntityTypePicker, null), /* @__PURE__ */ React.createElement(UserListPicker, {\n    initialFilter: initiallySelectedFilter\n  }), /* @__PURE__ */ React.createElement(EntityOwnerPicker, null), /* @__PURE__ */ React.createElement(EntityLifecyclePicker, null), /* @__PURE__ */ React.createElement(EntityTagPicker, null)), /* @__PURE__ */ React.createElement(CatalogFilterLayout.Content, null, /* @__PURE__ */ React.createElement(CatalogTable, {\n    columns: columns || defaultColumns,\n    actions\n  }))))));\n};\n\nconst ApiExplorerPage$1 = (props) => {\n  const outlet = useOutlet();\n  return outlet || /* @__PURE__ */ React.createElement(DefaultApiExplorerPage, {\n    ...props\n  });\n};\n\nconst apiDocsConfigRef = createApiRef({\n  id: \"plugin.api-docs.config\"\n});\n\nconst PlainApiDefinitionWidget = (props) => {\n  return /* @__PURE__ */ React.createElement(CodeSnippet, {\n    text: props.definition,\n    language: props.language,\n    showCopyCodeButton: true\n  });\n};\n\nconst ApiDefinitionCard = () => {\n  var _a;\n  const { entity } = useEntity();\n  const config = useApi(apiDocsConfigRef);\n  const { getApiDefinitionWidget } = config;\n  if (!entity) {\n    return /* @__PURE__ */ React.createElement(Alert, {\n      severity: \"error\"\n    }, \"Could not fetch the API\");\n  }\n  const definitionWidget = getApiDefinitionWidget(entity);\n  const entityTitle = (_a = entity.metadata.title) != null ? _a : entity.metadata.name;\n  if (definitionWidget) {\n    return /* @__PURE__ */ React.createElement(TabbedCard, {\n      title: entityTitle\n    }, /* @__PURE__ */ React.createElement(CardTab, {\n      label: definitionWidget.title,\n      key: \"widget\"\n    }, definitionWidget.component(entity.spec.definition)), /* @__PURE__ */ React.createElement(CardTab, {\n      label: \"Raw\",\n      key: \"raw\"\n    }, /* @__PURE__ */ React.createElement(PlainApiDefinitionWidget, {\n      definition: entity.spec.definition,\n      language: definitionWidget.rawLanguage || entity.spec.type\n    })));\n  }\n  return /* @__PURE__ */ React.createElement(TabbedCard, {\n    title: entityTitle,\n    children: [\n      /* @__PURE__ */ React.createElement(CardTab, {\n        label: entity.spec.type,\n        key: \"raw\"\n      }, /* @__PURE__ */ React.createElement(PlainApiDefinitionWidget, {\n        definition: entity.spec.definition,\n        language: entity.spec.type\n      }))\n    ]\n  });\n};\n\nconst LazyAsyncApiDefinition = React.lazy(() => import('./esm/AsyncApiDefinition-5fccfdab.esm.js').then((m) => ({\n  default: m.AsyncApiDefinition\n})));\nconst AsyncApiDefinitionWidget = (props) => {\n  return /* @__PURE__ */ React.createElement(Suspense, {\n    fallback: /* @__PURE__ */ React.createElement(Progress, null)\n  }, /* @__PURE__ */ React.createElement(LazyAsyncApiDefinition, {\n    ...props\n  }));\n};\n\nconst LazyGraphQlDefinition = React.lazy(() => import('./esm/GraphQlDefinition-b8afc092.esm.js').then((m) => ({\n  default: m.GraphQlDefinition\n})));\nconst GraphQlDefinitionWidget = (props) => {\n  return /* @__PURE__ */ React.createElement(Suspense, {\n    fallback: /* @__PURE__ */ React.createElement(Progress, null)\n  }, /* @__PURE__ */ React.createElement(LazyGraphQlDefinition, {\n    ...props\n  }));\n};\n\nconst LazyOpenApiDefinition = React.lazy(() => import('./esm/OpenApiDefinition-ecf6e13e.esm.js').then((m) => ({\n  default: m.OpenApiDefinition\n})));\nconst OpenApiDefinitionWidget = (props) => {\n  return /* @__PURE__ */ React.createElement(Suspense, {\n    fallback: /* @__PURE__ */ React.createElement(Progress, null)\n  }, /* @__PURE__ */ React.createElement(LazyOpenApiDefinition, {\n    ...props\n  }));\n};\n\nconst GrpcApiDefinitionWidget = (props) => {\n  const theme = useTheme();\n  return /* @__PURE__ */ React.createElement(CodeSnippet, {\n    customStyle: { backgroundColor: theme.palette.background.default },\n    text: props.definition,\n    language: \"protobuf\",\n    showCopyCodeButton: true\n  });\n};\n\nfunction defaultDefinitionWidgets() {\n  return [\n    {\n      type: \"openapi\",\n      title: \"OpenAPI\",\n      rawLanguage: \"yaml\",\n      component: (definition) => /* @__PURE__ */ React.createElement(OpenApiDefinitionWidget, {\n        definition\n      })\n    },\n    {\n      type: \"asyncapi\",\n      title: \"AsyncAPI\",\n      rawLanguage: \"yaml\",\n      component: (definition) => /* @__PURE__ */ React.createElement(AsyncApiDefinitionWidget, {\n        definition\n      })\n    },\n    {\n      type: \"graphql\",\n      title: \"GraphQL\",\n      rawLanguage: \"graphql\",\n      component: (definition) => /* @__PURE__ */ React.createElement(GraphQlDefinitionWidget, {\n        definition\n      })\n    },\n    {\n      type: \"grpc\",\n      title: \"gRPC\",\n      component: (definition) => /* @__PURE__ */ React.createElement(GrpcApiDefinitionWidget, {\n        definition\n      })\n    }\n  ];\n}\n\nconst ApiTypeTitle = ({ apiEntity }) => {\n  const config = useApi(apiDocsConfigRef);\n  const definition = config.getApiDefinitionWidget(apiEntity);\n  const type = definition ? definition.title : apiEntity.spec.type;\n  return /* @__PURE__ */ React.createElement(\"span\", null, type);\n};\n\nfunction createSpecApiTypeColumn() {\n  return {\n    title: \"Type\",\n    field: \"spec.type\",\n    render: (entity) => /* @__PURE__ */ React.createElement(ApiTypeTitle, {\n      apiEntity: entity\n    })\n  };\n}\nconst apiEntityColumns = [\n  EntityTable.columns.createEntityRefColumn({ defaultKind: \"API\" }),\n  EntityTable.columns.createSystemColumn(),\n  EntityTable.columns.createOwnerColumn(),\n  createSpecApiTypeColumn(),\n  EntityTable.columns.createSpecLifecycleColumn(),\n  EntityTable.columns.createMetadataDescriptionColumn()\n];\n\nconst ConsumedApisCard = ({ variant = \"gridItem\" }) => {\n  const { entity } = useEntity();\n  const { entities, loading, error } = useRelatedEntities(entity, {\n    type: RELATION_CONSUMES_API\n  });\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(InfoCard, {\n      variant,\n      title: \"Consumed APIs\"\n    }, /* @__PURE__ */ React.createElement(Progress, null));\n  }\n  if (error || !entities) {\n    return /* @__PURE__ */ React.createElement(InfoCard, {\n      variant,\n      title: \"Consumed APIs\"\n    }, /* @__PURE__ */ React.createElement(WarningPanel, {\n      severity: \"error\",\n      title: \"Could not load APIs\",\n      message: /* @__PURE__ */ React.createElement(CodeSnippet, {\n        text: `${error}`,\n        language: \"text\"\n      })\n    }));\n  }\n  return /* @__PURE__ */ React.createElement(EntityTable, {\n    title: \"Consumed APIs\",\n    variant,\n    emptyContent: /* @__PURE__ */ React.createElement(\"div\", {\n      style: { textAlign: \"center\" }\n    }, /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"body1\"\n    }, \"This \", entity.kind.toLocaleLowerCase(\"en-US\"), \" does not consume any APIs.\"), /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"body2\"\n    }, /* @__PURE__ */ React.createElement(Link, {\n      to: \"https://backstage.io/docs/features/software-catalog/descriptor-format#specconsumesapis-optional\"\n    }, \"Learn how to change this.\"))),\n    columns: apiEntityColumns,\n    entities\n  });\n};\n\nconst columns = [\n  EntityTable.columns.createEntityRefColumn({ defaultKind: \"API\" }),\n  EntityTable.columns.createOwnerColumn(),\n  createSpecApiTypeColumn(),\n  EntityTable.columns.createSpecLifecycleColumn(),\n  EntityTable.columns.createMetadataDescriptionColumn()\n];\nconst HasApisCard = ({ variant = \"gridItem\" }) => {\n  const { entity } = useEntity();\n  const { entities, loading, error } = useRelatedEntities(entity, {\n    type: RELATION_HAS_PART,\n    kind: \"API\"\n  });\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(InfoCard, {\n      variant,\n      title: \"APIs\"\n    }, /* @__PURE__ */ React.createElement(Progress, null));\n  }\n  if (error || !entities) {\n    return /* @__PURE__ */ React.createElement(InfoCard, {\n      variant,\n      title: \"APIs\"\n    }, /* @__PURE__ */ React.createElement(WarningPanel, {\n      severity: \"error\",\n      title: \"Could not load APIs\",\n      message: /* @__PURE__ */ React.createElement(CodeSnippet, {\n        text: `${error}`,\n        language: \"text\"\n      })\n    }));\n  }\n  return /* @__PURE__ */ React.createElement(EntityTable, {\n    title: \"APIs\",\n    variant,\n    emptyContent: /* @__PURE__ */ React.createElement(\"div\", {\n      style: { textAlign: \"center\" }\n    }, /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"body1\"\n    }, \"This \", entity.kind.toLocaleLowerCase(\"en-US\"), \" does not contain any APIs.\"), /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"body2\"\n    }, /* @__PURE__ */ React.createElement(Link, {\n      to: \"https://backstage.io/docs/features/software-catalog/descriptor-format#kind-api\"\n    }, \"Learn how to change this.\"))),\n    columns,\n    entities\n  });\n};\n\nconst ProvidedApisCard = ({ variant = \"gridItem\" }) => {\n  const { entity } = useEntity();\n  const { entities, loading, error } = useRelatedEntities(entity, {\n    type: RELATION_PROVIDES_API\n  });\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(InfoCard, {\n      variant,\n      title: \"Provided APIs\"\n    }, /* @__PURE__ */ React.createElement(Progress, null));\n  }\n  if (error || !entities) {\n    return /* @__PURE__ */ React.createElement(InfoCard, {\n      variant,\n      title: \"Provided APIs\"\n    }, /* @__PURE__ */ React.createElement(WarningPanel, {\n      severity: \"error\",\n      title: \"Could not load APIs\",\n      message: /* @__PURE__ */ React.createElement(CodeSnippet, {\n        text: `${error}`,\n        language: \"text\"\n      })\n    }));\n  }\n  return /* @__PURE__ */ React.createElement(EntityTable, {\n    title: \"Provided APIs\",\n    variant,\n    emptyContent: /* @__PURE__ */ React.createElement(\"div\", {\n      style: { textAlign: \"center\" }\n    }, /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"body1\"\n    }, \"This \", entity.kind.toLocaleLowerCase(\"en-US\"), \" does not provide any APIs.\"), /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"body2\"\n    }, /* @__PURE__ */ React.createElement(Link, {\n      to: \"https://backstage.io/docs/features/software-catalog/descriptor-format#specprovidesapis-optional\"\n    }, \"Learn how to change this.\"))),\n    columns: apiEntityColumns,\n    entities\n  });\n};\n\nconst ConsumingComponentsCard = ({ variant = \"gridItem\" }) => {\n  const { entity } = useEntity();\n  const { entities, loading, error } = useRelatedEntities(entity, {\n    type: RELATION_API_CONSUMED_BY\n  });\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(InfoCard, {\n      variant,\n      title: \"Consumers\"\n    }, /* @__PURE__ */ React.createElement(Progress, null));\n  }\n  if (error || !entities) {\n    return /* @__PURE__ */ React.createElement(InfoCard, {\n      variant,\n      title: \"Consumers\"\n    }, /* @__PURE__ */ React.createElement(WarningPanel, {\n      severity: \"error\",\n      title: \"Could not load components\",\n      message: /* @__PURE__ */ React.createElement(CodeSnippet, {\n        text: `${error}`,\n        language: \"text\"\n      })\n    }));\n  }\n  return /* @__PURE__ */ React.createElement(EntityTable, {\n    title: \"Consumers\",\n    variant,\n    emptyContent: /* @__PURE__ */ React.createElement(\"div\", {\n      style: { textAlign: \"center\" }\n    }, /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"body1\"\n    }, \"No component consumes this API.\"), /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"body2\"\n    }, /* @__PURE__ */ React.createElement(Link, {\n      to: \"https://backstage.io/docs/features/software-catalog/descriptor-format#specconsumesapis-optional\"\n    }, \"Learn how to change this.\"))),\n    columns: EntityTable.componentEntityColumns,\n    entities\n  });\n};\n\nconst ProvidingComponentsCard = ({ variant = \"gridItem\" }) => {\n  const { entity } = useEntity();\n  const { entities, loading, error } = useRelatedEntities(entity, {\n    type: RELATION_API_PROVIDED_BY\n  });\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(InfoCard, {\n      variant,\n      title: \"Providers\"\n    }, /* @__PURE__ */ React.createElement(Progress, null));\n  }\n  if (error || !entities) {\n    return /* @__PURE__ */ React.createElement(InfoCard, {\n      variant,\n      title: \"Providers\"\n    }, /* @__PURE__ */ React.createElement(WarningPanel, {\n      severity: \"error\",\n      title: \"Could not load components\",\n      message: /* @__PURE__ */ React.createElement(CodeSnippet, {\n        text: `${error}`,\n        language: \"text\"\n      })\n    }));\n  }\n  return /* @__PURE__ */ React.createElement(EntityTable, {\n    title: \"Providers\",\n    variant,\n    emptyContent: /* @__PURE__ */ React.createElement(\"div\", {\n      style: { textAlign: \"center\" }\n    }, /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"body1\"\n    }, \"No component provides this API.\"), /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"body2\"\n    }, /* @__PURE__ */ React.createElement(Link, {\n      to: \"https://backstage.io/docs/features/software-catalog/descriptor-format#specprovidesapis-optional\"\n    }, \"Learn how to change this.\"))),\n    columns: EntityTable.componentEntityColumns,\n    entities\n  });\n};\n\nconst apiDocsPlugin = createPlugin({\n  id: \"api-docs\",\n  routes: {\n    root: rootRoute\n  },\n  apis: [\n    createApiFactory({\n      api: apiDocsConfigRef,\n      deps: {},\n      factory: () => {\n        const definitionWidgets = defaultDefinitionWidgets();\n        return {\n          getApiDefinitionWidget: (apiEntity) => {\n            return definitionWidgets.find((d) => d.type === apiEntity.spec.type);\n          }\n        };\n      }\n    })\n  ],\n  externalRoutes: {\n    registerApi: registerComponentRouteRef\n  }\n});\nconst ApiExplorerPage = apiDocsPlugin.provide(createRoutableExtension({\n  name: \"ApiExplorerPage\",\n  component: () => import('./esm/index-7c423741.esm.js').then((m) => m.ApiExplorerIndexPage),\n  mountPoint: rootRoute\n}));\nconst EntityApiDefinitionCard = apiDocsPlugin.provide(createComponentExtension({\n  name: \"EntityApiDefinitionCard\",\n  component: {\n    lazy: () => import('./esm/index-826e8d9c.esm.js').then((m) => m.ApiDefinitionCard)\n  }\n}));\nconst EntityConsumedApisCard = apiDocsPlugin.provide(createComponentExtension({\n  name: \"EntityConsumedApisCard\",\n  component: {\n    lazy: () => import('./esm/index-3fc3ad48.esm.js').then((m) => m.ConsumedApisCard)\n  }\n}));\nconst EntityConsumingComponentsCard = apiDocsPlugin.provide(createComponentExtension({\n  name: \"EntityConsumingComponentsCard\",\n  component: {\n    lazy: () => import('./esm/index-ba75d62f.esm.js').then((m) => m.ConsumingComponentsCard)\n  }\n}));\nconst EntityProvidedApisCard = apiDocsPlugin.provide(createComponentExtension({\n  name: \"EntityProvidedApisCard\",\n  component: {\n    lazy: () => import('./esm/index-3fc3ad48.esm.js').then((m) => m.ProvidedApisCard)\n  }\n}));\nconst EntityProvidingComponentsCard = apiDocsPlugin.provide(createComponentExtension({\n  name: \"EntityProvidingComponentsCard\",\n  component: {\n    lazy: () => import('./esm/index-ba75d62f.esm.js').then((m) => m.ProvidingComponentsCard)\n  }\n}));\nconst EntityHasApisCard = apiDocsPlugin.provide(createComponentExtension({\n  name: \"EntityHasApisCard\",\n  component: {\n    lazy: () => import('./esm/index-3fc3ad48.esm.js').then((m) => m.HasApisCard)\n  }\n}));\n\nexport { ApiDefinitionCard, ApiExplorerPage$1 as ApiExplorerIndexPage, ApiExplorerPage, ApiTypeTitle, AsyncApiDefinitionWidget, ConsumedApisCard, ConsumingComponentsCard, DefaultApiExplorerPage, EntityApiDefinitionCard, EntityConsumedApisCard, EntityConsumingComponentsCard, EntityHasApisCard, EntityProvidedApisCard, EntityProvidingComponentsCard, GraphQlDefinitionWidget, HasApisCard, OpenApiDefinitionWidget, PlainApiDefinitionWidget, ProvidedApisCard, ProvidingComponentsCard, apiDocsConfigRef, apiDocsPlugin, defaultDefinitionWidgets, apiDocsPlugin as plugin };\n//# sourceMappingURL=index.esm.js.map\n","import { createPermission } from '@backstage/plugin-permission-common';\n\nconst RESOURCE_TYPE_CATALOG_ENTITY = \"catalog-entity\";\nconst catalogEntityReadPermission = createPermission({\n  name: \"catalog.entity.read\",\n  attributes: {\n    action: \"read\"\n  },\n  resourceType: RESOURCE_TYPE_CATALOG_ENTITY\n});\nconst catalogEntityCreatePermission = createPermission({\n  name: \"catalog.entity.create\",\n  attributes: {\n    action: \"create\"\n  }\n});\nconst catalogEntityDeletePermission = createPermission({\n  name: \"catalog.entity.delete\",\n  attributes: {\n    action: \"delete\"\n  },\n  resourceType: RESOURCE_TYPE_CATALOG_ENTITY\n});\nconst catalogEntityRefreshPermission = createPermission({\n  name: \"catalog.entity.refresh\",\n  attributes: {\n    action: \"update\"\n  },\n  resourceType: RESOURCE_TYPE_CATALOG_ENTITY\n});\nconst catalogLocationReadPermission = createPermission({\n  name: \"catalog.location.read\",\n  attributes: {\n    action: \"read\"\n  }\n});\nconst catalogLocationCreatePermission = createPermission({\n  name: \"catalog.location.create\",\n  attributes: {\n    action: \"create\"\n  }\n});\nconst catalogLocationDeletePermission = createPermission({\n  name: \"catalog.location.delete\",\n  attributes: {\n    action: \"delete\"\n  }\n});\n\nexport { RESOURCE_TYPE_CATALOG_ENTITY, catalogEntityCreatePermission, catalogEntityDeletePermission, catalogEntityReadPermission, catalogEntityRefreshPermission, catalogLocationCreatePermission, catalogLocationDeletePermission, catalogLocationReadPermission };\n//# sourceMappingURL=index.esm.js.map\n","import { RELATION_OWNER_OF, RELATION_OWNED_BY, RELATION_CONSUMES_API, RELATION_API_CONSUMED_BY, RELATION_API_PROVIDED_BY, RELATION_PROVIDES_API, RELATION_HAS_PART, RELATION_PART_OF, RELATION_PARENT_OF, RELATION_CHILD_OF, RELATION_HAS_MEMBER, RELATION_MEMBER_OF, RELATION_DEPENDS_ON, RELATION_DEPENDENCY_OF, DEFAULT_NAMESPACE, stringifyEntityRef } from '@backstage/catalog-model';\nimport { DependencyGraph, DependencyGraphTypes } from '@backstage/core-components';\nimport { useApp, useApi, errorApiRef, createRouteRef, createExternalRouteRef, createPlugin, createComponentExtension, createRoutableExtension } from '@backstage/core-plugin-api';\nimport { makeStyles as makeStyles$2, useTheme, CircularProgress } from '@material-ui/core';\nimport classNames from 'classnames';\nimport React, { useState, useRef, useLayoutEffect, useCallback, useEffect, useMemo } from 'react';\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport { humanizeEntityRef, catalogApiRef } from '@backstage/plugin-catalog-react';\nimport { makeStyles as makeStyles$1 } from '@material-ui/core/styles';\nimport WorkIcon from '@material-ui/icons/Work';\nimport useDebounce from 'react-use/lib/useDebounce';\nimport limiterFactory from 'p-limit';\nimport useAsyncFn from 'react-use/lib/useAsyncFn';\n\nconst useStyles$2 = makeStyles((theme) => ({\n  text: {\n    fill: theme.palette.textContrast\n  },\n  secondary: {\n    fill: theme.palette.textSubtle\n  }\n}));\nfunction CustomLabel({\n  edge: { relations }\n}) {\n  const classes = useStyles$2();\n  return /* @__PURE__ */ React.createElement(\"text\", {\n    className: classes.text,\n    textAnchor: \"middle\"\n  }, relations.map((r, i) => /* @__PURE__ */ React.createElement(\"tspan\", {\n    key: r,\n    className: classNames(i > 0 && classes.secondary)\n  }, i > 0 && /* @__PURE__ */ React.createElement(\"tspan\", null, \" / \"), r)));\n}\n\nfunction EntityKindIcon({\n  kind,\n  ...props\n}) {\n  var _a;\n  const app = useApp();\n  const Icon = (_a = app.getSystemIcon(`kind:${kind.toLocaleLowerCase(\"en-US\")}`)) != null ? _a : WorkIcon;\n  return /* @__PURE__ */ React.createElement(Icon, {\n    ...props\n  });\n}\n\nconst useStyles$1 = makeStyles$1((theme) => ({\n  node: {\n    fill: theme.palette.grey[300],\n    stroke: theme.palette.grey[300],\n    \"&.primary\": {\n      fill: theme.palette.primary.light,\n      stroke: theme.palette.primary.light\n    },\n    \"&.secondary\": {\n      fill: theme.palette.secondary.light,\n      stroke: theme.palette.secondary.light\n    }\n  },\n  text: {\n    fill: theme.palette.getContrastText(theme.palette.grey[300]),\n    \"&.primary\": {\n      fill: theme.palette.primary.contrastText\n    },\n    \"&.secondary\": {\n      fill: theme.palette.secondary.contrastText\n    },\n    \"&.focused\": {\n      fontWeight: \"bold\"\n    }\n  },\n  clickable: {\n    cursor: \"pointer\"\n  }\n}));\nfunction CustomNode({\n  node: {\n    id,\n    kind,\n    namespace,\n    name,\n    color = \"default\",\n    focused,\n    title,\n    onClick\n  }\n}) {\n  const classes = useStyles$1();\n  const [width, setWidth] = useState(0);\n  const [height, setHeight] = useState(0);\n  const idRef = useRef(null);\n  useLayoutEffect(() => {\n    if (idRef.current) {\n      let { height: renderedHeight, width: renderedWidth } = idRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setWidth(renderedWidth);\n        setHeight(renderedHeight);\n      }\n    }\n  }, [width, height]);\n  const padding = 10;\n  const iconSize = height;\n  const paddedIconWidth = kind ? iconSize + padding : 0;\n  const paddedWidth = paddedIconWidth + width + padding * 2;\n  const paddedHeight = height + padding * 2;\n  const displayTitle = title != null ? title : kind && name && namespace ? humanizeEntityRef({ kind, name, namespace }) : id;\n  return /* @__PURE__ */ React.createElement(\"g\", {\n    onClick,\n    className: classNames(onClick && classes.clickable)\n  }, /* @__PURE__ */ React.createElement(\"rect\", {\n    className: classNames(classes.node, color === \"primary\" && \"primary\", color === \"secondary\" && \"secondary\"),\n    width: paddedWidth,\n    height: paddedHeight,\n    rx: 10\n  }), kind && /* @__PURE__ */ React.createElement(EntityKindIcon, {\n    kind,\n    y: padding,\n    x: padding,\n    width: iconSize,\n    height: iconSize,\n    className: classNames(classes.text, focused && \"focused\", color === \"primary\" && \"primary\", color === \"secondary\" && \"secondary\")\n  }), /* @__PURE__ */ React.createElement(\"text\", {\n    ref: idRef,\n    className: classNames(classes.text, focused && \"focused\", color === \"primary\" && \"primary\", color === \"secondary\" && \"secondary\"),\n    y: paddedHeight / 2,\n    x: paddedIconWidth + (width + padding * 2) / 2,\n    textAnchor: \"middle\",\n    alignmentBaseline: \"middle\"\n  }, displayTitle));\n}\n\nconst ALL_RELATION_PAIRS = [\n  [RELATION_OWNER_OF, RELATION_OWNED_BY],\n  [RELATION_CONSUMES_API, RELATION_API_CONSUMED_BY],\n  [RELATION_API_PROVIDED_BY, RELATION_PROVIDES_API],\n  [RELATION_HAS_PART, RELATION_PART_OF],\n  [RELATION_PARENT_OF, RELATION_CHILD_OF],\n  [RELATION_HAS_MEMBER, RELATION_MEMBER_OF],\n  [RELATION_DEPENDS_ON, RELATION_DEPENDENCY_OF]\n];\n\nvar Direction = /* @__PURE__ */ ((Direction2) => {\n  Direction2[\"TOP_BOTTOM\"] = \"TB\";\n  Direction2[\"BOTTOM_TOP\"] = \"BT\";\n  Direction2[\"LEFT_RIGHT\"] = \"LR\";\n  Direction2[\"RIGHT_LEFT\"] = \"RL\";\n  return Direction2;\n})(Direction || {});\n\nconst limiter = limiterFactory(10);\nfunction useEntityStore() {\n  const catalogClient = useApi(catalogApiRef);\n  const state = useRef({\n    requestedEntities: /* @__PURE__ */ new Set(),\n    outstandingEntities: /* @__PURE__ */ new Map(),\n    cachedEntities: /* @__PURE__ */ new Map()\n  });\n  const [entities, setEntities] = useState({});\n  const updateEntities = useCallback(() => {\n    const { cachedEntities, requestedEntities } = state.current;\n    const filteredEntities = {};\n    requestedEntities.forEach((entityRef) => {\n      const entity = cachedEntities.get(entityRef);\n      if (entity) {\n        filteredEntities[entityRef] = entity;\n      }\n    });\n    setEntities(filteredEntities);\n  }, [state, setEntities]);\n  const [asyncState, fetch] = useAsyncFn(async () => {\n    const { requestedEntities, outstandingEntities, cachedEntities } = state.current;\n    await Promise.all(Array.from(requestedEntities).map((entityRef) => limiter(async () => {\n      if (cachedEntities.has(entityRef)) {\n        return;\n      }\n      if (outstandingEntities.has(entityRef)) {\n        await outstandingEntities.get(entityRef);\n        return;\n      }\n      const promise = catalogClient.getEntityByRef(entityRef);\n      outstandingEntities.set(entityRef, promise);\n      try {\n        const entity = await promise;\n        if (entity) {\n          cachedEntities.set(entityRef, entity);\n          updateEntities();\n        }\n      } finally {\n        outstandingEntities.delete(entityRef);\n      }\n    })));\n  }, [state, updateEntities]);\n  const { loading, error } = asyncState;\n  const requestEntities = useCallback((entityRefs) => {\n    const n = new Set(entityRefs);\n    const { requestedEntities } = state.current;\n    if (n.size !== requestedEntities.size || Array.from(n).some((e) => !requestedEntities.has(e))) {\n      state.current.requestedEntities = n;\n      fetch();\n      updateEntities();\n    }\n  }, [state, fetch, updateEntities]);\n  return {\n    entities,\n    loading,\n    error,\n    requestEntities\n  };\n}\n\nfunction useEntityRelationGraph({\n  rootEntityRefs,\n  filter: { maxDepth = Number.POSITIVE_INFINITY, relations, kinds } = {}\n}) {\n  const { entities, loading, error, requestEntities } = useEntityStore();\n  useEffect(() => {\n    const expectedEntities = /* @__PURE__ */ new Set([...rootEntityRefs]);\n    const processedEntityRefs = /* @__PURE__ */ new Set();\n    let nextDepthRefQueue = [...rootEntityRefs];\n    let depth = 0;\n    while (nextDepthRefQueue.length > 0 && (!isFinite(maxDepth) || depth < maxDepth)) {\n      const entityRefQueue = nextDepthRefQueue;\n      nextDepthRefQueue = [];\n      while (entityRefQueue.length > 0) {\n        const entityRef = entityRefQueue.shift();\n        const entity = entities[entityRef];\n        processedEntityRefs.add(entityRef);\n        if (entity && entity.relations) {\n          for (const rel of entity.relations) {\n            if ((!relations || relations.includes(rel.type)) && (!kinds || kinds.some((kind) => rel.targetRef.startsWith(`${kind.toLocaleLowerCase(\"en-US\")}:`)))) {\n              if (!processedEntityRefs.has(rel.targetRef)) {\n                nextDepthRefQueue.push(rel.targetRef);\n                expectedEntities.add(rel.targetRef);\n              }\n            }\n          }\n        }\n      }\n      ++depth;\n    }\n    requestEntities([...expectedEntities]);\n  }, [entities, rootEntityRefs, maxDepth, relations, kinds, requestEntities]);\n  return {\n    entities,\n    loading,\n    error\n  };\n}\n\nfunction useEntityRelationNodesAndEdges({\n  rootEntityRefs,\n  maxDepth = Number.POSITIVE_INFINITY,\n  unidirectional = true,\n  mergeRelations = true,\n  kinds,\n  relations,\n  onNodeClick,\n  relationPairs = ALL_RELATION_PAIRS\n}) {\n  const [nodesAndEdges, setNodesAndEdges] = useState({});\n  const { entities, loading, error } = useEntityRelationGraph({\n    rootEntityRefs,\n    filter: {\n      maxDepth,\n      kinds,\n      relations\n    }\n  });\n  useDebounce(() => {\n    var _a;\n    if (!entities || Object.keys(entities).length === 0) {\n      setNodesAndEdges({});\n      return;\n    }\n    const nodes = Object.entries(entities).map(([entityRef, entity]) => {\n      var _a2, _b, _c;\n      const focused = rootEntityRefs.includes(entityRef);\n      const node = {\n        id: entityRef,\n        title: (_b = (_a2 = entity.metadata) == null ? void 0 : _a2.title) != null ? _b : void 0,\n        kind: entity.kind,\n        name: entity.metadata.name,\n        namespace: (_c = entity.metadata.namespace) != null ? _c : DEFAULT_NAMESPACE,\n        focused,\n        color: focused ? \"secondary\" : \"primary\"\n      };\n      if (onNodeClick) {\n        node.onClick = (event) => onNodeClick(node, event);\n      }\n      return node;\n    });\n    const edges = [];\n    const visitedNodes = /* @__PURE__ */ new Set();\n    const nodeQueue = [...rootEntityRefs];\n    while (nodeQueue.length > 0) {\n      const entityRef = nodeQueue.pop();\n      const entity = entities[entityRef];\n      visitedNodes.add(entityRef);\n      if (entity) {\n        (_a = entity == null ? void 0 : entity.relations) == null ? void 0 : _a.forEach((rel) => {\n          var _a2;\n          if (!entities[rel.targetRef]) {\n            return;\n          }\n          if (relations && !relations.includes(rel.type)) {\n            return;\n          }\n          if (kinds && !kinds.some((kind) => rel.targetRef.startsWith(`${kind.toLocaleLowerCase(\"en-US\")}:`))) {\n            return;\n          }\n          if (!unidirectional || !visitedNodes.has(rel.targetRef)) {\n            if (mergeRelations) {\n              const pair = (_a2 = relationPairs.find(([l, r]) => l === rel.type || r === rel.type)) != null ? _a2 : [rel.type];\n              const [left] = pair;\n              edges.push({\n                from: left === rel.type ? entityRef : rel.targetRef,\n                to: left === rel.type ? rel.targetRef : entityRef,\n                relations: pair,\n                label: \"visible\"\n              });\n            } else {\n              edges.push({\n                from: entityRef,\n                to: rel.targetRef,\n                relations: [rel.type],\n                label: \"visible\"\n              });\n            }\n          }\n          if (!visitedNodes.has(rel.targetRef)) {\n            nodeQueue.push(rel.targetRef);\n            visitedNodes.add(rel.targetRef);\n          }\n        });\n      }\n    }\n    setNodesAndEdges({ nodes, edges });\n  }, 100, [\n    entities,\n    rootEntityRefs,\n    kinds,\n    relations,\n    unidirectional,\n    mergeRelations,\n    onNodeClick,\n    relationPairs\n  ]);\n  return {\n    loading,\n    error,\n    ...nodesAndEdges\n  };\n}\n\nconst useStyles = makeStyles$2((theme) => ({\n  progress: {\n    position: \"absolute\",\n    left: \"50%\",\n    top: \"50%\",\n    marginLeft: \"-20px\",\n    marginTop: \"-20px\"\n  },\n  container: {\n    position: \"relative\",\n    width: \"100%\",\n    display: \"flex\",\n    flexDirection: \"column\"\n  },\n  graph: {\n    width: \"100%\",\n    flex: 1,\n    \"& path[marker-end]\": {\n      transition: \"filter 0.1s ease-in-out\"\n    },\n    \"& path[marker-end]:hover\": {\n      filter: `drop-shadow(2px 2px 4px ${theme.palette.primary.dark});`\n    },\n    \"& g[data-testid=label]\": {\n      transition: \"transform 0s\"\n    }\n  }\n}));\nconst EntityRelationsGraph = (props) => {\n  const {\n    rootEntityNames,\n    maxDepth = Number.POSITIVE_INFINITY,\n    unidirectional = true,\n    mergeRelations = true,\n    kinds,\n    relations,\n    direction = Direction.LEFT_RIGHT,\n    onNodeClick,\n    relationPairs = ALL_RELATION_PAIRS,\n    className,\n    zoom = \"enabled\",\n    renderNode,\n    renderLabel\n  } = props;\n  const theme = useTheme();\n  const classes = useStyles();\n  const rootEntityRefs = useMemo(() => (Array.isArray(rootEntityNames) ? rootEntityNames : [rootEntityNames]).map((e) => stringifyEntityRef(e)), [rootEntityNames]);\n  const errorApi = useApi(errorApiRef);\n  const { loading, error, nodes, edges } = useEntityRelationNodesAndEdges({\n    rootEntityRefs,\n    maxDepth,\n    unidirectional,\n    mergeRelations,\n    kinds,\n    relations,\n    onNodeClick,\n    relationPairs\n  });\n  useEffect(() => {\n    if (error) {\n      errorApi.post(error);\n    }\n  }, [errorApi, error]);\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: classNames(classes.container, className)\n  }, loading && /* @__PURE__ */ React.createElement(CircularProgress, {\n    className: classes.progress\n  }), nodes && edges && /* @__PURE__ */ React.createElement(DependencyGraph, {\n    nodes,\n    edges,\n    renderNode: renderNode || CustomNode,\n    renderLabel: renderLabel || CustomLabel,\n    direction,\n    className: classes.graph,\n    paddingX: theme.spacing(4),\n    paddingY: theme.spacing(4),\n    labelPosition: DependencyGraphTypes.LabelPosition.RIGHT,\n    labelOffset: theme.spacing(1),\n    zoom\n  }));\n};\n\nconst catalogGraphRouteRef = createRouteRef({\n  id: \"catalog-graph\"\n});\nconst catalogEntityRouteRef = createExternalRouteRef({\n  id: \"catalog-entity\",\n  params: [\"namespace\", \"kind\", \"name\"],\n  optional: true\n});\n\nconst catalogGraphPlugin = createPlugin({\n  id: \"catalog-graph\",\n  routes: {\n    catalogGraph: catalogGraphRouteRef\n  },\n  externalRoutes: {\n    catalogEntity: catalogEntityRouteRef\n  }\n});\n\nconst EntityCatalogGraphCard = catalogGraphPlugin.provide(createComponentExtension({\n  name: \"EntityCatalogGraphCard\",\n  component: {\n    lazy: () => import('./esm/index-5294ed16.esm.js').then((m) => m.CatalogGraphCard)\n  }\n}));\nconst CatalogGraphPage = catalogGraphPlugin.provide(createRoutableExtension({\n  name: \"CatalogGraphPage\",\n  component: () => import('./esm/index-97452b61.esm.js').then((m) => m.CatalogGraphPage),\n  mountPoint: catalogGraphRouteRef\n}));\n\nexport { ALL_RELATION_PAIRS, CatalogGraphPage, Direction, EntityCatalogGraphCard, EntityRelationsGraph, catalogGraphPlugin, catalogGraphRouteRef };\n//# sourceMappingURL=index.esm.js.map\n","import { createApiRef, createRouteRef, createPlugin, createApiFactory, discoveryApiRef, identityApiRef, configApiRef, createRoutableExtension, useApi, useApp, errorApiRef } from '@backstage/core-plugin-api';\nimport { scmAuthApiRef, scmIntegrationsApiRef } from '@backstage/integration-react';\nimport { catalogApiRef, humanizeEntityRef, EntityRefLink } from '@backstage/plugin-catalog-react';\nimport { Octokit } from '@octokit/rest';\nimport { Base64 } from 'js-base64';\nimport parseGitUrl from 'git-url-parse';\nimport { trimEnd } from 'lodash';\nimport { InfoCard, Link, CodeSnippet, MarkdownContent, Page, Header, Content, ContentHeader, SupportButton } from '@backstage/core-components';\nimport { Typography, Chip, Button, CircularProgress, List, ListItem, ListItemIcon, ListItemText, ListItemSecondaryAction, IconButton, Collapse, Grid, TextField, FormHelperText, Card, CardHeader, CardContent, Box, Checkbox, StepLabel, FormControlLabel, Stepper, Step, StepContent } from '@material-ui/core';\nimport React, { useReducer, useState, useCallback, useEffect, useMemo } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport LocationOnIcon from '@material-ui/icons/LocationOn';\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport WorkIcon from '@material-ui/icons/Work';\nimport partition from 'lodash/partition';\nimport { useForm, Controller, FormProvider } from 'react-hook-form';\nimport { Autocomplete } from '@material-ui/lab';\nimport YAML from 'yaml';\nimport { assertError } from '@backstage/errors';\nimport useAsync from 'react-use/lib/useAsync';\nimport { stringifyEntityRef } from '@backstage/catalog-model';\n\nconst catalogImportApiRef = createApiRef({\n  id: \"plugin.catalog-import.service\"\n});\n\nconst getGithubIntegrationConfig = (scmIntegrationsApi, location) => {\n  const integration = scmIntegrationsApi.github.byUrl(location);\n  if (!integration) {\n    return void 0;\n  }\n  const { name: repo, owner } = parseGitUrl(location);\n  return {\n    repo,\n    owner,\n    githubIntegrationConfig: integration.config\n  };\n};\n\nfunction asInputRef(renderResult) {\n  const { ref, ...rest } = renderResult;\n  return {\n    inputRef: ref,\n    ...rest\n  };\n}\nfunction getCatalogFilename(config) {\n  var _a;\n  return (_a = config.getOptionalString(\"catalog.import.entityFilename\")) != null ? _a : \"catalog-info.yaml\";\n}\nfunction getBranchName(config) {\n  var _a;\n  return (_a = config.getOptionalString(\"catalog.import.pullRequestBranchName\")) != null ? _a : \"backstage-integration\";\n}\n\nclass CatalogImportClient {\n  constructor(options) {\n    this.discoveryApi = options.discoveryApi;\n    this.scmAuthApi = options.scmAuthApi;\n    this.identityApi = options.identityApi;\n    this.scmIntegrationsApi = options.scmIntegrationsApi;\n    this.catalogApi = options.catalogApi;\n    this.configApi = options.configApi;\n  }\n  async analyzeUrl(url) {\n    var _a;\n    if (new URL(url).pathname.match(/\\.ya?ml$/) || ((_a = new URL(url).searchParams.get(\"path\")) == null ? void 0 : _a.match(/.ya?ml$/))) {\n      const location = await this.catalogApi.addLocation({\n        type: \"url\",\n        target: url,\n        dryRun: true\n      });\n      return {\n        type: \"locations\",\n        locations: [\n          {\n            exists: location.exists,\n            target: location.location.target,\n            entities: location.entities.map((e) => {\n              var _a2;\n              return {\n                kind: e.kind,\n                namespace: (_a2 = e.metadata.namespace) != null ? _a2 : \"default\",\n                name: e.metadata.name\n              };\n            })\n          }\n        ]\n      };\n    }\n    const ghConfig = getGithubIntegrationConfig(this.scmIntegrationsApi, url);\n    if (!ghConfig) {\n      const other = this.scmIntegrationsApi.byUrl(url);\n      const catalogFilename = getCatalogFilename(this.configApi);\n      if (other) {\n        throw new Error(`The ${other.title} integration only supports full URLs to ${catalogFilename} files. Did you try to pass in the URL of a directory instead?`);\n      }\n      throw new Error(`This URL was not recognized as a valid GitHub URL because there was no configured integration that matched the given host name. You could try to paste the full URL to a ${catalogFilename} file instead.`);\n    }\n    const locations = await this.checkGitHubForExistingCatalogInfo({\n      ...ghConfig,\n      url\n    });\n    if (locations.length > 0) {\n      return {\n        type: \"locations\",\n        locations\n      };\n    }\n    return {\n      type: \"repository\",\n      integrationType: \"github\",\n      url,\n      generatedEntities: await this.generateEntityDefinitions({\n        repo: url\n      })\n    };\n  }\n  async preparePullRequest() {\n    var _a;\n    const appTitle = (_a = this.configApi.getOptionalString(\"app.title\")) != null ? _a : \"Backstage\";\n    const appBaseUrl = this.configApi.getString(\"app.baseUrl\");\n    const catalogFilename = getCatalogFilename(this.configApi);\n    return {\n      title: `Add ${catalogFilename} config file`,\n      body: `This pull request adds a **Backstage entity metadata file** to this repository so that the component can be added to the [${appTitle} software catalog](${appBaseUrl}).\n\nAfter this pull request is merged, the component will become available.\n\nFor more information, read an [overview of the Backstage software catalog](https://backstage.io/docs/features/software-catalog/software-catalog-overview).`\n    };\n  }\n  async submitPullRequest(options) {\n    const { repositoryUrl, fileContent, title, body } = options;\n    const ghConfig = getGithubIntegrationConfig(this.scmIntegrationsApi, repositoryUrl);\n    if (ghConfig) {\n      return await this.submitGitHubPrToRepo({\n        ...ghConfig,\n        repositoryUrl,\n        fileContent,\n        title,\n        body\n      });\n    }\n    throw new Error(\"unimplemented!\");\n  }\n  async generateEntityDefinitions(options) {\n    const { token } = await this.identityApi.getCredentials();\n    const response = await fetch(`${await this.discoveryApi.getBaseUrl(\"catalog\")}/analyze-location`, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...token && { Authorization: `Bearer ${token}` }\n      },\n      method: \"POST\",\n      body: JSON.stringify({\n        location: { type: \"url\", target: options.repo }\n      })\n    }).catch((e) => {\n      throw new Error(`Failed to generate entity definitions, ${e.message}`);\n    });\n    if (!response.ok) {\n      throw new Error(`Failed to generate entity definitions. Received http response ${response.status}: ${response.statusText}`);\n    }\n    const payload = await response.json();\n    return payload.generateEntities.map((x) => x.entity);\n  }\n  async checkGitHubForExistingCatalogInfo(options) {\n    const { url, owner, repo, githubIntegrationConfig } = options;\n    const { token } = await this.scmAuthApi.getCredentials({ url });\n    const octo = new Octokit({\n      auth: token,\n      baseUrl: githubIntegrationConfig.apiBaseUrl\n    });\n    const catalogFilename = getCatalogFilename(this.configApi);\n    const query = `repo:${owner}/${repo}+filename:${catalogFilename}`;\n    const searchResult = await octo.search.code({ q: query }).catch((e) => {\n      throw new Error(formatHttpErrorMessage(\"Couldn't search repository for metadata file.\", e));\n    });\n    const exists = searchResult.data.total_count > 0;\n    if (exists) {\n      const repoInformation = await octo.repos.get({ owner, repo }).catch((e) => {\n        throw new Error(formatHttpErrorMessage(\"Couldn't fetch repo data\", e));\n      });\n      const defaultBranch = repoInformation.data.default_branch;\n      return await Promise.all(searchResult.data.items.map((i) => `${trimEnd(url, \"/\")}/blob/${defaultBranch}/${i.path}`).map(async (target) => {\n        const result = await this.catalogApi.addLocation({\n          type: \"url\",\n          target,\n          dryRun: true\n        });\n        return {\n          target,\n          exists: result.exists,\n          entities: result.entities.map((e) => {\n            var _a;\n            return {\n              kind: e.kind,\n              namespace: (_a = e.metadata.namespace) != null ? _a : \"default\",\n              name: e.metadata.name\n            };\n          })\n        };\n      }));\n    }\n    return [];\n  }\n  async submitGitHubPrToRepo(options) {\n    const {\n      owner,\n      repo,\n      title,\n      body,\n      fileContent,\n      repositoryUrl,\n      githubIntegrationConfig\n    } = options;\n    const { token } = await this.scmAuthApi.getCredentials({\n      url: repositoryUrl,\n      additionalScope: {\n        repoWrite: true\n      }\n    });\n    const octo = new Octokit({\n      auth: token,\n      baseUrl: githubIntegrationConfig.apiBaseUrl\n    });\n    const branchName = getBranchName(this.configApi);\n    const fileName = getCatalogFilename(this.configApi);\n    const repoData = await octo.repos.get({\n      owner,\n      repo\n    }).catch((e) => {\n      throw new Error(formatHttpErrorMessage(\"Couldn't fetch repo data\", e));\n    });\n    const parentRef = await octo.git.getRef({\n      owner,\n      repo,\n      ref: `heads/${repoData.data.default_branch}`\n    }).catch((e) => {\n      throw new Error(formatHttpErrorMessage(\"Couldn't fetch default branch data\", e));\n    });\n    await octo.git.createRef({\n      owner,\n      repo,\n      ref: `refs/heads/${branchName}`,\n      sha: parentRef.data.object.sha\n    }).catch((e) => {\n      throw new Error(formatHttpErrorMessage(`Couldn't create a new branch with name '${branchName}'`, e));\n    });\n    await octo.repos.createOrUpdateFileContents({\n      owner,\n      repo,\n      path: fileName,\n      message: title,\n      content: Base64.encode(fileContent),\n      branch: branchName\n    }).catch((e) => {\n      throw new Error(formatHttpErrorMessage(`Couldn't create a commit with ${fileName} file added`, e));\n    });\n    const pullRequestResponse = await octo.pulls.create({\n      owner,\n      repo,\n      title,\n      head: branchName,\n      body,\n      base: repoData.data.default_branch\n    }).catch((e) => {\n      throw new Error(formatHttpErrorMessage(`Couldn't create a pull request for ${branchName} branch`, e));\n    });\n    return {\n      link: pullRequestResponse.data.html_url,\n      location: `https://${githubIntegrationConfig.host}/${owner}/${repo}/blob/${repoData.data.default_branch}/${fileName}`\n    };\n  }\n}\nfunction formatHttpErrorMessage(message, error) {\n  return `${message}, received http response status code ${error.status}: ${error.message}`;\n}\n\nconst rootRouteRef = createRouteRef({\n  id: \"catalog-import\"\n});\nconst catalogImportPlugin = createPlugin({\n  id: \"catalog-import\",\n  apis: [\n    createApiFactory({\n      api: catalogImportApiRef,\n      deps: {\n        discoveryApi: discoveryApiRef,\n        scmAuthApi: scmAuthApiRef,\n        identityApi: identityApiRef,\n        scmIntegrationsApi: scmIntegrationsApiRef,\n        catalogApi: catalogApiRef,\n        configApi: configApiRef\n      },\n      factory: ({\n        discoveryApi,\n        scmAuthApi,\n        identityApi,\n        scmIntegrationsApi,\n        catalogApi,\n        configApi\n      }) => new CatalogImportClient({\n        discoveryApi,\n        scmAuthApi,\n        scmIntegrationsApi,\n        identityApi,\n        catalogApi,\n        configApi\n      })\n    })\n  ],\n  routes: {\n    importPage: rootRouteRef\n  }\n});\nconst CatalogImportPage = catalogImportPlugin.provide(createRoutableExtension({\n  name: \"CatalogImportPage\",\n  component: () => import('./esm/index-83927125.esm.js').then((m) => m.ImportPage),\n  mountPoint: rootRouteRef\n}));\n\nfunction useCatalogFilename() {\n  const config = useApi(configApiRef);\n  return getCatalogFilename(config);\n}\n\nconst ImportInfoCard = (props) => {\n  const {\n    exampleLocationUrl = \"https://github.com/backstage/backstage/blob/master/catalog-info.yaml\",\n    exampleRepositoryUrl = \"https://github.com/backstage/backstage\"\n  } = props;\n  const configApi = useApi(configApiRef);\n  const appTitle = configApi.getOptional(\"app.title\") || \"Backstage\";\n  const catalogImportApi = useApi(catalogImportApiRef);\n  const integrations = configApi.getConfig(\"integrations\");\n  const hasGithubIntegration = integrations.has(\"github\");\n  const catalogFilename = useCatalogFilename();\n  return /* @__PURE__ */ React.createElement(InfoCard, {\n    title: \"Register an existing component\",\n    deepLink: {\n      title: \"Learn more about the Software Catalog\",\n      link: \"https://backstage.io/docs/features/software-catalog/software-catalog-overview\"\n    }\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"body2\",\n    paragraph: true\n  }, \"Enter the URL to your source code repository to add it to \", appTitle, \".\"), /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"h6\"\n  }, \"Link to an existing entity file\"), /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"subtitle2\",\n    color: \"textSecondary\",\n    paragraph: true\n  }, \"Example: \", /* @__PURE__ */ React.createElement(\"code\", null, exampleLocationUrl)), /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"body2\",\n    paragraph: true\n  }, \"The wizard analyzes the file, previews the entities, and adds them to the \", appTitle, \" catalog.\"), hasGithubIntegration && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"h6\"\n  }, \"Link to a repository\", \" \", /* @__PURE__ */ React.createElement(Chip, {\n    label: \"GitHub only\",\n    variant: \"outlined\",\n    size: \"small\"\n  })), /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"subtitle2\",\n    color: \"textSecondary\",\n    paragraph: true\n  }, \"Example: \", /* @__PURE__ */ React.createElement(\"code\", null, exampleRepositoryUrl)), /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"body2\",\n    paragraph: true\n  }, \"The wizard discovers all \", /* @__PURE__ */ React.createElement(\"code\", null, catalogFilename), \" files in the repository, previews the entities, and adds them to the \", appTitle, \" \", \"catalog.\"), catalogImportApi.preparePullRequest && /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"body2\",\n    paragraph: true\n  }, \"If no entities are found, the wizard will prepare a Pull Request that adds an example \", /* @__PURE__ */ React.createElement(\"code\", null, catalogFilename), \" and prepares the \", appTitle, \" catalog to load all entities as soon as the Pull Request is merged.\")));\n};\n\nfunction init(initialUrl) {\n  return {\n    activeFlow: \"unknown\",\n    activeState: \"analyze\",\n    analysisUrl: initialUrl,\n    previousStates: []\n  };\n}\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"onAnalysis\": {\n      if (state.activeState !== \"analyze\") {\n        return state;\n      }\n      const { activeState, previousStates } = state;\n      const [activeFlow, analysisUrl, analyzeResult, opts] = action.args;\n      return {\n        ...state,\n        analysisUrl,\n        activeFlow,\n        analyzeResult,\n        prepareResult: opts == null ? void 0 : opts.prepareResult,\n        activeState: (opts == null ? void 0 : opts.prepareResult) === void 0 ? \"prepare\" : \"review\",\n        previousStates: previousStates.concat(activeState)\n      };\n    }\n    case \"onPrepare\": {\n      if (state.activeState !== \"prepare\") {\n        return state;\n      }\n      const { activeState, previousStates } = state;\n      const [prepareResult, opts] = action.args;\n      return {\n        ...state,\n        prepareResult,\n        activeState: \"review\",\n        previousStates: (opts == null ? void 0 : opts.notRepeatable) ? [] : previousStates.concat(activeState)\n      };\n    }\n    case \"onReview\": {\n      if (state.activeState !== \"review\") {\n        return state;\n      }\n      const { activeState, previousStates } = state;\n      const [reviewResult] = action.args;\n      return {\n        ...state,\n        reviewResult,\n        activeState: \"finish\",\n        previousStates: previousStates.concat(activeState)\n      };\n    }\n    case \"onGoBack\": {\n      const { activeState, previousStates } = state;\n      return {\n        ...state,\n        activeState: previousStates.length > 0 ? previousStates[previousStates.length - 1] : activeState,\n        previousStates: previousStates.slice(0, previousStates.length - 1)\n      };\n    }\n    case \"onReset\":\n      return {\n        ...init(action.initialUrl),\n        prepareResult: state.prepareResult\n      };\n    default:\n      throw new Error();\n  }\n}\nconst useImportState = (options) => {\n  const [state, dispatch] = useReducer(reducer, options == null ? void 0 : options.initialUrl, init);\n  const { activeFlow, activeState, analysisUrl, previousStates } = state;\n  return {\n    activeFlow,\n    activeState,\n    activeStepNumber: [\"analyze\", \"prepare\", \"review\", \"finish\"].indexOf(activeState),\n    analysisUrl,\n    analyzeResult: state.analyzeResult,\n    prepareResult: state.prepareResult,\n    reviewResult: state.reviewResult,\n    onAnalysis: (flow, url, result, opts) => dispatch({\n      type: \"onAnalysis\",\n      args: [flow, url, result, opts]\n    }),\n    onPrepare: (result, opts) => dispatch({\n      type: \"onPrepare\",\n      args: [result, opts]\n    }),\n    onReview: (result) => dispatch({ type: \"onReview\", args: [result] }),\n    onGoBack: previousStates.length > 0 ? () => dispatch({ type: \"onGoBack\" }) : void 0,\n    onReset: () => dispatch({ type: \"onReset\", initialUrl: options == null ? void 0 : options.initialUrl })\n  };\n};\n\nconst useStyles$3 = makeStyles((theme) => ({\n  wrapper: {\n    marginTop: theme.spacing(1),\n    marginRight: theme.spacing(1),\n    position: \"relative\"\n  },\n  buttonProgress: {\n    position: \"absolute\",\n    top: \"50%\",\n    left: \"50%\",\n    marginTop: -12,\n    marginLeft: -12\n  },\n  button: {\n    marginTop: theme.spacing(1),\n    marginRight: theme.spacing(1)\n  }\n}));\nconst NextButton = (props) => {\n  const { loading, ...buttonProps } = props;\n  const classes = useStyles$3();\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.wrapper\n  }, /* @__PURE__ */ React.createElement(Button, {\n    color: \"primary\",\n    variant: \"contained\",\n    ...buttonProps,\n    disabled: props.disabled || props.loading\n  }), props.loading && /* @__PURE__ */ React.createElement(CircularProgress, {\n    size: \"1.5rem\",\n    className: classes.buttonProgress\n  }), props.loading);\n};\nconst BackButton = (props) => {\n  const classes = useStyles$3();\n  return /* @__PURE__ */ React.createElement(Button, {\n    variant: \"outlined\",\n    className: classes.button,\n    ...props\n  }, props.children || \"Back\");\n};\n\nconst useStyles$2 = makeStyles((theme) => ({\n  nested: {\n    paddingLeft: theme.spacing(4)\n  }\n}));\nfunction sortEntities(entities) {\n  return entities.sort((a, b) => humanizeEntityRef(a).localeCompare(humanizeEntityRef(b)));\n}\nconst EntityListComponent = (props) => {\n  const {\n    locations,\n    collapsed = false,\n    locationListItemIcon,\n    onItemClick,\n    firstListItem,\n    withLinks = false\n  } = props;\n  const app = useApp();\n  const classes = useStyles$2();\n  const [expandedUrls, setExpandedUrls] = useState([]);\n  const handleClick = (url) => {\n    setExpandedUrls((urls) => urls.includes(url) ? urls.filter((u) => u !== url) : urls.concat(url));\n  };\n  return /* @__PURE__ */ React.createElement(List, null, firstListItem, locations.map((r) => /* @__PURE__ */ React.createElement(React.Fragment, {\n    key: r.target\n  }, /* @__PURE__ */ React.createElement(ListItem, {\n    dense: true,\n    button: Boolean(onItemClick),\n    onClick: () => onItemClick == null ? void 0 : onItemClick.call(undefined, r.target)\n  }, /* @__PURE__ */ React.createElement(ListItemIcon, null, locationListItemIcon(r.target)), /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: r.target,\n    secondary: `Entities: ${r.entities.length}`\n  }), collapsed && /* @__PURE__ */ React.createElement(ListItemSecondaryAction, null, /* @__PURE__ */ React.createElement(IconButton, {\n    edge: \"end\",\n    onClick: () => handleClick(r.target)\n  }, expandedUrls.includes(r.target) ? /* @__PURE__ */ React.createElement(ExpandLessIcon, null) : /* @__PURE__ */ React.createElement(ExpandMoreIcon, null)))), /* @__PURE__ */ React.createElement(Collapse, {\n    in: !collapsed || expandedUrls.includes(r.target),\n    timeout: \"auto\",\n    unmountOnExit: true\n  }, /* @__PURE__ */ React.createElement(List, {\n    component: \"div\",\n    disablePadding: true,\n    dense: true\n  }, sortEntities(r.entities).map((entity) => {\n    var _a;\n    const Icon = (_a = app.getSystemIcon(`kind:${entity.kind.toLocaleLowerCase(\"en-US\")}`)) != null ? _a : WorkIcon;\n    return /* @__PURE__ */ React.createElement(ListItem, {\n      key: humanizeEntityRef(entity),\n      className: classes.nested,\n      ...withLinks ? {\n        component: EntityRefLink,\n        entityRef: entity,\n        button: withLinks\n      } : {}\n    }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Icon, null)), /* @__PURE__ */ React.createElement(ListItemText, {\n      primary: humanizeEntityRef(entity)\n    }));\n  }))))));\n};\n\nconst StepFinishImportLocation = ({ prepareResult, onReset }) => {\n  const continueButton = /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    spacing: 0\n  }, /* @__PURE__ */ React.createElement(BackButton, {\n    onClick: onReset\n  }, \"Register another\"));\n  if (prepareResult.type === \"repository\") {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, {\n      paragraph: true\n    }, \"The following Pull Request has been opened:\", \" \", /* @__PURE__ */ React.createElement(Link, {\n      to: prepareResult.pullRequest.url,\n      target: \"_blank\",\n      rel: \"noreferrer\"\n    }, prepareResult.pullRequest.url)), /* @__PURE__ */ React.createElement(Typography, {\n      paragraph: true\n    }, \"Your entities will be imported as soon as the Pull Request is merged.\"), continueButton);\n  }\n  const [existingLocations, newLocations] = partition(prepareResult.locations, (l) => l.exists);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, newLocations.length > 0 && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, null, \"The following entities have been added to the catalog:\"), /* @__PURE__ */ React.createElement(EntityListComponent, {\n    locations: newLocations,\n    locationListItemIcon: () => /* @__PURE__ */ React.createElement(LocationOnIcon, null),\n    withLinks: true\n  })), existingLocations.length > 0 && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, null, \"A refresh was triggered for the following locations:\"), /* @__PURE__ */ React.createElement(EntityListComponent, {\n    locations: existingLocations,\n    locationListItemIcon: () => /* @__PURE__ */ React.createElement(LocationOnIcon, null),\n    withLinks: true\n  })), continueButton);\n};\n\nconst StepInitAnalyzeUrl = (props) => {\n  const {\n    onAnalysis,\n    analysisUrl = \"\",\n    disablePullRequest = false,\n    exampleLocationUrl = \"https://github.com/backstage/backstage/blob/master/catalog-info.yaml\"\n  } = props;\n  const errorApi = useApi(errorApiRef);\n  const catalogImportApi = useApi(catalogImportApiRef);\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n    watch\n  } = useForm({\n    mode: \"onTouched\",\n    defaultValues: {\n      url: analysisUrl\n    }\n  });\n  const [submitted, setSubmitted] = useState(false);\n  const [error, setError] = useState(void 0);\n  const handleResult = useCallback(async ({ url }) => {\n    var _a, _b, _c;\n    setSubmitted(true);\n    try {\n      const analysisResult = await catalogImportApi.analyzeUrl(url);\n      switch (analysisResult.type) {\n        case \"repository\":\n          if (!disablePullRequest && analysisResult.generatedEntities.length > 0) {\n            onAnalysis(\"no-location\", url, analysisResult);\n          } else {\n            setError(\"Couldn't generate entities for your repository\");\n            setSubmitted(false);\n          }\n          break;\n        case \"locations\": {\n          if (analysisResult.locations.length === 1) {\n            onAnalysis(\"single-location\", url, analysisResult, {\n              prepareResult: analysisResult\n            });\n          } else if (analysisResult.locations.length > 1) {\n            onAnalysis(\"multiple-locations\", url, analysisResult);\n          } else {\n            setError(\"There are no entities at this location\");\n            setSubmitted(false);\n          }\n          break;\n        }\n        default: {\n          const err = `Received unknown analysis result of type ${analysisResult.type}. Please contact the support team.`;\n          setError(err);\n          setSubmitted(false);\n          errorApi.post(new Error(err));\n          break;\n        }\n      }\n    } catch (e) {\n      setError((_c = (_b = (_a = e == null ? void 0 : e.data) == null ? void 0 : _a.error) == null ? void 0 : _b.message) != null ? _c : e.message);\n      setSubmitted(false);\n    }\n  }, [catalogImportApi, disablePullRequest, errorApi, onAnalysis]);\n  return /* @__PURE__ */ React.createElement(\"form\", {\n    onSubmit: handleSubmit(handleResult)\n  }, /* @__PURE__ */ React.createElement(TextField, {\n    ...asInputRef(register(\"url\", {\n      required: true,\n      validate: {\n        httpsValidator: (value) => typeof value === \"string\" && value.match(/^http[s]?:\\/\\//) !== null || \"Must start with http:// or https://.\"\n      }\n    })),\n    fullWidth: true,\n    id: \"url\",\n    label: \"Repository URL\",\n    placeholder: exampleLocationUrl,\n    helperText: \"Enter the full path to your entity file to start tracking your component\",\n    margin: \"normal\",\n    variant: \"outlined\",\n    error: Boolean(errors.url),\n    required: true\n  }), errors.url && /* @__PURE__ */ React.createElement(FormHelperText, {\n    error: true\n  }, errors.url.message), error && /* @__PURE__ */ React.createElement(FormHelperText, {\n    error: true\n  }, error), /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    spacing: 0\n  }, /* @__PURE__ */ React.createElement(NextButton, {\n    disabled: Boolean(errors.url) || !watch(\"url\"),\n    loading: submitted,\n    type: \"submit\"\n  }, \"Analyze\")));\n};\n\nconst AutocompleteTextField = (props) => {\n  const {\n    name,\n    options,\n    required,\n    errors,\n    rules,\n    loading = false,\n    loadingText,\n    helperText,\n    errorHelperText,\n    textFieldProps = {}\n  } = props;\n  return /* @__PURE__ */ React.createElement(Controller, {\n    name,\n    rules,\n    render: ({ field: { onChange } }) => /* @__PURE__ */ React.createElement(Autocomplete, {\n      loading,\n      loadingText,\n      options: options || [],\n      autoSelect: true,\n      freeSolo: true,\n      onChange: (_event, value) => onChange(value),\n      renderInput: (params) => /* @__PURE__ */ React.createElement(TextField, {\n        ...params,\n        helperText: (errors == null ? void 0 : errors[name]) && errorHelperText || helperText,\n        error: Boolean(errors == null ? void 0 : errors[name]),\n        margin: \"normal\",\n        variant: \"outlined\",\n        required,\n        InputProps: {\n          ...params.InputProps,\n          endAdornment: /* @__PURE__ */ React.createElement(React.Fragment, null, loading ? /* @__PURE__ */ React.createElement(CircularProgress, {\n            color: \"inherit\",\n            size: \"1em\"\n          }) : null, params.InputProps.endAdornment)\n        },\n        ...textFieldProps\n      })\n    })\n  });\n};\n\nconst PreparePullRequestForm = (props) => {\n  const { defaultValues, onSubmit, render } = props;\n  const methods = useForm({ mode: \"onTouched\", defaultValues });\n  const { handleSubmit, watch, control, register, formState, setValue } = methods;\n  return /* @__PURE__ */ React.createElement(FormProvider, {\n    ...methods\n  }, /* @__PURE__ */ React.createElement(\"form\", {\n    onSubmit: handleSubmit(onSubmit)\n  }, render({ values: watch(), formState, register, control, setValue })));\n};\n\nconst PreviewCatalogInfoComponent = (props) => {\n  const { repositoryUrl, entities, classes } = props;\n  const catalogFilename = useCatalogFilename();\n  return /* @__PURE__ */ React.createElement(Card, {\n    variant: \"outlined\",\n    className: classes == null ? void 0 : classes.card\n  }, /* @__PURE__ */ React.createElement(CardHeader, {\n    title: /* @__PURE__ */ React.createElement(\"code\", null, `${trimEnd(repositoryUrl, \"/\")}/${catalogFilename}`)\n  }), /* @__PURE__ */ React.createElement(CardContent, {\n    className: classes == null ? void 0 : classes.cardContent\n  }, /* @__PURE__ */ React.createElement(CodeSnippet, {\n    text: entities.map((e) => YAML.stringify(e)).join(\"---\\n\").trim(),\n    language: \"yaml\"\n  })));\n};\n\nconst PreviewPullRequestComponent = (props) => {\n  const { title, description, classes } = props;\n  return /* @__PURE__ */ React.createElement(Card, {\n    variant: \"outlined\",\n    className: classes == null ? void 0 : classes.card\n  }, /* @__PURE__ */ React.createElement(CardHeader, {\n    title,\n    subheader: \"Create a new Pull Request\"\n  }), /* @__PURE__ */ React.createElement(CardContent, {\n    className: classes == null ? void 0 : classes.cardContent\n  }, /* @__PURE__ */ React.createElement(MarkdownContent, {\n    content: description\n  })));\n};\n\nconst useStyles$1 = makeStyles((theme) => ({\n  previewCard: {\n    marginTop: theme.spacing(1)\n  },\n  previewCardContent: {\n    paddingTop: 0\n  }\n}));\nfunction generateEntities(entities, componentName, owner) {\n  return entities.map((e) => ({\n    ...e,\n    apiVersion: e.apiVersion,\n    kind: e.kind,\n    metadata: {\n      ...e.metadata,\n      name: componentName\n    },\n    spec: {\n      ...e.spec,\n      ...owner ? { owner } : {}\n    }\n  }));\n}\nconst StepPrepareCreatePullRequest = (props) => {\n  var _a, _b, _c, _d, _e, _f;\n  const { analyzeResult, onPrepare, onGoBack, renderFormFields } = props;\n  const classes = useStyles$1();\n  const catalogApi = useApi(catalogApiRef);\n  const catalogImportApi = useApi(catalogImportApiRef);\n  const errorApi = useApi(errorApiRef);\n  const [submitted, setSubmitted] = useState(false);\n  const [error, setError] = useState();\n  const catalogFilename = useCatalogFilename();\n  const {\n    loading: prDefaultsLoading,\n    value: prDefaults,\n    error: prDefaultsError\n  } = useAsync(() => catalogImportApi.preparePullRequest(), [catalogImportApi.preparePullRequest]);\n  useEffect(() => {\n    if (prDefaultsError) {\n      errorApi.post(prDefaultsError);\n    }\n  }, [prDefaultsError, errorApi]);\n  const { loading: groupsLoading, value: groups } = useAsync(async () => {\n    const groupEntities = await catalogApi.getEntities({\n      filter: { kind: \"group\" }\n    });\n    return groupEntities.items.map((e) => humanizeEntityRef(e, { defaultKind: \"group\" })).sort();\n  });\n  const handleResult = useCallback(async (data) => {\n    setSubmitted(true);\n    try {\n      const pr = await catalogImportApi.submitPullRequest({\n        repositoryUrl: analyzeResult.url,\n        title: data.title,\n        body: data.body,\n        fileContent: generateEntities(analyzeResult.generatedEntities, data.componentName, data.owner).map((e) => YAML.stringify(e)).join(\"---\\n\")\n      });\n      onPrepare({\n        type: \"repository\",\n        url: analyzeResult.url,\n        integrationType: analyzeResult.integrationType,\n        pullRequest: {\n          url: pr.link\n        },\n        locations: [\n          {\n            target: pr.location,\n            entities: generateEntities(analyzeResult.generatedEntities, data.componentName, data.owner).map((e) => ({\n              kind: e.kind,\n              namespace: e.metadata.namespace,\n              name: e.metadata.name\n            }))\n          }\n        ]\n      }, { notRepeatable: true });\n    } catch (e) {\n      assertError(e);\n      setError(e.message);\n      setSubmitted(false);\n    }\n  }, [\n    analyzeResult.generatedEntities,\n    analyzeResult.integrationType,\n    analyzeResult.url,\n    catalogImportApi,\n    onPrepare\n  ]);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, null, \"You entered a link to a \", analyzeResult.integrationType, \" repository but a\", \" \", /* @__PURE__ */ React.createElement(\"code\", null, catalogFilename), \" could not be found. Use this form to open a Pull Request that creates one.\"), !prDefaultsLoading && /* @__PURE__ */ React.createElement(PreparePullRequestForm, {\n    onSubmit: handleResult,\n    defaultValues: {\n      title: (_a = prDefaults == null ? void 0 : prDefaults.title) != null ? _a : \"\",\n      body: (_b = prDefaults == null ? void 0 : prDefaults.body) != null ? _b : \"\",\n      owner: ((_d = (_c = analyzeResult.generatedEntities[0]) == null ? void 0 : _c.spec) == null ? void 0 : _d.owner) || \"\",\n      componentName: ((_f = (_e = analyzeResult.generatedEntities[0]) == null ? void 0 : _e.metadata) == null ? void 0 : _f.name) || \"\",\n      useCodeowners: false\n    },\n    render: ({ values, formState, register, setValue }) => /* @__PURE__ */ React.createElement(React.Fragment, null, renderFormFields({\n      values,\n      formState,\n      register,\n      setValue,\n      groups: groups != null ? groups : [],\n      groupsLoading\n    }), /* @__PURE__ */ React.createElement(Box, {\n      marginTop: 2\n    }, /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"h6\"\n    }, \"Preview Pull Request\")), /* @__PURE__ */ React.createElement(PreviewPullRequestComponent, {\n      title: values.title,\n      description: values.body,\n      classes: {\n        card: classes.previewCard,\n        cardContent: classes.previewCardContent\n      }\n    }), /* @__PURE__ */ React.createElement(Box, {\n      marginTop: 2,\n      marginBottom: 1\n    }, /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"h6\"\n    }, \"Preview Entities\")), /* @__PURE__ */ React.createElement(PreviewCatalogInfoComponent, {\n      entities: generateEntities(analyzeResult.generatedEntities, values.componentName, values.owner),\n      repositoryUrl: analyzeResult.url,\n      classes: {\n        card: classes.previewCard,\n        cardContent: classes.previewCardContent\n      }\n    }), error && /* @__PURE__ */ React.createElement(FormHelperText, {\n      error: true\n    }, error), /* @__PURE__ */ React.createElement(Grid, {\n      container: true,\n      spacing: 0\n    }, onGoBack && /* @__PURE__ */ React.createElement(BackButton, {\n      onClick: onGoBack,\n      disabled: submitted\n    }), /* @__PURE__ */ React.createElement(NextButton, {\n      type: \"submit\",\n      disabled: Boolean(formState.errors.title || formState.errors.body || formState.errors.owner),\n      loading: submitted\n    }, \"Create PR\")))\n  }));\n};\n\nconst StepPrepareSelectLocations = ({\n  analyzeResult,\n  prepareResult,\n  onPrepare,\n  onGoBack\n}) => {\n  const [selectedUrls, setSelectedUrls] = useState((prepareResult == null ? void 0 : prepareResult.locations.map((l) => l.target)) || []);\n  const [existingLocations, locations] = partition(analyzeResult == null ? void 0 : analyzeResult.locations, (l) => l.exists);\n  const handleResult = useCallback(async () => {\n    onPrepare({\n      type: \"locations\",\n      locations: locations.filter((l) => selectedUrls.includes(l.target))\n    });\n  }, [locations, onPrepare, selectedUrls]);\n  const onItemClick = (url) => {\n    setSelectedUrls((urls) => urls.includes(url) ? urls.filter((u) => u !== url) : urls.concat(url));\n  };\n  const onSelectAll = () => {\n    setSelectedUrls((urls) => urls.length < locations.length ? locations.map((l) => l.target) : []);\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, locations.length > 0 && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, null, \"Select one or more locations that are present in your git repository:\"), /* @__PURE__ */ React.createElement(EntityListComponent, {\n    firstListItem: /* @__PURE__ */ React.createElement(ListItem, {\n      dense: true,\n      button: true,\n      onClick: onSelectAll\n    }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Checkbox, {\n      edge: \"start\",\n      checked: selectedUrls.length === locations.length,\n      indeterminate: selectedUrls.length > 0 && selectedUrls.length < locations.length,\n      tabIndex: -1,\n      disableRipple: true\n    })), /* @__PURE__ */ React.createElement(ListItemText, {\n      primary: \"Select All\"\n    })),\n    onItemClick,\n    locations,\n    locationListItemIcon: (target) => /* @__PURE__ */ React.createElement(Checkbox, {\n      edge: \"start\",\n      checked: selectedUrls.includes(target),\n      tabIndex: -1,\n      disableRipple: true\n    }),\n    collapsed: true\n  })), existingLocations.length > 0 && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, null, \"These locations already exist in the catalog:\"), /* @__PURE__ */ React.createElement(EntityListComponent, {\n    locations: existingLocations,\n    locationListItemIcon: () => /* @__PURE__ */ React.createElement(LocationOnIcon, null),\n    withLinks: true,\n    collapsed: true\n  })), /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    spacing: 0\n  }, onGoBack && /* @__PURE__ */ React.createElement(BackButton, {\n    onClick: onGoBack\n  }), /* @__PURE__ */ React.createElement(NextButton, {\n    disabled: selectedUrls.length === 0,\n    onClick: handleResult\n  }, \"Review\")));\n};\n\nconst StepReviewLocation = ({\n  prepareResult,\n  onReview,\n  onGoBack\n}) => {\n  const catalogApi = useApi(catalogApiRef);\n  const configApi = useApi(configApiRef);\n  const appTitle = configApi.getOptional(\"app.title\") || \"Backstage\";\n  const [submitted, setSubmitted] = useState(false);\n  const [error, setError] = useState();\n  const exists = prepareResult.type === \"locations\" && prepareResult.locations.some((l) => l.exists) ? true : false;\n  const handleClick = useCallback(async () => {\n    setSubmitted(true);\n    try {\n      let refreshed = new Array();\n      if (prepareResult.type === \"locations\") {\n        refreshed = await Promise.all(prepareResult.locations.filter((l) => l.exists).map(async (l) => {\n          var _a;\n          const ref = stringifyEntityRef((_a = l.entities[0]) != null ? _a : l);\n          await catalogApi.refreshEntity(ref);\n          return { target: l.target };\n        }));\n      }\n      const locations = await Promise.all(prepareResult.locations.filter((l) => !l.exists).map(async (l) => {\n        const result = await catalogApi.addLocation({\n          type: \"url\",\n          target: l.target\n        });\n        return {\n          target: result.location.target,\n          entities: result.entities\n        };\n      }));\n      onReview({\n        ...prepareResult,\n        ...{ refreshed },\n        locations\n      });\n    } catch (e) {\n      assertError(e);\n      if (prepareResult.type === \"repository\" && e.message.startsWith(\"Location was added but has no entities specified yet\")) {\n        onReview({\n          ...prepareResult,\n          locations: prepareResult.locations.map((l) => ({\n            target: l.target,\n            entities: []\n          }))\n        });\n      } else {\n        setError(e.message);\n        setSubmitted(false);\n      }\n    }\n  }, [prepareResult, onReview, catalogApi]);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, prepareResult.type === \"repository\" && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, {\n    paragraph: true\n  }, \"The following Pull Request has been opened:\", \" \", /* @__PURE__ */ React.createElement(Link, {\n    to: prepareResult.pullRequest.url,\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, prepareResult.pullRequest.url)), /* @__PURE__ */ React.createElement(Typography, {\n    paragraph: true\n  }, \"You can already import the location and \", appTitle, \" will fetch the entities as soon as the Pull Request is merged.\")), /* @__PURE__ */ React.createElement(Typography, null, exists ? \"The following locations already exist in the catalog:\" : \"The following entities will be added to the catalog:\"), /* @__PURE__ */ React.createElement(EntityListComponent, {\n    locations: prepareResult.locations,\n    locationListItemIcon: () => /* @__PURE__ */ React.createElement(LocationOnIcon, null)\n  }), error && /* @__PURE__ */ React.createElement(FormHelperText, {\n    error: true\n  }, error), /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    spacing: 0\n  }, onGoBack && /* @__PURE__ */ React.createElement(BackButton, {\n    onClick: onGoBack,\n    disabled: submitted\n  }), /* @__PURE__ */ React.createElement(NextButton, {\n    disabled: submitted,\n    loading: submitted,\n    onClick: () => handleClick()\n  }, exists ? \"Refresh\" : \"Import\")));\n};\n\nfunction defaultGenerateStepper(flow, defaults) {\n  switch (flow) {\n    case \"single-location\":\n      return {\n        ...defaults,\n        prepare: () => ({\n          stepLabel: /* @__PURE__ */ React.createElement(StepLabel, {\n            optional: /* @__PURE__ */ React.createElement(Typography, {\n              variant: \"caption\"\n            }, \"Discovered Locations: 1\")\n          }, \"Select Locations\"),\n          content: /* @__PURE__ */ React.createElement(React.Fragment, null)\n        })\n      };\n    case \"multiple-locations\":\n      return {\n        ...defaults,\n        prepare: (state, opts) => {\n          if (state.analyzeResult.type !== \"locations\") {\n            return defaults.prepare(state, opts);\n          }\n          return {\n            stepLabel: /* @__PURE__ */ React.createElement(StepLabel, {\n              optional: /* @__PURE__ */ React.createElement(Typography, {\n                variant: \"caption\"\n              }, \"Discovered Locations: \", state.analyzeResult.locations.length)\n            }, \"Select Locations\"),\n            content: /* @__PURE__ */ React.createElement(StepPrepareSelectLocations, {\n              analyzeResult: state.analyzeResult,\n              prepareResult: state.prepareResult,\n              onPrepare: state.onPrepare,\n              onGoBack: state.onGoBack\n            })\n          };\n        }\n      };\n    case \"no-location\":\n      return {\n        ...defaults,\n        prepare: (state, opts) => {\n          if (state.analyzeResult.type !== \"repository\") {\n            return defaults.prepare(state, opts);\n          }\n          return {\n            stepLabel: /* @__PURE__ */ React.createElement(StepLabel, null, \"Create Pull Request\"),\n            content: /* @__PURE__ */ React.createElement(StepPrepareCreatePullRequest, {\n              analyzeResult: state.analyzeResult,\n              onPrepare: state.onPrepare,\n              onGoBack: state.onGoBack,\n              renderFormFields: ({\n                values,\n                setValue,\n                formState,\n                groupsLoading,\n                groups,\n                register\n              }) => /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Box, {\n                marginTop: 2\n              }, /* @__PURE__ */ React.createElement(Typography, {\n                variant: \"h6\"\n              }, \"Pull Request Details\")), /* @__PURE__ */ React.createElement(TextField, {\n                ...asInputRef(register(\"title\", {\n                  required: true\n                })),\n                label: \"Pull Request Title\",\n                placeholder: \"Add Backstage catalog entity descriptor files\",\n                margin: \"normal\",\n                variant: \"outlined\",\n                fullWidth: true,\n                error: Boolean(formState.errors.title),\n                required: true\n              }), /* @__PURE__ */ React.createElement(TextField, {\n                ...asInputRef(register(\"body\", {\n                  required: true\n                })),\n                label: \"Pull Request Body\",\n                placeholder: \"A describing text with Markdown support\",\n                margin: \"normal\",\n                variant: \"outlined\",\n                fullWidth: true,\n                error: Boolean(formState.errors.body),\n                multiline: true,\n                required: true\n              }), /* @__PURE__ */ React.createElement(Box, {\n                marginTop: 2\n              }, /* @__PURE__ */ React.createElement(Typography, {\n                variant: \"h6\"\n              }, \"Entity Configuration\")), /* @__PURE__ */ React.createElement(TextField, {\n                ...asInputRef(register(\"componentName\", { required: true })),\n                label: \"Name of the created component\",\n                placeholder: \"my-component\",\n                margin: \"normal\",\n                variant: \"outlined\",\n                fullWidth: true,\n                error: Boolean(formState.errors.componentName),\n                required: true\n              }), !values.useCodeowners && /* @__PURE__ */ React.createElement(AutocompleteTextField, {\n                name: \"owner\",\n                errors: formState.errors,\n                options: groups || [],\n                loading: groupsLoading,\n                loadingText: \"Loading groups\\u2026\",\n                helperText: \"Select an owner from the list or enter a reference to a Group or a User\",\n                errorHelperText: \"required value\",\n                textFieldProps: {\n                  label: \"Entity Owner\",\n                  placeholder: \"my-group\"\n                },\n                rules: { required: true },\n                required: true\n              }), /* @__PURE__ */ React.createElement(FormControlLabel, {\n                control: /* @__PURE__ */ React.createElement(Checkbox, {\n                  ...asInputRef(register(\"useCodeowners\")),\n                  onChange: (_, value) => {\n                    if (value) {\n                      setValue(\"owner\", \"\");\n                    }\n                  }\n                }),\n                label: /* @__PURE__ */ React.createElement(React.Fragment, null, \"Use \", /* @__PURE__ */ React.createElement(\"em\", null, \"CODEOWNERS\"), \" file as Entity Owner\")\n              }), /* @__PURE__ */ React.createElement(FormHelperText, null, \"WARNING: This may fail if no CODEOWNERS file is found at the target location.\"))\n            })\n          };\n        }\n      };\n    default:\n      return defaults;\n  }\n}\nconst defaultStepper = {\n  analyze: (state, { apis }) => ({\n    stepLabel: /* @__PURE__ */ React.createElement(StepLabel, null, \"Select URL\"),\n    content: /* @__PURE__ */ React.createElement(StepInitAnalyzeUrl, {\n      key: \"analyze\",\n      analysisUrl: state.analysisUrl,\n      onAnalysis: state.onAnalysis,\n      disablePullRequest: !apis.catalogImportApi.preparePullRequest\n    })\n  }),\n  prepare: (state) => ({\n    stepLabel: /* @__PURE__ */ React.createElement(StepLabel, {\n      optional: /* @__PURE__ */ React.createElement(Typography, {\n        variant: \"caption\"\n      }, \"Optional\")\n    }, \"Import Actions\"),\n    content: /* @__PURE__ */ React.createElement(BackButton, {\n      onClick: state.onGoBack\n    })\n  }),\n  review: (state) => ({\n    stepLabel: /* @__PURE__ */ React.createElement(StepLabel, null, \"Review\"),\n    content: /* @__PURE__ */ React.createElement(StepReviewLocation, {\n      prepareResult: state.prepareResult,\n      onReview: state.onReview,\n      onGoBack: state.onGoBack\n    })\n  }),\n  finish: (state) => ({\n    stepLabel: /* @__PURE__ */ React.createElement(StepLabel, null, \"Finish\"),\n    content: /* @__PURE__ */ React.createElement(StepFinishImportLocation, {\n      prepareResult: state.prepareResult,\n      onReset: state.onReset\n    })\n  })\n};\n\nconst useStyles = makeStyles(() => ({\n  stepperRoot: {\n    padding: 0\n  }\n}));\nconst ImportStepper = (props) => {\n  const {\n    initialUrl,\n    generateStepper = defaultGenerateStepper,\n    variant\n  } = props;\n  const catalogImportApi = useApi(catalogImportApiRef);\n  const classes = useStyles();\n  const state = useImportState({ initialUrl });\n  const states = useMemo(() => generateStepper(state.activeFlow, defaultStepper), [generateStepper, state.activeFlow]);\n  const render = (step) => {\n    return /* @__PURE__ */ React.createElement(Step, null, step.stepLabel, /* @__PURE__ */ React.createElement(StepContent, null, step.content));\n  };\n  return /* @__PURE__ */ React.createElement(InfoCard, {\n    variant\n  }, /* @__PURE__ */ React.createElement(Stepper, {\n    classes: { root: classes.stepperRoot },\n    activeStep: state.activeStepNumber,\n    orientation: \"vertical\"\n  }, render(states.analyze(state, { apis: { catalogImportApi } })), render(states.prepare(state, { apis: { catalogImportApi } })), render(states.review(state, { apis: { catalogImportApi } })), render(states.finish(state, { apis: { catalogImportApi } }))));\n};\n\nconst DefaultImportPage = () => {\n  const configApi = useApi(configApiRef);\n  const appTitle = configApi.getOptional(\"app.title\") || \"Backstage\";\n  return /* @__PURE__ */ React.createElement(Page, {\n    themeId: \"home\"\n  }, /* @__PURE__ */ React.createElement(Header, {\n    title: \"Register an existing component\"\n  }), /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(ContentHeader, {\n    title: `Start tracking your component in ${appTitle}`\n  }, /* @__PURE__ */ React.createElement(SupportButton, null, \"Start tracking your component in \", appTitle, \" by adding it to the software catalog.\")), /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    direction: \"row-reverse\"\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    md: 4,\n    lg: 6,\n    xl: 8\n  }, /* @__PURE__ */ React.createElement(ImportInfoCard, null)), /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    md: 8,\n    lg: 6,\n    xl: 4\n  }, /* @__PURE__ */ React.createElement(ImportStepper, null)))));\n};\n\nexport { AutocompleteTextField, CatalogImportClient, CatalogImportPage, DefaultImportPage, EntityListComponent, ImportInfoCard, ImportStepper, PreparePullRequestForm, PreviewCatalogInfoComponent, PreviewPullRequestComponent, StepInitAnalyzeUrl, StepPrepareCreatePullRequest, catalogImportApiRef, catalogImportPlugin, defaultGenerateStepper, catalogImportPlugin as plugin };\n//# sourceMappingURL=index.esm.js.map\n","export { CATALOG_FILTER_EXISTS } from '@backstage/catalog-client';\nimport { createApiRef, useApi, createRouteRef, useRouteRef, identityApiRef, alertApiRef, useApp, configApiRef } from '@backstage/core-plugin-api';\nimport ObservableImpl from 'zen-observable';\nimport React, { useState, createContext, useMemo, useCallback, useContext, forwardRef, useEffect, useRef, useLayoutEffect, Fragment } from 'react';\nimport { Grid, useMediaQuery, useTheme, Button, Drawer, Box, Typography, Tooltip, makeStyles, FormControlLabel, Checkbox, TextField, Toolbar, FormControl, Input, InputAdornment, IconButton, withStyles, DialogContentText, ListItemText as ListItemText$1, ListSubheader as ListSubheader$1, Card, CardContent, ListItem, ListItemIcon, List, Dialog, DialogTitle, DialogContent, Tabs, Tab, DialogActions, Divider, MenuItem, ListItemSecondaryAction } from '@material-ui/core';\nimport FilterListIcon from '@material-ui/icons/FilterList';\nimport { Alert, Autocomplete } from '@material-ui/lab';\nimport { createVersionedContext, createVersionedValueMap, useVersionedContext, getOrCreateGlobalSingleton } from '@backstage/version-bridge';\nimport { compact, isEqual, groupBy, chunk } from 'lodash';\nimport qs from 'qs';\nimport { useLocation, useNavigate } from 'react-router';\nimport useAsyncFn from 'react-use/lib/useAsyncFn';\nimport useDebounce from 'react-use/lib/useDebounce';\nimport useMountedState from 'react-use/lib/useMountedState';\nimport { parseEntityRef, ANNOTATION_SOURCE_LOCATION, parseLocationRef, RELATION_MEMBER_OF, getCompoundEntityRef, stringifyEntityRef, RELATION_OWNED_BY, DEFAULT_NAMESPACE, RELATION_PART_OF, ANNOTATION_LOCATION, ANNOTATION_ORIGIN_LOCATION } from '@backstage/catalog-model';\nimport useAsync from 'react-use/lib/useAsync';\nimport isEqual$1 from 'lodash/isEqual';\nimport sortBy from 'lodash/sortBy';\nimport { Link, OverflowTooltip, Table, Select, Progress, ResponseErrorPanel, DependencyGraph, DependencyGraphTypes, CodeSnippet } from '@backstage/core-components';\nimport useObservable from 'react-use/lib/useObservable';\nimport { usePermission } from '@backstage/plugin-permission-react';\nimport CheckBoxIcon from '@material-ui/icons/CheckBox';\nimport CheckBoxOutlineBlankIcon from '@material-ui/icons/CheckBoxOutlineBlank';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport Clear from '@material-ui/icons/Clear';\nimport Search from '@material-ui/icons/Search';\nimport capitalize from 'lodash/capitalize';\nimport Star from '@material-ui/icons/Star';\nimport StarBorder from '@material-ui/icons/StarBorder';\nimport classNames from 'classnames';\nimport WorkIcon from '@material-ui/icons/Work';\nimport HelpOutlineIcon from '@material-ui/icons/HelpOutline';\nimport groupBy$1 from 'lodash/groupBy';\nimport DialogContentText$1 from '@material-ui/core/DialogContentText';\nimport YAML from 'yaml';\nimport Alert$1 from '@material-ui/lab/Alert';\nimport { assertError } from '@backstage/errors';\nimport SettingsIcon from '@material-ui/icons/Settings';\n\nconst catalogApiRef = createApiRef({\n  id: \"plugin.catalog.service\"\n});\n\nconst starredEntitiesApiRef = createApiRef({\n  id: \"catalog-react.starred-entities\"\n});\n\nclass MockStarredEntitiesApi {\n  constructor() {\n    this.starredEntities = /* @__PURE__ */ new Set();\n    this.subscribers = /* @__PURE__ */ new Set();\n    this.observable = new ObservableImpl((subscriber) => {\n      subscriber.next(new Set(this.starredEntities));\n      this.subscribers.add(subscriber);\n      return () => {\n        this.subscribers.delete(subscriber);\n      };\n    });\n  }\n  async toggleStarred(entityRef) {\n    if (!this.starredEntities.delete(entityRef)) {\n      this.starredEntities.add(entityRef);\n    }\n    for (const subscription of this.subscribers) {\n      subscription.next(new Set(this.starredEntities));\n    }\n  }\n  starredEntitie$() {\n    return this.observable;\n  }\n}\n\nconst Filters = (props) => {\n  const isMidSizeScreen = useMediaQuery((theme2) => theme2.breakpoints.down(\"md\"));\n  const theme = useTheme();\n  const [filterDrawerOpen, setFilterDrawerOpen] = useState(false);\n  return isMidSizeScreen ? /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Button, {\n    style: { marginTop: theme.spacing(1), marginLeft: theme.spacing(1) },\n    onClick: () => setFilterDrawerOpen(true),\n    startIcon: /* @__PURE__ */ React.createElement(FilterListIcon, null)\n  }, \"Filters\"), /* @__PURE__ */ React.createElement(Drawer, {\n    open: filterDrawerOpen,\n    onClose: () => setFilterDrawerOpen(false),\n    anchor: \"left\",\n    disableAutoFocus: true,\n    keepMounted: true,\n    variant: \"temporary\"\n  }, /* @__PURE__ */ React.createElement(Box, {\n    m: 2\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"h6\",\n    component: \"h2\",\n    style: { marginBottom: theme.spacing(1) }\n  }, \"Filters\"), props.children))) : /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    lg: 2\n  }, props.children);\n};\nconst Content = (props) => {\n  return /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    lg: 10\n  }, props.children);\n};\nconst CatalogFilterLayout = (props) => {\n  return /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    style: { position: \"relative\" }\n  }, props.children);\n};\nCatalogFilterLayout.Filters = Filters;\nCatalogFilterLayout.Content = Content;\n\nconst NewEntityContext = createVersionedContext(\"entity-context\");\nconst AsyncEntityProvider = ({\n  children,\n  entity,\n  loading,\n  error,\n  refresh\n}) => {\n  const value = { entity, loading, error, refresh };\n  return /* @__PURE__ */ React.createElement(NewEntityContext.Provider, {\n    value: createVersionedValueMap({ 1: value })\n  }, children);\n};\nconst EntityProvider = (props) => /* @__PURE__ */ React.createElement(AsyncEntityProvider, {\n  entity: props.entity,\n  loading: !Boolean(props.entity),\n  error: void 0,\n  refresh: void 0,\n  children: props.children\n});\nfunction useEntity() {\n  const versionedHolder = useVersionedContext(\"entity-context\");\n  if (!versionedHolder) {\n    throw new Error(\"Entity context is not available\");\n  }\n  const value = versionedHolder.atVersion(1);\n  if (!value) {\n    throw new Error(\"EntityContext v1 not available\");\n  }\n  if (!value.entity) {\n    throw new Error(\"useEntity hook is being called outside of an EntityLayout where the entity has not been loaded. If this is intentional, please use useAsyncEntity instead.\");\n  }\n  return { entity: value.entity };\n}\nfunction useAsyncEntity() {\n  const versionedHolder = useVersionedContext(\"entity-context\");\n  if (!versionedHolder) {\n    throw new Error(\"Entity context is not available\");\n  }\n  const value = versionedHolder.atVersion(1);\n  if (!value) {\n    throw new Error(\"EntityContext v1 not available\");\n  }\n  const { entity, loading, error, refresh } = value;\n  return { entity, loading, error, refresh };\n}\n\nfunction reduceCatalogFilters(filters) {\n  return filters.reduce((compoundFilter, filter) => {\n    return {\n      ...compoundFilter,\n      ...filter.getCatalogFilters ? filter.getCatalogFilters() : {}\n    };\n  }, {});\n}\nfunction reduceEntityFilters(filters) {\n  return (entity) => filters.every((filter) => !filter.filterEntity || filter.filterEntity(entity));\n}\n\nfunction getEntityRelations(entity, relationType, filter) {\n  var _a;\n  let entityNames = ((_a = entity == null ? void 0 : entity.relations) == null ? void 0 : _a.filter((r) => r.type === relationType).map((r) => parseEntityRef(r.targetRef))) || [];\n  if (filter == null ? void 0 : filter.kind) {\n    entityNames = entityNames.filter((e) => e.kind.toLocaleLowerCase(\"en-US\") === filter.kind.toLocaleLowerCase(\"en-US\"));\n  }\n  return entityNames;\n}\n\nfunction getEntitySourceLocation(entity, scmIntegrationsApi) {\n  var _a;\n  const sourceLocation = (_a = entity.metadata.annotations) == null ? void 0 : _a[ANNOTATION_SOURCE_LOCATION];\n  if (!sourceLocation) {\n    return void 0;\n  }\n  try {\n    const sourceLocationRef = parseLocationRef(sourceLocation);\n    const integration = scmIntegrationsApi.byUrl(sourceLocationRef.target);\n    return {\n      locationTargetUrl: sourceLocationRef.target,\n      integrationType: integration == null ? void 0 : integration.type\n    };\n  } catch {\n    return void 0;\n  }\n}\n\nfunction isOwnerOf(owner, entity) {\n  const possibleOwners = new Set([\n    ...getEntityRelations(owner, RELATION_MEMBER_OF, { kind: \"group\" }),\n    ...owner ? [getCompoundEntityRef(owner)] : []\n  ].map(stringifyEntityRef));\n  const owners = getEntityRelations(entity, RELATION_OWNED_BY).map(stringifyEntityRef);\n  for (const ownerItem of owners) {\n    if (possibleOwners.has(ownerItem)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nconst EntityListContext = createContext(void 0);\nconst EntityListProvider = ({\n  children\n}) => {\n  const isMounted = useMountedState();\n  const catalogApi = useApi(catalogApiRef);\n  const [requestedFilters, setRequestedFilters] = useState({});\n  const location = useLocation();\n  const queryParameters = useMemo(() => {\n    var _a;\n    return (_a = qs.parse(location.search, {\n      ignoreQueryPrefix: true\n    }).filters) != null ? _a : {};\n  }, [location]);\n  const [outputState, setOutputState] = useState(() => {\n    return {\n      appliedFilters: {},\n      entities: [],\n      backendEntities: []\n    };\n  });\n  const [{ loading, error }, refresh] = useAsyncFn(async () => {\n    var _a;\n    const compacted = compact(Object.values(requestedFilters));\n    const entityFilter = reduceEntityFilters(compacted);\n    const backendFilter = reduceCatalogFilters(compacted);\n    const previousBackendFilter = reduceCatalogFilters(compact(Object.values(outputState.appliedFilters)));\n    const queryParams = Object.keys(requestedFilters).reduce((params, key) => {\n      const filter = requestedFilters[key];\n      if (filter == null ? void 0 : filter.toQueryValue) {\n        params[key] = filter.toQueryValue();\n      }\n      return params;\n    }, {});\n    if (!isEqual(previousBackendFilter, backendFilter)) {\n      const response = await catalogApi.getEntities({\n        filter: backendFilter\n      });\n      setOutputState({\n        appliedFilters: requestedFilters,\n        backendEntities: response.items,\n        entities: response.items.filter(entityFilter)\n      });\n    } else {\n      setOutputState({\n        appliedFilters: requestedFilters,\n        backendEntities: outputState.backendEntities,\n        entities: outputState.backendEntities.filter(entityFilter)\n      });\n    }\n    if (isMounted()) {\n      const oldParams = qs.parse(location.search, {\n        ignoreQueryPrefix: true\n      });\n      const newParams = qs.stringify({ ...oldParams, filters: queryParams }, { addQueryPrefix: true, arrayFormat: \"repeat\" });\n      const newUrl = `${window.location.pathname}${newParams}`;\n      (_a = window.history) == null ? void 0 : _a.replaceState(null, document.title, newUrl);\n    }\n  }, [catalogApi, queryParameters, requestedFilters, outputState], { loading: true });\n  useDebounce(refresh, 10, [requestedFilters]);\n  const updateFilters = useCallback((update) => {\n    setRequestedFilters((prevFilters) => {\n      const newFilters = typeof update === \"function\" ? update(prevFilters) : update;\n      return { ...prevFilters, ...newFilters };\n    });\n  }, []);\n  const value = useMemo(() => ({\n    filters: outputState.appliedFilters,\n    entities: outputState.entities,\n    backendEntities: outputState.backendEntities,\n    updateFilters,\n    queryParameters,\n    loading,\n    error\n  }), [outputState, updateFilters, queryParameters, loading, error]);\n  return /* @__PURE__ */ React.createElement(EntityListContext.Provider, {\n    value\n  }, children);\n};\nfunction useEntityList() {\n  const context = useContext(EntityListContext);\n  if (!context)\n    throw new Error(\"useEntityList must be used within EntityListProvider\");\n  return context;\n}\n\nconst entityRouteRef = getOrCreateGlobalSingleton(\"catalog:entity-route-ref\", () => createRouteRef({\n  id: \"catalog:entity\",\n  params: [\"namespace\", \"kind\", \"name\"]\n}));\nfunction entityRouteParams(entity) {\n  var _a, _b;\n  return {\n    kind: entity.kind.toLocaleLowerCase(\"en-US\"),\n    namespace: (_b = (_a = entity.metadata.namespace) == null ? void 0 : _a.toLocaleLowerCase(\"en-US\")) != null ? _b : DEFAULT_NAMESPACE,\n    name: entity.metadata.name\n  };\n}\n\nfunction humanizeEntityRef(entityRef, opts) {\n  const defaultKind = opts == null ? void 0 : opts.defaultKind;\n  let kind;\n  let namespace;\n  let name;\n  if (\"metadata\" in entityRef) {\n    kind = entityRef.kind;\n    namespace = entityRef.metadata.namespace;\n    name = entityRef.metadata.name;\n  } else {\n    kind = entityRef.kind;\n    namespace = entityRef.namespace;\n    name = entityRef.name;\n  }\n  if (namespace === DEFAULT_NAMESPACE) {\n    namespace = void 0;\n  }\n  kind = kind.toLocaleLowerCase(\"en-US\");\n  kind = defaultKind && defaultKind.toLocaleLowerCase(\"en-US\") === kind ? void 0 : kind;\n  return `${kind ? `${kind}:` : \"\"}${namespace ? `${namespace}/` : \"\"}${name}`;\n}\n\nconst EntityRefLink = forwardRef((props, ref) => {\n  var _a;\n  const { entityRef, defaultKind, title, children, ...linkProps } = props;\n  const entityRoute = useRouteRef(entityRouteRef);\n  let kind;\n  let namespace;\n  let name;\n  if (typeof entityRef === \"string\") {\n    const parsed = parseEntityRef(entityRef);\n    kind = parsed.kind;\n    namespace = parsed.namespace;\n    name = parsed.name;\n  } else if (\"metadata\" in entityRef) {\n    kind = entityRef.kind;\n    namespace = entityRef.metadata.namespace;\n    name = entityRef.metadata.name;\n  } else {\n    kind = entityRef.kind;\n    namespace = entityRef.namespace;\n    name = entityRef.name;\n  }\n  kind = kind.toLocaleLowerCase(\"en-US\");\n  namespace = (_a = namespace == null ? void 0 : namespace.toLocaleLowerCase(\"en-US\")) != null ? _a : DEFAULT_NAMESPACE;\n  const routeParams = { kind, namespace, name };\n  const formattedEntityRefTitle = humanizeEntityRef({ kind, namespace, name }, { defaultKind });\n  const link = /* @__PURE__ */ React.createElement(Link, {\n    ...linkProps,\n    ref,\n    to: entityRoute(routeParams)\n  }, children, !children && (title != null ? title : formattedEntityRefTitle));\n  return title ? /* @__PURE__ */ React.createElement(Tooltip, {\n    title: formattedEntityRefTitle\n  }, link) : link;\n});\n\nfunction EntityRefLinks(props) {\n  const { entityRefs, defaultKind, ...linkProps } = props;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, entityRefs.map((r, i) => /* @__PURE__ */ React.createElement(React.Fragment, {\n    key: i\n  }, i > 0 && \", \", /* @__PURE__ */ React.createElement(EntityRefLink, {\n    ...linkProps,\n    entityRef: r,\n    defaultKind\n  }))));\n}\n\nclass EntityKindFilter {\n  constructor(value) {\n    this.value = value;\n  }\n  getCatalogFilters() {\n    return { kind: this.value };\n  }\n  toQueryValue() {\n    return this.value;\n  }\n}\nclass EntityTypeFilter {\n  constructor(value) {\n    this.value = value;\n  }\n  getTypes() {\n    return Array.isArray(this.value) ? this.value : [this.value];\n  }\n  getCatalogFilters() {\n    return { \"spec.type\": this.getTypes() };\n  }\n  toQueryValue() {\n    return this.getTypes();\n  }\n}\nclass EntityTagFilter {\n  constructor(values) {\n    this.values = values;\n  }\n  filterEntity(entity) {\n    return this.values.every((v) => {\n      var _a;\n      return ((_a = entity.metadata.tags) != null ? _a : []).includes(v);\n    });\n  }\n  toQueryValue() {\n    return this.values;\n  }\n}\nclass EntityTextFilter {\n  constructor(value) {\n    this.value = value;\n  }\n  filterEntity(entity) {\n    var _a;\n    const upperCaseValue = this.value.toLocaleUpperCase(\"en-US\");\n    return entity.metadata.name.toLocaleUpperCase(\"en-US\").includes(upperCaseValue) || `${entity.metadata.title}`.toLocaleUpperCase(\"en-US\").includes(upperCaseValue) || ((_a = entity.metadata.tags) == null ? void 0 : _a.join(\"\").toLocaleUpperCase(\"en-US\").indexOf(upperCaseValue)) !== -1;\n  }\n}\nclass EntityOwnerFilter {\n  constructor(values) {\n    this.values = values;\n  }\n  filterEntity(entity) {\n    return this.values.some((v) => getEntityRelations(entity, RELATION_OWNED_BY).some((o) => humanizeEntityRef(o, { defaultKind: \"group\" }) === v));\n  }\n  toQueryValue() {\n    return this.values;\n  }\n}\nclass EntityLifecycleFilter {\n  constructor(values) {\n    this.values = values;\n  }\n  filterEntity(entity) {\n    return this.values.some((v) => {\n      var _a;\n      return ((_a = entity.spec) == null ? void 0 : _a.lifecycle) === v;\n    });\n  }\n  toQueryValue() {\n    return this.values;\n  }\n}\nclass UserListFilter {\n  constructor(value, isOwnedEntity, isStarredEntity) {\n    this.value = value;\n    this.isOwnedEntity = isOwnedEntity;\n    this.isStarredEntity = isStarredEntity;\n  }\n  filterEntity(entity) {\n    switch (this.value) {\n      case \"owned\":\n        return this.isOwnedEntity(entity);\n      case \"starred\":\n        return this.isStarredEntity(entity);\n      default:\n        return true;\n    }\n  }\n  toQueryValue() {\n    return this.value;\n  }\n}\n\nfunction useEntityTypeFilter() {\n  var _a;\n  const catalogApi = useApi(catalogApiRef);\n  const {\n    filters: { kind: kindFilter, type: typeFilter },\n    queryParameters: { type: typeParameter },\n    updateFilters\n  } = useEntityList();\n  const flattenedQueryTypes = useMemo(() => [typeParameter].flat().filter(Boolean), [typeParameter]);\n  const [selectedTypes, setSelectedTypes] = useState(flattenedQueryTypes.length ? flattenedQueryTypes : (_a = typeFilter == null ? void 0 : typeFilter.getTypes()) != null ? _a : []);\n  useEffect(() => {\n    if (flattenedQueryTypes.length) {\n      setSelectedTypes(flattenedQueryTypes);\n    }\n  }, [flattenedQueryTypes]);\n  const [availableTypes, setAvailableTypes] = useState([]);\n  const kind = useMemo(() => kindFilter == null ? void 0 : kindFilter.value, [kindFilter]);\n  const {\n    error,\n    loading,\n    value: facets\n  } = useAsync(async () => {\n    if (kind) {\n      const items = await catalogApi.getEntityFacets({\n        filter: { kind },\n        facets: [\"spec.type\"]\n      }).then((response) => response.facets[\"spec.type\"] || []);\n      return items;\n    }\n    return [];\n  }, [kind, catalogApi]);\n  const facetsRef = useRef(facets);\n  useEffect(() => {\n    const oldFacets = facetsRef.current;\n    facetsRef.current = facets;\n    if (loading || !kind || oldFacets === facets || !facets) {\n      return;\n    }\n    const newTypes = sortBy(facets, (f) => -f.count).map((f) => f.value);\n    setAvailableTypes(newTypes);\n    const stillValidTypes = selectedTypes.filter((value) => newTypes.includes(value));\n    if (!isEqual$1(selectedTypes, stillValidTypes)) {\n      setSelectedTypes(stillValidTypes);\n    }\n  }, [loading, kind, selectedTypes, setSelectedTypes, facets]);\n  useEffect(() => {\n    updateFilters({\n      type: selectedTypes.length ? new EntityTypeFilter(selectedTypes) : void 0\n    });\n  }, [selectedTypes, updateFilters]);\n  return {\n    loading,\n    error,\n    availableTypes,\n    selectedTypes,\n    setSelectedTypes\n  };\n}\n\nconst BATCH_SIZE = 20;\nfunction useRelatedEntities(entity, relationFilter) {\n  var _a, _b;\n  const filterByTypeLower = (_a = relationFilter == null ? void 0 : relationFilter.type) == null ? void 0 : _a.toLocaleLowerCase(\"en-US\");\n  const filterByKindLower = (_b = relationFilter == null ? void 0 : relationFilter.kind) == null ? void 0 : _b.toLocaleLowerCase(\"en-US\");\n  const catalogApi = useApi(catalogApiRef);\n  const {\n    loading,\n    value: entities,\n    error\n  } = useAsync(async () => {\n    var _a2;\n    const relations = (_a2 = entity.relations) == null ? void 0 : _a2.map((r) => ({ type: r.type, target: parseEntityRef(r.targetRef) })).filter((r) => (!filterByTypeLower || r.type.toLocaleLowerCase(\"en-US\") === filterByTypeLower) && (!filterByKindLower || r.target.kind === filterByKindLower));\n    if (!relations) {\n      return [];\n    }\n    const relationsByKindAndNamespace = Object.values(groupBy(relations, ({ target }) => {\n      return `${target.kind}:${target.namespace}`.toLocaleLowerCase(\"en-US\");\n    }));\n    const batchedRelationsByKindAndNamespace = [];\n    for (const rs of relationsByKindAndNamespace) {\n      batchedRelationsByKindAndNamespace.push({\n        kind: rs[0].target.kind,\n        namespace: rs[0].target.namespace,\n        nameBatches: chunk(rs.map((r) => r.target.name), BATCH_SIZE)\n      });\n    }\n    const results = await Promise.all(batchedRelationsByKindAndNamespace.flatMap((rs) => {\n      return rs.nameBatches.map((names) => {\n        return catalogApi.getEntities({\n          filter: {\n            kind: rs.kind,\n            \"metadata.namespace\": rs.namespace,\n            \"metadata.name\": names\n          }\n        });\n      });\n    }));\n    return results.flatMap((r) => r.items);\n  }, [entity, filterByTypeLower, filterByKindLower]);\n  return {\n    entities,\n    loading,\n    error\n  };\n}\n\nfunction getEntityRef$1(entityOrRef) {\n  return typeof entityOrRef === \"string\" ? entityOrRef : stringifyEntityRef(entityOrRef);\n}\nfunction useStarredEntities() {\n  const starredEntitiesApi = useApi(starredEntitiesApiRef);\n  const starredEntities = useObservable(starredEntitiesApi.starredEntitie$(), /* @__PURE__ */ new Set());\n  const isStarredEntity = useCallback((entityOrRef) => starredEntities.has(getEntityRef$1(entityOrRef)), [starredEntities]);\n  const toggleStarredEntity = useCallback((entityOrRef) => starredEntitiesApi.toggleStarred(getEntityRef$1(entityOrRef)).then(), [starredEntitiesApi]);\n  return {\n    starredEntities,\n    toggleStarredEntity,\n    isStarredEntity\n  };\n}\n\nfunction getEntityRef(entityOrRef) {\n  return typeof entityOrRef === \"string\" ? entityOrRef : stringifyEntityRef(entityOrRef);\n}\nfunction useStarredEntity(entityOrRef) {\n  const starredEntitiesApi = useApi(starredEntitiesApiRef);\n  const [isStarredEntity, setIsStarredEntity] = useState(false);\n  useEffect(() => {\n    const subscription = starredEntitiesApi.starredEntitie$().subscribe({\n      next(starredEntities) {\n        setIsStarredEntity(starredEntities.has(getEntityRef(entityOrRef)));\n      }\n    });\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, [entityOrRef, starredEntitiesApi]);\n  const toggleStarredEntity = useCallback(() => starredEntitiesApi.toggleStarred(getEntityRef(entityOrRef)).then(), [entityOrRef, starredEntitiesApi]);\n  return {\n    toggleStarredEntity,\n    isStarredEntity\n  };\n}\n\nfunction useEntityOwnership() {\n  const identityApi = useApi(identityApiRef);\n  const { loading, value: refs } = useAsync(async () => {\n    const { ownershipEntityRefs } = await identityApi.getBackstageIdentity();\n    return ownershipEntityRefs;\n  }, []);\n  const isOwnedEntity = useMemo(() => {\n    const myOwnerRefs = new Set(refs != null ? refs : []);\n    return (entity) => {\n      const entityOwnerRefs = getEntityRelations(entity, RELATION_OWNED_BY).map(stringifyEntityRef);\n      for (const ref of entityOwnerRefs) {\n        if (myOwnerRefs.has(ref)) {\n          return true;\n        }\n      }\n      return false;\n    };\n  }, [refs]);\n  return useMemo(() => ({ loading, isOwnedEntity }), [loading, isOwnedEntity]);\n}\n\nfunction useEntityPermission(permission) {\n  const {\n    entity,\n    loading: loadingEntity,\n    error: entityError\n  } = useAsyncEntity();\n  const {\n    allowed,\n    loading: loadingPermission,\n    error: permissionError\n  } = usePermission({\n    permission,\n    resourceRef: entity ? stringifyEntityRef(entity) : void 0\n  });\n  if (loadingEntity || loadingPermission) {\n    return { loading: true, allowed: false };\n  }\n  if (entityError) {\n    return { loading: false, allowed: false, error: entityError };\n  }\n  return { loading: false, allowed, error: permissionError };\n}\n\nconst EntityKindPicker = (props) => {\n  var _a;\n  const { initialFilter, hidden } = props;\n  const {\n    updateFilters,\n    queryParameters: { kind: kindParameter }\n  } = useEntityList();\n  const [selectedKind] = useState((_a = [kindParameter].flat()[0]) != null ? _a : initialFilter);\n  useEffect(() => {\n    updateFilters({\n      kind: selectedKind ? new EntityKindFilter(selectedKind) : void 0\n    });\n  }, [selectedKind, updateFilters]);\n  if (hidden)\n    return null;\n  return /* @__PURE__ */ React.createElement(Alert, {\n    severity: \"warning\"\n  }, \"Kind filter not yet available\");\n};\n\nconst useStyles$b = makeStyles({\n  input: {}\n}, {\n  name: \"CatalogReactEntityLifecyclePicker\"\n});\nconst icon$2 = /* @__PURE__ */ React.createElement(CheckBoxOutlineBlankIcon, {\n  fontSize: \"small\"\n});\nconst checkedIcon$2 = /* @__PURE__ */ React.createElement(CheckBoxIcon, {\n  fontSize: \"small\"\n});\nconst EntityLifecyclePicker = () => {\n  var _a, _b;\n  const classes = useStyles$b();\n  const {\n    updateFilters,\n    backendEntities,\n    filters,\n    queryParameters: { lifecycles: lifecyclesParameter }\n  } = useEntityList();\n  const queryParamLifecycles = useMemo(() => [lifecyclesParameter].flat().filter(Boolean), [lifecyclesParameter]);\n  const [selectedLifecycles, setSelectedLifecycles] = useState(queryParamLifecycles.length ? queryParamLifecycles : (_b = (_a = filters.lifecycles) == null ? void 0 : _a.values) != null ? _b : []);\n  useEffect(() => {\n    if (queryParamLifecycles.length) {\n      setSelectedLifecycles(queryParamLifecycles);\n    }\n  }, [queryParamLifecycles]);\n  useEffect(() => {\n    updateFilters({\n      lifecycles: selectedLifecycles.length ? new EntityLifecycleFilter(selectedLifecycles) : void 0\n    });\n  }, [selectedLifecycles, updateFilters]);\n  const availableLifecycles = useMemo(() => [\n    ...new Set(backendEntities.map((e) => {\n      var _a2;\n      return (_a2 = e.spec) == null ? void 0 : _a2.lifecycle;\n    }).filter(Boolean))\n  ].sort(), [backendEntities]);\n  if (!availableLifecycles.length)\n    return null;\n  return /* @__PURE__ */ React.createElement(Box, {\n    pb: 1,\n    pt: 1\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"button\"\n  }, \"Lifecycle\"), /* @__PURE__ */ React.createElement(Autocomplete, {\n    \"aria-label\": \"Lifecycle\",\n    multiple: true,\n    options: availableLifecycles,\n    value: selectedLifecycles,\n    onChange: (_, value) => setSelectedLifecycles(value),\n    renderOption: (option, { selected }) => /* @__PURE__ */ React.createElement(FormControlLabel, {\n      control: /* @__PURE__ */ React.createElement(Checkbox, {\n        icon: icon$2,\n        checkedIcon: checkedIcon$2,\n        checked: selected\n      }),\n      label: option\n    }),\n    size: \"small\",\n    popupIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, {\n      \"data-testid\": \"lifecycle-picker-expand\"\n    }),\n    renderInput: (params) => /* @__PURE__ */ React.createElement(TextField, {\n      ...params,\n      className: classes.input,\n      variant: \"outlined\"\n    })\n  }));\n};\n\nconst useStyles$a = makeStyles({\n  input: {}\n}, {\n  name: \"CatalogReactEntityOwnerPicker\"\n});\nconst icon$1 = /* @__PURE__ */ React.createElement(CheckBoxOutlineBlankIcon, {\n  fontSize: \"small\"\n});\nconst checkedIcon$1 = /* @__PURE__ */ React.createElement(CheckBoxIcon, {\n  fontSize: \"small\"\n});\nconst EntityOwnerPicker = () => {\n  var _a, _b;\n  const classes = useStyles$a();\n  const {\n    updateFilters,\n    backendEntities,\n    filters,\n    queryParameters: { owners: ownersParameter }\n  } = useEntityList();\n  const queryParamOwners = useMemo(() => [ownersParameter].flat().filter(Boolean), [ownersParameter]);\n  const [selectedOwners, setSelectedOwners] = useState(queryParamOwners.length ? queryParamOwners : (_b = (_a = filters.owners) == null ? void 0 : _a.values) != null ? _b : []);\n  useEffect(() => {\n    if (queryParamOwners.length) {\n      setSelectedOwners(queryParamOwners);\n    }\n  }, [queryParamOwners]);\n  useEffect(() => {\n    updateFilters({\n      owners: selectedOwners.length ? new EntityOwnerFilter(selectedOwners) : void 0\n    });\n  }, [selectedOwners, updateFilters]);\n  const availableOwners = useMemo(() => [\n    ...new Set(backendEntities.flatMap((e) => getEntityRelations(e, RELATION_OWNED_BY).map((o) => humanizeEntityRef(o, { defaultKind: \"group\" }))).filter(Boolean))\n  ].sort(), [backendEntities]);\n  if (!availableOwners.length)\n    return null;\n  return /* @__PURE__ */ React.createElement(Box, {\n    pb: 1,\n    pt: 1\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"button\"\n  }, \"Owner\"), /* @__PURE__ */ React.createElement(Autocomplete, {\n    multiple: true,\n    \"aria-label\": \"Owner\",\n    options: availableOwners,\n    value: selectedOwners,\n    onChange: (_, value) => setSelectedOwners(value),\n    renderOption: (option, { selected }) => /* @__PURE__ */ React.createElement(FormControlLabel, {\n      control: /* @__PURE__ */ React.createElement(Checkbox, {\n        icon: icon$1,\n        checkedIcon: checkedIcon$1,\n        checked: selected\n      }),\n      label: option\n    }),\n    size: \"small\",\n    popupIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, {\n      \"data-testid\": \"owner-picker-expand\"\n    }),\n    renderInput: (params) => /* @__PURE__ */ React.createElement(TextField, {\n      ...params,\n      className: classes.input,\n      variant: \"outlined\"\n    })\n  }));\n};\n\nconst useStyles$9 = makeStyles((_theme) => ({\n  searchToolbar: {\n    paddingLeft: 0,\n    paddingRight: 0\n  },\n  input: {}\n}), {\n  name: \"CatalogReactEntitySearchBar\"\n});\nconst EntitySearchBar = () => {\n  var _a, _b;\n  const classes = useStyles$9();\n  const { filters, updateFilters } = useEntityList();\n  const [search, setSearch] = useState((_b = (_a = filters.text) == null ? void 0 : _a.value) != null ? _b : \"\");\n  useDebounce(() => {\n    updateFilters({\n      text: search.length ? new EntityTextFilter(search) : void 0\n    });\n  }, 250, [search, updateFilters]);\n  return /* @__PURE__ */ React.createElement(Toolbar, {\n    className: classes.searchToolbar\n  }, /* @__PURE__ */ React.createElement(FormControl, null, /* @__PURE__ */ React.createElement(Input, {\n    \"aria-label\": \"search\",\n    id: \"input-with-icon-adornment\",\n    className: classes.input,\n    placeholder: \"Search\",\n    autoComplete: \"off\",\n    onChange: (event) => setSearch(event.target.value),\n    value: search,\n    startAdornment: /* @__PURE__ */ React.createElement(InputAdornment, {\n      position: \"start\"\n    }, /* @__PURE__ */ React.createElement(Search, null)),\n    endAdornment: /* @__PURE__ */ React.createElement(InputAdornment, {\n      position: \"end\"\n    }, /* @__PURE__ */ React.createElement(IconButton, {\n      \"aria-label\": \"clear search\",\n      onClick: () => setSearch(\"\"),\n      edge: \"end\",\n      disabled: search.length === 0\n    }, /* @__PURE__ */ React.createElement(Clear, null)))\n  })));\n};\n\nconst columnFactories = Object.freeze({\n  createEntityRefColumn(options) {\n    const { defaultKind } = options;\n    function formatContent(entity) {\n      var _a;\n      return ((_a = entity.metadata) == null ? void 0 : _a.title) || humanizeEntityRef(entity, {\n        defaultKind\n      });\n    }\n    return {\n      title: \"Name\",\n      highlight: true,\n      customFilterAndSearch(filter, entity) {\n        return formatContent(entity).includes(filter);\n      },\n      customSort(entity1, entity2) {\n        return formatContent(entity1).localeCompare(formatContent(entity2));\n      },\n      render: (entity) => {\n        var _a;\n        return /* @__PURE__ */ React.createElement(EntityRefLink, {\n          entityRef: entity,\n          defaultKind,\n          title: (_a = entity.metadata) == null ? void 0 : _a.title\n        });\n      }\n    };\n  },\n  createEntityRelationColumn({\n    title,\n    relation,\n    defaultKind,\n    filter: entityFilter\n  }) {\n    function getRelations(entity) {\n      return getEntityRelations(entity, relation, entityFilter);\n    }\n    function formatContent(entity) {\n      return getRelations(entity).map((r) => humanizeEntityRef(r, { defaultKind })).join(\", \");\n    }\n    return {\n      title,\n      customFilterAndSearch(filter, entity) {\n        return formatContent(entity).includes(filter);\n      },\n      customSort(entity1, entity2) {\n        return formatContent(entity1).localeCompare(formatContent(entity2));\n      },\n      render: (entity) => {\n        return /* @__PURE__ */ React.createElement(EntityRefLinks, {\n          entityRefs: getRelations(entity),\n          defaultKind\n        });\n      }\n    };\n  },\n  createOwnerColumn() {\n    return this.createEntityRelationColumn({\n      title: \"Owner\",\n      relation: RELATION_OWNED_BY,\n      defaultKind: \"group\"\n    });\n  },\n  createDomainColumn() {\n    return this.createEntityRelationColumn({\n      title: \"Domain\",\n      relation: RELATION_PART_OF,\n      defaultKind: \"domain\",\n      filter: {\n        kind: \"domain\"\n      }\n    });\n  },\n  createSystemColumn() {\n    return this.createEntityRelationColumn({\n      title: \"System\",\n      relation: RELATION_PART_OF,\n      defaultKind: \"system\",\n      filter: {\n        kind: \"system\"\n      }\n    });\n  },\n  createMetadataDescriptionColumn() {\n    return {\n      title: \"Description\",\n      field: \"metadata.description\",\n      render: (entity) => /* @__PURE__ */ React.createElement(OverflowTooltip, {\n        text: entity.metadata.description,\n        placement: \"bottom-start\",\n        line: 2\n      }),\n      width: \"auto\"\n    };\n  },\n  createSpecLifecycleColumn() {\n    return {\n      title: \"Lifecycle\",\n      field: \"spec.lifecycle\"\n    };\n  },\n  createSpecTypeColumn() {\n    return {\n      title: \"Type\",\n      field: \"spec.type\"\n    };\n  }\n});\n\nconst systemEntityColumns = [\n  columnFactories.createEntityRefColumn({ defaultKind: \"system\" }),\n  columnFactories.createDomainColumn(),\n  columnFactories.createOwnerColumn(),\n  columnFactories.createMetadataDescriptionColumn()\n];\nconst componentEntityColumns = [\n  columnFactories.createEntityRefColumn({ defaultKind: \"component\" }),\n  columnFactories.createSystemColumn(),\n  columnFactories.createOwnerColumn(),\n  columnFactories.createSpecTypeColumn(),\n  columnFactories.createSpecLifecycleColumn(),\n  columnFactories.createMetadataDescriptionColumn()\n];\n\nconst useStyles$8 = makeStyles((theme) => ({\n  empty: {\n    padding: theme.spacing(2),\n    display: \"flex\",\n    justifyContent: \"center\"\n  }\n}));\nconst EntityTable = (props) => {\n  const {\n    entities,\n    title,\n    emptyContent,\n    variant = \"gridItem\",\n    columns\n  } = props;\n  const classes = useStyles$8();\n  const tableStyle = {\n    minWidth: \"0\",\n    width: \"100%\"\n  };\n  if (variant === \"gridItem\") {\n    tableStyle.height = \"calc(100% - 10px)\";\n  }\n  return /* @__PURE__ */ React.createElement(Table, {\n    columns,\n    title,\n    style: tableStyle,\n    emptyContent: emptyContent && /* @__PURE__ */ React.createElement(\"div\", {\n      className: classes.empty\n    }, emptyContent),\n    options: {\n      search: false,\n      paging: false,\n      actionsColumnIndex: -1,\n      padding: \"dense\"\n    },\n    data: entities\n  });\n};\nEntityTable.columns = columnFactories;\nEntityTable.systemEntityColumns = systemEntityColumns;\nEntityTable.componentEntityColumns = componentEntityColumns;\n\nconst useStyles$7 = makeStyles({\n  input: {}\n}, {\n  name: \"CatalogReactEntityTagPicker\"\n});\nconst icon = /* @__PURE__ */ React.createElement(CheckBoxOutlineBlankIcon, {\n  fontSize: \"small\"\n});\nconst checkedIcon = /* @__PURE__ */ React.createElement(CheckBoxIcon, {\n  fontSize: \"small\"\n});\nconst EntityTagPicker = () => {\n  var _a, _b;\n  const classes = useStyles$7();\n  const {\n    updateFilters,\n    filters,\n    queryParameters: { tags: tagsParameter }\n  } = useEntityList();\n  const catalogApi = useApi(catalogApiRef);\n  const { value: availableTags } = useAsync(async () => {\n    var _a2;\n    const facet = \"metadata.tags\";\n    const { facets } = await catalogApi.getEntityFacets({\n      facets: [facet],\n      filter: (_a2 = filters.kind) == null ? void 0 : _a2.getCatalogFilters()\n    });\n    return facets[facet].map(({ value }) => value);\n  }, [filters.kind]);\n  const queryParamTags = useMemo(() => [tagsParameter].flat().filter(Boolean), [tagsParameter]);\n  const [selectedTags, setSelectedTags] = useState(queryParamTags.length ? queryParamTags : (_b = (_a = filters.tags) == null ? void 0 : _a.values) != null ? _b : []);\n  useEffect(() => {\n    if (queryParamTags.length) {\n      setSelectedTags(queryParamTags);\n    }\n  }, [queryParamTags]);\n  useEffect(() => {\n    updateFilters({\n      tags: selectedTags.length ? new EntityTagFilter(selectedTags) : void 0\n    });\n  }, [selectedTags, updateFilters]);\n  if (!(availableTags == null ? void 0 : availableTags.length))\n    return null;\n  return /* @__PURE__ */ React.createElement(Box, {\n    pb: 1,\n    pt: 1\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"button\"\n  }, \"Tags\"), /* @__PURE__ */ React.createElement(Autocomplete, {\n    multiple: true,\n    \"aria-label\": \"Tags\",\n    options: availableTags,\n    value: selectedTags,\n    onChange: (_, value) => setSelectedTags(value),\n    renderOption: (option, { selected }) => /* @__PURE__ */ React.createElement(FormControlLabel, {\n      control: /* @__PURE__ */ React.createElement(Checkbox, {\n        icon,\n        checkedIcon,\n        checked: selected\n      }),\n      label: option\n    }),\n    size: \"small\",\n    popupIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, {\n      \"data-testid\": \"tag-picker-expand\"\n    }),\n    renderInput: (params) => /* @__PURE__ */ React.createElement(TextField, {\n      ...params,\n      className: classes.input,\n      variant: \"outlined\"\n    })\n  }));\n};\n\nconst EntityTypePicker = (props) => {\n  var _a;\n  const { hidden, initialFilter } = props;\n  const alertApi = useApi(alertApiRef);\n  const { error, availableTypes, selectedTypes, setSelectedTypes } = useEntityTypeFilter();\n  useEffect(() => {\n    if (error) {\n      alertApi.post({\n        message: `Failed to load entity types`,\n        severity: \"error\"\n      });\n    }\n    if (initialFilter) {\n      setSelectedTypes([initialFilter]);\n    }\n  }, [error, alertApi, initialFilter, setSelectedTypes]);\n  if (availableTypes.length === 0 || error)\n    return null;\n  const items = [\n    { value: \"all\", label: \"All\" },\n    ...availableTypes.map((type) => ({\n      value: type,\n      label: capitalize(type)\n    }))\n  ];\n  return hidden ? null : /* @__PURE__ */ React.createElement(Box, {\n    pb: 1,\n    pt: 1\n  }, /* @__PURE__ */ React.createElement(Select, {\n    label: \"Type\",\n    items,\n    selected: (_a = items.length > 1 ? selectedTypes[0] : void 0) != null ? _a : \"all\",\n    onChange: (value) => setSelectedTypes(value === \"all\" ? [] : [String(value)])\n  }));\n};\n\nconst YellowStar = withStyles({\n  root: {\n    color: \"#f3ba37\"\n  }\n})(Star);\nconst FavoriteEntity = (props) => {\n  const { toggleStarredEntity, isStarredEntity } = useStarredEntity(props.entity);\n  return /* @__PURE__ */ React.createElement(IconButton, {\n    \"aria-label\": \"favorite\",\n    color: \"inherit\",\n    ...props,\n    onClick: () => toggleStarredEntity()\n  }, /* @__PURE__ */ React.createElement(Tooltip, {\n    title: isStarredEntity ? \"Remove from favorites\" : \"Add to favorites\"\n  }, isStarredEntity ? /* @__PURE__ */ React.createElement(YellowStar, null) : /* @__PURE__ */ React.createElement(StarBorder, null)));\n};\n\nconst DEFAULT_ICON = WorkIcon;\nfunction getKind(kind, entityRef) {\n  if (kind) {\n    return kind.toLocaleLowerCase(\"en-US\");\n  }\n  if (entityRef) {\n    try {\n      return parseEntityRef(entityRef).kind.toLocaleLowerCase(\"en-US\");\n    } catch {\n      return void 0;\n    }\n  }\n  return void 0;\n}\nfunction useIcon(kind, entityRef) {\n  const app = useApp();\n  const actualKind = getKind(kind, entityRef);\n  if (!actualKind) {\n    return DEFAULT_ICON;\n  }\n  const icon = app.getSystemIcon(`kind:${actualKind}`);\n  return icon || DEFAULT_ICON;\n}\nfunction EntityKindIcon(props) {\n  const { kind, entityRef, ...otherProps } = props;\n  const Icon = useIcon(kind, entityRef);\n  return /* @__PURE__ */ React.createElement(Icon, {\n    ...otherProps\n  });\n}\n\nconst useStyles$6 = makeStyles((theme) => ({\n  node: {\n    fill: theme.palette.grey[300],\n    stroke: theme.palette.grey[300],\n    \"&.primary\": {\n      fill: theme.palette.primary.light,\n      stroke: theme.palette.primary.light\n    },\n    \"&.secondary\": {\n      fill: theme.palette.secondary.light,\n      stroke: theme.palette.secondary.light\n    }\n  },\n  text: {\n    fill: theme.palette.getContrastText(theme.palette.grey[300]),\n    \"&.primary\": {\n      fill: theme.palette.primary.contrastText\n    },\n    \"&.secondary\": {\n      fill: theme.palette.secondary.contrastText\n    },\n    \"&.focused\": {\n      fontWeight: \"bold\"\n    }\n  },\n  clickable: {\n    cursor: \"pointer\"\n  }\n}));\nfunction useAncestry(root) {\n  const catalogClient = useApi(catalogApiRef);\n  const entityRef = stringifyEntityRef(root);\n  const { loading, error, value } = useAsync(async () => {\n    const response = await catalogClient.getEntityAncestors({ entityRef });\n    const nodes = new Array();\n    const edges = new Array();\n    for (const current of response.items) {\n      const currentRef = stringifyEntityRef(current.entity);\n      const isRootNode = currentRef === response.rootEntityRef;\n      nodes.push({ id: currentRef, root: isRootNode, ...current.entity });\n      for (const parentRef of current.parentEntityRefs) {\n        edges.push({ from: currentRef, to: parentRef });\n      }\n    }\n    return { nodes, edges };\n  }, [entityRef]);\n  return {\n    loading,\n    error,\n    nodes: (value == null ? void 0 : value.nodes) || [],\n    edges: (value == null ? void 0 : value.edges) || []\n  };\n}\nfunction CustomNode({ node }) {\n  const classes = useStyles$6();\n  const navigate = useNavigate();\n  const entityRoute = useRouteRef(entityRouteRef);\n  const [width, setWidth] = useState(0);\n  const [height, setHeight] = useState(0);\n  const idRef = useRef(null);\n  useLayoutEffect(() => {\n    if (idRef.current) {\n      let { height: renderedHeight, width: renderedWidth } = idRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setWidth(renderedWidth);\n        setHeight(renderedHeight);\n      }\n    }\n  }, [width, height]);\n  const padding = 10;\n  const iconSize = height;\n  const paddedIconWidth = iconSize + padding;\n  const paddedWidth = paddedIconWidth + width + padding * 2;\n  const paddedHeight = height + padding * 2;\n  const displayTitle = node.metadata.title || (node.kind && node.metadata.name && node.metadata.namespace ? humanizeEntityRef({\n    kind: node.kind,\n    name: node.metadata.name,\n    namespace: node.metadata.namespace || \"\"\n  }) : node.id);\n  const onClick = () => {\n    navigate(entityRoute({\n      kind: node.kind,\n      namespace: node.metadata.namespace || DEFAULT_NAMESPACE,\n      name: node.metadata.name\n    }));\n  };\n  return /* @__PURE__ */ React.createElement(\"g\", {\n    onClick,\n    className: classes.clickable\n  }, /* @__PURE__ */ React.createElement(\"rect\", {\n    className: classNames(classes.node, node.root ? \"secondary\" : \"primary\"),\n    width: paddedWidth,\n    height: paddedHeight,\n    rx: 10\n  }), /* @__PURE__ */ React.createElement(EntityKindIcon, {\n    kind: node.kind,\n    y: padding,\n    x: padding,\n    width: iconSize,\n    height: iconSize,\n    className: classNames(classes.text, node.root ? \"secondary\" : \"primary\")\n  }), /* @__PURE__ */ React.createElement(\"text\", {\n    ref: idRef,\n    className: classNames(classes.text, node.root ? \"secondary\" : \"primary\"),\n    y: paddedHeight / 2,\n    x: paddedIconWidth + (width + padding * 2) / 2,\n    textAnchor: \"middle\",\n    alignmentBaseline: \"middle\"\n  }, displayTitle));\n}\nfunction AncestryPage(props) {\n  const { loading, error, nodes, edges } = useAncestry(props.entity);\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  } else if (error) {\n    return /* @__PURE__ */ React.createElement(ResponseErrorPanel, {\n      error\n    });\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogContentText, {\n    variant: \"h2\"\n  }, \"Ancestry\"), /* @__PURE__ */ React.createElement(DialogContentText, {\n    gutterBottom: true\n  }, \"This is the ancestry of entities above the current one - as in, the chain(s) of entities down to the current one, where\", \" \", /* @__PURE__ */ React.createElement(Link, {\n    to: \"https://backstage.io/docs/features/software-catalog/life-of-an-entity\"\n  }, \"processors emitted\"), \" \", \"child entities that ultimately led to the current one existing. Note that this is a completely different mechanism from relations.\"), /* @__PURE__ */ React.createElement(Box, {\n    mt: 4\n  }, /* @__PURE__ */ React.createElement(DependencyGraph, {\n    nodes,\n    edges,\n    renderNode: CustomNode,\n    direction: DependencyGraphTypes.Direction.BOTTOM_TOP,\n    zoom: \"enable-on-click\"\n  })));\n}\n\nconst useStyles$5 = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n    flexDirection: \"column\"\n  },\n  marginTop: {\n    marginTop: theme.spacing(2)\n  },\n  helpIcon: {\n    marginLeft: theme.spacing(1),\n    color: theme.palette.text.disabled\n  },\n  monospace: {\n    fontFamily: \"monospace\"\n  }\n}));\nfunction ListItemText(props) {\n  const classes = useStyles$5();\n  return /* @__PURE__ */ React.createElement(ListItemText$1, {\n    ...props,\n    primaryTypographyProps: { className: classes.monospace },\n    secondaryTypographyProps: { className: classes.monospace }\n  });\n}\nfunction ListSubheader(props) {\n  const classes = useStyles$5();\n  return /* @__PURE__ */ React.createElement(ListSubheader$1, {\n    className: classes.monospace\n  }, props.children);\n}\nfunction Container(props) {\n  return /* @__PURE__ */ React.createElement(Box, {\n    mt: 2\n  }, /* @__PURE__ */ React.createElement(Card, {\n    variant: \"outlined\"\n  }, /* @__PURE__ */ React.createElement(CardContent, null, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"h6\",\n    gutterBottom: true\n  }, props.title, props.helpLink && /* @__PURE__ */ React.createElement(HelpIcon, {\n    to: props.helpLink\n  })), props.children)));\n}\nfunction KeyValueListItem(props) {\n  const [key, value] = props.entry;\n  return /* @__PURE__ */ React.createElement(ListItem, null, props.indent && /* @__PURE__ */ React.createElement(ListItemIcon, null), /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: key,\n    secondary: !value.match(/^url:https?:\\/\\//) ? value : /* @__PURE__ */ React.createElement(React.Fragment, null, value.substring(0, 4), /* @__PURE__ */ React.createElement(Link, {\n      to: value.substring(4)\n    }, value.substring(4)))\n  }));\n}\nfunction HelpIcon(props) {\n  const classes = useStyles$5();\n  return /* @__PURE__ */ React.createElement(Link, {\n    to: props.to,\n    className: classes.helpIcon\n  }, /* @__PURE__ */ React.createElement(HelpOutlineIcon, {\n    fontSize: \"inherit\"\n  }));\n}\n\nconst useStyles$4 = makeStyles({\n  root: {\n    display: \"flex\",\n    flexDirection: \"column\"\n  }\n});\nfunction useColocated(entity) {\n  var _a, _b;\n  const catalogApi = useApi(catalogApiRef);\n  const currentEntityRef = stringifyEntityRef(entity);\n  const location = (_a = entity.metadata.annotations) == null ? void 0 : _a[ANNOTATION_LOCATION];\n  const origin = (_b = entity.metadata.annotations) == null ? void 0 : _b[ANNOTATION_ORIGIN_LOCATION];\n  const { loading, error, value } = useAsync(async () => {\n    if (!location && !origin) {\n      return [];\n    }\n    const response = await catalogApi.getEntities({\n      filter: [\n        ...location ? [{ [`metadata.annotations.${ANNOTATION_LOCATION}`]: location }] : [],\n        ...origin ? [{ [`metadata.annotations.${ANNOTATION_ORIGIN_LOCATION}`]: origin }] : []\n      ]\n    });\n    return response.items;\n  }, [location, origin]);\n  return {\n    loading,\n    error,\n    location,\n    originLocation: origin,\n    colocatedEntities: value == null ? void 0 : value.filter((colocated) => stringifyEntityRef(colocated) !== currentEntityRef)\n  };\n}\nfunction EntityList(props) {\n  return /* @__PURE__ */ React.createElement(List, {\n    dense: true\n  }, props.header && /* @__PURE__ */ React.createElement(KeyValueListItem, {\n    key: \"header\",\n    entry: props.header\n  }), props.entities.map((entity) => /* @__PURE__ */ React.createElement(ListItem, {\n    key: stringifyEntityRef(entity)\n  }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(EntityKindIcon, {\n    kind: entity.kind\n  })), /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: /* @__PURE__ */ React.createElement(EntityRefLink, {\n      entityRef: entity\n    })\n  }))));\n}\nfunction Contents$1(props) {\n  const { entity } = props;\n  const { loading, error, location, originLocation, colocatedEntities } = useColocated(entity);\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  } else if (error) {\n    return /* @__PURE__ */ React.createElement(ResponseErrorPanel, {\n      error\n    });\n  }\n  if (!location && !originLocation) {\n    return /* @__PURE__ */ React.createElement(Alert, {\n      severity: \"warning\"\n    }, \"Entity had no location information.\");\n  } else if (!(colocatedEntities == null ? void 0 : colocatedEntities.length)) {\n    return /* @__PURE__ */ React.createElement(Alert, {\n      severity: \"info\"\n    }, \"There were no other entities on this location.\");\n  }\n  if (location === originLocation) {\n    return /* @__PURE__ */ React.createElement(EntityList, {\n      entities: colocatedEntities\n    });\n  }\n  const atLocation = colocatedEntities.filter((e) => {\n    var _a;\n    return ((_a = e.metadata.annotations) == null ? void 0 : _a[ANNOTATION_LOCATION]) === location;\n  });\n  const atOrigin = colocatedEntities.filter((e) => {\n    var _a;\n    return ((_a = e.metadata.annotations) == null ? void 0 : _a[ANNOTATION_ORIGIN_LOCATION]) === originLocation;\n  });\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, atLocation.length > 0 && /* @__PURE__ */ React.createElement(EntityList, {\n    entities: atLocation,\n    header: [\"At the same location\", location]\n  }), atOrigin.length > 0 && /* @__PURE__ */ React.createElement(EntityList, {\n    entities: atOrigin,\n    header: [\"At the same origin\", originLocation]\n  }));\n}\nfunction ColocatedPage(props) {\n  const classes = useStyles$4();\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogContentText, {\n    variant: \"h2\"\n  }, \"Colocated\"), /* @__PURE__ */ React.createElement(DialogContentText, null, \"These are the entities that are colocated with this entity - as in, they originated from the same data source (e.g. came from the same YAML file), or from the same origin (e.g. the originally registered URL).\"), /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.root\n  }, /* @__PURE__ */ React.createElement(Contents$1, {\n    entity: props.entity\n  })));\n}\n\nfunction sortKeys(data) {\n  return Object.fromEntries([...Object.entries(data)].sort((a, b) => a[0] < b[0] ? -1 : 1));\n}\n\nfunction JsonPage(props) {\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogContentText, {\n    variant: \"h2\"\n  }, \"Entity as JSON\"), /* @__PURE__ */ React.createElement(DialogContentText, null, \"This is the raw entity data as received from the catalog, on JSON form.\"), /* @__PURE__ */ React.createElement(DialogContentText, null, /* @__PURE__ */ React.createElement(\"div\", {\n    style: { fontSize: \"75%\" },\n    \"data-testid\": \"code-snippet\"\n  }, /* @__PURE__ */ React.createElement(CodeSnippet, {\n    text: JSON.stringify(sortKeys(props.entity), void 0, 2),\n    language: \"json\",\n    showCopyCodeButton: true\n  }))));\n}\n\nconst useStyles$3 = makeStyles({\n  root: {\n    display: \"flex\",\n    flexDirection: \"column\"\n  }\n});\nfunction OverviewPage(props) {\n  var _a, _b;\n  const classes = useStyles$3();\n  const {\n    apiVersion,\n    kind,\n    metadata,\n    spec,\n    relations = [],\n    status = {}\n  } = props.entity;\n  const groupedRelations = groupBy$1(sortBy(relations, (r) => r.targetRef), \"type\");\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogContentText, {\n    variant: \"h2\"\n  }, \"Overview\"), /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.root\n  }, /* @__PURE__ */ React.createElement(Container, {\n    title: \"Identity\"\n  }, /* @__PURE__ */ React.createElement(List, {\n    dense: true\n  }, /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: \"apiVersion\",\n    secondary: apiVersion\n  })), /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: \"kind\",\n    secondary: kind\n  })), (spec == null ? void 0 : spec.type) && /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: \"spec.type\",\n    secondary: spec.type\n  })), metadata.uid && /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: \"uid\",\n    secondary: metadata.uid\n  })), metadata.etag && /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: \"etag\",\n    secondary: metadata.etag\n  })))), /* @__PURE__ */ React.createElement(Container, {\n    title: \"Metadata\"\n  }, !!Object.keys(metadata.annotations || {}).length && /* @__PURE__ */ React.createElement(List, {\n    dense: true,\n    subheader: /* @__PURE__ */ React.createElement(ListSubheader, null, \"Annotations\", /* @__PURE__ */ React.createElement(HelpIcon, {\n      to: \"https://backstage.io/docs/features/software-catalog/well-known-annotations\"\n    }))\n  }, Object.entries(metadata.annotations).map((entry) => /* @__PURE__ */ React.createElement(KeyValueListItem, {\n    key: entry[0],\n    indent: true,\n    entry\n  }))), !!Object.keys(metadata.labels || {}).length && /* @__PURE__ */ React.createElement(List, {\n    dense: true,\n    subheader: /* @__PURE__ */ React.createElement(ListSubheader, null, \"Labels\")\n  }, Object.entries(metadata.labels).map((entry) => /* @__PURE__ */ React.createElement(KeyValueListItem, {\n    key: entry[0],\n    indent: true,\n    entry\n  }))), !!((_a = metadata.tags) == null ? void 0 : _a.length) && /* @__PURE__ */ React.createElement(List, {\n    dense: true,\n    subheader: /* @__PURE__ */ React.createElement(ListSubheader, null, \"Tags\")\n  }, metadata.tags.map((tag, index) => /* @__PURE__ */ React.createElement(ListItem, {\n    key: `${tag}-${index}`\n  }, /* @__PURE__ */ React.createElement(ListItemIcon, null), /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: tag\n  }))))), !!relations.length && /* @__PURE__ */ React.createElement(Container, {\n    title: \"Relations\",\n    helpLink: \"https://backstage.io/docs/features/software-catalog/well-known-relations\"\n  }, Object.entries(groupedRelations).map(([type, groupRelations], index) => /* @__PURE__ */ React.createElement(\"div\", {\n    key: index\n  }, /* @__PURE__ */ React.createElement(List, {\n    dense: true,\n    subheader: /* @__PURE__ */ React.createElement(ListSubheader, null, type)\n  }, groupRelations.map((group) => /* @__PURE__ */ React.createElement(ListItem, {\n    key: group.targetRef\n  }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(EntityKindIcon, {\n    entityRef: group.targetRef\n  })), /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: /* @__PURE__ */ React.createElement(EntityRefLink, {\n      entityRef: group.targetRef\n    })\n  }))))))), !!((_b = status.items) == null ? void 0 : _b.length) && /* @__PURE__ */ React.createElement(Container, {\n    title: \"Status\",\n    helpLink: \"https://backstage.io/docs/features/software-catalog/well-known-statuses\"\n  }, status.items.map((item, index) => /* @__PURE__ */ React.createElement(\"div\", {\n    key: index\n  }, /* @__PURE__ */ React.createElement(Typography, null, item.level, \": \", item.type), /* @__PURE__ */ React.createElement(Box, {\n    ml: 2\n  }, item.message))))));\n}\n\nfunction YamlPage(props) {\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogContentText$1, {\n    variant: \"h2\"\n  }, \"Entity as YAML\"), /* @__PURE__ */ React.createElement(DialogContentText$1, null, \"This is the raw entity data as received from the catalog, on YAML form.\"), /* @__PURE__ */ React.createElement(DialogContentText$1, null, /* @__PURE__ */ React.createElement(\"div\", {\n    style: { fontSize: \"75%\" },\n    \"data-testid\": \"code-snippet\"\n  }, /* @__PURE__ */ React.createElement(CodeSnippet, {\n    text: YAML.stringify(sortKeys(props.entity)),\n    language: \"yaml\",\n    showCopyCodeButton: true\n  }))));\n}\n\nconst useStyles$2 = makeStyles((theme) => ({\n  fullHeightDialog: {\n    height: \"calc(100% - 64px)\"\n  },\n  root: {\n    display: \"flex\",\n    flexGrow: 1,\n    width: \"100%\",\n    backgroundColor: theme.palette.background.paper\n  },\n  tabs: {\n    borderRight: `1px solid ${theme.palette.divider}`,\n    flexShrink: 0\n  },\n  tabContents: {\n    flexGrow: 1,\n    overflowX: \"auto\"\n  }\n}));\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props;\n  const classes = useStyles$2();\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    role: \"tabpanel\",\n    hidden: value !== index,\n    id: `vertical-tabpanel-${index}`,\n    \"aria-labelledby\": `vertical-tab-${index}`,\n    className: classes.tabContents,\n    ...other\n  }, value === index && /* @__PURE__ */ React.createElement(Box, {\n    pl: 3,\n    pr: 3\n  }, children));\n}\nfunction a11yProps(index) {\n  return {\n    id: `vertical-tab-${index}`,\n    \"aria-controls\": `vertical-tabpanel-${index}`\n  };\n}\nfunction InspectEntityDialog(props) {\n  const classes = useStyles$2();\n  const [activeTab, setActiveTab] = React.useState(0);\n  useEffect(() => {\n    setActiveTab(0);\n  }, [props.open]);\n  if (!props.entity) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(Dialog, {\n    fullWidth: true,\n    maxWidth: \"xl\",\n    open: props.open,\n    onClose: props.onClose,\n    \"aria-labelledby\": \"entity-inspector-dialog-title\",\n    PaperProps: { className: classes.fullHeightDialog }\n  }, /* @__PURE__ */ React.createElement(DialogTitle, {\n    id: \"entity-inspector-dialog-title\"\n  }, \"Entity Inspector\"), /* @__PURE__ */ React.createElement(DialogContent, {\n    dividers: true\n  }, /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.root\n  }, /* @__PURE__ */ React.createElement(Tabs, {\n    orientation: \"vertical\",\n    variant: \"scrollable\",\n    value: activeTab,\n    onChange: (_, newValue) => setActiveTab(newValue),\n    \"aria-label\": \"Inspector options\",\n    className: classes.tabs\n  }, /* @__PURE__ */ React.createElement(Tab, {\n    label: \"Overview\",\n    ...a11yProps(0)\n  }), /* @__PURE__ */ React.createElement(Tab, {\n    label: \"Ancestry\",\n    ...a11yProps(1)\n  }), /* @__PURE__ */ React.createElement(Tab, {\n    label: \"Colocated\",\n    ...a11yProps(2)\n  }), /* @__PURE__ */ React.createElement(Tab, {\n    label: \"Raw JSON\",\n    ...a11yProps(3)\n  }), /* @__PURE__ */ React.createElement(Tab, {\n    label: \"Raw YAML\",\n    ...a11yProps(4)\n  })), /* @__PURE__ */ React.createElement(TabPanel, {\n    value: activeTab,\n    index: 0\n  }, /* @__PURE__ */ React.createElement(OverviewPage, {\n    entity: props.entity\n  })), /* @__PURE__ */ React.createElement(TabPanel, {\n    value: activeTab,\n    index: 1\n  }, /* @__PURE__ */ React.createElement(AncestryPage, {\n    entity: props.entity\n  })), /* @__PURE__ */ React.createElement(TabPanel, {\n    value: activeTab,\n    index: 2\n  }, /* @__PURE__ */ React.createElement(ColocatedPage, {\n    entity: props.entity\n  })), /* @__PURE__ */ React.createElement(TabPanel, {\n    value: activeTab,\n    index: 3\n  }, /* @__PURE__ */ React.createElement(JsonPage, {\n    entity: props.entity\n  })), /* @__PURE__ */ React.createElement(TabPanel, {\n    value: activeTab,\n    index: 4\n  }, /* @__PURE__ */ React.createElement(YamlPage, {\n    entity: props.entity\n  })))), /* @__PURE__ */ React.createElement(DialogActions, null, /* @__PURE__ */ React.createElement(Button, {\n    onClick: props.onClose,\n    color: \"primary\"\n  }, \"Close\")));\n}\n\nfunction useUnregisterEntityDialogState(entity) {\n  var _a;\n  const catalogApi = useApi(catalogApiRef);\n  const locationRef = (_a = entity.metadata.annotations) == null ? void 0 : _a[ANNOTATION_ORIGIN_LOCATION];\n  const uid = entity.metadata.uid;\n  const isBootstrap = locationRef === \"bootstrap:bootstrap\";\n  const prerequisites = useAsync(async () => {\n    const locationPromise = catalogApi.getLocationByRef(locationRef);\n    let colocatedEntitiesPromise;\n    if (!locationRef) {\n      colocatedEntitiesPromise = Promise.resolve([]);\n    } else {\n      const locationAnnotationFilter = `metadata.annotations.${ANNOTATION_ORIGIN_LOCATION}`;\n      colocatedEntitiesPromise = catalogApi.getEntities({\n        filter: { [locationAnnotationFilter]: locationRef },\n        fields: [\n          \"kind\",\n          \"metadata.uid\",\n          \"metadata.name\",\n          \"metadata.namespace\"\n        ]\n      }).then((response) => response.items);\n    }\n    return Promise.all([locationPromise, colocatedEntitiesPromise]).then(([location2, colocatedEntities2]) => ({\n      location: location2,\n      colocatedEntities: colocatedEntities2\n    }));\n  }, [catalogApi, entity]);\n  const unregisterLocation = useCallback(async function unregisterLocationFn() {\n    const { location: location2 } = prerequisites.value;\n    await catalogApi.removeLocationById(location2.id);\n  }, [catalogApi, prerequisites]);\n  const deleteEntity = useCallback(async function deleteEntityFn() {\n    await catalogApi.removeEntityByUid(uid);\n  }, [catalogApi, uid]);\n  if (isBootstrap) {\n    return { type: \"bootstrap\", location: locationRef, deleteEntity };\n  }\n  const { loading, error, value } = prerequisites;\n  if (loading) {\n    return { type: \"loading\" };\n  } else if (error) {\n    return { type: \"error\", error };\n  }\n  const { location, colocatedEntities } = value;\n  if (!location) {\n    return { type: \"only-delete\", deleteEntity };\n  }\n  return {\n    type: \"unregister\",\n    location: locationRef,\n    colocatedEntities: colocatedEntities.map(getCompoundEntityRef),\n    unregisterLocation,\n    deleteEntity\n  };\n}\n\nconst useStyles$1 = makeStyles({\n  advancedButton: {\n    fontSize: \"0.7em\"\n  }\n});\nconst Contents = ({\n  entity,\n  onConfirm\n}) => {\n  var _a;\n  const alertApi = useApi(alertApiRef);\n  const configApi = useApi(configApiRef);\n  const classes = useStyles$1();\n  const state = useUnregisterEntityDialogState(entity);\n  const [showDelete, setShowDelete] = useState(false);\n  const [busy, setBusy] = useState(false);\n  const appTitle = (_a = configApi.getOptionalString(\"app.title\")) != null ? _a : \"Backstage\";\n  const onUnregister = useCallback(async function onUnregisterFn() {\n    if (\"unregisterLocation\" in state) {\n      setBusy(true);\n      try {\n        await state.unregisterLocation();\n        onConfirm();\n      } catch (err) {\n        assertError(err);\n        alertApi.post({ message: err.message });\n      } finally {\n        setBusy(false);\n      }\n    }\n  }, [alertApi, onConfirm, state]);\n  const onDelete = useCallback(async function onDeleteFn() {\n    if (\"deleteEntity\" in state) {\n      setBusy(true);\n      try {\n        await state.deleteEntity();\n        onConfirm();\n      } catch (err) {\n        assertError(err);\n        alertApi.post({ message: err.message });\n      } finally {\n        setBusy(false);\n      }\n    }\n  }, [alertApi, onConfirm, state]);\n  if (state.type === \"loading\") {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  }\n  if (state.type === \"error\") {\n    return /* @__PURE__ */ React.createElement(ResponseErrorPanel, {\n      error: state.error\n    });\n  }\n  if (state.type === \"bootstrap\") {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Alert$1, {\n      severity: \"info\"\n    }, 'You cannot unregister this entity, since it originates from a protected Backstage configuration (location \"', state.location, '\"). If you believe this is in error, please contact the ', appTitle, \" \", \"integrator.\"), /* @__PURE__ */ React.createElement(Box, {\n      marginTop: 2\n    }, !showDelete && /* @__PURE__ */ React.createElement(Button, {\n      variant: \"text\",\n      size: \"small\",\n      color: \"primary\",\n      className: classes.advancedButton,\n      onClick: () => setShowDelete(true)\n    }, \"Advanced Options\"), showDelete && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogContentText, null, \"You have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog.\"), /* @__PURE__ */ React.createElement(Button, {\n      variant: \"contained\",\n      color: \"secondary\",\n      disabled: busy,\n      onClick: onDelete\n    }, \"Delete Entity\"))));\n  }\n  if (state.type === \"only-delete\") {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogContentText, null, \"This entity does not seem to originate from a registered location. You therefore only have the option to delete it outright from the catalog.\"), /* @__PURE__ */ React.createElement(Button, {\n      variant: \"contained\",\n      color: \"secondary\",\n      disabled: busy,\n      onClick: onDelete\n    }, \"Delete Entity\"));\n  }\n  if (state.type === \"unregister\") {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogContentText, null, \"This action will unregister the following entities:\"), /* @__PURE__ */ React.createElement(DialogContentText, {\n      component: \"ul\"\n    }, state.colocatedEntities.map((e) => /* @__PURE__ */ React.createElement(\"li\", {\n      key: `${e.kind}:${e.namespace}/${e.name}`\n    }, /* @__PURE__ */ React.createElement(EntityRefLink, {\n      entityRef: e\n    })))), /* @__PURE__ */ React.createElement(DialogContentText, null, \"Located at the following location:\"), /* @__PURE__ */ React.createElement(DialogContentText, {\n      component: \"ul\"\n    }, /* @__PURE__ */ React.createElement(\"li\", null, state.location)), /* @__PURE__ */ React.createElement(DialogContentText, null, \"To undo, just re-register the entity in \", appTitle, \".\"), /* @__PURE__ */ React.createElement(Box, {\n      marginTop: 2\n    }, /* @__PURE__ */ React.createElement(Button, {\n      variant: \"contained\",\n      color: \"secondary\",\n      disabled: busy,\n      onClick: onUnregister\n    }, \"Unregister Location\"), !showDelete && /* @__PURE__ */ React.createElement(Box, {\n      component: \"span\",\n      marginLeft: 2\n    }, /* @__PURE__ */ React.createElement(Button, {\n      variant: \"text\",\n      size: \"small\",\n      color: \"primary\",\n      className: classes.advancedButton,\n      onClick: () => setShowDelete(true)\n    }, \"Advanced Options\"))), showDelete && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Box, {\n      paddingTop: 4,\n      paddingBottom: 4\n    }, /* @__PURE__ */ React.createElement(Divider, null)), /* @__PURE__ */ React.createElement(DialogContentText, null, \"You also have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog.\"), /* @__PURE__ */ React.createElement(Button, {\n      variant: \"contained\",\n      color: \"secondary\",\n      disabled: busy,\n      onClick: onDelete\n    }, \"Delete Entity\")));\n  }\n  return /* @__PURE__ */ React.createElement(Alert$1, {\n    severity: \"error\"\n  }, \"Internal error: Unknown state\");\n};\nconst UnregisterEntityDialog = (props) => {\n  const { open, onConfirm, onClose, entity } = props;\n  return /* @__PURE__ */ React.createElement(Dialog, {\n    open,\n    onClose\n  }, /* @__PURE__ */ React.createElement(DialogTitle, {\n    id: \"responsive-dialog-title\"\n  }, \"Are you sure you want to unregister this entity?\"), /* @__PURE__ */ React.createElement(DialogContent, null, /* @__PURE__ */ React.createElement(Contents, {\n    entity,\n    onConfirm\n  })), /* @__PURE__ */ React.createElement(DialogActions, null, /* @__PURE__ */ React.createElement(Button, {\n    onClick: onClose,\n    color: \"primary\"\n  }, \"Cancel\")));\n};\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    backgroundColor: \"rgba(0, 0, 0, .11)\",\n    boxShadow: \"none\",\n    margin: theme.spacing(1, 0, 1, 0)\n  },\n  title: {\n    margin: theme.spacing(1, 0, 0, 1),\n    textTransform: \"uppercase\",\n    fontSize: 12,\n    fontWeight: \"bold\"\n  },\n  listIcon: {\n    minWidth: 30,\n    color: theme.palette.text.primary\n  },\n  menuItem: {\n    minHeight: theme.spacing(6)\n  },\n  groupWrapper: {\n    margin: theme.spacing(1, 1, 2, 1)\n  }\n}), {\n  name: \"CatalogReactUserListPicker\"\n});\nfunction getFilterGroups(orgName) {\n  return [\n    {\n      name: \"Personal\",\n      items: [\n        {\n          id: \"owned\",\n          label: \"Owned\",\n          icon: SettingsIcon\n        },\n        {\n          id: \"starred\",\n          label: \"Starred\",\n          icon: Star\n        }\n      ]\n    },\n    {\n      name: orgName != null ? orgName : \"Company\",\n      items: [\n        {\n          id: \"all\",\n          label: \"All\"\n        }\n      ]\n    }\n  ];\n}\nconst UserListPicker = (props) => {\n  var _a;\n  const { initialFilter, availableFilters } = props;\n  const classes = useStyles();\n  const configApi = useApi(configApiRef);\n  const orgName = (_a = configApi.getOptionalString(\"organization.name\")) != null ? _a : \"Company\";\n  const {\n    filters,\n    updateFilters,\n    backendEntities,\n    queryParameters: { kind: kindParameter, user: userParameter },\n    loading: loadingBackendEntities\n  } = useEntityList();\n  const userAndGroupFilterIds = [\"starred\", \"all\"];\n  const filterGroups = getFilterGroups(orgName).map((filterGroup) => ({\n    ...filterGroup,\n    items: filterGroup.items.filter(({ id }) => [\"group\", \"user\"].some((kind) => kind === kindParameter) ? userAndGroupFilterIds.includes(id) : !availableFilters || availableFilters.includes(id))\n  })).filter(({ items }) => !!items.length);\n  const { isStarredEntity } = useStarredEntities();\n  const { isOwnedEntity, loading: loadingEntityOwnership } = useEntityOwnership();\n  const loading = loadingBackendEntities || loadingEntityOwnership;\n  const ownedFilter = useMemo(() => new UserListFilter(\"owned\", isOwnedEntity, isStarredEntity), [isOwnedEntity, isStarredEntity]);\n  const starredFilter = useMemo(() => new UserListFilter(\"starred\", isOwnedEntity, isStarredEntity), [isOwnedEntity, isStarredEntity]);\n  const queryParamUserFilter = useMemo(() => [userParameter].flat()[0], [userParameter]);\n  const [selectedUserFilter, setSelectedUserFilter] = useState(queryParamUserFilter != null ? queryParamUserFilter : initialFilter);\n  const entitiesWithoutUserFilter = useMemo(() => backendEntities.filter(reduceEntityFilters(compact(Object.values({ ...filters, user: void 0 })))), [filters, backendEntities]);\n  const filterCounts = useMemo(() => ({\n    all: entitiesWithoutUserFilter.length,\n    starred: entitiesWithoutUserFilter.filter((entity) => starredFilter.filterEntity(entity)).length,\n    owned: entitiesWithoutUserFilter.filter((entity) => ownedFilter.filterEntity(entity)).length\n  }), [entitiesWithoutUserFilter, starredFilter, ownedFilter]);\n  useEffect(() => {\n    if (queryParamUserFilter) {\n      setSelectedUserFilter(queryParamUserFilter);\n    }\n  }, [queryParamUserFilter]);\n  useEffect(() => {\n    if (!loading && !!selectedUserFilter && selectedUserFilter !== \"all\" && filterCounts[selectedUserFilter] === 0) {\n      setSelectedUserFilter(\"all\");\n    }\n  }, [loading, filterCounts, selectedUserFilter, setSelectedUserFilter]);\n  useEffect(() => {\n    updateFilters({\n      user: selectedUserFilter ? new UserListFilter(selectedUserFilter, isOwnedEntity, isStarredEntity) : void 0\n    });\n  }, [selectedUserFilter, isOwnedEntity, isStarredEntity, updateFilters]);\n  return /* @__PURE__ */ React.createElement(Card, {\n    className: classes.root\n  }, filterGroups.map((group) => /* @__PURE__ */ React.createElement(Fragment, {\n    key: group.name\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"subtitle2\",\n    className: classes.title\n  }, group.name), /* @__PURE__ */ React.createElement(Card, {\n    className: classes.groupWrapper\n  }, /* @__PURE__ */ React.createElement(List, {\n    disablePadding: true,\n    dense: true\n  }, group.items.map((item) => {\n    var _a2, _b;\n    return /* @__PURE__ */ React.createElement(MenuItem, {\n      key: item.id,\n      button: true,\n      divider: true,\n      onClick: () => setSelectedUserFilter(item.id),\n      selected: item.id === ((_a2 = filters.user) == null ? void 0 : _a2.value),\n      className: classes.menuItem,\n      disabled: filterCounts[item.id] === 0,\n      \"data-testid\": `user-picker-${item.id}`\n    }, item.icon && /* @__PURE__ */ React.createElement(ListItemIcon, {\n      className: classes.listIcon\n    }, /* @__PURE__ */ React.createElement(item.icon, {\n      fontSize: \"small\"\n    })), /* @__PURE__ */ React.createElement(ListItemText$1, null, /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"body1\"\n    }, item.label)), /* @__PURE__ */ React.createElement(ListItemSecondaryAction, null, (_b = filterCounts[item.id]) != null ? _b : \"-\"));\n  }))))));\n};\n\nconst MockEntityListContextProvider = ({\n  children,\n  value\n}) => {\n  var _a;\n  const [filters, setFilters] = useState((_a = value == null ? void 0 : value.filters) != null ? _a : {});\n  const updateFilters = useCallback((update) => {\n    setFilters((prevFilters) => {\n      const newFilters = typeof update === \"function\" ? update(prevFilters) : update;\n      return { ...prevFilters, ...newFilters };\n    });\n  }, []);\n  const defaultValues = useMemo(() => ({\n    entities: [],\n    backendEntities: [],\n    queryParameters: {}\n  }), []);\n  const resolvedValue = useMemo(() => {\n    var _a2, _b, _c, _d, _e;\n    return {\n      entities: (_a2 = value == null ? void 0 : value.entities) != null ? _a2 : defaultValues.entities,\n      backendEntities: (_b = value == null ? void 0 : value.backendEntities) != null ? _b : defaultValues.backendEntities,\n      updateFilters: (_c = value == null ? void 0 : value.updateFilters) != null ? _c : updateFilters,\n      filters,\n      loading: (_d = value == null ? void 0 : value.loading) != null ? _d : false,\n      queryParameters: (_e = value == null ? void 0 : value.queryParameters) != null ? _e : defaultValues.queryParameters,\n      error: value == null ? void 0 : value.error\n    };\n  }, [value, defaultValues, filters, updateFilters]);\n  return /* @__PURE__ */ React.createElement(EntityListContext.Provider, {\n    value: resolvedValue\n  }, children);\n};\n\nexport { AsyncEntityProvider, CatalogFilterLayout, EntityKindFilter, EntityKindPicker, EntityLifecycleFilter, EntityLifecyclePicker, EntityListContext, EntityListProvider, EntityOwnerFilter, EntityOwnerPicker, EntityProvider, EntityRefLink, EntityRefLinks, EntitySearchBar, EntityTable, EntityTagFilter, EntityTagPicker, EntityTextFilter, EntityTypeFilter, EntityTypePicker, FavoriteEntity, InspectEntityDialog, MockEntityListContextProvider, MockStarredEntitiesApi, UnregisterEntityDialog, UserListFilter, UserListPicker, catalogApiRef, columnFactories, entityRouteParams, entityRouteRef, getEntityRelations, getEntitySourceLocation, humanizeEntityRef, isOwnerOf, starredEntitiesApiRef, useAsyncEntity, useEntity, useEntityList, useEntityOwnership, useEntityPermission, useEntityTypeFilter, useRelatedEntities, useStarredEntities, useStarredEntity };\n//# sourceMappingURL=index.esm.js.map\n","import ObservableImpl from 'zen-observable';\nimport { stringifyEntityRef, RELATION_PART_OF, RELATION_OWNED_BY, ANNOTATION_EDIT_URL, DEFAULT_NAMESPACE, ANNOTATION_LOCATION, ANNOTATION_VIEW_URL } from '@backstage/catalog-model';\nimport { isArray, isString, capitalize as capitalize$1 } from 'lodash';\nimport { Link, HeaderIconLinkRow, OverflowTooltip, WarningPanel, CodeSnippet, Table, Page, Header, Progress, RoutedTabs, Content, HeaderLabel, ResponseErrorPanel } from '@backstage/core-components';\nimport { createExternalRouteRef, createRouteRef, useElementFilter, useApi, alertApiRef, useRouteRef, attachComponentData, useRouteRefParams, useApiHolder, createPlugin, createApiFactory, discoveryApiRef, fetchApiRef, storageApiRef, createRoutableExtension, createComponentExtension } from '@backstage/core-plugin-api';\nimport { scmIntegrationsApiRef, ScmIntegrationIcon } from '@backstage/integration-react';\nimport { getEntityRelations, EntityRefLinks, useEntity, catalogApiRef, getEntitySourceLocation, useEntityList, EntityKindFilter, humanizeEntityRef, EntityRefLink, useStarredEntities, useEntityPermission, entityRouteRef, useAsyncEntity, UnregisterEntityDialog, InspectEntityDialog, FavoriteEntity, CatalogFilterLayout, starredEntitiesApiRef } from '@backstage/plugin-catalog-react';\nimport { makeStyles, Typography, Grid, Chip, Card, CardHeader, IconButton, Divider, CardContent, createStyles, capitalize, Select, InputBase, MenuItem, ListItem, ListItemText, Box, ListItemIcon, Popover, MenuList, Dialog, DialogTitle, DialogActions, Button } from '@material-ui/core';\nimport CachedIcon from '@material-ui/icons/Cached';\nimport DocsIcon from '@material-ui/icons/Description';\nimport EditIcon from '@material-ui/icons/Edit';\nimport React, { useCallback, useMemo, useState, useEffect } from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport OpenInNew from '@material-ui/icons/OpenInNew';\nimport StarBorder from '@material-ui/icons/StarBorder';\nimport { withStyles, makeStyles as makeStyles$1 } from '@material-ui/core/styles';\nimport Star from '@material-ui/icons/Star';\nimport { Alert } from '@material-ui/lab';\nimport { useLocation, useNavigate } from 'react-router';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport BugReportIcon from '@material-ui/icons/BugReport';\nimport MoreVert from '@material-ui/icons/MoreVert';\nimport { catalogEntityDeletePermission } from '@backstage/plugin-catalog-common';\nimport { assertError } from '@backstage/errors';\nimport { ENTITY_STATUS_CATALOG_PROCESSING_TYPE, CatalogClient } from '@backstage/catalog-client';\n\nasync function performMigrationToTheNewBucket({\n  storageApi\n}) {\n  var _a;\n  const source = storageApi.forBucket(\"settings\");\n  const target = storageApi.forBucket(\"starredEntities\");\n  const oldStarredEntities = source.snapshot(\"starredEntities\").value;\n  if (!isArray(oldStarredEntities)) {\n    return;\n  }\n  const targetEntities = new Set((_a = target.snapshot(\"entityRefs\").value) != null ? _a : []);\n  oldStarredEntities.filter(isString).map((old) => old.split(\":\")).filter((split) => split.length === 4 && split[0] === \"entity\").map(([_, kind, namespace, name]) => stringifyEntityRef({ kind, namespace, name })).forEach((e) => targetEntities.add(e));\n  await target.set(\"entityRefs\", Array.from(targetEntities));\n  await source.remove(\"starredEntities\");\n}\n\nclass DefaultStarredEntitiesApi {\n  constructor(opts) {\n    this.subscribers = /* @__PURE__ */ new Set();\n    this.observable = new ObservableImpl((subscriber) => {\n      subscriber.next(new Set(this.starredEntities));\n      this.subscribers.add(subscriber);\n      return () => {\n        this.subscribers.delete(subscriber);\n      };\n    });\n    var _a;\n    performMigrationToTheNewBucket(opts).then();\n    this.settingsStore = opts.storageApi.forBucket(\"starredEntities\");\n    this.starredEntities = new Set((_a = this.settingsStore.snapshot(\"entityRefs\").value) != null ? _a : []);\n    this.settingsStore.observe$(\"entityRefs\").subscribe({\n      next: (next) => {\n        var _a2;\n        this.starredEntities = new Set((_a2 = next.value) != null ? _a2 : []);\n        this.notifyChanges();\n      }\n    });\n  }\n  async toggleStarred(entityRef) {\n    if (this.starredEntities.has(entityRef)) {\n      this.starredEntities.delete(entityRef);\n    } else {\n      this.starredEntities.add(entityRef);\n    }\n    await this.settingsStore.set(\"entityRefs\", Array.from(this.starredEntities));\n  }\n  starredEntitie$() {\n    return this.observable;\n  }\n  notifyChanges() {\n    for (const subscription of this.subscribers) {\n      subscription.next(new Set(this.starredEntities));\n    }\n  }\n}\n\nconst createComponentRouteRef = createExternalRouteRef({\n  id: \"create-component\",\n  optional: true\n});\nconst viewTechDocRouteRef = createExternalRouteRef({\n  id: \"view-techdoc\",\n  optional: true,\n  params: [\"namespace\", \"kind\", \"name\"]\n});\nconst rootRouteRef = createRouteRef({\n  id: \"catalog\"\n});\n\nconst useStyles$5 = makeStyles((theme) => ({\n  value: {\n    fontWeight: \"bold\",\n    overflow: \"hidden\",\n    lineHeight: \"24px\",\n    wordBreak: \"break-word\"\n  },\n  label: {\n    color: theme.palette.text.secondary,\n    textTransform: \"uppercase\",\n    fontSize: \"10px\",\n    fontWeight: \"bold\",\n    letterSpacing: 0.5,\n    overflow: \"hidden\",\n    whiteSpace: \"nowrap\"\n  }\n}));\nfunction AboutField(props) {\n  const { label, value, gridSizes, children } = props;\n  const classes = useStyles$5();\n  const childElements = useElementFilter(children, (c) => c.getElements());\n  const content = childElements.length > 0 ? childElements : /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"body2\",\n    className: classes.value\n  }, value || `unknown`);\n  return /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    ...gridSizes\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"subtitle2\",\n    className: classes.label\n  }, label), content);\n}\n\nconst useStyles$4 = makeStyles({\n  description: {\n    wordBreak: \"break-word\"\n  }\n});\nfunction AboutContent(props) {\n  var _a, _b, _c, _d, _e, _f;\n  const { entity } = props;\n  const classes = useStyles$4();\n  const isSystem = entity.kind.toLocaleLowerCase(\"en-US\") === \"system\";\n  const isResource = entity.kind.toLocaleLowerCase(\"en-US\") === \"resource\";\n  const isComponent = entity.kind.toLocaleLowerCase(\"en-US\") === \"component\";\n  const isAPI = entity.kind.toLocaleLowerCase(\"en-US\") === \"api\";\n  const isTemplate = entity.kind.toLocaleLowerCase(\"en-US\") === \"template\";\n  const isLocation = entity.kind.toLocaleLowerCase(\"en-US\") === \"location\";\n  const isGroup = entity.kind.toLocaleLowerCase(\"en-US\") === \"group\";\n  const partOfSystemRelations = getEntityRelations(entity, RELATION_PART_OF, {\n    kind: \"system\"\n  });\n  const partOfComponentRelations = getEntityRelations(entity, RELATION_PART_OF, {\n    kind: \"component\"\n  });\n  const partOfDomainRelations = getEntityRelations(entity, RELATION_PART_OF, {\n    kind: \"domain\"\n  });\n  const ownedByRelations = getEntityRelations(entity, RELATION_OWNED_BY);\n  return /* @__PURE__ */ React.createElement(Grid, {\n    container: true\n  }, /* @__PURE__ */ React.createElement(AboutField, {\n    label: \"Description\",\n    gridSizes: { xs: 12 }\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"body2\",\n    paragraph: true,\n    className: classes.description\n  }, ((_a = entity == null ? void 0 : entity.metadata) == null ? void 0 : _a.description) || \"No description\")), /* @__PURE__ */ React.createElement(AboutField, {\n    label: \"Owner\",\n    value: \"No Owner\",\n    gridSizes: { xs: 12, sm: 6, lg: 4 }\n  }, ownedByRelations.length > 0 && /* @__PURE__ */ React.createElement(EntityRefLinks, {\n    entityRefs: ownedByRelations,\n    defaultKind: \"group\"\n  })), (isSystem || partOfDomainRelations.length > 0) && /* @__PURE__ */ React.createElement(AboutField, {\n    label: \"Domain\",\n    value: \"No Domain\",\n    gridSizes: { xs: 12, sm: 6, lg: 4 }\n  }, partOfDomainRelations.length > 0 && /* @__PURE__ */ React.createElement(EntityRefLinks, {\n    entityRefs: partOfDomainRelations,\n    defaultKind: \"domain\"\n  })), (isAPI || isComponent || isResource || partOfSystemRelations.length > 0) && /* @__PURE__ */ React.createElement(AboutField, {\n    label: \"System\",\n    value: \"No System\",\n    gridSizes: { xs: 12, sm: 6, lg: 4 }\n  }, partOfSystemRelations.length > 0 && /* @__PURE__ */ React.createElement(EntityRefLinks, {\n    entityRefs: partOfSystemRelations,\n    defaultKind: \"system\"\n  })), isComponent && partOfComponentRelations.length > 0 && /* @__PURE__ */ React.createElement(AboutField, {\n    label: \"Parent Component\",\n    value: \"No Parent Component\",\n    gridSizes: { xs: 12, sm: 6, lg: 4 }\n  }, /* @__PURE__ */ React.createElement(EntityRefLinks, {\n    entityRefs: partOfComponentRelations,\n    defaultKind: \"component\"\n  })), (isAPI || isComponent || isResource || isTemplate || isGroup || isLocation || typeof ((_b = entity == null ? void 0 : entity.spec) == null ? void 0 : _b.type) === \"string\") && /* @__PURE__ */ React.createElement(AboutField, {\n    label: \"Type\",\n    value: (_c = entity == null ? void 0 : entity.spec) == null ? void 0 : _c.type,\n    gridSizes: { xs: 12, sm: 6, lg: 4 }\n  }), (isAPI || isComponent || typeof ((_d = entity == null ? void 0 : entity.spec) == null ? void 0 : _d.lifecycle) === \"string\") && /* @__PURE__ */ React.createElement(AboutField, {\n    label: \"Lifecycle\",\n    value: (_e = entity == null ? void 0 : entity.spec) == null ? void 0 : _e.lifecycle,\n    gridSizes: { xs: 12, sm: 6, lg: 4 }\n  }), /* @__PURE__ */ React.createElement(AboutField, {\n    label: \"Tags\",\n    value: \"No Tags\",\n    gridSizes: { xs: 12, sm: 6, lg: 4 }\n  }, (((_f = entity == null ? void 0 : entity.metadata) == null ? void 0 : _f.tags) || []).map((t) => /* @__PURE__ */ React.createElement(Chip, {\n    key: t,\n    size: \"small\",\n    label: t\n  }))));\n}\n\nconst useStyles$3 = makeStyles({\n  gridItemCard: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    height: \"calc(100% - 10px)\",\n    marginBottom: \"10px\"\n  },\n  fullHeightCard: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    height: \"100%\"\n  },\n  gridItemCardContent: {\n    flex: 1\n  },\n  fullHeightCardContent: {\n    flex: 1\n  }\n});\nfunction AboutCard(props) {\n  var _a, _b, _c;\n  const { variant } = props;\n  const classes = useStyles$3();\n  const { entity } = useEntity();\n  const scmIntegrationsApi = useApi(scmIntegrationsApiRef);\n  const catalogApi = useApi(catalogApiRef);\n  const alertApi = useApi(alertApiRef);\n  const viewTechdocLink = useRouteRef(viewTechDocRouteRef);\n  const entitySourceLocation = getEntitySourceLocation(entity, scmIntegrationsApi);\n  const entityMetadataEditUrl = (_a = entity.metadata.annotations) == null ? void 0 : _a[ANNOTATION_EDIT_URL];\n  const viewInSource = {\n    label: \"View Source\",\n    disabled: !entitySourceLocation,\n    icon: /* @__PURE__ */ React.createElement(ScmIntegrationIcon, {\n      type: entitySourceLocation == null ? void 0 : entitySourceLocation.integrationType\n    }),\n    href: entitySourceLocation == null ? void 0 : entitySourceLocation.locationTargetUrl\n  };\n  const viewInTechDocs = {\n    label: \"View TechDocs\",\n    disabled: !((_b = entity.metadata.annotations) == null ? void 0 : _b[\"backstage.io/techdocs-ref\"]) || !viewTechdocLink,\n    icon: /* @__PURE__ */ React.createElement(DocsIcon, null),\n    href: viewTechdocLink && viewTechdocLink({\n      namespace: entity.metadata.namespace || DEFAULT_NAMESPACE,\n      kind: entity.kind,\n      name: entity.metadata.name\n    })\n  };\n  let cardClass = \"\";\n  if (variant === \"gridItem\") {\n    cardClass = classes.gridItemCard;\n  } else if (variant === \"fullHeight\") {\n    cardClass = classes.fullHeightCard;\n  }\n  let cardContentClass = \"\";\n  if (variant === \"gridItem\") {\n    cardContentClass = classes.gridItemCardContent;\n  } else if (variant === \"fullHeight\") {\n    cardContentClass = classes.fullHeightCardContent;\n  }\n  const entityLocation = (_c = entity.metadata.annotations) == null ? void 0 : _c[ANNOTATION_LOCATION];\n  const allowRefresh = (entityLocation == null ? void 0 : entityLocation.startsWith(\"url:\")) || (entityLocation == null ? void 0 : entityLocation.startsWith(\"file:\"));\n  const refreshEntity = useCallback(async () => {\n    await catalogApi.refreshEntity(stringifyEntityRef(entity));\n    alertApi.post({ message: \"Refresh scheduled\", severity: \"info\" });\n  }, [catalogApi, alertApi, entity]);\n  return /* @__PURE__ */ React.createElement(Card, {\n    className: cardClass\n  }, /* @__PURE__ */ React.createElement(CardHeader, {\n    title: \"About\",\n    action: /* @__PURE__ */ React.createElement(React.Fragment, null, allowRefresh && /* @__PURE__ */ React.createElement(IconButton, {\n      \"aria-label\": \"Refresh\",\n      title: \"Schedule entity refresh\",\n      onClick: refreshEntity\n    }, /* @__PURE__ */ React.createElement(CachedIcon, null)), /* @__PURE__ */ React.createElement(IconButton, {\n      component: Link,\n      \"aria-label\": \"Edit\",\n      disabled: !entityMetadataEditUrl,\n      title: \"Edit Metadata\",\n      to: entityMetadataEditUrl != null ? entityMetadataEditUrl : \"#\"\n    }, /* @__PURE__ */ React.createElement(EditIcon, null))),\n    subheader: /* @__PURE__ */ React.createElement(HeaderIconLinkRow, {\n      links: [viewInSource, viewInTechDocs]\n    })\n  }), /* @__PURE__ */ React.createElement(Divider, null), /* @__PURE__ */ React.createElement(CardContent, {\n    className: cardContentClass\n  }, /* @__PURE__ */ React.createElement(AboutContent, {\n    entity\n  })));\n}\n\nconst useStyles$2 = makeStyles((theme) => createStyles({\n  root: {\n    ...theme.typography.h4\n  }\n}));\nfunction CatalogKindHeader(props) {\n  var _a;\n  const { initialFilter = \"component\", allowedKinds } = props;\n  const classes = useStyles$2();\n  const catalogApi = useApi(catalogApiRef);\n  const { value: allKinds } = useAsync(async () => {\n    return await catalogApi.getEntityFacets({ facets: [\"kind\"] }).then((response) => {\n      var _a2;\n      return ((_a2 = response.facets.kind) == null ? void 0 : _a2.map((f) => f.value).sort()) || [];\n    });\n  });\n  const {\n    updateFilters,\n    queryParameters: { kind: kindParameter }\n  } = useEntityList();\n  const queryParamKind = useMemo(() => {\n    var _a2;\n    return (_a2 = [kindParameter].flat()[0]) == null ? void 0 : _a2.toLocaleLowerCase(\"en-US\");\n  }, [kindParameter]);\n  const [selectedKind, setSelectedKind] = useState(queryParamKind != null ? queryParamKind : initialFilter);\n  useEffect(() => {\n    updateFilters({\n      kind: selectedKind ? new EntityKindFilter(selectedKind) : void 0\n    });\n  }, [selectedKind, updateFilters]);\n  useEffect(() => {\n    if (queryParamKind) {\n      setSelectedKind(queryParamKind);\n    }\n  }, [queryParamKind]);\n  const availableKinds = [capitalize(selectedKind)].concat((_a = allKinds == null ? void 0 : allKinds.filter((k) => allowedKinds ? allowedKinds.some((a) => a.toLocaleLowerCase(\"en-US\") === k.toLocaleLowerCase(\"en-US\")) : true)) != null ? _a : []);\n  const options = availableKinds.sort().reduce((acc, kind) => {\n    acc[kind.toLocaleLowerCase(\"en-US\")] = kind;\n    return acc;\n  }, {});\n  return /* @__PURE__ */ React.createElement(Select, {\n    input: /* @__PURE__ */ React.createElement(InputBase, {\n      value: selectedKind\n    }),\n    value: selectedKind,\n    onChange: (e) => setSelectedKind(e.target.value),\n    classes\n  }, Object.keys(options).map((kind) => /* @__PURE__ */ React.createElement(MenuItem, {\n    value: kind,\n    key: kind\n  }, `${options[kind]}s`)));\n}\n\nconst useStyles$1 = makeStyles({\n  flexContainer: {\n    flexWrap: \"wrap\"\n  },\n  itemText: {\n    width: \"100%\",\n    wordBreak: \"break-all\",\n    marginBottom: \"1rem\"\n  }\n});\nfunction CatalogSearchResultListItem(props) {\n  const result = props.result;\n  const classes = useStyles$1();\n  return /* @__PURE__ */ React.createElement(Link, {\n    to: result.location\n  }, /* @__PURE__ */ React.createElement(ListItem, {\n    alignItems: \"flex-start\",\n    className: classes.flexContainer\n  }, /* @__PURE__ */ React.createElement(ListItemText, {\n    className: classes.itemText,\n    primaryTypographyProps: { variant: \"h6\" },\n    primary: result.title,\n    secondary: result.text\n  }), /* @__PURE__ */ React.createElement(Box, null, result.kind && /* @__PURE__ */ React.createElement(Chip, {\n    label: `Kind: ${result.kind}`,\n    size: \"small\"\n  }), result.lifecycle && /* @__PURE__ */ React.createElement(Chip, {\n    label: `Lifecycle: ${result.lifecycle}`,\n    size: \"small\"\n  }))), /* @__PURE__ */ React.createElement(Divider, {\n    component: \"li\"\n  }));\n}\n\nconst columnFactories = Object.freeze({\n  createNameColumn(options) {\n    function formatContent(entity) {\n      var _a;\n      return ((_a = entity.metadata) == null ? void 0 : _a.title) || humanizeEntityRef(entity, {\n        defaultKind: options == null ? void 0 : options.defaultKind\n      });\n    }\n    return {\n      title: \"Name\",\n      field: \"resolved.name\",\n      highlight: true,\n      customSort({ entity: entity1 }, { entity: entity2 }) {\n        return formatContent(entity1).localeCompare(formatContent(entity2));\n      },\n      render: ({ entity }) => {\n        var _a;\n        return /* @__PURE__ */ React.createElement(EntityRefLink, {\n          entityRef: entity,\n          defaultKind: (options == null ? void 0 : options.defaultKind) || \"Component\",\n          title: (_a = entity.metadata) == null ? void 0 : _a.title\n        });\n      }\n    };\n  },\n  createSystemColumn() {\n    return {\n      title: \"System\",\n      field: \"resolved.partOfSystemRelationTitle\",\n      render: ({ resolved }) => /* @__PURE__ */ React.createElement(EntityRefLinks, {\n        entityRefs: resolved.partOfSystemRelations,\n        defaultKind: \"system\"\n      })\n    };\n  },\n  createOwnerColumn() {\n    return {\n      title: \"Owner\",\n      field: \"resolved.ownedByRelationsTitle\",\n      render: ({ resolved }) => /* @__PURE__ */ React.createElement(EntityRefLinks, {\n        entityRefs: resolved.ownedByRelations,\n        defaultKind: \"group\"\n      })\n    };\n  },\n  createSpecTypeColumn() {\n    return {\n      title: \"Type\",\n      field: \"entity.spec.type\",\n      hidden: true\n    };\n  },\n  createSpecLifecycleColumn() {\n    return {\n      title: \"Lifecycle\",\n      field: \"entity.spec.lifecycle\"\n    };\n  },\n  createMetadataDescriptionColumn() {\n    return {\n      title: \"Description\",\n      field: \"entity.metadata.description\",\n      render: ({ entity }) => /* @__PURE__ */ React.createElement(OverflowTooltip, {\n        text: entity.metadata.description,\n        placement: \"bottom-start\"\n      }),\n      width: \"auto\"\n    };\n  },\n  createTagsColumn() {\n    return {\n      title: \"Tags\",\n      field: \"entity.metadata.tags\",\n      cellStyle: {\n        padding: \"0px 16px 0px 20px\"\n      },\n      render: ({ entity }) => /* @__PURE__ */ React.createElement(React.Fragment, null, entity.metadata.tags && entity.metadata.tags.map((t) => /* @__PURE__ */ React.createElement(Chip, {\n        key: t,\n        label: t,\n        size: \"small\",\n        variant: \"outlined\",\n        style: { marginBottom: \"0px\" }\n      })))\n    };\n  }\n});\n\nconst YellowStar = withStyles({\n  root: {\n    color: \"#f3ba37\"\n  }\n})(Star);\nconst CatalogTable = (props) => {\n  var _a, _b, _c;\n  const { columns, actions, tableOptions } = props;\n  const { isStarredEntity, toggleStarredEntity } = useStarredEntities();\n  const { loading, error, entities, filters } = useEntityList();\n  const defaultColumns = useMemo(() => {\n    var _a2;\n    return [\n      columnFactories.createNameColumn({ defaultKind: (_a2 = filters.kind) == null ? void 0 : _a2.value }),\n      ...createEntitySpecificColumns(),\n      columnFactories.createMetadataDescriptionColumn(),\n      columnFactories.createTagsColumn()\n    ];\n    function createEntitySpecificColumns() {\n      var _a3;\n      switch ((_a3 = filters.kind) == null ? void 0 : _a3.value) {\n        case \"user\":\n          return [];\n        case \"domain\":\n        case \"system\":\n          return [columnFactories.createOwnerColumn()];\n        case \"group\":\n        case \"location\":\n        case \"template\":\n          return [columnFactories.createSpecTypeColumn()];\n        default:\n          return [\n            columnFactories.createSystemColumn(),\n            columnFactories.createOwnerColumn(),\n            columnFactories.createSpecTypeColumn(),\n            columnFactories.createSpecLifecycleColumn()\n          ];\n      }\n    }\n  }, [(_a = filters.kind) == null ? void 0 : _a.value]);\n  const showTypeColumn = filters.type === void 0;\n  const titlePreamble = capitalize$1((_c = (_b = filters.user) == null ? void 0 : _b.value) != null ? _c : \"all\");\n  if (error) {\n    return /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(WarningPanel, {\n      severity: \"error\",\n      title: \"Could not fetch catalog entities.\"\n    }, /* @__PURE__ */ React.createElement(CodeSnippet, {\n      language: \"text\",\n      text: error.toString()\n    })));\n  }\n  const defaultActions = [\n    ({ entity }) => {\n      var _a2;\n      const url = (_a2 = entity.metadata.annotations) == null ? void 0 : _a2[ANNOTATION_VIEW_URL];\n      return {\n        icon: () => /* @__PURE__ */ React.createElement(OpenInNew, {\n          \"aria-label\": \"View\",\n          fontSize: \"small\"\n        }),\n        tooltip: \"View\",\n        disabled: !url,\n        onClick: () => {\n          if (!url)\n            return;\n          window.open(url, \"_blank\");\n        }\n      };\n    },\n    ({ entity }) => {\n      var _a2;\n      const url = (_a2 = entity.metadata.annotations) == null ? void 0 : _a2[ANNOTATION_EDIT_URL];\n      return {\n        icon: () => /* @__PURE__ */ React.createElement(EditIcon, {\n          \"aria-label\": \"Edit\",\n          fontSize: \"small\"\n        }),\n        tooltip: \"Edit\",\n        disabled: !url,\n        onClick: () => {\n          if (!url)\n            return;\n          window.open(url, \"_blank\");\n        }\n      };\n    },\n    ({ entity }) => {\n      const isStarred = isStarredEntity(entity);\n      return {\n        cellStyle: { paddingLeft: \"1em\" },\n        icon: () => isStarred ? /* @__PURE__ */ React.createElement(YellowStar, null) : /* @__PURE__ */ React.createElement(StarBorder, null),\n        tooltip: isStarred ? \"Remove from favorites\" : \"Add to favorites\",\n        onClick: () => toggleStarredEntity(entity)\n      };\n    }\n  ];\n  const rows = entities.map((entity) => {\n    const partOfSystemRelations = getEntityRelations(entity, RELATION_PART_OF, {\n      kind: \"system\"\n    });\n    const ownedByRelations = getEntityRelations(entity, RELATION_OWNED_BY);\n    return {\n      entity,\n      resolved: {\n        name: humanizeEntityRef(entity, {\n          defaultKind: \"Component\"\n        }),\n        ownedByRelationsTitle: ownedByRelations.map((r) => humanizeEntityRef(r, { defaultKind: \"group\" })).join(\", \"),\n        ownedByRelations,\n        partOfSystemRelationTitle: partOfSystemRelations.map((r) => humanizeEntityRef(r, {\n          defaultKind: \"system\"\n        })).join(\", \"),\n        partOfSystemRelations\n      }\n    };\n  });\n  const typeColumn = (columns || defaultColumns).find((c) => c.title === \"Type\");\n  if (typeColumn) {\n    typeColumn.hidden = !showTypeColumn;\n  }\n  const showPagination = rows.length > 20;\n  return /* @__PURE__ */ React.createElement(Table, {\n    isLoading: loading,\n    columns: columns || defaultColumns,\n    options: {\n      paging: showPagination,\n      pageSize: 20,\n      actionsColumnIndex: -1,\n      loadingType: \"linear\",\n      showEmptyDataSourceMessage: !loading,\n      padding: \"dense\",\n      pageSizeOptions: [20, 50, 100],\n      ...tableOptions\n    },\n    title: `${titlePreamble} (${entities.length})`,\n    data: rows,\n    actions: actions || defaultActions\n  });\n};\nCatalogTable.columns = columnFactories;\n\nconst useStyles = makeStyles$1({\n  button: {\n    color: \"white\"\n  }\n});\nfunction EntityContextMenu(props) {\n  var _a;\n  const {\n    UNSTABLE_extraContextMenuItems,\n    UNSTABLE_contextMenuOptions,\n    onUnregisterEntity,\n    onInspectEntity\n  } = props;\n  const [anchorEl, setAnchorEl] = useState();\n  const classes = useStyles();\n  const unregisterPermission = useEntityPermission(catalogEntityDeletePermission);\n  const onOpen = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n  const onClose = () => {\n    setAnchorEl(void 0);\n  };\n  const extraItems = UNSTABLE_extraContextMenuItems && [\n    ...UNSTABLE_extraContextMenuItems.map((item) => /* @__PURE__ */ React.createElement(MenuItem, {\n      key: item.title,\n      onClick: () => {\n        onClose();\n        item.onClick();\n      }\n    }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(item.Icon, {\n      fontSize: \"small\"\n    })), /* @__PURE__ */ React.createElement(ListItemText, {\n      primary: item.title\n    }))),\n    /* @__PURE__ */ React.createElement(Divider, {\n      key: \"the divider is here!\"\n    })\n  ];\n  const disableUnregister = (_a = !unregisterPermission.allowed || (UNSTABLE_contextMenuOptions == null ? void 0 : UNSTABLE_contextMenuOptions.disableUnregister)) != null ? _a : false;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(IconButton, {\n    \"aria-label\": \"more\",\n    \"aria-controls\": \"long-menu\",\n    \"aria-haspopup\": \"true\",\n    onClick: onOpen,\n    \"data-testid\": \"menu-button\",\n    className: classes.button\n  }, /* @__PURE__ */ React.createElement(MoreVert, null)), /* @__PURE__ */ React.createElement(Popover, {\n    open: Boolean(anchorEl),\n    onClose,\n    anchorEl,\n    anchorOrigin: { vertical: \"bottom\", horizontal: \"right\" },\n    transformOrigin: { vertical: \"top\", horizontal: \"right\" }\n  }, /* @__PURE__ */ React.createElement(MenuList, null, extraItems, /* @__PURE__ */ React.createElement(MenuItem, {\n    onClick: () => {\n      onClose();\n      onUnregisterEntity();\n    },\n    disabled: disableUnregister\n  }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(CancelIcon, {\n    fontSize: \"small\"\n  })), /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: \"Unregister entity\"\n  })), /* @__PURE__ */ React.createElement(MenuItem, {\n    onClick: () => {\n      onClose();\n      onInspectEntity();\n    }\n  }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(BugReportIcon, {\n    fontSize: \"small\"\n  })), /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: \"Inspect entity\"\n  })))));\n}\n\nconst dataKey = \"plugin.catalog.entityLayoutRoute\";\nconst Route = () => null;\nattachComponentData(Route, dataKey, true);\nattachComponentData(Route, \"core.gatherMountPoints\", true);\nfunction EntityLayoutTitle(props) {\n  const { entity, title } = props;\n  return /* @__PURE__ */ React.createElement(Box, {\n    display: \"inline-flex\",\n    alignItems: \"center\",\n    height: \"1em\",\n    maxWidth: \"100%\"\n  }, /* @__PURE__ */ React.createElement(Box, {\n    component: \"span\",\n    textOverflow: \"ellipsis\",\n    whiteSpace: \"nowrap\",\n    overflow: \"hidden\"\n  }, title), entity && /* @__PURE__ */ React.createElement(FavoriteEntity, {\n    entity\n  }));\n}\nfunction headerProps(paramKind, paramNamespace, paramName, entity) {\n  var _a, _b, _c, _d, _e;\n  const kind = (_a = paramKind != null ? paramKind : entity == null ? void 0 : entity.kind) != null ? _a : \"\";\n  const namespace = (_b = paramNamespace != null ? paramNamespace : entity == null ? void 0 : entity.metadata.namespace) != null ? _b : \"\";\n  const name = (_e = (_d = (_c = entity == null ? void 0 : entity.metadata.title) != null ? _c : paramName) != null ? _d : entity == null ? void 0 : entity.metadata.name) != null ? _e : \"\";\n  return {\n    headerTitle: `${name}${namespace && namespace !== DEFAULT_NAMESPACE ? ` in ${namespace}` : \"\"}`,\n    headerType: (() => {\n      let t = kind.toLocaleLowerCase(\"en-US\");\n      if (entity && entity.spec && \"type\" in entity.spec) {\n        t += \" \\u2014 \";\n        t += entity.spec.type.toLocaleLowerCase(\"en-US\");\n      }\n      return t;\n    })()\n  };\n}\nfunction EntityLabels(props) {\n  var _a;\n  const { entity } = props;\n  const ownedByRelations = getEntityRelations(entity, RELATION_OWNED_BY);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, ownedByRelations.length > 0 && /* @__PURE__ */ React.createElement(HeaderLabel, {\n    label: \"Owner\",\n    value: /* @__PURE__ */ React.createElement(EntityRefLinks, {\n      entityRefs: ownedByRelations,\n      defaultKind: \"Group\",\n      color: \"inherit\"\n    })\n  }), ((_a = entity.spec) == null ? void 0 : _a.lifecycle) && /* @__PURE__ */ React.createElement(HeaderLabel, {\n    label: \"Lifecycle\",\n    value: entity.spec.lifecycle\n  }));\n}\nconst EntityLayout = (props) => {\n  var _a, _b, _c;\n  const {\n    UNSTABLE_extraContextMenuItems,\n    UNSTABLE_contextMenuOptions,\n    children\n  } = props;\n  const { kind, namespace, name } = useRouteRefParams(entityRouteRef);\n  const { entity, loading, error } = useAsyncEntity();\n  const location = useLocation();\n  const routes = useElementFilter(children, (elements) => elements.selectByComponentData({\n    key: dataKey,\n    withStrictError: \"Child of EntityLayout must be an EntityLayout.Route\"\n  }).getElements().flatMap(({ props: elementProps }) => {\n    if (!entity) {\n      return [];\n    } else if (elementProps.if && !elementProps.if(entity)) {\n      return [];\n    }\n    return [\n      {\n        path: elementProps.path,\n        title: elementProps.title,\n        children: elementProps.children,\n        tabProps: elementProps.tabProps\n      }\n    ];\n  }), [entity]);\n  const { headerTitle, headerType } = headerProps(kind, namespace, name, entity);\n  const [confirmationDialogOpen, setConfirmationDialogOpen] = useState(false);\n  const [inspectionDialogOpen, setInspectionDialogOpen] = useState(false);\n  const navigate = useNavigate();\n  const cleanUpAfterRemoval = async () => {\n    setConfirmationDialogOpen(false);\n    setInspectionDialogOpen(false);\n    navigate(\"/\");\n  };\n  useEffect(() => {\n    setConfirmationDialogOpen(false);\n    setInspectionDialogOpen(false);\n  }, [location.pathname]);\n  return /* @__PURE__ */ React.createElement(Page, {\n    themeId: (_c = (_b = (_a = entity == null ? void 0 : entity.spec) == null ? void 0 : _a.type) == null ? void 0 : _b.toString()) != null ? _c : \"home\"\n  }, /* @__PURE__ */ React.createElement(Header, {\n    title: /* @__PURE__ */ React.createElement(EntityLayoutTitle, {\n      title: headerTitle,\n      entity\n    }),\n    pageTitleOverride: headerTitle,\n    type: headerType\n  }, entity && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(EntityLabels, {\n    entity\n  }), /* @__PURE__ */ React.createElement(EntityContextMenu, {\n    UNSTABLE_extraContextMenuItems,\n    UNSTABLE_contextMenuOptions,\n    onUnregisterEntity: () => setConfirmationDialogOpen(true),\n    onInspectEntity: () => setInspectionDialogOpen(true)\n  }))), loading && /* @__PURE__ */ React.createElement(Progress, null), entity && /* @__PURE__ */ React.createElement(RoutedTabs, {\n    routes\n  }), error && /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(Alert, {\n    severity: \"error\"\n  }, error.toString())), !loading && !error && !entity && /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(WarningPanel, {\n    title: \"Entity not found\"\n  }, \"There is no \", kind, \" with the requested\", \" \", /* @__PURE__ */ React.createElement(Link, {\n    to: \"https://backstage.io/docs/features/software-catalog/references\"\n  }, \"kind, namespace, and name\"), \".\")), /* @__PURE__ */ React.createElement(UnregisterEntityDialog, {\n    open: confirmationDialogOpen,\n    entity,\n    onConfirm: cleanUpAfterRemoval,\n    onClose: () => setConfirmationDialogOpen(false)\n  }), /* @__PURE__ */ React.createElement(InspectEntityDialog, {\n    open: inspectionDialogOpen,\n    entity,\n    onClose: () => setInspectionDialogOpen(false)\n  }));\n};\nEntityLayout.Route = Route;\n\nfunction DeleteEntityDialog(props) {\n  const { open, onClose, onConfirm, entity } = props;\n  const [busy, setBusy] = useState(false);\n  const catalogApi = useApi(catalogApiRef);\n  const alertApi = useApi(alertApiRef);\n  const onDelete = async () => {\n    setBusy(true);\n    try {\n      const uid = entity.metadata.uid;\n      await catalogApi.removeEntityByUid(uid);\n      onConfirm();\n    } catch (err) {\n      assertError(err);\n      alertApi.post({ message: err.message });\n    } finally {\n      setBusy(false);\n    }\n  };\n  return /* @__PURE__ */ React.createElement(Dialog, {\n    open,\n    onClose\n  }, /* @__PURE__ */ React.createElement(DialogTitle, {\n    id: \"responsive-dialog-title\"\n  }, \"Are you sure you want to delete this entity?\"), /* @__PURE__ */ React.createElement(DialogActions, null, /* @__PURE__ */ React.createElement(Button, {\n    variant: \"contained\",\n    color: \"secondary\",\n    disabled: busy,\n    onClick: onDelete\n  }, \"Delete\"), /* @__PURE__ */ React.createElement(Button, {\n    onClick: onClose,\n    color: \"primary\"\n  }, \"Cancel\")));\n}\n\nfunction isOrphan(entity) {\n  var _a, _b;\n  return ((_b = (_a = entity == null ? void 0 : entity.metadata) == null ? void 0 : _a.annotations) == null ? void 0 : _b[\"backstage.io/orphan\"]) === \"true\";\n}\nfunction EntityOrphanWarning() {\n  const navigate = useNavigate();\n  const catalogLink = useRouteRef(rootRouteRef);\n  const [confirmationDialogOpen, setConfirmationDialogOpen] = useState(false);\n  const { entity } = useEntity();\n  const cleanUpAfterRemoval = async () => {\n    setConfirmationDialogOpen(false);\n    navigate(catalogLink());\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Alert, {\n    severity: \"warning\",\n    onClick: () => setConfirmationDialogOpen(true)\n  }, \"This entity is not referenced by any location and is therefore not receiving updates. Click here to delete.\"), /* @__PURE__ */ React.createElement(DeleteEntityDialog, {\n    open: confirmationDialogOpen,\n    entity,\n    onConfirm: cleanUpAfterRemoval,\n    onClose: () => setConfirmationDialogOpen(false)\n  }));\n}\n\nconst errorFilter = (i) => i.error && i.level === \"error\" && i.type === ENTITY_STATUS_CATALOG_PROCESSING_TYPE;\nasync function getOwnAndAncestorsErrors(entityRef, catalogApi) {\n  const ancestors = await catalogApi.getEntityAncestors({ entityRef });\n  const items = ancestors.items.map((item) => {\n    var _a, _b;\n    const statuses = (_b = (_a = item.entity.status) == null ? void 0 : _a.items) != null ? _b : [];\n    const errors = statuses.filter(errorFilter).map((e) => e.error).filter((e) => Boolean(e));\n    return { errors, entity: item.entity };\n  }).filter((item) => item.errors.length > 0);\n  return { items };\n}\nasync function hasCatalogProcessingErrors(entity, context) {\n  const catalogApi = context.apis.get(catalogApiRef);\n  if (!catalogApi) {\n    throw new Error(`No implementation available for ${catalogApiRef}`);\n  }\n  const errors = await getOwnAndAncestorsErrors(stringifyEntityRef(entity), catalogApi);\n  return errors.items.length > 0;\n}\nfunction EntityProcessingErrorsPanel() {\n  const { entity } = useEntity();\n  const entityRef = stringifyEntityRef(entity);\n  const catalogApi = useApi(catalogApiRef);\n  const { loading, error, value } = useAsync(async () => {\n    return getOwnAndAncestorsErrors(entityRef, catalogApi);\n  }, [entityRef, catalogApi]);\n  if (error) {\n    return /* @__PURE__ */ React.createElement(Box, {\n      mb: 1\n    }, /* @__PURE__ */ React.createElement(ResponseErrorPanel, {\n      error\n    }));\n  }\n  if (loading || !value) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, value.items.map((ancestorError, index) => /* @__PURE__ */ React.createElement(Box, {\n    key: index,\n    mb: 1\n  }, stringifyEntityRef(entity) !== stringifyEntityRef(ancestorError.entity) && /* @__PURE__ */ React.createElement(Box, {\n    p: 1\n  }, \"The error below originates from\", \" \", /* @__PURE__ */ React.createElement(EntityRefLink, {\n    entityRef: ancestorError.entity\n  })), ancestorError.errors.map((e, i) => /* @__PURE__ */ React.createElement(ResponseErrorPanel, {\n    key: i,\n    error: e\n  })))));\n}\n\nconst ENTITY_SWITCH_KEY = \"core.backstage.entitySwitch\";\nconst EntitySwitchCaseComponent = (_props) => null;\nattachComponentData(EntitySwitchCaseComponent, ENTITY_SWITCH_KEY, true);\nconst EntitySwitch = (props) => {\n  var _a, _b;\n  const { entity, loading } = useAsyncEntity();\n  const apis = useApiHolder();\n  const results = useElementFilter(props.children, (collection) => collection.selectByComponentData({\n    key: ENTITY_SWITCH_KEY,\n    withStrictError: \"Child of EntitySwitch is not an EntitySwitch.Case\"\n  }).getElements().flatMap((element) => {\n    var _a2;\n    if (loading) {\n      return [];\n    }\n    const { if: condition, children: elementsChildren } = element.props;\n    if (!entity) {\n      return [\n        {\n          if: condition === void 0,\n          children: elementsChildren\n        }\n      ];\n    }\n    return [\n      {\n        if: (_a2 = condition == null ? void 0 : condition(entity, { apis })) != null ? _a2 : true,\n        children: elementsChildren\n      }\n    ];\n  }), [apis, entity, loading]);\n  const hasAsyncCases = results.some((r) => typeof r.if === \"object\" && \"then\" in r.if);\n  if (hasAsyncCases) {\n    return /* @__PURE__ */ React.createElement(AsyncEntitySwitch, {\n      results\n    });\n  }\n  return (_b = (_a = results.find((r) => r.if)) == null ? void 0 : _a.children) != null ? _b : null;\n};\nfunction AsyncEntitySwitch({ results }) {\n  const { loading, value } = useAsync(async () => {\n    var _a;\n    const promises = results.map(async ({ if: condition, children: output }) => {\n      try {\n        if (await condition) {\n          return output;\n        }\n      } catch {\n      }\n      return null;\n    });\n    return (_a = (await Promise.all(promises)).find(Boolean)) != null ? _a : null;\n  }, [results]);\n  if (loading || !value) {\n    return null;\n  }\n  return value;\n}\nEntitySwitch.Case = EntitySwitchCaseComponent;\n\nfunction strCmp(a, b) {\n  return Boolean(a && (a == null ? void 0 : a.toLocaleLowerCase(\"en-US\")) === (b == null ? void 0 : b.toLocaleLowerCase(\"en-US\")));\n}\nfunction isKind(kind) {\n  return (entity) => strCmp(entity.kind, kind);\n}\nfunction isComponentType(type) {\n  return (entity) => {\n    if (!strCmp(entity.kind, \"component\")) {\n      return false;\n    }\n    const componentEntity = entity;\n    return strCmp(componentEntity.spec.type, type);\n  };\n}\nfunction isNamespace(namespace) {\n  return (entity) => {\n    var _a;\n    return strCmp((_a = entity.metadata) == null ? void 0 : _a.namespace, namespace);\n  };\n}\n\nconst FilteredEntityLayout = CatalogFilterLayout;\nconst FilterContainer = CatalogFilterLayout.Filters;\nconst EntityListContainer = CatalogFilterLayout.Content;\n\nconst catalogPlugin = createPlugin({\n  id: \"catalog\",\n  apis: [\n    createApiFactory({\n      api: catalogApiRef,\n      deps: {\n        discoveryApi: discoveryApiRef,\n        fetchApi: fetchApiRef\n      },\n      factory: ({ discoveryApi, fetchApi }) => new CatalogClient({ discoveryApi, fetchApi })\n    }),\n    createApiFactory({\n      api: starredEntitiesApiRef,\n      deps: { storageApi: storageApiRef },\n      factory: ({ storageApi }) => new DefaultStarredEntitiesApi({ storageApi })\n    })\n  ],\n  routes: {\n    catalogIndex: rootRouteRef,\n    catalogEntity: entityRouteRef\n  },\n  externalRoutes: {\n    createComponent: createComponentRouteRef,\n    viewTechDoc: viewTechDocRouteRef\n  }\n});\nconst CatalogIndexPage = catalogPlugin.provide(createRoutableExtension({\n  name: \"CatalogIndexPage\",\n  component: () => import('./index-c7950e13.esm.js').then((m) => m.CatalogPage),\n  mountPoint: rootRouteRef\n}));\nconst CatalogEntityPage = catalogPlugin.provide(createRoutableExtension({\n  name: \"CatalogEntityPage\",\n  component: () => import('./index-4e6adb42.esm.js').then((m) => m.CatalogEntityPage),\n  mountPoint: entityRouteRef\n}));\nconst EntityAboutCard = catalogPlugin.provide(createComponentExtension({\n  name: \"EntityAboutCard\",\n  component: {\n    lazy: () => import('./index-e5ffee47.esm.js').then((m) => m.AboutCard)\n  }\n}));\nconst EntityLinksCard = catalogPlugin.provide(createComponentExtension({\n  name: \"EntityLinksCard\",\n  component: {\n    lazy: () => import('./index-896aeac9.esm.js').then((m) => m.EntityLinksCard)\n  }\n}));\nconst EntityHasSystemsCard = catalogPlugin.provide(createComponentExtension({\n  name: \"EntityHasSystemsCard\",\n  component: {\n    lazy: () => import('./index-3763491b.esm.js').then((m) => m.HasSystemsCard)\n  }\n}));\nconst EntityHasComponentsCard = catalogPlugin.provide(createComponentExtension({\n  name: \"EntityHasComponentsCard\",\n  component: {\n    lazy: () => import('./index-acb3cf04.esm.js').then((m) => m.HasComponentsCard)\n  }\n}));\nconst EntityHasSubcomponentsCard = catalogPlugin.provide(createComponentExtension({\n  name: \"EntityHasSubcomponentsCard\",\n  component: {\n    lazy: () => import('./index-41ab53b6.esm.js').then((m) => m.HasSubcomponentsCard)\n  }\n}));\nconst EntityHasResourcesCard = catalogPlugin.provide(createComponentExtension({\n  name: \"EntityHasResourcesCard\",\n  component: {\n    lazy: () => import('./index-b3ad464b.esm.js').then((m) => m.HasResourcesCard)\n  }\n}));\nconst EntityDependsOnComponentsCard = catalogPlugin.provide(createComponentExtension({\n  name: \"EntityDependsOnComponentsCard\",\n  component: {\n    lazy: () => import('./index-66fdb6ad.esm.js').then((m) => m.DependsOnComponentsCard)\n  }\n}));\nconst EntityDependencyOfComponentsCard = catalogPlugin.provide(createComponentExtension({\n  name: \"EntityDependencyOfComponentsCard\",\n  component: {\n    lazy: () => import('./index-390fab14.esm.js').then((m) => m.DependencyOfComponentsCard)\n  }\n}));\nconst EntityDependsOnResourcesCard = catalogPlugin.provide(createComponentExtension({\n  name: \"EntityDependsOnResourcesCard\",\n  component: {\n    lazy: () => import('./index-d41abbff.esm.js').then((m) => m.DependsOnResourcesCard)\n  }\n}));\nconst RelatedEntitiesCard = catalogPlugin.provide(createComponentExtension({\n  name: \"RelatedEntitiesCard\",\n  component: {\n    lazy: () => import('./index-c2914273.esm.js').then((m) => m.RelatedEntitiesCard)\n  }\n}));\n\nexport { AboutCard as A, EntityListContainer as B, CatalogKindHeader as C, DefaultStarredEntitiesApi as D, EntityAboutCard as E, FilteredEntityLayout as F, RelatedEntitiesCard as R, CatalogTable as a, AboutContent as b, createComponentRouteRef as c, AboutField as d, CatalogEntityPage as e, CatalogIndexPage as f, catalogPlugin as g, EntityDependencyOfComponentsCard as h, EntityDependsOnComponentsCard as i, EntityDependsOnResourcesCard as j, EntityHasComponentsCard as k, EntityHasResourcesCard as l, EntityHasSubcomponentsCard as m, EntityHasSystemsCard as n, EntityLinksCard as o, CatalogSearchResultListItem as p, EntityLayout as q, EntityOrphanWarning as r, isOrphan as s, EntityProcessingErrorsPanel as t, hasCatalogProcessingErrors as u, EntitySwitch as v, isKind as w, isNamespace as x, isComponentType as y, FilterContainer as z };\n//# sourceMappingURL=index-8dd5bf41.esm.js.map\n","import { createApiRef, createRouteRef, createSubRouteRef, createPlugin, createApiFactory, configApiRef, githubAuthApiRef, createRoutableExtension, createComponentExtension, useApi, useRouteRefParams, errorApiRef, useRouteRef } from '@backstage/core-plugin-api';\nimport { readGitHubIntegrationConfigs } from '@backstage/integration';\nimport { Octokit } from '@octokit/rest';\nimport React, { useState, useEffect } from 'react';\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { Routes, Route } from 'react-router';\nimport { makeStyles, Accordion, AccordionSummary, Typography, CircularProgress, Tooltip, Zoom, Modal, Fade, LinearProgress, Box, TableContainer, Paper, Table, TableBody, TableRow, TableCell, Link as Link$1, AccordionDetails, ListItemText, Button, IconButton } from '@material-ui/core';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport ExternalLinkIcon from '@material-ui/icons/Launch';\nimport { DateTime } from 'luxon';\nimport { StatusPending, StatusOK, StatusError, StatusWarning, StatusAborted, StatusRunning, LogViewer, Breadcrumbs, Link, EmptyState, Table as Table$1, MissingAnnotationEmptyState, InfoCard, StructuredMetadataTable } from '@backstage/core-components';\nimport useAsync from 'react-use/lib/useAsync';\nimport DescriptionIcon from '@material-ui/icons/Description';\nimport RetryIcon from '@material-ui/icons/Replay';\nimport GitHubIcon from '@material-ui/icons/GitHub';\nimport { Link as Link$2, generatePath } from 'react-router-dom';\nimport useAsyncRetry from 'react-use/lib/useAsyncRetry';\nimport SyncIcon from '@material-ui/icons/Sync';\n\nconst githubActionsApiRef = createApiRef({\n  id: \"plugin.githubactions.service\"\n});\n\nclass GithubActionsClient {\n  constructor(options) {\n    this.configApi = options.configApi;\n    this.githubAuthApi = options.githubAuthApi;\n  }\n  async getOctokit(hostname) {\n    var _a;\n    const token = await this.githubAuthApi.getAccessToken([\"repo\"]);\n    const configs = readGitHubIntegrationConfigs((_a = this.configApi.getOptionalConfigArray(\"integrations.github\")) != null ? _a : []);\n    const githubIntegrationConfig = configs.find((v) => v.host === hostname);\n    const baseUrl = githubIntegrationConfig == null ? void 0 : githubIntegrationConfig.apiBaseUrl;\n    return new Octokit({ auth: token, baseUrl });\n  }\n  async reRunWorkflow({\n    hostname,\n    owner,\n    repo,\n    runId\n  }) {\n    const octokit = await this.getOctokit(hostname);\n    return octokit.actions.reRunWorkflow({\n      owner,\n      repo,\n      run_id: runId\n    });\n  }\n  async listWorkflowRuns({\n    hostname,\n    owner,\n    repo,\n    pageSize = 100,\n    page = 0,\n    branch\n  }) {\n    const octokit = await this.getOctokit(hostname);\n    const workflowRuns = await octokit.actions.listWorkflowRunsForRepo({\n      owner,\n      repo,\n      per_page: pageSize,\n      page,\n      ...branch ? { branch } : {}\n    });\n    return workflowRuns.data;\n  }\n  async getWorkflow({\n    hostname,\n    owner,\n    repo,\n    id\n  }) {\n    const octokit = await this.getOctokit(hostname);\n    const workflow = await octokit.actions.getWorkflow({\n      owner,\n      repo,\n      workflow_id: id\n    });\n    return workflow.data;\n  }\n  async getWorkflowRun({\n    hostname,\n    owner,\n    repo,\n    id\n  }) {\n    const octokit = await this.getOctokit(hostname);\n    const run = await octokit.actions.getWorkflowRun({\n      owner,\n      repo,\n      run_id: id\n    });\n    return run.data;\n  }\n  async listJobsForWorkflowRun({\n    hostname,\n    owner,\n    repo,\n    id,\n    pageSize = 100,\n    page = 0\n  }) {\n    const octokit = await this.getOctokit(hostname);\n    const jobs = await octokit.actions.listJobsForWorkflowRun({\n      owner,\n      repo,\n      run_id: id,\n      per_page: pageSize,\n      page\n    });\n    return jobs.data;\n  }\n  async downloadJobLogsForWorkflowRun({\n    hostname,\n    owner,\n    repo,\n    runId\n  }) {\n    const octokit = await this.getOctokit(hostname);\n    const workflow = await octokit.actions.downloadJobLogsForWorkflowRun({\n      owner,\n      repo,\n      job_id: runId\n    });\n    return workflow.data;\n  }\n}\n\nvar BuildStatus = /* @__PURE__ */ ((BuildStatus2) => {\n  BuildStatus2[BuildStatus2[\"success\"] = 0] = \"success\";\n  BuildStatus2[BuildStatus2[\"failure\"] = 1] = \"failure\";\n  BuildStatus2[BuildStatus2[\"pending\"] = 2] = \"pending\";\n  BuildStatus2[BuildStatus2[\"running\"] = 3] = \"running\";\n  return BuildStatus2;\n})(BuildStatus || {});\n\nconst rootRouteRef = createRouteRef({\n  id: \"github-actions\"\n});\nconst buildRouteRef = createSubRouteRef({\n  id: \"github-actions/build\",\n  path: \"/:id\",\n  parent: rootRouteRef\n});\n\nconst githubActionsPlugin = createPlugin({\n  id: \"github-actions\",\n  apis: [\n    createApiFactory({\n      api: githubActionsApiRef,\n      deps: { configApi: configApiRef, githubAuthApi: githubAuthApiRef },\n      factory: ({ configApi, githubAuthApi }) => new GithubActionsClient({ configApi, githubAuthApi })\n    })\n  ],\n  routes: {\n    entityContent: rootRouteRef\n  }\n});\nconst EntityGithubActionsContent = githubActionsPlugin.provide(createRoutableExtension({\n  name: \"EntityGithubActionsContent\",\n  component: () => Promise.resolve().then(function () { return Router$1; }).then((m) => m.Router),\n  mountPoint: rootRouteRef\n}));\nconst EntityLatestGithubActionRunCard = githubActionsPlugin.provide(createComponentExtension({\n  name: \"EntityLatestGithubActionRunCard\",\n  component: {\n    lazy: () => import('./esm/index-708ad117.esm.js').then((m) => m.LatestWorkflowRunCard)\n  }\n}));\nconst EntityLatestGithubActionsForBranchCard = githubActionsPlugin.provide(createComponentExtension({\n  name: \"EntityLatestGithubActionsForBranchCard\",\n  component: {\n    lazy: () => import('./esm/index-708ad117.esm.js').then((m) => m.LatestWorkflowsForBranchCard)\n  }\n}));\nconst EntityRecentGithubActionsRunsCard = githubActionsPlugin.provide(createComponentExtension({\n  name: \"EntityRecentGithubActionsRunsCard\",\n  component: {\n    lazy: () => import('./esm/index-708ad117.esm.js').then((m) => m.RecentWorkflowRunsCard)\n  }\n}));\n\nconst GITHUB_ACTIONS_ANNOTATION = \"github.com/project-slug\";\nconst getProjectNameFromEntity = (entity) => {\n  var _a, _b;\n  return (_b = (_a = entity == null ? void 0 : entity.metadata.annotations) == null ? void 0 : _a[GITHUB_ACTIONS_ANNOTATION]) != null ? _b : \"\";\n};\n\nconst WorkflowRunStatus = ({\n  status,\n  conclusion\n}) => {\n  if (status === void 0)\n    return null;\n  switch (status.toLocaleLowerCase(\"en-US\")) {\n    case \"queued\":\n      return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(StatusPending, null), \" Queued\");\n    case \"in_progress\":\n      return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(StatusRunning, null), \" In progress\");\n    case \"completed\":\n      switch (conclusion == null ? void 0 : conclusion.toLocaleLowerCase(\"en-US\")) {\n        case \"skipped\":\n          return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(StatusAborted, null), \" Aborted\");\n        case \"timed_out\":\n          return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(StatusWarning, null), \" Timed out\");\n        case \"failure\":\n          return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(StatusError, null), \" Error\");\n        default:\n          return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(StatusOK, null), \" Completed\");\n      }\n    default:\n      return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(StatusPending, null), \" Pending\");\n  }\n};\n\nconst useWorkflowRunJobs = ({\n  hostname,\n  owner,\n  repo\n}) => {\n  const api = useApi(githubActionsApiRef);\n  const { id } = useRouteRefParams(buildRouteRef);\n  const jobs = useAsync(async () => {\n    return repo && owner ? api.listJobsForWorkflowRun({\n      hostname,\n      owner,\n      repo,\n      id: parseInt(id, 10)\n    }) : Promise.reject(new Error(\"No repo/owner provided\"));\n  }, [repo, owner, id]);\n  return jobs;\n};\n\nconst useWorkflowRunsDetails = ({\n  hostname,\n  owner,\n  repo\n}) => {\n  const api = useApi(githubActionsApiRef);\n  const { id } = useRouteRefParams(buildRouteRef);\n  const details = useAsync(async () => {\n    return repo && owner ? api.getWorkflowRun({\n      hostname,\n      owner,\n      repo,\n      id: parseInt(id, 10)\n    }) : Promise.reject(new Error(\"No repo/owner provided\"));\n  }, [repo, owner, id]);\n  return details;\n};\n\nconst useDownloadWorkflowRunLogs = ({\n  hostname,\n  owner,\n  repo,\n  id\n}) => {\n  const api = useApi(githubActionsApiRef);\n  const details = useAsync(async () => {\n    return repo && owner ? api.downloadJobLogsForWorkflowRun({\n      hostname,\n      owner,\n      repo,\n      runId: id\n    }) : Promise.reject(\"No repo/owner provided\");\n  }, [repo, owner, id]);\n  return details;\n};\n\nconst useStyles$2 = makeStyles((theme) => ({\n  button: {\n    order: -1,\n    marginRight: 0,\n    marginLeft: \"-20px\"\n  },\n  modal: {\n    display: \"flex\",\n    alignItems: \"center\",\n    width: \"85%\",\n    height: \"85%\",\n    justifyContent: \"center\",\n    margin: \"auto\"\n  },\n  normalLogContainer: {\n    height: \"75vh\",\n    width: \"100%\"\n  },\n  modalLogContainer: {\n    height: \"100%\",\n    width: \"100%\"\n  },\n  log: {\n    background: theme.palette.background.default\n  }\n}));\nconst WorkflowRunLogs = ({\n  entity,\n  runId,\n  inProgress\n}) => {\n  var _a;\n  const config = useApi(configApiRef);\n  const classes = useStyles$2();\n  const projectName = getProjectNameFromEntity(entity);\n  const hostname = readGitHubIntegrationConfigs((_a = config.getOptionalConfigArray(\"integrations.github\")) != null ? _a : [])[0].host;\n  const [owner, repo] = projectName && projectName.split(\"/\") || [];\n  const jobLogs = useDownloadWorkflowRunLogs({\n    hostname,\n    owner,\n    repo,\n    id: runId\n  });\n  const logText = jobLogs.value ? String(jobLogs.value) : void 0;\n  const [open, setOpen] = React.useState(false);\n  const handleOpen = () => {\n    setOpen(true);\n  };\n  const handleClose = () => {\n    setOpen(false);\n  };\n  return /* @__PURE__ */ React.createElement(Accordion, {\n    TransitionProps: { unmountOnExit: true },\n    disabled: inProgress\n  }, /* @__PURE__ */ React.createElement(AccordionSummary, {\n    expandIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, null),\n    \"aria-controls\": `panel-${name}-content`,\n    id: `panel-${name}-header`,\n    IconButtonProps: {\n      className: classes.button\n    }\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"button\"\n  }, jobLogs.loading ? /* @__PURE__ */ React.createElement(CircularProgress, null) : \"Job Log\"), /* @__PURE__ */ React.createElement(Tooltip, {\n    title: \"Open Log\",\n    TransitionComponent: Zoom,\n    arrow: true\n  }, /* @__PURE__ */ React.createElement(DescriptionIcon, {\n    onClick: (event) => {\n      event.stopPropagation();\n      handleOpen();\n    },\n    style: { marginLeft: \"auto\" }\n  })), /* @__PURE__ */ React.createElement(Modal, {\n    className: classes.modal,\n    onClick: (event) => event.stopPropagation(),\n    open,\n    onClose: handleClose\n  }, /* @__PURE__ */ React.createElement(Fade, {\n    in: open\n  }, /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.modalLogContainer\n  }, /* @__PURE__ */ React.createElement(LogViewer, {\n    text: logText != null ? logText : \"No Values Found\",\n    classes: { root: classes.log }\n  }))))), logText && /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.normalLogContainer\n  }, /* @__PURE__ */ React.createElement(LogViewer, {\n    text: logText,\n    classes: { root: classes.log }\n  })));\n};\n\nconst useStyles$1 = makeStyles((theme) => ({\n  root: {\n    maxWidth: 720,\n    margin: theme.spacing(2)\n  },\n  title: {\n    padding: theme.spacing(1, 0, 2, 0)\n  },\n  table: {\n    padding: theme.spacing(1)\n  },\n  accordionDetails: {\n    padding: 0\n  },\n  button: {\n    order: -1,\n    marginRight: 0,\n    marginLeft: \"-20px\"\n  },\n  externalLinkIcon: {\n    fontSize: \"inherit\",\n    verticalAlign: \"bottom\"\n  }\n}));\nconst getElapsedTime = (start, end) => {\n  const startDate = DateTime.fromISO(start);\n  const endDate = end ? DateTime.fromISO(end) : DateTime.now();\n  const diff = endDate.diff(startDate);\n  const timeElapsed = diff.toFormat(`m 'minutes' s 'seconds'`);\n  return timeElapsed;\n};\nconst StepView = ({ step }) => {\n  var _a;\n  return /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: step.name,\n    secondary: getElapsedTime(step.started_at, step.completed_at)\n  })), /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(WorkflowRunStatus, {\n    status: step.status.toLocaleUpperCase(\"en-US\"),\n    conclusion: (_a = step.conclusion) == null ? void 0 : _a.toLocaleUpperCase(\"en-US\")\n  })));\n};\nconst JobListItem = ({\n  job,\n  className,\n  entity\n}) => {\n  const classes = useStyles$1();\n  return /* @__PURE__ */ React.createElement(Accordion, {\n    TransitionProps: { unmountOnExit: true },\n    className\n  }, /* @__PURE__ */ React.createElement(AccordionSummary, {\n    expandIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, null),\n    \"aria-controls\": `panel-${name}-content`,\n    id: `panel-${name}-header`,\n    IconButtonProps: {\n      className: classes.button\n    }\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"button\"\n  }, job.name, \" (\", getElapsedTime(job.started_at, job.completed_at), \")\")), /* @__PURE__ */ React.createElement(AccordionDetails, {\n    className: classes.accordionDetails\n  }, /* @__PURE__ */ React.createElement(TableContainer, null, /* @__PURE__ */ React.createElement(Table, null, job.steps.map((step) => /* @__PURE__ */ React.createElement(StepView, {\n    key: step.number,\n    step\n  }))))), job.status === \"queued\" || job.status === \"in_progress\" ? /* @__PURE__ */ React.createElement(WorkflowRunLogs, {\n    runId: job.id,\n    inProgress: true,\n    entity\n  }) : /* @__PURE__ */ React.createElement(WorkflowRunLogs, {\n    runId: job.id,\n    inProgress: false,\n    entity\n  }));\n};\nconst JobsList = ({ jobs, entity }) => {\n  const classes = useStyles$1();\n  return /* @__PURE__ */ React.createElement(Box, null, jobs && jobs.total_count > 0 && jobs.jobs.map((job) => /* @__PURE__ */ React.createElement(JobListItem, {\n    key: job.id,\n    job,\n    className: job.status !== \"success\" ? classes.failed : classes.success,\n    entity\n  })));\n};\nconst WorkflowRunDetails = ({ entity }) => {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p;\n  const config = useApi(configApiRef);\n  const projectName = getProjectNameFromEntity(entity);\n  const hostname = readGitHubIntegrationConfigs((_a = config.getOptionalConfigArray(\"integrations.github\")) != null ? _a : [])[0].host;\n  const [owner, repo] = projectName && projectName.split(\"/\") || [];\n  const details = useWorkflowRunsDetails({ hostname, owner, repo });\n  const jobs = useWorkflowRunJobs({ hostname, owner, repo });\n  const classes = useStyles$1();\n  if (details.error && details.error.message) {\n    return /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"h6\",\n      color: \"error\"\n    }, \"Failed to load build, \", details.error.message);\n  } else if (details.loading) {\n    return /* @__PURE__ */ React.createElement(LinearProgress, null);\n  }\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.root\n  }, /* @__PURE__ */ React.createElement(Box, {\n    mb: 3\n  }, /* @__PURE__ */ React.createElement(Breadcrumbs, {\n    \"aria-label\": \"breadcrumb\"\n  }, /* @__PURE__ */ React.createElement(Link, {\n    to: \"..\"\n  }, \"Workflow runs\"), /* @__PURE__ */ React.createElement(Typography, null, \"Workflow run details\"))), /* @__PURE__ */ React.createElement(TableContainer, {\n    component: Paper,\n    className: classes.table\n  }, /* @__PURE__ */ React.createElement(Table, null, /* @__PURE__ */ React.createElement(TableBody, null, /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, {\n    noWrap: true\n  }, \"Branch\")), /* @__PURE__ */ React.createElement(TableCell, null, (_b = details.value) == null ? void 0 : _b.head_branch)), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, {\n    noWrap: true\n  }, \"Message\")), /* @__PURE__ */ React.createElement(TableCell, null, (_d = (_c = details.value) == null ? void 0 : _c.head_commit) == null ? void 0 : _d.message)), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, {\n    noWrap: true\n  }, \"Commit ID\")), /* @__PURE__ */ React.createElement(TableCell, null, (_f = (_e = details.value) == null ? void 0 : _e.head_commit) == null ? void 0 : _f.id)), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, {\n    noWrap: true\n  }, \"Workflow\")), /* @__PURE__ */ React.createElement(TableCell, null, (_g = details.value) == null ? void 0 : _g.name)), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, {\n    noWrap: true\n  }, \"Status\")), /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(WorkflowRunStatus, {\n    status: ((_h = details.value) == null ? void 0 : _h.status) || void 0,\n    conclusion: ((_i = details.value) == null ? void 0 : _i.conclusion) || void 0\n  }))), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, {\n    noWrap: true\n  }, \"Author\")), /* @__PURE__ */ React.createElement(TableCell, null, `${(_l = (_k = (_j = details.value) == null ? void 0 : _j.head_commit) == null ? void 0 : _k.author) == null ? void 0 : _l.name} (${(_o = (_n = (_m = details.value) == null ? void 0 : _m.head_commit) == null ? void 0 : _n.author) == null ? void 0 : _o.email})`)), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, null, /* @__PURE__ */ React.createElement(Typography, {\n    noWrap: true\n  }, \"Links\")), /* @__PURE__ */ React.createElement(TableCell, null, ((_p = details.value) == null ? void 0 : _p.html_url) && /* @__PURE__ */ React.createElement(Link$1, {\n    target: \"_blank\",\n    href: details.value.html_url\n  }, \"Workflow runs on GitHub\", \" \", /* @__PURE__ */ React.createElement(ExternalLinkIcon, {\n    className: classes.externalLinkIcon\n  })))), /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, {\n    colSpan: 2\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    noWrap: true\n  }, \"Jobs\"), jobs.loading ? /* @__PURE__ */ React.createElement(CircularProgress, null) : /* @__PURE__ */ React.createElement(JobsList, {\n    jobs: jobs.value,\n    entity\n  })))))));\n};\n\nfunction useWorkflowRuns({\n  hostname,\n  owner,\n  repo,\n  branch,\n  initialPageSize = 5\n}) {\n  const api = useApi(githubActionsApiRef);\n  const errorApi = useApi(errorApiRef);\n  const [total, setTotal] = useState(0);\n  const [page, setPage] = useState(0);\n  const [pageSize, setPageSize] = useState(initialPageSize);\n  const {\n    loading,\n    value: runs,\n    retry,\n    error\n  } = useAsyncRetry(async () => {\n    const workflowRunsData = await api.listWorkflowRuns({\n      hostname,\n      owner,\n      repo,\n      pageSize,\n      page: page + 1,\n      branch\n    });\n    setTotal(workflowRunsData.total_count);\n    return workflowRunsData.workflow_runs.map((run) => {\n      var _a, _b;\n      return {\n        workflowName: run.name,\n        message: run.head_commit.message,\n        id: `${run.id}`,\n        onReRunClick: async () => {\n          try {\n            await api.reRunWorkflow({\n              hostname,\n              owner,\n              repo,\n              runId: run.id\n            });\n          } catch (e) {\n            errorApi.post(e);\n          }\n        },\n        source: {\n          branchName: run.head_branch,\n          commit: {\n            hash: run.head_commit.id,\n            url: (_b = (_a = run.head_repository) == null ? void 0 : _a.branches_url) == null ? void 0 : _b.replace(\"{/branch}\", run.head_branch)\n          }\n        },\n        status: run.status,\n        conclusion: run.conclusion,\n        url: run.url,\n        githubUrl: run.html_url\n      };\n    });\n  }, [page, pageSize, repo, owner]);\n  return [\n    {\n      page,\n      pageSize,\n      loading,\n      runs,\n      projectName: `${owner}/${repo}`,\n      total,\n      error\n    },\n    {\n      runs,\n      setPage,\n      setPageSize,\n      retry\n    }\n  ];\n}\n\nconst generatedColumns = [\n  {\n    title: \"ID\",\n    field: \"id\",\n    type: \"numeric\",\n    width: \"150px\"\n  },\n  {\n    title: \"Message\",\n    field: \"message\",\n    highlight: true,\n    render: (row) => {\n      const LinkWrapper = () => {\n        const routeLink = useRouteRef(buildRouteRef);\n        return /* @__PURE__ */ React.createElement(Link$1, {\n          component: Link$2,\n          to: routeLink({ id: row.id })\n        }, row.message);\n      };\n      return /* @__PURE__ */ React.createElement(LinkWrapper, null);\n    }\n  },\n  {\n    title: \"Source\",\n    render: (row) => {\n      var _a, _b;\n      return /* @__PURE__ */ React.createElement(Typography, {\n        variant: \"body2\",\n        noWrap: true\n      }, /* @__PURE__ */ React.createElement(\"p\", null, (_a = row.source) == null ? void 0 : _a.branchName), /* @__PURE__ */ React.createElement(\"p\", null, (_b = row.source) == null ? void 0 : _b.commit.hash));\n    }\n  },\n  {\n    title: \"Workflow\",\n    field: \"workflowName\"\n  },\n  {\n    title: \"Status\",\n    width: \"150px\",\n    render: (row) => /* @__PURE__ */ React.createElement(Box, {\n      display: \"flex\",\n      alignItems: \"center\"\n    }, /* @__PURE__ */ React.createElement(WorkflowRunStatus, {\n      status: row.status,\n      conclusion: row.conclusion\n    }))\n  },\n  {\n    title: \"Actions\",\n    render: (row) => /* @__PURE__ */ React.createElement(Tooltip, {\n      title: \"Rerun workflow\"\n    }, /* @__PURE__ */ React.createElement(IconButton, {\n      onClick: row.onReRunClick\n    }, /* @__PURE__ */ React.createElement(RetryIcon, null))),\n    width: \"10%\"\n  }\n];\nconst WorkflowRunsTableView = ({\n  projectName,\n  loading,\n  pageSize,\n  page,\n  retry,\n  runs,\n  onChangePage,\n  onChangePageSize,\n  total\n}) => {\n  return /* @__PURE__ */ React.createElement(Table$1, {\n    isLoading: loading,\n    options: { paging: true, pageSize, padding: \"dense\" },\n    totalCount: total,\n    page,\n    actions: [\n      {\n        icon: () => /* @__PURE__ */ React.createElement(SyncIcon, null),\n        tooltip: \"Reload workflow runs\",\n        isFreeAction: true,\n        onClick: () => retry()\n      }\n    ],\n    data: runs != null ? runs : [],\n    onPageChange: onChangePage,\n    onRowsPerPageChange: onChangePageSize,\n    style: { width: \"100%\" },\n    title: /* @__PURE__ */ React.createElement(Box, {\n      display: \"flex\",\n      alignItems: \"center\"\n    }, /* @__PURE__ */ React.createElement(GitHubIcon, null), /* @__PURE__ */ React.createElement(Box, {\n      mr: 1\n    }), /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"h6\"\n    }, projectName)),\n    columns: generatedColumns\n  });\n};\nconst WorkflowRunsTable = ({\n  entity,\n  branch\n}) => {\n  var _a;\n  const config = useApi(configApiRef);\n  const projectName = getProjectNameFromEntity(entity);\n  const hostname = readGitHubIntegrationConfigs((_a = config.getOptionalConfigArray(\"integrations.github\")) != null ? _a : [])[0].host;\n  const [owner, repo] = (projectName != null ? projectName : \"/\").split(\"/\");\n  const [{ runs, ...tableProps }, { retry, setPage, setPageSize }] = useWorkflowRuns({\n    hostname,\n    owner,\n    repo,\n    branch\n  });\n  const githubHost = hostname || \"github.com\";\n  const hasNoRuns = !tableProps.loading && !runs;\n  return hasNoRuns ? /* @__PURE__ */ React.createElement(EmptyState, {\n    missing: \"data\",\n    title: \"No Workflow Data\",\n    description: \"This component has GitHub Actions enabled, but no data was found. Have you created any Workflows? Click the button below to create a new Workflow.\",\n    action: /* @__PURE__ */ React.createElement(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      href: `https://${githubHost}/${projectName}/actions/new`\n    }, \"Create new Workflow\")\n  }) : /* @__PURE__ */ React.createElement(WorkflowRunsTableView, {\n    ...tableProps,\n    runs,\n    loading: tableProps.loading,\n    retry,\n    onChangePageSize: setPageSize,\n    onChangePage: setPage\n  });\n};\n\nconst isGithubActionsAvailable = (entity) => {\n  var _a;\n  return Boolean((_a = entity.metadata.annotations) == null ? void 0 : _a[GITHUB_ACTIONS_ANNOTATION]);\n};\nconst Router = () => {\n  const { entity } = useEntity();\n  if (!isGithubActionsAvailable(entity)) {\n    return /* @__PURE__ */ React.createElement(MissingAnnotationEmptyState, {\n      annotation: GITHUB_ACTIONS_ANNOTATION\n    });\n  }\n  return /* @__PURE__ */ React.createElement(Routes, null, /* @__PURE__ */ React.createElement(Route, {\n    path: \"/\",\n    element: /* @__PURE__ */ React.createElement(WorkflowRunsTable, {\n      entity\n    })\n  }), /* @__PURE__ */ React.createElement(Route, {\n    path: `${buildRouteRef.path}`,\n    element: /* @__PURE__ */ React.createElement(WorkflowRunDetails, {\n      entity\n    })\n  }), \")\");\n};\n\nvar Router$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  isGithubActionsAvailable: isGithubActionsAvailable,\n  Router: Router\n});\n\nconst useStyles = makeStyles({\n  externalLinkIcon: {\n    fontSize: \"inherit\",\n    verticalAlign: \"bottom\"\n  }\n});\nconst WidgetContent = ({\n  error,\n  loading,\n  lastRun,\n  branch\n}) => {\n  var _a;\n  const classes = useStyles();\n  if (error)\n    return /* @__PURE__ */ React.createElement(Typography, null, \"Couldn't fetch latest \", branch, \" run\");\n  if (loading)\n    return /* @__PURE__ */ React.createElement(LinearProgress, null);\n  return /* @__PURE__ */ React.createElement(StructuredMetadataTable, {\n    metadata: {\n      status: /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(WorkflowRunStatus, {\n        status: lastRun.status,\n        conclusion: lastRun.conclusion\n      })),\n      message: lastRun.message,\n      url: /* @__PURE__ */ React.createElement(Link, {\n        to: (_a = lastRun.githubUrl) != null ? _a : \"\"\n      }, \"See more on GitHub\", \" \", /* @__PURE__ */ React.createElement(ExternalLinkIcon, {\n        className: classes.externalLinkIcon\n      }))\n    }\n  });\n};\nconst LatestWorkflowRunCard = ({\n  branch = \"master\",\n  variant\n}) => {\n  var _a, _b, _c, _d;\n  const { entity } = useEntity();\n  const config = useApi(configApiRef);\n  const errorApi = useApi(errorApiRef);\n  const hostname = readGitHubIntegrationConfigs((_a = config.getOptionalConfigArray(\"integrations.github\")) != null ? _a : [])[0].host;\n  const [owner, repo] = ((_c = (_b = entity == null ? void 0 : entity.metadata.annotations) == null ? void 0 : _b[GITHUB_ACTIONS_ANNOTATION]) != null ? _c : \"/\").split(\"/\");\n  const [{ runs, loading, error }] = useWorkflowRuns({\n    hostname,\n    owner,\n    repo,\n    branch\n  });\n  const lastRun = (_d = runs == null ? void 0 : runs[0]) != null ? _d : {};\n  useEffect(() => {\n    if (error) {\n      errorApi.post(error);\n    }\n  }, [error, errorApi]);\n  return /* @__PURE__ */ React.createElement(InfoCard, {\n    title: `Last ${branch} build`,\n    variant\n  }, /* @__PURE__ */ React.createElement(WidgetContent, {\n    error,\n    loading,\n    branch,\n    lastRun\n  }));\n};\nconst LatestWorkflowsForBranchCard = ({\n  branch = \"master\",\n  variant\n}) => {\n  const { entity } = useEntity();\n  return /* @__PURE__ */ React.createElement(InfoCard, {\n    title: `Last ${branch} build`,\n    variant\n  }, /* @__PURE__ */ React.createElement(WorkflowRunsTable, {\n    branch,\n    entity\n  }));\n};\n\nconst firstLine = (message) => message.split(\"\\n\")[0];\nconst RecentWorkflowRunsCard = ({\n  branch,\n  dense = false,\n  limit = 5,\n  variant\n}) => {\n  var _a, _b, _c;\n  const { entity } = useEntity();\n  const config = useApi(configApiRef);\n  const errorApi = useApi(errorApiRef);\n  const hostname = readGitHubIntegrationConfigs((_a = config.getOptionalConfigArray(\"integrations.github\")) != null ? _a : [])[0].host;\n  const [owner, repo] = ((_c = (_b = entity == null ? void 0 : entity.metadata.annotations) == null ? void 0 : _b[GITHUB_ACTIONS_ANNOTATION]) != null ? _c : \"/\").split(\"/\");\n  const [{ runs = [], loading, error }] = useWorkflowRuns({\n    hostname,\n    owner,\n    repo,\n    branch,\n    initialPageSize: limit\n  });\n  useEffect(() => {\n    if (error) {\n      errorApi.post(error);\n    }\n  }, [error, errorApi]);\n  const githubHost = hostname || \"github.com\";\n  return /* @__PURE__ */ React.createElement(InfoCard, {\n    title: \"Recent Workflow Runs\",\n    subheader: branch ? `Branch: ${branch}` : \"All Branches\",\n    noPadding: true,\n    variant\n  }, !runs.length ? /* @__PURE__ */ React.createElement(\"div\", {\n    style: { textAlign: \"center\" }\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"body1\"\n  }, \"This component has GitHub Actions enabled, but no workflows were found.\"), /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"body2\"\n  }, /* @__PURE__ */ React.createElement(Link, {\n    to: `https://${githubHost}/${owner}/${repo}/actions/new`\n  }, \"Create a new workflow\"))) : /* @__PURE__ */ React.createElement(Table$1, {\n    isLoading: loading,\n    options: {\n      search: false,\n      paging: false,\n      padding: dense ? \"dense\" : \"default\",\n      toolbar: false\n    },\n    columns: [\n      {\n        title: \"Commit Message\",\n        field: \"message\",\n        render: (data) => /* @__PURE__ */ React.createElement(Link, {\n          component: Link$2,\n          to: generatePath(\"./ci-cd/:id\", { id: data.id })\n        }, firstLine(data.message))\n      },\n      { title: \"Branch\", field: \"source.branchName\" },\n      { title: \"Status\", field: \"status\", render: WorkflowRunStatus }\n    ],\n    data: runs\n  }));\n};\n\nexport { BuildStatus, EntityGithubActionsContent, EntityLatestGithubActionRunCard, EntityLatestGithubActionsForBranchCard, EntityRecentGithubActionsRunsCard, GITHUB_ACTIONS_ANNOTATION, GithubActionsClient, LatestWorkflowRunCard, LatestWorkflowsForBranchCard, RecentWorkflowRunsCard, Router, githubActionsApiRef, githubActionsPlugin, isGithubActionsAvailable, isGithubActionsAvailable as isPluginApplicableToEntity, githubActionsPlugin as plugin };\n//# sourceMappingURL=index.esm.js.map\n","import { createApiRef, createRouteRef, createPlugin, createApiFactory, discoveryApiRef, identityApiRef, googleAuthApiRef, createRoutableExtension, useApi } from '@backstage/core-plugin-api';\nimport * as React from 'react';\nimport React__default, { Fragment, useState, useEffect, useContext } from 'react';\nimport { useEntity } from '@backstage/plugin-catalog-react';\nimport { Routes, Route } from 'react-router-dom';\nimport { Typography, Chip, Grid, makeStyles, createStyles, Button, Drawer, IconButton, FormControlLabel, Switch, Accordion, AccordionSummary, AccordionDetails, Divider, Stepper, Step, StepLabel } from '@material-ui/core';\nimport { WarningPanel, InfoCard, Table, SubvalueCell, StatusOK, StatusError, StatusAborted, Button as Button$1, CodeSnippet, StructuredMetadataTable, StatusPending, Page, Content, Progress, MissingAnnotationEmptyState } from '@backstage/core-components';\nimport EmptyStateImage from './assets/emptystate.svg';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport Close from '@material-ui/icons/Close';\nimport OpenInNewIcon from '@material-ui/icons/OpenInNew';\nimport { withStyles } from '@material-ui/core/styles';\nimport jsYaml from 'js-yaml';\nimport useInterval from 'react-use/lib/useInterval';\nimport cronstrue from 'cronstrue';\nimport lodash from 'lodash';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport ErrorOutlineIcon from '@material-ui/icons/ErrorOutline';\nimport { DateTime } from 'luxon';\n\nclass KubernetesBackendClient {\n  constructor(options) {\n    this.discoveryApi = options.discoveryApi;\n    this.identityApi = options.identityApi;\n  }\n  async handleResponse(response) {\n    if (!response.ok) {\n      const payload = await response.text();\n      let message;\n      switch (response.status) {\n        case 404:\n          message = \"Could not find the Kubernetes Backend (HTTP 404). Make sure the plugin has been fully installed.\";\n          break;\n        default:\n          message = `Request failed with ${response.status} ${response.statusText}, ${payload}`;\n      }\n      throw new Error(message);\n    }\n    return await response.json();\n  }\n  async postRequired(path, requestBody) {\n    const url = `${await this.discoveryApi.getBaseUrl(\"kubernetes\")}${path}`;\n    const { token: idToken } = await this.identityApi.getCredentials();\n    const response = await fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...idToken && { Authorization: `Bearer ${idToken}` }\n      },\n      body: JSON.stringify(requestBody)\n    });\n    return this.handleResponse(response);\n  }\n  async getObjectsByEntity(requestBody) {\n    return await this.postRequired(`/services/${requestBody.entity.metadata.name}`, requestBody);\n  }\n  async getClusters() {\n    const { token: idToken } = await this.identityApi.getCredentials();\n    const url = `${await this.discoveryApi.getBaseUrl(\"kubernetes\")}/clusters`;\n    const response = await fetch(url, {\n      method: \"GET\",\n      headers: {\n        ...idToken && { Authorization: `Bearer ${idToken}` }\n      }\n    });\n    return (await this.handleResponse(response)).items;\n  }\n}\n\nconst kubernetesApiRef = createApiRef({\n  id: \"plugin.kubernetes.service\"\n});\n\nconst kubernetesAuthProvidersApiRef = createApiRef({\n  id: \"plugin.kubernetes-auth-providers.service\"\n});\n\nclass GoogleKubernetesAuthProvider {\n  constructor(authProvider) {\n    this.authProvider = authProvider;\n  }\n  async decorateRequestBodyForAuth(requestBody) {\n    const googleAuthToken = await this.authProvider.getAccessToken(\"https://www.googleapis.com/auth/cloud-platform\");\n    if (\"auth\" in requestBody) {\n      requestBody.auth.google = googleAuthToken;\n    } else {\n      requestBody.auth = { google: googleAuthToken };\n    }\n    return requestBody;\n  }\n}\n\nclass ServiceAccountKubernetesAuthProvider {\n  async decorateRequestBodyForAuth(requestBody) {\n    return requestBody;\n  }\n}\n\nclass AwsKubernetesAuthProvider {\n  async decorateRequestBodyForAuth(requestBody) {\n    return requestBody;\n  }\n}\n\nclass GoogleServiceAccountAuthProvider {\n  async decorateRequestBodyForAuth(requestBody) {\n    return requestBody;\n  }\n}\n\nclass KubernetesAuthProviders {\n  constructor(options) {\n    this.kubernetesAuthProviderMap = /* @__PURE__ */ new Map();\n    this.kubernetesAuthProviderMap.set(\"google\", new GoogleKubernetesAuthProvider(options.googleAuthApi));\n    this.kubernetesAuthProviderMap.set(\"serviceAccount\", new ServiceAccountKubernetesAuthProvider());\n    this.kubernetesAuthProviderMap.set(\"googleServiceAccount\", new GoogleServiceAccountAuthProvider());\n    this.kubernetesAuthProviderMap.set(\"aws\", new AwsKubernetesAuthProvider());\n  }\n  async decorateRequestBodyForAuth(authProvider, requestBody) {\n    const kubernetesAuthProvider = this.kubernetesAuthProviderMap.get(authProvider);\n    if (kubernetesAuthProvider) {\n      return await kubernetesAuthProvider.decorateRequestBodyForAuth(requestBody);\n    }\n    throw new Error(`authProvider \"${authProvider}\" has no KubernetesAuthProvider defined for it`);\n  }\n}\n\nconst rootCatalogKubernetesRouteRef = createRouteRef({\n  id: \"kubernetes\"\n});\nconst kubernetesPlugin = createPlugin({\n  id: \"kubernetes\",\n  apis: [\n    createApiFactory({\n      api: kubernetesApiRef,\n      deps: {\n        discoveryApi: discoveryApiRef,\n        identityApi: identityApiRef\n      },\n      factory: ({ discoveryApi, identityApi }) => new KubernetesBackendClient({ discoveryApi, identityApi })\n    }),\n    createApiFactory({\n      api: kubernetesAuthProvidersApiRef,\n      deps: { googleAuthApi: googleAuthApiRef },\n      factory: ({ googleAuthApi }) => {\n        return new KubernetesAuthProviders({ googleAuthApi });\n      }\n    })\n  ],\n  routes: {\n    entityContent: rootCatalogKubernetesRouteRef\n  }\n});\nconst EntityKubernetesContent = kubernetesPlugin.provide(createRoutableExtension({\n  name: \"EntityKubernetesContent\",\n  component: () => Promise.resolve().then(function () { return Router$1; }).then((m) => m.Router),\n  mountPoint: rootCatalogKubernetesRouteRef\n}));\n\nconst clustersWithErrorsToErrorMessage = (clustersWithErrors) => {\n  return clustersWithErrors.map((c, i) => {\n    return /* @__PURE__ */ React__default.createElement(\"div\", {\n      key: i\n    }, /* @__PURE__ */ React__default.createElement(Typography, {\n      variant: \"body2\"\n    }, `Cluster: ${c.cluster.name}`), c.errors.map((e, j) => {\n      return /* @__PURE__ */ React__default.createElement(Typography, {\n        variant: \"body2\",\n        key: j\n      }, `Error fetching Kubernetes resource: '${e.resourcePath}', error: ${e.errorType}, status code: ${e.statusCode}`);\n    }), /* @__PURE__ */ React__default.createElement(\"br\", null));\n  });\n};\nconst ErrorPanel$1 = ({\n  entityName,\n  errorMessage,\n  clustersWithErrors\n}) => /* @__PURE__ */ React__default.createElement(WarningPanel, {\n  title: \"There was a problem retrieving Kubernetes objects\",\n  message: `There was a problem retrieving some Kubernetes resources for the entity: ${entityName}. This could mean that the Error Reporting card is not completely accurate.`\n}, clustersWithErrors && /* @__PURE__ */ React__default.createElement(\"div\", null, \"Errors: \", clustersWithErrorsToErrorMessage(clustersWithErrors)), errorMessage && /* @__PURE__ */ React__default.createElement(Typography, {\n  variant: \"body2\"\n}, \"Errors: \", errorMessage));\n\nconst columns = [\n  {\n    title: \"cluster\",\n    width: \"15%\",\n    render: (detectedError) => detectedError.cluster\n  },\n  {\n    title: \"kind\",\n    width: \"15%\",\n    render: (detectedError) => detectedError.kind\n  },\n  {\n    title: \"name\",\n    width: \"30%\",\n    render: (detectedError) => {\n      const errorCount = detectedError.names.length;\n      if (errorCount === 0) {\n        return null;\n      }\n      const displayName = detectedError.names[0];\n      const otherErrorCount = errorCount - 1;\n      return /* @__PURE__ */ React.createElement(React.Fragment, null, displayName, \" \", otherErrorCount > 0 && /* @__PURE__ */ React.createElement(Chip, {\n        label: `+ ${otherErrorCount} other${otherErrorCount > 1 ? \"s\" : \"\"}`,\n        size: \"small\"\n      }));\n    }\n  },\n  {\n    title: \"messages\",\n    width: \"40%\",\n    render: (detectedError) => /* @__PURE__ */ React.createElement(React.Fragment, null, detectedError.message.map((m, i) => /* @__PURE__ */ React.createElement(\"div\", {\n      key: i\n    }, m)))\n  }\n];\nconst sortBySeverity = (a, b) => {\n  if (a.severity < b.severity) {\n    return 1;\n  } else if (b.severity < a.severity) {\n    return -1;\n  }\n  return 0;\n};\nconst ErrorEmptyState = () => {\n  return /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    justifyContent: \"space-around\",\n    direction: \"row\",\n    alignItems: \"center\",\n    spacing: 2\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 4\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"h5\"\n  }, \"Nice! There are no errors to report!\")), /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 4\n  }, /* @__PURE__ */ React.createElement(\"img\", {\n    src: EmptyStateImage,\n    alt: \"EmptyState\",\n    \"data-testid\": \"emptyStateImg\"\n  })));\n};\nconst ErrorReporting = ({ detectedErrors }) => {\n  const errors = Array.from(detectedErrors.values()).flat().sort(sortBySeverity);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, errors.length === 0 ? /* @__PURE__ */ React.createElement(InfoCard, {\n    title: \"Error Reporting\"\n  }, /* @__PURE__ */ React.createElement(ErrorEmptyState, null)) : /* @__PURE__ */ React.createElement(Table, {\n    title: \"Error Reporting\",\n    data: errors,\n    columns,\n    options: { paging: true, search: false }\n  }));\n};\n\nconst groupResponses = (fetchResponse) => {\n  return fetchResponse.reduce((prev, next) => {\n    switch (next.type) {\n      case \"deployments\":\n        prev.deployments.push(...next.resources);\n        break;\n      case \"pods\":\n        prev.pods.push(...next.resources);\n        break;\n      case \"replicasets\":\n        prev.replicaSets.push(...next.resources);\n        break;\n      case \"services\":\n        prev.services.push(...next.resources);\n        break;\n      case \"configmaps\":\n        prev.configMaps.push(...next.resources);\n        break;\n      case \"horizontalpodautoscalers\":\n        prev.horizontalPodAutoscalers.push(...next.resources);\n        break;\n      case \"ingresses\":\n        prev.ingresses.push(...next.resources);\n        break;\n      case \"jobs\":\n        prev.jobs.push(...next.resources);\n        break;\n      case \"cronjobs\":\n        prev.cronJobs.push(...next.resources);\n        break;\n      case \"customresources\":\n        prev.customResources.push(...next.resources);\n        break;\n    }\n    return prev;\n  }, {\n    pods: [],\n    replicaSets: [],\n    deployments: [],\n    services: [],\n    configMaps: [],\n    horizontalPodAutoscalers: [],\n    ingresses: [],\n    jobs: [],\n    cronJobs: [],\n    customResources: []\n  });\n};\n\nconst imageChips = (pod) => {\n  var _a, _b;\n  const containerStatuses2 = (_b = (_a = pod.status) == null ? void 0 : _a.containerStatuses) != null ? _b : [];\n  const images = containerStatuses2.map((cs, i) => {\n    return /* @__PURE__ */ React__default.createElement(Chip, {\n      key: i,\n      label: `${cs.name}=${cs.image}`,\n      size: \"small\"\n    });\n  });\n  return /* @__PURE__ */ React__default.createElement(\"div\", null, images);\n};\nconst containersReady = (pod) => {\n  var _a, _b;\n  const containerStatuses2 = (_b = (_a = pod.status) == null ? void 0 : _a.containerStatuses) != null ? _b : [];\n  const containersReadyItem = containerStatuses2.filter((cs) => cs.ready).length;\n  return `${containersReadyItem}/${containerStatuses2.length}`;\n};\nconst totalRestarts = (pod) => {\n  var _a, _b;\n  const containerStatuses2 = (_b = (_a = pod.status) == null ? void 0 : _a.containerStatuses) != null ? _b : [];\n  return containerStatuses2 == null ? void 0 : containerStatuses2.reduce((a, b) => a + b.restartCount, 0);\n};\nconst containerStatuses = (pod) => {\n  var _a, _b;\n  const containerStatusesItem = (_b = (_a = pod.status) == null ? void 0 : _a.containerStatuses) != null ? _b : [];\n  const errors = containerStatusesItem.reduce((accum, next) => {\n    if (next.state === void 0) {\n      return accum;\n    }\n    const waiting = next.state.waiting;\n    const terminated = next.state.terminated;\n    const renderCell = (reason) => {\n      var _a2;\n      return /* @__PURE__ */ React__default.createElement(Fragment, {\n        key: `${(_a2 = pod.metadata) == null ? void 0 : _a2.name}-${next.name}`\n      }, /* @__PURE__ */ React__default.createElement(SubvalueCell, {\n        value: reason === \"Completed\" ? /* @__PURE__ */ React__default.createElement(StatusOK, null, \"Container: \", next.name) : /* @__PURE__ */ React__default.createElement(StatusError, null, \"Container: \", next.name),\n        subvalue: reason\n      }), /* @__PURE__ */ React__default.createElement(\"br\", null));\n    };\n    if (waiting) {\n      accum.push(renderCell(waiting.reason));\n    }\n    if (terminated) {\n      accum.push(renderCell(terminated.reason));\n    }\n    return accum;\n  }, []);\n  if (errors.length === 0) {\n    return /* @__PURE__ */ React__default.createElement(StatusOK, null, \"OK\");\n  }\n  return errors;\n};\nconst renderCondition = (condition) => {\n  var _a;\n  const status = condition.status;\n  if (status === \"True\") {\n    return [condition.type, /* @__PURE__ */ React__default.createElement(StatusOK, null, \"True\")];\n  } else if (status === \"False\") {\n    return [\n      condition.type,\n      /* @__PURE__ */ React__default.createElement(SubvalueCell, {\n        value: /* @__PURE__ */ React__default.createElement(StatusError, null, \"False\"),\n        subvalue: (_a = condition.message) != null ? _a : \"\"\n      })\n    ];\n  }\n  return [condition.type, /* @__PURE__ */ React__default.createElement(StatusAborted, null)];\n};\nconst currentToDeclaredResourceToPerc = (current, resource) => {\n  if (Number(resource) === 0)\n    return `0%`;\n  if (typeof current === \"number\" && typeof resource === \"number\") {\n    return `${Math.round(current / resource * 100)}%`;\n  }\n  const numerator = BigInt(current);\n  const denominator = BigInt(resource);\n  return `${numerator * BigInt(100) / denominator}%`;\n};\nconst podStatusToCpuUtil = (podStatus) => {\n  const cpuUtil = podStatus.cpu;\n  let currentUsage = cpuUtil.currentUsage;\n  if (typeof cpuUtil.currentUsage === \"number\") {\n    currentUsage = cpuUtil.currentUsage / 10;\n  }\n  return /* @__PURE__ */ React__default.createElement(SubvalueCell, {\n    value: `requests: ${currentToDeclaredResourceToPerc(currentUsage, cpuUtil.requestTotal)}`,\n    subvalue: `limits: ${currentToDeclaredResourceToPerc(currentUsage, cpuUtil.limitTotal)}`\n  });\n};\nconst podStatusToMemoryUtil = (podStatus) => {\n  const memUtil = podStatus.memory;\n  return /* @__PURE__ */ React__default.createElement(SubvalueCell, {\n    value: `requests: ${currentToDeclaredResourceToPerc(memUtil.currentUsage, memUtil.requestTotal)}`,\n    subvalue: `limits: ${currentToDeclaredResourceToPerc(memUtil.currentUsage, memUtil.limitTotal)}`\n  });\n};\n\nconst detectErrorsInObjects = (objects, kind, clusterName, errorMappers) => {\n  var _a, _b;\n  const errors = /* @__PURE__ */ new Map();\n  for (const object of objects) {\n    for (const errorMapper of errorMappers) {\n      if (errorMapper.errorExists(object)) {\n        const message = errorMapper.messageAccessor(object);\n        const dedupKey = message.join(\"\");\n        const value = errors.get(dedupKey);\n        const name = (_b = (_a = object.metadata) == null ? void 0 : _a.name) != null ? _b : \"unknown\";\n        if (value !== void 0) {\n          value.names.push(name);\n          errors.set(dedupKey, value);\n        } else {\n          errors.set(dedupKey, {\n            cluster: clusterName,\n            kind,\n            names: [name],\n            message,\n            severity: errorMapper.severity\n          });\n        }\n      }\n    }\n  }\n  return Array.from(errors.values());\n};\n\nconst podErrorMappers = [\n  {\n    severity: 5,\n    errorExplanation: \"status-message\",\n    errorExists: (pod) => {\n      var _a;\n      return ((_a = pod.status) == null ? void 0 : _a.message) !== void 0;\n    },\n    messageAccessor: (pod) => {\n      var _a, _b;\n      return [(_b = (_a = pod.status) == null ? void 0 : _a.message) != null ? _b : \"\"];\n    }\n  },\n  {\n    severity: 4,\n    errorExplanation: \"containers-restarting\",\n    errorExists: (pod) => {\n      return totalRestarts(pod) > 3;\n    },\n    messageAccessor: (pod) => {\n      var _a, _b;\n      return ((_b = (_a = pod.status) == null ? void 0 : _a.containerStatuses) != null ? _b : []).filter((cs) => cs.restartCount > 0).map((cs) => `container=${cs.name} restarted ${cs.restartCount} times`);\n    }\n  },\n  {\n    severity: 5,\n    errorExplanation: \"condition-message-present\",\n    errorExists: (pod) => {\n      var _a, _b;\n      return ((_b = (_a = pod.status) == null ? void 0 : _a.conditions) != null ? _b : []).some((c) => c.message !== void 0);\n    },\n    messageAccessor: (pod) => {\n      var _a, _b;\n      return ((_b = (_a = pod.status) == null ? void 0 : _a.conditions) != null ? _b : []).filter((c) => c.message !== void 0).map((c) => {\n        var _a2;\n        return (_a2 = c.message) != null ? _a2 : \"\";\n      });\n    }\n  },\n  {\n    severity: 6,\n    errorExplanation: \"container-waiting\",\n    errorExists: (pod) => {\n      var _a, _b;\n      return ((_b = (_a = pod.status) == null ? void 0 : _a.containerStatuses) != null ? _b : []).some((cs) => {\n        var _a2, _b2;\n        return ((_b2 = (_a2 = cs.state) == null ? void 0 : _a2.waiting) == null ? void 0 : _b2.message) !== void 0;\n      });\n    },\n    messageAccessor: (pod) => {\n      var _a, _b;\n      return ((_b = (_a = pod.status) == null ? void 0 : _a.containerStatuses) != null ? _b : []).filter((cs) => {\n        var _a2, _b2;\n        return ((_b2 = (_a2 = cs.state) == null ? void 0 : _a2.waiting) == null ? void 0 : _b2.message) !== void 0;\n      }).map((cs) => {\n        var _a2, _b2, _c;\n        return (_c = (_b2 = (_a2 = cs.state) == null ? void 0 : _a2.waiting) == null ? void 0 : _b2.message) != null ? _c : \"\";\n      });\n    }\n  },\n  {\n    severity: 4,\n    errorExplanation: \"container-last-state-error\",\n    errorExists: (pod) => {\n      var _a, _b;\n      return ((_b = (_a = pod.status) == null ? void 0 : _a.containerStatuses) != null ? _b : []).some((cs) => {\n        var _a2, _b2, _c;\n        return ((_c = (_b2 = (_a2 = cs.lastState) == null ? void 0 : _a2.terminated) == null ? void 0 : _b2.reason) != null ? _c : \"\") === \"Error\";\n      });\n    },\n    messageAccessor: (pod) => {\n      var _a, _b;\n      return ((_b = (_a = pod.status) == null ? void 0 : _a.containerStatuses) != null ? _b : []).filter((cs) => {\n        var _a2, _b2, _c;\n        return ((_c = (_b2 = (_a2 = cs.lastState) == null ? void 0 : _a2.terminated) == null ? void 0 : _b2.reason) != null ? _c : \"\") === \"Error\";\n      }).map((cs) => {\n        var _a2, _b2;\n        return `container=${cs.name} exited with error code (${(_b2 = (_a2 = cs.lastState) == null ? void 0 : _a2.terminated) == null ? void 0 : _b2.exitCode})`;\n      });\n    }\n  }\n];\nconst detectErrorsInPods = (pods, clusterName) => detectErrorsInObjects(pods, \"Pod\", clusterName, podErrorMappers);\n\nconst deploymentErrorMappers = [\n  {\n    severity: 6,\n    errorExplanation: \"condition-message-present\",\n    errorExists: (deployment) => {\n      var _a, _b;\n      return ((_b = (_a = deployment.status) == null ? void 0 : _a.conditions) != null ? _b : []).filter((c) => c.status === \"False\").some((c) => c.message !== void 0);\n    },\n    messageAccessor: (deployment) => {\n      var _a, _b;\n      return ((_b = (_a = deployment.status) == null ? void 0 : _a.conditions) != null ? _b : []).filter((c) => c.status === \"False\").filter((c) => c.message !== void 0).map((c) => {\n        var _a2;\n        return (_a2 = c.message) != null ? _a2 : \"\";\n      });\n    }\n  }\n];\nconst detectErrorsInDeployments = (deployments, clusterName) => detectErrorsInObjects(deployments, \"Deployment\", clusterName, deploymentErrorMappers);\n\nconst hpaErrorMappers = [\n  {\n    severity: 8,\n    errorExplanation: \"hpa-max-current-replicas\",\n    errorExists: (hpa) => {\n      var _a, _b, _c;\n      return ((_b = (_a = hpa.spec) == null ? void 0 : _a.maxReplicas) != null ? _b : -1) === ((_c = hpa.status) == null ? void 0 : _c.currentReplicas);\n    },\n    messageAccessor: (hpa) => {\n      var _a, _b, _c;\n      return [\n        `Current number of replicas (${(_a = hpa.status) == null ? void 0 : _a.currentReplicas}) is equal to the configured max number of replicas (${(_c = (_b = hpa.spec) == null ? void 0 : _b.maxReplicas) != null ? _c : -1})`\n      ];\n    }\n  }\n];\nconst detectErrorsInHpa = (hpas, clusterName) => detectErrorsInObjects(hpas, \"HorizontalPodAutoscaler\", clusterName, hpaErrorMappers);\n\nconst detectErrors = (objects) => {\n  const errors = /* @__PURE__ */ new Map();\n  for (const clusterResponse of objects.items) {\n    let clusterErrors = [];\n    const groupedResponses = groupResponses(clusterResponse.resources);\n    clusterErrors = clusterErrors.concat(detectErrorsInPods(groupedResponses.pods, clusterResponse.cluster.name));\n    clusterErrors = clusterErrors.concat(detectErrorsInDeployments(groupedResponses.deployments, clusterResponse.cluster.name));\n    clusterErrors = clusterErrors.concat(detectErrorsInHpa(groupedResponses.horizontalPodAutoscalers, clusterResponse.cluster.name));\n    errors.set(clusterResponse.cluster.name, clusterErrors);\n  }\n  return errors;\n};\n\nconst useKubernetesObjects = (entity, intervalMs = 1e4) => {\n  const kubernetesApi = useApi(kubernetesApiRef);\n  const kubernetesAuthProvidersApi = useApi(kubernetesAuthProvidersApiRef);\n  const [kubernetesObjects, setKubernetesObjects] = useState(void 0);\n  const [error, setError] = useState(void 0);\n  const getObjects = async () => {\n    let clusters = [];\n    try {\n      clusters = await kubernetesApi.getClusters();\n    } catch (e) {\n      setError(e.message);\n      return;\n    }\n    const authProviders = [\n      ...new Set(clusters.map((c) => c.authProvider))\n    ];\n    let requestBody = {\n      entity\n    };\n    for (const authProviderStr of authProviders) {\n      try {\n        requestBody = await kubernetesAuthProvidersApi.decorateRequestBodyForAuth(authProviderStr, requestBody);\n      } catch (e) {\n        setError(e.message);\n        return;\n      }\n    }\n    try {\n      setKubernetesObjects(await kubernetesApi.getObjectsByEntity(requestBody));\n    } catch (e) {\n      setError(e.message);\n      return;\n    }\n  };\n  useEffect(() => {\n    getObjects();\n  }, [entity.metadata.name, kubernetesApi, kubernetesAuthProvidersApi]);\n  useInterval(() => {\n    getObjects();\n  }, intervalMs);\n  return {\n    kubernetesObjects,\n    error\n  };\n};\n\nconst PodNamesWithErrorsContext = React__default.createContext(/* @__PURE__ */ new Set());\n\nconst PodNamesWithMetricsContext = React__default.createContext(/* @__PURE__ */ new Map());\n\nconst GroupedResponsesContext = React__default.createContext({\n  pods: [],\n  replicaSets: [],\n  deployments: [],\n  services: [],\n  configMaps: [],\n  horizontalPodAutoscalers: [],\n  ingresses: [],\n  jobs: [],\n  cronJobs: [],\n  customResources: []\n});\n\nconst ClusterContext = React__default.createContext({\n  name: \"\"\n});\n\nconst kindMappings$3 = {\n  deployment: \"deployment\",\n  pod: \"pod\",\n  ingress: \"ingress\",\n  service: \"service\",\n  horizontalpodautoscaler: \"deployment\"\n};\nfunction standardFormatter(options) {\n  var _a, _b, _c, _d;\n  if (!options.dashboardUrl) {\n    throw new Error(\"standard dashboard requires a dashboardUrl option\");\n  }\n  const result = new URL(options.dashboardUrl.href);\n  const name = encodeURIComponent((_b = (_a = options.object.metadata) == null ? void 0 : _a.name) != null ? _b : \"\");\n  const namespace = encodeURIComponent((_d = (_c = options.object.metadata) == null ? void 0 : _c.namespace) != null ? _d : \"\");\n  const validKind = kindMappings$3[options.kind.toLocaleLowerCase(\"en-US\")];\n  if (!result.pathname.endsWith(\"/\")) {\n    result.pathname += \"/\";\n  }\n  if (validKind && name && namespace) {\n    result.hash = `/${validKind}/${namespace}/${name}`;\n  } else if (namespace) {\n    result.hash = \"/workloads\";\n  }\n  if (namespace) {\n    result.hash += `?namespace=${namespace}`;\n  }\n  return result;\n}\n\nconst kindMappings$2 = {\n  deployment: \"apps.deployment\",\n  ingress: \"networking.k8s.io.ingress\",\n  service: \"service\",\n  horizontalpodautoscaler: \"autoscaling.horizontalpodautoscaler\"\n};\nfunction rancherFormatter(options) {\n  var _a, _b, _c, _d;\n  if (!options.dashboardUrl) {\n    throw new Error(\"Rancher dashboard requires a dashboardUrl option\");\n  }\n  const basePath = new URL(options.dashboardUrl.href);\n  const name = encodeURIComponent((_b = (_a = options.object.metadata) == null ? void 0 : _a.name) != null ? _b : \"\");\n  const namespace = encodeURIComponent((_d = (_c = options.object.metadata) == null ? void 0 : _c.namespace) != null ? _d : \"\");\n  const validKind = kindMappings$2[options.kind.toLocaleLowerCase(\"en-US\")];\n  if (!basePath.pathname.endsWith(\"/\")) {\n    basePath.pathname += \"/\";\n  }\n  let path = \"\";\n  if (validKind && name && namespace) {\n    path = `explorer/${validKind}/${namespace}/${name}`;\n  } else if (namespace) {\n    path = \"explorer/workload\";\n  }\n  return new URL(path, basePath);\n}\n\nconst kindMappings$1 = {\n  deployment: \"deployments\",\n  ingress: \"ingresses\",\n  service: \"services\",\n  horizontalpodautoscaler: \"horizontalpodautoscalers\",\n  persistentvolume: \"persistentvolumes\"\n};\nfunction openshiftFormatter(options) {\n  var _a, _b, _c, _d;\n  if (!options.dashboardUrl) {\n    throw new Error(\"OpenShift dashboard requires a dashboardUrl option\");\n  }\n  const basePath = new URL(options.dashboardUrl.href);\n  const name = encodeURIComponent((_b = (_a = options.object.metadata) == null ? void 0 : _a.name) != null ? _b : \"\");\n  const namespace = encodeURIComponent((_d = (_c = options.object.metadata) == null ? void 0 : _c.namespace) != null ? _d : \"\");\n  const validKind = kindMappings$1[options.kind.toLocaleLowerCase(\"en-US\")];\n  if (!basePath.pathname.endsWith(\"/\")) {\n    basePath.pathname += \"/\";\n  }\n  let path = \"\";\n  if (namespace) {\n    if (name && validKind) {\n      path = `k8s/ns/${namespace}/${validKind}/${name}`;\n    } else {\n      path = `k8s/cluster/projects/${namespace}`;\n    }\n  } else if (validKind) {\n    path = `k8s/cluster/${validKind}`;\n    if (name) {\n      path += `/${name}`;\n    }\n  }\n  return new URL(path, basePath);\n}\n\nfunction aksFormatter(_options) {\n  throw new Error(\"AKS formatter is not yet implemented. Please, contribute!\");\n}\n\nfunction eksFormatter(_options) {\n  throw new Error(\"EKS formatter is not yet implemented. Please, contribute!\");\n}\n\nconst kindMappings = {\n  deployment: \"deployment\",\n  pod: \"pod\",\n  ingress: \"ingress\",\n  service: \"service\",\n  horizontalpodautoscaler: \"deployment\"\n};\nfunction gkeFormatter(options) {\n  var _a, _b, _c, _d;\n  if (!options.dashboardParameters) {\n    throw new Error(\"GKE dashboard requires a dashboardParameters option\");\n  }\n  const args = options.dashboardParameters;\n  if (typeof args.projectId !== \"string\") {\n    throw new Error('GKE dashboard requires a \"projectId\" of type string in the dashboardParameters option');\n  }\n  if (typeof args.region !== \"string\") {\n    throw new Error('GKE dashboard requires a \"region\" of type string in the dashboardParameters option');\n  }\n  if (typeof args.clusterName !== \"string\") {\n    throw new Error('GKE dashboard requires a \"clusterName\" of type string in the dashboardParameters option');\n  }\n  const basePath = new URL(\"https://console.cloud.google.com/\");\n  const region = encodeURIComponent(args.region);\n  const clusterName = encodeURIComponent(args.clusterName);\n  const name = encodeURIComponent((_b = (_a = options.object.metadata) == null ? void 0 : _a.name) != null ? _b : \"\");\n  const namespace = encodeURIComponent((_d = (_c = options.object.metadata) == null ? void 0 : _c.namespace) != null ? _d : \"\");\n  const validKind = kindMappings[options.kind.toLocaleLowerCase(\"en-US\")];\n  let path = \"\";\n  if (namespace && name && validKind) {\n    const kindsWithDetails = [\"ingress\", \"pod\"];\n    const landingPage = kindsWithDetails.includes(validKind) ? \"details\" : \"overview\";\n    path = `kubernetes/${validKind}/${region}/${clusterName}/${namespace}/${name}/${landingPage}`;\n  } else {\n    path = `kubernetes/clusters/details/${region}/${clusterName}/details`;\n  }\n  const result = new URL(path, basePath);\n  result.searchParams.set(\"project\", args.projectId);\n  return result;\n}\n\nconst clusterLinksFormatters = {\n  standard: standardFormatter,\n  rancher: rancherFormatter,\n  openshift: openshiftFormatter,\n  aks: aksFormatter,\n  eks: eksFormatter,\n  gke: gkeFormatter\n};\nconst defaultFormatterName = \"standard\";\n\nfunction formatClusterLink(options) {\n  if (!options.dashboardUrl && !options.dashboardParameters) {\n    return void 0;\n  }\n  if (options.dashboardUrl && !options.object) {\n    return options.dashboardUrl;\n  }\n  const app = options.dashboardApp || defaultFormatterName;\n  const formatter = clusterLinksFormatters[app];\n  if (!formatter) {\n    throw new Error(`Could not find Kubernetes dashboard app named '${app}'`);\n  }\n  const url = formatter({\n    dashboardUrl: options.dashboardUrl ? new URL(options.dashboardUrl) : void 0,\n    dashboardParameters: options.dashboardParameters,\n    object: options.object,\n    kind: options.kind\n  });\n  return url.toString();\n}\n\nconst useDrawerStyles = makeStyles((theme) => createStyles({\n  paper: {\n    width: \"50%\",\n    justifyContent: \"space-between\",\n    padding: theme.spacing(2.5)\n  }\n}));\nconst useDrawerContentStyles = makeStyles((_) => createStyles({\n  header: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\"\n  },\n  errorMessage: {\n    marginTop: \"1em\",\n    marginBottom: \"1em\"\n  },\n  options: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\"\n  },\n  icon: {\n    fontSize: 20\n  },\n  content: {\n    height: \"80%\"\n  }\n}));\nconst PodDrawerButton = withStyles({\n  root: {\n    padding: \"6px 5px\"\n  },\n  label: {\n    textTransform: \"none\"\n  }\n})(Button);\nconst ErrorPanel = ({ cluster, errorMessage }) => /* @__PURE__ */ React__default.createElement(WarningPanel, {\n  title: \"There was a problem formatting the link to the Kubernetes dashboard\",\n  message: `Could not format the link to the dashboard of your cluster named '${cluster.name}'. Its dashboardApp property has been set to '${cluster.dashboardApp || \"standard\"}.'`\n}, errorMessage && /* @__PURE__ */ React__default.createElement(Typography, {\n  variant: \"body2\"\n}, \"Errors: \", errorMessage));\nfunction replaceNullsWithUndefined(someObj) {\n  const replacer = (_, value) => String(value) === \"null\" || String(value) === \"undefined\" ? void 0 : value;\n  return JSON.parse(JSON.stringify(someObj, replacer));\n}\nfunction tryFormatClusterLink(options) {\n  try {\n    return {\n      clusterLink: formatClusterLink(options),\n      errorMessage: \"\"\n    };\n  } catch (err) {\n    return {\n      clusterLink: \"\",\n      errorMessage: err.message || err.toString()\n    };\n  }\n}\nconst KubernetesDrawerContent = ({\n  toggleDrawer,\n  object,\n  renderObject,\n  kind\n}) => {\n  var _a, _b;\n  const [isYaml, setIsYaml] = useState(false);\n  const classes = useDrawerContentStyles();\n  const cluster = useContext(ClusterContext);\n  const { clusterLink, errorMessage } = tryFormatClusterLink({\n    dashboardUrl: cluster.dashboardUrl,\n    dashboardApp: cluster.dashboardApp,\n    dashboardParameters: cluster.dashboardParameters,\n    object,\n    kind\n  });\n  return /* @__PURE__ */ React__default.createElement(React__default.Fragment, null, /* @__PURE__ */ React__default.createElement(\"div\", {\n    className: classes.header\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    container: true,\n    direction: \"column\",\n    justifyContent: \"flex-start\",\n    alignItems: \"flex-start\"\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(Typography, {\n    variant: \"h5\"\n  }, (_b = (_a = object.metadata) == null ? void 0 : _a.name) != null ? _b : \"unknown name\")), /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(Typography, {\n    color: \"textSecondary\",\n    variant: \"body1\"\n  }, kind))), /* @__PURE__ */ React__default.createElement(IconButton, {\n    key: \"dismiss\",\n    title: \"Close the drawer\",\n    onClick: (e) => toggleDrawer(e, false),\n    color: \"inherit\"\n  }, /* @__PURE__ */ React__default.createElement(Close, {\n    className: classes.icon\n  }))), errorMessage && /* @__PURE__ */ React__default.createElement(\"div\", {\n    className: classes.errorMessage\n  }, /* @__PURE__ */ React__default.createElement(ErrorPanel, {\n    cluster,\n    errorMessage\n  })), /* @__PURE__ */ React__default.createElement(\"div\", {\n    className: classes.options\n  }, /* @__PURE__ */ React__default.createElement(\"div\", null, clusterLink && /* @__PURE__ */ React__default.createElement(Button$1, {\n    variant: \"outlined\",\n    color: \"primary\",\n    size: \"small\",\n    to: clusterLink,\n    endIcon: /* @__PURE__ */ React__default.createElement(OpenInNewIcon, null)\n  }, \"Open Kubernetes Dashboard\")), /* @__PURE__ */ React__default.createElement(FormControlLabel, {\n    control: /* @__PURE__ */ React__default.createElement(Switch, {\n      checked: isYaml,\n      onChange: (event) => {\n        setIsYaml(event.target.checked);\n      },\n      name: \"YAML\"\n    }),\n    label: \"YAML\"\n  })), /* @__PURE__ */ React__default.createElement(\"div\", {\n    className: classes.content\n  }, isYaml && /* @__PURE__ */ React__default.createElement(CodeSnippet, {\n    language: \"yaml\",\n    text: jsYaml.dump(object)\n  }), !isYaml && /* @__PURE__ */ React__default.createElement(StructuredMetadataTable, {\n    metadata: renderObject(replaceNullsWithUndefined(object))\n  })));\n};\nconst KubernetesDrawer = ({\n  object,\n  renderObject,\n  kind,\n  buttonVariant = \"subtitle2\",\n  expanded = false,\n  children\n}) => {\n  var _a, _b;\n  const [isOpen, setIsOpen] = useState(expanded);\n  const classes = useDrawerStyles();\n  const toggleDrawer = (e, newValue) => {\n    e.stopPropagation();\n    setIsOpen(newValue);\n  };\n  return /* @__PURE__ */ React__default.createElement(React__default.Fragment, null, /* @__PURE__ */ React__default.createElement(PodDrawerButton, {\n    onClick: (e) => toggleDrawer(e, true),\n    onFocus: (event) => event.stopPropagation()\n  }, children === void 0 ? /* @__PURE__ */ React__default.createElement(Typography, {\n    variant: buttonVariant\n  }, (_b = (_a = object.metadata) == null ? void 0 : _a.name) != null ? _b : \"unknown object\") : children), /* @__PURE__ */ React__default.createElement(Drawer, {\n    classes: {\n      paper: classes.paper\n    },\n    anchor: \"right\",\n    open: isOpen,\n    onClose: (e) => toggleDrawer(e, false),\n    onClick: (event) => event.stopPropagation()\n  }, /* @__PURE__ */ React__default.createElement(KubernetesDrawerContent, {\n    kind,\n    toggleDrawer,\n    object,\n    renderObject\n  })));\n};\n\nconst PodDrawer = ({\n  pod,\n  expanded\n}) => {\n  return /* @__PURE__ */ React__default.createElement(KubernetesDrawer, {\n    object: pod,\n    expanded,\n    kind: \"Pod\",\n    renderObject: (podObject) => {\n      var _a, _b, _c, _d, _e, _f, _g;\n      const phase = (_b = (_a = podObject.status) == null ? void 0 : _a.phase) != null ? _b : \"unknown\";\n      const ports = (_e = (_d = (_c = podObject.spec) == null ? void 0 : _c.containers) == null ? void 0 : _d.map((c) => {\n        return {\n          [c.name]: c.ports\n        };\n      })) != null ? _e : \"N/A\";\n      const conditions = ((_g = (_f = podObject.status) == null ? void 0 : _f.conditions) != null ? _g : []).map(renderCondition).reduce((accum, next) => {\n        accum[next[0]] = next[1];\n        return accum;\n      }, {});\n      return {\n        images: imageChips(podObject),\n        phase,\n        \"Containers Ready\": containersReady(podObject),\n        \"Total Restarts\": totalRestarts(podObject),\n        \"Container Statuses\": containerStatuses(podObject),\n        ...conditions,\n        \"Exposed ports\": ports\n      };\n    }\n  });\n};\n\nconst READY_COLUMNS = \"READY\";\nconst RESOURCE_COLUMNS = \"RESOURCE\";\nconst DEFAULT_COLUMNS = [\n  {\n    title: \"name\",\n    highlight: true,\n    render: (pod) => /* @__PURE__ */ React__default.createElement(PodDrawer, {\n      pod\n    })\n  },\n  {\n    title: \"phase\",\n    render: (pod) => {\n      var _a, _b;\n      return (_b = (_a = pod.status) == null ? void 0 : _a.phase) != null ? _b : \"unknown\";\n    }\n  },\n  {\n    title: \"status\",\n    render: containerStatuses\n  }\n];\nconst READY = [\n  {\n    title: \"containers ready\",\n    align: \"center\",\n    render: containersReady\n  },\n  {\n    title: \"total restarts\",\n    align: \"center\",\n    render: totalRestarts,\n    type: \"numeric\"\n  }\n];\nconst PodsTable = ({ pods, extraColumns = [] }) => {\n  const podNamesWithMetrics = useContext(PodNamesWithMetricsContext);\n  const columns = [...DEFAULT_COLUMNS];\n  if (extraColumns.includes(READY_COLUMNS)) {\n    columns.push(...READY);\n  }\n  if (extraColumns.includes(RESOURCE_COLUMNS)) {\n    const resourceColumns = [\n      {\n        title: \"CPU usage %\",\n        render: (pod) => {\n          var _a, _b;\n          const metrics = podNamesWithMetrics.get((_b = (_a = pod.metadata) == null ? void 0 : _a.name) != null ? _b : \"\");\n          if (!metrics) {\n            return \"unknown\";\n          }\n          return podStatusToCpuUtil(metrics);\n        }\n      },\n      {\n        title: \"Memory usage %\",\n        render: (pod) => {\n          var _a, _b;\n          const metrics = podNamesWithMetrics.get((_b = (_a = pod.metadata) == null ? void 0 : _a.name) != null ? _b : \"\");\n          if (!metrics) {\n            return \"unknown\";\n          }\n          return podStatusToMemoryUtil(metrics);\n        }\n      }\n    ];\n    columns.push(...resourceColumns);\n  }\n  const tableStyle = {\n    minWidth: \"0\",\n    width: \"100%\"\n  };\n  return /* @__PURE__ */ React__default.createElement(\"div\", {\n    style: tableStyle\n  }, /* @__PURE__ */ React__default.createElement(Table, {\n    options: { paging: true, search: false },\n    data: pods,\n    columns\n  }));\n};\n\nconst DeploymentDrawer = ({\n  deployment,\n  expanded\n}) => {\n  var _a, _b, _c;\n  const namespace = (_a = deployment.metadata) == null ? void 0 : _a.namespace;\n  return /* @__PURE__ */ React__default.createElement(KubernetesDrawer, {\n    object: deployment,\n    expanded,\n    kind: \"Deployment\",\n    renderObject: (deploymentObj) => {\n      var _a2, _b2, _c2, _d, _e, _f, _g, _h;\n      const conditions = ((_b2 = (_a2 = deploymentObj.status) == null ? void 0 : _a2.conditions) != null ? _b2 : []).map(renderCondition).reduce((accum, next) => {\n        accum[next[0]] = next[1];\n        return accum;\n      }, {});\n      return {\n        strategy: (_d = (_c2 = deploymentObj.spec) == null ? void 0 : _c2.strategy) != null ? _d : \"???\",\n        minReadySeconds: (_f = (_e = deploymentObj.spec) == null ? void 0 : _e.minReadySeconds) != null ? _f : \"???\",\n        progressDeadlineSeconds: (_h = (_g = deploymentObj.spec) == null ? void 0 : _g.progressDeadlineSeconds) != null ? _h : \"???\",\n        ...conditions\n      };\n    }\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    container: true,\n    direction: \"column\",\n    justifyContent: \"flex-start\",\n    alignItems: \"flex-start\",\n    spacing: 0\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(Typography, {\n    variant: \"h5\"\n  }, (_c = (_b = deployment.metadata) == null ? void 0 : _b.name) != null ? _c : \"unknown object\")), /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(Typography, {\n    color: \"textSecondary\",\n    variant: \"body1\"\n  }, \"Deployment\")), namespace && /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(Chip, {\n    size: \"small\",\n    label: `namespace: ${namespace}`\n  }))));\n};\n\nconst HorizontalPodAutoscalerDrawer = ({\n  hpa,\n  expanded,\n  children\n}) => {\n  return /* @__PURE__ */ React__default.createElement(KubernetesDrawer, {\n    kind: \"HorizontalPodAutoscaler\",\n    object: hpa,\n    expanded,\n    renderObject: (hpaObject) => {\n      var _a, _b, _c, _d, _e, _f;\n      return {\n        targetCPUUtilizationPercentage: (_a = hpaObject.spec) == null ? void 0 : _a.targetCPUUtilizationPercentage,\n        currentCPUUtilizationPercentage: (_b = hpaObject.status) == null ? void 0 : _b.currentCPUUtilizationPercentage,\n        minReplicas: (_c = hpaObject.spec) == null ? void 0 : _c.minReplicas,\n        maxReplicas: (_d = hpaObject.spec) == null ? void 0 : _d.maxReplicas,\n        currentReplicas: (_e = hpaObject.status) == null ? void 0 : _e.currentReplicas,\n        desiredReplicas: (_f = hpaObject.status) == null ? void 0 : _f.desiredReplicas\n      };\n    }\n  }, children);\n};\n\nfunction getOwnedResources(potentialOwner, possiblyOwned) {\n  return possiblyOwned.filter((p) => {\n    var _a, _b, _c;\n    return (_c = (_b = (_a = p.metadata) == null ? void 0 : _a.ownerReferences) == null ? void 0 : _b.some((o) => {\n      var _a2;\n      return o.uid === ((_a2 = potentialOwner.metadata) == null ? void 0 : _a2.uid);\n    })) != null ? _c : false;\n  });\n}\nconst getOwnedPodsThroughReplicaSets = (potentialOwner, replicaSets, pods) => {\n  return getOwnedResources(potentialOwner, replicaSets.filter((rs) => rs.status && rs.status.replicas > 0)).reduce((accum, rs) => {\n    return accum.concat(getOwnedResources(rs, pods));\n  }, []);\n};\nconst getMatchingHpa = (ownerName, ownerKind, hpas) => {\n  return hpas.find((hpa) => {\n    var _a, _b, _c, _d, _e, _f;\n    return ((_c = (_b = (_a = hpa.spec) == null ? void 0 : _a.scaleTargetRef) == null ? void 0 : _b.kind) != null ? _c : \"\").toLocaleLowerCase(\"en-US\") === ownerKind.toLocaleLowerCase(\"en-US\") && ((_f = (_e = (_d = hpa.spec) == null ? void 0 : _d.scaleTargetRef) == null ? void 0 : _e.name) != null ? _f : \"\") === (ownerName != null ? ownerName : \"unknown-deployment\");\n  });\n};\n\nconst DeploymentSummary = ({\n  deployment,\n  numberOfCurrentPods,\n  numberOfPodsWithErrors,\n  hpa\n}) => {\n  var _a, _b, _c, _d, _e, _f, _g, _h;\n  return /* @__PURE__ */ React__default.createElement(Grid, {\n    container: true,\n    direction: \"row\",\n    justifyContent: \"flex-start\",\n    alignItems: \"center\"\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    xs: 3,\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(DeploymentDrawer, {\n    deployment\n  })), /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true,\n    xs: 1\n  }, /* @__PURE__ */ React__default.createElement(Divider, {\n    style: { height: \"5em\" },\n    orientation: \"vertical\"\n  })), hpa && /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true,\n    xs: 3\n  }, /* @__PURE__ */ React__default.createElement(HorizontalPodAutoscalerDrawer, {\n    hpa\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true,\n    container: true,\n    direction: \"column\",\n    justifyContent: \"flex-start\",\n    alignItems: \"flex-start\",\n    spacing: 0\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(Typography, {\n    variant: \"subtitle2\"\n  }, \"min replicas \", (_b = (_a = hpa.spec) == null ? void 0 : _a.minReplicas) != null ? _b : \"?\", \" / max replicas\", \" \", (_d = (_c = hpa.spec) == null ? void 0 : _c.maxReplicas) != null ? _d : \"?\")), /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(Typography, {\n    variant: \"subtitle2\"\n  }, \"current CPU usage:\", \" \", (_f = (_e = hpa.status) == null ? void 0 : _e.currentCPUUtilizationPercentage) != null ? _f : \"?\", \"%\")), /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(Typography, {\n    variant: \"subtitle2\"\n  }, \"target CPU usage:\", \" \", (_h = (_g = hpa.spec) == null ? void 0 : _g.targetCPUUtilizationPercentage) != null ? _h : \"?\", \"%\"))))), /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true,\n    container: true,\n    xs: 3,\n    direction: \"column\",\n    justifyContent: \"flex-start\",\n    alignItems: \"flex-start\"\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(StatusOK, null, numberOfCurrentPods, \" pods\")), /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, numberOfPodsWithErrors > 0 ? /* @__PURE__ */ React__default.createElement(StatusError, null, numberOfPodsWithErrors, \" pod\", numberOfPodsWithErrors > 1 ? \"s\" : \"\", \" with errors\") : /* @__PURE__ */ React__default.createElement(StatusOK, null, \"No pods with errors\"))));\n};\nconst DeploymentAccordion = ({\n  deployment,\n  ownedPods,\n  matchingHpa\n}) => {\n  const podNamesWithErrors = useContext(PodNamesWithErrorsContext);\n  const podsWithErrors = ownedPods.filter((p) => {\n    var _a, _b;\n    return podNamesWithErrors.has((_b = (_a = p.metadata) == null ? void 0 : _a.name) != null ? _b : \"\");\n  });\n  return /* @__PURE__ */ React__default.createElement(Accordion, {\n    TransitionProps: { unmountOnExit: true }\n  }, /* @__PURE__ */ React__default.createElement(AccordionSummary, {\n    expandIcon: /* @__PURE__ */ React__default.createElement(ExpandMoreIcon, null)\n  }, /* @__PURE__ */ React__default.createElement(DeploymentSummary, {\n    deployment,\n    numberOfCurrentPods: ownedPods.length,\n    numberOfPodsWithErrors: podsWithErrors.length,\n    hpa: matchingHpa\n  })), /* @__PURE__ */ React__default.createElement(AccordionDetails, null, /* @__PURE__ */ React__default.createElement(PodsTable, {\n    pods: ownedPods,\n    extraColumns: [READY_COLUMNS, RESOURCE_COLUMNS]\n  })));\n};\nconst DeploymentsAccordions = ({}) => {\n  const groupedResponses = useContext(GroupedResponsesContext);\n  return /* @__PURE__ */ React__default.createElement(Grid, {\n    container: true,\n    direction: \"column\",\n    justifyContent: \"flex-start\",\n    alignItems: \"flex-start\"\n  }, groupedResponses.deployments.map((deployment, i) => {\n    var _a;\n    return /* @__PURE__ */ React__default.createElement(Grid, {\n      container: true,\n      item: true,\n      key: i,\n      xs: true\n    }, /* @__PURE__ */ React__default.createElement(Grid, {\n      item: true,\n      xs: true\n    }, /* @__PURE__ */ React__default.createElement(DeploymentAccordion, {\n      matchingHpa: getMatchingHpa((_a = deployment.metadata) == null ? void 0 : _a.name, \"deployment\", groupedResponses.horizontalPodAutoscalers),\n      ownedPods: getOwnedPodsThroughReplicaSets(deployment, groupedResponses.replicaSets, groupedResponses.pods),\n      deployment\n    })));\n  }));\n};\n\nconst IngressDrawer = ({\n  ingress,\n  expanded\n}) => {\n  var _a, _b;\n  return /* @__PURE__ */ React__default.createElement(KubernetesDrawer, {\n    object: ingress,\n    expanded,\n    kind: \"Ingress\",\n    renderObject: (ingressObject) => {\n      return ingressObject.spec || {};\n    }\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    container: true,\n    direction: \"column\",\n    justifyContent: \"flex-start\",\n    alignItems: \"flex-start\",\n    spacing: 0\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(Typography, {\n    variant: \"h5\"\n  }, (_b = (_a = ingress.metadata) == null ? void 0 : _a.name) != null ? _b : \"unknown object\")), /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(Typography, {\n    color: \"textSecondary\",\n    variant: \"body1\"\n  }, \"Ingress\"))));\n};\n\nconst IngressSummary = ({ ingress }) => {\n  return /* @__PURE__ */ React__default.createElement(Grid, {\n    container: true,\n    direction: \"row\",\n    justifyContent: \"flex-start\",\n    alignItems: \"center\"\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    xs: 3,\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(IngressDrawer, {\n    ingress\n  })), /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true,\n    xs: 1\n  }, /* @__PURE__ */ React__default.createElement(Divider, {\n    style: { height: \"5em\" },\n    orientation: \"vertical\"\n  })));\n};\nconst IngressCard = ({ ingress }) => {\n  return /* @__PURE__ */ React__default.createElement(StructuredMetadataTable, {\n    metadata: {\n      ...ingress.spec\n    }\n  });\n};\nconst IngressAccordion = ({ ingress }) => {\n  return /* @__PURE__ */ React__default.createElement(Accordion, {\n    TransitionProps: { unmountOnExit: true }\n  }, /* @__PURE__ */ React__default.createElement(AccordionSummary, {\n    expandIcon: /* @__PURE__ */ React__default.createElement(ExpandMoreIcon, null)\n  }, /* @__PURE__ */ React__default.createElement(IngressSummary, {\n    ingress\n  })), /* @__PURE__ */ React__default.createElement(AccordionDetails, null, /* @__PURE__ */ React__default.createElement(IngressCard, {\n    ingress\n  })));\n};\nconst IngressesAccordions = ({}) => {\n  const groupedResponses = useContext(GroupedResponsesContext);\n  return /* @__PURE__ */ React__default.createElement(Grid, {\n    container: true,\n    direction: \"row\",\n    justifyContent: \"flex-start\",\n    alignItems: \"flex-start\"\n  }, groupedResponses.ingresses.map((ingress, i) => /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true,\n    key: i,\n    xs: true\n  }, /* @__PURE__ */ React__default.createElement(IngressAccordion, {\n    ingress\n  }))));\n};\n\nconst ServiceDrawer = ({\n  service,\n  expanded\n}) => {\n  var _a, _b;\n  return /* @__PURE__ */ React__default.createElement(KubernetesDrawer, {\n    object: service,\n    expanded,\n    kind: \"Service\",\n    renderObject: (serviceObject) => {\n      return serviceObject.spec || {};\n    }\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    container: true,\n    direction: \"column\",\n    justifyContent: \"flex-start\",\n    alignItems: \"flex-start\",\n    spacing: 0\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(Typography, {\n    variant: \"h5\"\n  }, (_b = (_a = service.metadata) == null ? void 0 : _a.name) != null ? _b : \"unknown object\")), /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(Typography, {\n    color: \"textSecondary\",\n    variant: \"body1\"\n  }, \"Service\"))));\n};\n\nconst ServiceSummary = ({ service }) => {\n  var _a, _b;\n  return /* @__PURE__ */ React__default.createElement(Grid, {\n    container: true,\n    direction: \"row\",\n    justifyContent: \"flex-start\",\n    alignItems: \"center\"\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    xs: 3,\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(ServiceDrawer, {\n    service\n  })), /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true,\n    xs: 1\n  }, /* @__PURE__ */ React__default.createElement(Divider, {\n    style: { height: \"5em\" },\n    orientation: \"vertical\"\n  })), /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(Typography, {\n    variant: \"subtitle2\"\n  }, \"Type: \", (_b = (_a = service.spec) == null ? void 0 : _a.type) != null ? _b : \"?\")));\n};\nconst ServiceCard = ({ service }) => {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _i;\n  const metadata = {};\n  if ((_d = (_c = (_b = (_a = service.status) == null ? void 0 : _a.loadBalancer) == null ? void 0 : _b.ingress) == null ? void 0 : _c.length) != null ? _d : -1 > 0) {\n    metadata.loadbalancer = (_e = service.status) == null ? void 0 : _e.loadBalancer;\n  }\n  if (((_f = service.spec) == null ? void 0 : _f.type) === \"ClusterIP\") {\n    metadata.clusterIP = service.spec.clusterIP;\n  }\n  if (((_g = service.spec) == null ? void 0 : _g.type) === \"ExternalName\") {\n    metadata.externalName = service.spec.externalName;\n  }\n  return /* @__PURE__ */ React__default.createElement(StructuredMetadataTable, {\n    metadata: {\n      type: (_h = service.spec) == null ? void 0 : _h.type,\n      ports: (_i = service.spec) == null ? void 0 : _i.ports,\n      ...metadata\n    }\n  });\n};\nconst ServiceAccordion = ({ service }) => {\n  return /* @__PURE__ */ React__default.createElement(Accordion, {\n    TransitionProps: { unmountOnExit: true }\n  }, /* @__PURE__ */ React__default.createElement(AccordionSummary, {\n    expandIcon: /* @__PURE__ */ React__default.createElement(ExpandMoreIcon, null)\n  }, /* @__PURE__ */ React__default.createElement(ServiceSummary, {\n    service\n  })), /* @__PURE__ */ React__default.createElement(AccordionDetails, null, /* @__PURE__ */ React__default.createElement(ServiceCard, {\n    service\n  })));\n};\nconst ServicesAccordions = ({}) => {\n  const groupedResponses = useContext(GroupedResponsesContext);\n  return /* @__PURE__ */ React__default.createElement(Grid, {\n    container: true,\n    direction: \"row\",\n    justifyContent: \"flex-start\",\n    alignItems: \"flex-start\"\n  }, groupedResponses.services.map((service, i) => /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true,\n    key: i,\n    xs: true\n  }, /* @__PURE__ */ React__default.createElement(ServiceAccordion, {\n    service\n  }))));\n};\n\nconst JobDrawer = ({\n  job,\n  expanded\n}) => {\n  var _a, _b;\n  return /* @__PURE__ */ React__default.createElement(KubernetesDrawer, {\n    object: job,\n    expanded,\n    kind: \"Job\",\n    renderObject: (jobObj) => {\n      var _a2, _b2, _c, _d, _e, _f, _g, _h;\n      return {\n        parallelism: (_b2 = (_a2 = jobObj.spec) == null ? void 0 : _a2.parallelism) != null ? _b2 : \"???\",\n        completions: (_d = (_c = jobObj.spec) == null ? void 0 : _c.completions) != null ? _d : \"???\",\n        backoffLimit: (_f = (_e = jobObj.spec) == null ? void 0 : _e.backoffLimit) != null ? _f : \"???\",\n        startTime: (_h = (_g = jobObj.status) == null ? void 0 : _g.startTime) != null ? _h : \"???\"\n      };\n    }\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    container: true,\n    direction: \"column\",\n    justifyContent: \"flex-start\",\n    alignItems: \"flex-start\",\n    spacing: 0\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(Typography, {\n    variant: \"h6\"\n  }, (_b = (_a = job.metadata) == null ? void 0 : _a.name) != null ? _b : \"unknown object\")), /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(Typography, {\n    color: \"textSecondary\",\n    variant: \"body1\"\n  }, \"Job\"))));\n};\n\nconst JobSummary = ({ job }) => {\n  var _a, _b, _c, _d, _e, _f;\n  return /* @__PURE__ */ React__default.createElement(Grid, {\n    container: true,\n    direction: \"row\",\n    justifyContent: \"flex-start\",\n    alignItems: \"center\"\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    xs: 3,\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(JobDrawer, {\n    job\n  })), /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true,\n    xs: 1\n  }, /* @__PURE__ */ React__default.createElement(Divider, {\n    style: { height: \"5em\" },\n    orientation: \"vertical\"\n  })), /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true,\n    container: true,\n    xs: 8,\n    direction: \"column\",\n    justifyContent: \"flex-start\",\n    alignItems: \"flex-start\"\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, ((_a = job.status) == null ? void 0 : _a.succeeded) && /* @__PURE__ */ React__default.createElement(StatusOK, null, \"Succeeded\"), ((_b = job.status) == null ? void 0 : _b.active) && /* @__PURE__ */ React__default.createElement(StatusPending, null, \"Running\"), ((_c = job.status) == null ? void 0 : _c.failed) && /* @__PURE__ */ React__default.createElement(StatusError, null, \"Failed\")), /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, \"Start time: \", (_e = (_d = job.status) == null ? void 0 : _d.startTime) == null ? void 0 : _e.toString()), ((_f = job.status) == null ? void 0 : _f.completionTime) && /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, \"Completion time: \", job.status.completionTime.toString())));\n};\nconst JobAccordion = ({ job, ownedPods }) => {\n  return /* @__PURE__ */ React__default.createElement(Accordion, {\n    TransitionProps: { unmountOnExit: true }\n  }, /* @__PURE__ */ React__default.createElement(AccordionSummary, {\n    expandIcon: /* @__PURE__ */ React__default.createElement(ExpandMoreIcon, null)\n  }, /* @__PURE__ */ React__default.createElement(JobSummary, {\n    job\n  })), /* @__PURE__ */ React__default.createElement(AccordionDetails, null, /* @__PURE__ */ React__default.createElement(PodsTable, {\n    pods: ownedPods\n  })));\n};\nconst JobsAccordions = ({ jobs }) => {\n  const groupedResponses = useContext(GroupedResponsesContext);\n  return /* @__PURE__ */ React__default.createElement(Grid, {\n    container: true,\n    direction: \"column\",\n    justifyContent: \"flex-start\",\n    alignItems: \"flex-start\"\n  }, jobs.map((job, i) => /* @__PURE__ */ React__default.createElement(Grid, {\n    container: true,\n    item: true,\n    key: i,\n    xs: true\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true,\n    xs: true\n  }, /* @__PURE__ */ React__default.createElement(JobAccordion, {\n    ownedPods: getOwnedResources(job, groupedResponses.pods),\n    job\n  })))));\n};\n\nconst CronJobDrawer = ({\n  cronJob,\n  expanded\n}) => {\n  var _a, _b, _c;\n  const namespace = (_a = cronJob.metadata) == null ? void 0 : _a.namespace;\n  return /* @__PURE__ */ React__default.createElement(KubernetesDrawer, {\n    object: cronJob,\n    expanded,\n    kind: \"CronJob\",\n    renderObject: (cronJobObj) => {\n      var _a2, _b2, _c2, _d, _e, _f, _g, _h;\n      return {\n        schedule: (_b2 = (_a2 = cronJobObj.spec) == null ? void 0 : _a2.schedule) != null ? _b2 : \"???\",\n        startingDeadlineSeconds: (_d = (_c2 = cronJobObj.spec) == null ? void 0 : _c2.startingDeadlineSeconds) != null ? _d : \"???\",\n        concurrencyPolicy: (_f = (_e = cronJobObj.spec) == null ? void 0 : _e.concurrencyPolicy) != null ? _f : \"???\",\n        lastScheduleTime: (_h = (_g = cronJobObj.status) == null ? void 0 : _g.lastScheduleTime) != null ? _h : \"???\"\n      };\n    }\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    container: true,\n    direction: \"column\",\n    justifyContent: \"flex-start\",\n    alignItems: \"flex-start\",\n    spacing: 0\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(Typography, {\n    variant: \"h5\"\n  }, (_c = (_b = cronJob.metadata) == null ? void 0 : _b.name) != null ? _c : \"unknown object\")), /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(Typography, {\n    color: \"textSecondary\",\n    variant: \"body1\"\n  }, \"CronJob\")), namespace && /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(Chip, {\n    size: \"small\",\n    label: `namespace: ${namespace}`\n  }))));\n};\n\nconst CronJobSummary = ({ cronJob }) => {\n  var _a, _b;\n  return /* @__PURE__ */ React__default.createElement(Grid, {\n    container: true,\n    direction: \"row\",\n    justifyContent: \"flex-start\",\n    alignItems: \"center\"\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    xs: 3,\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(CronJobDrawer, {\n    cronJob\n  })), /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true,\n    xs: 1\n  }, /* @__PURE__ */ React__default.createElement(Divider, {\n    style: { height: \"5em\" },\n    orientation: \"vertical\"\n  })), /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true,\n    container: true,\n    xs: 5,\n    direction: \"column\",\n    justifyContent: \"flex-start\",\n    alignItems: \"flex-start\"\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, ((_a = cronJob.spec) == null ? void 0 : _a.suspend) ? /* @__PURE__ */ React__default.createElement(StatusError, null, \"Suspended\") : /* @__PURE__ */ React__default.createElement(StatusOK, null, \"Active\")), /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(Typography, {\n    variant: \"body1\"\n  }, \"Schedule:\", \" \", ((_b = cronJob.spec) == null ? void 0 : _b.schedule) ? `${cronJob.spec.schedule} (${cronstrue.toString(cronJob.spec.schedule)})` : \"N/A\"))));\n};\nconst CronJobAccordion = ({ cronJob, ownedJobs }) => {\n  return /* @__PURE__ */ React__default.createElement(Accordion, {\n    TransitionProps: { unmountOnExit: true }\n  }, /* @__PURE__ */ React__default.createElement(AccordionSummary, {\n    expandIcon: /* @__PURE__ */ React__default.createElement(ExpandMoreIcon, null)\n  }, /* @__PURE__ */ React__default.createElement(CronJobSummary, {\n    cronJob\n  })), /* @__PURE__ */ React__default.createElement(AccordionDetails, null, /* @__PURE__ */ React__default.createElement(JobsAccordions, {\n    jobs: ownedJobs.reverse()\n  })));\n};\nconst CronJobsAccordions = ({}) => {\n  const groupedResponses = useContext(GroupedResponsesContext);\n  return /* @__PURE__ */ React__default.createElement(Grid, {\n    container: true,\n    direction: \"column\",\n    justifyContent: \"flex-start\",\n    alignItems: \"flex-start\"\n  }, groupedResponses.cronJobs.map((cronJob, i) => /* @__PURE__ */ React__default.createElement(Grid, {\n    container: true,\n    item: true,\n    key: i,\n    xs: true\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true,\n    xs: true\n  }, /* @__PURE__ */ React__default.createElement(CronJobAccordion, {\n    ownedJobs: getOwnedResources(cronJob, groupedResponses.jobs),\n    cronJob\n  })))));\n};\n\nconst RolloutDrawer = ({\n  rollout,\n  expanded\n}) => {\n  var _a, _b;\n  return /* @__PURE__ */ React__default.createElement(KubernetesDrawer, {\n    object: rollout,\n    expanded,\n    kind: \"Rollout\",\n    renderObject: () => ({})\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    container: true,\n    direction: \"column\",\n    justifyContent: \"flex-start\",\n    alignItems: \"flex-start\",\n    spacing: 0\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(Typography, {\n    variant: \"h5\"\n  }, (_b = (_a = rollout.metadata) == null ? void 0 : _a.name) != null ? _b : \"unknown object\")), /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(Typography, {\n    color: \"textSecondary\",\n    variant: \"body1\"\n  }, \"Rollout\"))));\n};\n\nconst isSetWeightStep = (step) => step.hasOwnProperty(\"setWeight\");\nconst isPauseStep = (step) => step.hasOwnProperty(\"pause\");\nconst isAnalysisStep = (step) => step.hasOwnProperty(\"analysis\");\nconst createLabelForStep = (step) => {\n  if (isSetWeightStep(step)) {\n    return `setWeight ${step.setWeight}%`;\n  } else if (isPauseStep(step)) {\n    return step.pause.duration === void 0 ? \"infinite pause\" : `pause for ${step.pause.duration}`;\n  } else if (isAnalysisStep(step)) {\n    return /* @__PURE__ */ React__default.createElement(\"div\", null, /* @__PURE__ */ React__default.createElement(\"p\", null, \"analysis templates:\"), step.analysis.templates.map((t, i) => /* @__PURE__ */ React__default.createElement(\"p\", {\n      key: i\n    }, `${t.templateName}${t.clusterScope ? \" (cluster scoped)\" : \"\"}`)));\n  }\n  return \"unknown step\";\n};\nconst StepsProgress = ({\n  currentStepIndex,\n  aborted,\n  steps\n}) => {\n  const activeStepIndex = currentStepIndex >= steps.length ? currentStepIndex + 1 : currentStepIndex;\n  return /* @__PURE__ */ React__default.createElement(Stepper, {\n    activeStep: aborted ? -1 : activeStepIndex,\n    alternativeLabel: true\n  }, steps.map((step, i) => /* @__PURE__ */ React__default.createElement(Step, {\n    key: i\n  }, /* @__PURE__ */ React__default.createElement(StepLabel, {\n    \"data-testid\": `step-${i}`\n  }, createLabelForStep(step)))).concat(/* @__PURE__ */ React__default.createElement(Step, {\n    key: \"-1\"\n  }, /* @__PURE__ */ React__default.createElement(StepLabel, {\n    \"data-testid\": \"step--1\"\n  }, \"Canary promoted\"))));\n};\n\nconst AbortedTitle = /* @__PURE__ */ React__default.createElement(\"div\", {\n  style: {\n    display: \"flex\",\n    alignItems: \"center\",\n    flexWrap: \"wrap\"\n  }\n}, /* @__PURE__ */ React__default.createElement(ErrorOutlineIcon, null), /* @__PURE__ */ React__default.createElement(Typography, {\n  variant: \"subtitle1\"\n}, \"Aborted\"));\nconst findAbortedMessage = (rollout) => {\n  var _a, _b, _c;\n  return (_c = (_b = (_a = rollout.status) == null ? void 0 : _a.conditions) == null ? void 0 : _b.find((c) => c.type === \"Progressing\" && c.status === \"False\" && c.reason === \"RolloutAborted\")) == null ? void 0 : _c.message;\n};\nconst RolloutSummary = ({\n  rollout,\n  numberOfCurrentPods,\n  numberOfPodsWithErrors,\n  hpa\n}) => {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k;\n  const pauseTime = (_c = (_b = (_a = rollout.status) == null ? void 0 : _a.pauseConditions) == null ? void 0 : _b.find((p) => p.reason === \"CanaryPauseStep\")) == null ? void 0 : _c.startTime;\n  const abortedMessage = findAbortedMessage(rollout);\n  return /* @__PURE__ */ React__default.createElement(Grid, {\n    container: true,\n    direction: \"row\",\n    justifyContent: \"flex-start\",\n    alignItems: \"center\"\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    xs: 3,\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(RolloutDrawer, {\n    rollout\n  })), /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true,\n    xs: 1\n  }, /* @__PURE__ */ React__default.createElement(Divider, {\n    style: { height: \"5em\" },\n    orientation: \"vertical\"\n  })), hpa && /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true,\n    xs: 3\n  }, /* @__PURE__ */ React__default.createElement(HorizontalPodAutoscalerDrawer, {\n    hpa\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true,\n    container: true,\n    direction: \"column\",\n    justifyContent: \"flex-start\",\n    alignItems: \"flex-start\",\n    spacing: 0\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(Typography, {\n    variant: \"subtitle2\"\n  }, \"min replicas \", (_e = (_d = hpa.spec) == null ? void 0 : _d.minReplicas) != null ? _e : \"?\", \" / max replicas\", \" \", (_g = (_f = hpa.spec) == null ? void 0 : _f.maxReplicas) != null ? _g : \"?\")), /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(Typography, {\n    variant: \"subtitle2\"\n  }, \"current CPU usage:\", \" \", (_i = (_h = hpa.status) == null ? void 0 : _h.currentCPUUtilizationPercentage) != null ? _i : \"?\", \"%\")), /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(Typography, {\n    variant: \"subtitle2\"\n  }, \"target CPU usage:\", \" \", (_k = (_j = hpa.spec) == null ? void 0 : _j.targetCPUUtilizationPercentage) != null ? _k : \"?\", \"%\"))))), /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true,\n    container: true,\n    xs: 3,\n    direction: \"column\",\n    justifyContent: \"flex-start\",\n    alignItems: \"flex-start\"\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(StatusOK, null, numberOfCurrentPods, \" pods\")), /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, numberOfPodsWithErrors > 0 ? /* @__PURE__ */ React__default.createElement(StatusError, null, numberOfPodsWithErrors, \" pod\", numberOfPodsWithErrors > 1 ? \"s\" : \"\", \" with errors\") : /* @__PURE__ */ React__default.createElement(StatusOK, null, \"No pods with errors\"))), pauseTime && /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true,\n    xs: 3\n  }, /* @__PURE__ */ React__default.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      alignItems: \"center\",\n      flexWrap: \"wrap\"\n    }\n  }, /* @__PURE__ */ React__default.createElement(PauseIcon, null), /* @__PURE__ */ React__default.createElement(Typography, {\n    variant: \"subtitle1\"\n  }, \"Paused (\", DateTime.fromISO(pauseTime).toRelative({ locale: \"en\" }), \")\"))), abortedMessage && /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true,\n    xs: 3\n  }, AbortedTitle));\n};\nconst RolloutAccordion = ({\n  rollout,\n  ownedPods,\n  matchingHpa,\n  defaultExpanded\n}) => {\n  var _a, _b, _c, _d, _e, _f;\n  const podNamesWithErrors = useContext(PodNamesWithErrorsContext);\n  const podsWithErrors = ownedPods.filter((p) => {\n    var _a2, _b2;\n    return podNamesWithErrors.has((_b2 = (_a2 = p.metadata) == null ? void 0 : _a2.name) != null ? _b2 : \"\");\n  });\n  const currentStepIndex = (_b = (_a = rollout.status) == null ? void 0 : _a.currentStepIndex) != null ? _b : 0;\n  const abortedMessage = findAbortedMessage(rollout);\n  return /* @__PURE__ */ React__default.createElement(Accordion, {\n    defaultExpanded,\n    TransitionProps: { unmountOnExit: true }\n  }, /* @__PURE__ */ React__default.createElement(AccordionSummary, {\n    expandIcon: /* @__PURE__ */ React__default.createElement(ExpandMoreIcon, null)\n  }, /* @__PURE__ */ React__default.createElement(RolloutSummary, {\n    rollout,\n    numberOfCurrentPods: ownedPods.length,\n    numberOfPodsWithErrors: podsWithErrors.length,\n    hpa: matchingHpa\n  })), /* @__PURE__ */ React__default.createElement(AccordionDetails, null, /* @__PURE__ */ React__default.createElement(\"div\", {\n    style: { width: \"100%\" }\n  }, /* @__PURE__ */ React__default.createElement(\"div\", null, /* @__PURE__ */ React__default.createElement(Typography, {\n    variant: \"h6\"\n  }, \"Rollout status\")), /* @__PURE__ */ React__default.createElement(\"div\", {\n    style: { margin: \"1rem\" }\n  }, abortedMessage && /* @__PURE__ */ React__default.createElement(React__default.Fragment, null, AbortedTitle, /* @__PURE__ */ React__default.createElement(Typography, {\n    variant: \"subtitle2\"\n  }, abortedMessage)), /* @__PURE__ */ React__default.createElement(StepsProgress, {\n    aborted: abortedMessage !== void 0,\n    steps: (_f = (_e = (_d = (_c = rollout.spec) == null ? void 0 : _c.strategy) == null ? void 0 : _d.canary) == null ? void 0 : _e.steps) != null ? _f : [],\n    currentStepIndex\n  })), /* @__PURE__ */ React__default.createElement(\"div\", null, /* @__PURE__ */ React__default.createElement(PodsTable, {\n    pods: ownedPods,\n    extraColumns: [READY_COLUMNS, RESOURCE_COLUMNS]\n  })))));\n};\nconst RolloutAccordions = ({\n  rollouts,\n  defaultExpanded = false\n}) => {\n  const groupedResponses = useContext(GroupedResponsesContext);\n  return /* @__PURE__ */ React__default.createElement(Grid, {\n    container: true,\n    direction: \"column\",\n    justifyContent: \"flex-start\",\n    alignItems: \"flex-start\"\n  }, rollouts.map((rollout, i) => {\n    var _a;\n    return /* @__PURE__ */ React__default.createElement(Grid, {\n      container: true,\n      item: true,\n      key: i,\n      xs: true\n    }, /* @__PURE__ */ React__default.createElement(Grid, {\n      item: true,\n      xs: true\n    }, /* @__PURE__ */ React__default.createElement(RolloutAccordion, {\n      defaultExpanded,\n      matchingHpa: getMatchingHpa((_a = rollout.metadata) == null ? void 0 : _a.name, \"rollout\", groupedResponses.horizontalPodAutoscalers),\n      ownedPods: getOwnedPodsThroughReplicaSets(rollout, groupedResponses.replicaSets, groupedResponses.pods),\n      rollout\n    })));\n  }));\n};\n\nconst capitalize = (str) => str.charAt(0).toLocaleUpperCase(\"en-US\") + str.slice(1);\nconst DefaultCustomResourceDrawer = ({\n  customResource,\n  customResourceName,\n  expanded\n}) => {\n  var _a, _b;\n  const capitalizedName = capitalize(customResourceName);\n  return /* @__PURE__ */ React__default.createElement(KubernetesDrawer, {\n    object: customResource,\n    expanded,\n    kind: capitalizedName,\n    renderObject: (cr) => cr\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    container: true,\n    direction: \"column\",\n    justifyContent: \"flex-start\",\n    alignItems: \"flex-start\",\n    spacing: 0\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(Typography, {\n    variant: \"h5\"\n  }, (_b = (_a = customResource.metadata) == null ? void 0 : _a.name) != null ? _b : \"unknown object\")), /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(Typography, {\n    color: \"textSecondary\",\n    variant: \"body1\"\n  }, capitalizedName))));\n};\n\nconst DefaultCustomResourceSummary = ({\n  customResource,\n  customResourceName\n}) => {\n  return /* @__PURE__ */ React__default.createElement(Grid, {\n    container: true,\n    direction: \"row\",\n    justifyContent: \"flex-start\",\n    alignItems: \"center\"\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    xs: 3,\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(DefaultCustomResourceDrawer, {\n    customResource,\n    customResourceName\n  })), /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true,\n    xs: 1\n  }, /* @__PURE__ */ React__default.createElement(Divider, {\n    style: { height: \"5em\" },\n    orientation: \"vertical\"\n  })));\n};\nconst DefaultCustomResourceAccordion = ({\n  customResource,\n  customResourceName,\n  defaultExpanded\n}) => {\n  return /* @__PURE__ */ React__default.createElement(Accordion, {\n    defaultExpanded,\n    TransitionProps: { unmountOnExit: true }\n  }, /* @__PURE__ */ React__default.createElement(AccordionSummary, {\n    expandIcon: /* @__PURE__ */ React__default.createElement(ExpandMoreIcon, null)\n  }, /* @__PURE__ */ React__default.createElement(DefaultCustomResourceSummary, {\n    customResource,\n    customResourceName\n  })), /* @__PURE__ */ React__default.createElement(AccordionDetails, null, customResource.hasOwnProperty(\"status\") && /* @__PURE__ */ React__default.createElement(StructuredMetadataTable, {\n    metadata: customResource.status\n  })));\n};\nconst DefaultCustomResourceAccordions = ({\n  customResources,\n  customResourceName,\n  defaultExpanded = false\n}) => {\n  return /* @__PURE__ */ React__default.createElement(Grid, {\n    container: true,\n    direction: \"column\",\n    justifyContent: \"flex-start\",\n    alignItems: \"flex-start\"\n  }, customResources.map((cr, i) => /* @__PURE__ */ React__default.createElement(Grid, {\n    container: true,\n    item: true,\n    key: i,\n    xs: true\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true,\n    xs: true\n  }, /* @__PURE__ */ React__default.createElement(DefaultCustomResourceAccordion, {\n    defaultExpanded,\n    customResource: cr,\n    customResourceName\n  })))));\n};\n\nconst kindToResource = (customResources) => {\n  return lodash.groupBy(customResources, (value) => {\n    return value.kind;\n  });\n};\nconst CustomResources = ({}) => {\n  const groupedResponses = useContext(GroupedResponsesContext);\n  const kindToResourceMap = kindToResource(groupedResponses.customResources);\n  return /* @__PURE__ */ React__default.createElement(React__default.Fragment, null, Object.entries(kindToResourceMap).map(([kind, resources], i) => {\n    switch (kind) {\n      case \"Rollout\":\n        return /* @__PURE__ */ React__default.createElement(RolloutAccordions, {\n          key: i,\n          rollouts: resources\n        });\n      default:\n        return /* @__PURE__ */ React__default.createElement(DefaultCustomResourceAccordions, {\n          key: i,\n          customResources: resources,\n          customResourceName: kind\n        });\n    }\n  }));\n};\n\nconst ClusterSummary = ({\n  clusterName,\n  totalNumberOfPods,\n  numberOfPodsWithErrors\n}) => {\n  return /* @__PURE__ */ React__default.createElement(Grid, {\n    container: true,\n    direction: \"row\",\n    justifyContent: \"flex-start\",\n    alignItems: \"flex-start\"\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    xs: 4,\n    item: true,\n    container: true,\n    direction: \"column\",\n    justifyContent: \"flex-start\",\n    alignItems: \"flex-start\",\n    spacing: 0\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true,\n    xs: true\n  }, /* @__PURE__ */ React__default.createElement(Typography, {\n    variant: \"h3\"\n  }, clusterName), /* @__PURE__ */ React__default.createElement(Typography, {\n    color: \"textSecondary\",\n    variant: \"body1\"\n  }, \"Cluster\"))), /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true,\n    xs: 1\n  }, /* @__PURE__ */ React__default.createElement(Divider, {\n    style: { height: \"4em\" },\n    orientation: \"vertical\"\n  })), /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true,\n    container: true,\n    xs: 3,\n    direction: \"column\",\n    justifyContent: \"flex-start\",\n    alignItems: \"flex-start\"\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(StatusOK, null, totalNumberOfPods, \" pods\")), /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, numberOfPodsWithErrors > 0 ? /* @__PURE__ */ React__default.createElement(StatusError, null, numberOfPodsWithErrors, \" pods with errors\") : /* @__PURE__ */ React__default.createElement(StatusOK, null, \"No pods with errors\"))));\n};\nconst Cluster = ({ clusterObjects, podsWithErrors }) => {\n  const groupedResponses = groupResponses(clusterObjects.resources);\n  const podNameToMetrics = clusterObjects.podMetrics.flat().reduce((accum, next) => {\n    var _a;\n    const name = (_a = next.pod.metadata) == null ? void 0 : _a.name;\n    if (name !== void 0) {\n      accum.set(name, next);\n    }\n    return accum;\n  }, /* @__PURE__ */ new Map());\n  return /* @__PURE__ */ React__default.createElement(ClusterContext.Provider, {\n    value: clusterObjects.cluster\n  }, /* @__PURE__ */ React__default.createElement(GroupedResponsesContext.Provider, {\n    value: groupedResponses\n  }, /* @__PURE__ */ React__default.createElement(PodNamesWithMetricsContext.Provider, {\n    value: podNameToMetrics\n  }, /* @__PURE__ */ React__default.createElement(PodNamesWithErrorsContext.Provider, {\n    value: podsWithErrors\n  }, /* @__PURE__ */ React__default.createElement(Accordion, {\n    TransitionProps: { unmountOnExit: true }\n  }, /* @__PURE__ */ React__default.createElement(AccordionSummary, {\n    expandIcon: /* @__PURE__ */ React__default.createElement(ExpandMoreIcon, null)\n  }, /* @__PURE__ */ React__default.createElement(ClusterSummary, {\n    clusterName: clusterObjects.cluster.name,\n    totalNumberOfPods: groupedResponses.pods.length,\n    numberOfPodsWithErrors: podsWithErrors.size\n  })), /* @__PURE__ */ React__default.createElement(AccordionDetails, null, /* @__PURE__ */ React__default.createElement(Grid, {\n    container: true,\n    direction: \"column\"\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(CustomResources, null)), /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(DeploymentsAccordions, null)), /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(IngressesAccordions, null)), /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(ServicesAccordions, null)), /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(CronJobsAccordions, null)))))))));\n};\n\nconst KubernetesContent = ({ entity }) => {\n  var _a;\n  const { kubernetesObjects, error } = useKubernetesObjects(entity);\n  const clustersWithErrors = (_a = kubernetesObjects == null ? void 0 : kubernetesObjects.items.filter((r) => r.errors.length > 0)) != null ? _a : [];\n  const detectedErrors = kubernetesObjects !== void 0 ? detectErrors(kubernetesObjects) : /* @__PURE__ */ new Map();\n  return /* @__PURE__ */ React__default.createElement(Page, {\n    themeId: \"tool\"\n  }, /* @__PURE__ */ React__default.createElement(Content, null, kubernetesObjects === void 0 && error === void 0 && /* @__PURE__ */ React__default.createElement(Progress, null), clustersWithErrors.length > 0 && /* @__PURE__ */ React__default.createElement(Grid, {\n    container: true,\n    spacing: 3,\n    direction: \"column\"\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(ErrorPanel$1, {\n    entityName: entity.metadata.name,\n    clustersWithErrors\n  }))), error !== void 0 && /* @__PURE__ */ React__default.createElement(Grid, {\n    container: true,\n    spacing: 3,\n    direction: \"column\"\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(ErrorPanel$1, {\n    entityName: entity.metadata.name,\n    errorMessage: error\n  }))), kubernetesObjects && /* @__PURE__ */ React__default.createElement(Grid, {\n    container: true,\n    spacing: 3,\n    direction: \"column\"\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(ErrorReporting, {\n    detectedErrors\n  })), /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(Divider, null)), /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React__default.createElement(Typography, {\n    variant: \"h3\"\n  }, \"Your Clusters\")), /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true,\n    container: true\n  }, (kubernetesObjects == null ? void 0 : kubernetesObjects.items.length) <= 0 && /* @__PURE__ */ React__default.createElement(Grid, {\n    container: true,\n    justifyContent: \"space-around\",\n    direction: \"row\",\n    alignItems: \"center\",\n    spacing: 2\n  }, /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true,\n    xs: 4\n  }, /* @__PURE__ */ React__default.createElement(Typography, {\n    variant: \"h5\"\n  }, \"No resources on any known clusters for\", \" \", entity.metadata.name)), /* @__PURE__ */ React__default.createElement(Grid, {\n    item: true,\n    xs: 4\n  }, /* @__PURE__ */ React__default.createElement(\"img\", {\n    src: EmptyStateImage,\n    alt: \"EmptyState\",\n    \"data-testid\": \"emptyStateImg\"\n  }))), (kubernetesObjects == null ? void 0 : kubernetesObjects.items.length) > 0 && (kubernetesObjects == null ? void 0 : kubernetesObjects.items.map((item, i) => {\n    var _a2, _b;\n    const podsWithErrors = new Set((_b = (_a2 = detectedErrors.get(item.cluster.name)) == null ? void 0 : _a2.filter((de) => de.kind === \"Pod\").map((de) => de.names).flat()) != null ? _b : []);\n    return /* @__PURE__ */ React__default.createElement(Grid, {\n      item: true,\n      key: i,\n      xs: 12\n    }, /* @__PURE__ */ React__default.createElement(Cluster, {\n      clusterObjects: item,\n      podsWithErrors\n    }));\n  }))))));\n};\n\nconst KUBERNETES_ANNOTATION = \"backstage.io/kubernetes-id\";\nconst KUBERNETES_LABEL_SELECTOR_QUERY_ANNOTATION = \"backstage.io/kubernetes-label-selector\";\nconst isKubernetesAvailable = (entity) => {\n  var _a, _b;\n  return Boolean((_a = entity.metadata.annotations) == null ? void 0 : _a[KUBERNETES_ANNOTATION]) || Boolean((_b = entity.metadata.annotations) == null ? void 0 : _b[KUBERNETES_LABEL_SELECTOR_QUERY_ANNOTATION]);\n};\nconst Router = (_props) => {\n  var _a, _b;\n  const { entity } = useEntity();\n  const kubernetesAnnotationValue = (_a = entity.metadata.annotations) == null ? void 0 : _a[KUBERNETES_ANNOTATION];\n  const kubernetesLabelSelectorQueryAnnotationValue = (_b = entity.metadata.annotations) == null ? void 0 : _b[KUBERNETES_LABEL_SELECTOR_QUERY_ANNOTATION];\n  if (kubernetesAnnotationValue || kubernetesLabelSelectorQueryAnnotationValue) {\n    return /* @__PURE__ */ React__default.createElement(Routes, null, /* @__PURE__ */ React__default.createElement(Route, {\n      path: \"/\",\n      element: /* @__PURE__ */ React__default.createElement(KubernetesContent, {\n        entity\n      })\n    }));\n  }\n  return /* @__PURE__ */ React__default.createElement(React__default.Fragment, null, /* @__PURE__ */ React__default.createElement(MissingAnnotationEmptyState, {\n    annotation: KUBERNETES_ANNOTATION\n  }), /* @__PURE__ */ React__default.createElement(\"h1\", null, \"Or use a label selector query, which takes precedence over the previous annotation.\"), /* @__PURE__ */ React__default.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    href: \"https://backstage.io/docs/features/kubernetes/configuration#surfacing-your-kubernetes-components-as-part-of-an-entity\"\n  }, \"Read Kubernetes Plugin Docs\"));\n};\n\nvar Router$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  isKubernetesAvailable: isKubernetesAvailable,\n  Router: Router\n});\n\nexport { AwsKubernetesAuthProvider, Cluster, ClusterContext, CronJobsAccordions, CustomResources, EntityKubernetesContent, ErrorPanel$1 as ErrorPanel, ErrorReporting, GoogleKubernetesAuthProvider, GoogleServiceAccountAuthProvider, GroupedResponsesContext, HorizontalPodAutoscalerDrawer, IngressesAccordions, JobsAccordions, KubernetesAuthProviders, KubernetesBackendClient, KubernetesContent, KubernetesDrawer, PodDrawer, PodNamesWithErrorsContext, PodNamesWithMetricsContext, PodsTable, Router, ServiceAccountKubernetesAuthProvider, ServicesAccordions, clusterLinksFormatters, formatClusterLink, isKubernetesAvailable, kubernetesApiRef, kubernetesAuthProvidersApiRef, kubernetesPlugin, kubernetesPlugin as plugin, useKubernetesObjects };\n//# sourceMappingURL=index.esm.js.map\n","import { createExternalRouteRef, createPlugin, createComponentExtension, useApi, alertApiRef, useRouteRef, identityApiRef } from '@backstage/core-plugin-api';\nimport { stringifyEntityRef, DEFAULT_NAMESPACE, RELATION_PARENT_OF, RELATION_CHILD_OF, ANNOTATION_LOCATION, ANNOTATION_EDIT_URL, RELATION_MEMBER_OF, getCompoundEntityRef } from '@backstage/catalog-model';\nimport { useEntity, catalogApiRef, entityRouteParams, getEntityRelations, EntityRefLinks, entityRouteRef } from '@backstage/plugin-catalog-react';\nimport { makeStyles, createStyles, Grid, Box, Typography, IconButton, List, ListItem, ListItemIcon, Tooltip, ListItemText, ListItemSecondaryAction, Switch } from '@material-ui/core';\nimport Pagination from '@material-ui/lab/Pagination';\nimport React, { useCallback, useState } from 'react';\nimport { generatePath } from 'react-router-dom';\nimport useAsync from 'react-use/lib/useAsync';\nimport { Progress, ResponseErrorPanel, InfoCard, Avatar, Link, SidebarItem, SidebarSubmenu, SidebarSubmenuItem } from '@backstage/core-components';\nimport AccountTreeIcon from '@material-ui/icons/AccountTree';\nimport EmailIcon from '@material-ui/icons/Email';\nimport GroupIcon from '@material-ui/icons/Group';\nimport EditIcon from '@material-ui/icons/Edit';\nimport CachedIcon from '@material-ui/icons/Cached';\nimport Alert from '@material-ui/lab/Alert';\nimport PersonIcon from '@material-ui/icons/Person';\nimport pluralize from 'pluralize';\nimport limiterFactory from 'p-limit';\nimport qs from 'qs';\n\nconst catalogIndexRouteRef = createExternalRouteRef({\n  id: \"catalog-index\"\n});\n\nconst orgPlugin = createPlugin({\n  id: \"org\",\n  externalRoutes: {\n    catalogIndex: catalogIndexRouteRef\n  }\n});\nconst EntityGroupProfileCard = orgPlugin.provide(createComponentExtension({\n  name: \"EntityGroupProfileCard\",\n  component: {\n    lazy: () => import('./esm/index-1d212ad2.esm.js').then((m) => m.GroupProfileCard)\n  }\n}));\nconst EntityMembersListCard = orgPlugin.provide(createComponentExtension({\n  name: \"EntityMembersListCard\",\n  component: {\n    lazy: () => import('./esm/index-1d212ad2.esm.js').then((m) => m.MembersListCard)\n  }\n}));\nconst EntityOwnershipCard = orgPlugin.provide(createComponentExtension({\n  name: \"EntityOwnershipCard\",\n  component: {\n    lazy: () => import('./esm/index-1d212ad2.esm.js').then((m) => m.OwnershipCard)\n  }\n}));\nconst EntityUserProfileCard = orgPlugin.provide(createComponentExtension({\n  name: \"EntityUserProfileCard\",\n  component: {\n    lazy: () => import('./esm/index-1d212ad2.esm.js').then((m) => m.UserProfileCard)\n  }\n}));\n\nconst useStyles$2 = makeStyles((theme) => createStyles({\n  card: {\n    border: `1px solid ${theme.palette.divider}`,\n    boxShadow: theme.shadows[2],\n    borderRadius: \"4px\",\n    overflow: \"visible\",\n    position: \"relative\",\n    margin: theme.spacing(4, 1, 1),\n    flex: \"1\",\n    minWidth: \"0px\"\n  }\n}));\nconst MemberComponent = (props) => {\n  var _a;\n  const classes = useStyles$2();\n  const {\n    metadata: { name: metaName, description },\n    spec: { profile }\n  } = props.member;\n  const displayName = (_a = profile == null ? void 0 : profile.displayName) != null ? _a : metaName;\n  return /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    container: true,\n    xs: 12,\n    sm: 6,\n    md: 4,\n    xl: 2\n  }, /* @__PURE__ */ React.createElement(Box, {\n    className: classes.card\n  }, /* @__PURE__ */ React.createElement(Box, {\n    display: \"flex\",\n    flexDirection: \"column\",\n    m: 3,\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  }, /* @__PURE__ */ React.createElement(Avatar, {\n    displayName,\n    picture: profile == null ? void 0 : profile.picture,\n    customStyles: {\n      position: \"absolute\",\n      top: \"-2rem\"\n    }\n  }), /* @__PURE__ */ React.createElement(Box, {\n    pt: 2,\n    textAlign: \"center\"\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"h5\"\n  }, /* @__PURE__ */ React.createElement(Link, {\n    to: generatePath(`/catalog/:namespace/user/${metaName}`, entityRouteParams(props.member))\n  }, displayName)), (profile == null ? void 0 : profile.email) && /* @__PURE__ */ React.createElement(Link, {\n    to: `mailto:${profile.email}`\n  }, profile.email), description && /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"subtitle2\"\n  }, description)))));\n};\nconst MembersListCard = (props) => {\n  var _a;\n  const { memberDisplayTitle = \"Members\", pageSize = 50 } = props;\n  const { entity: groupEntity } = useEntity();\n  const {\n    metadata: { name: groupName, namespace: grpNamespace },\n    spec: { profile }\n  } = groupEntity;\n  const catalogApi = useApi(catalogApiRef);\n  const displayName = (_a = profile == null ? void 0 : profile.displayName) != null ? _a : groupName;\n  const groupNamespace = grpNamespace || DEFAULT_NAMESPACE;\n  const [page, setPage] = React.useState(1);\n  const pageChange = (_, pageIndex) => {\n    setPage(pageIndex);\n  };\n  const {\n    loading,\n    error,\n    value: members\n  } = useAsync(async () => {\n    const membersList = await catalogApi.getEntities({\n      filter: {\n        kind: \"User\",\n        \"relations.memberof\": [\n          stringifyEntityRef({\n            kind: \"group\",\n            namespace: groupNamespace.toLocaleLowerCase(\"en-US\"),\n            name: groupName.toLocaleLowerCase(\"en-US\")\n          })\n        ]\n      }\n    });\n    return membersList.items;\n  }, [catalogApi, groupEntity]);\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  } else if (error) {\n    return /* @__PURE__ */ React.createElement(ResponseErrorPanel, {\n      error\n    });\n  }\n  const nbPages = Math.ceil(((members == null ? void 0 : members.length) || 0) / pageSize);\n  const paginationLabel = nbPages < 2 ? \"\" : `, page ${page} of ${nbPages}`;\n  const pagination = /* @__PURE__ */ React.createElement(Pagination, {\n    count: nbPages,\n    page,\n    onChange: pageChange,\n    showFirstButton: true,\n    showLastButton: true\n  });\n  return /* @__PURE__ */ React.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React.createElement(InfoCard, {\n    title: `${memberDisplayTitle} (${(members == null ? void 0 : members.length) || 0}${paginationLabel})`,\n    subheader: `of ${displayName}`,\n    ...nbPages <= 1 ? {} : { actions: pagination }\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    spacing: 3\n  }, members && members.length > 0 ? members.slice(pageSize * (page - 1), pageSize * page).map((member) => /* @__PURE__ */ React.createElement(MemberComponent, {\n    member,\n    key: member.metadata.uid\n  })) : /* @__PURE__ */ React.createElement(Box, {\n    p: 2\n  }, /* @__PURE__ */ React.createElement(Typography, null, \"This group has no \", memberDisplayTitle.toLocaleLowerCase(), \".\")))));\n};\n\nconst CardTitle$1 = (props) => /* @__PURE__ */ React.createElement(Box, {\n  display: \"flex\",\n  alignItems: \"center\"\n}, /* @__PURE__ */ React.createElement(GroupIcon, {\n  fontSize: \"inherit\"\n}), /* @__PURE__ */ React.createElement(Box, {\n  ml: 1\n}, props.title));\nconst GroupProfileCard = (props) => {\n  var _a, _b;\n  const catalogApi = useApi(catalogApiRef);\n  const alertApi = useApi(alertApiRef);\n  const { entity: group } = useEntity();\n  const refreshEntity = useCallback(async () => {\n    await catalogApi.refreshEntity(stringifyEntityRef(group));\n    alertApi.post({ message: \"Refresh scheduled\", severity: \"info\" });\n  }, [catalogApi, alertApi, group]);\n  if (!group) {\n    return /* @__PURE__ */ React.createElement(Alert, {\n      severity: \"error\"\n    }, \"Group not found\");\n  }\n  const {\n    metadata: { name, description, annotations },\n    spec: { profile }\n  } = group;\n  const childRelations = getEntityRelations(group, RELATION_PARENT_OF, {\n    kind: \"Group\"\n  });\n  const parentRelations = getEntityRelations(group, RELATION_CHILD_OF, {\n    kind: \"group\"\n  });\n  const entityLocation = annotations == null ? void 0 : annotations[ANNOTATION_LOCATION];\n  const allowRefresh = (entityLocation == null ? void 0 : entityLocation.startsWith(\"url:\")) || (entityLocation == null ? void 0 : entityLocation.startsWith(\"file:\"));\n  const entityMetadataEditUrl = (_a = group.metadata.annotations) == null ? void 0 : _a[ANNOTATION_EDIT_URL];\n  const displayName = (_b = profile == null ? void 0 : profile.displayName) != null ? _b : name;\n  const emailHref = (profile == null ? void 0 : profile.email) ? `mailto:${profile.email}` : \"#\";\n  const infoCardAction = entityMetadataEditUrl ? /* @__PURE__ */ React.createElement(IconButton, {\n    \"aria-label\": \"Edit\",\n    title: \"Edit Metadata\",\n    component: Link,\n    to: entityMetadataEditUrl\n  }, /* @__PURE__ */ React.createElement(EditIcon, null)) : /* @__PURE__ */ React.createElement(IconButton, {\n    \"aria-label\": \"Edit\",\n    disabled: true,\n    title: \"Edit Metadata\"\n  }, /* @__PURE__ */ React.createElement(EditIcon, null));\n  return /* @__PURE__ */ React.createElement(InfoCard, {\n    title: /* @__PURE__ */ React.createElement(CardTitle$1, {\n      title: displayName\n    }),\n    subheader: description,\n    variant: props.variant,\n    action: /* @__PURE__ */ React.createElement(React.Fragment, null, allowRefresh && /* @__PURE__ */ React.createElement(IconButton, {\n      \"aria-label\": \"Refresh\",\n      title: \"Schedule entity refresh\",\n      onClick: refreshEntity\n    }, /* @__PURE__ */ React.createElement(CachedIcon, null)), infoCardAction)\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    spacing: 3\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 2,\n    xl: 1\n  }, /* @__PURE__ */ React.createElement(Avatar, {\n    displayName,\n    picture: profile == null ? void 0 : profile.picture\n  })), /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    md: 10,\n    xl: 11\n  }, /* @__PURE__ */ React.createElement(List, null, (profile == null ? void 0 : profile.email) && /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Tooltip, {\n    title: \"Email\"\n  }, /* @__PURE__ */ React.createElement(EmailIcon, null))), /* @__PURE__ */ React.createElement(ListItemText, null, /* @__PURE__ */ React.createElement(Link, {\n    to: emailHref\n  }, profile.email))), parentRelations.length ? /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Tooltip, {\n    title: \"Parent Group\"\n  }, /* @__PURE__ */ React.createElement(AccountTreeIcon, null))), /* @__PURE__ */ React.createElement(ListItemText, null, /* @__PURE__ */ React.createElement(EntityRefLinks, {\n    entityRefs: parentRelations,\n    defaultKind: \"Group\"\n  }))) : null, childRelations.length ? /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Tooltip, {\n    title: \"Child Groups\"\n  }, /* @__PURE__ */ React.createElement(GroupIcon, null))), /* @__PURE__ */ React.createElement(ListItemText, null, /* @__PURE__ */ React.createElement(EntityRefLinks, {\n    entityRefs: childRelations,\n    defaultKind: \"Group\"\n  }))) : null))));\n};\n\nconst CardTitle = (props) => props.title ? /* @__PURE__ */ React.createElement(Box, {\n  display: \"flex\",\n  alignItems: \"center\"\n}, /* @__PURE__ */ React.createElement(PersonIcon, {\n  fontSize: \"inherit\"\n}), /* @__PURE__ */ React.createElement(Box, {\n  ml: 1\n}, props.title)) : null;\nconst UserProfileCard = (props) => {\n  var _a;\n  const { entity: user } = useEntity();\n  if (!user) {\n    return /* @__PURE__ */ React.createElement(Alert, {\n      severity: \"error\"\n    }, \"User not found\");\n  }\n  const {\n    metadata: { name: metaName, description },\n    spec: { profile }\n  } = user;\n  const displayName = (_a = profile == null ? void 0 : profile.displayName) != null ? _a : metaName;\n  const emailHref = (profile == null ? void 0 : profile.email) ? `mailto:${profile.email}` : void 0;\n  const memberOfRelations = getEntityRelations(user, RELATION_MEMBER_OF, {\n    kind: \"Group\"\n  });\n  return /* @__PURE__ */ React.createElement(InfoCard, {\n    title: /* @__PURE__ */ React.createElement(CardTitle, {\n      title: displayName\n    }),\n    subheader: description,\n    variant: props.variant\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    spacing: 3,\n    alignItems: \"flex-start\"\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 2,\n    xl: 1\n  }, /* @__PURE__ */ React.createElement(Avatar, {\n    displayName,\n    picture: profile == null ? void 0 : profile.picture\n  })), /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    md: 10,\n    xl: 11\n  }, /* @__PURE__ */ React.createElement(List, null, (profile == null ? void 0 : profile.email) && /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Tooltip, {\n    title: \"Email\"\n  }, /* @__PURE__ */ React.createElement(EmailIcon, null))), /* @__PURE__ */ React.createElement(ListItemText, null, /* @__PURE__ */ React.createElement(Link, {\n    to: emailHref != null ? emailHref : \"\"\n  }, profile.email))), /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Tooltip, {\n    title: \"Member of\"\n  }, /* @__PURE__ */ React.createElement(GroupIcon, null))), /* @__PURE__ */ React.createElement(ListItemText, null, /* @__PURE__ */ React.createElement(EntityRefLinks, {\n    entityRefs: memberOfRelations,\n    defaultKind: \"Group\"\n  })))))));\n};\n\nconst limiter = limiterFactory(10);\nconst getQueryParams = (ownersEntityRef, selectedEntity) => {\n  const { kind, type } = selectedEntity;\n  const owners = ownersEntityRef.map((owner) => owner.split(\"/\")[1]);\n  const filters = {\n    kind,\n    type,\n    owners,\n    user: \"all\"\n  };\n  const queryParams = qs.stringify({\n    filters\n  });\n  return queryParams;\n};\nconst getOwnersEntityRef = (owner) => {\n  let owners = [stringifyEntityRef(owner)];\n  if (owner.kind === \"User\") {\n    const ownerGroups = getEntityRelations(owner, RELATION_MEMBER_OF, {\n      kind: \"Group\"\n    });\n    const ownerGroupsName = ownerGroups.map((ownerGroup) => stringifyEntityRef({\n      kind: ownerGroup.kind,\n      namespace: ownerGroup.namespace,\n      name: ownerGroup.name\n    }));\n    owners = [...owners, ...ownerGroupsName];\n  }\n  return owners;\n};\nconst getAggregatedOwnersEntityRef = async (parentGroup, catalogApi) => {\n  const requestedEntities = [];\n  const outstandingEntities = /* @__PURE__ */ new Map();\n  const processedEntities = /* @__PURE__ */ new Set();\n  requestedEntities.push(parentGroup);\n  let currentEntity = parentGroup;\n  while (requestedEntities.length > 0) {\n    const childRelations = getEntityRelations(currentEntity, RELATION_PARENT_OF, {\n      kind: \"Group\"\n    });\n    await Promise.all(childRelations.map((childGroup) => limiter(async () => {\n      const promise = catalogApi.getEntityByRef(childGroup);\n      outstandingEntities.set(childGroup.name, promise);\n      try {\n        const processedEntity = await promise;\n        if (processedEntity) {\n          requestedEntities.push(processedEntity);\n        }\n      } finally {\n        outstandingEntities.delete(childGroup.name);\n      }\n    })));\n    requestedEntities.shift();\n    processedEntities.add(stringifyEntityRef({\n      kind: currentEntity.kind,\n      namespace: currentEntity.metadata.namespace,\n      name: currentEntity.metadata.name\n    }));\n    currentEntity = requestedEntities[0];\n  }\n  return Array.from(processedEntities);\n};\nfunction useGetEntities(entity, relationsType, isGroup, entityFilterKind) {\n  const catalogApi = useApi(catalogApiRef);\n  const kinds = entityFilterKind != null ? entityFilterKind : [\"Component\", \"API\", \"System\"];\n  const {\n    loading,\n    error,\n    value: componentsWithCounters\n  } = useAsync(async () => {\n    const owners = relationsType === \"aggregated\" && isGroup ? await getAggregatedOwnersEntityRef(entity, catalogApi) : getOwnersEntityRef(entity);\n    const ownedEntitiesList = await catalogApi.getEntities({\n      filter: [\n        {\n          kind: kinds,\n          \"relations.ownedBy\": owners\n        }\n      ],\n      fields: [\n        \"kind\",\n        \"metadata.name\",\n        \"metadata.namespace\",\n        \"spec.type\",\n        \"relations\"\n      ]\n    });\n    const counts = ownedEntitiesList.items.reduce((acc, ownedEntity) => {\n      var _a, _b, _c;\n      const match = acc.find((x) => {\n        var _a2, _b2;\n        return x.kind === ownedEntity.kind && x.type === ((_b2 = (_a2 = ownedEntity.spec) == null ? void 0 : _a2.type) != null ? _b2 : ownedEntity.kind);\n      });\n      if (match) {\n        match.count += 1;\n      } else {\n        acc.push({\n          kind: ownedEntity.kind,\n          type: (_c = (_b = (_a = ownedEntity.spec) == null ? void 0 : _a.type) == null ? void 0 : _b.toString()) != null ? _c : ownedEntity.kind,\n          count: 1\n        });\n      }\n      return acc;\n    }, []);\n    const topN = counts.sort((a, b) => b.count - a.count).slice(0, 6);\n    return topN.map((topOwnedEntity) => ({\n      counter: topOwnedEntity.count,\n      type: topOwnedEntity.type,\n      name: topOwnedEntity.type.toLocaleUpperCase(\"en-US\"),\n      queryParams: getQueryParams(owners, topOwnedEntity)\n    }));\n  }, [catalogApi, entity, relationsType]);\n  return {\n    componentsWithCounters,\n    loading,\n    error\n  };\n}\n\nconst useStyles$1 = makeStyles((theme) => createStyles({\n  card: {\n    border: `1px solid ${theme.palette.divider}`,\n    boxShadow: theme.shadows[2],\n    borderRadius: \"4px\",\n    padding: theme.spacing(2),\n    color: \"#fff\",\n    transition: `${theme.transitions.duration.standard}ms`,\n    \"&:hover\": {\n      boxShadow: theme.shadows[4]\n    }\n  },\n  bold: {\n    fontWeight: theme.typography.fontWeightBold\n  },\n  entityTypeBox: {\n    background: (props) => theme.getPageTheme({ themeId: props.type }).backgroundImage\n  }\n}));\nconst EntityCountTile = ({\n  counter,\n  type,\n  name,\n  url\n}) => {\n  const classes = useStyles$1({ type });\n  return /* @__PURE__ */ React.createElement(Link, {\n    to: url,\n    variant: \"body2\"\n  }, /* @__PURE__ */ React.createElement(Box, {\n    className: `${classes.card} ${classes.entityTypeBox}`,\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\"\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    className: classes.bold,\n    variant: \"h6\"\n  }, counter), /* @__PURE__ */ React.createElement(Typography, {\n    className: classes.bold,\n    variant: \"h6\"\n  }, pluralize(name, counter))));\n};\nconst ComponentsGrid = ({\n  entity,\n  relationsType,\n  isGroup,\n  entityFilterKind\n}) => {\n  const catalogLink = useRouteRef(catalogIndexRouteRef);\n  const { componentsWithCounters, loading, error } = useGetEntities(entity, relationsType, isGroup, entityFilterKind);\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  } else if (error) {\n    return /* @__PURE__ */ React.createElement(ResponseErrorPanel, {\n      error\n    });\n  }\n  return /* @__PURE__ */ React.createElement(Grid, {\n    container: true\n  }, componentsWithCounters == null ? void 0 : componentsWithCounters.map((c) => /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    md: 6,\n    lg: 4,\n    key: c.name\n  }, /* @__PURE__ */ React.createElement(EntityCountTile, {\n    counter: c.counter,\n    type: c.type,\n    name: c.name,\n    url: `${catalogLink()}/?${c.queryParams}`\n  }))));\n};\n\nconst useStyles = makeStyles((theme) => ({\n  list: {\n    [theme.breakpoints.down(\"xs\")]: {\n      padding: `0 0 12px`\n    }\n  },\n  listItemText: {\n    [theme.breakpoints.down(\"xs\")]: {\n      paddingRight: 0,\n      paddingLeft: 0\n    }\n  },\n  listItemSecondaryAction: {\n    [theme.breakpoints.down(\"xs\")]: {\n      width: \"100%\",\n      top: \"auto\",\n      right: \"auto\",\n      position: \"relative\",\n      transform: \"unset\"\n    }\n  }\n}));\nconst OwnershipCard = (props) => {\n  const { variant, entityFilterKind, hideRelationsToggle, relationsType } = props;\n  const relationsToggle = hideRelationsToggle === void 0 ? false : hideRelationsToggle;\n  const classes = useStyles();\n  const { entity } = useEntity();\n  const isGroup = entity.kind === \"Group\";\n  const [getRelationsType, setRelationsType] = useState(relationsType || \"direct\");\n  return /* @__PURE__ */ React.createElement(InfoCard, {\n    title: \"Ownership\",\n    variant\n  }, !relationsToggle && /* @__PURE__ */ React.createElement(List, {\n    dense: true\n  }, /* @__PURE__ */ React.createElement(ListItem, {\n    className: classes.list\n  }, /* @__PURE__ */ React.createElement(ListItemText, {\n    className: classes.listItemText\n  }), /* @__PURE__ */ React.createElement(ListItemSecondaryAction, {\n    className: classes.listItemSecondaryAction\n  }, \"Direct Relations\", /* @__PURE__ */ React.createElement(Tooltip, {\n    placement: \"top\",\n    arrow: true,\n    title: `${getRelationsType === \"direct\" ? \"Direct\" : \"Aggregated\"} Relations`\n  }, /* @__PURE__ */ React.createElement(Switch, {\n    color: \"primary\",\n    checked: getRelationsType !== \"direct\",\n    onChange: () => getRelationsType === \"direct\" ? setRelationsType(\"aggregated\") : setRelationsType(\"direct\"),\n    name: \"pin\",\n    inputProps: { \"aria-label\": \"Ownership Type Switch\" },\n    disabled: !isGroup\n  })), \"Aggregated Relations\"))), /* @__PURE__ */ React.createElement(ComponentsGrid, {\n    entity,\n    relationsType: getRelationsType,\n    isGroup,\n    entityFilterKind\n  }));\n};\n\nconst MyGroupsSidebarItem = (props) => {\n  const { singularTitle, pluralTitle, icon } = props;\n  const identityApi = useApi(identityApiRef);\n  const catalogApi = useApi(catalogApiRef);\n  const catalogEntityRoute = useRouteRef(entityRouteRef);\n  const { value: groups } = useAsync(async () => {\n    const profile = await identityApi.getBackstageIdentity();\n    const response = await catalogApi.getEntities({\n      filter: [{ kind: \"group\", \"relations.hasMember\": profile.userEntityRef }],\n      fields: [\"metadata\", \"kind\"]\n    });\n    return response.items;\n  }, []);\n  if (!(groups == null ? void 0 : groups.length)) {\n    return null;\n  }\n  if (groups.length === 1) {\n    const group = groups[0];\n    return /* @__PURE__ */ React.createElement(SidebarItem, {\n      text: singularTitle,\n      to: catalogEntityRoute(getCompoundEntityRef(group)),\n      icon\n    });\n  }\n  return /* @__PURE__ */ React.createElement(SidebarItem, {\n    icon,\n    to: \"catalog\",\n    text: pluralTitle\n  }, /* @__PURE__ */ React.createElement(SidebarSubmenu, {\n    title: pluralTitle\n  }, groups == null ? void 0 : groups.map(function groupsMap(group) {\n    return /* @__PURE__ */ React.createElement(SidebarSubmenuItem, {\n      title: group.metadata.title || group.metadata.name,\n      to: catalogEntityRoute(getCompoundEntityRef(group)),\n      icon,\n      key: group.metadata.name\n    });\n  })));\n};\n\nexport { EntityGroupProfileCard, EntityMembersListCard, EntityOwnershipCard, EntityUserProfileCard, GroupProfileCard, MembersListCard, MyGroupsSidebarItem, OwnershipCard, UserProfileCard, orgPlugin, orgPlugin as plugin };\n//# sourceMappingURL=index.esm.js.map\n","import { ResponseError } from '@backstage/errors';\nimport fetch from 'cross-fetch';\nimport * as uuid from 'uuid';\nimport { z } from 'zod';\n\nvar AuthorizeResult = /* @__PURE__ */ ((AuthorizeResult2) => {\n  AuthorizeResult2[\"DENY\"] = \"DENY\";\n  AuthorizeResult2[\"ALLOW\"] = \"ALLOW\";\n  AuthorizeResult2[\"CONDITIONAL\"] = \"CONDITIONAL\";\n  return AuthorizeResult2;\n})(AuthorizeResult || {});\n\nfunction isPermission(permission, comparedPermission) {\n  return permission.name === comparedPermission.name;\n}\nfunction isResourcePermission(permission, resourceType) {\n  if (!(\"resourceType\" in permission)) {\n    return false;\n  }\n  return !resourceType || permission.resourceType === resourceType;\n}\nfunction isCreatePermission(permission) {\n  return permission.attributes.action === \"create\";\n}\nfunction isReadPermission(permission) {\n  return permission.attributes.action === \"read\";\n}\nfunction isUpdatePermission(permission) {\n  return permission.attributes.action === \"update\";\n}\nfunction isDeletePermission(permission) {\n  return permission.attributes.action === \"delete\";\n}\nfunction toPermissionEvaluator(permissionAuthorizer) {\n  return {\n    authorize: async (requests, options) => {\n      const response = await permissionAuthorizer.authorize(requests, options);\n      return response;\n    },\n    authorizeConditional(requests, options) {\n      const parsedRequests = requests;\n      return permissionAuthorizer.authorize(parsedRequests, options);\n    }\n  };\n}\n\nfunction createPermission({\n  name,\n  attributes,\n  resourceType\n}) {\n  if (resourceType) {\n    return {\n      type: \"resource\",\n      name,\n      attributes,\n      resourceType\n    };\n  }\n  return {\n    type: \"basic\",\n    name,\n    attributes\n  };\n}\n\nconst permissionCriteriaSchema = z.lazy(() => z.object({\n  rule: z.string(),\n  resourceType: z.string(),\n  params: z.array(z.unknown())\n}).or(z.object({ anyOf: z.array(permissionCriteriaSchema).nonempty() })).or(z.object({ allOf: z.array(permissionCriteriaSchema).nonempty() })).or(z.object({ not: permissionCriteriaSchema })));\nconst authorizePermissionResponseSchema = z.object({\n  result: z.literal(AuthorizeResult.ALLOW).or(z.literal(AuthorizeResult.DENY))\n});\nconst queryPermissionResponseSchema = z.union([\n  z.object({\n    result: z.literal(AuthorizeResult.ALLOW).or(z.literal(AuthorizeResult.DENY))\n  }),\n  z.object({\n    result: z.literal(AuthorizeResult.CONDITIONAL),\n    pluginId: z.string(),\n    resourceType: z.string(),\n    conditions: permissionCriteriaSchema\n  })\n]);\nconst responseSchema = (itemSchema, ids) => z.object({\n  items: z.array(z.intersection(z.object({\n    id: z.string()\n  }), itemSchema)).refine((items) => items.length === ids.size && items.every(({ id }) => ids.has(id)), {\n    message: \"Items in response do not match request\"\n  })\n});\nclass PermissionClient {\n  constructor(options) {\n    var _a;\n    this.discovery = options.discovery;\n    this.enabled = (_a = options.config.getOptionalBoolean(\"permission.enabled\")) != null ? _a : false;\n  }\n  async authorize(requests, options) {\n    return this.makeRequest(requests, authorizePermissionResponseSchema, options);\n  }\n  async authorizeConditional(queries, options) {\n    return this.makeRequest(queries, queryPermissionResponseSchema, options);\n  }\n  async makeRequest(queries, itemSchema, options) {\n    if (!this.enabled) {\n      return queries.map((_) => ({ result: AuthorizeResult.ALLOW }));\n    }\n    const request = {\n      items: queries.map((query) => ({\n        id: uuid.v4(),\n        ...query\n      }))\n    };\n    const permissionApi = await this.discovery.getBaseUrl(\"permission\");\n    const response = await fetch(`${permissionApi}/authorize`, {\n      method: \"POST\",\n      body: JSON.stringify(request),\n      headers: {\n        ...this.getAuthorizationHeader(options == null ? void 0 : options.token),\n        \"content-type\": \"application/json\"\n      }\n    });\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    const responseBody = await response.json();\n    const parsedResponse = responseSchema(itemSchema, new Set(request.items.map(({ id }) => id))).parse(responseBody);\n    const responsesById = parsedResponse.items.reduce((acc, r) => {\n      acc[r.id] = r;\n      return acc;\n    }, {});\n    return request.items.map((query) => responsesById[query.id]);\n  }\n  getAuthorizationHeader(token) {\n    return token ? { Authorization: `Bearer ${token}` } : {};\n  }\n}\n\nexport { AuthorizeResult, PermissionClient, createPermission, isCreatePermission, isDeletePermission, isPermission, isReadPermission, isResourcePermission, isUpdatePermission, toPermissionEvaluator };\n//# sourceMappingURL=index.esm.js.map\n","import React from 'react';\nimport { Route } from 'react-router';\nimport { createApiRef, useApi, useApp } from '@backstage/core-plugin-api';\nimport { PermissionClient, isResourcePermission, AuthorizeResult } from '@backstage/plugin-permission-common';\nimport useSWR from 'swr';\n\nconst permissionApiRef = createApiRef({\n  id: \"plugin.permission.api\"\n});\n\nclass IdentityPermissionApi {\n  constructor(permissionClient, identityApi) {\n    this.permissionClient = permissionClient;\n    this.identityApi = identityApi;\n  }\n  static create(options) {\n    const { config, discovery, identity } = options;\n    const permissionClient = new PermissionClient({ discovery, config });\n    return new IdentityPermissionApi(permissionClient, identity);\n  }\n  async authorize(request) {\n    const response = await this.permissionClient.authorize([request], await this.identityApi.getCredentials());\n    return response[0];\n  }\n}\n\nfunction usePermission(input) {\n  const permissionApi = useApi(permissionApiRef);\n  const { data, error } = useSWR(input, async (args) => {\n    if (isResourcePermission(args.permission) && !args.resourceRef) {\n      return AuthorizeResult.DENY;\n    }\n    const { result } = await permissionApi.authorize(args);\n    return result;\n  });\n  if (error) {\n    return { error, loading: false, allowed: false };\n  }\n  if (data === void 0) {\n    return { loading: true, allowed: false };\n  }\n  return { loading: false, allowed: data === AuthorizeResult.ALLOW };\n}\n\nconst PermissionedRoute = (props) => {\n  const { permission, resourceRef, errorComponent, ...otherProps } = props;\n  const permissionResult = usePermission(isResourcePermission(permission) ? { permission, resourceRef } : { permission });\n  const app = useApp();\n  const { NotFoundErrorPage } = app.getComponents();\n  let shownElement = errorComponent === void 0 ? /* @__PURE__ */ React.createElement(NotFoundErrorPage, null) : errorComponent;\n  if (permissionResult.loading) {\n    shownElement = null;\n  } else if (permissionResult.allowed) {\n    shownElement = props.element;\n  }\n  return /* @__PURE__ */ React.createElement(Route, {\n    ...otherProps,\n    element: shownElement\n  });\n};\n\nexport { IdentityPermissionApi, PermissionedRoute, permissionApiRef, usePermission };\n//# sourceMappingURL=index.esm.js.map\n","import { parseEntityRef, KubernetesValidatorFunctions, makeValidator, RELATION_OWNED_BY } from '@backstage/catalog-model';\nimport { createApiRef, useApi, identityApiRef, attachComponentData, createExternalRouteRef, createRouteRef, createSubRouteRef, createPlugin, createApiFactory, discoveryApiRef, fetchApiRef, createRoutableExtension, alertApiRef, useApp, useRouteRef } from '@backstage/core-plugin-api';\nimport { ResponseError } from '@backstage/errors';\nimport qs from 'qs';\nimport ObservableImpl from 'zen-observable';\nimport { catalogApiRef, humanizeEntityRef, useEntityTypeFilter, entityRouteRef } from '@backstage/plugin-catalog-react';\nimport { TextField, FormControl as FormControl$1, Box, Typography, FormControlLabel, Checkbox, makeStyles, Grid, StepButton, Paper, Button, CircularProgress } from '@material-ui/core';\nimport FormControl from '@material-ui/core/FormControl';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport React, { useCallback, useEffect, useState, createContext, useContext, useMemo, memo } from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport useEffectOnce from 'react-use/lib/useEffectOnce';\nimport { Autocomplete as Autocomplete$1 } from '@material-ui/lab';\nimport { scmIntegrationsApiRef, scmAuthApiRef } from '@backstage/integration-react';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport { Select, Progress, Link, Page, Header, Content, ErrorPage, LogViewer } from '@backstage/core-components';\nimport useDebounce from 'react-use/lib/useDebounce';\nimport capitalize from 'lodash/capitalize';\nimport CheckBoxIcon from '@material-ui/icons/CheckBox';\nimport CheckBoxOutlineBlankIcon from '@material-ui/icons/CheckBoxOutlineBlank';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport Grid$1 from '@material-ui/core/Grid';\nimport Step from '@material-ui/core/Step';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport Stepper from '@material-ui/core/Stepper';\nimport { makeStyles as makeStyles$1, createStyles } from '@material-ui/core/styles';\nimport Typography$1 from '@material-ui/core/Typography';\nimport Cancel from '@material-ui/icons/Cancel';\nimport Check from '@material-ui/icons/Check';\nimport FiberManualRecordIcon from '@material-ui/icons/FiberManualRecord';\nimport classNames from 'classnames';\nimport { DateTime, Interval } from 'luxon';\nimport { useNavigate, useParams } from 'react-router';\nimport useInterval from 'react-use/lib/useInterval';\nimport { useImmerReducer } from 'use-immer';\nimport LanguageIcon from '@material-ui/icons/Language';\n\nconst scaffolderApiRef = createApiRef({\n  id: \"plugin.scaffolder.service\"\n});\nclass ScaffolderClient {\n  constructor(options) {\n    var _a, _b;\n    this.discoveryApi = options.discoveryApi;\n    this.fetchApi = (_a = options.fetchApi) != null ? _a : { fetch };\n    this.scmIntegrationsApi = options.scmIntegrationsApi;\n    this.useLongPollingLogs = (_b = options.useLongPollingLogs) != null ? _b : false;\n  }\n  async getIntegrationsList(options) {\n    const integrations = [\n      ...this.scmIntegrationsApi.azure.list(),\n      ...this.scmIntegrationsApi.bitbucket.list(),\n      ...this.scmIntegrationsApi.github.list(),\n      ...this.scmIntegrationsApi.gitlab.list()\n    ].map((c) => ({ type: c.type, title: c.title, host: c.config.host })).filter((c) => options.allowedHosts.includes(c.host));\n    return {\n      integrations\n    };\n  }\n  async getTemplateParameterSchema(templateRef) {\n    const { namespace, kind, name } = parseEntityRef(templateRef, {\n      defaultKind: \"template\"\n    });\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"scaffolder\");\n    const templatePath = [namespace, kind, name].map((s) => encodeURIComponent(s)).join(\"/\");\n    const url = `${baseUrl}/v2/templates/${templatePath}/parameter-schema`;\n    const response = await this.fetchApi.fetch(url);\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    const schema = await response.json();\n    return schema;\n  }\n  async scaffold(options) {\n    const { templateRef, values, secrets = {} } = options;\n    const url = `${await this.discoveryApi.getBaseUrl(\"scaffolder\")}/v2/tasks`;\n    const response = await this.fetchApi.fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        templateRef,\n        values: { ...values },\n        secrets\n      })\n    });\n    if (response.status !== 201) {\n      const status = `${response.status} ${response.statusText}`;\n      const body = await response.text();\n      throw new Error(`Backend request failed, ${status} ${body.trim()}`);\n    }\n    const { id } = await response.json();\n    return { taskId: id };\n  }\n  async getTask(taskId) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"scaffolder\");\n    const url = `${baseUrl}/v2/tasks/${encodeURIComponent(taskId)}`;\n    const response = await this.fetchApi.fetch(url);\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    return await response.json();\n  }\n  streamLogs(options) {\n    if (this.useLongPollingLogs) {\n      return this.streamLogsPolling(options);\n    }\n    return this.streamLogsEventStream(options);\n  }\n  streamLogsEventStream({\n    taskId,\n    after\n  }) {\n    return new ObservableImpl((subscriber) => {\n      const params = new URLSearchParams();\n      if (after !== void 0) {\n        params.set(\"after\", String(Number(after)));\n      }\n      this.discoveryApi.getBaseUrl(\"scaffolder\").then((baseUrl) => {\n        const url = `${baseUrl}/v2/tasks/${encodeURIComponent(taskId)}/eventstream`;\n        const eventSource = new EventSource(url, { withCredentials: true });\n        eventSource.addEventListener(\"log\", (event) => {\n          if (event.data) {\n            try {\n              subscriber.next(JSON.parse(event.data));\n            } catch (ex) {\n              subscriber.error(ex);\n            }\n          }\n        });\n        eventSource.addEventListener(\"completion\", (event) => {\n          if (event.data) {\n            try {\n              subscriber.next(JSON.parse(event.data));\n            } catch (ex) {\n              subscriber.error(ex);\n            }\n          }\n          eventSource.close();\n          subscriber.complete();\n        });\n        eventSource.addEventListener(\"error\", (event) => {\n          subscriber.error(event);\n        });\n      }, (error) => {\n        subscriber.error(error);\n      });\n    });\n  }\n  streamLogsPolling({\n    taskId,\n    after: inputAfter\n  }) {\n    let after = inputAfter;\n    return new ObservableImpl((subscriber) => {\n      this.discoveryApi.getBaseUrl(\"scaffolder\").then(async (baseUrl) => {\n        while (!subscriber.closed) {\n          const url = `${baseUrl}/v2/tasks/${encodeURIComponent(taskId)}/events?${qs.stringify({ after })}`;\n          const response = await this.fetchApi.fetch(url);\n          if (!response.ok) {\n            await new Promise((resolve) => setTimeout(resolve, 1e3));\n            continue;\n          }\n          const logs = await response.json();\n          for (const event of logs) {\n            after = Number(event.id);\n            subscriber.next(event);\n            if (event.type === \"completion\") {\n              subscriber.complete();\n              return;\n            }\n          }\n        }\n      });\n    });\n  }\n  async listActions() {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"scaffolder\");\n    const response = await this.fetchApi.fetch(`${baseUrl}/v2/actions`);\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    return await response.json();\n  }\n}\n\nconst EntityPicker = (props) => {\n  var _a, _b, _c, _d;\n  const {\n    onChange,\n    schema: { title = \"Entity\", description = \"An entity from the catalog\" },\n    required,\n    uiSchema,\n    rawErrors,\n    formData,\n    idSchema\n  } = props;\n  const allowedKinds = (_a = uiSchema[\"ui:options\"]) == null ? void 0 : _a.allowedKinds;\n  const defaultKind = (_b = uiSchema[\"ui:options\"]) == null ? void 0 : _b.defaultKind;\n  const catalogApi = useApi(catalogApiRef);\n  const { value: entities, loading } = useAsync(() => catalogApi.getEntities(allowedKinds ? { filter: { kind: allowedKinds } } : void 0));\n  const entityRefs = entities == null ? void 0 : entities.items.map((e) => humanizeEntityRef(e, { defaultKind }));\n  const onSelect = useCallback((_, value) => {\n    onChange(value || \"\");\n  }, [onChange]);\n  useEffect(() => {\n    if ((entityRefs == null ? void 0 : entityRefs.length) === 1) {\n      onChange(entityRefs[0]);\n    }\n  }, [entityRefs, onChange]);\n  return /* @__PURE__ */ React.createElement(FormControl, {\n    margin: \"normal\",\n    required,\n    error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !formData\n  }, /* @__PURE__ */ React.createElement(Autocomplete, {\n    disabled: (entityRefs == null ? void 0 : entityRefs.length) === 1,\n    id: idSchema == null ? void 0 : idSchema.$id,\n    value: formData || \"\",\n    loading,\n    onChange: onSelect,\n    options: entityRefs || [],\n    autoSelect: true,\n    freeSolo: (_d = (_c = uiSchema[\"ui:options\"]) == null ? void 0 : _c.allowArbitraryValues) != null ? _d : true,\n    renderInput: (params) => /* @__PURE__ */ React.createElement(TextField, {\n      ...params,\n      label: title,\n      margin: \"normal\",\n      helperText: description,\n      variant: \"outlined\",\n      required,\n      InputProps: params.InputProps\n    })\n  }));\n};\n\nconst EntityNamePicker = (props) => {\n  const {\n    onChange,\n    required,\n    schema: { title = \"Name\", description = \"Unique name of the component\" },\n    rawErrors,\n    formData,\n    uiSchema: { \"ui:autofocus\": autoFocus },\n    idSchema,\n    placeholder\n  } = props;\n  return /* @__PURE__ */ React.createElement(TextField, {\n    id: idSchema == null ? void 0 : idSchema.$id,\n    label: title,\n    placeholder,\n    helperText: description,\n    required,\n    value: formData != null ? formData : \"\",\n    onChange: ({ target: { value } }) => onChange(value),\n    margin: \"normal\",\n    error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !formData,\n    inputProps: { autoFocus }\n  });\n};\n\nconst entityNamePickerValidation = (value, validation) => {\n  if (!KubernetesValidatorFunctions.isValidObjectName(value)) {\n    validation.addError(\"must start and end with an alphanumeric character, and contain only alphanumeric characters, hyphens, underscores, and periods. Maximum length is 63 characters.\");\n  }\n};\n\nconst EntityTagsPicker = (props) => {\n  var _a;\n  const { formData, onChange, uiSchema } = props;\n  const catalogApi = useApi(catalogApiRef);\n  const [inputValue, setInputValue] = useState(\"\");\n  const [inputError, setInputError] = useState(false);\n  const tagValidator = makeValidator().isValidTag;\n  const kinds = (_a = uiSchema[\"ui:options\"]) == null ? void 0 : _a.kinds;\n  const { loading, value: existingTags } = useAsync(async () => {\n    const tagsRequest = { fields: [\"metadata.tags\"] };\n    if (kinds) {\n      tagsRequest.filter = { kind: kinds };\n    }\n    const entities = await catalogApi.getEntities(tagsRequest);\n    return [\n      ...new Set(entities.items.flatMap((e) => {\n        var _a2;\n        return (_a2 = e.metadata) == null ? void 0 : _a2.tags;\n      }).filter(Boolean))\n    ].sort();\n  });\n  const setTags = (_, values) => {\n    let hasError = false;\n    let addDuplicate = false;\n    const currentTags = formData || [];\n    if ((values == null ? void 0 : values.length) && currentTags.length < values.length) {\n      const newTag = values[values.length - 1] = values[values.length - 1].toLocaleLowerCase(\"en-US\").trim();\n      hasError = !tagValidator(newTag);\n      addDuplicate = currentTags.indexOf(newTag) !== -1;\n    }\n    setInputError(hasError);\n    setInputValue(!hasError ? \"\" : inputValue);\n    if (!hasError && !addDuplicate) {\n      onChange(values || []);\n    }\n  };\n  useEffectOnce(() => onChange(formData || []));\n  return /* @__PURE__ */ React.createElement(FormControl$1, {\n    margin: \"normal\"\n  }, /* @__PURE__ */ React.createElement(Autocomplete$1, {\n    multiple: true,\n    freeSolo: true,\n    filterSelectedOptions: true,\n    onChange: setTags,\n    value: formData || [],\n    inputValue,\n    loading,\n    options: existingTags || [],\n    ChipProps: { size: \"small\" },\n    renderInput: (params) => /* @__PURE__ */ React.createElement(TextField, {\n      ...params,\n      label: \"Tags\",\n      onChange: (e) => setInputValue(e.target.value),\n      error: inputError,\n      helperText: \"Add any relevant tags, hit 'Enter' to add new tags. Valid format: [a-z0-9+#] separated by [-], at most 63 characters\"\n    })\n  }));\n};\n\nconst OwnerPicker = (props) => {\n  var _a;\n  const {\n    schema: { title = \"Owner\", description = \"The owner of the component\" },\n    uiSchema,\n    ...restProps\n  } = props;\n  const ownerUiSchema = {\n    ...uiSchema,\n    \"ui:options\": {\n      allowedKinds: ((_a = uiSchema[\"ui:options\"]) == null ? void 0 : _a.allowedKinds) || [\n        \"Group\",\n        \"User\"\n      ],\n      defaultKind: \"Group\"\n    }\n  };\n  return /* @__PURE__ */ React.createElement(EntityPicker, {\n    ...restProps,\n    schema: { title, description },\n    uiSchema: ownerUiSchema\n  });\n};\n\nconst GithubRepoPicker = (props) => {\n  const { allowedOwners = [], rawErrors, state, onChange } = props;\n  const ownerItems = allowedOwners ? allowedOwners.map((i) => ({ label: i, value: i })) : [{ label: \"Loading...\", value: \"loading\" }];\n  const { owner, repoName } = state;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(FormControl, {\n    margin: \"normal\",\n    required: true,\n    error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !owner\n  }, (allowedOwners == null ? void 0 : allowedOwners.length) ? /* @__PURE__ */ React.createElement(Select, {\n    native: true,\n    label: \"Owner Available\",\n    onChange: (s) => onChange({ owner: String(Array.isArray(s) ? s[0] : s) }),\n    disabled: allowedOwners.length === 1,\n    selected: owner,\n    items: ownerItems\n  }) : /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(InputLabel, {\n    htmlFor: \"ownerInput\"\n  }, \"Owner\"), /* @__PURE__ */ React.createElement(Input, {\n    id: \"ownerInput\",\n    onChange: (e) => onChange({ owner: e.target.value }),\n    value: owner\n  })), /* @__PURE__ */ React.createElement(FormHelperText, null, \"The organization, user or project that this repo will belong to\")), /* @__PURE__ */ React.createElement(FormControl, {\n    margin: \"normal\",\n    required: true,\n    error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !repoName\n  }, /* @__PURE__ */ React.createElement(InputLabel, {\n    htmlFor: \"repoNameInput\"\n  }, \"Repository\"), /* @__PURE__ */ React.createElement(Input, {\n    id: \"repoNameInput\",\n    onChange: (e) => onChange({ repoName: e.target.value }),\n    value: repoName\n  }), /* @__PURE__ */ React.createElement(FormHelperText, null, \"The name of the repository\")));\n};\n\nconst GitlabRepoPicker = (props) => {\n  const { allowedOwners = [], rawErrors, state, onChange } = props;\n  const ownerItems = allowedOwners ? allowedOwners.map((i) => ({ label: i, value: i })) : [{ label: \"Loading...\", value: \"loading\" }];\n  const { owner, repoName } = state;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(FormControl, {\n    margin: \"normal\",\n    required: true,\n    error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !owner\n  }, (allowedOwners == null ? void 0 : allowedOwners.length) ? /* @__PURE__ */ React.createElement(Select, {\n    native: true,\n    label: \"Owner Available\",\n    onChange: (selected) => onChange({\n      owner: String(Array.isArray(selected) ? selected[0] : selected)\n    }),\n    disabled: allowedOwners.length === 1,\n    selected: owner,\n    items: ownerItems\n  }) : /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(InputLabel, {\n    htmlFor: \"ownerInput\"\n  }, \"Owner\"), /* @__PURE__ */ React.createElement(Input, {\n    id: \"ownerInput\",\n    onChange: (e) => onChange({ owner: e.target.value }),\n    value: owner\n  })), /* @__PURE__ */ React.createElement(FormHelperText, null, \"The organization, groups, subgroups, user, project (also known as namespaces in gitlab), that this repo will belong to\")), /* @__PURE__ */ React.createElement(FormControl, {\n    margin: \"normal\",\n    required: true,\n    error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !repoName\n  }, /* @__PURE__ */ React.createElement(InputLabel, {\n    htmlFor: \"repoNameInput\"\n  }, \"Repository\"), /* @__PURE__ */ React.createElement(Input, {\n    id: \"repoNameInput\",\n    onChange: (e) => onChange({ repoName: e.target.value }),\n    value: repoName\n  }), /* @__PURE__ */ React.createElement(FormHelperText, null, \"The name of the repository\")));\n};\n\nconst AzureRepoPicker = (props) => {\n  const { rawErrors, state, onChange } = props;\n  const { organization, repoName, owner } = state;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(FormControl, {\n    margin: \"normal\",\n    required: true,\n    error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !organization\n  }, /* @__PURE__ */ React.createElement(InputLabel, {\n    htmlFor: \"orgInput\"\n  }, \"Organization\"), /* @__PURE__ */ React.createElement(Input, {\n    id: \"orgInput\",\n    onChange: (e) => onChange({ organization: e.target.value }),\n    value: organization\n  }), /* @__PURE__ */ React.createElement(FormHelperText, null, \"The organization that this repo will belong to\")), /* @__PURE__ */ React.createElement(FormControl, {\n    margin: \"normal\",\n    required: true,\n    error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !owner\n  }, /* @__PURE__ */ React.createElement(InputLabel, {\n    htmlFor: \"ownerInput\"\n  }, \"Owner\"), /* @__PURE__ */ React.createElement(Input, {\n    id: \"ownerInput\",\n    onChange: (e) => onChange({ owner: e.target.value }),\n    value: owner\n  }), /* @__PURE__ */ React.createElement(FormHelperText, null, \"The Owner that this repo will belong to\")), /* @__PURE__ */ React.createElement(FormControl, {\n    margin: \"normal\",\n    required: true,\n    error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !repoName\n  }, /* @__PURE__ */ React.createElement(InputLabel, {\n    htmlFor: \"repoNameInput\"\n  }, \"Repository\"), /* @__PURE__ */ React.createElement(Input, {\n    id: \"repoNameInput\",\n    onChange: (e) => onChange({ repoName: e.target.value }),\n    value: repoName\n  }), /* @__PURE__ */ React.createElement(FormHelperText, null, \"The name of the repository\")));\n};\n\nconst BitbucketRepoPicker = (props) => {\n  const { onChange, rawErrors, state } = props;\n  const { host, workspace, project, repoName } = state;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, host === \"bitbucket.org\" && /* @__PURE__ */ React.createElement(FormControl, {\n    margin: \"normal\",\n    required: true,\n    error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !workspace\n  }, /* @__PURE__ */ React.createElement(InputLabel, {\n    htmlFor: \"workspaceInput\"\n  }, \"Workspace\"), /* @__PURE__ */ React.createElement(Input, {\n    id: \"workspaceInput\",\n    onChange: (e) => onChange({ workspace: e.target.value }),\n    value: workspace\n  }), /* @__PURE__ */ React.createElement(FormHelperText, null, \"The Organization that this repo will belong to\")), /* @__PURE__ */ React.createElement(FormControl, {\n    margin: \"normal\",\n    required: true,\n    error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !project\n  }, /* @__PURE__ */ React.createElement(InputLabel, {\n    htmlFor: \"projectInput\"\n  }, \"Project\"), /* @__PURE__ */ React.createElement(Input, {\n    id: \"projectInput\",\n    onChange: (e) => onChange({ project: e.target.value }),\n    value: project\n  }), /* @__PURE__ */ React.createElement(FormHelperText, null, \"The Project that this repo will belong to\")), /* @__PURE__ */ React.createElement(FormControl, {\n    margin: \"normal\",\n    required: true,\n    error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !repoName\n  }, /* @__PURE__ */ React.createElement(InputLabel, {\n    htmlFor: \"repoNameInput\"\n  }, \"Repository\"), /* @__PURE__ */ React.createElement(Input, {\n    id: \"repoNameInput\",\n    onChange: (e) => onChange({ repoName: e.target.value }),\n    value: repoName\n  }), /* @__PURE__ */ React.createElement(FormHelperText, null, \"The name of the repository\")));\n};\n\nconst RepoUrlPickerHost = (props) => {\n  const { host, hosts, onChange, rawErrors } = props;\n  const scaffolderApi = useApi(scaffolderApiRef);\n  const { value: { integrations } = { integrations: [] }, loading } = useAsync(async () => {\n    return await scaffolderApi.getIntegrationsList({\n      allowedHosts: hosts != null ? hosts : []\n    });\n  });\n  useEffect(() => {\n    if (!host) {\n      if (hosts == null ? void 0 : hosts.length) {\n        onChange(hosts[0]);\n      } else if (integrations == null ? void 0 : integrations.length) {\n        onChange(integrations[0].host);\n      }\n    }\n  }, [hosts, host, onChange, integrations]);\n  const hostsOptions = integrations ? integrations.filter((i) => (hosts == null ? void 0 : hosts.length) ? hosts == null ? void 0 : hosts.includes(i.host) : true).map((i) => ({ label: i.title, value: i.host })) : [{ label: \"Loading...\", value: \"loading\" }];\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(FormControl, {\n    margin: \"normal\",\n    required: true,\n    error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !host\n  }, /* @__PURE__ */ React.createElement(Select, {\n    native: true,\n    disabled: (hosts == null ? void 0 : hosts.length) === 1,\n    label: \"Host\",\n    onChange: (s) => onChange(String(Array.isArray(s) ? s[0] : s)),\n    selected: host,\n    items: hostsOptions,\n    \"data-testid\": \"host-select\"\n  }), /* @__PURE__ */ React.createElement(FormHelperText, null, \"The host where the repository will be created\")));\n};\n\nfunction serializeRepoPickerUrl(data) {\n  if (!data.host) {\n    return void 0;\n  }\n  const params = new URLSearchParams();\n  if (data.owner) {\n    params.set(\"owner\", data.owner);\n  }\n  if (data.repoName) {\n    params.set(\"repo\", data.repoName);\n  }\n  if (data.organization) {\n    params.set(\"organization\", data.organization);\n  }\n  if (data.workspace) {\n    params.set(\"workspace\", data.workspace);\n  }\n  if (data.project) {\n    params.set(\"project\", data.project);\n  }\n  return `${data.host}?${params.toString()}`;\n}\nfunction parseRepoPickerUrl(url) {\n  let host = \"\";\n  let owner = \"\";\n  let repoName = \"\";\n  let organization = \"\";\n  let workspace = \"\";\n  let project = \"\";\n  try {\n    if (url) {\n      const parsed = new URL(`https://${url}`);\n      host = parsed.host;\n      owner = parsed.searchParams.get(\"owner\") || \"\";\n      repoName = parsed.searchParams.get(\"repo\") || \"\";\n      organization = parsed.searchParams.get(\"organization\") || \"\";\n      workspace = parsed.searchParams.get(\"workspace\") || \"\";\n      project = parsed.searchParams.get(\"project\") || \"\";\n    }\n  } catch {\n  }\n  return { host, owner, repoName, organization, workspace, project };\n}\n\nconst SecretsContext = createContext(void 0);\nconst SecretsContextProvider = ({ children }) => {\n  const [secrets, setSecrets] = useState({});\n  return /* @__PURE__ */ React.createElement(SecretsContext.Provider, {\n    value: { secrets, setSecrets }\n  }, children);\n};\nconst useTemplateSecrets = () => {\n  const value = useContext(SecretsContext);\n  if (!value) {\n    throw new Error(\"useTemplateSecrets must be used within a SecretsContextProvider\");\n  }\n  const { setSecrets: updateSecrets } = value;\n  const setSecrets = useCallback((input) => {\n    updateSecrets((currentSecrets) => ({ ...currentSecrets, ...input }));\n  }, [updateSecrets]);\n  return { setSecrets };\n};\n\nconst RepoUrlPicker = (props) => {\n  var _a, _b;\n  const { uiSchema, onChange, rawErrors, formData } = props;\n  const [state, setState] = useState(parseRepoPickerUrl(formData));\n  const integrationApi = useApi(scmIntegrationsApiRef);\n  const scmAuthApi = useApi(scmAuthApiRef);\n  const { setSecrets } = useTemplateSecrets();\n  const allowedHosts = useMemo(() => {\n    var _a2, _b2;\n    return (_b2 = (_a2 = uiSchema == null ? void 0 : uiSchema[\"ui:options\"]) == null ? void 0 : _a2.allowedHosts) != null ? _b2 : [];\n  }, [uiSchema]);\n  const allowedOwners = useMemo(() => {\n    var _a2, _b2;\n    return (_b2 = (_a2 = uiSchema == null ? void 0 : uiSchema[\"ui:options\"]) == null ? void 0 : _a2.allowedOwners) != null ? _b2 : [];\n  }, [uiSchema]);\n  useEffect(() => {\n    onChange(serializeRepoPickerUrl(state));\n  }, [state, onChange]);\n  useEffect(() => {\n    if (allowedOwners.length === 1) {\n      setState((prevState) => ({ ...prevState, owner: allowedOwners[0] }));\n    }\n  }, [setState, allowedOwners]);\n  const updateLocalState = useCallback((newState) => {\n    setState((prevState) => ({ ...prevState, ...newState }));\n  }, [setState]);\n  useDebounce(async () => {\n    var _a2;\n    const { requestUserCredentials } = (_a2 = uiSchema == null ? void 0 : uiSchema[\"ui:options\"]) != null ? _a2 : {};\n    if (!requestUserCredentials || !(state.host && state.owner && state.repoName)) {\n      return;\n    }\n    const [host, owner, repoName] = [\n      state.host,\n      state.owner,\n      state.repoName\n    ].map(encodeURIComponent);\n    const { token } = await scmAuthApi.getCredentials({\n      url: `https://${host}/${owner}/${repoName}`,\n      additionalScope: {\n        repoWrite: true,\n        customScopes: requestUserCredentials.additionalScopes\n      }\n    });\n    setSecrets({ [requestUserCredentials.secretsKey]: token });\n  }, 500, [state, uiSchema]);\n  const hostType = (_b = state.host && ((_a = integrationApi.byHost(state.host)) == null ? void 0 : _a.type)) != null ? _b : null;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(RepoUrlPickerHost, {\n    host: state.host,\n    hosts: allowedHosts,\n    onChange: (host) => setState((prevState) => ({ ...prevState, host })),\n    rawErrors\n  }), hostType === \"github\" && /* @__PURE__ */ React.createElement(GithubRepoPicker, {\n    allowedOwners,\n    rawErrors,\n    state,\n    onChange: updateLocalState\n  }), hostType === \"gitlab\" && /* @__PURE__ */ React.createElement(GitlabRepoPicker, {\n    allowedOwners,\n    rawErrors,\n    state,\n    onChange: updateLocalState\n  }), hostType === \"bitbucket\" && /* @__PURE__ */ React.createElement(BitbucketRepoPicker, {\n    rawErrors,\n    state,\n    onChange: updateLocalState\n  }), hostType === \"azure\" && /* @__PURE__ */ React.createElement(AzureRepoPicker, {\n    rawErrors,\n    state,\n    onChange: updateLocalState\n  }));\n};\n\nconst repoPickerValidation = (value, validation, context) => {\n  var _a;\n  try {\n    const { host, searchParams } = new URL(`https://${value}`);\n    const integrationApi = context.apiHolder.get(scmIntegrationsApiRef);\n    if (!host) {\n      validation.addError(\"Incomplete repository location provided, host not provided\");\n    } else {\n      if (((_a = integrationApi == null ? void 0 : integrationApi.byHost(host)) == null ? void 0 : _a.type) === \"bitbucket\") {\n        if (host === \"bitbucket.org\" && !searchParams.get(\"workspace\")) {\n          validation.addError(\"Incomplete repository location provided, workspace not provided\");\n        }\n        if (!searchParams.get(\"project\")) {\n          validation.addError(\"Incomplete repository location provided, project not provided\");\n        }\n      } else {\n        if (!searchParams.get(\"owner\")) {\n          validation.addError(\"Incomplete repository location provided, owner not provided\");\n        }\n      }\n      if (!searchParams.get(\"repo\")) {\n        validation.addError(\"Incomplete repository location provided, repo not provided\");\n      }\n    }\n  } catch {\n    validation.addError(\"Unable to parse the Repository URL\");\n  }\n};\n\nconst OwnedEntityPicker = (props) => {\n  var _a, _b;\n  const {\n    onChange,\n    schema: { title = \"Entity\", description = \"An entity from the catalog\" },\n    required,\n    uiSchema,\n    rawErrors,\n    formData,\n    idSchema\n  } = props;\n  const allowedKinds = (_a = uiSchema[\"ui:options\"]) == null ? void 0 : _a.allowedKinds;\n  const defaultKind = (_b = uiSchema[\"ui:options\"]) == null ? void 0 : _b.defaultKind;\n  const { ownedEntities, loading } = useOwnedEntities(allowedKinds);\n  const entityRefs = ownedEntities == null ? void 0 : ownedEntities.items.map((e) => humanizeEntityRef(e, { defaultKind })).filter((n) => n);\n  const onSelect = (_, value) => {\n    onChange(value || \"\");\n  };\n  return /* @__PURE__ */ React.createElement(FormControl, {\n    margin: \"normal\",\n    required,\n    error: (rawErrors == null ? void 0 : rawErrors.length) > 0 && !formData\n  }, /* @__PURE__ */ React.createElement(Autocomplete, {\n    id: idSchema == null ? void 0 : idSchema.$id,\n    value: formData || \"\",\n    loading,\n    onChange: onSelect,\n    options: entityRefs || [],\n    autoSelect: true,\n    freeSolo: true,\n    renderInput: (params) => /* @__PURE__ */ React.createElement(TextField, {\n      ...params,\n      label: title,\n      margin: \"normal\",\n      helperText: description,\n      variant: \"outlined\",\n      required,\n      InputProps: params.InputProps\n    })\n  }));\n};\nfunction useOwnedEntities(allowedKinds) {\n  const identityApi = useApi(identityApiRef);\n  const catalogApi = useApi(catalogApiRef);\n  const { loading, value: refs } = useAsync(async () => {\n    const identity = await identityApi.getBackstageIdentity();\n    const identityRefs = identity.ownershipEntityRefs;\n    const catalogs = await catalogApi.getEntities(allowedKinds ? {\n      filter: {\n        kind: allowedKinds,\n        [`relations.${RELATION_OWNED_BY}`]: identityRefs || []\n      }\n    } : {\n      filter: {\n        [`relations.${RELATION_OWNED_BY}`]: identityRefs || []\n      }\n    });\n    return catalogs;\n  }, []);\n  const ownedEntities = useMemo(() => {\n    return refs;\n  }, [refs]);\n  return useMemo(() => ({ loading, ownedEntities }), [loading, ownedEntities]);\n}\n\nconst FIELD_EXTENSION_WRAPPER_KEY = \"scaffolder.extensions.wrapper.v1\";\nconst FIELD_EXTENSION_KEY = \"scaffolder.extensions.field.v1\";\nfunction createScaffolderFieldExtension(options) {\n  return {\n    expose() {\n      const FieldExtensionDataHolder = () => null;\n      attachComponentData(FieldExtensionDataHolder, FIELD_EXTENSION_KEY, options);\n      return FieldExtensionDataHolder;\n    }\n  };\n}\nconst ScaffolderFieldExtensions = () => null;\nattachComponentData(ScaffolderFieldExtensions, FIELD_EXTENSION_WRAPPER_KEY, true);\n\nconst registerComponentRouteRef = createExternalRouteRef({\n  id: \"register-component\",\n  optional: true\n});\nconst rootRouteRef = createRouteRef({\n  id: \"scaffolder\"\n});\nconst selectedTemplateRouteRef = createSubRouteRef({\n  id: \"scaffolder/selected-template\",\n  parent: rootRouteRef,\n  path: \"/templates/:templateName\"\n});\nconst scaffolderTaskRouteRef = createSubRouteRef({\n  id: \"scaffolder/task\",\n  parent: rootRouteRef,\n  path: \"/tasks/:taskId\"\n});\nconst actionsRouteRef = createSubRouteRef({\n  id: \"scaffolder/actions\",\n  parent: rootRouteRef,\n  path: \"/actions\"\n});\nconst editRouteRef = createSubRouteRef({\n  id: \"scaffolder/edit\",\n  parent: rootRouteRef,\n  path: \"/edit\"\n});\n\nconst scaffolderPlugin = createPlugin({\n  id: \"scaffolder\",\n  apis: [\n    createApiFactory({\n      api: scaffolderApiRef,\n      deps: {\n        discoveryApi: discoveryApiRef,\n        scmIntegrationsApi: scmIntegrationsApiRef,\n        fetchApi: fetchApiRef\n      },\n      factory: ({ discoveryApi, scmIntegrationsApi, fetchApi }) => new ScaffolderClient({\n        discoveryApi,\n        scmIntegrationsApi,\n        fetchApi\n      })\n    })\n  ],\n  routes: {\n    root: rootRouteRef\n  },\n  externalRoutes: {\n    registerComponent: registerComponentRouteRef\n  }\n});\nconst EntityPickerFieldExtension = scaffolderPlugin.provide(createScaffolderFieldExtension({\n  component: EntityPicker,\n  name: \"EntityPicker\"\n}));\nconst EntityNamePickerFieldExtension = scaffolderPlugin.provide(createScaffolderFieldExtension({\n  component: EntityNamePicker,\n  name: \"EntityNamePicker\",\n  validation: entityNamePickerValidation\n}));\nconst RepoUrlPickerFieldExtension = scaffolderPlugin.provide(createScaffolderFieldExtension({\n  component: RepoUrlPicker,\n  name: \"RepoUrlPicker\",\n  validation: repoPickerValidation\n}));\nconst OwnerPickerFieldExtension = scaffolderPlugin.provide(createScaffolderFieldExtension({\n  component: OwnerPicker,\n  name: \"OwnerPicker\"\n}));\nconst ScaffolderPage = scaffolderPlugin.provide(createRoutableExtension({\n  name: \"ScaffolderPage\",\n  component: () => import('./Router-d90b3098.esm.js').then((m) => m.Router),\n  mountPoint: rootRouteRef\n}));\nconst OwnedEntityPickerFieldExtension = scaffolderPlugin.provide(createScaffolderFieldExtension({\n  component: OwnedEntityPicker,\n  name: \"OwnedEntityPicker\"\n}));\nconst EntityTagsPickerFieldExtension = scaffolderPlugin.provide(createScaffolderFieldExtension({\n  component: EntityTagsPicker,\n  name: \"EntityTagsPicker\"\n}));\nconst NextScaffolderPage = scaffolderPlugin.provide(createRoutableExtension({\n  name: \"NextScaffolderPage\",\n  component: () => import('./index-948241af.esm.js').then((m) => m.Router),\n  mountPoint: rootRouteRef\n}));\n\nconst icon = /* @__PURE__ */ React.createElement(CheckBoxOutlineBlankIcon, {\n  fontSize: \"small\"\n});\nconst checkedIcon = /* @__PURE__ */ React.createElement(CheckBoxIcon, {\n  fontSize: \"small\"\n});\nconst TemplateTypePicker = () => {\n  const alertApi = useApi(alertApiRef);\n  const { error, loading, availableTypes, selectedTypes, setSelectedTypes } = useEntityTypeFilter();\n  if (loading)\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  if (!availableTypes)\n    return null;\n  if (error) {\n    alertApi.post({\n      message: `Failed to load entity types`,\n      severity: \"error\"\n    });\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(Box, {\n    pb: 1,\n    pt: 1\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"button\"\n  }, \"Categories\"), /* @__PURE__ */ React.createElement(Autocomplete$1, {\n    multiple: true,\n    \"aria-label\": \"Categories\",\n    options: availableTypes,\n    value: selectedTypes,\n    onChange: (_, value) => setSelectedTypes(value),\n    renderOption: (option, { selected }) => /* @__PURE__ */ React.createElement(FormControlLabel, {\n      control: /* @__PURE__ */ React.createElement(Checkbox, {\n        icon,\n        checkedIcon,\n        checked: selected\n      }),\n      label: capitalize(option)\n    }),\n    size: \"small\",\n    popupIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, {\n      \"data-testid\": \"categories-picker-expand\"\n    }),\n    renderInput: (params) => /* @__PURE__ */ React.createElement(TextField, {\n      ...params,\n      variant: \"outlined\"\n    })\n  }));\n};\n\nfunction reducer(draft, action) {\n  var _a, _b, _c;\n  switch (action.type) {\n    case \"INIT\": {\n      draft.steps = action.data.spec.steps.reduce((current, next) => {\n        current[next.id] = { status: \"open\", id: next.id };\n        return current;\n      }, {});\n      draft.stepLogs = action.data.spec.steps.reduce((current, next) => {\n        current[next.id] = [];\n        return current;\n      }, {});\n      draft.loading = false;\n      draft.error = void 0;\n      draft.completed = false;\n      draft.task = action.data;\n      return;\n    }\n    case \"LOGS\": {\n      const entries = action.data;\n      for (const entry of entries) {\n        const logLine = `${entry.createdAt} ${entry.body.message}`;\n        if (!entry.body.stepId || !((_a = draft.steps) == null ? void 0 : _a[entry.body.stepId])) {\n          continue;\n        }\n        const currentStepLog = (_b = draft.stepLogs) == null ? void 0 : _b[entry.body.stepId];\n        const currentStep = (_c = draft.steps) == null ? void 0 : _c[entry.body.stepId];\n        if (entry.body.status && entry.body.status !== currentStep.status) {\n          currentStep.status = entry.body.status;\n          if (currentStep.status === \"processing\") {\n            currentStep.startedAt = entry.createdAt;\n          }\n          if ([\"cancelled\", \"failed\", \"completed\"].includes(currentStep.status)) {\n            currentStep.endedAt = entry.createdAt;\n          }\n        }\n        currentStepLog == null ? void 0 : currentStepLog.push(logLine);\n      }\n      return;\n    }\n    case \"COMPLETED\": {\n      draft.completed = true;\n      draft.output = action.data.body.output;\n      return;\n    }\n    case \"ERROR\": {\n      draft.error = action.data;\n      draft.loading = false;\n      draft.completed = true;\n      return;\n    }\n    default:\n      return;\n  }\n}\nconst useTaskEventStream = (taskId) => {\n  const scaffolderApi = useApi(scaffolderApiRef);\n  const [state, dispatch] = useImmerReducer(reducer, {\n    loading: true,\n    completed: false,\n    stepLogs: {},\n    steps: {}\n  });\n  useEffect(() => {\n    let didCancel = false;\n    let subscription;\n    let logPusher;\n    scaffolderApi.getTask(taskId).then((task) => {\n      if (didCancel) {\n        return;\n      }\n      dispatch({ type: \"INIT\", data: task });\n      const observable = scaffolderApi.streamLogs({ taskId });\n      const collectedLogEvents = new Array();\n      function emitLogs() {\n        if (collectedLogEvents.length) {\n          const logs = collectedLogEvents.splice(0, collectedLogEvents.length);\n          dispatch({ type: \"LOGS\", data: logs });\n        }\n      }\n      logPusher = setInterval(emitLogs, 500);\n      subscription = observable.subscribe({\n        next: (event) => {\n          switch (event.type) {\n            case \"log\":\n              return collectedLogEvents.push(event);\n            case \"completion\":\n              emitLogs();\n              dispatch({ type: \"COMPLETED\", data: event });\n              return void 0;\n            default:\n              throw new Error(`Unhandled event type ${event.type} in observer`);\n          }\n        },\n        error: (error) => {\n          emitLogs();\n          dispatch({ type: \"ERROR\", data: error });\n        }\n      });\n    }, (error) => {\n      if (!didCancel) {\n        dispatch({ type: \"ERROR\", data: error });\n      }\n    });\n    return () => {\n      didCancel = true;\n      if (subscription) {\n        subscription.unsubscribe();\n      }\n      if (logPusher) {\n        clearInterval(logPusher);\n      }\n    };\n  }, [scaffolderApi, dispatch, taskId]);\n  return state;\n};\n\nconst useStyles$1 = makeStyles({\n  svgIcon: {\n    display: \"inline-block\",\n    \"& svg\": {\n      display: \"inline-block\",\n      fontSize: \"inherit\",\n      verticalAlign: \"baseline\"\n    }\n  }\n});\nconst IconLink = (props) => {\n  const { href, text, Icon, ...linkProps } = props;\n  const classes = useStyles$1();\n  return /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    direction: \"row\",\n    spacing: 1\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    component: \"div\",\n    className: classes.svgIcon\n  }, Icon ? /* @__PURE__ */ React.createElement(Icon, null) : /* @__PURE__ */ React.createElement(LanguageIcon, null))), /* @__PURE__ */ React.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React.createElement(Link, {\n    to: href,\n    ...linkProps\n  }, text || href)));\n};\n\nconst TaskPageLinks = ({ output }) => {\n  const { links = [] } = output;\n  const app = useApp();\n  const entityRoute = useRouteRef(entityRouteRef);\n  const iconResolver = (key) => {\n    var _a;\n    return key ? (_a = app.getSystemIcon(key)) != null ? _a : LanguageIcon : LanguageIcon;\n  };\n  return /* @__PURE__ */ React.createElement(Box, {\n    px: 3,\n    pb: 3\n  }, links.filter(({ url, entityRef }) => url || entityRef).map(({ url, entityRef, title, icon }) => {\n    if (entityRef) {\n      const entityName = parseEntityRef(entityRef);\n      const target = entityRoute(entityName);\n      return { title, icon, url: target };\n    }\n    return { title, icon, url };\n  }).map(({ url, title, icon }, i) => /* @__PURE__ */ React.createElement(IconLink, {\n    key: `output-link-${i}`,\n    href: url,\n    text: title != null ? title : url,\n    Icon: iconResolver(icon),\n    target: \"_blank\"\n  })));\n};\n\nconst humanizeDuration = require(\"humanize-duration\");\nconst useStyles = makeStyles$1((theme) => createStyles({\n  root: {\n    width: \"100%\"\n  },\n  button: {\n    marginBottom: theme.spacing(2),\n    marginLeft: theme.spacing(2)\n  },\n  actionsContainer: {\n    marginBottom: theme.spacing(2)\n  },\n  resetContainer: {\n    padding: theme.spacing(3)\n  },\n  labelWrapper: {\n    display: \"flex\",\n    flex: 1,\n    flexDirection: \"row\",\n    justifyContent: \"space-between\"\n  },\n  stepWrapper: {\n    width: \"100%\"\n  }\n}));\nconst StepTimeTicker = ({ step }) => {\n  const [time, setTime] = useState(\"\");\n  useInterval(() => {\n    if (!step.startedAt) {\n      setTime(\"\");\n      return;\n    }\n    const end = step.endedAt ? DateTime.fromISO(step.endedAt) : DateTime.local();\n    const startedAt = DateTime.fromISO(step.startedAt);\n    const formatted = Interval.fromDateTimes(startedAt, end).toDuration().valueOf();\n    setTime(humanizeDuration(formatted, { round: true }));\n  }, 1e3);\n  return /* @__PURE__ */ React.createElement(Typography$1, {\n    variant: \"caption\"\n  }, time);\n};\nconst useStepIconStyles = makeStyles$1((theme) => createStyles({\n  root: {\n    color: theme.palette.text.disabled,\n    display: \"flex\",\n    height: 22,\n    alignItems: \"center\"\n  },\n  completed: {\n    color: theme.palette.status.ok\n  },\n  error: {\n    color: theme.palette.status.error\n  }\n}));\nfunction TaskStepIconComponent(props) {\n  const classes = useStepIconStyles();\n  const { active, completed, error } = props;\n  const getMiddle = () => {\n    if (active) {\n      return /* @__PURE__ */ React.createElement(CircularProgress, {\n        size: \"24px\"\n      });\n    }\n    if (completed) {\n      return /* @__PURE__ */ React.createElement(Check, null);\n    }\n    if (error) {\n      return /* @__PURE__ */ React.createElement(Cancel, null);\n    }\n    return /* @__PURE__ */ React.createElement(FiberManualRecordIcon, null);\n  };\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: classNames(classes.root, {\n      [classes.completed]: completed,\n      [classes.error]: error\n    })\n  }, getMiddle());\n}\nconst TaskStatusStepper = memo(({\n  steps,\n  currentStepId,\n  onUserStepChange\n}) => {\n  const classes = useStyles();\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.root\n  }, /* @__PURE__ */ React.createElement(Stepper, {\n    activeStep: steps.findIndex((s) => s.id === currentStepId),\n    orientation: \"vertical\",\n    nonLinear: true\n  }, steps.map((step, index) => {\n    const isCompleted = step.status === \"completed\";\n    const isFailed = step.status === \"failed\";\n    const isActive = step.status === \"processing\";\n    const isSkipped = step.status === \"skipped\";\n    return /* @__PURE__ */ React.createElement(Step, {\n      key: String(index),\n      expanded: true\n    }, /* @__PURE__ */ React.createElement(StepButton, {\n      onClick: () => onUserStepChange(step.id)\n    }, /* @__PURE__ */ React.createElement(StepLabel, {\n      StepIconProps: {\n        completed: isCompleted,\n        error: isFailed,\n        active: isActive\n      },\n      StepIconComponent: TaskStepIconComponent,\n      className: classes.stepWrapper\n    }, /* @__PURE__ */ React.createElement(\"div\", {\n      className: classes.labelWrapper\n    }, /* @__PURE__ */ React.createElement(Typography$1, {\n      variant: \"subtitle2\"\n    }, step.name), isSkipped ? /* @__PURE__ */ React.createElement(Typography$1, {\n      variant: \"caption\"\n    }, \"Skipped\") : /* @__PURE__ */ React.createElement(StepTimeTicker, {\n      step\n    })))));\n  })));\n});\nconst hasLinks = ({ links = [] }) => links.length > 0;\nconst TaskPage = ({ loadingText }) => {\n  const classes = useStyles();\n  const navigate = useNavigate();\n  const rootPath = useRouteRef(rootRouteRef);\n  const templateRoute = useRouteRef(selectedTemplateRouteRef);\n  const [userSelectedStepId, setUserSelectedStepId] = useState(void 0);\n  const [lastActiveStepId, setLastActiveStepId] = useState(void 0);\n  const { taskId } = useParams();\n  const taskStream = useTaskEventStream(taskId);\n  const completed = taskStream.completed;\n  const steps = useMemo(() => {\n    var _a, _b;\n    return (_b = (_a = taskStream.task) == null ? void 0 : _a.spec.steps.map((step) => {\n      var _a2;\n      return {\n        ...step,\n        ...(_a2 = taskStream == null ? void 0 : taskStream.steps) == null ? void 0 : _a2[step.id]\n      };\n    })) != null ? _b : [];\n  }, [taskStream]);\n  useEffect(() => {\n    var _a;\n    const mostRecentFailedOrActiveStep = steps.find((step) => [\"failed\", \"processing\"].includes(step.status));\n    if (completed && !mostRecentFailedOrActiveStep) {\n      setLastActiveStepId((_a = steps[steps.length - 1]) == null ? void 0 : _a.id);\n      return;\n    }\n    setLastActiveStepId(mostRecentFailedOrActiveStep == null ? void 0 : mostRecentFailedOrActiveStep.id);\n  }, [steps, completed]);\n  const currentStepId = userSelectedStepId != null ? userSelectedStepId : lastActiveStepId;\n  const logAsString = useMemo(() => {\n    if (!currentStepId) {\n      return loadingText ? loadingText : \"Loading...\";\n    }\n    const log = taskStream.stepLogs[currentStepId];\n    if (!(log == null ? void 0 : log.length)) {\n      return \"Waiting for logs...\";\n    }\n    return log.join(\"\\n\");\n  }, [taskStream.stepLogs, currentStepId, loadingText]);\n  const taskNotFound = taskStream.completed === true && taskStream.loading === false && !taskStream.task;\n  const { output } = taskStream;\n  const handleStartOver = () => {\n    var _a, _b, _c;\n    if (!taskStream.task || !((_b = (_a = taskStream.task) == null ? void 0 : _a.spec.templateInfo) == null ? void 0 : _b.entityRef)) {\n      navigate(rootPath());\n      return;\n    }\n    const formData = taskStream.task.spec.parameters;\n    const { name } = parseEntityRef((_c = taskStream.task.spec.templateInfo) == null ? void 0 : _c.entityRef);\n    navigate(`${templateRoute({ templateName: name })}?${qs.stringify({\n      formData: JSON.stringify(formData)\n    })}`);\n  };\n  return /* @__PURE__ */ React.createElement(Page, {\n    themeId: \"home\"\n  }, /* @__PURE__ */ React.createElement(Header, {\n    pageTitleOverride: `Task ${taskId}`,\n    title: \"Task Activity\",\n    subtitle: `Activity for task: ${taskId}`\n  }), /* @__PURE__ */ React.createElement(Content, null, taskNotFound ? /* @__PURE__ */ React.createElement(ErrorPage, {\n    status: \"404\",\n    statusMessage: \"Task not found\",\n    additionalInfo: \"No task found with this ID\"\n  }) : /* @__PURE__ */ React.createElement(\"div\", null, /* @__PURE__ */ React.createElement(Grid$1, {\n    container: true\n  }, /* @__PURE__ */ React.createElement(Grid$1, {\n    item: true,\n    xs: 3\n  }, /* @__PURE__ */ React.createElement(Paper, null, /* @__PURE__ */ React.createElement(TaskStatusStepper, {\n    steps,\n    currentStepId,\n    onUserStepChange: setUserSelectedStepId\n  }), output && hasLinks(output) && /* @__PURE__ */ React.createElement(TaskPageLinks, {\n    output\n  }), /* @__PURE__ */ React.createElement(Button, {\n    className: classes.button,\n    onClick: handleStartOver,\n    disabled: !completed,\n    variant: \"contained\",\n    color: \"primary\"\n  }, \"Start Over\"))), /* @__PURE__ */ React.createElement(Grid$1, {\n    item: true,\n    xs: 9\n  }, !currentStepId && /* @__PURE__ */ React.createElement(Progress, null), /* @__PURE__ */ React.createElement(\"div\", {\n    style: { height: \"80vh\" }\n  }, /* @__PURE__ */ React.createElement(LogViewer, {\n    text: logAsString\n  })))))));\n};\n\nexport { useTemplateSecrets as A, EntityPicker as E, FIELD_EXTENSION_WRAPPER_KEY as F, NextScaffolderPage as N, OwnerPicker as O, RepoUrlPicker as R, SecretsContext as S, TemplateTypePicker as T, registerComponentRouteRef as a, scaffolderApiRef as b, scaffolderTaskRouteRef as c, FIELD_EXTENSION_KEY as d, SecretsContextProvider as e, actionsRouteRef as f, editRouteRef as g, TaskPage as h, EntityNamePicker as i, entityNamePickerValidation as j, EntityTagsPicker as k, repoPickerValidation as l, OwnedEntityPicker as m, ScaffolderClient as n, createScaffolderFieldExtension as o, ScaffolderFieldExtensions as p, EntityPickerFieldExtension as q, rootRouteRef as r, selectedTemplateRouteRef as s, EntityNamePickerFieldExtension as t, EntityTagsPickerFieldExtension as u, OwnerPickerFieldExtension as v, OwnedEntityPickerFieldExtension as w, RepoUrlPickerFieldExtension as x, ScaffolderPage as y, scaffolderPlugin as z };\n//# sourceMappingURL=index-76cc5591.esm.js.map\n","import { ConfigReader } from '@backstage/config';\nimport { createFetchApi, FetchMiddlewares, UrlPatternDiscovery, AlertApiForwarder, NoOpAnalyticsApi, ErrorAlerter, ErrorApiForwarder, UnhandledErrorForwarder, WebStorage, OAuthRequestManager, GoogleAuth, MicrosoftAuth, GithubAuth, OktaAuth, GitlabAuth, OneLoginAuth, BitbucketAuth, AtlassianAuth, createSpecializedApp, ApiProvider } from '@backstage/core-app-api';\nimport crossFetch, { Response } from 'cross-fetch';\nimport { AuthorizeResult } from '@backstage/plugin-permission-common';\nimport ObservableImpl from 'zen-observable';\nimport React from 'react';\nimport { MemoryRouter } from 'react-router';\nimport { Route } from 'react-router-dom';\nimport { lightTheme } from '@backstage/theme';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport { CssBaseline } from '@material-ui/core';\nimport MockIcon from '@material-ui/icons/AcUnit';\nimport { createApiFactory, discoveryApiRef, configApiRef, alertApiRef, analyticsApiRef, errorApiRef, storageApiRef, oauthRequestApiRef, googleAuthApiRef, microsoftAuthApiRef, githubAuthApiRef, oktaAuthApiRef, gitlabAuthApiRef, oneloginAuthApiRef, bitbucketAuthApiRef, atlassianAuthApiRef, createRouteRef, attachComponentData } from '@backstage/core-plugin-api';\nimport { act, render } from '@testing-library/react';\n\nclass MockAnalyticsApi {\n  constructor() {\n    this.events = [];\n  }\n  captureEvent(event) {\n    const { action, subject, value, attributes, context } = event;\n    this.events.push({\n      action,\n      subject,\n      context,\n      ...value !== void 0 ? { value } : {},\n      ...attributes !== void 0 ? { attributes } : {}\n    });\n  }\n  getEvents() {\n    return this.events;\n  }\n}\n\nclass MockConfigApi {\n  constructor(data) {\n    this.config = new ConfigReader(data);\n  }\n  has(key) {\n    return this.config.has(key);\n  }\n  keys() {\n    return this.config.keys();\n  }\n  get(key) {\n    return this.config.get(key);\n  }\n  getOptional(key) {\n    return this.config.getOptional(key);\n  }\n  getConfig(key) {\n    return this.config.getConfig(key);\n  }\n  getOptionalConfig(key) {\n    return this.config.getOptionalConfig(key);\n  }\n  getConfigArray(key) {\n    return this.config.getConfigArray(key);\n  }\n  getOptionalConfigArray(key) {\n    return this.config.getOptionalConfigArray(key);\n  }\n  getNumber(key) {\n    return this.config.getNumber(key);\n  }\n  getOptionalNumber(key) {\n    return this.config.getOptionalNumber(key);\n  }\n  getBoolean(key) {\n    return this.config.getBoolean(key);\n  }\n  getOptionalBoolean(key) {\n    return this.config.getOptionalBoolean(key);\n  }\n  getString(key) {\n    return this.config.getString(key);\n  }\n  getOptionalString(key) {\n    return this.config.getOptionalString(key);\n  }\n  getStringArray(key) {\n    return this.config.getStringArray(key);\n  }\n  getOptionalStringArray(key) {\n    return this.config.getOptionalStringArray(key);\n  }\n}\n\nconst nullObservable = {\n  subscribe: () => ({ unsubscribe: () => {\n  }, closed: true }),\n  [Symbol.observable]() {\n    return this;\n  }\n};\nclass MockErrorApi {\n  constructor(options = {}) {\n    this.options = options;\n    this.errors = new Array();\n    this.waiters = /* @__PURE__ */ new Set();\n  }\n  post(error, context) {\n    if (this.options.collect) {\n      this.errors.push({ error, context });\n      for (const waiter of this.waiters) {\n        if (waiter.pattern.test(error.message)) {\n          this.waiters.delete(waiter);\n          waiter.resolve({ error, context });\n        }\n      }\n      return;\n    }\n    throw new Error(`MockErrorApi received unexpected error, ${error}`);\n  }\n  error$() {\n    return nullObservable;\n  }\n  getErrors() {\n    return this.errors;\n  }\n  waitForError(pattern, timeoutMs = 2e3) {\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        reject(new Error(\"Timed out waiting for error\"));\n      }, timeoutMs);\n      this.waiters.add({ resolve, pattern });\n    });\n  }\n}\n\nclass MockFetchApi {\n  constructor(options) {\n    this.implementation = build(options);\n  }\n  get fetch() {\n    return this.implementation.fetch;\n  }\n}\nfunction build(options) {\n  return createFetchApi({\n    baseImplementation: baseImplementation(options),\n    middleware: [\n      resolvePluginProtocol(options),\n      injectIdentityAuth(options)\n    ].filter((x) => Boolean(x))\n  });\n}\nfunction baseImplementation(options) {\n  const implementation = options == null ? void 0 : options.baseImplementation;\n  if (!implementation) {\n    return crossFetch;\n  } else if (implementation === \"none\") {\n    return () => Promise.resolve(new Response());\n  }\n  return implementation;\n}\nfunction resolvePluginProtocol(allOptions) {\n  const options = allOptions == null ? void 0 : allOptions.resolvePluginProtocol;\n  if (!options) {\n    return void 0;\n  }\n  return FetchMiddlewares.resolvePluginProtocol({\n    discoveryApi: options.discoveryApi\n  });\n}\nfunction injectIdentityAuth(allOptions) {\n  const options = allOptions == null ? void 0 : allOptions.injectIdentityAuth;\n  if (!options) {\n    return void 0;\n  }\n  const identityApi = \"token\" in options ? { getCredentials: async () => ({ token: options.token }) } : options.identityApi;\n  return FetchMiddlewares.injectIdentityAuth({\n    identityApi,\n    allowUrl: () => true\n  });\n}\n\nclass MockPermissionApi {\n  constructor(requestHandler = () => AuthorizeResult.ALLOW) {\n    this.requestHandler = requestHandler;\n  }\n  async authorize(request) {\n    return { result: this.requestHandler(request) };\n  }\n}\n\nclass MockStorageApi {\n  constructor(namespace, bucketStorageApis, data) {\n    this.subscribers = /* @__PURE__ */ new Set();\n    this.observable = new ObservableImpl((subscriber) => {\n      this.subscribers.add(subscriber);\n      return () => {\n        this.subscribers.delete(subscriber);\n      };\n    });\n    this.namespace = namespace;\n    this.bucketStorageApis = bucketStorageApis;\n    this.data = { ...data };\n  }\n  static create(data) {\n    return new MockStorageApi(\"\", /* @__PURE__ */ new Map(), data);\n  }\n  forBucket(name) {\n    if (!this.bucketStorageApis.has(name)) {\n      this.bucketStorageApis.set(name, new MockStorageApi(`${this.namespace}/${name}`, this.bucketStorageApis, this.data));\n    }\n    return this.bucketStorageApis.get(name);\n  }\n  snapshot(key) {\n    if (this.data.hasOwnProperty(this.getKeyName(key))) {\n      const data = this.data[this.getKeyName(key)];\n      return {\n        key,\n        presence: \"present\",\n        value: data\n      };\n    }\n    return {\n      key,\n      presence: \"absent\",\n      value: void 0\n    };\n  }\n  async set(key, data) {\n    const serialized = JSON.parse(JSON.stringify(data), (_key, value) => {\n      if (typeof value === \"object\" && value !== null) {\n        Object.freeze(value);\n      }\n      return value;\n    });\n    this.data[this.getKeyName(key)] = serialized;\n    this.notifyChanges({\n      key,\n      presence: \"present\",\n      value: serialized\n    });\n  }\n  async remove(key) {\n    delete this.data[this.getKeyName(key)];\n    this.notifyChanges({\n      key,\n      presence: \"absent\",\n      value: void 0\n    });\n  }\n  observe$(key) {\n    return this.observable.filter(({ key: messageKey }) => messageKey === key);\n  }\n  getKeyName(key) {\n    return `${this.namespace}/${encodeURIComponent(key)}`;\n  }\n  notifyChanges(message) {\n    for (const subscription of this.subscribers) {\n      subscription.next(message);\n    }\n  }\n}\n\nfunction mockBreakpoint(options) {\n  Object.defineProperty(window, \"matchMedia\", {\n    writable: true,\n    value: jest.fn().mockImplementation((query) => {\n      var _a;\n      return {\n        matches: (_a = options.matches) != null ? _a : false,\n        media: query,\n        onchange: null,\n        addListener: jest.fn(),\n        removeListener: jest.fn(),\n        addEventListener: jest.fn(),\n        removeEventListener: jest.fn(),\n        dispatchEvent: jest.fn()\n      };\n    })\n  });\n}\n\nasync function renderWithEffects(nodes) {\n  let value;\n  await act(async () => {\n    value = render(nodes);\n  });\n  return value;\n}\n\nconst defaultApis = [\n  createApiFactory({\n    api: discoveryApiRef,\n    deps: { configApi: configApiRef },\n    factory: ({ configApi }) => UrlPatternDiscovery.compile(`${configApi.getString(\"backend.baseUrl\")}/api/{{ pluginId }}`)\n  }),\n  createApiFactory(alertApiRef, new AlertApiForwarder()),\n  createApiFactory(analyticsApiRef, new NoOpAnalyticsApi()),\n  createApiFactory({\n    api: errorApiRef,\n    deps: { alertApi: alertApiRef },\n    factory: ({ alertApi }) => {\n      const errorApi = new ErrorAlerter(alertApi, new ErrorApiForwarder());\n      UnhandledErrorForwarder.forward(errorApi, { hidden: false });\n      return errorApi;\n    }\n  }),\n  createApiFactory({\n    api: storageApiRef,\n    deps: { errorApi: errorApiRef },\n    factory: ({ errorApi }) => WebStorage.create({ errorApi })\n  }),\n  createApiFactory(oauthRequestApiRef, new OAuthRequestManager()),\n  createApiFactory({\n    api: googleAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => GoogleAuth.create({\n      discoveryApi,\n      oauthRequestApi,\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: microsoftAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => MicrosoftAuth.create({\n      discoveryApi,\n      oauthRequestApi,\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: githubAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => GithubAuth.create({\n      discoveryApi,\n      oauthRequestApi,\n      defaultScopes: [\"read:user\"],\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: oktaAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => OktaAuth.create({\n      discoveryApi,\n      oauthRequestApi,\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: gitlabAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => GitlabAuth.create({\n      discoveryApi,\n      oauthRequestApi,\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: oneloginAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => OneLoginAuth.create({\n      discoveryApi,\n      oauthRequestApi,\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: bitbucketAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => BitbucketAuth.create({\n      discoveryApi,\n      oauthRequestApi,\n      defaultScopes: [\"team\"],\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: atlassianAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => {\n      return AtlassianAuth.create({\n        discoveryApi,\n        oauthRequestApi,\n        environment: configApi.getOptionalString(\"auth.environment\")\n      });\n    }\n  })\n];\n\nconst mockApis = [\n  createApiFactory(errorApiRef, new MockErrorApi()),\n  createApiFactory(storageApiRef, MockStorageApi.create())\n];\n\nconst mockIcons = {\n  \"kind:api\": MockIcon,\n  \"kind:component\": MockIcon,\n  \"kind:domain\": MockIcon,\n  \"kind:group\": MockIcon,\n  \"kind:location\": MockIcon,\n  \"kind:system\": MockIcon,\n  \"kind:user\": MockIcon,\n  brokenImage: MockIcon,\n  catalog: MockIcon,\n  scaffolder: MockIcon,\n  techdocs: MockIcon,\n  search: MockIcon,\n  chat: MockIcon,\n  dashboard: MockIcon,\n  docs: MockIcon,\n  email: MockIcon,\n  github: MockIcon,\n  group: MockIcon,\n  help: MockIcon,\n  user: MockIcon,\n  warning: MockIcon\n};\nconst ErrorBoundaryFallback = ({ error }) => {\n  throw new Error(`Reached ErrorBoundaryFallback Page with error, ${error}`);\n};\nconst NotFoundErrorPage = () => {\n  throw new Error(\"Reached NotFound Page\");\n};\nconst BootErrorPage = ({ step, error }) => {\n  throw new Error(`Reached BootError Page at step ${step} with error ${error}`);\n};\nconst Progress = () => /* @__PURE__ */ React.createElement(\"div\", {\n  \"data-testid\": \"progress\"\n});\nfunction isExternalRouteRef(routeRef) {\n  return String(routeRef).includes(\"{type=external,\");\n}\nfunction wrapInTestApp(Component, options = {}) {\n  var _a;\n  const { routeEntries = [\"/\"] } = options;\n  const boundRoutes = /* @__PURE__ */ new Map();\n  const app = createSpecializedApp({\n    apis: mockApis,\n    defaultApis,\n    configLoader: false,\n    components: {\n      Progress,\n      BootErrorPage,\n      NotFoundErrorPage,\n      ErrorBoundaryFallback,\n      Router: ({ children }) => /* @__PURE__ */ React.createElement(MemoryRouter, {\n        initialEntries: routeEntries,\n        children\n      })\n    },\n    icons: mockIcons,\n    plugins: [],\n    themes: [\n      {\n        id: \"light\",\n        title: \"Test App Theme\",\n        variant: \"light\",\n        Provider: ({ children }) => /* @__PURE__ */ React.createElement(ThemeProvider, {\n          theme: lightTheme\n        }, /* @__PURE__ */ React.createElement(CssBaseline, null, children))\n      }\n    ],\n    bindRoutes: ({ bind }) => {\n      for (const [externalRef, absoluteRef] of boundRoutes) {\n        bind({ ref: externalRef }, {\n          ref: absoluteRef\n        });\n      }\n    }\n  });\n  let wrappedElement;\n  if (Component instanceof Function) {\n    wrappedElement = /* @__PURE__ */ React.createElement(Component, null);\n  } else {\n    wrappedElement = Component;\n  }\n  const routeElements = Object.entries((_a = options.mountedRoutes) != null ? _a : {}).map(([path, routeRef]) => {\n    const Page = () => /* @__PURE__ */ React.createElement(\"div\", null, \"Mounted at \", path);\n    if (isExternalRouteRef(routeRef)) {\n      const absoluteRef = createRouteRef({ id: \"id\" });\n      boundRoutes.set(routeRef, absoluteRef);\n      attachComponentData(Page, \"core.mountPoint\", absoluteRef);\n    } else {\n      attachComponentData(Page, \"core.mountPoint\", routeRef);\n    }\n    return /* @__PURE__ */ React.createElement(Route, {\n      key: path,\n      path,\n      element: /* @__PURE__ */ React.createElement(Page, null)\n    });\n  });\n  const AppProvider = app.getProvider();\n  const AppRouter = app.getRouter();\n  return /* @__PURE__ */ React.createElement(AppProvider, null, /* @__PURE__ */ React.createElement(AppRouter, null, routeElements, /* @__PURE__ */ React.createElement(Route, {\n    path: \"*\",\n    element: wrappedElement\n  })));\n}\nasync function renderInTestApp(Component, options = {}) {\n  return renderWithEffects(wrapInTestApp(Component, options));\n}\n\nfunction setupRequestMockHandlers(worker) {\n  beforeAll(() => worker.listen({ onUnhandledRequest: \"error\" }));\n  afterAll(() => worker.close());\n  afterEach(() => worker.resetHandlers());\n}\n\nconst allCategories = [\"log\", \"warn\", \"error\"];\nfunction withLogCollector(logsToCollect, callback) {\n  const oneArg = !callback;\n  const actualCallback = oneArg ? logsToCollect : callback;\n  const categories = oneArg ? allCategories : logsToCollect;\n  const logs = {\n    log: new Array(),\n    warn: new Array(),\n    error: new Array()\n  };\n  const origLog = console.log;\n  const origWarn = console.warn;\n  const origError = console.error;\n  if (categories.includes(\"log\")) {\n    console.log = (message) => {\n      logs.log.push(message);\n    };\n  }\n  if (categories.includes(\"warn\")) {\n    console.warn = (message) => {\n      logs.warn.push(message);\n    };\n  }\n  if (categories.includes(\"error\")) {\n    console.error = (message) => {\n      logs.error.push(message);\n    };\n  }\n  const restore = () => {\n    console.log = origLog;\n    console.warn = origWarn;\n    console.error = origError;\n  };\n  try {\n    const ret = actualCallback();\n    if (!ret || !ret.then) {\n      restore();\n      return logs;\n    }\n    return ret.then(() => {\n      restore();\n      return logs;\n    }, (error) => {\n      restore();\n      throw error;\n    });\n  } catch (error) {\n    restore();\n    throw error;\n  }\n}\n\nclass TestApiRegistry {\n  constructor(apis) {\n    this.apis = apis;\n  }\n  static from(...apis) {\n    return new TestApiRegistry(new Map(apis.map(([api, impl]) => [api.id, impl])));\n  }\n  get(api) {\n    return this.apis.get(api.id);\n  }\n}\nconst TestApiProvider = (props) => {\n  return /* @__PURE__ */ React.createElement(ApiProvider, {\n    apis: TestApiRegistry.from(...props.apis),\n    children: props.children\n  });\n};\n\nexport { MockAnalyticsApi, MockConfigApi, MockErrorApi, MockFetchApi, MockPermissionApi, MockStorageApi, TestApiProvider, TestApiRegistry, mockBreakpoint, renderInTestApp, renderWithEffects, setupRequestMockHandlers, withLogCollector, wrapInTestApp };\n//# sourceMappingURL=index.esm.js.map\n","import { createApiRef, useApi, AnalyticsContext } from '@backstage/core-plugin-api';\nimport { createVersionedContext, createVersionedValueMap } from '@backstage/version-bridge';\nimport React, { useContext, useState, useCallback, useEffect } from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport usePrevious from 'react-use/lib/usePrevious';\nimport { ApiProvider } from '@backstage/core-app-api';\nimport { TestApiRegistry } from '@backstage/test-utils';\n\nconst searchApiRef = createApiRef({\n  id: \"plugin.search.queryservice\"\n});\n\nconst SearchContext = createVersionedContext(\"search-context\");\nconst useSearch = () => {\n  const context = useContext(SearchContext);\n  if (!context) {\n    throw new Error(\"useSearch must be used within a SearchContextProvider\");\n  }\n  const value = context.atVersion(1);\n  if (!value) {\n    throw new Error(\"No SearchContext v1 found\");\n  }\n  return value;\n};\nconst searchInitialState = {\n  term: \"\",\n  pageCursor: void 0,\n  filters: {},\n  types: []\n};\nconst SearchContextProvider = (props) => {\n  var _a, _b, _c, _d;\n  const { initialState = searchInitialState, children } = props;\n  const searchApi = useApi(searchApiRef);\n  const [pageCursor, setPageCursor] = useState(initialState.pageCursor);\n  const [filters, setFilters] = useState(initialState.filters);\n  const [term, setTerm] = useState(initialState.term);\n  const [types, setTypes] = useState(initialState.types);\n  const prevTerm = usePrevious(term);\n  const result = useAsync(() => searchApi.query({\n    term,\n    filters,\n    pageCursor,\n    types\n  }), [term, filters, types, pageCursor]);\n  const hasNextPage = !result.loading && !result.error && ((_a = result.value) == null ? void 0 : _a.nextPageCursor);\n  const hasPreviousPage = !result.loading && !result.error && ((_b = result.value) == null ? void 0 : _b.previousPageCursor);\n  const fetchNextPage = useCallback(() => {\n    var _a2;\n    setPageCursor((_a2 = result.value) == null ? void 0 : _a2.nextPageCursor);\n  }, [(_c = result.value) == null ? void 0 : _c.nextPageCursor]);\n  const fetchPreviousPage = useCallback(() => {\n    var _a2;\n    setPageCursor((_a2 = result.value) == null ? void 0 : _a2.previousPageCursor);\n  }, [(_d = result.value) == null ? void 0 : _d.previousPageCursor]);\n  useEffect(() => {\n    if (term && prevTerm && term !== prevTerm) {\n      setPageCursor(void 0);\n    }\n  }, [term, prevTerm, initialState.pageCursor]);\n  const value = {\n    result,\n    filters,\n    setFilters,\n    term,\n    setTerm,\n    types,\n    setTypes,\n    pageCursor,\n    setPageCursor,\n    fetchNextPage: hasNextPage ? fetchNextPage : void 0,\n    fetchPreviousPage: hasPreviousPage ? fetchPreviousPage : void 0\n  };\n  const versionedValue = createVersionedValueMap({ 1: value });\n  return /* @__PURE__ */ React.createElement(AnalyticsContext, {\n    attributes: { searchTypes: types.sort().join(\",\") }\n  }, /* @__PURE__ */ React.createElement(SearchContext.Provider, {\n    value: versionedValue,\n    children\n  }));\n};\n\nfunction SearchApiProviderForStorybook(props) {\n  const { mockedResults, children } = props;\n  const query = () => Promise.resolve(mockedResults || {});\n  const apiRegistry = TestApiRegistry.from([searchApiRef, { query }]);\n  return /* @__PURE__ */ React.createElement(ApiProvider, {\n    apis: apiRegistry,\n    children\n  });\n}\nconst SearchContextProviderForStorybook = (props) => {\n  return /* @__PURE__ */ React.createElement(SearchApiProviderForStorybook, {\n    ...props\n  }, /* @__PURE__ */ React.createElement(SearchContextProvider, {\n    children: props.children\n  }));\n};\n\nexport { SearchApiProviderForStorybook, SearchContextProvider, SearchContextProviderForStorybook, searchApiRef, useSearch };\n//# sourceMappingURL=index.esm.js.map\n","import React, { useEffect, useState, useCallback, useRef, Fragment, cloneElement } from 'react';\nimport FilterListIcon from '@material-ui/icons/FilterList';\nimport { makeStyles, IconButton, Typography, Card, CardHeader, Button, Divider, CardContent, Select, MenuItem, List, ListItem, Checkbox, ListItemText, InputBase, InputAdornment, TextField, Chip, FormControl, FormLabel, FormControlLabel, InputLabel, ListItemIcon, Box, Dialog, useTheme, DialogTitle, Paper, DialogContent, Grid, DialogActions, Accordion, AccordionSummary, AccordionDetails, Tabs, Tab } from '@material-ui/core';\nimport useDebounce from 'react-use/lib/useDebounce';\nimport { useAnalytics, useApi, configApiRef, createRouteRef, createPlugin, createApiFactory, discoveryApiRef, identityApiRef, createRoutableExtension, createComponentExtension, useRouteRef } from '@backstage/core-plugin-api';\nimport SearchIcon from '@material-ui/icons/Search';\nimport ClearButton from '@material-ui/icons/Clear';\nimport { useSearch, SearchContextProvider, searchApiRef } from '@backstage/plugin-search-react';\nimport { Autocomplete, Alert } from '@material-ui/lab';\nimport useAsyncFn from 'react-use/lib/useAsyncFn';\nimport LaunchIcon from '@material-ui/icons/Launch';\nimport { makeStyles as makeStyles$1 } from '@material-ui/core/styles';\nimport { Link, Progress, ResponseErrorPanel, EmptyState, useContent, Table, useQueryParamState, Page, Header, Content, SidebarSearchField } from '@backstage/core-components';\nimport TextTruncate from 'react-text-truncate';\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\nimport { ResponseError } from '@backstage/errors';\nimport qs from 'qs';\nimport usePrevious from 'react-use/lib/usePrevious';\nimport { useOutlet, useLocation } from 'react-router';\nimport InputBase$1 from '@material-ui/core/InputBase';\nimport IconButton$1 from '@material-ui/core/IconButton';\nimport useAsync from 'react-use/lib/useAsync';\nimport { catalogApiRef } from '@backstage/plugin-catalog-react';\nimport { DEFAULT_NAMESPACE } from '@backstage/catalog-model';\nimport useEffectOnce from 'react-use/lib/useEffectOnce';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport AllIcon from '@material-ui/icons/FontDownload';\nimport { useNavigate } from 'react-router-dom';\n\nconst useStyles$b = makeStyles((theme) => ({\n  filters: {\n    width: \"250px\",\n    display: \"flex\"\n  },\n  icon: {\n    margin: theme.spacing(-1, 0, 0, 0)\n  }\n}));\nconst FiltersButton$1 = ({\n  numberOfSelectedFilters,\n  handleToggleFilters\n}) => {\n  const classes = useStyles$b();\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.filters\n  }, /* @__PURE__ */ React.createElement(IconButton, {\n    className: classes.icon,\n    \"aria-label\": \"settings\",\n    onClick: handleToggleFilters\n  }, /* @__PURE__ */ React.createElement(FilterListIcon, null)), /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"h6\"\n  }, \"Filters (\", numberOfSelectedFilters ? numberOfSelectedFilters : 0, \")\"));\n};\n\nconst useStyles$a = makeStyles((theme) => ({\n  filters: {\n    background: \"transparent\",\n    boxShadow: \"0px 0px 0px 0px\"\n  },\n  checkbox: {\n    padding: theme.spacing(0, 1, 0, 1)\n  },\n  dropdown: {\n    width: \"100%\"\n  }\n}));\nconst Filters$1 = ({\n  filters,\n  filterOptions,\n  resetFilters,\n  updateSelected,\n  updateChecked\n}) => {\n  const classes = useStyles$a();\n  return /* @__PURE__ */ React.createElement(Card, {\n    className: classes.filters\n  }, /* @__PURE__ */ React.createElement(CardHeader, {\n    title: /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"h6\"\n    }, \"Filters\"),\n    action: /* @__PURE__ */ React.createElement(Button, {\n      color: \"primary\",\n      onClick: () => resetFilters()\n    }, \"CLEAR ALL\")\n  }), /* @__PURE__ */ React.createElement(Divider, null), filterOptions.kind.length === 0 && filterOptions.lifecycle.length === 0 && /* @__PURE__ */ React.createElement(CardContent, null, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"subtitle2\"\n  }, \"Filters cannot be applied to available results\")), filterOptions.kind.length > 0 && /* @__PURE__ */ React.createElement(CardContent, null, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"subtitle2\"\n  }, \"Kind\"), /* @__PURE__ */ React.createElement(Select, {\n    id: \"outlined-select\",\n    onChange: (e) => {\n      var _a;\n      return updateSelected((_a = e == null ? void 0 : e.target) == null ? void 0 : _a.value);\n    },\n    variant: \"outlined\",\n    className: classes.dropdown,\n    value: filters.selected\n  }, filterOptions.kind.map((filter) => /* @__PURE__ */ React.createElement(MenuItem, {\n    selected: filter === \"\",\n    dense: true,\n    key: filter,\n    value: filter\n  }, filter)))), filterOptions.lifecycle.length > 0 && /* @__PURE__ */ React.createElement(CardContent, null, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"subtitle2\"\n  }, \"Lifecycle\"), /* @__PURE__ */ React.createElement(List, {\n    disablePadding: true,\n    dense: true\n  }, filterOptions.lifecycle.map((filter) => /* @__PURE__ */ React.createElement(ListItem, {\n    key: filter,\n    dense: true,\n    button: true,\n    onClick: () => updateChecked(filter)\n  }, /* @__PURE__ */ React.createElement(Checkbox, {\n    edge: \"start\",\n    disableRipple: true,\n    className: classes.checkbox,\n    color: \"primary\",\n    checked: filters.checked.includes(filter),\n    tabIndex: -1,\n    value: filter,\n    name: filter\n  }), /* @__PURE__ */ React.createElement(ListItemText, {\n    id: filter,\n    primary: filter\n  }))))));\n};\n\nconst TrackSearch = ({ children }) => {\n  const analytics = useAnalytics();\n  const { term } = useSearch();\n  useEffect(() => {\n    if (term) {\n      analytics.captureEvent(\"search\", term);\n    }\n  }, [analytics, term]);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n};\n\nconst SearchBarBase = ({\n  onChange,\n  onKeyDown,\n  onSubmit,\n  debounceTime = 200,\n  clearButton = true,\n  fullWidth = true,\n  value: defaultValue,\n  inputProps: defaultInputProps = {},\n  endAdornment: defaultEndAdornment,\n  ...props\n}) => {\n  const configApi = useApi(configApiRef);\n  const [value, setValue] = useState(defaultValue);\n  const hasSearchContext = useSearch();\n  useEffect(() => {\n    setValue((prevValue) => prevValue !== defaultValue ? defaultValue : prevValue);\n  }, [defaultValue]);\n  useDebounce(() => onChange(value), debounceTime, [value]);\n  const handleChange = useCallback((e) => {\n    setValue(e.target.value);\n  }, [setValue]);\n  const handleKeyDown = useCallback((e) => {\n    if (onKeyDown)\n      onKeyDown(e);\n    if (onSubmit && e.key === \"Enter\") {\n      onSubmit();\n    }\n  }, [onKeyDown, onSubmit]);\n  const handleClear = useCallback(() => {\n    onChange(\"\");\n  }, [onChange]);\n  const placeholder = `Search in ${configApi.getOptionalString(\"app.title\") || \"Backstage\"}`;\n  const startAdornment = /* @__PURE__ */ React.createElement(InputAdornment, {\n    position: \"start\"\n  }, /* @__PURE__ */ React.createElement(IconButton, {\n    \"aria-label\": \"Query\",\n    disabled: true\n  }, /* @__PURE__ */ React.createElement(SearchIcon, null)));\n  const endAdornment = /* @__PURE__ */ React.createElement(InputAdornment, {\n    position: \"end\"\n  }, /* @__PURE__ */ React.createElement(IconButton, {\n    \"aria-label\": \"Clear\",\n    onClick: handleClear\n  }, /* @__PURE__ */ React.createElement(ClearButton, null)));\n  const searchBar = /* @__PURE__ */ React.createElement(TrackSearch, null, /* @__PURE__ */ React.createElement(InputBase, {\n    \"data-testid\": \"search-bar-next\",\n    value,\n    placeholder,\n    startAdornment,\n    endAdornment: clearButton ? endAdornment : defaultEndAdornment,\n    inputProps: { \"aria-label\": \"Search\", ...defaultInputProps },\n    fullWidth,\n    onChange: handleChange,\n    onKeyDown: handleKeyDown,\n    ...props\n  }));\n  return hasSearchContext ? searchBar : /* @__PURE__ */ React.createElement(SearchContextProvider, null, searchBar);\n};\nconst SearchBar$1 = ({ onChange, ...props }) => {\n  const { term, setTerm } = useSearch();\n  const handleChange = useCallback((newValue) => {\n    if (onChange) {\n      onChange(newValue);\n    } else {\n      setTerm(newValue);\n    }\n  }, [onChange, setTerm]);\n  return /* @__PURE__ */ React.createElement(SearchBarBase, {\n    value: term,\n    onChange: handleChange,\n    ...props\n  });\n};\n\nconst useAsyncFilterValues = (fn, inputValue, defaultValues = [], debounce = 250) => {\n  const valuesMemo = useRef({});\n  const definiteFn = fn || (() => Promise.resolve([]));\n  const [state, callback] = useAsyncFn(definiteFn, [inputValue], {\n    loading: true\n  });\n  useDebounce(() => {\n    if (valuesMemo.current[inputValue] === void 0) {\n      valuesMemo.current[inputValue] = callback(inputValue).then((values) => {\n        valuesMemo.current[inputValue] = values;\n        return values;\n      });\n    }\n  }, debounce, [callback, inputValue]);\n  if (defaultValues.length) {\n    return {\n      loading: false,\n      value: defaultValues\n    };\n  }\n  const possibleValue = valuesMemo.current[inputValue];\n  if (Array.isArray(possibleValue)) {\n    return {\n      loading: false,\n      value: possibleValue\n    };\n  }\n  return state;\n};\nconst useDefaultFilterValue = (name, defaultValue) => {\n  const { setFilters } = useSearch();\n  useEffect(() => {\n    if (defaultValue && [defaultValue].flat().length > 0) {\n      setFilters((prevFilters) => ({\n        ...prevFilters,\n        [name]: defaultValue\n      }));\n    }\n  }, []);\n};\n\nconst AutocompleteFilter = (props) => {\n  const {\n    className,\n    defaultValue,\n    name,\n    values: givenValues,\n    valuesDebounceMs,\n    label,\n    filterSelectedOptions,\n    limitTags,\n    multiple\n  } = props;\n  const [inputValue, setInputValue] = useState(\"\");\n  useDefaultFilterValue(name, defaultValue);\n  const asyncValues = typeof givenValues === \"function\" ? givenValues : void 0;\n  const defaultValues = typeof givenValues === \"function\" ? void 0 : givenValues;\n  const { value: values, loading } = useAsyncFilterValues(asyncValues, inputValue, defaultValues, valuesDebounceMs);\n  const { filters, setFilters } = useSearch();\n  const filterValue = filters[name] || (multiple ? [] : null);\n  const handleChange = (_, newValue) => {\n    setFilters((prevState) => {\n      const { [name]: filter, ...others } = prevState;\n      if (newValue) {\n        return { ...others, [name]: newValue };\n      }\n      return { ...others };\n    });\n  };\n  const renderInput = (params) => /* @__PURE__ */ React.createElement(TextField, {\n    ...params,\n    name: \"search\",\n    variant: \"outlined\",\n    label,\n    fullWidth: true\n  });\n  const renderTags = (tagValue, getTagProps) => tagValue.map((option, index) => /* @__PURE__ */ React.createElement(Chip, {\n    label: option,\n    color: \"primary\",\n    ...getTagProps({ index })\n  }));\n  return /* @__PURE__ */ React.createElement(Autocomplete, {\n    filterSelectedOptions,\n    limitTags,\n    multiple,\n    className,\n    id: `${multiple ? \"multi-\" : \"\"}select-filter-${name}--select`,\n    options: values || [],\n    loading,\n    value: filterValue,\n    onChange: handleChange,\n    onInputChange: (_, newValue) => setInputValue(newValue),\n    renderInput,\n    renderTags\n  });\n};\n\nconst useStyles$9 = makeStyles({\n  label: {\n    textTransform: \"capitalize\"\n  }\n});\nconst CheckboxFilter = (props) => {\n  const {\n    className,\n    defaultValue,\n    label,\n    name,\n    values: givenValues = [],\n    valuesDebounceMs\n  } = props;\n  const classes = useStyles$9();\n  const { filters, setFilters } = useSearch();\n  useDefaultFilterValue(name, defaultValue);\n  const asyncValues = typeof givenValues === \"function\" ? givenValues : void 0;\n  const defaultValues = typeof givenValues === \"function\" ? void 0 : givenValues;\n  const { value: values = [], loading } = useAsyncFilterValues(asyncValues, \"\", defaultValues, valuesDebounceMs);\n  const handleChange = (e) => {\n    const {\n      target: { value, checked }\n    } = e;\n    setFilters((prevFilters) => {\n      const { [name]: filter, ...others } = prevFilters;\n      const rest = (filter || []).filter((i) => i !== value);\n      const items = checked ? [...rest, value] : rest;\n      return items.length ? { ...others, [name]: items } : others;\n    });\n  };\n  return /* @__PURE__ */ React.createElement(FormControl, {\n    className,\n    disabled: loading,\n    fullWidth: true,\n    \"data-testid\": \"search-checkboxfilter-next\"\n  }, label ? /* @__PURE__ */ React.createElement(FormLabel, {\n    className: classes.label\n  }, label) : null, values.map((value) => {\n    var _a;\n    return /* @__PURE__ */ React.createElement(FormControlLabel, {\n      key: value,\n      control: /* @__PURE__ */ React.createElement(Checkbox, {\n        color: \"primary\",\n        tabIndex: -1,\n        inputProps: { \"aria-labelledby\": value },\n        value,\n        name: value,\n        onChange: handleChange,\n        checked: ((_a = filters[name]) != null ? _a : []).includes(value)\n      }),\n      label: value\n    });\n  }));\n};\nconst SelectFilter = (props) => {\n  const {\n    className,\n    defaultValue,\n    label,\n    name,\n    values: givenValues,\n    valuesDebounceMs\n  } = props;\n  const classes = useStyles$9();\n  useDefaultFilterValue(name, defaultValue);\n  const asyncValues = typeof givenValues === \"function\" ? givenValues : void 0;\n  const defaultValues = typeof givenValues === \"function\" ? void 0 : givenValues;\n  const { value: values = [], loading } = useAsyncFilterValues(asyncValues, \"\", defaultValues, valuesDebounceMs);\n  const { filters, setFilters } = useSearch();\n  const handleChange = (e) => {\n    const {\n      target: { value }\n    } = e;\n    setFilters((prevFilters) => {\n      const { [name]: filter, ...others } = prevFilters;\n      return value ? { ...others, [name]: value } : others;\n    });\n  };\n  return /* @__PURE__ */ React.createElement(FormControl, {\n    disabled: loading,\n    className,\n    variant: \"filled\",\n    fullWidth: true,\n    \"data-testid\": \"search-selectfilter-next\"\n  }, label ? /* @__PURE__ */ React.createElement(InputLabel, {\n    className: classes.label,\n    margin: \"dense\"\n  }, label) : null, /* @__PURE__ */ React.createElement(Select, {\n    variant: \"outlined\",\n    value: filters[name] || \"\",\n    onChange: handleChange\n  }, /* @__PURE__ */ React.createElement(MenuItem, {\n    value: \"\"\n  }, /* @__PURE__ */ React.createElement(\"em\", null, \"All\")), values.map((value) => /* @__PURE__ */ React.createElement(MenuItem, {\n    key: value,\n    value\n  }, value))));\n};\nconst SearchFilter = ({\n  component: Element,\n  ...props\n}) => /* @__PURE__ */ React.createElement(Element, {\n  ...props\n});\nSearchFilter.Checkbox = (props) => /* @__PURE__ */ React.createElement(SearchFilter, {\n  ...props,\n  component: CheckboxFilter\n});\nSearchFilter.Select = (props) => /* @__PURE__ */ React.createElement(SearchFilter, {\n  ...props,\n  component: SelectFilter\n});\nSearchFilter.Autocomplete = (props) => /* @__PURE__ */ React.createElement(SearchFilter, {\n  ...props,\n  component: AutocompleteFilter\n});\nconst SearchFilterNext = SearchFilter;\n\nconst DefaultResultListItem$1 = ({\n  result,\n  icon,\n  secondaryAction,\n  lineClamp = 5\n}) => {\n  return /* @__PURE__ */ React.createElement(Link, {\n    to: result.location\n  }, /* @__PURE__ */ React.createElement(ListItem, {\n    alignItems: \"center\"\n  }, icon && /* @__PURE__ */ React.createElement(ListItemIcon, null, icon), /* @__PURE__ */ React.createElement(ListItemText, {\n    primaryTypographyProps: { variant: \"h6\" },\n    primary: result.title,\n    secondary: /* @__PURE__ */ React.createElement(TextTruncate, {\n      line: lineClamp,\n      truncateText: \"\\u2026\",\n      text: result.text,\n      element: \"span\"\n    })\n  }), secondaryAction && /* @__PURE__ */ React.createElement(Box, {\n    alignItems: \"flex-end\"\n  }, secondaryAction)), /* @__PURE__ */ React.createElement(Divider, null));\n};\n\nconst SearchResultComponent = ({ children }) => {\n  const {\n    result: { loading, error, value }\n  } = useSearch();\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  }\n  if (error) {\n    return /* @__PURE__ */ React.createElement(ResponseErrorPanel, {\n      title: \"Error encountered while fetching search results\",\n      error\n    });\n  }\n  if (!(value == null ? void 0 : value.results.length)) {\n    return /* @__PURE__ */ React.createElement(EmptyState, {\n      missing: \"data\",\n      title: \"Sorry, no results were found\"\n    });\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, children({ results: value.results }));\n};\n\nconst useStyles$8 = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    gap: theme.spacing(2),\n    margin: theme.spacing(2, 0)\n  }\n}));\nconst SearchResultPager = () => {\n  const { fetchNextPage, fetchPreviousPage } = useSearch();\n  const classes = useStyles$8();\n  if (!fetchNextPage && !fetchPreviousPage) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null);\n  }\n  return /* @__PURE__ */ React.createElement(\"nav\", {\n    \"arial-label\": \"pagination navigation\",\n    className: classes.root\n  }, /* @__PURE__ */ React.createElement(Button, {\n    \"aria-label\": \"previous page\",\n    disabled: !fetchPreviousPage,\n    onClick: fetchPreviousPage,\n    startIcon: /* @__PURE__ */ React.createElement(ArrowBackIosIcon, null)\n  }, \"Previous\"), /* @__PURE__ */ React.createElement(Button, {\n    \"aria-label\": \"next page\",\n    disabled: !fetchNextPage,\n    onClick: fetchNextPage,\n    endIcon: /* @__PURE__ */ React.createElement(ArrowForwardIosIcon, null)\n  }, \"Next\"));\n};\n\nclass SearchClient {\n  constructor(options) {\n    this.discoveryApi = options.discoveryApi;\n    this.identityApi = options.identityApi;\n  }\n  async query(query) {\n    const { token } = await this.identityApi.getCredentials();\n    const queryString = qs.stringify(query);\n    const url = `${await this.discoveryApi.getBaseUrl(\"search/query\")}?${queryString}`;\n    const response = await fetch(url, {\n      headers: token ? { Authorization: `Bearer ${token}` } : {}\n    });\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    return response.json();\n  }\n}\n\nconst rootRouteRef = createRouteRef({\n  id: \"search\"\n});\nconst rootNextRouteRef = createRouteRef({\n  id: \"search:next\"\n});\nconst searchPlugin = createPlugin({\n  id: \"search\",\n  apis: [\n    createApiFactory({\n      api: searchApiRef,\n      deps: { discoveryApi: discoveryApiRef, identityApi: identityApiRef },\n      factory: ({ discoveryApi, identityApi }) => {\n        return new SearchClient({ discoveryApi, identityApi });\n      }\n    })\n  ],\n  routes: {\n    root: rootRouteRef,\n    nextRoot: rootNextRouteRef\n  }\n});\nconst SearchPage$1 = searchPlugin.provide(createRoutableExtension({\n  name: \"SearchPage\",\n  component: () => import('./index-e04b2cd4.esm.js').then((m) => m.SearchPage),\n  mountPoint: rootRouteRef\n}));\nconst SearchPageNext = searchPlugin.provide(createRoutableExtension({\n  name: \"SearchPageNext\",\n  component: () => import('./index-e04b2cd4.esm.js').then((m) => m.SearchPage),\n  mountPoint: rootNextRouteRef\n}));\nsearchPlugin.provide(createComponentExtension({\n  name: \"SearchBar\",\n  component: {\n    lazy: () => import('./index-b51ef5f2.esm.js').then((m) => m.SearchBar)\n  }\n}));\nconst SearchBarNext = searchPlugin.provide(createComponentExtension({\n  name: \"SearchBarNext\",\n  component: {\n    lazy: () => import('./index-b51ef5f2.esm.js').then((m) => m.SearchBar)\n  }\n}));\nconst SearchResult$1 = searchPlugin.provide(createComponentExtension({\n  name: \"SearchResult\",\n  component: {\n    lazy: () => import('./index-21e72471.esm.js').then((m) => m.SearchResult)\n  }\n}));\nsearchPlugin.provide(createComponentExtension({\n  name: \"SearchResultNext\",\n  component: {\n    lazy: () => import('./index-21e72471.esm.js').then((m) => m.SearchResult)\n  }\n}));\nconst SidebarSearchModal = searchPlugin.provide(createComponentExtension({\n  name: \"SidebarSearchModal\",\n  component: {\n    lazy: () => import('./index-9b2b2a0c.esm.js').then((m) => m.SidebarSearchModal)\n  }\n}));\nconst DefaultResultListItem = searchPlugin.provide(createComponentExtension({\n  name: \"DefaultResultListItem\",\n  component: {\n    lazy: () => import('./index-ad938c17.esm.js').then((m) => m.DefaultResultListItem)\n  }\n}));\nconst HomePageSearchBar = searchPlugin.provide(createComponentExtension({\n  name: \"HomePageSearchBar\",\n  component: {\n    lazy: () => import('./index-ca20fb56.esm.js').then((m) => m.HomePageSearchBar)\n  }\n}));\n\nconst useStyles$7 = makeStyles$1((theme) => ({\n  container: {\n    borderRadius: 30,\n    display: \"flex\",\n    height: \"2.4em\"\n  },\n  input: {\n    flex: 1\n  },\n  paperFullWidth: { height: \"calc(100% - 128px)\" },\n  dialogActionsContainer: { padding: theme.spacing(1, 3) },\n  viewResultsLink: { verticalAlign: \"0.5em\" }\n}));\nconst Modal = ({ toggleModal }) => {\n  const getSearchLink = useRouteRef(rootRouteRef);\n  const classes = useStyles$7();\n  const { term } = useSearch();\n  const { focusContent } = useContent();\n  const { transitions } = useTheme();\n  const handleResultClick = () => {\n    toggleModal();\n    setTimeout(focusContent, transitions.duration.leavingScreen);\n  };\n  const handleKeyPress = () => {\n    handleResultClick();\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(DialogTitle, null, /* @__PURE__ */ React.createElement(Paper, {\n    className: classes.container\n  }, /* @__PURE__ */ React.createElement(SearchBar$1, {\n    className: classes.input\n  }))), /* @__PURE__ */ React.createElement(DialogContent, null, /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    direction: \"row-reverse\",\n    justifyContent: \"flex-start\",\n    alignItems: \"center\"\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React.createElement(Link, {\n    onClick: () => {\n      toggleModal();\n      setTimeout(focusContent, transitions.duration.leavingScreen);\n    },\n    to: `${getSearchLink()}?query=${term}`\n  }, /* @__PURE__ */ React.createElement(\"span\", {\n    className: classes.viewResultsLink\n  }, \"View Full Results\"), /* @__PURE__ */ React.createElement(LaunchIcon, {\n    color: \"primary\"\n  })))), /* @__PURE__ */ React.createElement(Divider, null), /* @__PURE__ */ React.createElement(SearchResultComponent, null, ({ results }) => /* @__PURE__ */ React.createElement(List, null, results.map(({ document }) => /* @__PURE__ */ React.createElement(\"div\", {\n    role: \"button\",\n    tabIndex: 0,\n    key: `${document.location}-btn`,\n    onClick: handleResultClick,\n    onKeyPress: handleKeyPress\n  }, /* @__PURE__ */ React.createElement(DefaultResultListItem$1, {\n    key: document.location,\n    result: document\n  })))))), /* @__PURE__ */ React.createElement(DialogActions, {\n    className: classes.dialogActionsContainer\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    direction: \"row\"\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 12\n  }, /* @__PURE__ */ React.createElement(SearchResultPager, null)))));\n};\nconst SearchModal = ({\n  open = true,\n  hidden,\n  toggleModal,\n  children\n}) => {\n  var _a;\n  const classes = useStyles$7();\n  return /* @__PURE__ */ React.createElement(Dialog, {\n    classes: {\n      paperFullWidth: classes.paperFullWidth\n    },\n    onClose: toggleModal,\n    \"aria-labelledby\": \"search-modal-title\",\n    fullWidth: true,\n    maxWidth: \"lg\",\n    open,\n    hidden\n  }, open && /* @__PURE__ */ React.createElement(SearchContextProvider, null, (_a = children && children({ toggleModal })) != null ? _a : /* @__PURE__ */ React.createElement(Modal, {\n    toggleModal\n  })));\n};\n\nfunction useSearchModal(initialState = false) {\n  const [state, setState] = useState({\n    hidden: !initialState,\n    open: initialState\n  });\n  const toggleModal = useCallback(() => setState((prevState) => ({\n    open: true,\n    hidden: !prevState.hidden\n  })), []);\n  const setOpen = useCallback((open) => setState((prevState) => ({\n    open: prevState.open || open,\n    hidden: !open\n  })), []);\n  return { state, toggleModal, setOpen };\n}\n\nconst useStyles$6 = makeStyles$1(() => ({\n  root: {\n    display: \"flex\",\n    alignItems: \"center\"\n  },\n  input: {\n    flex: 1\n  }\n}));\nconst SearchBar = ({\n  searchQuery,\n  handleSearch,\n  handleClearSearchBar\n}) => {\n  const classes = useStyles$6();\n  return /* @__PURE__ */ React.createElement(Paper, {\n    component: \"form\",\n    onSubmit: (e) => handleSearch(e),\n    className: classes.root\n  }, /* @__PURE__ */ React.createElement(IconButton$1, {\n    disabled: true,\n    type: \"submit\",\n    \"aria-label\": \"search\"\n  }, /* @__PURE__ */ React.createElement(SearchIcon, null)), /* @__PURE__ */ React.createElement(InputBase$1, {\n    className: classes.input,\n    placeholder: \"Search in Backstage\",\n    value: searchQuery,\n    onChange: (e) => handleSearch(e),\n    inputProps: { \"aria-label\": \"search backstage\" }\n  }), /* @__PURE__ */ React.createElement(IconButton$1, {\n    \"aria-label\": \"search\",\n    onClick: () => handleClearSearchBar()\n  }, /* @__PURE__ */ React.createElement(ClearButton, null)));\n};\n\nconst useStyles$5 = makeStyles((theme) => ({\n  filters: {\n    width: \"250px\",\n    display: \"flex\"\n  },\n  icon: {\n    margin: theme.spacing(-1, 0, 0, 0)\n  }\n}));\nconst FiltersButton = ({\n  numberOfSelectedFilters,\n  handleToggleFilters\n}) => {\n  const classes = useStyles$5();\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.filters\n  }, /* @__PURE__ */ React.createElement(IconButton, {\n    className: classes.icon,\n    \"aria-label\": \"settings\",\n    onClick: handleToggleFilters\n  }, /* @__PURE__ */ React.createElement(FilterListIcon, null)), /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"h6\"\n  }, \"Filters (\", numberOfSelectedFilters ? numberOfSelectedFilters : 0, \")\"));\n};\n\nconst useStyles$4 = makeStyles((theme) => ({\n  filters: {\n    background: \"transparent\",\n    boxShadow: \"0px 0px 0px 0px\"\n  },\n  checkbox: {\n    padding: theme.spacing(0, 1, 0, 1)\n  },\n  dropdown: {\n    width: \"100%\"\n  }\n}));\nconst Filters = ({\n  filters,\n  filterOptions,\n  resetFilters,\n  updateSelected,\n  updateChecked\n}) => {\n  const classes = useStyles$4();\n  return /* @__PURE__ */ React.createElement(Card, {\n    className: classes.filters\n  }, /* @__PURE__ */ React.createElement(CardHeader, {\n    title: /* @__PURE__ */ React.createElement(Typography, {\n      variant: \"h6\"\n    }, \"Filters\"),\n    action: /* @__PURE__ */ React.createElement(Button, {\n      color: \"primary\",\n      onClick: () => resetFilters()\n    }, \"CLEAR ALL\")\n  }), /* @__PURE__ */ React.createElement(Divider, null), filterOptions.kind.length === 0 && filterOptions.lifecycle.length === 0 && /* @__PURE__ */ React.createElement(CardContent, null, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"subtitle2\"\n  }, \"Filters cannot be applied to available results\")), filterOptions.kind.length > 0 && /* @__PURE__ */ React.createElement(CardContent, null, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"subtitle2\"\n  }, \"Kind\"), /* @__PURE__ */ React.createElement(Select, {\n    id: \"outlined-select\",\n    onChange: (e) => {\n      var _a;\n      return updateSelected((_a = e == null ? void 0 : e.target) == null ? void 0 : _a.value);\n    },\n    variant: \"outlined\",\n    className: classes.dropdown,\n    value: filters.selected\n  }, filterOptions.kind.map((filter) => /* @__PURE__ */ React.createElement(MenuItem, {\n    selected: filter === \"\",\n    dense: true,\n    key: filter,\n    value: filter\n  }, filter)))), filterOptions.lifecycle.length > 0 && /* @__PURE__ */ React.createElement(CardContent, null, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"subtitle2\"\n  }, \"Lifecycle\"), /* @__PURE__ */ React.createElement(List, {\n    disablePadding: true,\n    dense: true\n  }, filterOptions.lifecycle.map((filter) => /* @__PURE__ */ React.createElement(ListItem, {\n    key: filter,\n    dense: true,\n    button: true,\n    onClick: () => updateChecked(filter)\n  }, /* @__PURE__ */ React.createElement(Checkbox, {\n    edge: \"start\",\n    disableRipple: true,\n    className: classes.checkbox,\n    color: \"primary\",\n    checked: filters.checked.includes(filter),\n    tabIndex: -1,\n    value: filter,\n    name: filter\n  }), /* @__PURE__ */ React.createElement(ListItemText, {\n    id: filter,\n    primary: filter\n  }))))));\n};\n\nconst useStyles$3 = makeStyles((theme) => ({\n  searchQuery: {\n    color: theme.palette.text.primary,\n    background: theme.palette.background.default,\n    borderRadius: \"10%\"\n  },\n  tableHeader: {\n    margin: theme.spacing(1, 0, 0, 0),\n    display: \"flex\"\n  },\n  divider: {\n    width: \"1px\",\n    margin: theme.spacing(0, 2),\n    padding: theme.spacing(2, 0)\n  }\n}));\nconst columns = [\n  {\n    title: \"Name\",\n    field: \"name\",\n    highlight: true,\n    render: (result) => /* @__PURE__ */ React.createElement(Link, {\n      to: result.url || \"\"\n    }, result.name)\n  },\n  {\n    title: \"Description\",\n    field: \"description\"\n  },\n  {\n    title: \"Owner\",\n    field: \"owner\"\n  },\n  {\n    title: \"Kind\",\n    field: \"kind\"\n  },\n  {\n    title: \"LifeCycle\",\n    field: \"lifecycle\"\n  }\n];\nconst TableHeader = ({\n  searchQuery,\n  numberOfSelectedFilters,\n  numberOfResults,\n  handleToggleFilters\n}) => {\n  const classes = useStyles$3();\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: classes.tableHeader\n  }, /* @__PURE__ */ React.createElement(FiltersButton, {\n    numberOfSelectedFilters,\n    handleToggleFilters\n  }), /* @__PURE__ */ React.createElement(Divider, {\n    className: classes.divider,\n    orientation: \"vertical\"\n  }), /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 12\n  }, searchQuery ? /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"h6\"\n  }, `${numberOfResults} `, numberOfResults > 1 ? `results for ` : `result for `, /* @__PURE__ */ React.createElement(\"span\", {\n    className: classes.searchQuery\n  }, '\"', searchQuery, '\"'), \" \") : /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"h6\"\n  }, `${numberOfResults} results`)));\n};\nconst SearchResult = ({ searchQuery }) => {\n  const catalogApi = useApi(catalogApiRef);\n  const [showFilters, toggleFilters] = useState(false);\n  const [selectedFilters, setSelectedFilters] = useState({\n    selected: \"\",\n    checked: []\n  });\n  const [filteredResults, setFilteredResults] = useState([]);\n  const {\n    loading,\n    error,\n    value: results\n  } = useAsync(async () => {\n    const entities = await catalogApi.getEntities();\n    return entities.items.map((entity) => {\n      var _a, _b, _c, _d, _e;\n      return {\n        name: entity.metadata.name,\n        description: entity.metadata.description,\n        owner: typeof ((_a = entity.spec) == null ? void 0 : _a.owner) === \"string\" ? (_b = entity.spec) == null ? void 0 : _b.owner : void 0,\n        kind: entity.kind,\n        lifecycle: typeof ((_c = entity.spec) == null ? void 0 : _c.lifecycle) === \"string\" ? (_d = entity.spec) == null ? void 0 : _d.lifecycle : void 0,\n        url: `/catalog/${((_e = entity.metadata.namespace) == null ? void 0 : _e.toLocaleLowerCase(\"en-US\")) || DEFAULT_NAMESPACE}/${entity.kind.toLocaleLowerCase(\"en-US\")}/${entity.metadata.name}`\n      };\n    });\n  }, []);\n  useEffect(() => {\n    if (results) {\n      let withFilters = results;\n      if (selectedFilters.selected !== \"\") {\n        withFilters = results.filter((result) => selectedFilters.selected.includes(result.kind));\n      }\n      if (selectedFilters.checked.length > 0) {\n        withFilters = withFilters.filter((result) => result.lifecycle && selectedFilters.checked.includes(result.lifecycle));\n      }\n      if (searchQuery) {\n        withFilters = withFilters.filter((result) => {\n          var _a, _b, _c;\n          return ((_a = result.name) == null ? void 0 : _a.toLocaleLowerCase(\"en-US\").includes(searchQuery)) || ((_b = result.name) == null ? void 0 : _b.toLocaleLowerCase(\"en-US\").includes(searchQuery.split(\" \").join(\"-\"))) || ((_c = result.description) == null ? void 0 : _c.toLocaleLowerCase(\"en-US\").includes(searchQuery));\n        });\n      }\n      setFilteredResults(withFilters);\n    }\n  }, [selectedFilters, searchQuery, results]);\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  }\n  if (error) {\n    return /* @__PURE__ */ React.createElement(Alert, {\n      severity: \"error\"\n    }, \"Error encountered while fetching search results. \", error.toString());\n  }\n  if (!results || results.length === 0) {\n    return /* @__PURE__ */ React.createElement(EmptyState, {\n      missing: \"data\",\n      title: \"Sorry, no results were found\"\n    });\n  }\n  const resetFilters = () => {\n    setSelectedFilters({\n      selected: \"\",\n      checked: []\n    });\n  };\n  const updateSelected = (filter) => {\n    setSelectedFilters((prevState) => ({\n      ...prevState,\n      selected: filter\n    }));\n  };\n  const updateChecked = (filter) => {\n    if (selectedFilters.checked.includes(filter)) {\n      setSelectedFilters((prevState) => ({\n        ...prevState,\n        checked: prevState.checked.filter((item) => item !== filter)\n      }));\n      return;\n    }\n    setSelectedFilters((prevState) => ({\n      ...prevState,\n      checked: [...prevState.checked, filter]\n    }));\n  };\n  const filterOptions = results.reduce((acc, curr) => {\n    if (curr.kind && acc.kind.indexOf(curr.kind) < 0) {\n      acc.kind.push(curr.kind);\n    }\n    if (curr.lifecycle && acc.lifecycle.indexOf(curr.lifecycle) < 0) {\n      acc.lifecycle.push(curr.lifecycle);\n    }\n    return acc;\n  }, {\n    kind: [],\n    lifecycle: []\n  });\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Grid, {\n    container: true\n  }, showFilters && /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 3\n  }, /* @__PURE__ */ React.createElement(Filters, {\n    filters: selectedFilters,\n    filterOptions,\n    resetFilters,\n    updateSelected,\n    updateChecked\n  })), /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: showFilters ? 9 : 12\n  }, /* @__PURE__ */ React.createElement(Table, {\n    options: { paging: true, pageSize: 20, search: false },\n    data: filteredResults,\n    columns,\n    title: /* @__PURE__ */ React.createElement(TableHeader, {\n      searchQuery,\n      numberOfResults: filteredResults.length,\n      numberOfSelectedFilters: (selectedFilters.selected !== \"\" ? 1 : 0) + selectedFilters.checked.length,\n      handleToggleFilters: () => toggleFilters(!showFilters)\n    })\n  }))));\n};\n\nconst LegacySearchPage = () => {\n  const [queryString, setQueryString] = useQueryParamState(\"query\");\n  const [searchQuery, setSearchQuery] = useState(queryString != null ? queryString : \"\");\n  const handleSearch = (event) => {\n    event.preventDefault();\n    setSearchQuery(event.target.value);\n  };\n  useEffect(() => setSearchQuery(queryString != null ? queryString : \"\"), [queryString]);\n  useDebounce(() => {\n    setQueryString(searchQuery);\n  }, 200, [searchQuery]);\n  const handleClearSearchBar = () => {\n    setSearchQuery(\"\");\n  };\n  return /* @__PURE__ */ React.createElement(Page, {\n    themeId: \"home\"\n  }, /* @__PURE__ */ React.createElement(Header, {\n    title: \"Search\"\n  }), /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    direction: \"row\"\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 12\n  }, /* @__PURE__ */ React.createElement(SearchBar, {\n    handleSearch,\n    handleClearSearchBar,\n    searchQuery\n  })), /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 12\n  }, /* @__PURE__ */ React.createElement(SearchResult, {\n    searchQuery: (queryString != null ? queryString : \"\").toLocaleLowerCase(\"en-US\")\n  })))));\n};\n\nconst UrlUpdater = () => {\n  const location = useLocation();\n  const {\n    term,\n    setTerm,\n    types,\n    setTypes,\n    pageCursor,\n    setPageCursor,\n    filters,\n    setFilters\n  } = useSearch();\n  const prevQueryParams = usePrevious(location.search);\n  useEffect(() => {\n    if (location.search === prevQueryParams) {\n      return;\n    }\n    const query = qs.parse(location.search.substring(1), { arrayLimit: 0 }) || {};\n    if (query.filters) {\n      setFilters(query.filters);\n    }\n    if (query.query) {\n      setTerm(query.query);\n    }\n    if (query.pageCursor) {\n      setPageCursor(query.pageCursor);\n    }\n    if (query.types) {\n      setTypes(query.types);\n    }\n  }, [prevQueryParams, location, setTerm, setTypes, setPageCursor, setFilters]);\n  useEffect(() => {\n    const newParams = qs.stringify({\n      query: term,\n      types,\n      pageCursor,\n      filters\n    }, { arrayFormat: \"brackets\" });\n    const newUrl = `${window.location.pathname}?${newParams}`;\n    window.history.replaceState(null, document.title, newUrl);\n  }, [term, types, pageCursor, filters]);\n  return null;\n};\nconst SearchPage = () => {\n  const outlet = useOutlet();\n  return /* @__PURE__ */ React.createElement(SearchContextProvider, null, /* @__PURE__ */ React.createElement(UrlUpdater, null), outlet || /* @__PURE__ */ React.createElement(LegacySearchPage, null));\n};\n\nconst useStyles$2 = makeStyles((theme) => ({\n  card: {\n    backgroundColor: \"rgba(0, 0, 0, .11)\"\n  },\n  cardContent: {\n    paddingTop: theme.spacing(1)\n  },\n  icon: {\n    color: theme.palette.common.black\n  },\n  list: {\n    width: \"100%\"\n  },\n  listItemIcon: {\n    width: \"24px\",\n    height: \"24px\"\n  },\n  accordion: {\n    backgroundColor: theme.palette.background.paper\n  },\n  accordionSummary: {\n    minHeight: \"auto\",\n    \"&.Mui-expanded\": {\n      minHeight: \"auto\"\n    }\n  },\n  accordionSummaryContent: {\n    margin: theme.spacing(2, 0),\n    \"&.Mui-expanded\": {\n      margin: theme.spacing(2, 0)\n    }\n  },\n  accordionDetails: {\n    padding: theme.spacing(0, 0, 1)\n  }\n}));\nconst SearchTypeAccordion = (props) => {\n  const classes = useStyles$2();\n  const { setPageCursor, setTypes, types } = useSearch();\n  const [expanded, setExpanded] = useState(true);\n  const { defaultValue, name, types: givenTypes } = props;\n  const toggleExpanded = () => setExpanded((prevState) => !prevState);\n  const handleClick = (type) => {\n    return () => {\n      setTypes(type !== \"\" ? [type] : []);\n      setPageCursor(void 0);\n      setExpanded(false);\n    };\n  };\n  useEffect(() => {\n    if (defaultValue) {\n      setTypes([defaultValue]);\n    }\n  }, []);\n  const definedTypes = [\n    {\n      value: \"\",\n      name: \"All\",\n      icon: /* @__PURE__ */ React.createElement(AllIcon, null)\n    },\n    ...givenTypes\n  ];\n  const selected = types[0] || \"\";\n  return /* @__PURE__ */ React.createElement(Card, {\n    className: classes.card\n  }, /* @__PURE__ */ React.createElement(CardHeader, {\n    title: name,\n    titleTypographyProps: { variant: \"overline\" }\n  }), /* @__PURE__ */ React.createElement(CardContent, {\n    className: classes.cardContent\n  }, /* @__PURE__ */ React.createElement(Accordion, {\n    className: classes.accordion,\n    expanded,\n    onChange: toggleExpanded\n  }, /* @__PURE__ */ React.createElement(AccordionSummary, {\n    classes: {\n      root: classes.accordionSummary,\n      content: classes.accordionSummaryContent\n    },\n    expandIcon: /* @__PURE__ */ React.createElement(ExpandMoreIcon, {\n      className: classes.icon\n    }),\n    IconButtonProps: { size: \"small\" }\n  }, expanded ? \"Collapse\" : definedTypes.filter((t) => t.value === selected)[0].name), /* @__PURE__ */ React.createElement(AccordionDetails, {\n    classes: { root: classes.accordionDetails }\n  }, /* @__PURE__ */ React.createElement(List, {\n    className: classes.list,\n    component: \"nav\",\n    \"aria-label\": \"filter by type\",\n    disablePadding: true,\n    dense: true\n  }, definedTypes.map((type) => /* @__PURE__ */ React.createElement(Fragment, {\n    key: type.value\n  }, /* @__PURE__ */ React.createElement(Divider, null), /* @__PURE__ */ React.createElement(ListItem, {\n    selected: types[0] === type.value || types.length === 0 && type.value === \"\",\n    onClick: handleClick(type.value),\n    button: true\n  }, /* @__PURE__ */ React.createElement(ListItemIcon, null, cloneElement(type.icon, {\n    className: classes.listItemIcon\n  })), /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: type.name\n  })))))))));\n};\n\nconst useStyles$1 = makeStyles((theme) => ({\n  tabs: {\n    borderBottom: `1px solid ${theme.palette.textVerySubtle}`,\n    padding: theme.spacing(0, 4)\n  },\n  tab: {\n    height: \"50px\",\n    fontWeight: theme.typography.fontWeightBold,\n    fontSize: theme.typography.pxToRem(13),\n    color: theme.palette.textSubtle,\n    minWidth: \"130px\"\n  }\n}));\nconst SearchTypeTabs = (props) => {\n  const classes = useStyles$1();\n  const { setPageCursor, setTypes, types } = useSearch();\n  const { defaultValue, types: givenTypes } = props;\n  const changeTab = (_, newType) => {\n    setTypes(newType !== \"\" ? [newType] : []);\n    setPageCursor(void 0);\n  };\n  useEffect(() => {\n    if (defaultValue) {\n      setTypes([defaultValue]);\n    }\n  }, []);\n  const definedTypes = [\n    {\n      value: \"\",\n      name: \"All\"\n    },\n    ...givenTypes\n  ];\n  return /* @__PURE__ */ React.createElement(Tabs, {\n    className: classes.tabs,\n    indicatorColor: \"primary\",\n    value: types.length === 0 ? \"\" : types[0],\n    onChange: changeTab\n  }, definedTypes.map((type, idx) => /* @__PURE__ */ React.createElement(Tab, {\n    key: idx,\n    className: classes.tab,\n    disableRipple: true,\n    label: type.name,\n    value: type.value\n  })));\n};\n\nconst useStyles = makeStyles((theme) => ({\n  label: {\n    textTransform: \"capitalize\"\n  },\n  chips: {\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    marginTop: theme.spacing(1)\n  },\n  chip: {\n    margin: 2\n  }\n}));\nconst SearchType = (props) => {\n  const { className, defaultValue, name, values = [] } = props;\n  const classes = useStyles();\n  const { types, setTypes } = useSearch();\n  useEffectOnce(() => {\n    if (!types.length) {\n      if (defaultValue && Array.isArray(defaultValue)) {\n        setTypes(defaultValue);\n      } else if (defaultValue) {\n        setTypes([defaultValue]);\n      }\n    }\n  });\n  const handleChange = (e) => {\n    const value = e.target.value;\n    setTypes(value);\n  };\n  return /* @__PURE__ */ React.createElement(FormControl, {\n    className,\n    variant: \"filled\",\n    fullWidth: true,\n    \"data-testid\": \"search-typefilter-next\"\n  }, /* @__PURE__ */ React.createElement(InputLabel, {\n    className: classes.label,\n    margin: \"dense\"\n  }, name), /* @__PURE__ */ React.createElement(Select, {\n    multiple: true,\n    variant: \"outlined\",\n    value: types,\n    onChange: handleChange,\n    placeholder: \"All Results\",\n    renderValue: (selected) => /* @__PURE__ */ React.createElement(\"div\", {\n      className: classes.chips\n    }, selected.map((value) => /* @__PURE__ */ React.createElement(Chip, {\n      key: value,\n      label: value,\n      className: classes.chip,\n      size: \"small\"\n    })))\n  }, values.map((value) => /* @__PURE__ */ React.createElement(MenuItem, {\n    key: value,\n    value\n  }, /* @__PURE__ */ React.createElement(Checkbox, {\n    checked: types.indexOf(value) > -1\n  }), /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: value\n  })))));\n};\nSearchType.Accordion = (props) => {\n  return /* @__PURE__ */ React.createElement(SearchTypeAccordion, {\n    ...props\n  });\n};\nSearchType.Tabs = (props) => {\n  return /* @__PURE__ */ React.createElement(SearchTypeTabs, {\n    ...props\n  });\n};\n\nconst SidebarSearch = (props) => {\n  const searchRoute = useRouteRef(rootRouteRef);\n  const { focusContent } = useContent();\n  const navigate = useNavigate();\n  const handleSearch = useCallback((query) => {\n    const queryString = qs.stringify({ query }, { addQueryPrefix: true });\n    focusContent();\n    navigate(`${searchRoute()}${queryString}`);\n  }, [focusContent, navigate, searchRoute]);\n  return /* @__PURE__ */ React.createElement(SidebarSearchField, {\n    icon: props.icon,\n    onSearch: handleSearch,\n    to: \"/search\"\n  });\n};\n\nexport { DefaultResultListItem$1 as D, Filters$1 as F, HomePageSearchBar as H, SearchPage as S, SearchBar$1 as a, SearchBarBase as b, SearchResultComponent as c, SearchModal as d, FiltersButton$1 as e, SearchFilter as f, SearchFilterNext as g, SearchResultPager as h, SearchType as i, SidebarSearch as j, DefaultResultListItem as k, SearchBarNext as l, SearchPage$1 as m, SearchPageNext as n, SearchResult$1 as o, SidebarSearchModal as p, rootRouteRef as r, searchPlugin as s, useSearchModal as u };\n//# sourceMappingURL=index-1c49a9c7.esm.js.map\n","import { Link, MarkdownContent, Progress, Page, Header, Content, ContentHeader, SupportButton } from '@backstage/core-components';\nimport { createApiRef, useApi, errorApiRef, createRouteRef, createPlugin, createApiFactory, createRoutableExtension } from '@backstage/core-plugin-api';\nimport React, { useRef, useLayoutEffect, useState, useEffect } from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport { makeStyles, DialogContent, DialogActions, Button, Input, Grid } from '@material-ui/core';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport LinkIcon from '@material-ui/icons/Link';\nimport color from 'color';\nimport { forceSimulation, forceCollide } from 'd3-force';\n\nconst techRadarApiRef = createApiRef({\n  id: \"plugin.techradar.service\"\n});\nvar MovedState = /* @__PURE__ */ ((MovedState2) => {\n  MovedState2[MovedState2[\"Down\"] = -1] = \"Down\";\n  MovedState2[MovedState2[\"NoChange\"] = 0] = \"NoChange\";\n  MovedState2[MovedState2[\"Up\"] = 1] = \"Up\";\n  return MovedState2;\n})(MovedState || {});\n\nconst useStyles$5 = makeStyles((theme) => ({\n  ring: {\n    fill: \"none\",\n    stroke: \"#bbb\",\n    strokeWidth: \"1px\"\n  },\n  axis: {\n    fill: \"none\",\n    stroke: \"#bbb\",\n    strokeWidth: \"1px\"\n  },\n  text: {\n    pointerEvents: \"none\",\n    userSelect: \"none\",\n    fill: theme.palette.text.primary,\n    fontSize: \"25px\",\n    fontWeight: 800\n  }\n}));\nconst RadarGrid = (props) => {\n  const { radius, rings } = props;\n  const classes = useStyles$5(props);\n  const makeRingNode = (ringIndex, ringRadius) => [\n    /* @__PURE__ */ React.createElement(\"circle\", {\n      key: `c${ringIndex}`,\n      cx: 0,\n      cy: 0,\n      r: ringRadius,\n      className: classes.ring\n    }),\n    /* @__PURE__ */ React.createElement(\"text\", {\n      key: `t${ringIndex}`,\n      y: ringRadius !== void 0 ? -ringRadius + 42 : void 0,\n      textAnchor: \"middle\",\n      className: classes.text\n    }, rings[ringIndex].name)\n  ];\n  const axisNodes = [\n    /* @__PURE__ */ React.createElement(\"line\", {\n      key: \"x\",\n      x1: 0,\n      y1: -radius,\n      x2: 0,\n      y2: radius,\n      className: classes.axis,\n      \"data-testid\": \"radar-grid-x-line\"\n    }),\n    /* @__PURE__ */ React.createElement(\"line\", {\n      key: \"y\",\n      x1: -radius,\n      y1: 0,\n      x2: radius,\n      y2: 0,\n      className: classes.axis,\n      \"data-testid\": \"radar-grid-y-line\"\n    })\n  ];\n  const ringNodes = rings.map((r) => r.outerRadius).map((ringRadius, ringIndex) => makeRingNode(ringIndex, ringRadius));\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, axisNodes.concat(...ringNodes));\n};\n\nfunction isValidUrl(url) {\n  return Boolean(url && url !== \"#\" && url.length > 0);\n}\nconst WithLink = ({\n  url,\n  className,\n  children\n}) => isValidUrl(url) ? /* @__PURE__ */ React.createElement(Link, {\n  className,\n  to: url\n}, children) : /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n\nconst RadarDescription = (props) => {\n  const { open, onClose, title, description, url } = props;\n  return /* @__PURE__ */ React.createElement(Dialog, {\n    \"data-testid\": \"radar-description\",\n    open,\n    onClose\n  }, /* @__PURE__ */ React.createElement(DialogTitle, {\n    \"data-testid\": \"radar-description-dialog-title\"\n  }, title), /* @__PURE__ */ React.createElement(DialogContent, {\n    dividers: true\n  }, /* @__PURE__ */ React.createElement(MarkdownContent, {\n    content: description\n  })), isValidUrl(url) && /* @__PURE__ */ React.createElement(DialogActions, null, /* @__PURE__ */ React.createElement(Button, {\n    component: Link,\n    to: url,\n    onClick: onClose,\n    color: \"primary\",\n    startIcon: /* @__PURE__ */ React.createElement(LinkIcon, null)\n  }, \"LEARN MORE\")));\n};\n\nconst useStyles$4 = makeStyles(() => ({\n  text: {\n    pointerEvents: \"none\",\n    userSelect: \"none\",\n    fontSize: \"9px\",\n    fill: \"#fff\",\n    textAnchor: \"middle\"\n  },\n  link: {\n    cursor: \"pointer\"\n  }\n}));\nconst makeBlip = (color, moved) => {\n  const style = { fill: color };\n  let blip = /* @__PURE__ */ React.createElement(\"circle\", {\n    r: 9,\n    style\n  });\n  if (moved && moved > 0) {\n    blip = /* @__PURE__ */ React.createElement(\"path\", {\n      d: \"M -11,5 11,5 0,-13 z\",\n      style\n    });\n  } else if (moved && moved < 0) {\n    blip = /* @__PURE__ */ React.createElement(\"path\", {\n      d: \"M -11,-5 11,-5 0,13 z\",\n      style\n    });\n  }\n  return blip;\n};\nconst RadarEntry = (props) => {\n  const classes = useStyles$4(props);\n  const [open, setOpen] = React.useState(false);\n  const {\n    moved,\n    description,\n    title,\n    color,\n    url,\n    value,\n    x,\n    y,\n    onMouseEnter,\n    onMouseLeave,\n    onClick\n  } = props;\n  const blip = makeBlip(color, moved);\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n  const handleClose = () => {\n    setOpen(false);\n  };\n  const toggle = () => {\n    setOpen(!open);\n  };\n  return /* @__PURE__ */ React.createElement(\"g\", {\n    transform: `translate(${x}, ${y})`,\n    onMouseEnter,\n    onMouseLeave,\n    onClick,\n    \"data-testid\": \"radar-entry\"\n  }, \" \", open && /* @__PURE__ */ React.createElement(RadarDescription, {\n    open,\n    onClose: handleClose,\n    title: title ? title : \"no title\",\n    description: description ? description : \"no description\",\n    url\n  }), description ? /* @__PURE__ */ React.createElement(\"a\", {\n    className: classes.link,\n    onClick: handleClickOpen,\n    role: \"button\",\n    href: \"#\",\n    tabIndex: 0,\n    onKeyPress: toggle\n  }, blip) : /* @__PURE__ */ React.createElement(WithLink, {\n    url,\n    className: classes.link\n  }, blip), /* @__PURE__ */ React.createElement(\"text\", {\n    y: 3,\n    className: classes.text\n  }, value));\n};\n\nconst useStyles$3 = makeStyles(() => ({\n  bubble: {\n    pointerEvents: \"none\",\n    userSelect: \"none\",\n    opacity: 0\n  },\n  visibleBubble: {\n    pointerEvents: \"none\",\n    userSelect: \"none\",\n    opacity: 0.8\n  },\n  background: {\n    fill: \"#333\"\n  },\n  text: {\n    pointerEvents: \"none\",\n    userSelect: \"none\",\n    fontSize: \"10px\",\n    fill: \"#fff\"\n  }\n}));\nconst RadarBubble = (props) => {\n  const classes = useStyles$3(props);\n  const { visible, text } = props;\n  const textElem = useRef(null);\n  const svgElem = useRef(null);\n  const rectElem = useRef(null);\n  const pathElem = useRef(null);\n  const updatePosition = () => {\n    if (textElem.current) {\n      const { x, y } = props;\n      const bbox = textElem.current.getBBox();\n      const marginX = 5;\n      const marginY = 4;\n      if (svgElem.current) {\n        svgElem.current.setAttribute(\"transform\", `translate(${x - bbox.width / 2}, ${y - bbox.height - marginY})`);\n      }\n      if (rectElem.current) {\n        rectElem.current.setAttribute(\"x\", String(-marginX));\n        rectElem.current.setAttribute(\"y\", String(-bbox.height));\n        rectElem.current.setAttribute(\"width\", String(bbox.width + 2 * marginX));\n        rectElem.current.setAttribute(\"height\", String(bbox.height + marginY));\n      }\n      if (pathElem.current) {\n        pathElem.current.setAttribute(\"transform\", `translate(${bbox.width / 2 - marginX}, ${marginY - 1})`);\n      }\n    }\n  };\n  useLayoutEffect(() => {\n    updatePosition();\n  });\n  return /* @__PURE__ */ React.createElement(\"g\", {\n    ref: svgElem,\n    x: 0,\n    y: 0,\n    className: visible ? classes.visibleBubble : classes.bubble,\n    \"data-testid\": \"radar-bubble\"\n  }, /* @__PURE__ */ React.createElement(\"rect\", {\n    ref: rectElem,\n    rx: 4,\n    ry: 4,\n    className: classes.background\n  }), /* @__PURE__ */ React.createElement(\"text\", {\n    ref: textElem,\n    className: classes.text\n  }, text), /* @__PURE__ */ React.createElement(\"path\", {\n    ref: pathElem,\n    d: \"M 0,0 10,0 5,8 z\",\n    className: classes.background\n  }));\n};\n\nconst useStyles$2 = makeStyles((theme) => ({\n  text: {\n    pointerEvents: \"none\",\n    userSelect: \"none\",\n    fontSize: \"10px\",\n    fill: theme.palette.text.secondary\n  }\n}));\nconst RadarFooter = (props) => {\n  const { x, y } = props;\n  const classes = useStyles$2(props);\n  return /* @__PURE__ */ React.createElement(\"text\", {\n    \"data-testid\": \"radar-footer\",\n    transform: `translate(${x}, ${y})`,\n    className: classes.text\n  }, \"\\u25B2 moved up\\xA0\\xA0\\xA0\\xA0\\xA0\\u25BC moved down\");\n};\n\nconst useStyles$1 = makeStyles((theme) => ({\n  quadrantLegend: {\n    overflowY: \"auto\",\n    scrollbarWidth: \"thin\"\n  },\n  quadrant: {\n    height: \"100%\",\n    width: \"100%\",\n    scrollbarWidth: \"thin\",\n    pointerEvents: \"none\"\n  },\n  quadrantHeading: {\n    pointerEvents: \"none\",\n    userSelect: \"none\",\n    marginTop: 0,\n    marginBottom: theme.spacing(2),\n    fontSize: \"18px\"\n  },\n  rings: {\n    columns: 3\n  },\n  ring: {\n    breakInside: \"avoid-column\",\n    pageBreakInside: \"avoid\",\n    \"-webkit-column-break-inside\": \"avoid\",\n    fontSize: \"12px\",\n    marginBottom: theme.spacing(2)\n  },\n  ringEmpty: {\n    color: theme.palette.text.secondary\n  },\n  ringHeading: {\n    pointerEvents: \"none\",\n    userSelect: \"none\",\n    marginTop: 0,\n    marginBottom: theme.spacing(1),\n    fontSize: \"12px\",\n    fontWeight: 800\n  },\n  ringList: {\n    listStylePosition: \"inside\",\n    marginTop: 0,\n    paddingLeft: 0,\n    fontVariantNumeric: \"proportional-nums\",\n    \"-moz-font-feature-settings\": \"pnum\",\n    \"-webkit-font-feature-settings\": \"pnum\",\n    \"font-feature-settings\": \"pnum\"\n  },\n  entry: {\n    pointerEvents: \"visiblePainted\",\n    userSelect: \"none\",\n    fontSize: \"11px\"\n  },\n  entryLink: {\n    pointerEvents: \"visiblePainted\"\n  }\n}));\nconst RadarLegend = (props) => {\n  const classes = useStyles$1(props);\n  const getSegment = (segmented, quadrant, ring, ringOffset = 0) => {\n    const quadrantIndex = quadrant.index;\n    const ringIndex = ring.index;\n    const segmentedData = quadrantIndex === void 0 ? {} : segmented[quadrantIndex] || {};\n    return ringIndex === void 0 ? [] : segmentedData[ringIndex + ringOffset] || [];\n  };\n  const RadarLegendLink = ({\n    url,\n    description,\n    title\n  }) => {\n    const [open, setOpen] = React.useState(false);\n    const handleClickOpen = () => {\n      setOpen(true);\n    };\n    const handleClose = () => {\n      setOpen(false);\n    };\n    const toggle = () => {\n      setOpen(!open);\n    };\n    if (description) {\n      return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\"span\", {\n        className: classes.entryLink,\n        onClick: handleClickOpen,\n        role: \"button\",\n        tabIndex: 0,\n        onKeyPress: toggle\n      }, /* @__PURE__ */ React.createElement(\"span\", {\n        className: classes.entry\n      }, title)), open && /* @__PURE__ */ React.createElement(RadarDescription, {\n        open,\n        onClose: handleClose,\n        title: title ? title : \"no title\",\n        url,\n        description\n      }));\n    }\n    return /* @__PURE__ */ React.createElement(WithLink, {\n      url,\n      className: classes.entryLink\n    }, /* @__PURE__ */ React.createElement(\"span\", {\n      className: classes.entry\n    }, title));\n  };\n  const RadarLegendRing = ({\n    ring,\n    entries: entries2,\n    onEntryMouseEnter: onEntryMouseEnter2,\n    onEntryMouseLeave: onEntryMouseLeave2\n  }) => {\n    return /* @__PURE__ */ React.createElement(\"div\", {\n      \"data-testid\": \"radar-ring\",\n      key: ring.id,\n      className: classes.ring\n    }, /* @__PURE__ */ React.createElement(\"h3\", {\n      className: classes.ringHeading\n    }, ring.name), entries2.length === 0 ? /* @__PURE__ */ React.createElement(\"p\", {\n      className: classes.ringEmpty\n    }, \"(empty)\") : /* @__PURE__ */ React.createElement(\"ol\", {\n      className: classes.ringList\n    }, entries2.map((entry) => /* @__PURE__ */ React.createElement(\"li\", {\n      key: entry.id,\n      value: (entry.index || 0) + 1,\n      onMouseEnter: onEntryMouseEnter2 && (() => onEntryMouseEnter2(entry)),\n      onMouseLeave: onEntryMouseLeave2 && (() => onEntryMouseLeave2(entry))\n    }, /* @__PURE__ */ React.createElement(RadarLegendLink, {\n      url: entry.url,\n      title: entry.title,\n      description: entry.description\n    })))));\n  };\n  const RadarLegendQuadrant = ({\n    segments: segments2,\n    quadrant,\n    rings: rings2,\n    onEntryMouseEnter: onEntryMouseEnter2,\n    onEntryMouseLeave: onEntryMouseLeave2\n  }) => {\n    return /* @__PURE__ */ React.createElement(\"foreignObject\", {\n      key: quadrant.id,\n      x: quadrant.legendX,\n      y: quadrant.legendY,\n      width: quadrant.legendWidth,\n      height: quadrant.legendHeight,\n      className: classes.quadrantLegend,\n      \"data-testid\": \"radar-quadrant\"\n    }, /* @__PURE__ */ React.createElement(\"div\", {\n      className: classes.quadrant\n    }, /* @__PURE__ */ React.createElement(\"h2\", {\n      className: classes.quadrantHeading\n    }, quadrant.name), /* @__PURE__ */ React.createElement(\"div\", {\n      className: classes.rings\n    }, rings2.map((ring) => /* @__PURE__ */ React.createElement(RadarLegendRing, {\n      key: ring.id,\n      ring,\n      entries: getSegment(segments2, quadrant, ring),\n      onEntryMouseEnter: onEntryMouseEnter2,\n      onEntryMouseLeave: onEntryMouseLeave2\n    })))));\n  };\n  const setupSegments = (entries2) => {\n    const segments2 = {};\n    for (const entry of entries2) {\n      const quadrantIndex = entry.quadrant.index;\n      const ringIndex = entry.ring.index;\n      let quadrantData = {};\n      if (quadrantIndex !== void 0) {\n        if (segments2[quadrantIndex] === void 0) {\n          segments2[quadrantIndex] = {};\n        }\n        quadrantData = segments2[quadrantIndex];\n      }\n      let ringData = [];\n      if (ringIndex !== void 0) {\n        if (quadrantData[ringIndex] === void 0) {\n          quadrantData[ringIndex] = [];\n        }\n        ringData = quadrantData[ringIndex];\n      }\n      ringData.push(entry);\n    }\n    return segments2;\n  };\n  const { quadrants, rings, entries, onEntryMouseEnter, onEntryMouseLeave } = props;\n  const segments = setupSegments(entries);\n  return /* @__PURE__ */ React.createElement(\"g\", {\n    \"data-testid\": \"radar-legend\"\n  }, quadrants.map((quadrant) => /* @__PURE__ */ React.createElement(RadarLegendQuadrant, {\n    key: quadrant.id,\n    segments,\n    quadrant,\n    rings,\n    onEntryMouseEnter,\n    onEntryMouseLeave\n  })));\n};\n\nconst RadarPlot = (props) => {\n  const {\n    width,\n    height,\n    radius,\n    quadrants,\n    rings,\n    entries,\n    activeEntry,\n    onEntryMouseEnter,\n    onEntryMouseLeave\n  } = props;\n  return /* @__PURE__ */ React.createElement(\"g\", {\n    \"data-testid\": \"radar-plot\"\n  }, /* @__PURE__ */ React.createElement(RadarLegend, {\n    quadrants,\n    rings,\n    entries,\n    onEntryMouseEnter: onEntryMouseEnter && ((entry) => onEntryMouseEnter(entry)),\n    onEntryMouseLeave: onEntryMouseLeave && ((entry) => onEntryMouseLeave(entry))\n  }), /* @__PURE__ */ React.createElement(\"g\", {\n    transform: `translate(${width / 2}, ${height / 2})`\n  }, /* @__PURE__ */ React.createElement(RadarGrid, {\n    radius,\n    rings\n  }), /* @__PURE__ */ React.createElement(RadarFooter, {\n    x: -0.5 * width,\n    y: 0.5 * height\n  }), entries.map((entry) => /* @__PURE__ */ React.createElement(RadarEntry, {\n    key: entry.id,\n    x: entry.x || 0,\n    y: entry.y || 0,\n    color: entry.color || \"\",\n    value: ((entry == null ? void 0 : entry.index) || 0) + 1,\n    url: entry.url,\n    description: entry.description,\n    moved: entry.moved,\n    title: entry.title,\n    onMouseEnter: onEntryMouseEnter && (() => onEntryMouseEnter(entry)),\n    onMouseLeave: onEntryMouseLeave && (() => onEntryMouseLeave(entry))\n  })), /* @__PURE__ */ React.createElement(RadarBubble, {\n    visible: !!activeEntry,\n    text: (activeEntry == null ? void 0 : activeEntry.title) || \"\",\n    x: (activeEntry == null ? void 0 : activeEntry.x) || 0,\n    y: (activeEntry == null ? void 0 : activeEntry.y) || 0\n  })));\n};\n\nclass Segment {\n  constructor(quadrant, ring, radius, nextSeed) {\n    this.nextSeed = nextSeed;\n    this.polarMin = {\n      t: quadrant.radialMin,\n      r: ring.innerRadius\n    };\n    this.polarMax = {\n      t: quadrant.radialMax,\n      r: ring.outerRadius\n    };\n    this.cartesianMin = {\n      x: 15 * quadrant.offsetX,\n      y: 15 * quadrant.offsetY\n    };\n    this.cartesianMax = {\n      x: radius * quadrant.offsetX,\n      y: radius * quadrant.offsetY\n    };\n  }\n  clipx(d) {\n    const c = boundedBox(d, this.cartesianMin, this.cartesianMax);\n    const p = boundedRing(polar(c), this.polarMin.r + 15, this.polarMax.r - 15);\n    d.x = cartesian(p).x;\n    return d.x;\n  }\n  clipy(d) {\n    const c = boundedBox(d, this.cartesianMin, this.cartesianMax);\n    const p = boundedRing(polar(c), this.polarMin.r + 15, this.polarMax.r - 15);\n    d.y = cartesian(p).y;\n    return d.y;\n  }\n  random() {\n    return cartesian({\n      t: this._randomBetween(this.polarMin.t, this.polarMax.t),\n      r: this._normalBetween(this.polarMin.r, this.polarMax.r)\n    });\n  }\n  _random() {\n    const x = Math.sin(this.nextSeed()) * 1e4;\n    return x - Math.floor(x);\n  }\n  _randomBetween(min, max) {\n    return min + this._random() * (max - min);\n  }\n  _normalBetween(min, max) {\n    return min + (this._random() + this._random()) * 0.5 * (max - min);\n  }\n}\nfunction polar({ x, y }) {\n  return {\n    t: Math.atan2(y, x),\n    r: Math.sqrt(x * x + y * y)\n  };\n}\nfunction cartesian({ r, t }) {\n  return {\n    x: r * Math.cos(t),\n    y: r * Math.sin(t)\n  };\n}\nfunction boundedInterval(value, min, max) {\n  const low = Math.min(min, max);\n  const high = Math.max(min, max);\n  return Math.min(Math.max(value, low), high);\n}\nfunction boundedRing(polarValue, rMin, rMax) {\n  return {\n    t: polarValue.t,\n    r: boundedInterval(polarValue.r, rMin, rMax)\n  };\n}\nfunction boundedBox(point, min, max) {\n  return {\n    x: boundedInterval(point.x, min.x, max.x),\n    y: boundedInterval(point.y, min.y, max.y)\n  };\n}\n\nconst adjustQuadrants = (quadrants, radius, width, height) => {\n  const margin = 16;\n  const xStops = [\n    margin,\n    width / 2 - radius - margin,\n    width / 2 + radius + margin,\n    width - margin\n  ];\n  const yStops = [margin, height / 2 - margin, height / 2, height - margin];\n  const legendParams = [\n    {\n      x: xStops[2],\n      y: yStops[2],\n      width: xStops[3] - xStops[2],\n      height: yStops[3] - yStops[2]\n    },\n    {\n      x: xStops[0],\n      y: yStops[2],\n      width: xStops[1] - xStops[0],\n      height: yStops[3] - yStops[2]\n    },\n    {\n      x: xStops[0],\n      y: yStops[0],\n      width: xStops[1] - xStops[0],\n      height: yStops[1] - yStops[0]\n    },\n    {\n      x: xStops[2],\n      y: yStops[0],\n      width: xStops[3] - xStops[2],\n      height: yStops[1] - yStops[0]\n    }\n  ];\n  quadrants.forEach((quadrant, index) => {\n    const legendParam = legendParams[index % 4];\n    quadrant.index = index;\n    quadrant.radialMin = index * Math.PI / 2;\n    quadrant.radialMax = (index + 1) * Math.PI / 2;\n    quadrant.offsetX = index % 4 === 0 || index % 4 === 3 ? 1 : -1;\n    quadrant.offsetY = index % 4 === 0 || index % 4 === 1 ? 1 : -1;\n    quadrant.legendX = legendParam.x;\n    quadrant.legendY = legendParam.y;\n    quadrant.legendWidth = legendParam.width;\n    quadrant.legendHeight = legendParam.height;\n  });\n};\nconst adjustEntries = (entries, quadrants, rings, radius, activeEntry) => {\n  let seed = 42;\n  entries.forEach((entry, index) => {\n    const quadrant = quadrants.find((q) => {\n      const match = typeof entry.quadrant === \"object\" ? entry.quadrant.id : entry.quadrant;\n      return q.id === match;\n    });\n    const ring = rings.find((r) => {\n      const match = typeof entry.ring === \"object\" ? entry.ring.id : entry.ring;\n      return r.id === match;\n    });\n    if (!quadrant) {\n      throw new Error(`Unknown quadrant ${entry.quadrant} for entry ${entry.id}!`);\n    }\n    if (!ring) {\n      throw new Error(`Unknown ring ${entry.ring} for entry ${entry.id}!`);\n    }\n    entry.index = index;\n    entry.quadrant = quadrant;\n    entry.ring = ring;\n    entry.segment = new Segment(quadrant, ring, radius, () => seed++);\n    const point = entry.segment.random();\n    entry.x = point.x;\n    entry.y = point.y;\n    entry.active = activeEntry ? entry.id === activeEntry.id : false;\n    entry.color = entry.active ? entry.ring.color : color(entry.ring.color).desaturate(0.5).lighten(0.1).string();\n  });\n  const simulation = forceSimulation().nodes(entries).velocityDecay(0.19).force(\"collision\", forceCollide().radius(12).strength(0.85)).stop();\n  for (let i = 0, n = Math.ceil(Math.log(simulation.alphaMin()) / Math.log(1 - simulation.alphaDecay())); i < n; ++i) {\n    simulation.tick();\n    for (const entry of entries) {\n      if (entry.segment) {\n        entry.x = entry.segment.clipx(entry);\n        entry.y = entry.segment.clipy(entry);\n      }\n    }\n  }\n};\nconst adjustRings = (rings, radius) => {\n  rings.forEach((ring, index) => {\n    ring.index = index;\n    ring.outerRadius = (index + 2) / (rings.length + 1) * radius;\n    ring.innerRadius = (index === 0 ? 0 : index + 1) / (rings.length + 1) * radius;\n  });\n};\n\nconst Radar = (props) => {\n  const { width, height, quadrants, rings, entries } = props;\n  const radius = Math.min(width, height) / 2;\n  const [activeEntry, setActiveEntry] = useState();\n  const node = useRef(null);\n  adjustQuadrants(quadrants, radius, width, height);\n  adjustRings(rings, radius);\n  adjustEntries(entries, quadrants, rings, radius, activeEntry);\n  return /* @__PURE__ */ React.createElement(\"svg\", {\n    ref: node,\n    width,\n    height,\n    ...props.svgProps\n  }, /* @__PURE__ */ React.createElement(RadarPlot, {\n    width,\n    height,\n    radius,\n    entries,\n    quadrants,\n    rings,\n    activeEntry,\n    onEntryMouseEnter: (entry) => setActiveEntry(entry),\n    onEntryMouseLeave: () => setActiveEntry(void 0)\n  }));\n};\n\nconst useTechRadarLoader = (id) => {\n  const errorApi = useApi(errorApiRef);\n  const techRadarApi = useApi(techRadarApiRef);\n  const { error, value, loading } = useAsync(async () => techRadarApi.load(id), [techRadarApi, id]);\n  useEffect(() => {\n    if (error) {\n      errorApi.post(error);\n    }\n  }, [error, errorApi]);\n  return { loading, value, error };\n};\nfunction matchFilter(filter) {\n  const terms = filter == null ? void 0 : filter.toLocaleLowerCase(\"en-US\").split(/\\s/).map((e) => e.trim()).filter(Boolean);\n  if (!(terms == null ? void 0 : terms.length)) {\n    return () => true;\n  }\n  return (entry) => {\n    var _a;\n    const text = `${entry.title} ${((_a = entry.timeline[0]) == null ? void 0 : _a.description) || \"\"}`.toLocaleLowerCase(\"en-US\");\n    return terms.every((term) => text.includes(term));\n  };\n}\nfunction RadarComponent(props) {\n  const { loading, error, value: data } = useTechRadarLoader(props.id);\n  const mapToEntries = (loaderResponse) => {\n    return loaderResponse.entries.filter(matchFilter(props.searchText)).map((entry) => ({\n      id: entry.key,\n      quadrant: loaderResponse.quadrants.find((q) => q.id === entry.quadrant),\n      title: entry.title,\n      ring: loaderResponse.rings.find((r) => r.id === entry.timeline[0].ringId),\n      timeline: entry.timeline.map((e) => {\n        return {\n          date: e.date,\n          ring: loaderResponse.rings.find((a) => a.id === e.ringId),\n          description: e.description,\n          moved: e.moved\n        };\n      }),\n      moved: entry.timeline[0].moved,\n      description: entry.description || entry.timeline[0].description,\n      url: entry.url\n    }));\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, loading && /* @__PURE__ */ React.createElement(Progress, null), !loading && !error && data && /* @__PURE__ */ React.createElement(Radar, {\n    ...props,\n    rings: data.rings,\n    quadrants: data.quadrants,\n    entries: mapToEntries(data)\n  }));\n}\n\nconst useStyles = makeStyles(() => ({\n  overflowXScroll: {\n    overflowX: \"scroll\"\n  }\n}));\nfunction RadarPage(props) {\n  const {\n    title = \"Tech Radar\",\n    subtitle = \"Pick the recommended technologies for your projects\",\n    pageTitle = \"Company Radar\",\n    ...componentProps\n  } = props;\n  const classes = useStyles();\n  const [searchText, setSearchText] = React.useState(\"\");\n  return /* @__PURE__ */ React.createElement(Page, {\n    themeId: \"tool\"\n  }, /* @__PURE__ */ React.createElement(Header, {\n    title,\n    subtitle\n  }), /* @__PURE__ */ React.createElement(Content, {\n    className: classes.overflowXScroll\n  }, /* @__PURE__ */ React.createElement(ContentHeader, {\n    title: pageTitle\n  }, /* @__PURE__ */ React.createElement(Input, {\n    id: \"tech-radar-filter\",\n    type: \"search\",\n    placeholder: \"Filter\",\n    onChange: (e) => setSearchText(e.target.value)\n  }), /* @__PURE__ */ React.createElement(SupportButton, null, \"This is used for visualizing the official guidelines of different areas of software development such as languages, frameworks, infrastructure and processes.\")), /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    spacing: 3,\n    direction: \"row\"\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    md: 4\n  }, /* @__PURE__ */ React.createElement(RadarComponent, {\n    searchText,\n    ...componentProps\n  })))));\n}\n\nvar RadarPage$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  RadarPage: RadarPage\n});\n\nconst rings = new Array();\nrings.push({ id: \"use\", name: \"USE\", color: \"#93c47d\" });\nrings.push({ id: \"trial\", name: \"TRIAL\", color: \"#93d2c2\" });\nrings.push({ id: \"assess\", name: \"ASSESS\", color: \"#fbdb84\" });\nrings.push({ id: \"hold\", name: \"HOLD\", color: \"#efafa9\" });\nconst quadrants = new Array();\nquadrants.push({ id: \"infrastructure\", name: \"Infrastructure\" });\nquadrants.push({ id: \"frameworks\", name: \"Frameworks\" });\nquadrants.push({ id: \"languages\", name: \"Languages\" });\nquadrants.push({ id: \"process\", name: \"Process\" });\nconst entries = new Array();\nentries.push({\n  timeline: [\n    {\n      moved: 0,\n      ringId: \"use\",\n      date: new Date(\"2020-08-06\"),\n      description: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua\"\n    }\n  ],\n  url: \"#\",\n  key: \"javascript\",\n  id: \"javascript\",\n  title: \"JavaScript\",\n  quadrant: \"languages\",\n  description: 'Excepteur **sint** occaecat *cupidatat* non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\\n\\n```ts\\nconst x = \"3\";\\n```\\n'\n});\nentries.push({\n  timeline: [\n    {\n      moved: -1,\n      ringId: \"use\",\n      date: new Date(\"2020-08-06\"),\n      description: \"Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat\"\n    }\n  ],\n  url: \"#\",\n  key: \"typescript\",\n  id: \"typescript\",\n  title: \"TypeScript\",\n  quadrant: \"languages\",\n  description: \"Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat\"\n});\nentries.push({\n  timeline: [\n    {\n      moved: 1,\n      ringId: \"use\",\n      date: new Date(\"2020-08-06\"),\n      description: \"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur\"\n    }\n  ],\n  url: \"https://webpack.js.org/\",\n  key: \"webpack\",\n  id: \"webpack\",\n  title: \"Webpack\",\n  quadrant: \"frameworks\"\n});\nentries.push({\n  timeline: [\n    {\n      moved: 0,\n      ringId: \"use\",\n      date: new Date(\"2020-08-06\")\n    }\n  ],\n  url: \"https://reactjs.org/\",\n  key: \"react\",\n  id: \"react\",\n  title: \"React\",\n  quadrant: \"frameworks\"\n});\nentries.push({\n  timeline: [\n    {\n      moved: 0,\n      ringId: \"use\",\n      date: new Date(\"2020-08-06\")\n    }\n  ],\n  url: \"#\",\n  key: \"code-reviews\",\n  id: \"code-reviews\",\n  title: \"Code Reviews\",\n  quadrant: \"process\"\n});\nentries.push({\n  timeline: [\n    {\n      moved: 0,\n      ringId: \"assess\",\n      date: new Date(\"2020-08-06\")\n    }\n  ],\n  url: \"#\",\n  key: \"mob-programming\",\n  id: \"mob-programming\",\n  title: \"Mob Programming\",\n  quadrant: \"process\"\n});\nentries.push({\n  timeline: [\n    {\n      moved: 0,\n      ringId: \"use\",\n      date: new Date(\"2020-08-06\")\n    }\n  ],\n  url: \"#\",\n  key: \"docs-like-code\",\n  id: \"docs-like-code\",\n  title: \"Docs-like-code\",\n  quadrant: \"process\"\n});\nentries.push({\n  timeline: [\n    {\n      ringId: \"hold\",\n      date: new Date(\"2020-08-06\")\n    }\n  ],\n  url: \"#\",\n  key: \"force-push\",\n  id: \"force-push\",\n  title: \"Force push to master\",\n  quadrant: \"process\"\n});\nentries.push({\n  timeline: [\n    {\n      ringId: \"use\",\n      date: new Date(\"2020-08-06\"),\n      description: \"long description\"\n    }\n  ],\n  url: \"https://github.com\",\n  key: \"github-actions\",\n  id: \"github-actions\",\n  title: \"GitHub Actions\",\n  quadrant: \"infrastructure\"\n});\nconst mock = {\n  entries,\n  quadrants,\n  rings\n};\nclass SampleTechRadarApi {\n  async load() {\n    return mock;\n  }\n}\n\nconst rootRouteRef = createRouteRef({\n  id: \"tech-radar\"\n});\nconst techRadarPlugin = createPlugin({\n  id: \"tech-radar\",\n  routes: {\n    root: rootRouteRef\n  },\n  apis: [createApiFactory(techRadarApiRef, new SampleTechRadarApi())]\n});\nconst TechRadarPage = techRadarPlugin.provide(createRoutableExtension({\n  name: \"TechRadarPage\",\n  component: () => Promise.resolve().then(function () { return RadarPage$1; }).then((m) => m.RadarPage),\n  mountPoint: rootRouteRef\n}));\n\nconst Router = RadarPage;\n\nexport { MovedState, RadarPage, Router, RadarComponent as TechRadarComponent, TechRadarPage, techRadarPlugin as plugin, techRadarApiRef, techRadarPlugin };\n//# sourceMappingURL=index.esm.js.map\n","import React, { useCallback, memo, useState, useContext, useMemo, useEffect } from 'react';\nimport { useOutlet } from 'react-router-dom';\nimport { attachComponentData, createReactExtension, useElementFilter, createApiRef, useApi } from '@backstage/core-plugin-api';\nimport useAsync from 'react-use/lib/useAsync';\nimport { stringifyEntityRef } from '@backstage/catalog-model';\nimport { createVersionedContext, createVersionedValueMap } from '@backstage/version-bridge';\nimport debounce from 'lodash/debounce';\n\nconst TECHDOCS_ADDONS_KEY = \"techdocs.addons.addon.v1\";\nconst TECHDOCS_ADDONS_WRAPPER_KEY = \"techdocs.addons.wrapper.v1\";\nconst TechDocsAddons = () => null;\nattachComponentData(TechDocsAddons, TECHDOCS_ADDONS_WRAPPER_KEY, true);\nconst getDataKeyByName = (name) => {\n  return `${TECHDOCS_ADDONS_KEY}.${name.toLocaleLowerCase(\"en-US\")}`;\n};\nfunction createTechDocsAddonExtension(options) {\n  const { name, component: TechDocsAddon } = options;\n  return createReactExtension({\n    name,\n    component: {\n      sync: (props) => /* @__PURE__ */ React.createElement(TechDocsAddon, {\n        ...props\n      })\n    },\n    data: {\n      [TECHDOCS_ADDONS_KEY]: options,\n      [getDataKeyByName(name)]: true\n    }\n  });\n}\nconst getTechDocsAddonByName = (collection, key) => {\n  return collection.selectByComponentData({ key }).getElements()[0];\n};\nconst getAllTechDocsAddons = (collection) => {\n  return collection.selectByComponentData({\n    key: TECHDOCS_ADDONS_WRAPPER_KEY\n  }).selectByComponentData({\n    key: TECHDOCS_ADDONS_KEY\n  });\n};\nconst getAllTechDocsAddonsData = (collection) => {\n  return collection.selectByComponentData({\n    key: TECHDOCS_ADDONS_WRAPPER_KEY\n  }).findComponentData({\n    key: TECHDOCS_ADDONS_KEY\n  });\n};\nconst useTechDocsAddons = () => {\n  const node = useOutlet();\n  const collection = useElementFilter(node, getAllTechDocsAddons);\n  const options = useElementFilter(node, getAllTechDocsAddonsData);\n  const findAddonByData = useCallback((data) => {\n    var _a;\n    if (!collection || !data)\n      return null;\n    const nameKey = getDataKeyByName(data.name);\n    return (_a = getTechDocsAddonByName(collection, nameKey)) != null ? _a : null;\n  }, [collection]);\n  const renderComponentByName = useCallback((name) => {\n    const data = options.find((option) => option.name === name);\n    return data ? findAddonByData(data) : null;\n  }, [options, findAddonByData]);\n  const renderComponentsByLocation = useCallback((location) => {\n    const data = options.filter((option) => option.location === location);\n    return data.length ? data.map(findAddonByData) : null;\n  }, [options, findAddonByData]);\n  return { renderComponentByName, renderComponentsByLocation };\n};\n\nconst techdocsApiRef = createApiRef({\n  id: \"plugin.techdocs.service\"\n});\n\nconst areEntityRefsEqual = (prevEntityRef, nextEntityRef) => {\n  return stringifyEntityRef(prevEntityRef) === stringifyEntityRef(nextEntityRef);\n};\nconst defaultTechDocsReaderPageValue = {\n  title: \"\",\n  subtitle: \"\",\n  setTitle: () => {\n  },\n  setSubtitle: () => {\n  },\n  setShadowRoot: () => {\n  },\n  metadata: { loading: true },\n  entityMetadata: { loading: true },\n  entityRef: { kind: \"\", name: \"\", namespace: \"\" }\n};\nconst TechDocsReaderPageContext = createVersionedContext(\"techdocs-reader-page-context\");\nconst TechDocsReaderPageProvider = memo(({ entityRef, children }) => {\n  const techdocsApi = useApi(techdocsApiRef);\n  const metadata = useAsync(async () => {\n    return techdocsApi.getTechDocsMetadata(entityRef);\n  }, [entityRef]);\n  const entityMetadata = useAsync(async () => {\n    return techdocsApi.getEntityMetadata(entityRef);\n  }, [entityRef]);\n  const [title, setTitle] = useState(defaultTechDocsReaderPageValue.title);\n  const [subtitle, setSubtitle] = useState(defaultTechDocsReaderPageValue.subtitle);\n  const [shadowRoot, setShadowRoot] = useState(defaultTechDocsReaderPageValue.shadowRoot);\n  const value = {\n    metadata,\n    entityRef,\n    entityMetadata,\n    shadowRoot,\n    setShadowRoot,\n    title,\n    setTitle,\n    subtitle,\n    setSubtitle\n  };\n  const versionedValue = createVersionedValueMap({ 1: value });\n  return /* @__PURE__ */ React.createElement(TechDocsReaderPageContext.Provider, {\n    value: versionedValue\n  }, children instanceof Function ? children(value) : children);\n}, (prevProps, nextProps) => {\n  return areEntityRefsEqual(prevProps.entityRef, nextProps.entityRef);\n});\nconst useTechDocsReaderPage = () => {\n  const versionedContext = useContext(TechDocsReaderPageContext);\n  if (versionedContext === void 0) {\n    return defaultTechDocsReaderPageValue;\n  }\n  const context = versionedContext.atVersion(1);\n  if (context === void 0) {\n    throw new Error(\"No context found for version 1.\");\n  }\n  return context;\n};\n\nconst useShadowRoot = () => {\n  const { shadowRoot } = useTechDocsReaderPage();\n  return shadowRoot;\n};\nconst useShadowRootElements = (selectors) => {\n  const shadowRoot = useShadowRoot();\n  if (!shadowRoot)\n    return [];\n  return selectors.map((selector) => shadowRoot == null ? void 0 : shadowRoot.querySelectorAll(selector)).filter((nodeList) => nodeList.length).map((nodeList) => Array.from(nodeList)).flat();\n};\nconst isValidSelection = (newSelection) => {\n  return newSelection.toString() && newSelection.rangeCount && newSelection.getRangeAt(0).getBoundingClientRect().top;\n};\nconst useShadowRootSelection = (wait = 0) => {\n  const shadowRoot = useShadowRoot();\n  const [selection, setSelection] = useState(null);\n  const handleSelectionChange = useMemo(() => debounce(() => {\n    const shadowDocument = shadowRoot;\n    const newSelection = shadowDocument.getSelection ? shadowDocument.getSelection() : document.getSelection();\n    if (newSelection && isValidSelection(newSelection)) {\n      setSelection(newSelection);\n    } else {\n      setSelection(null);\n    }\n  }, wait), [shadowRoot, setSelection, wait]);\n  useEffect(() => {\n    window.document.addEventListener(\"selectionchange\", handleSelectionChange);\n    return () => window.document.removeEventListener(\"selectionchange\", handleSelectionChange);\n  }, [handleSelectionChange]);\n  return selection;\n};\n\nconst TechDocsAddonLocations = Object.freeze({\n  Header: \"Header\",\n  Subheader: \"Subheader\",\n  PrimarySidebar: \"PrimarySidebar\",\n  SecondarySidebar: \"SecondarySidebar\",\n  Content: \"Content\"\n});\n\nexport { TECHDOCS_ADDONS_WRAPPER_KEY, TechDocsAddonLocations, TechDocsAddons, TechDocsReaderPageProvider, createTechDocsAddonExtension, defaultTechDocsReaderPageValue, techdocsApiRef, useShadowRoot, useShadowRootElements, useShadowRootSelection, useTechDocsAddons, useTechDocsReaderPage };\n//# sourceMappingURL=index.esm.js.map\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport isInBrowser from 'is-in-browser';\nimport warning from 'tiny-warning';\nimport _createClass from '@babel/runtime/helpers/esm/createClass';\nimport _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\n\nvar plainObjectConstrurctor = {}.constructor;\nfunction cloneStyle(style) {\n  if (style == null || typeof style !== 'object') return style;\n  if (Array.isArray(style)) return style.map(cloneStyle);\n  if (style.constructor !== plainObjectConstrurctor) return style;\n  var newStyle = {};\n\n  for (var name in style) {\n    newStyle[name] = cloneStyle(style[name]);\n  }\n\n  return newStyle;\n}\n\n/**\n * Create a rule instance.\n */\n\nfunction createRule(name, decl, options) {\n  if (name === void 0) {\n    name = 'unnamed';\n  }\n\n  var jss = options.jss;\n  var declCopy = cloneStyle(decl);\n  var rule = jss.plugins.onCreateRule(name, declCopy, options);\n  if (rule) return rule; // It is an at-rule and it has no instance.\n\n  if (name[0] === '@') {\n    process.env.NODE_ENV !== \"production\" ? warning(false, \"[JSS] Unknown rule \" + name) : void 0;\n  }\n\n  return null;\n}\n\nvar join = function join(value, by) {\n  var result = '';\n\n  for (var i = 0; i < value.length; i++) {\n    // Remove !important from the value, it will be readded later.\n    if (value[i] === '!important') break;\n    if (result) result += by;\n    result += value[i];\n  }\n\n  return result;\n};\n/**\n * Converts JSS array value to a CSS string.\n *\n * `margin: [['5px', '10px']]` > `margin: 5px 10px;`\n * `border: ['1px', '2px']` > `border: 1px, 2px;`\n * `margin: [['5px', '10px'], '!important']` > `margin: 5px 10px !important;`\n * `color: ['red', !important]` > `color: red !important;`\n */\n\n\nvar toCssValue = function toCssValue(value, ignoreImportant) {\n  if (ignoreImportant === void 0) {\n    ignoreImportant = false;\n  }\n\n  if (!Array.isArray(value)) return value;\n  var cssValue = ''; // Support space separated values via `[['5px', '10px']]`.\n\n  if (Array.isArray(value[0])) {\n    for (var i = 0; i < value.length; i++) {\n      if (value[i] === '!important') break;\n      if (cssValue) cssValue += ', ';\n      cssValue += join(value[i], ' ');\n    }\n  } else cssValue = join(value, ', '); // Add !important, because it was ignored.\n\n\n  if (!ignoreImportant && value[value.length - 1] === '!important') {\n    cssValue += ' !important';\n  }\n\n  return cssValue;\n};\n\nfunction getWhitespaceSymbols(options) {\n  if (options && options.format === false) {\n    return {\n      linebreak: '',\n      space: ''\n    };\n  }\n\n  return {\n    linebreak: '\\n',\n    space: ' '\n  };\n}\n\n/**\n * Indent a string.\n * http://jsperf.com/array-join-vs-for\n */\n\nfunction indentStr(str, indent) {\n  var result = '';\n\n  for (var index = 0; index < indent; index++) {\n    result += '  ';\n  }\n\n  return result + str;\n}\n/**\n * Converts a Rule to CSS string.\n */\n\n\nfunction toCss(selector, style, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var result = '';\n  if (!style) return result;\n  var _options = options,\n      _options$indent = _options.indent,\n      indent = _options$indent === void 0 ? 0 : _options$indent;\n  var fallbacks = style.fallbacks;\n\n  if (options.format === false) {\n    indent = -Infinity;\n  }\n\n  var _getWhitespaceSymbols = getWhitespaceSymbols(options),\n      linebreak = _getWhitespaceSymbols.linebreak,\n      space = _getWhitespaceSymbols.space;\n\n  if (selector) indent++; // Apply fallbacks first.\n\n  if (fallbacks) {\n    // Array syntax {fallbacks: [{prop: value}]}\n    if (Array.isArray(fallbacks)) {\n      for (var index = 0; index < fallbacks.length; index++) {\n        var fallback = fallbacks[index];\n\n        for (var prop in fallback) {\n          var value = fallback[prop];\n\n          if (value != null) {\n            if (result) result += linebreak;\n            result += indentStr(prop + \":\" + space + toCssValue(value) + \";\", indent);\n          }\n        }\n      }\n    } else {\n      // Object syntax {fallbacks: {prop: value}}\n      for (var _prop in fallbacks) {\n        var _value = fallbacks[_prop];\n\n        if (_value != null) {\n          if (result) result += linebreak;\n          result += indentStr(_prop + \":\" + space + toCssValue(_value) + \";\", indent);\n        }\n      }\n    }\n  }\n\n  for (var _prop2 in style) {\n    var _value2 = style[_prop2];\n\n    if (_value2 != null && _prop2 !== 'fallbacks') {\n      if (result) result += linebreak;\n      result += indentStr(_prop2 + \":\" + space + toCssValue(_value2) + \";\", indent);\n    }\n  } // Allow empty style in this case, because properties will be added dynamically.\n\n\n  if (!result && !options.allowEmpty) return result; // When rule is being stringified before selector was defined.\n\n  if (!selector) return result;\n  indent--;\n  if (result) result = \"\" + linebreak + result + linebreak;\n  return indentStr(\"\" + selector + space + \"{\" + result, indent) + indentStr('}', indent);\n}\n\nvar escapeRegex = /([[\\].#*$><+~=|^:(),\"'`\\s])/g;\nvar nativeEscape = typeof CSS !== 'undefined' && CSS.escape;\nvar escape = (function (str) {\n  return nativeEscape ? nativeEscape(str) : str.replace(escapeRegex, '\\\\$1');\n});\n\nvar BaseStyleRule =\n/*#__PURE__*/\nfunction () {\n  function BaseStyleRule(key, style, options) {\n    this.type = 'style';\n    this.isProcessed = false;\n    var sheet = options.sheet,\n        Renderer = options.Renderer;\n    this.key = key;\n    this.options = options;\n    this.style = style;\n    if (sheet) this.renderer = sheet.renderer;else if (Renderer) this.renderer = new Renderer();\n  }\n  /**\n   * Get or set a style property.\n   */\n\n\n  var _proto = BaseStyleRule.prototype;\n\n  _proto.prop = function prop(name, value, options) {\n    // It's a getter.\n    if (value === undefined) return this.style[name]; // Don't do anything if the value has not changed.\n\n    var force = options ? options.force : false;\n    if (!force && this.style[name] === value) return this;\n    var newValue = value;\n\n    if (!options || options.process !== false) {\n      newValue = this.options.jss.plugins.onChangeValue(value, name, this);\n    }\n\n    var isEmpty = newValue == null || newValue === false;\n    var isDefined = name in this.style; // Value is empty and wasn't defined before.\n\n    if (isEmpty && !isDefined && !force) return this; // We are going to remove this value.\n\n    var remove = isEmpty && isDefined;\n    if (remove) delete this.style[name];else this.style[name] = newValue; // Renderable is defined if StyleSheet option `link` is true.\n\n    if (this.renderable && this.renderer) {\n      if (remove) this.renderer.removeProperty(this.renderable, name);else this.renderer.setProperty(this.renderable, name, newValue);\n      return this;\n    }\n\n    var sheet = this.options.sheet;\n\n    if (sheet && sheet.attached) {\n      process.env.NODE_ENV !== \"production\" ? warning(false, '[JSS] Rule is not linked. Missing sheet option \"link: true\".') : void 0;\n    }\n\n    return this;\n  };\n\n  return BaseStyleRule;\n}();\nvar StyleRule =\n/*#__PURE__*/\nfunction (_BaseStyleRule) {\n  _inheritsLoose(StyleRule, _BaseStyleRule);\n\n  function StyleRule(key, style, options) {\n    var _this;\n\n    _this = _BaseStyleRule.call(this, key, style, options) || this;\n    var selector = options.selector,\n        scoped = options.scoped,\n        sheet = options.sheet,\n        generateId = options.generateId;\n\n    if (selector) {\n      _this.selectorText = selector;\n    } else if (scoped !== false) {\n      _this.id = generateId(_assertThisInitialized(_assertThisInitialized(_this)), sheet);\n      _this.selectorText = \".\" + escape(_this.id);\n    }\n\n    return _this;\n  }\n  /**\n   * Set selector string.\n   * Attention: use this with caution. Most browsers didn't implement\n   * selectorText setter, so this may result in rerendering of entire Style Sheet.\n   */\n\n\n  var _proto2 = StyleRule.prototype;\n\n  /**\n   * Apply rule to an element inline.\n   */\n  _proto2.applyTo = function applyTo(renderable) {\n    var renderer = this.renderer;\n\n    if (renderer) {\n      var json = this.toJSON();\n\n      for (var prop in json) {\n        renderer.setProperty(renderable, prop, json[prop]);\n      }\n    }\n\n    return this;\n  }\n  /**\n   * Returns JSON representation of the rule.\n   * Fallbacks are not supported.\n   * Useful for inline styles.\n   */\n  ;\n\n  _proto2.toJSON = function toJSON() {\n    var json = {};\n\n    for (var prop in this.style) {\n      var value = this.style[prop];\n      if (typeof value !== 'object') json[prop] = value;else if (Array.isArray(value)) json[prop] = toCssValue(value);\n    }\n\n    return json;\n  }\n  /**\n   * Generates a CSS string.\n   */\n  ;\n\n  _proto2.toString = function toString(options) {\n    var sheet = this.options.sheet;\n    var link = sheet ? sheet.options.link : false;\n    var opts = link ? _extends({}, options, {\n      allowEmpty: true\n    }) : options;\n    return toCss(this.selectorText, this.style, opts);\n  };\n\n  _createClass(StyleRule, [{\n    key: \"selector\",\n    set: function set(selector) {\n      if (selector === this.selectorText) return;\n      this.selectorText = selector;\n      var renderer = this.renderer,\n          renderable = this.renderable;\n      if (!renderable || !renderer) return;\n      var hasChanged = renderer.setSelector(renderable, selector); // If selector setter is not implemented, rerender the rule.\n\n      if (!hasChanged) {\n        renderer.replaceRule(renderable, this);\n      }\n    }\n    /**\n     * Get selector string.\n     */\n    ,\n    get: function get() {\n      return this.selectorText;\n    }\n  }]);\n\n  return StyleRule;\n}(BaseStyleRule);\nvar pluginStyleRule = {\n  onCreateRule: function onCreateRule(key, style, options) {\n    if (key[0] === '@' || options.parent && options.parent.type === 'keyframes') {\n      return null;\n    }\n\n    return new StyleRule(key, style, options);\n  }\n};\n\nvar defaultToStringOptions = {\n  indent: 1,\n  children: true\n};\nvar atRegExp = /@([\\w-]+)/;\n/**\n * Conditional rule for @media, @supports\n */\n\nvar ConditionalRule =\n/*#__PURE__*/\nfunction () {\n  function ConditionalRule(key, styles, options) {\n    this.type = 'conditional';\n    this.isProcessed = false;\n    this.key = key;\n    var atMatch = key.match(atRegExp);\n    this.at = atMatch ? atMatch[1] : 'unknown'; // Key might contain a unique suffix in case the `name` passed by user was duplicate.\n\n    this.query = options.name || \"@\" + this.at;\n    this.options = options;\n    this.rules = new RuleList(_extends({}, options, {\n      parent: this\n    }));\n\n    for (var name in styles) {\n      this.rules.add(name, styles[name]);\n    }\n\n    this.rules.process();\n  }\n  /**\n   * Get a rule.\n   */\n\n\n  var _proto = ConditionalRule.prototype;\n\n  _proto.getRule = function getRule(name) {\n    return this.rules.get(name);\n  }\n  /**\n   * Get index of a rule.\n   */\n  ;\n\n  _proto.indexOf = function indexOf(rule) {\n    return this.rules.indexOf(rule);\n  }\n  /**\n   * Create and register rule, run plugins.\n   */\n  ;\n\n  _proto.addRule = function addRule(name, style, options) {\n    var rule = this.rules.add(name, style, options);\n    if (!rule) return null;\n    this.options.jss.plugins.onProcessRule(rule);\n    return rule;\n  }\n  /**\n   * Generates a CSS string.\n   */\n  ;\n\n  _proto.toString = function toString(options) {\n    if (options === void 0) {\n      options = defaultToStringOptions;\n    }\n\n    var _getWhitespaceSymbols = getWhitespaceSymbols(options),\n        linebreak = _getWhitespaceSymbols.linebreak;\n\n    if (options.indent == null) options.indent = defaultToStringOptions.indent;\n    if (options.children == null) options.children = defaultToStringOptions.children;\n\n    if (options.children === false) {\n      return this.query + \" {}\";\n    }\n\n    var children = this.rules.toString(options);\n    return children ? this.query + \" {\" + linebreak + children + linebreak + \"}\" : '';\n  };\n\n  return ConditionalRule;\n}();\nvar keyRegExp = /@media|@supports\\s+/;\nvar pluginConditionalRule = {\n  onCreateRule: function onCreateRule(key, styles, options) {\n    return keyRegExp.test(key) ? new ConditionalRule(key, styles, options) : null;\n  }\n};\n\nvar defaultToStringOptions$1 = {\n  indent: 1,\n  children: true\n};\nvar nameRegExp = /@keyframes\\s+([\\w-]+)/;\n/**\n * Rule for @keyframes\n */\n\nvar KeyframesRule =\n/*#__PURE__*/\nfunction () {\n  function KeyframesRule(key, frames, options) {\n    this.type = 'keyframes';\n    this.at = '@keyframes';\n    this.isProcessed = false;\n    var nameMatch = key.match(nameRegExp);\n\n    if (nameMatch && nameMatch[1]) {\n      this.name = nameMatch[1];\n    } else {\n      this.name = 'noname';\n      process.env.NODE_ENV !== \"production\" ? warning(false, \"[JSS] Bad keyframes name \" + key) : void 0;\n    }\n\n    this.key = this.type + \"-\" + this.name;\n    this.options = options;\n    var scoped = options.scoped,\n        sheet = options.sheet,\n        generateId = options.generateId;\n    this.id = scoped === false ? this.name : escape(generateId(this, sheet));\n    this.rules = new RuleList(_extends({}, options, {\n      parent: this\n    }));\n\n    for (var name in frames) {\n      this.rules.add(name, frames[name], _extends({}, options, {\n        parent: this\n      }));\n    }\n\n    this.rules.process();\n  }\n  /**\n   * Generates a CSS string.\n   */\n\n\n  var _proto = KeyframesRule.prototype;\n\n  _proto.toString = function toString(options) {\n    if (options === void 0) {\n      options = defaultToStringOptions$1;\n    }\n\n    var _getWhitespaceSymbols = getWhitespaceSymbols(options),\n        linebreak = _getWhitespaceSymbols.linebreak;\n\n    if (options.indent == null) options.indent = defaultToStringOptions$1.indent;\n    if (options.children == null) options.children = defaultToStringOptions$1.children;\n\n    if (options.children === false) {\n      return this.at + \" \" + this.id + \" {}\";\n    }\n\n    var children = this.rules.toString(options);\n    if (children) children = \"\" + linebreak + children + linebreak;\n    return this.at + \" \" + this.id + \" {\" + children + \"}\";\n  };\n\n  return KeyframesRule;\n}();\nvar keyRegExp$1 = /@keyframes\\s+/;\nvar refRegExp = /\\$([\\w-]+)/g;\n\nvar findReferencedKeyframe = function findReferencedKeyframe(val, keyframes) {\n  if (typeof val === 'string') {\n    return val.replace(refRegExp, function (match, name) {\n      if (name in keyframes) {\n        return keyframes[name];\n      }\n\n      process.env.NODE_ENV !== \"production\" ? warning(false, \"[JSS] Referenced keyframes rule \\\"\" + name + \"\\\" is not defined.\") : void 0;\n      return match;\n    });\n  }\n\n  return val;\n};\n/**\n * Replace the reference for a animation name.\n */\n\n\nvar replaceRef = function replaceRef(style, prop, keyframes) {\n  var value = style[prop];\n  var refKeyframe = findReferencedKeyframe(value, keyframes);\n\n  if (refKeyframe !== value) {\n    style[prop] = refKeyframe;\n  }\n};\n\nvar pluginKeyframesRule = {\n  onCreateRule: function onCreateRule(key, frames, options) {\n    return typeof key === 'string' && keyRegExp$1.test(key) ? new KeyframesRule(key, frames, options) : null;\n  },\n  // Animation name ref replacer.\n  onProcessStyle: function onProcessStyle(style, rule, sheet) {\n    if (rule.type !== 'style' || !sheet) return style;\n    if ('animation-name' in style) replaceRef(style, 'animation-name', sheet.keyframes);\n    if ('animation' in style) replaceRef(style, 'animation', sheet.keyframes);\n    return style;\n  },\n  onChangeValue: function onChangeValue(val, prop, rule) {\n    var sheet = rule.options.sheet;\n\n    if (!sheet) {\n      return val;\n    }\n\n    switch (prop) {\n      case 'animation':\n        return findReferencedKeyframe(val, sheet.keyframes);\n\n      case 'animation-name':\n        return findReferencedKeyframe(val, sheet.keyframes);\n\n      default:\n        return val;\n    }\n  }\n};\n\nvar KeyframeRule =\n/*#__PURE__*/\nfunction (_BaseStyleRule) {\n  _inheritsLoose(KeyframeRule, _BaseStyleRule);\n\n  function KeyframeRule() {\n    return _BaseStyleRule.apply(this, arguments) || this;\n  }\n\n  var _proto = KeyframeRule.prototype;\n\n  /**\n   * Generates a CSS string.\n   */\n  _proto.toString = function toString(options) {\n    var sheet = this.options.sheet;\n    var link = sheet ? sheet.options.link : false;\n    var opts = link ? _extends({}, options, {\n      allowEmpty: true\n    }) : options;\n    return toCss(this.key, this.style, opts);\n  };\n\n  return KeyframeRule;\n}(BaseStyleRule);\nvar pluginKeyframeRule = {\n  onCreateRule: function onCreateRule(key, style, options) {\n    if (options.parent && options.parent.type === 'keyframes') {\n      return new KeyframeRule(key, style, options);\n    }\n\n    return null;\n  }\n};\n\nvar FontFaceRule =\n/*#__PURE__*/\nfunction () {\n  function FontFaceRule(key, style, options) {\n    this.type = 'font-face';\n    this.at = '@font-face';\n    this.isProcessed = false;\n    this.key = key;\n    this.style = style;\n    this.options = options;\n  }\n  /**\n   * Generates a CSS string.\n   */\n\n\n  var _proto = FontFaceRule.prototype;\n\n  _proto.toString = function toString(options) {\n    var _getWhitespaceSymbols = getWhitespaceSymbols(options),\n        linebreak = _getWhitespaceSymbols.linebreak;\n\n    if (Array.isArray(this.style)) {\n      var str = '';\n\n      for (var index = 0; index < this.style.length; index++) {\n        str += toCss(this.at, this.style[index]);\n        if (this.style[index + 1]) str += linebreak;\n      }\n\n      return str;\n    }\n\n    return toCss(this.at, this.style, options);\n  };\n\n  return FontFaceRule;\n}();\nvar keyRegExp$2 = /@font-face/;\nvar pluginFontFaceRule = {\n  onCreateRule: function onCreateRule(key, style, options) {\n    return keyRegExp$2.test(key) ? new FontFaceRule(key, style, options) : null;\n  }\n};\n\nvar ViewportRule =\n/*#__PURE__*/\nfunction () {\n  function ViewportRule(key, style, options) {\n    this.type = 'viewport';\n    this.at = '@viewport';\n    this.isProcessed = false;\n    this.key = key;\n    this.style = style;\n    this.options = options;\n  }\n  /**\n   * Generates a CSS string.\n   */\n\n\n  var _proto = ViewportRule.prototype;\n\n  _proto.toString = function toString(options) {\n    return toCss(this.key, this.style, options);\n  };\n\n  return ViewportRule;\n}();\nvar pluginViewportRule = {\n  onCreateRule: function onCreateRule(key, style, options) {\n    return key === '@viewport' || key === '@-ms-viewport' ? new ViewportRule(key, style, options) : null;\n  }\n};\n\nvar SimpleRule =\n/*#__PURE__*/\nfunction () {\n  function SimpleRule(key, value, options) {\n    this.type = 'simple';\n    this.isProcessed = false;\n    this.key = key;\n    this.value = value;\n    this.options = options;\n  }\n  /**\n   * Generates a CSS string.\n   */\n  // eslint-disable-next-line no-unused-vars\n\n\n  var _proto = SimpleRule.prototype;\n\n  _proto.toString = function toString(options) {\n    if (Array.isArray(this.value)) {\n      var str = '';\n\n      for (var index = 0; index < this.value.length; index++) {\n        str += this.key + \" \" + this.value[index] + \";\";\n        if (this.value[index + 1]) str += '\\n';\n      }\n\n      return str;\n    }\n\n    return this.key + \" \" + this.value + \";\";\n  };\n\n  return SimpleRule;\n}();\nvar keysMap = {\n  '@charset': true,\n  '@import': true,\n  '@namespace': true\n};\nvar pluginSimpleRule = {\n  onCreateRule: function onCreateRule(key, value, options) {\n    return key in keysMap ? new SimpleRule(key, value, options) : null;\n  }\n};\n\nvar plugins = [pluginStyleRule, pluginConditionalRule, pluginKeyframesRule, pluginKeyframeRule, pluginFontFaceRule, pluginViewportRule, pluginSimpleRule];\n\nvar defaultUpdateOptions = {\n  process: true\n};\nvar forceUpdateOptions = {\n  force: true,\n  process: true\n  /**\n   * Contains rules objects and allows adding/removing etc.\n   * Is used for e.g. by `StyleSheet` or `ConditionalRule`.\n   */\n\n};\n\nvar RuleList =\n/*#__PURE__*/\nfunction () {\n  // Rules registry for access by .get() method.\n  // It contains the same rule registered by name and by selector.\n  // Original styles object.\n  // Used to ensure correct rules order.\n  function RuleList(options) {\n    this.map = {};\n    this.raw = {};\n    this.index = [];\n    this.counter = 0;\n    this.options = options;\n    this.classes = options.classes;\n    this.keyframes = options.keyframes;\n  }\n  /**\n   * Create and register rule.\n   *\n   * Will not render after Style Sheet was rendered the first time.\n   */\n\n\n  var _proto = RuleList.prototype;\n\n  _proto.add = function add(name, decl, ruleOptions) {\n    var _this$options = this.options,\n        parent = _this$options.parent,\n        sheet = _this$options.sheet,\n        jss = _this$options.jss,\n        Renderer = _this$options.Renderer,\n        generateId = _this$options.generateId,\n        scoped = _this$options.scoped;\n\n    var options = _extends({\n      classes: this.classes,\n      parent: parent,\n      sheet: sheet,\n      jss: jss,\n      Renderer: Renderer,\n      generateId: generateId,\n      scoped: scoped,\n      name: name,\n      keyframes: this.keyframes,\n      selector: undefined\n    }, ruleOptions); // When user uses .createStyleSheet(), duplicate names are not possible, but\n    // `sheet.addRule()` opens the door for any duplicate rule name. When this happens\n    // we need to make the key unique within this RuleList instance scope.\n\n\n    var key = name;\n\n    if (name in this.raw) {\n      key = name + \"-d\" + this.counter++;\n    } // We need to save the original decl before creating the rule\n    // because cache plugin needs to use it as a key to return a cached rule.\n\n\n    this.raw[key] = decl;\n\n    if (key in this.classes) {\n      // E.g. rules inside of @media container\n      options.selector = \".\" + escape(this.classes[key]);\n    }\n\n    var rule = createRule(key, decl, options);\n    if (!rule) return null;\n    this.register(rule);\n    var index = options.index === undefined ? this.index.length : options.index;\n    this.index.splice(index, 0, rule);\n    return rule;\n  }\n  /**\n   * Get a rule.\n   */\n  ;\n\n  _proto.get = function get(name) {\n    return this.map[name];\n  }\n  /**\n   * Delete a rule.\n   */\n  ;\n\n  _proto.remove = function remove(rule) {\n    this.unregister(rule);\n    delete this.raw[rule.key];\n    this.index.splice(this.index.indexOf(rule), 1);\n  }\n  /**\n   * Get index of a rule.\n   */\n  ;\n\n  _proto.indexOf = function indexOf(rule) {\n    return this.index.indexOf(rule);\n  }\n  /**\n   * Run `onProcessRule()` plugins on every rule.\n   */\n  ;\n\n  _proto.process = function process() {\n    var plugins = this.options.jss.plugins; // We need to clone array because if we modify the index somewhere else during a loop\n    // we end up with very hard-to-track-down side effects.\n\n    this.index.slice(0).forEach(plugins.onProcessRule, plugins);\n  }\n  /**\n   * Register a rule in `.map`, `.classes` and `.keyframes` maps.\n   */\n  ;\n\n  _proto.register = function register(rule) {\n    this.map[rule.key] = rule;\n\n    if (rule instanceof StyleRule) {\n      this.map[rule.selector] = rule;\n      if (rule.id) this.classes[rule.key] = rule.id;\n    } else if (rule instanceof KeyframesRule && this.keyframes) {\n      this.keyframes[rule.name] = rule.id;\n    }\n  }\n  /**\n   * Unregister a rule.\n   */\n  ;\n\n  _proto.unregister = function unregister(rule) {\n    delete this.map[rule.key];\n\n    if (rule instanceof StyleRule) {\n      delete this.map[rule.selector];\n      delete this.classes[rule.key];\n    } else if (rule instanceof KeyframesRule) {\n      delete this.keyframes[rule.name];\n    }\n  }\n  /**\n   * Update the function values with a new data.\n   */\n  ;\n\n  _proto.update = function update() {\n    var name;\n    var data;\n    var options;\n\n    if (typeof (arguments.length <= 0 ? undefined : arguments[0]) === 'string') {\n      name = arguments.length <= 0 ? undefined : arguments[0];\n      data = arguments.length <= 1 ? undefined : arguments[1];\n      options = arguments.length <= 2 ? undefined : arguments[2];\n    } else {\n      data = arguments.length <= 0 ? undefined : arguments[0];\n      options = arguments.length <= 1 ? undefined : arguments[1];\n      name = null;\n    }\n\n    if (name) {\n      this.updateOne(this.map[name], data, options);\n    } else {\n      for (var index = 0; index < this.index.length; index++) {\n        this.updateOne(this.index[index], data, options);\n      }\n    }\n  }\n  /**\n   * Execute plugins, update rule props.\n   */\n  ;\n\n  _proto.updateOne = function updateOne(rule, data, options) {\n    if (options === void 0) {\n      options = defaultUpdateOptions;\n    }\n\n    var _this$options2 = this.options,\n        plugins = _this$options2.jss.plugins,\n        sheet = _this$options2.sheet; // It is a rules container like for e.g. ConditionalRule.\n\n    if (rule.rules instanceof RuleList) {\n      rule.rules.update(data, options);\n      return;\n    }\n\n    var style = rule.style;\n    plugins.onUpdate(data, rule, sheet, options); // We rely on a new `style` ref in case it was mutated during onUpdate hook.\n\n    if (options.process && style && style !== rule.style) {\n      // We need to run the plugins in case new `style` relies on syntax plugins.\n      plugins.onProcessStyle(rule.style, rule, sheet); // Update and add props.\n\n      for (var prop in rule.style) {\n        var nextValue = rule.style[prop];\n        var prevValue = style[prop]; // We need to use `force: true` because `rule.style` has been updated during onUpdate hook, so `rule.prop()` will not update the CSSOM rule.\n        // We do this comparison to avoid unneeded `rule.prop()` calls, since we have the old `style` object here.\n\n        if (nextValue !== prevValue) {\n          rule.prop(prop, nextValue, forceUpdateOptions);\n        }\n      } // Remove props.\n\n\n      for (var _prop in style) {\n        var _nextValue = rule.style[_prop];\n        var _prevValue = style[_prop]; // We need to use `force: true` because `rule.style` has been updated during onUpdate hook, so `rule.prop()` will not update the CSSOM rule.\n        // We do this comparison to avoid unneeded `rule.prop()` calls, since we have the old `style` object here.\n\n        if (_nextValue == null && _nextValue !== _prevValue) {\n          rule.prop(_prop, null, forceUpdateOptions);\n        }\n      }\n    }\n  }\n  /**\n   * Convert rules to a CSS string.\n   */\n  ;\n\n  _proto.toString = function toString(options) {\n    var str = '';\n    var sheet = this.options.sheet;\n    var link = sheet ? sheet.options.link : false;\n\n    var _getWhitespaceSymbols = getWhitespaceSymbols(options),\n        linebreak = _getWhitespaceSymbols.linebreak;\n\n    for (var index = 0; index < this.index.length; index++) {\n      var rule = this.index[index];\n      var css = rule.toString(options); // No need to render an empty rule.\n\n      if (!css && !link) continue;\n      if (str) str += linebreak;\n      str += css;\n    }\n\n    return str;\n  };\n\n  return RuleList;\n}();\n\nvar StyleSheet =\n/*#__PURE__*/\nfunction () {\n  function StyleSheet(styles, options) {\n    this.attached = false;\n    this.deployed = false;\n    this.classes = {};\n    this.keyframes = {};\n    this.options = _extends({}, options, {\n      sheet: this,\n      parent: this,\n      classes: this.classes,\n      keyframes: this.keyframes\n    });\n\n    if (options.Renderer) {\n      this.renderer = new options.Renderer(this);\n    }\n\n    this.rules = new RuleList(this.options);\n\n    for (var name in styles) {\n      this.rules.add(name, styles[name]);\n    }\n\n    this.rules.process();\n  }\n  /**\n   * Attach renderable to the render tree.\n   */\n\n\n  var _proto = StyleSheet.prototype;\n\n  _proto.attach = function attach() {\n    if (this.attached) return this;\n    if (this.renderer) this.renderer.attach();\n    this.attached = true; // Order is important, because we can't use insertRule API if style element is not attached.\n\n    if (!this.deployed) this.deploy();\n    return this;\n  }\n  /**\n   * Remove renderable from render tree.\n   */\n  ;\n\n  _proto.detach = function detach() {\n    if (!this.attached) return this;\n    if (this.renderer) this.renderer.detach();\n    this.attached = false;\n    return this;\n  }\n  /**\n   * Add a rule to the current stylesheet.\n   * Will insert a rule also after the stylesheet has been rendered first time.\n   */\n  ;\n\n  _proto.addRule = function addRule(name, decl, options) {\n    var queue = this.queue; // Plugins can create rules.\n    // In order to preserve the right order, we need to queue all `.addRule` calls,\n    // which happen after the first `rules.add()` call.\n\n    if (this.attached && !queue) this.queue = [];\n    var rule = this.rules.add(name, decl, options);\n    if (!rule) return null;\n    this.options.jss.plugins.onProcessRule(rule);\n\n    if (this.attached) {\n      if (!this.deployed) return rule; // Don't insert rule directly if there is no stringified version yet.\n      // It will be inserted all together when .attach is called.\n\n      if (queue) queue.push(rule);else {\n        this.insertRule(rule);\n\n        if (this.queue) {\n          this.queue.forEach(this.insertRule, this);\n          this.queue = undefined;\n        }\n      }\n      return rule;\n    } // We can't add rules to a detached style node.\n    // We will redeploy the sheet once user will attach it.\n\n\n    this.deployed = false;\n    return rule;\n  }\n  /**\n   * Insert rule into the StyleSheet\n   */\n  ;\n\n  _proto.insertRule = function insertRule(rule) {\n    if (this.renderer) {\n      this.renderer.insertRule(rule);\n    }\n  }\n  /**\n   * Create and add rules.\n   * Will render also after Style Sheet was rendered the first time.\n   */\n  ;\n\n  _proto.addRules = function addRules(styles, options) {\n    var added = [];\n\n    for (var name in styles) {\n      var rule = this.addRule(name, styles[name], options);\n      if (rule) added.push(rule);\n    }\n\n    return added;\n  }\n  /**\n   * Get a rule by name.\n   */\n  ;\n\n  _proto.getRule = function getRule(name) {\n    return this.rules.get(name);\n  }\n  /**\n   * Delete a rule by name.\n   * Returns `true`: if rule has been deleted from the DOM.\n   */\n  ;\n\n  _proto.deleteRule = function deleteRule(name) {\n    var rule = typeof name === 'object' ? name : this.rules.get(name);\n\n    if (!rule || // Style sheet was created without link: true and attached, in this case we\n    // won't be able to remove the CSS rule from the DOM.\n    this.attached && !rule.renderable) {\n      return false;\n    }\n\n    this.rules.remove(rule);\n\n    if (this.attached && rule.renderable && this.renderer) {\n      return this.renderer.deleteRule(rule.renderable);\n    }\n\n    return true;\n  }\n  /**\n   * Get index of a rule.\n   */\n  ;\n\n  _proto.indexOf = function indexOf(rule) {\n    return this.rules.indexOf(rule);\n  }\n  /**\n   * Deploy pure CSS string to a renderable.\n   */\n  ;\n\n  _proto.deploy = function deploy() {\n    if (this.renderer) this.renderer.deploy();\n    this.deployed = true;\n    return this;\n  }\n  /**\n   * Update the function values with a new data.\n   */\n  ;\n\n  _proto.update = function update() {\n    var _this$rules;\n\n    (_this$rules = this.rules).update.apply(_this$rules, arguments);\n\n    return this;\n  }\n  /**\n   * Updates a single rule.\n   */\n  ;\n\n  _proto.updateOne = function updateOne(rule, data, options) {\n    this.rules.updateOne(rule, data, options);\n    return this;\n  }\n  /**\n   * Convert rules to a CSS string.\n   */\n  ;\n\n  _proto.toString = function toString(options) {\n    return this.rules.toString(options);\n  };\n\n  return StyleSheet;\n}();\n\nvar PluginsRegistry =\n/*#__PURE__*/\nfunction () {\n  function PluginsRegistry() {\n    this.plugins = {\n      internal: [],\n      external: []\n    };\n    this.registry = {};\n  }\n\n  var _proto = PluginsRegistry.prototype;\n\n  /**\n   * Call `onCreateRule` hooks and return an object if returned by a hook.\n   */\n  _proto.onCreateRule = function onCreateRule(name, decl, options) {\n    for (var i = 0; i < this.registry.onCreateRule.length; i++) {\n      var rule = this.registry.onCreateRule[i](name, decl, options);\n      if (rule) return rule;\n    }\n\n    return null;\n  }\n  /**\n   * Call `onProcessRule` hooks.\n   */\n  ;\n\n  _proto.onProcessRule = function onProcessRule(rule) {\n    if (rule.isProcessed) return;\n    var sheet = rule.options.sheet;\n\n    for (var i = 0; i < this.registry.onProcessRule.length; i++) {\n      this.registry.onProcessRule[i](rule, sheet);\n    }\n\n    if (rule.style) this.onProcessStyle(rule.style, rule, sheet);\n    rule.isProcessed = true;\n  }\n  /**\n   * Call `onProcessStyle` hooks.\n   */\n  ;\n\n  _proto.onProcessStyle = function onProcessStyle(style, rule, sheet) {\n    for (var i = 0; i < this.registry.onProcessStyle.length; i++) {\n      rule.style = this.registry.onProcessStyle[i](rule.style, rule, sheet);\n    }\n  }\n  /**\n   * Call `onProcessSheet` hooks.\n   */\n  ;\n\n  _proto.onProcessSheet = function onProcessSheet(sheet) {\n    for (var i = 0; i < this.registry.onProcessSheet.length; i++) {\n      this.registry.onProcessSheet[i](sheet);\n    }\n  }\n  /**\n   * Call `onUpdate` hooks.\n   */\n  ;\n\n  _proto.onUpdate = function onUpdate(data, rule, sheet, options) {\n    for (var i = 0; i < this.registry.onUpdate.length; i++) {\n      this.registry.onUpdate[i](data, rule, sheet, options);\n    }\n  }\n  /**\n   * Call `onChangeValue` hooks.\n   */\n  ;\n\n  _proto.onChangeValue = function onChangeValue(value, prop, rule) {\n    var processedValue = value;\n\n    for (var i = 0; i < this.registry.onChangeValue.length; i++) {\n      processedValue = this.registry.onChangeValue[i](processedValue, prop, rule);\n    }\n\n    return processedValue;\n  }\n  /**\n   * Register a plugin.\n   */\n  ;\n\n  _proto.use = function use(newPlugin, options) {\n    if (options === void 0) {\n      options = {\n        queue: 'external'\n      };\n    }\n\n    var plugins = this.plugins[options.queue]; // Avoids applying same plugin twice, at least based on ref.\n\n    if (plugins.indexOf(newPlugin) !== -1) {\n      return;\n    }\n\n    plugins.push(newPlugin);\n    this.registry = [].concat(this.plugins.external, this.plugins.internal).reduce(function (registry, plugin) {\n      for (var name in plugin) {\n        if (name in registry) {\n          registry[name].push(plugin[name]);\n        } else {\n          process.env.NODE_ENV !== \"production\" ? warning(false, \"[JSS] Unknown hook \\\"\" + name + \"\\\".\") : void 0;\n        }\n      }\n\n      return registry;\n    }, {\n      onCreateRule: [],\n      onProcessRule: [],\n      onProcessStyle: [],\n      onProcessSheet: [],\n      onChangeValue: [],\n      onUpdate: []\n    });\n  };\n\n  return PluginsRegistry;\n}();\n\n/**\n * Sheets registry to access all instances in one place.\n */\n\nvar SheetsRegistry =\n/*#__PURE__*/\nfunction () {\n  function SheetsRegistry() {\n    this.registry = [];\n  }\n\n  var _proto = SheetsRegistry.prototype;\n\n  /**\n   * Register a Style Sheet.\n   */\n  _proto.add = function add(sheet) {\n    var registry = this.registry;\n    var index = sheet.options.index;\n    if (registry.indexOf(sheet) !== -1) return;\n\n    if (registry.length === 0 || index >= this.index) {\n      registry.push(sheet);\n      return;\n    } // Find a position.\n\n\n    for (var i = 0; i < registry.length; i++) {\n      if (registry[i].options.index > index) {\n        registry.splice(i, 0, sheet);\n        return;\n      }\n    }\n  }\n  /**\n   * Reset the registry.\n   */\n  ;\n\n  _proto.reset = function reset() {\n    this.registry = [];\n  }\n  /**\n   * Remove a Style Sheet.\n   */\n  ;\n\n  _proto.remove = function remove(sheet) {\n    var index = this.registry.indexOf(sheet);\n    this.registry.splice(index, 1);\n  }\n  /**\n   * Convert all attached sheets to a CSS string.\n   */\n  ;\n\n  _proto.toString = function toString(_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n        attached = _ref.attached,\n        options = _objectWithoutPropertiesLoose(_ref, [\"attached\"]);\n\n    var _getWhitespaceSymbols = getWhitespaceSymbols(options),\n        linebreak = _getWhitespaceSymbols.linebreak;\n\n    var css = '';\n\n    for (var i = 0; i < this.registry.length; i++) {\n      var sheet = this.registry[i];\n\n      if (attached != null && sheet.attached !== attached) {\n        continue;\n      }\n\n      if (css) css += linebreak;\n      css += sheet.toString(options);\n    }\n\n    return css;\n  };\n\n  _createClass(SheetsRegistry, [{\n    key: \"index\",\n\n    /**\n     * Current highest index number.\n     */\n    get: function get() {\n      return this.registry.length === 0 ? 0 : this.registry[this.registry.length - 1].options.index;\n    }\n  }]);\n\n  return SheetsRegistry;\n}();\n\n/**\n * This is a global sheets registry. Only DomRenderer will add sheets to it.\n * On the server one should use an own SheetsRegistry instance and add the\n * sheets to it, because you need to make sure to create a new registry for\n * each request in order to not leak sheets across requests.\n */\n\nvar sheets = new SheetsRegistry();\n\n/* eslint-disable */\n\n/**\n * Now that `globalThis` is available on most platforms\n * (https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/globalThis#browser_compatibility)\n * we check for `globalThis` first. `globalThis` is necessary for jss\n * to run in Agoric's secure version of JavaScript (SES). Under SES,\n * `globalThis` exists, but `window`, `self`, and `Function('return\n * this')()` are all undefined for security reasons.\n *\n * https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\n */\nvar globalThis$1 = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' && window.Math === Math ? window : typeof self !== 'undefined' && self.Math === Math ? self : Function('return this')();\n\nvar ns = '2f1acc6c3a606b082e5eef5e54414ffb';\nif (globalThis$1[ns] == null) globalThis$1[ns] = 0; // Bundle may contain multiple JSS versions at the same time. In order to identify\n// the current version with just one short number and use it for classes generation\n// we use a counter. Also it is more accurate, because user can manually reevaluate\n// the module.\n\nvar moduleId = globalThis$1[ns]++;\n\nvar maxRules = 1e10;\n/**\n * Returns a function which generates unique class names based on counters.\n * When new generator function is created, rule counter is reseted.\n * We need to reset the rule counter for SSR for each request.\n */\n\nvar createGenerateId = function createGenerateId(options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var ruleCounter = 0;\n\n  var generateId = function generateId(rule, sheet) {\n    ruleCounter += 1;\n\n    if (ruleCounter > maxRules) {\n      process.env.NODE_ENV !== \"production\" ? warning(false, \"[JSS] You might have a memory leak. Rule counter is at \" + ruleCounter + \".\") : void 0;\n    }\n\n    var jssId = '';\n    var prefix = '';\n\n    if (sheet) {\n      if (sheet.options.classNamePrefix) {\n        prefix = sheet.options.classNamePrefix;\n      }\n\n      if (sheet.options.jss.id != null) {\n        jssId = String(sheet.options.jss.id);\n      }\n    }\n\n    if (options.minify) {\n      // Using \"c\" because a number can't be the first char in a class name.\n      return \"\" + (prefix || 'c') + moduleId + jssId + ruleCounter;\n    }\n\n    return prefix + rule.key + \"-\" + moduleId + (jssId ? \"-\" + jssId : '') + \"-\" + ruleCounter;\n  };\n\n  return generateId;\n};\n\n/**\n * Cache the value from the first time a function is called.\n */\n\nvar memoize = function memoize(fn) {\n  var value;\n  return function () {\n    if (!value) value = fn();\n    return value;\n  };\n};\n/**\n * Get a style property value.\n */\n\n\nvar getPropertyValue = function getPropertyValue(cssRule, prop) {\n  try {\n    // Support CSSTOM.\n    if (cssRule.attributeStyleMap) {\n      return cssRule.attributeStyleMap.get(prop);\n    }\n\n    return cssRule.style.getPropertyValue(prop);\n  } catch (err) {\n    // IE may throw if property is unknown.\n    return '';\n  }\n};\n/**\n * Set a style property.\n */\n\n\nvar setProperty = function setProperty(cssRule, prop, value) {\n  try {\n    var cssValue = value;\n\n    if (Array.isArray(value)) {\n      cssValue = toCssValue(value, true);\n\n      if (value[value.length - 1] === '!important') {\n        cssRule.style.setProperty(prop, cssValue, 'important');\n        return true;\n      }\n    } // Support CSSTOM.\n\n\n    if (cssRule.attributeStyleMap) {\n      cssRule.attributeStyleMap.set(prop, cssValue);\n    } else {\n      cssRule.style.setProperty(prop, cssValue);\n    }\n  } catch (err) {\n    // IE may throw if property is unknown.\n    return false;\n  }\n\n  return true;\n};\n/**\n * Remove a style property.\n */\n\n\nvar removeProperty = function removeProperty(cssRule, prop) {\n  try {\n    // Support CSSTOM.\n    if (cssRule.attributeStyleMap) {\n      cssRule.attributeStyleMap.delete(prop);\n    } else {\n      cssRule.style.removeProperty(prop);\n    }\n  } catch (err) {\n    process.env.NODE_ENV !== \"production\" ? warning(false, \"[JSS] DOMException \\\"\" + err.message + \"\\\" was thrown. Tried to remove property \\\"\" + prop + \"\\\".\") : void 0;\n  }\n};\n/**\n * Set the selector.\n */\n\n\nvar setSelector = function setSelector(cssRule, selectorText) {\n  cssRule.selectorText = selectorText; // Return false if setter was not successful.\n  // Currently works in chrome only.\n\n  return cssRule.selectorText === selectorText;\n};\n/**\n * Gets the `head` element upon the first call and caches it.\n * We assume it can't be null.\n */\n\n\nvar getHead = memoize(function () {\n  return document.querySelector('head');\n});\n/**\n * Find attached sheet with an index higher than the passed one.\n */\n\nfunction findHigherSheet(registry, options) {\n  for (var i = 0; i < registry.length; i++) {\n    var sheet = registry[i];\n\n    if (sheet.attached && sheet.options.index > options.index && sheet.options.insertionPoint === options.insertionPoint) {\n      return sheet;\n    }\n  }\n\n  return null;\n}\n/**\n * Find attached sheet with the highest index.\n */\n\n\nfunction findHighestSheet(registry, options) {\n  for (var i = registry.length - 1; i >= 0; i--) {\n    var sheet = registry[i];\n\n    if (sheet.attached && sheet.options.insertionPoint === options.insertionPoint) {\n      return sheet;\n    }\n  }\n\n  return null;\n}\n/**\n * Find a comment with \"jss\" inside.\n */\n\n\nfunction findCommentNode(text) {\n  var head = getHead();\n\n  for (var i = 0; i < head.childNodes.length; i++) {\n    var node = head.childNodes[i];\n\n    if (node.nodeType === 8 && node.nodeValue.trim() === text) {\n      return node;\n    }\n  }\n\n  return null;\n}\n/**\n * Find a node before which we can insert the sheet.\n */\n\n\nfunction findPrevNode(options) {\n  var registry = sheets.registry;\n\n  if (registry.length > 0) {\n    // Try to insert before the next higher sheet.\n    var sheet = findHigherSheet(registry, options);\n\n    if (sheet && sheet.renderer) {\n      return {\n        parent: sheet.renderer.element.parentNode,\n        node: sheet.renderer.element\n      };\n    } // Otherwise insert after the last attached.\n\n\n    sheet = findHighestSheet(registry, options);\n\n    if (sheet && sheet.renderer) {\n      return {\n        parent: sheet.renderer.element.parentNode,\n        node: sheet.renderer.element.nextSibling\n      };\n    }\n  } // Try to find a comment placeholder if registry is empty.\n\n\n  var insertionPoint = options.insertionPoint;\n\n  if (insertionPoint && typeof insertionPoint === 'string') {\n    var comment = findCommentNode(insertionPoint);\n\n    if (comment) {\n      return {\n        parent: comment.parentNode,\n        node: comment.nextSibling\n      };\n    } // If user specifies an insertion point and it can't be found in the document -\n    // bad specificity issues may appear.\n\n\n    process.env.NODE_ENV !== \"production\" ? warning(false, \"[JSS] Insertion point \\\"\" + insertionPoint + \"\\\" not found.\") : void 0;\n  }\n\n  return false;\n}\n/**\n * Insert style element into the DOM.\n */\n\n\nfunction insertStyle(style, options) {\n  var insertionPoint = options.insertionPoint;\n  var nextNode = findPrevNode(options);\n\n  if (nextNode !== false && nextNode.parent) {\n    nextNode.parent.insertBefore(style, nextNode.node);\n    return;\n  } // Works with iframes and any node types.\n\n\n  if (insertionPoint && typeof insertionPoint.nodeType === 'number') {\n    var insertionPointElement = insertionPoint;\n    var parentNode = insertionPointElement.parentNode;\n    if (parentNode) parentNode.insertBefore(style, insertionPointElement.nextSibling);else process.env.NODE_ENV !== \"production\" ? warning(false, '[JSS] Insertion point is not in the DOM.') : void 0;\n    return;\n  }\n\n  getHead().appendChild(style);\n}\n/**\n * Read jss nonce setting from the page if the user has set it.\n */\n\n\nvar getNonce = memoize(function () {\n  var node = document.querySelector('meta[property=\"csp-nonce\"]');\n  return node ? node.getAttribute('content') : null;\n});\n\nvar _insertRule = function insertRule(container, rule, index) {\n  try {\n    if ('insertRule' in container) {\n      container.insertRule(rule, index);\n    } // Keyframes rule.\n    else if ('appendRule' in container) {\n        container.appendRule(rule);\n      }\n  } catch (err) {\n    process.env.NODE_ENV !== \"production\" ? warning(false, \"[JSS] \" + err.message) : void 0;\n    return false;\n  }\n\n  return container.cssRules[index];\n};\n\nvar getValidRuleInsertionIndex = function getValidRuleInsertionIndex(container, index) {\n  var maxIndex = container.cssRules.length; // In case previous insertion fails, passed index might be wrong\n\n  if (index === undefined || index > maxIndex) {\n    // eslint-disable-next-line no-param-reassign\n    return maxIndex;\n  }\n\n  return index;\n};\n\nvar createStyle = function createStyle() {\n  var el = document.createElement('style'); // Without it, IE will have a broken source order specificity if we\n  // insert rules after we insert the style tag.\n  // It seems to kick-off the source order specificity algorithm.\n\n  el.textContent = '\\n';\n  return el;\n};\n\nvar DomRenderer =\n/*#__PURE__*/\nfunction () {\n  // Will be empty if link: true option is not set, because\n  // it is only for use together with insertRule API.\n  function DomRenderer(sheet) {\n    this.getPropertyValue = getPropertyValue;\n    this.setProperty = setProperty;\n    this.removeProperty = removeProperty;\n    this.setSelector = setSelector;\n    this.hasInsertedRules = false;\n    this.cssRules = [];\n    // There is no sheet when the renderer is used from a standalone StyleRule.\n    if (sheet) sheets.add(sheet);\n    this.sheet = sheet;\n\n    var _ref = this.sheet ? this.sheet.options : {},\n        media = _ref.media,\n        meta = _ref.meta,\n        element = _ref.element;\n\n    this.element = element || createStyle();\n    this.element.setAttribute('data-jss', '');\n    if (media) this.element.setAttribute('media', media);\n    if (meta) this.element.setAttribute('data-meta', meta);\n    var nonce = getNonce();\n    if (nonce) this.element.setAttribute('nonce', nonce);\n  }\n  /**\n   * Insert style element into render tree.\n   */\n\n\n  var _proto = DomRenderer.prototype;\n\n  _proto.attach = function attach() {\n    // In the case the element node is external and it is already in the DOM.\n    if (this.element.parentNode || !this.sheet) return;\n    insertStyle(this.element, this.sheet.options); // When rules are inserted using `insertRule` API, after `sheet.detach().attach()`\n    // most browsers create a new CSSStyleSheet, except of all IEs.\n\n    var deployed = Boolean(this.sheet && this.sheet.deployed);\n\n    if (this.hasInsertedRules && deployed) {\n      this.hasInsertedRules = false;\n      this.deploy();\n    }\n  }\n  /**\n   * Remove style element from render tree.\n   */\n  ;\n\n  _proto.detach = function detach() {\n    if (!this.sheet) return;\n    var parentNode = this.element.parentNode;\n    if (parentNode) parentNode.removeChild(this.element); // In the most browsers, rules inserted using insertRule() API will be lost when style element is removed.\n    // Though IE will keep them and we need a consistent behavior.\n\n    if (this.sheet.options.link) {\n      this.cssRules = [];\n      this.element.textContent = '\\n';\n    }\n  }\n  /**\n   * Inject CSS string into element.\n   */\n  ;\n\n  _proto.deploy = function deploy() {\n    var sheet = this.sheet;\n    if (!sheet) return;\n\n    if (sheet.options.link) {\n      this.insertRules(sheet.rules);\n      return;\n    }\n\n    this.element.textContent = \"\\n\" + sheet.toString() + \"\\n\";\n  }\n  /**\n   * Insert RuleList into an element.\n   */\n  ;\n\n  _proto.insertRules = function insertRules(rules, nativeParent) {\n    for (var i = 0; i < rules.index.length; i++) {\n      this.insertRule(rules.index[i], i, nativeParent);\n    }\n  }\n  /**\n   * Insert a rule into element.\n   */\n  ;\n\n  _proto.insertRule = function insertRule(rule, index, nativeParent) {\n    if (nativeParent === void 0) {\n      nativeParent = this.element.sheet;\n    }\n\n    if (rule.rules) {\n      var parent = rule;\n      var latestNativeParent = nativeParent;\n\n      if (rule.type === 'conditional' || rule.type === 'keyframes') {\n        var _insertionIndex = getValidRuleInsertionIndex(nativeParent, index); // We need to render the container without children first.\n\n\n        latestNativeParent = _insertRule(nativeParent, parent.toString({\n          children: false\n        }), _insertionIndex);\n\n        if (latestNativeParent === false) {\n          return false;\n        }\n\n        this.refCssRule(rule, _insertionIndex, latestNativeParent);\n      }\n\n      this.insertRules(parent.rules, latestNativeParent);\n      return latestNativeParent;\n    }\n\n    var ruleStr = rule.toString();\n    if (!ruleStr) return false;\n    var insertionIndex = getValidRuleInsertionIndex(nativeParent, index);\n\n    var nativeRule = _insertRule(nativeParent, ruleStr, insertionIndex);\n\n    if (nativeRule === false) {\n      return false;\n    }\n\n    this.hasInsertedRules = true;\n    this.refCssRule(rule, insertionIndex, nativeRule);\n    return nativeRule;\n  };\n\n  _proto.refCssRule = function refCssRule(rule, index, cssRule) {\n    rule.renderable = cssRule; // We only want to reference the top level rules, deleteRule API doesn't support removing nested rules\n    // like rules inside media queries or keyframes\n\n    if (rule.options.parent instanceof StyleSheet) {\n      this.cssRules[index] = cssRule;\n    }\n  }\n  /**\n   * Delete a rule.\n   */\n  ;\n\n  _proto.deleteRule = function deleteRule(cssRule) {\n    var sheet = this.element.sheet;\n    var index = this.indexOf(cssRule);\n    if (index === -1) return false;\n    sheet.deleteRule(index);\n    this.cssRules.splice(index, 1);\n    return true;\n  }\n  /**\n   * Get index of a CSS Rule.\n   */\n  ;\n\n  _proto.indexOf = function indexOf(cssRule) {\n    return this.cssRules.indexOf(cssRule);\n  }\n  /**\n   * Generate a new CSS rule and replace the existing one.\n   *\n   * Only used for some old browsers because they can't set a selector.\n   */\n  ;\n\n  _proto.replaceRule = function replaceRule(cssRule, rule) {\n    var index = this.indexOf(cssRule);\n    if (index === -1) return false;\n    this.element.sheet.deleteRule(index);\n    this.cssRules.splice(index, 1);\n    return this.insertRule(rule, index);\n  }\n  /**\n   * Get all rules elements.\n   */\n  ;\n\n  _proto.getRules = function getRules() {\n    return this.element.sheet.cssRules;\n  };\n\n  return DomRenderer;\n}();\n\nvar instanceCounter = 0;\n\nvar Jss =\n/*#__PURE__*/\nfunction () {\n  function Jss(options) {\n    this.id = instanceCounter++;\n    this.version = \"10.8.2\";\n    this.plugins = new PluginsRegistry();\n    this.options = {\n      id: {\n        minify: false\n      },\n      createGenerateId: createGenerateId,\n      Renderer: isInBrowser ? DomRenderer : null,\n      plugins: []\n    };\n    this.generateId = createGenerateId({\n      minify: false\n    });\n\n    for (var i = 0; i < plugins.length; i++) {\n      this.plugins.use(plugins[i], {\n        queue: 'internal'\n      });\n    }\n\n    this.setup(options);\n  }\n  /**\n   * Prepares various options, applies plugins.\n   * Should not be used twice on the same instance, because there is no plugins\n   * deduplication logic.\n   */\n\n\n  var _proto = Jss.prototype;\n\n  _proto.setup = function setup(options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    if (options.createGenerateId) {\n      this.options.createGenerateId = options.createGenerateId;\n    }\n\n    if (options.id) {\n      this.options.id = _extends({}, this.options.id, options.id);\n    }\n\n    if (options.createGenerateId || options.id) {\n      this.generateId = this.options.createGenerateId(this.options.id);\n    }\n\n    if (options.insertionPoint != null) this.options.insertionPoint = options.insertionPoint;\n\n    if ('Renderer' in options) {\n      this.options.Renderer = options.Renderer;\n    } // eslint-disable-next-line prefer-spread\n\n\n    if (options.plugins) this.use.apply(this, options.plugins);\n    return this;\n  }\n  /**\n   * Create a Style Sheet.\n   */\n  ;\n\n  _proto.createStyleSheet = function createStyleSheet(styles, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var _options = options,\n        index = _options.index;\n\n    if (typeof index !== 'number') {\n      index = sheets.index === 0 ? 0 : sheets.index + 1;\n    }\n\n    var sheet = new StyleSheet(styles, _extends({}, options, {\n      jss: this,\n      generateId: options.generateId || this.generateId,\n      insertionPoint: this.options.insertionPoint,\n      Renderer: this.options.Renderer,\n      index: index\n    }));\n    this.plugins.onProcessSheet(sheet);\n    return sheet;\n  }\n  /**\n   * Detach the Style Sheet and remove it from the registry.\n   */\n  ;\n\n  _proto.removeStyleSheet = function removeStyleSheet(sheet) {\n    sheet.detach();\n    sheets.remove(sheet);\n    return this;\n  }\n  /**\n   * Create a rule without a Style Sheet.\n   * [Deprecated] will be removed in the next major version.\n   */\n  ;\n\n  _proto.createRule = function createRule$1(name, style, options) {\n    if (style === void 0) {\n      style = {};\n    }\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    // Enable rule without name for inline styles.\n    if (typeof name === 'object') {\n      return this.createRule(undefined, name, style);\n    }\n\n    var ruleOptions = _extends({}, options, {\n      name: name,\n      jss: this,\n      Renderer: this.options.Renderer\n    });\n\n    if (!ruleOptions.generateId) ruleOptions.generateId = this.generateId;\n    if (!ruleOptions.classes) ruleOptions.classes = {};\n    if (!ruleOptions.keyframes) ruleOptions.keyframes = {};\n\n    var rule = createRule(name, style, ruleOptions);\n\n    if (rule) this.plugins.onProcessRule(rule);\n    return rule;\n  }\n  /**\n   * Register plugin. Passed function will be invoked with a rule instance.\n   */\n  ;\n\n  _proto.use = function use() {\n    var _this = this;\n\n    for (var _len = arguments.length, plugins = new Array(_len), _key = 0; _key < _len; _key++) {\n      plugins[_key] = arguments[_key];\n    }\n\n    plugins.forEach(function (plugin) {\n      _this.plugins.use(plugin);\n    });\n    return this;\n  };\n\n  return Jss;\n}();\n\nvar createJss = function createJss(options) {\n  return new Jss(options);\n};\n\n/**\n * SheetsManager is like a WeakMap which is designed to count StyleSheet\n * instances and attach/detach automatically.\n * Used in react-jss.\n */\n\nvar SheetsManager =\n/*#__PURE__*/\nfunction () {\n  function SheetsManager() {\n    this.length = 0;\n    this.sheets = new WeakMap();\n  }\n\n  var _proto = SheetsManager.prototype;\n\n  _proto.get = function get(key) {\n    var entry = this.sheets.get(key);\n    return entry && entry.sheet;\n  };\n\n  _proto.add = function add(key, sheet) {\n    if (this.sheets.has(key)) return;\n    this.length++;\n    this.sheets.set(key, {\n      sheet: sheet,\n      refs: 0\n    });\n  };\n\n  _proto.manage = function manage(key) {\n    var entry = this.sheets.get(key);\n\n    if (entry) {\n      if (entry.refs === 0) {\n        entry.sheet.attach();\n      }\n\n      entry.refs++;\n      return entry.sheet;\n    }\n\n    warning(false, \"[JSS] SheetsManager: can't find sheet to manage\");\n    return undefined;\n  };\n\n  _proto.unmanage = function unmanage(key) {\n    var entry = this.sheets.get(key);\n\n    if (entry) {\n      if (entry.refs > 0) {\n        entry.refs--;\n        if (entry.refs === 0) entry.sheet.detach();\n      }\n    } else {\n      warning(false, \"SheetsManager: can't find sheet to unmanage\");\n    }\n  };\n\n  _createClass(SheetsManager, [{\n    key: \"size\",\n    get: function get() {\n      return this.length;\n    }\n  }]);\n\n  return SheetsManager;\n}();\n\n/**\n* Export a constant indicating if this browser has CSSTOM support.\n* https://developers.google.com/web/updates/2018/03/cssom\n*/\nvar hasCSSTOMSupport = typeof CSS === 'object' && CSS != null && 'number' in CSS;\n\n/**\n * Extracts a styles object with only props that contain function values.\n */\nfunction getDynamicStyles(styles) {\n  var to = null;\n\n  for (var key in styles) {\n    var value = styles[key];\n    var type = typeof value;\n\n    if (type === 'function') {\n      if (!to) to = {};\n      to[key] = value;\n    } else if (type === 'object' && value !== null && !Array.isArray(value)) {\n      var extracted = getDynamicStyles(value);\n\n      if (extracted) {\n        if (!to) to = {};\n        to[key] = extracted;\n      }\n    }\n  }\n\n  return to;\n}\n\n/**\n * A better abstraction over CSS.\n *\n * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present\n * @website https://github.com/cssinjs/jss\n * @license MIT\n */\nvar index = createJss();\n\nexport default index;\nexport { RuleList, SheetsManager, SheetsRegistry, createJss as create, createGenerateId, createRule, getDynamicStyles, hasCSSTOMSupport, sheets, toCssValue };\n","import { createApiRef, useApi, configApiRef, createRouteRef, useRouteRef, createPlugin, createApiFactory, discoveryApiRef, identityApiRef, fetchApiRef, createRoutableExtension } from '@backstage/core-plugin-api';\nimport { ResponseError, NotFoundError } from '@backstage/errors';\nimport { EventSourcePolyfill } from 'event-source-polyfill';\nimport React, { useState, useEffect, useReducer, useRef, useMemo, createContext, useContext, useCallback, Children } from 'react';\nimport { useParams, useNavigate as useNavigate$1, useOutlet, Routes, Route } from 'react-router-dom';\nimport { Link, LogViewer, ErrorPage, Progress, SidebarPinStateContext, Content, HeaderLabel, Header, Page, ItemCardGrid, ItemCardHeader, Button as Button$1, WarningPanel, CodeSnippet, SubvalueCell, Table, EmptyState, PageWithHeader, ContentHeader, SupportButton, MissingAnnotationEmptyState } from '@backstage/core-components';\nimport { useTechDocsReaderPage, useTechDocsAddons, TechDocsAddonLocations, TECHDOCS_ADDONS_WRAPPER_KEY, TechDocsReaderPageProvider } from '@backstage/plugin-techdocs-react';\nimport { create } from 'jss';\nimport { makeStyles, ListItemText, ListItem, Divider, TextField, InputAdornment, IconButton, CircularProgress, createStyles, Button, Drawer, Grid, Typography, withStyles, Tooltip, ThemeProvider, SvgIcon, useTheme, Portal, Toolbar, Box, Card, CardMedia, CardContent, CardActions } from '@material-ui/core';\nimport { jssPreset, StylesProvider, withStyles as withStyles$1 } from '@material-ui/styles';\nimport TextTruncate from 'react-text-truncate';\nimport { SearchContextProvider, useSearch } from '@backstage/plugin-search-react';\nimport SearchIcon from '@material-ui/icons/Search';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport { useNavigate, useOutlet as useOutlet$1 } from 'react-router';\nimport useDebounce from 'react-use/lib/useDebounce';\nimport { Alert, Skeleton } from '@material-ui/lab';\nimport Close from '@material-ui/icons/Close';\nimport useAsync from 'react-use/lib/useAsync';\nimport useAsyncRetry from 'react-use/lib/useAsyncRetry';\nimport { lighten, alpha } from '@material-ui/core/styles';\nimport { scmIntegrationsApiRef } from '@backstage/integration-react';\nimport { replaceGitHubUrlType } from '@backstage/integration';\nimport FeedbackOutlinedIcon from '@material-ui/icons/FeedbackOutlined';\nimport ReactDOM from 'react-dom';\nimport parseGitUrl from 'git-url-parse';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport DOMPurify from 'dompurify';\nimport Helmet from 'react-helmet';\nimport CodeIcon from '@material-ui/icons/Code';\nimport { getEntityRelations, EntityRefLink, EntityRefLinks, useEntityList, humanizeEntityRef, useStarredEntities, CATALOG_FILTER_EXISTS, EntityListProvider, CatalogFilterLayout, UserListPicker, EntityOwnerPicker, EntityTagPicker, useEntity } from '@backstage/plugin-catalog-react';\nimport { RELATION_OWNED_BY, getCompoundEntityRef } from '@backstage/catalog-model';\nimport useCopyToClipboard from 'react-use/lib/useCopyToClipboard';\nimport { capitalize } from 'lodash';\nimport ShareIcon from '@material-ui/icons/Share';\nimport Star from '@material-ui/icons/Star';\nimport StarBorder from '@material-ui/icons/StarBorder';\nimport { FlatRoutes } from '@backstage/core-app-api';\n\nconst techdocsStorageApiRef = createApiRef({\n  id: \"plugin.techdocs.storageservice\"\n});\nconst techdocsApiRef = createApiRef({\n  id: \"plugin.techdocs.service\"\n});\n\nclass TechDocsClient {\n  constructor(options) {\n    this.configApi = options.configApi;\n    this.discoveryApi = options.discoveryApi;\n    this.fetchApi = options.fetchApi;\n  }\n  async getApiOrigin() {\n    return await this.discoveryApi.getBaseUrl(\"techdocs\");\n  }\n  async getTechDocsMetadata(entityId) {\n    const { kind, namespace, name } = entityId;\n    const apiOrigin = await this.getApiOrigin();\n    const requestUrl = `${apiOrigin}/metadata/techdocs/${namespace}/${kind}/${name}`;\n    const request = await this.fetchApi.fetch(`${requestUrl}`);\n    if (!request.ok) {\n      throw await ResponseError.fromResponse(request);\n    }\n    return await request.json();\n  }\n  async getEntityMetadata(entityId) {\n    const { kind, namespace, name } = entityId;\n    const apiOrigin = await this.getApiOrigin();\n    const requestUrl = `${apiOrigin}/metadata/entity/${namespace}/${kind}/${name}`;\n    const request = await this.fetchApi.fetch(`${requestUrl}`);\n    if (!request.ok) {\n      throw await ResponseError.fromResponse(request);\n    }\n    return await request.json();\n  }\n}\nclass TechDocsStorageClient {\n  constructor(options) {\n    this.configApi = options.configApi;\n    this.discoveryApi = options.discoveryApi;\n    this.identityApi = options.identityApi;\n    this.fetchApi = options.fetchApi;\n  }\n  async getApiOrigin() {\n    return await this.discoveryApi.getBaseUrl(\"techdocs\");\n  }\n  async getStorageUrl() {\n    var _a;\n    return (_a = this.configApi.getOptionalString(\"techdocs.storageUrl\")) != null ? _a : `${await this.discoveryApi.getBaseUrl(\"techdocs\")}/static/docs`;\n  }\n  async getBuilder() {\n    return this.configApi.getString(\"techdocs.builder\");\n  }\n  async getEntityDocs(entityId, path) {\n    const { kind, namespace, name } = entityId;\n    const storageUrl = await this.getStorageUrl();\n    const url = `${storageUrl}/${namespace}/${kind}/${name}/${path}`;\n    const request = await this.fetchApi.fetch(`${url.endsWith(\"/\") ? url : `${url}/`}index.html`);\n    let errorMessage = \"\";\n    switch (request.status) {\n      case 404:\n        errorMessage = \"Page not found. \";\n        if (!path) {\n          errorMessage += \"This could be because there is no index.md file in the root of the docs directory of this repository.\";\n        }\n        throw new NotFoundError(errorMessage);\n      case 500:\n        errorMessage = \"Could not generate documentation or an error in the TechDocs backend. \";\n        throw new Error(errorMessage);\n    }\n    return request.text();\n  }\n  async syncEntityDocs(entityId, logHandler = () => {\n  }) {\n    const { kind, namespace, name } = entityId;\n    const apiOrigin = await this.getApiOrigin();\n    const url = `${apiOrigin}/sync/${namespace}/${kind}/${name}`;\n    const { token } = await this.identityApi.getCredentials();\n    return new Promise((resolve, reject) => {\n      const source = new EventSourcePolyfill(url, {\n        withCredentials: true,\n        headers: token ? { Authorization: `Bearer ${token}` } : {}\n      });\n      source.addEventListener(\"log\", (e) => {\n        if (e.data) {\n          logHandler(JSON.parse(e.data));\n        }\n      });\n      source.addEventListener(\"finish\", (e) => {\n        let updated = false;\n        if (e.data) {\n          ({ updated } = JSON.parse(e.data));\n        }\n        resolve(updated ? \"updated\" : \"cached\");\n      });\n      source.onerror = (e) => {\n        source.close();\n        switch (e.status) {\n          case 404:\n            reject(new NotFoundError(e.message));\n            return;\n          default:\n            reject(new Error(e.data));\n            return;\n        }\n      };\n    });\n  }\n  async getBaseUrl(oldBaseUrl, entityId, path) {\n    const { kind, namespace, name } = entityId;\n    const apiOrigin = await this.getApiOrigin();\n    const newBaseUrl = `${apiOrigin}/static/docs/${namespace}/${kind}/${name}/${path}`;\n    return new URL(oldBaseUrl, newBaseUrl.endsWith(\"/\") ? newBaseUrl : `${newBaseUrl}/`).toString();\n  }\n}\n\nconst useStyles$4 = makeStyles({\n  flexContainer: {\n    flexWrap: \"wrap\"\n  },\n  itemText: {\n    width: \"100%\",\n    marginBottom: \"1rem\"\n  }\n});\nconst TechDocsSearchResultListItem = (props) => {\n  const {\n    result,\n    lineClamp = 5,\n    asListItem = true,\n    asLink = true,\n    title\n  } = props;\n  const classes = useStyles$4();\n  const TextItem = () => {\n    var _a;\n    return /* @__PURE__ */ React.createElement(ListItemText, {\n      className: classes.itemText,\n      primaryTypographyProps: { variant: \"h6\" },\n      primary: title ? title : `${result.title} | ${(_a = result.entityTitle) != null ? _a : result.name} docs`,\n      secondary: /* @__PURE__ */ React.createElement(TextTruncate, {\n        line: lineClamp,\n        truncateText: \"\\u2026\",\n        text: result.text,\n        element: \"span\"\n      })\n    });\n  };\n  const LinkWrapper = ({ children }) => asLink ? /* @__PURE__ */ React.createElement(Link, {\n    to: result.location\n  }, children) : /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n  const ListItemWrapper = ({ children }) => asListItem ? /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(ListItem, {\n    alignItems: \"flex-start\",\n    className: classes.flexContainer\n  }, children), /* @__PURE__ */ React.createElement(Divider, {\n    component: \"li\"\n  })) : /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n  return /* @__PURE__ */ React.createElement(LinkWrapper, null, /* @__PURE__ */ React.createElement(ListItemWrapper, null, /* @__PURE__ */ React.createElement(TextItem, null)));\n};\n\nconst useStyles$3 = makeStyles({\n  root: {\n    width: \"100%\"\n  }\n});\nconst TechDocsSearchBar = (props) => {\n  const { entityId, debounceTime = 150 } = props;\n  const [open, setOpen] = useState(false);\n  const navigate = useNavigate();\n  const {\n    term,\n    setTerm,\n    setFilters,\n    result: { loading, value: searchVal }\n  } = useSearch();\n  const classes = useStyles$3();\n  const [options, setOptions] = useState([]);\n  useEffect(() => {\n    let mounted = true;\n    if (mounted && searchVal) {\n      const searchResults = searchVal.results.slice(0, 10);\n      setOptions(searchResults);\n    }\n    return () => {\n      mounted = false;\n    };\n  }, [loading, searchVal]);\n  const [value, setValue] = useState(term);\n  useDebounce(() => setTerm(value), debounceTime, [value]);\n  const { kind, name, namespace } = entityId;\n  useEffect(() => {\n    setFilters((prevFilters) => {\n      return {\n        ...prevFilters,\n        kind,\n        namespace,\n        name\n      };\n    });\n  }, [kind, namespace, name, setFilters]);\n  const handleQuery = (e) => {\n    if (!open) {\n      setOpen(true);\n    }\n    setValue(e.target.value);\n  };\n  const handleSelection = (_, selection) => {\n    if (selection == null ? void 0 : selection.document) {\n      const { location } = selection.document;\n      navigate(location);\n    }\n  };\n  return /* @__PURE__ */ React.createElement(Autocomplete, {\n    classes: { root: classes.root },\n    \"data-testid\": \"techdocs-search-bar\",\n    size: \"small\",\n    open,\n    getOptionLabel: () => \"\",\n    filterOptions: (x) => {\n      return x;\n    },\n    onClose: () => {\n      setOpen(false);\n    },\n    onFocus: () => {\n      setOpen(true);\n    },\n    onChange: handleSelection,\n    blurOnSelect: true,\n    noOptionsText: \"No results found\",\n    value: null,\n    options,\n    renderOption: ({ document }) => /* @__PURE__ */ React.createElement(TechDocsSearchResultListItem, {\n      result: document,\n      lineClamp: 3,\n      asListItem: false,\n      asLink: false,\n      title: document.title\n    }),\n    loading,\n    renderInput: (params) => /* @__PURE__ */ React.createElement(TextField, {\n      ...params,\n      \"data-testid\": \"techdocs-search-bar-input\",\n      variant: \"outlined\",\n      fullWidth: true,\n      placeholder: `Search ${entityId.name} docs`,\n      value,\n      onChange: handleQuery,\n      InputProps: {\n        ...params.InputProps,\n        startAdornment: /* @__PURE__ */ React.createElement(InputAdornment, {\n          position: \"start\"\n        }, /* @__PURE__ */ React.createElement(IconButton, {\n          \"aria-label\": \"Query\",\n          disabled: true\n        }, /* @__PURE__ */ React.createElement(SearchIcon, null))),\n        endAdornment: /* @__PURE__ */ React.createElement(React.Fragment, null, loading ? /* @__PURE__ */ React.createElement(CircularProgress, {\n          color: \"inherit\",\n          size: 20\n        }) : null, params.InputProps.endAdornment)\n      }\n    })\n  });\n};\nconst TechDocsSearch = (props) => {\n  const initialState = {\n    term: \"\",\n    types: [\"techdocs\"],\n    pageCursor: \"\",\n    filters: props.entityId\n  };\n  return /* @__PURE__ */ React.createElement(SearchContextProvider, {\n    initialState\n  }, /* @__PURE__ */ React.createElement(TechDocsSearchBar, {\n    ...props\n  }));\n};\n\nconst useDrawerStyles = makeStyles((theme) => createStyles({\n  paper: {\n    width: \"100%\",\n    [theme.breakpoints.up(\"sm\")]: {\n      width: \"75%\"\n    },\n    [theme.breakpoints.up(\"md\")]: {\n      width: \"50%\"\n    },\n    padding: theme.spacing(2.5)\n  },\n  root: {\n    height: \"100%\",\n    overflow: \"hidden\"\n  },\n  logs: {\n    background: theme.palette.background.default\n  }\n}));\nconst TechDocsBuildLogsDrawerContent = ({\n  buildLog,\n  onClose\n}) => {\n  const classes = useDrawerStyles();\n  const logText = buildLog.length === 0 ? \"Waiting for logs...\" : buildLog.join(\"\\n\");\n  return /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    direction: \"column\",\n    className: classes.root,\n    spacing: 0,\n    wrap: \"nowrap\"\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    container: true,\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    spacing: 0,\n    wrap: \"nowrap\"\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"h5\"\n  }, \"Build Details\"), /* @__PURE__ */ React.createElement(IconButton, {\n    key: \"dismiss\",\n    title: \"Close the drawer\",\n    onClick: onClose,\n    color: \"inherit\"\n  }, /* @__PURE__ */ React.createElement(Close, null))), /* @__PURE__ */ React.createElement(LogViewer, {\n    text: logText,\n    classes: { root: classes.logs }\n  }));\n};\nconst TechDocsBuildLogs = ({ buildLog }) => {\n  const classes = useDrawerStyles();\n  const [open, setOpen] = useState(false);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Button, {\n    color: \"inherit\",\n    onClick: () => setOpen(true)\n  }, \"Show Build Logs\"), /* @__PURE__ */ React.createElement(Drawer, {\n    classes: { paper: classes.paper },\n    anchor: \"right\",\n    open,\n    onClose: () => setOpen(false)\n  }, /* @__PURE__ */ React.createElement(TechDocsBuildLogsDrawerContent, {\n    buildLog,\n    onClose: () => setOpen(false)\n  })));\n};\n\nconst TechDocsNotFound = ({ errorMessage }) => {\n  const techdocsBuilder = useApi(configApiRef).getOptionalString(\"techdocs.builder\");\n  let additionalInfo = \"\";\n  if (techdocsBuilder !== \"local\") {\n    additionalInfo = \"Note that techdocs.builder is not set to 'local' in your config, which means this Backstage app will not generate docs if they are not found. Make sure the project's docs are generated and published by some external process (e.g. CI/CD pipeline). Or change techdocs.builder to 'local' to generate docs from this Backstage instance.\";\n  }\n  return /* @__PURE__ */ React.createElement(ErrorPage, {\n    status: \"404\",\n    statusMessage: errorMessage || \"Documentation not found\",\n    additionalInfo\n  });\n};\n\nconst useStyles$2 = makeStyles((theme) => ({\n  root: {\n    marginBottom: theme.spacing(2)\n  },\n  message: {\n    wordBreak: \"break-word\",\n    overflowWrap: \"anywhere\"\n  }\n}));\nconst TechDocsStateIndicator = () => {\n  let StateAlert = null;\n  const classes = useStyles$2();\n  const {\n    state,\n    contentReload,\n    contentErrorMessage,\n    syncErrorMessage,\n    buildLog\n  } = useTechDocsReader();\n  const ReaderProgress = state === \"CHECKING\" ? /* @__PURE__ */ React.createElement(Progress, null) : null;\n  if (state === \"INITIAL_BUILD\") {\n    StateAlert = /* @__PURE__ */ React.createElement(Alert, {\n      classes: { root: classes.root },\n      variant: \"outlined\",\n      severity: \"info\",\n      icon: /* @__PURE__ */ React.createElement(CircularProgress, {\n        size: \"24px\"\n      }),\n      action: /* @__PURE__ */ React.createElement(TechDocsBuildLogs, {\n        buildLog\n      })\n    }, \"Documentation is accessed for the first time and is being prepared. The subsequent loads are much faster.\");\n  }\n  if (state === \"CONTENT_STALE_REFRESHING\") {\n    StateAlert = /* @__PURE__ */ React.createElement(Alert, {\n      variant: \"outlined\",\n      severity: \"info\",\n      icon: /* @__PURE__ */ React.createElement(CircularProgress, {\n        size: \"24px\"\n      }),\n      action: /* @__PURE__ */ React.createElement(TechDocsBuildLogs, {\n        buildLog\n      }),\n      classes: { root: classes.root }\n    }, \"A newer version of this documentation is being prepared and will be available shortly.\");\n  }\n  if (state === \"CONTENT_STALE_READY\") {\n    StateAlert = /* @__PURE__ */ React.createElement(Alert, {\n      variant: \"outlined\",\n      severity: \"success\",\n      action: /* @__PURE__ */ React.createElement(Button, {\n        color: \"inherit\",\n        onClick: () => contentReload()\n      }, \"Refresh\"),\n      classes: { root: classes.root }\n    }, \"A newer version of this documentation is now available, please refresh to view.\");\n  }\n  if (state === \"CONTENT_STALE_ERROR\") {\n    StateAlert = /* @__PURE__ */ React.createElement(Alert, {\n      variant: \"outlined\",\n      severity: \"error\",\n      action: /* @__PURE__ */ React.createElement(TechDocsBuildLogs, {\n        buildLog\n      }),\n      classes: { root: classes.root, message: classes.message }\n    }, \"Building a newer version of this documentation failed.\", \" \", syncErrorMessage);\n  }\n  if (state === \"CONTENT_NOT_FOUND\") {\n    StateAlert = /* @__PURE__ */ React.createElement(React.Fragment, null, syncErrorMessage && /* @__PURE__ */ React.createElement(Alert, {\n      variant: \"outlined\",\n      severity: \"error\",\n      action: /* @__PURE__ */ React.createElement(TechDocsBuildLogs, {\n        buildLog\n      }),\n      classes: { root: classes.root, message: classes.message }\n    }, \"Building a newer version of this documentation failed.\", \" \", syncErrorMessage), /* @__PURE__ */ React.createElement(TechDocsNotFound, {\n      errorMessage: contentErrorMessage\n    }));\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, ReaderProgress, StateAlert);\n};\n\nfunction calculateDisplayState({\n  contentLoading,\n  content,\n  activeSyncState\n}) {\n  if (contentLoading) {\n    return \"CHECKING\";\n  }\n  if (activeSyncState === \"BUILD_READY_RELOAD\") {\n    return \"CHECKING\";\n  }\n  if (!content && activeSyncState === \"CHECKING\") {\n    return \"CHECKING\";\n  }\n  if (!content && activeSyncState === \"BUILDING\") {\n    return \"INITIAL_BUILD\";\n  }\n  if (!content) {\n    return \"CONTENT_NOT_FOUND\";\n  }\n  if (activeSyncState === \"BUILDING\") {\n    return \"CONTENT_STALE_REFRESHING\";\n  }\n  if (activeSyncState === \"BUILD_READY\") {\n    return \"CONTENT_STALE_READY\";\n  }\n  if (activeSyncState === \"ERROR\") {\n    return \"CONTENT_STALE_ERROR\";\n  }\n  return \"CONTENT_FRESH\";\n}\nfunction reducer(oldState, action) {\n  const newState = { ...oldState };\n  switch (action.type) {\n    case \"sync\":\n      if (action.state === \"CHECKING\") {\n        newState.buildLog = [];\n      }\n      newState.activeSyncState = action.state;\n      newState.syncError = action.syncError;\n      break;\n    case \"contentLoading\":\n      newState.contentLoading = true;\n      newState.contentError = void 0;\n      break;\n    case \"content\":\n      if (typeof action.path === \"string\") {\n        newState.path = action.path;\n      }\n      newState.contentLoading = false;\n      newState.content = action.content;\n      newState.contentError = action.contentError;\n      break;\n    case \"buildLog\":\n      newState.buildLog = newState.buildLog.concat(action.log);\n      break;\n    default:\n      throw new Error();\n  }\n  if ([\"BUILD_READY\", \"BUILD_READY_RELOAD\"].includes(newState.activeSyncState) && [\"contentLoading\", \"content\"].includes(action.type)) {\n    newState.activeSyncState = \"UP_TO_DATE\";\n    newState.buildLog = [];\n  }\n  return newState;\n}\nfunction useReaderState(kind, namespace, name, path) {\n  var _a, _b;\n  const [state, dispatch] = useReducer(reducer, {\n    activeSyncState: \"CHECKING\",\n    path,\n    contentLoading: true,\n    buildLog: []\n  });\n  const techdocsStorageApi = useApi(techdocsStorageApiRef);\n  const { retry: contentReload } = useAsyncRetry(async () => {\n    dispatch({ type: \"contentLoading\" });\n    try {\n      const entityDocs = await techdocsStorageApi.getEntityDocs({ kind, namespace, name }, path);\n      dispatch({ type: \"content\", content: entityDocs, path });\n      return entityDocs;\n    } catch (e) {\n      dispatch({ type: \"content\", contentError: e, path });\n    }\n    return void 0;\n  }, [techdocsStorageApi, kind, namespace, name, path]);\n  const contentRef = useRef({\n    content: void 0,\n    reload: () => {\n    }\n  });\n  contentRef.current = { content: state.content, reload: contentReload };\n  useAsync(async () => {\n    dispatch({ type: \"sync\", state: \"CHECKING\" });\n    const buildingTimeout = setTimeout(() => {\n      dispatch({ type: \"sync\", state: \"BUILDING\" });\n    }, 1e3);\n    try {\n      const result = await techdocsStorageApi.syncEntityDocs({\n        kind,\n        namespace,\n        name\n      }, (log) => {\n        dispatch({ type: \"buildLog\", log });\n      });\n      switch (result) {\n        case \"updated\":\n          if (!contentRef.current.content) {\n            contentRef.current.reload();\n            dispatch({ type: \"sync\", state: \"BUILD_READY_RELOAD\" });\n          } else {\n            dispatch({ type: \"sync\", state: \"BUILD_READY\" });\n          }\n          break;\n        case \"cached\":\n          dispatch({ type: \"sync\", state: \"UP_TO_DATE\" });\n          break;\n        default:\n          dispatch({\n            type: \"sync\",\n            state: \"ERROR\",\n            syncError: new Error(\"Unexpected return state\")\n          });\n          break;\n      }\n    } catch (e) {\n      dispatch({ type: \"sync\", state: \"ERROR\", syncError: e });\n    } finally {\n      clearTimeout(buildingTimeout);\n    }\n  }, [kind, name, namespace, techdocsStorageApi, dispatch, contentRef]);\n  const displayState = useMemo(() => calculateDisplayState({\n    activeSyncState: state.activeSyncState,\n    contentLoading: state.contentLoading,\n    content: state.content\n  }), [state.activeSyncState, state.content, state.contentLoading]);\n  return {\n    state: displayState,\n    contentReload,\n    path: state.path,\n    content: state.content,\n    contentErrorMessage: (_a = state.contentError) == null ? void 0 : _a.toString(),\n    syncErrorMessage: (_b = state.syncError) == null ? void 0 : _b.toString(),\n    buildLog: state.buildLog\n  };\n}\n\nconst TechDocsReaderContext = createContext({});\nconst useTechDocsReader = () => useContext(TechDocsReaderContext);\nconst TechDocsReaderProvider = ({\n  children\n}) => {\n  const { \"*\": path = \"\" } = useParams();\n  const { entityRef } = useTechDocsReaderPage();\n  const { kind, namespace, name } = entityRef;\n  const value = useReaderState(kind, namespace, name, path);\n  return /* @__PURE__ */ React.createElement(TechDocsReaderContext.Provider, {\n    value\n  }, children instanceof Function ? children(value) : children);\n};\nconst withTechDocsReaderProvider = (Component) => (props) => /* @__PURE__ */ React.createElement(TechDocsReaderProvider, null, /* @__PURE__ */ React.createElement(Component, {\n  ...props\n}));\n\nconst isSvgNeedingInlining = (attrName, attrVal, apiOrigin) => {\n  const isSrcToSvg = attrName === \"src\" && attrVal.endsWith(\".svg\");\n  const isRelativeUrl = !attrVal.match(/^([a-z]*:)?\\/\\//i);\n  const pointsToOurBackend = attrVal.startsWith(apiOrigin);\n  return isSrcToSvg && (isRelativeUrl || pointsToOurBackend);\n};\nconst addBaseUrl = ({\n  techdocsStorageApi,\n  entityId,\n  path\n}) => {\n  return async (dom) => {\n    const apiOrigin = await techdocsStorageApi.getApiOrigin();\n    const updateDom = async (list, attributeName) => {\n      for (const elem of list) {\n        if (elem.hasAttribute(attributeName)) {\n          const elemAttribute = elem.getAttribute(attributeName);\n          if (!elemAttribute)\n            return;\n          const newValue = await techdocsStorageApi.getBaseUrl(elemAttribute, entityId, path);\n          if (isSvgNeedingInlining(attributeName, elemAttribute, apiOrigin)) {\n            try {\n              const svg = await fetch(newValue, { credentials: \"include\" });\n              const svgContent = await svg.text();\n              elem.setAttribute(attributeName, `data:image/svg+xml;base64,${btoa(svgContent)}`);\n            } catch (e) {\n              elem.setAttribute(\"alt\", `Error: ${elemAttribute}`);\n            }\n          } else {\n            elem.setAttribute(attributeName, newValue);\n          }\n        }\n      }\n    };\n    await Promise.all([\n      updateDom(dom.querySelectorAll(\"img\"), \"src\"),\n      updateDom(dom.querySelectorAll(\"script\"), \"src\"),\n      updateDom(dom.querySelectorAll(\"source\"), \"src\"),\n      updateDom(dom.querySelectorAll(\"link\"), \"href\"),\n      updateDom(dom.querySelectorAll(\"a[download]\"), \"href\")\n    ]);\n    return dom;\n  };\n};\n\nconst addGitFeedbackLink = (scmIntegrationsApi) => {\n  return (dom) => {\n    const sourceAnchor = dom.querySelector('[title=\"Edit this page\"]');\n    if (!sourceAnchor || !sourceAnchor.href) {\n      return dom;\n    }\n    const sourceURL = new URL(sourceAnchor.href);\n    const integration = scmIntegrationsApi.byUrl(sourceURL);\n    if ((integration == null ? void 0 : integration.type) !== \"github\" && (integration == null ? void 0 : integration.type) !== \"gitlab\") {\n      return dom;\n    }\n    const title = dom.querySelector(\"article>h1\").childNodes[0].textContent;\n    const issueTitle = encodeURIComponent(`Documentation Feedback: ${title}`);\n    const issueDesc = encodeURIComponent(`Page source:\n${sourceAnchor.href}\n\nFeedback:`);\n    const gitUrl = (integration == null ? void 0 : integration.type) === \"github\" ? replaceGitHubUrlType(sourceURL.href, \"blob\") : sourceURL.href;\n    const gitInfo = parseGitUrl(gitUrl);\n    const repoPath = `/${gitInfo.organization}/${gitInfo.name}`;\n    const feedbackLink = sourceAnchor.cloneNode();\n    switch (integration == null ? void 0 : integration.type) {\n      case \"gitlab\":\n        feedbackLink.href = `${sourceURL.origin}${repoPath}/issues/new?issue[title]=${issueTitle}&issue[description]=${issueDesc}`;\n        break;\n      case \"github\":\n        feedbackLink.href = `${sourceURL.origin}${repoPath}/issues/new?title=${issueTitle}&body=${issueDesc}`;\n        break;\n      default:\n        return dom;\n    }\n    ReactDOM.render(React.createElement(FeedbackOutlinedIcon), feedbackLink);\n    feedbackLink.style.paddingLeft = \"5px\";\n    feedbackLink.title = \"Leave feedback for this page\";\n    feedbackLink.id = \"git-feedback-link\";\n    sourceAnchor == null ? void 0 : sourceAnchor.insertAdjacentElement(\"beforebegin\", feedbackLink);\n    return dom;\n  };\n};\n\nconst addSidebarToggle = () => {\n  return (dom) => {\n    const mkdocsToggleSidebar = dom.querySelector('.md-header label[for=\"__drawer\"]');\n    const article = dom.querySelector(\"article\");\n    if (!mkdocsToggleSidebar || !article) {\n      return dom;\n    }\n    const toggleSidebar = mkdocsToggleSidebar.cloneNode();\n    ReactDOM.render(React.createElement(MenuIcon), toggleSidebar);\n    toggleSidebar.id = \"toggle-sidebar\";\n    toggleSidebar.title = \"Toggle Sidebar\";\n    toggleSidebar.classList.add(\"md-content__button\");\n    toggleSidebar.style.setProperty(\"padding\", \"0 0 0 5px\");\n    toggleSidebar.style.setProperty(\"margin\", \"0.4rem 0 0.4rem 0.4rem\");\n    article == null ? void 0 : article.prepend(toggleSidebar);\n    return dom;\n  };\n};\n\nconst rewriteDocLinks = () => {\n  return (dom) => {\n    const updateDom = (list, attributeName) => {\n      Array.from(list).filter((elem) => elem.hasAttribute(attributeName)).forEach((elem) => {\n        const elemAttribute = elem.getAttribute(attributeName);\n        if (elemAttribute) {\n          if (elemAttribute.match(/^https?:\\/\\//i)) {\n            elem.setAttribute(\"target\", \"_blank\");\n          }\n          try {\n            const normalizedWindowLocation = normalizeUrl(window.location.href);\n            elem.setAttribute(attributeName, new URL(elemAttribute, normalizedWindowLocation).toString());\n          } catch (_e) {\n            elem.replaceWith(elem.textContent || elemAttribute);\n          }\n        }\n      });\n    };\n    updateDom(Array.from(dom.getElementsByTagName(\"a\")), \"href\");\n    return dom;\n  };\n};\nfunction normalizeUrl(input) {\n  const url = new URL(input);\n  if (!url.pathname.endsWith(\"/\") && !url.pathname.endsWith(\".html\")) {\n    url.pathname += \"/\";\n  }\n  return url.toString();\n}\n\nconst addLinkClickListener = ({\n  baseUrl,\n  onClick\n}) => {\n  return (dom) => {\n    Array.from(dom.getElementsByTagName(\"a\")).forEach((elem) => {\n      elem.addEventListener(\"click\", (e) => {\n        const target = elem;\n        const href = target.getAttribute(\"href\");\n        if (!href)\n          return;\n        if (href.startsWith(baseUrl) && !elem.hasAttribute(\"download\")) {\n          e.preventDefault();\n          onClick(e, href);\n        }\n      });\n    });\n    return dom;\n  };\n};\n\nconst CopyToClipboardTooltip = withStyles((theme) => ({\n  tooltip: {\n    fontSize: \"inherit\",\n    color: theme.palette.text.primary,\n    margin: 0,\n    padding: theme.spacing(0.5),\n    backgroundColor: \"transparent\",\n    boxShadow: \"none\"\n  }\n}))(Tooltip);\nconst CopyToClipboardIcon = () => /* @__PURE__ */ React.createElement(SvgIcon, null, /* @__PURE__ */ React.createElement(\"path\", {\n  d: \"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z\"\n}));\nconst CopyToClipboardButton = ({ text }) => {\n  const [open, setOpen] = useState(false);\n  const handleClick = useCallback(() => {\n    navigator.clipboard.writeText(text);\n    setOpen(true);\n  }, [text]);\n  const handleClose = useCallback(() => {\n    setOpen(false);\n  }, [setOpen]);\n  return /* @__PURE__ */ React.createElement(CopyToClipboardTooltip, {\n    title: \"Copied to clipboard\",\n    placement: \"left\",\n    open,\n    onClose: handleClose,\n    leaveDelay: 1e3\n  }, /* @__PURE__ */ React.createElement(\"button\", {\n    className: \"md-clipboard md-icon\",\n    onClick: handleClick\n  }, /* @__PURE__ */ React.createElement(CopyToClipboardIcon, null)));\n};\nconst copyToClipboard = (theme) => {\n  return (dom) => {\n    var _a;\n    const codes = dom.querySelectorAll(\"pre > code\");\n    for (const code of codes) {\n      const text = code.textContent || \"\";\n      const container = document.createElement(\"div\");\n      (_a = code == null ? void 0 : code.parentElement) == null ? void 0 : _a.prepend(container);\n      ReactDOM.render(/* @__PURE__ */ React.createElement(ThemeProvider, {\n        theme\n      }, /* @__PURE__ */ React.createElement(CopyToClipboardButton, {\n        text\n      })), container);\n    }\n    return dom;\n  };\n};\n\nconst removeMkdocsHeader = () => {\n  return (dom) => {\n    var _a;\n    (_a = dom.querySelector(\".md-header\")) == null ? void 0 : _a.remove();\n    return dom;\n  };\n};\n\nconst simplifyMkdocsFooter = () => {\n  return (dom) => {\n    var _a, _b;\n    (_a = dom.querySelector(\".md-footer .md-copyright\")) == null ? void 0 : _a.remove();\n    (_b = dom.querySelector(\".md-footer-copyright\")) == null ? void 0 : _b.remove();\n    return dom;\n  };\n};\n\nconst onCssReady = ({\n  docStorageUrl,\n  onLoading,\n  onLoaded\n}) => {\n  return (dom) => {\n    const cssPages = Array.from(dom.querySelectorAll('head > link[rel=\"stylesheet\"]')).filter((elem) => {\n      var _a;\n      return (_a = elem.getAttribute(\"href\")) == null ? void 0 : _a.startsWith(docStorageUrl);\n    });\n    let count = cssPages.length;\n    if (count > 0) {\n      onLoading(dom);\n    }\n    cssPages.forEach((cssPage) => cssPage.addEventListener(\"load\", () => {\n      count -= 1;\n      if (count === 0) {\n        onLoaded(dom);\n      }\n    }));\n    return dom;\n  };\n};\n\nconst TECHDOCS_CSS = /main\\.[A-Fa-f0-9]{8}\\.min\\.css$/;\nconst GOOGLE_FONTS = /^https:\\/\\/fonts\\.googleapis\\.com/;\nconst GSTATIC_FONTS = /^https:\\/\\/fonts\\.gstatic\\.com/;\nconst safeLinksHook = (node) => {\n  if (node.nodeName && node.nodeName === \"LINK\") {\n    const href = node.getAttribute(\"href\") || \"\";\n    if (href.match(TECHDOCS_CSS)) {\n      node.setAttribute(\"rel\", \"stylesheet\");\n    }\n    if (href.match(GOOGLE_FONTS)) {\n      node.setAttribute(\"rel\", \"stylesheet\");\n    }\n    if (href.match(GSTATIC_FONTS)) {\n      node.setAttribute(\"rel\", \"preconnect\");\n    }\n  }\n  return node;\n};\nconst filterIframeHook = (allowedIframeHosts) => (node) => {\n  if (node.nodeName === \"IFRAME\") {\n    const src = node.getAttribute(\"src\");\n    if (!src) {\n      node.remove();\n      return node;\n    }\n    try {\n      const srcUrl = new URL(src);\n      const isMatch = allowedIframeHosts.some((host) => srcUrl.host === host);\n      if (!isMatch) {\n        node.remove();\n      }\n    } catch (error) {\n      console.warn(`Invalid iframe src, ${error}`);\n      node.remove();\n    }\n  }\n  return node;\n};\nconst sanitizeDOM = (config) => {\n  const allowedIframeHosts = (config == null ? void 0 : config.getOptionalStringArray(\"allowedIframeHosts\")) || [];\n  return (dom) => {\n    DOMPurify.addHook(\"afterSanitizeAttributes\", safeLinksHook);\n    const addTags = [\"link\"];\n    if (allowedIframeHosts.length > 0) {\n      DOMPurify.addHook(\"beforeSanitizeElements\", filterIframeHook(allowedIframeHosts));\n      addTags.push(\"iframe\");\n    }\n    return DOMPurify.sanitize(dom.innerHTML, {\n      ADD_TAGS: addTags,\n      FORBID_TAGS: [\"style\"],\n      WHOLE_DOCUMENT: true,\n      RETURN_DOM: true\n    });\n  };\n};\n\nconst injectCss = ({ css }) => {\n  return (dom) => {\n    dom.getElementsByTagName(\"head\")[0].insertAdjacentHTML(\"beforeend\", `<style>${css}</style>`);\n    return dom;\n  };\n};\n\nconst scrollIntoAnchor = () => {\n  return (dom) => {\n    setTimeout(() => {\n      var _a;\n      if (window.location.hash) {\n        const hash = window.location.hash.slice(1);\n        (_a = dom == null ? void 0 : dom.querySelector(`[id=\"${hash}\"]`)) == null ? void 0 : _a.scrollIntoView();\n      }\n    }, 200);\n    return dom;\n  };\n};\n\nconst transform = async (html, transformers) => {\n  let dom;\n  if (typeof html === \"string\") {\n    dom = new DOMParser().parseFromString(html, \"text/html\").documentElement;\n  } else if (html instanceof Element) {\n    dom = html;\n  } else {\n    throw new Error(\"dom is not a recognized type\");\n  }\n  for (const transformer of transformers) {\n    dom = await transformer(dom);\n  }\n  return dom;\n};\n\nconst headings = [\"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\"];\nconst useTechDocsReaderDom = (entityRef) => {\n  const navigate = useNavigate$1();\n  const theme = useTheme();\n  const techdocsStorageApi = useApi(techdocsStorageApiRef);\n  const scmIntegrationsApi = useApi(scmIntegrationsApiRef);\n  const techdocsSanitizer = useApi(configApiRef);\n  const { namespace, kind, name } = entityRef;\n  const { state, path, content: rawPage } = useTechDocsReader();\n  const isDarkTheme = theme.palette.type === \"dark\";\n  const [sidebars, setSidebars] = useState();\n  const [dom, setDom] = useState(null);\n  const { isPinned } = useContext(SidebarPinStateContext);\n  const updateSidebarPosition = useCallback(() => {\n    if (!dom || !sidebars)\n      return;\n    const mdTabs = dom.querySelector(\".md-container > .md-tabs\");\n    const sidebarsCollapsed = window.matchMedia(\"screen and (max-width: 76.1875em)\").matches;\n    const newTop = Math.max(dom.getBoundingClientRect().top, 0);\n    sidebars.forEach((sidebar) => {\n      if (sidebarsCollapsed) {\n        sidebar.style.top = \"0px\";\n      } else if (mdTabs) {\n        sidebar.style.top = `${newTop + mdTabs.getBoundingClientRect().height}px`;\n      } else {\n        sidebar.style.top = `${newTop}px`;\n      }\n    });\n  }, [dom, sidebars]);\n  useEffect(() => {\n    updateSidebarPosition();\n    window.addEventListener(\"scroll\", updateSidebarPosition, true);\n    window.addEventListener(\"resize\", updateSidebarPosition);\n    return () => {\n      window.removeEventListener(\"scroll\", updateSidebarPosition, true);\n      window.removeEventListener(\"resize\", updateSidebarPosition);\n    };\n  }, [updateSidebarPosition, state]);\n  const updateFooterWidth = useCallback(() => {\n    if (!dom)\n      return;\n    const footer = dom.querySelector(\".md-footer\");\n    if (footer) {\n      footer.style.width = `${dom.getBoundingClientRect().width}px`;\n    }\n  }, [dom]);\n  useEffect(() => {\n    updateFooterWidth();\n    window.addEventListener(\"resize\", updateFooterWidth);\n    return () => {\n      window.removeEventListener(\"resize\", updateFooterWidth);\n    };\n  });\n  const preRender = useCallback((rawContent, contentPath) => transform(rawContent, [\n    sanitizeDOM(techdocsSanitizer.getOptionalConfig(\"techdocs.sanitizer\")),\n    addBaseUrl({\n      techdocsStorageApi,\n      entityId: {\n        kind,\n        name,\n        namespace\n      },\n      path: contentPath\n    }),\n    rewriteDocLinks(),\n    addSidebarToggle(),\n    removeMkdocsHeader(),\n    simplifyMkdocsFooter(),\n    addGitFeedbackLink(scmIntegrationsApi),\n    injectCss({\n      css: `\n            /*\n              As the MkDocs output is rendered in shadow DOM, the CSS variable definitions on the root selector are not applied. Instead, they have to be applied on :host.\n              As there is no way to transform the served main*.css yet (for example in the backend), we have to copy from main*.css and modify them.\n            */\n            :host {\n              /* FONT */\n              --md-default-fg-color: ${theme.palette.text.primary};\n              --md-default-fg-color--light: ${theme.palette.text.secondary};\n              --md-default-fg-color--lighter: ${lighten(theme.palette.text.secondary, 0.7)};\n              --md-default-fg-color--lightest: ${lighten(theme.palette.text.secondary, 0.3)};\n  \n              /* BACKGROUND */\n              --md-default-bg-color:${theme.palette.background.default};\n              --md-default-bg-color--light: ${theme.palette.background.paper};\n              --md-default-bg-color--lighter: ${lighten(theme.palette.background.paper, 0.7)};\n              --md-default-bg-color--lightest: ${lighten(theme.palette.background.paper, 0.3)};\n  \n              /* PRIMARY */\n              --md-primary-fg-color: ${theme.palette.primary.main};\n              --md-primary-fg-color--light: ${theme.palette.primary.light};\n              --md-primary-fg-color--dark: ${theme.palette.primary.dark};\n              --md-primary-bg-color: ${theme.palette.primary.contrastText};\n              --md-primary-bg-color--light: ${lighten(theme.palette.primary.contrastText, 0.7)};\n  \n              /* ACCENT */\n              --md-accent-fg-color: var(--md-primary-fg-color);\n  \n              /* SHADOW */\n              --md-shadow-z1: ${theme.shadows[1]};\n              --md-shadow-z2: ${theme.shadows[2]};\n              --md-shadow-z3: ${theme.shadows[3]};\n  \n              /* EXTENSIONS */\n              --md-admonition-fg-color: var(--md-default-fg-color);\n              --md-admonition-bg-color: var(--md-default-bg-color);\n              /* Admonitions and others are using SVG masks to define icons. These masks are defined as CSS variables. */\n              --md-admonition-icon--note: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z\"/></svg>');\n              --md-admonition-icon--abstract: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M4 5h16v2H4V5m0 4h16v2H4V9m0 4h16v2H4v-2m0 4h10v2H4v-2z\"/></svg>');\n              --md-admonition-icon--info: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M13 9h-2V7h2m0 10h-2v-6h2m-1-9A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10A10 10 0 0012 2z\"/></svg>');\n              --md-admonition-icon--tip: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M17.55 11.2c-.23-.3-.5-.56-.76-.82-.65-.6-1.4-1.03-2.03-1.66C13.3 7.26 13 4.85 13.91 3c-.91.23-1.75.75-2.45 1.32-2.54 2.08-3.54 5.75-2.34 8.9.04.1.08.2.08.33 0 .22-.15.42-.35.5-.22.1-.46.04-.64-.12a.83.83 0 01-.15-.17c-1.1-1.43-1.28-3.48-.53-5.12C5.89 10 5 12.3 5.14 14.47c.04.5.1 1 .27 1.5.14.6.4 1.2.72 1.73 1.04 1.73 2.87 2.97 4.84 3.22 2.1.27 4.35-.12 5.96-1.6 1.8-1.66 2.45-4.32 1.5-6.6l-.13-.26c-.2-.46-.47-.87-.8-1.25l.05-.01m-3.1 6.3c-.28.24-.73.5-1.08.6-1.1.4-2.2-.16-2.87-.82 1.19-.28 1.89-1.16 2.09-2.05.17-.8-.14-1.46-.27-2.23-.12-.74-.1-1.37.18-2.06.17.38.37.76.6 1.06.76 1 1.95 1.44 2.2 2.8.04.14.06.28.06.43.03.82-.32 1.72-.92 2.27h.01z\"/></svg>');\n              --md-admonition-icon--success: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2m-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"/></svg>');\n              --md-admonition-icon--question: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M15.07 11.25l-.9.92C13.45 12.89 13 13.5 13 15h-2v-.5c0-1.11.45-2.11 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41a2 2 0 00-2-2 2 2 0 00-2 2H8a4 4 0 014-4 4 4 0 014 4 3.2 3.2 0 01-.93 2.25M13 19h-2v-2h2M12 2A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10c0-5.53-4.5-10-10-10z\"/></svg>');\n              --md-admonition-icon--warning: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M13 14h-2v-4h2m0 8h-2v-2h2M1 21h22L12 2 1 21z\"/></svg>');\n              --md-admonition-icon--failure: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12 6.47 2 12 2m3.59 5L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41 15.59 7z\"/></svg>');\n              --md-admonition-icon--danger: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M11.5 20l4.86-9.73H13V4l-5 9.73h3.5V20M12 2c2.75 0 5.1 1 7.05 2.95C21 6.9 22 9.25 22 12s-1 5.1-2.95 7.05C17.1 21 14.75 22 12 22s-5.1-1-7.05-2.95C3 17.1 2 14.75 2 12s1-5.1 2.95-7.05C6.9 3 9.25 2 12 2z\"/></svg>');\n              --md-admonition-icon--bug: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M14 12h-4v-2h4m0 6h-4v-2h4m6-6h-2.81a5.985 5.985 0 00-1.82-1.96L17 4.41 15.59 3l-2.17 2.17a6.002 6.002 0 00-2.83 0L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8z\"/></svg>');\n              --md-admonition-icon--example: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M7 13v-2h14v2H7m0 6v-2h14v2H7M7 7V5h14v2H7M3 8V5H2V4h2v4H3m-1 9v-1h3v4H2v-1h2v-.5H3v-1h1V17H2m2.25-7a.75.75 0 01.75.75c0 .2-.08.39-.21.52L3.12 13H5v1H2v-.92L4 11H2v-1h2.25z\"/></svg>');\n              --md-admonition-icon--quote: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M14 17h3l2-4V7h-6v6h3M6 17h3l2-4V7H5v6h3l-2 4z\"/></svg>');\n              --md-footnotes-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M19 7v4H5.83l3.58-3.59L8 6l-6 6 6 6 1.41-1.42L5.83 13H21V7h-2z\"/></svg>');\n              --md-details-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z\"/></svg>');\n              --md-tasklist-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\"/></svg>');\n              --md-tasklist-icon--checked: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"/></svg>');\n              --md-nav-icon--prev: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z\"/></svg>');\n              --md-nav-icon--next: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z\"/></svg>');\n              --md-toc-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z\"/></svg>');\n              --md-clipboard-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1z\"/></svg>');\n              --md-search-result-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h7c-.41-.25-.8-.56-1.14-.9-.33-.33-.61-.7-.86-1.1H6V4h7v5h5v1.18c.71.16 1.39.43 2 .82V8l-6-6m6.31 16.9c1.33-2.11.69-4.9-1.4-6.22-2.11-1.33-4.91-.68-6.22 1.4-1.34 2.11-.69 4.89 1.4 6.22 1.46.93 3.32.93 4.79.02L22 23.39 23.39 22l-3.08-3.1m-3.81.1a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5z\"/></svg>');\n              --md-source-forks-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M5 3.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm0 2.122a2.25 2.25 0 1 0-1.5 0v.878A2.25 2.25 0 0 0 5.75 8.5h1.5v2.128a2.251 2.251 0 1 0 1.5 0V8.5h1.5a2.25 2.25 0 0 0 2.25-2.25v-.878a2.25 2.25 0 1 0-1.5 0v.878a.75.75 0 0 1-.75.75h-4.5A.75.75 0 0 1 5 6.25v-.878zm3.75 7.378a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm3-8.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5z\"/></svg>');\n              --md-source-repositories-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M2 2.5A2.5 2.5 0 0 1 4.5 0h8.75a.75.75 0 0 1 .75.75v12.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 1 1 0-1.5h1.75v-2h-8a1 1 0 0 0-.714 1.7.75.75 0 0 1-1.072 1.05A2.495 2.495 0 0 1 2 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 0 1 1-1h8zM5 12.25v3.25a.25.25 0 0 0 .4.2l1.45-1.087a.25.25 0 0 1 .3 0L8.6 15.7a.25.25 0 0 0 .4-.2v-3.25a.25.25 0 0 0-.25-.25h-3.5a.25.25 0 0 0-.25.25z\"/></svg>');\n              --md-source-stars-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.75.75 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25zm0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41L8 2.694v.001z\"/></svg>');\n              --md-source-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M2.5 7.775V2.75a.25.25 0 0 1 .25-.25h5.025a.25.25 0 0 1 .177.073l6.25 6.25a.25.25 0 0 1 0 .354l-5.025 5.025a.25.25 0 0 1-.354 0l-6.25-6.25a.25.25 0 0 1-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.75 1.75 0 0 1 1 7.775zM6 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2z\"/></svg>');\n              --md-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 320 512\"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d=\"m310.6 246.6-127.1 128c-7.1 6.3-15.3 9.4-23.5 9.4s-16.38-3.125-22.63-9.375l-127.1-128C.224 237.5-2.516 223.7 2.438 211.8S19.07 192 32 192h255.1c12.94 0 24.62 7.781 29.58 19.75s3.12 25.75-6.08 34.85z\"/></svg>');\n            }\n  \n            :host > * {\n              /* CODE */\n              --md-code-fg-color: ${theme.palette.text.primary};\n              --md-code-bg-color: ${theme.palette.background.paper};\n              --md-code-hl-color: ${alpha(theme.palette.warning.main, 0.5)};\n              --md-code-hl-keyword-color: ${isDarkTheme ? theme.palette.primary.light : theme.palette.primary.dark};\n              --md-code-hl-function-color: ${isDarkTheme ? theme.palette.secondary.light : theme.palette.secondary.dark};\n              --md-code-hl-string-color: ${isDarkTheme ? theme.palette.success.light : theme.palette.success.dark};\n              --md-code-hl-number-color: ${isDarkTheme ? theme.palette.error.light : theme.palette.error.dark};\n              --md-code-hl-constant-color: var(--md-code-hl-function-color);\n              --md-code-hl-special-color: var(--md-code-hl-function-color);\n              --md-code-hl-name-color: var(--md-code-fg-color);\n              --md-code-hl-comment-color: var(--md-default-fg-color--light);\n              --md-code-hl-generic-color: var(--md-default-fg-color--light);\n              --md-code-hl-variable-color: var(--md-default-fg-color--light);\n              --md-code-hl-operator-color: var(--md-default-fg-color--light);\n              --md-code-hl-punctuation-color: var(--md-default-fg-color--light);\n  \n              /* TYPESET */\n              --md-typeset-font-size: 1rem;\n              --md-typeset-color: var(--md-default-fg-color);\n              --md-typeset-a-color: var(--md-accent-fg-color);\n              --md-typeset-table-color: ${theme.palette.text.primary};\n              --md-typeset-del-color: ${isDarkTheme ? alpha(theme.palette.error.dark, 0.5) : alpha(theme.palette.error.light, 0.5)};\n              --md-typeset-ins-color: ${isDarkTheme ? alpha(theme.palette.success.dark, 0.5) : alpha(theme.palette.success.light, 0.5)};\n              --md-typeset-mark-color: ${isDarkTheme ? alpha(theme.palette.warning.dark, 0.5) : alpha(theme.palette.warning.light, 0.5)};\n            }\n  \n            @media screen and (max-width: 76.1875em) {\n              :host > * {\n                /* TYPESET */\n                --md-typeset-font-size: .9rem;\n              }\n            }\n  \n            @media screen and (max-width: 600px) {\n              :host > * {\n                /* TYPESET */\n                --md-typeset-font-size: .7rem;\n              }\n            }\n            `\n    }),\n    injectCss({\n      css: `\n              body {\n                --md-text-color: var(--md-default-fg-color);\n                --md-text-link-color: var(--md-accent-fg-color);\n                --md-text-font-family: ${theme.typography.fontFamily};\n                font-family: var(--md-text-font-family);\n                background-color: unset;\n              }\n            `\n    }),\n    injectCss({\n      css: `\n              .md-grid {\n                max-width: 100%;\n                margin: 0;\n              }\n  \n              .md-nav {\n                font-size: calc(var(--md-typeset-font-size) * 0.9);\n              }\n              .md-nav__link {\n                display: flex;\n                align-items: center;\n                justify-content: space-between;\n              }\n              .md-nav__icon {\n                height: 20px !important;\n                width: 20px !important;\n                margin-left:${theme.spacing(1)}px;\n              }\n              .md-nav__icon svg {\n                margin: 0;\n                width: 20px !important;\n                height: 20px !important;\n              }\n              .md-nav__icon:after {\n                width: 20px !important;\n                height: 20px !important;\n              }\n  \n              .md-main__inner {\n                margin-top: 0;\n              }\n  \n              .md-sidebar {\n                bottom: 75px;\n                position: fixed;\n                width: 16rem;\n                overflow-y: auto;\n                overflow-x: hidden;\n                scrollbar-color: rgb(193, 193, 193) #eee;\n                scrollbar-width: thin;\n              }\n              .md-sidebar .md-sidebar__scrollwrap {\n                width: calc(16rem - 10px);\n              }\n              .md-sidebar--secondary {\n                right: ${theme.spacing(3)}px;\n              }\n              .md-sidebar::-webkit-scrollbar {\n                width: 5px;\n              }\n              .md-sidebar::-webkit-scrollbar-button {\n                width: 5px;\n                height: 5px;\n              }\n              .md-sidebar::-webkit-scrollbar-track {\n                background: #eee;\n                border: 1 px solid rgb(250, 250, 250);\n                box-shadow: 0px 0px 3px #dfdfdf inset;\n                border-radius: 3px;\n              }\n              .md-sidebar::-webkit-scrollbar-thumb {\n                width: 5px;\n                background: rgb(193, 193, 193);\n                border: transparent;\n                border-radius: 3px;\n              }\n              .md-sidebar::-webkit-scrollbar-thumb:hover {\n                background: rgb(125, 125, 125);\n              }\n  \n              .md-content {\n                max-width: calc(100% - 16rem * 2);\n                margin-left: 16rem;\n                margin-bottom: 50px;\n              }\n  \n              .md-footer {\n                position: fixed;\n                bottom: 0px;\n              }\n              .md-footer__title {\n                background-color: unset;\n              }\n              .md-footer-nav__link {\n                width: 16rem;\n              }\n  \n              .md-dialog {\n                background-color: unset;\n              }\n  \n              @media screen and (min-width: 76.25em) {\n                .md-sidebar {\n                  height: auto;\n                }\n              }\n              \n              @media screen and (max-width: 76.1875em) {\n                .md-nav {\n                  transition: none !important;\n                  background-color: var(--md-default-bg-color)\n                }\n                .md-nav--primary .md-nav__title {\n                  cursor: auto;\n                  color: var(--md-default-fg-color);\n                  font-weight: 700;\n                  white-space: normal;\n                  line-height: 1rem;\n                  height: auto;\n                  display: flex;\n                  flex-flow: column;\n                  row-gap: 1.6rem;\n                  padding: 1.2rem .8rem .8rem;\n                  background-color: var(--md-default-bg-color);\n                }\n                .md-nav--primary .md-nav__title~.md-nav__list {\n                  box-shadow: none;\n                }\n                .md-nav--primary .md-nav__title ~ .md-nav__list > :first-child {\n                  border-top: none;\n                }\n                .md-nav--primary .md-nav__title .md-nav__button {\n                  display: none;\n                }\n                .md-nav--primary .md-nav__title .md-nav__icon {\n                  color: var(--md-default-fg-color);\n                  position: static;\n                  height: auto;\n                  margin: 0 0 0 -0.2rem;\n                }\n                .md-nav--primary > .md-nav__title [for=\"none\"] {\n                  padding-top: 0;\n                }\n                .md-nav--primary .md-nav__item {\n                  border-top: none;\n                }\n                .md-nav--primary :is(.md-nav__title,.md-nav__item) {\n                  font-size : var(--md-typeset-font-size);\n                }\n                .md-nav .md-source {\n                  display: none;\n                }\n  \n                .md-sidebar {\n                  height: 100%;\n                }\n                .md-sidebar--primary {\n                  width: 12.1rem !important;\n                  z-index: 200;\n                  left: ${isPinned ? \"calc(-12.1rem + 242px)\" : \"calc(-12.1rem + 72px)\"} !important;\n                }\n                .md-sidebar--secondary:not([hidden]) {\n                  display: none;\n                }\n  \n                .md-content {\n                  max-width: 100%;\n                  margin-left: 0;\n                }\n  \n                .md-header__button {\n                  margin: 0.4rem 0;\n                  margin-left: 0.4rem;\n                  padding: 0;\n                }\n  \n                .md-overlay {\n                  left: 0;\n                }\n  \n                .md-footer {\n                  position: static;\n                  padding-left: 0;\n                }\n                .md-footer-nav__link {\n                  /* footer links begin to overlap at small sizes without setting width */\n                  width: 50%;\n                }\n              }\n  \n              @media screen and (max-width: 600px) {\n                .md-sidebar--primary {\n                  left: -12.1rem !important;\n                  width: 12.1rem;\n                }\n              }\n            `\n    }),\n    injectCss({\n      css: `\n              .md-typeset {\n                font-size: var(--md-typeset-font-size);\n              }\n  \n              ${headings.reduce((style, heading) => {\n        const styles = theme.typography[heading];\n        const { lineHeight, fontFamily, fontWeight, fontSize } = styles;\n        const calculate = (value) => {\n          let factor = 1;\n          if (typeof value === \"number\") {\n            factor = value / 16 * 0.6;\n          }\n          if (typeof value === \"string\") {\n            factor = value.replace(\"rem\", \"\");\n          }\n          return `calc(${factor} * var(--md-typeset-font-size))`;\n        };\n        return style.concat(`\n                  .md-typeset ${heading} {\n                    color: var(--md-default-fg-color);\n                    line-height: ${lineHeight};\n                    font-family: ${fontFamily};\n                    font-weight: ${fontWeight};\n                    font-size: ${calculate(fontSize)};\n                  }\n                `);\n      }, \"\")}\n  \n              .md-typeset .md-content__button {\n                color: var(--md-default-fg-color);\n              }\n  \n              .md-typeset hr {\n                border-bottom: 0.05rem dotted ${theme.palette.divider};\n              }\n  \n              .md-typeset details {\n                font-size: var(--md-typeset-font-size) !important;\n              }\n              .md-typeset details summary {\n                padding-left: 2.5rem !important;\n              }\n              .md-typeset details summary:before,\n              .md-typeset details summary:after {\n                top: 50% !important;\n                width: 20px !important;\n                height: 20px !important;\n                transform: rotate(0deg) translateY(-50%) !important;\n              }\n              .md-typeset details[open] > summary:after {\n                transform: rotate(90deg) translateX(-50%) !important;\n              }\n  \n              .md-typeset blockquote {\n                color: var(--md-default-fg-color--light);\n                border-left: 0.2rem solid var(--md-default-fg-color--light);\n              }\n  \n              .md-typeset table:not([class]) {\n                font-size: var(--md-typeset-font-size);\n                border: 1px solid var(--md-default-fg-color);\n                border-bottom: none;\n                border-collapse: collapse;\n              }\n              .md-typeset table:not([class]) th {\n                font-weight: bold;\n              }\n              .md-typeset table:not([class]) td, .md-typeset table:not([class]) th {\n                border-bottom: 1px solid var(--md-default-fg-color);\n              }\n  \n              .md-typeset pre > code::-webkit-scrollbar-thumb {\n                background-color: hsla(0, 0%, 0%, 0.32);\n              }\n              .md-typeset pre > code::-webkit-scrollbar-thumb:hover {\n                background-color: hsla(0, 0%, 0%, 0.87);\n              }\n            `\n    }),\n    injectCss({\n      css: `\n              /*\n                Disable CSS animations on link colors as they lead to issues in dark mode.\n                The dark mode color theme is applied later and theirfore there is always an animation from light to dark mode when navigation between pages.\n              */\n              .md-dialog, .md-nav__link, .md-footer__link, .md-typeset a, .md-typeset a::before, .md-typeset .headerlink {\n                transition: none;\n              }\n            `\n    }),\n    injectCss({\n      css: `\n              /* HIGHLIGHT */\n              .highlight .md-clipboard:after {\n                content: unset;\n              }\n  \n              .highlight .nx {\n                color: ${isDarkTheme ? \"#ff53a3\" : \"#ec407a\"};\n              }\n  \n              /* CODE HILITE */\n              .codehilite .gd {\n                background-color: ${isDarkTheme ? \"rgba(248,81,73,0.65)\" : \"#fdd\"};\n              }\n  \n              .codehilite .gi {\n                background-color: ${isDarkTheme ? \"rgba(46,160,67,0.65)\" : \"#dfd\"};\n              }\n  \n              /* TABBED */\n              .tabbed-set>input:nth-child(1):checked~.tabbed-labels>:nth-child(1),\n              .tabbed-set>input:nth-child(2):checked~.tabbed-labels>:nth-child(2),\n              .tabbed-set>input:nth-child(3):checked~.tabbed-labels>:nth-child(3),\n              .tabbed-set>input:nth-child(4):checked~.tabbed-labels>:nth-child(4),\n              .tabbed-set>input:nth-child(5):checked~.tabbed-labels>:nth-child(5),\n              .tabbed-set>input:nth-child(6):checked~.tabbed-labels>:nth-child(6),\n              .tabbed-set>input:nth-child(7):checked~.tabbed-labels>:nth-child(7),\n              .tabbed-set>input:nth-child(8):checked~.tabbed-labels>:nth-child(8),\n              .tabbed-set>input:nth-child(9):checked~.tabbed-labels>:nth-child(9),\n              .tabbed-set>input:nth-child(10):checked~.tabbed-labels>:nth-child(10),\n              .tabbed-set>input:nth-child(11):checked~.tabbed-labels>:nth-child(11),\n              .tabbed-set>input:nth-child(12):checked~.tabbed-labels>:nth-child(12),\n              .tabbed-set>input:nth-child(13):checked~.tabbed-labels>:nth-child(13),\n              .tabbed-set>input:nth-child(14):checked~.tabbed-labels>:nth-child(14),\n              .tabbed-set>input:nth-child(15):checked~.tabbed-labels>:nth-child(15),\n              .tabbed-set>input:nth-child(16):checked~.tabbed-labels>:nth-child(16),\n              .tabbed-set>input:nth-child(17):checked~.tabbed-labels>:nth-child(17),\n              .tabbed-set>input:nth-child(18):checked~.tabbed-labels>:nth-child(18),\n              .tabbed-set>input:nth-child(19):checked~.tabbed-labels>:nth-child(19),\n              .tabbed-set>input:nth-child(20):checked~.tabbed-labels>:nth-child(20) {\n                color: var(--md-accent-fg-color);\n                border-color: var(--md-accent-fg-color);\n              }\n  \n              /* TASK-LIST */\n              .task-list-control .task-list-indicator::before {\n                background-color: ${theme.palette.action.disabledBackground};\n              }\n              .task-list-control [type=\"checkbox\"]:checked + .task-list-indicator:before {\n               background-color: ${theme.palette.success.main};\n              }\n  \n              /* ADMONITION */\n              .admonition {\n                font-size: var(--md-typeset-font-size) !important;\n              }\n              .admonition .admonition-title {\n                padding-left: 2.5rem !important;\n              }\n  \n              .admonition .admonition-title:before {\n                top: 50% !important;\n                width: 20px !important;\n                height: 20px !important;\n                transform: translateY(-50%) !important;\n              }\n            `\n    })\n  ]), [\n    kind,\n    name,\n    namespace,\n    scmIntegrationsApi,\n    techdocsSanitizer,\n    techdocsStorageApi,\n    theme,\n    isDarkTheme,\n    isPinned\n  ]);\n  const postRender = useCallback(async (transformedElement) => transform(transformedElement, [\n    scrollIntoAnchor(),\n    copyToClipboard(theme),\n    addLinkClickListener({\n      baseUrl: window.location.origin,\n      onClick: (event, url) => {\n        var _a;\n        const modifierActive = event.ctrlKey || event.metaKey;\n        const parsedUrl = new URL(url);\n        if (parsedUrl.hash) {\n          if (modifierActive) {\n            window.open(`${parsedUrl.pathname}${parsedUrl.hash}`, \"_blank\");\n          } else {\n            navigate(`${parsedUrl.pathname}${parsedUrl.hash}`);\n            (_a = transformedElement == null ? void 0 : transformedElement.querySelector(`#${parsedUrl.hash.slice(1)}`)) == null ? void 0 : _a.scrollIntoView();\n          }\n        } else {\n          if (modifierActive) {\n            window.open(parsedUrl.pathname, \"_blank\");\n          } else {\n            navigate(parsedUrl.pathname);\n          }\n        }\n      }\n    }),\n    onCssReady({\n      docStorageUrl: await techdocsStorageApi.getApiOrigin(),\n      onLoading: (renderedElement) => {\n        renderedElement.style.setProperty(\"opacity\", \"0\");\n      },\n      onLoaded: (renderedElement) => {\n        var _a;\n        renderedElement.style.removeProperty(\"opacity\");\n        (_a = renderedElement.querySelector(\".md-nav__title\")) == null ? void 0 : _a.removeAttribute(\"for\");\n        setSidebars(Array.from(renderedElement.querySelectorAll(\".md-sidebar\")));\n      }\n    })\n  ]), [theme, navigate, techdocsStorageApi]);\n  useEffect(() => {\n    if (!rawPage)\n      return () => {\n      };\n    let shouldReplaceContent = true;\n    preRender(rawPage, path).then(async (preTransformedDomElement) => {\n      if (!(preTransformedDomElement == null ? void 0 : preTransformedDomElement.innerHTML)) {\n        return;\n      }\n      if (!shouldReplaceContent) {\n        return;\n      }\n      window.scroll({ top: 0 });\n      const postTransformedDomElement = await postRender(preTransformedDomElement);\n      setDom(postTransformedDomElement);\n    });\n    return () => {\n      shouldReplaceContent = false;\n    };\n  }, [rawPage, path, preRender, postRender]);\n  return dom;\n};\n\nconst useStyles$1 = makeStyles({\n  search: {\n    width: \"100%\",\n    \"@media (min-width: 76.1875em)\": {\n      width: \"calc(100% - 34.4rem)\",\n      margin: \"0 auto\"\n    }\n  }\n});\nconst TechDocsReaderPageContent = withTechDocsReaderProvider((props) => {\n  const { withSearch = true, onReady } = props;\n  const classes = useStyles$1();\n  const addons = useTechDocsAddons();\n  const { entityRef, shadowRoot, setShadowRoot } = useTechDocsReaderPage();\n  const dom = useTechDocsReaderDom(entityRef);\n  const [jss, setJss] = useState(create({\n    ...jssPreset(),\n    insertionPoint: void 0\n  }));\n  const ref = useCallback((shadowHost) => {\n    var _a;\n    if (!dom || !shadowHost)\n      return;\n    setJss(create({\n      ...jssPreset(),\n      insertionPoint: dom.querySelector(\"head\") || void 0\n    }));\n    const newShadowRoot = (_a = shadowHost.shadowRoot) != null ? _a : shadowHost.attachShadow({ mode: \"open\" });\n    newShadowRoot.innerHTML = \"\";\n    newShadowRoot.appendChild(dom);\n    setShadowRoot(newShadowRoot);\n    if (onReady instanceof Function) {\n      onReady();\n    }\n  }, [dom, setShadowRoot, onReady]);\n  const contentElement = shadowRoot == null ? void 0 : shadowRoot.querySelector('[data-md-component=\"content\"]');\n  const primarySidebarElement = shadowRoot == null ? void 0 : shadowRoot.querySelector('div[data-md-component=\"sidebar\"][data-md-type=\"navigation\"], div[data-md-component=\"navigation\"]');\n  const secondarySidebarElement = shadowRoot == null ? void 0 : shadowRoot.querySelector('div[data-md-component=\"sidebar\"][data-md-type=\"toc\"], div[data-md-component=\"toc\"]');\n  const primarySidebarAddonLocation = document.createElement(\"div\");\n  primarySidebarElement == null ? void 0 : primarySidebarElement.prepend(primarySidebarAddonLocation);\n  const secondarySidebarAddonLocation = document.createElement(\"div\");\n  secondarySidebarElement == null ? void 0 : secondarySidebarElement.prepend(secondarySidebarAddonLocation);\n  if (!dom) {\n    return /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(Progress, null));\n  }\n  return /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(Grid, {\n    container: true\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    xs: 12,\n    item: true\n  }, /* @__PURE__ */ React.createElement(TechDocsStateIndicator, null)), withSearch && /* @__PURE__ */ React.createElement(Grid, {\n    className: classes.search,\n    xs: \"auto\",\n    item: true\n  }, /* @__PURE__ */ React.createElement(TechDocsSearch, {\n    entityId: entityRef\n  })), /* @__PURE__ */ React.createElement(Grid, {\n    xs: 12,\n    item: true\n  }, /* @__PURE__ */ React.createElement(StylesProvider, {\n    jss,\n    sheetsManager: /* @__PURE__ */ new Map()\n  }, /* @__PURE__ */ React.createElement(\"div\", {\n    ref,\n    \"data-testid\": \"techdocs-native-shadowroot\"\n  }), /* @__PURE__ */ React.createElement(Portal, {\n    container: primarySidebarAddonLocation\n  }, addons.renderComponentsByLocation(TechDocsAddonLocations.PrimarySidebar)), /* @__PURE__ */ React.createElement(Portal, {\n    container: contentElement\n  }, addons.renderComponentsByLocation(TechDocsAddonLocations.Content)), /* @__PURE__ */ React.createElement(Portal, {\n    container: secondarySidebarAddonLocation\n  }, addons.renderComponentsByLocation(TechDocsAddonLocations.SecondarySidebar))))));\n});\nconst Reader = TechDocsReaderPageContent;\n\nconst rootRouteRef = createRouteRef({\n  id: \"techdocs:index-page\"\n});\nconst rootDocsRouteRef = createRouteRef({\n  id: \"techdocs:reader-page\",\n  params: [\"namespace\", \"kind\", \"name\"]\n});\nconst rootCatalogDocsRouteRef = createRouteRef({\n  id: \"techdocs:catalog-reader-view\"\n});\n\nconst skeleton = /* @__PURE__ */ React.createElement(Skeleton, {\n  animation: \"wave\",\n  variant: \"text\",\n  height: 40\n});\nconst TechDocsReaderPageHeader = (props) => {\n  const { children } = props;\n  const addons = useTechDocsAddons();\n  const configApi = useApi(configApiRef);\n  const {\n    title,\n    setTitle,\n    subtitle,\n    setSubtitle,\n    entityRef,\n    metadata: { value: metadata },\n    entityMetadata: { value: entityMetadata }\n  } = useTechDocsReaderPage();\n  useEffect(() => {\n    if (!metadata)\n      return;\n    setTitle((prevTitle) => {\n      const { site_name } = metadata;\n      return prevTitle || site_name;\n    });\n    setSubtitle((prevSubtitle) => {\n      let { site_description } = metadata;\n      if (!site_description || site_description === \"None\") {\n        site_description = \"Home\";\n      }\n      return prevSubtitle || site_description;\n    });\n  }, [metadata, setTitle, setSubtitle]);\n  const appTitle = configApi.getOptional(\"app.title\") || \"Backstage\";\n  const tabTitle = [subtitle, title, appTitle].filter(Boolean).join(\" | \");\n  const { locationMetadata, spec } = entityMetadata || {};\n  const lifecycle = spec == null ? void 0 : spec.lifecycle;\n  const ownedByRelations = entityMetadata ? getEntityRelations(entityMetadata, RELATION_OWNED_BY) : [];\n  const docsRootLink = useRouteRef(rootRouteRef)();\n  const labels = /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(HeaderLabel, {\n    label: \"Component\",\n    value: /* @__PURE__ */ React.createElement(EntityRefLink, {\n      color: \"inherit\",\n      entityRef,\n      defaultKind: \"Component\"\n    })\n  }), ownedByRelations.length > 0 && /* @__PURE__ */ React.createElement(HeaderLabel, {\n    label: \"Owner\",\n    value: /* @__PURE__ */ React.createElement(EntityRefLinks, {\n      color: \"inherit\",\n      entityRefs: ownedByRelations,\n      defaultKind: \"group\"\n    })\n  }), lifecycle ? /* @__PURE__ */ React.createElement(HeaderLabel, {\n    label: \"Lifecycle\",\n    value: lifecycle\n  }) : null, locationMetadata && locationMetadata.type !== \"dir\" && locationMetadata.type !== \"file\" ? /* @__PURE__ */ React.createElement(HeaderLabel, {\n    label: \"\",\n    value: /* @__PURE__ */ React.createElement(\"a\", {\n      href: locationMetadata.target,\n      target: \"_blank\",\n      rel: \"noopener noreferrer\"\n    }, /* @__PURE__ */ React.createElement(CodeIcon, {\n      style: { marginTop: \"-25px\", fill: \"#fff\" }\n    }))\n  }) : null);\n  return /* @__PURE__ */ React.createElement(Header, {\n    type: \"Documentation\",\n    typeLink: docsRootLink,\n    title: title || skeleton,\n    subtitle: subtitle || skeleton\n  }, /* @__PURE__ */ React.createElement(Helmet, {\n    titleTemplate: \"%s\"\n  }, /* @__PURE__ */ React.createElement(\"title\", null, tabTitle)), labels, children, addons.renderComponentsByLocation(TechDocsAddonLocations.Header));\n};\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    gridArea: \"pageSubheader\",\n    flexDirection: \"column\",\n    minHeight: \"auto\",\n    padding: theme.spacing(3, 3, 0)\n  }\n}));\nconst TechDocsReaderPageSubheader = ({\n  toolbarProps\n}) => {\n  const classes = useStyles();\n  const addons = useTechDocsAddons();\n  const subheaderAddons = addons.renderComponentsByLocation(TechDocsAddonLocations.Subheader);\n  if (!subheaderAddons)\n    return null;\n  return /* @__PURE__ */ React.createElement(Toolbar, {\n    classes,\n    ...toolbarProps\n  }, subheaderAddons && /* @__PURE__ */ React.createElement(Box, {\n    display: \"flex\",\n    justifyContent: \"flex-end\",\n    width: \"100%\",\n    flexWrap: \"wrap\"\n  }, subheaderAddons));\n};\n\nconst TechDocsReaderLayout = ({\n  withSearch,\n  withHeader = true\n}) => {\n  return /* @__PURE__ */ React.createElement(Page, {\n    themeId: \"documentation\"\n  }, withHeader && /* @__PURE__ */ React.createElement(TechDocsReaderPageHeader, null), /* @__PURE__ */ React.createElement(TechDocsReaderPageSubheader, null), /* @__PURE__ */ React.createElement(TechDocsReaderPageContent, {\n    withSearch\n  }));\n};\nconst TechDocsReaderPage$1 = (props) => {\n  const { kind, name, namespace } = useParams();\n  const { children, entityRef = { kind, name, namespace } } = props;\n  const outlet = useOutlet();\n  if (!children) {\n    const childrenList = outlet ? Children.toArray(outlet.props.children) : [];\n    const page = childrenList.find((child) => {\n      var _a, _b;\n      const { type } = child;\n      return !((_b = (_a = type == null ? void 0 : type.__backstage_data) == null ? void 0 : _a.map) == null ? void 0 : _b.get(TECHDOCS_ADDONS_WRAPPER_KEY));\n    });\n    return /* @__PURE__ */ React.createElement(TechDocsReaderPageProvider, {\n      entityRef\n    }, page || /* @__PURE__ */ React.createElement(TechDocsReaderLayout, null));\n  }\n  return /* @__PURE__ */ React.createElement(TechDocsReaderPageProvider, {\n    entityRef\n  }, ({ metadata, entityMetadata, onReady }) => /* @__PURE__ */ React.createElement(Page, {\n    themeId: \"documentation\"\n  }, children instanceof Function ? children({\n    entityRef,\n    techdocsMetadataValue: metadata.value,\n    entityMetadataValue: entityMetadata.value,\n    onReady\n  }) : children));\n};\n\nfunction toLowerMaybe(str, config) {\n  return config.getOptionalBoolean(\"techdocs.legacyUseCaseSensitiveTripletPaths\") ? str : str.toLocaleLowerCase(\"en-US\");\n}\n\nconst DocsCardGrid = (props) => {\n  const { entities } = props;\n  const getRouteToReaderPageFor = useRouteRef(rootDocsRouteRef);\n  const config = useApi(configApiRef);\n  if (!entities)\n    return null;\n  return /* @__PURE__ */ React.createElement(ItemCardGrid, {\n    \"data-testid\": \"docs-explore\"\n  }, !(entities == null ? void 0 : entities.length) ? null : entities.map((entity, index) => {\n    var _a, _b;\n    return /* @__PURE__ */ React.createElement(Card, {\n      key: index\n    }, /* @__PURE__ */ React.createElement(CardMedia, null, /* @__PURE__ */ React.createElement(ItemCardHeader, {\n      title: (_a = entity.metadata.title) != null ? _a : entity.metadata.name\n    })), /* @__PURE__ */ React.createElement(CardContent, null, entity.metadata.description), /* @__PURE__ */ React.createElement(CardActions, null, /* @__PURE__ */ React.createElement(Button$1, {\n      to: getRouteToReaderPageFor({\n        namespace: toLowerMaybe((_b = entity.metadata.namespace) != null ? _b : \"default\", config),\n        kind: toLowerMaybe(entity.kind, config),\n        name: toLowerMaybe(entity.metadata.name, config)\n      }),\n      color: \"primary\",\n      \"data-testid\": \"read_docs\"\n    }, \"Read Docs\")));\n  }));\n};\n\nconst EntityListDocsGrid = () => {\n  const { loading, error, entities } = useEntityList();\n  if (error) {\n    return /* @__PURE__ */ React.createElement(WarningPanel, {\n      severity: \"error\",\n      title: \"Could not load available documentation.\"\n    }, /* @__PURE__ */ React.createElement(CodeSnippet, {\n      language: \"text\",\n      text: error.toString()\n    }));\n  }\n  if (loading || !entities) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  }\n  entities.sort((a, b) => {\n    var _a, _b;\n    return ((_a = a.metadata.title) != null ? _a : a.metadata.name).localeCompare((_b = b.metadata.title) != null ? _b : b.metadata.name);\n  });\n  return /* @__PURE__ */ React.createElement(DocsCardGrid, {\n    entities\n  });\n};\n\nconst YellowStar = withStyles$1({\n  root: {\n    color: \"#f3ba37\"\n  }\n})(Star);\nconst actionFactories = {\n  createCopyDocsUrlAction(copyToClipboard) {\n    return (row) => {\n      return {\n        icon: () => /* @__PURE__ */ React.createElement(ShareIcon, {\n          fontSize: \"small\"\n        }),\n        tooltip: \"Click to copy documentation link to clipboard\",\n        onClick: () => copyToClipboard(`${window.location.origin}${row.resolved.docsUrl}`)\n      };\n    };\n  },\n  createStarEntityAction(isStarredEntity, toggleStarredEntity) {\n    return ({ entity }) => {\n      const isStarred = isStarredEntity(entity);\n      return {\n        cellStyle: { paddingLeft: \"1em\" },\n        icon: () => isStarred ? /* @__PURE__ */ React.createElement(YellowStar, null) : /* @__PURE__ */ React.createElement(StarBorder, null),\n        tooltip: isStarred ? \"Remove from favorites\" : \"Add to favorites\",\n        onClick: () => toggleStarredEntity(entity)\n      };\n    };\n  }\n};\n\nfunction customTitle(entity) {\n  return entity.metadata.title || entity.metadata.name;\n}\nconst columnFactories = {\n  createNameColumn() {\n    return {\n      title: \"Document\",\n      field: \"entity.metadata.name\",\n      highlight: true,\n      render: (row) => /* @__PURE__ */ React.createElement(SubvalueCell, {\n        value: /* @__PURE__ */ React.createElement(Link, {\n          to: row.resolved.docsUrl\n        }, customTitle(row.entity)),\n        subvalue: row.entity.metadata.description\n      })\n    };\n  },\n  createOwnerColumn() {\n    return {\n      title: \"Owner\",\n      field: \"resolved.ownedByRelationsTitle\",\n      render: ({ resolved }) => /* @__PURE__ */ React.createElement(EntityRefLinks, {\n        entityRefs: resolved.ownedByRelations,\n        defaultKind: \"group\"\n      })\n    };\n  },\n  createTypeColumn() {\n    return {\n      title: \"Type\",\n      field: \"entity.spec.type\"\n    };\n  }\n};\n\nconst DocsTable = (props) => {\n  const { entities, title, loading, columns, actions } = props;\n  const [, copyToClipboard] = useCopyToClipboard();\n  const getRouteToReaderPageFor = useRouteRef(rootDocsRouteRef);\n  const config = useApi(configApiRef);\n  if (!entities)\n    return null;\n  const documents = entities.map((entity) => {\n    var _a;\n    const ownedByRelations = getEntityRelations(entity, RELATION_OWNED_BY);\n    return {\n      entity,\n      resolved: {\n        docsUrl: getRouteToReaderPageFor({\n          namespace: toLowerMaybe((_a = entity.metadata.namespace) != null ? _a : \"default\", config),\n          kind: toLowerMaybe(entity.kind, config),\n          name: toLowerMaybe(entity.metadata.name, config)\n        }),\n        ownedByRelations,\n        ownedByRelationsTitle: ownedByRelations.map((r) => humanizeEntityRef(r, { defaultKind: \"group\" })).join(\", \")\n      }\n    };\n  });\n  const defaultColumns = [\n    columnFactories.createNameColumn(),\n    columnFactories.createOwnerColumn(),\n    columnFactories.createTypeColumn()\n  ];\n  const defaultActions = [\n    actionFactories.createCopyDocsUrlAction(copyToClipboard)\n  ];\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, loading || documents && documents.length > 0 ? /* @__PURE__ */ React.createElement(Table, {\n    isLoading: loading,\n    options: {\n      paging: true,\n      pageSize: 20,\n      search: true,\n      actionsColumnIndex: -1\n    },\n    data: documents,\n    columns: columns || defaultColumns,\n    actions: actions || defaultActions,\n    title: title ? `${title} (${documents.length})` : `All (${documents.length})`\n  }) : /* @__PURE__ */ React.createElement(EmptyState, {\n    missing: \"data\",\n    title: \"No documents to show\",\n    description: \"Create your own document. Check out our Getting Started Information\",\n    action: /* @__PURE__ */ React.createElement(Button$1, {\n      color: \"primary\",\n      to: \"https://backstage.io/docs/features/techdocs/getting-started\",\n      variant: \"contained\"\n    }, \"DOCS\")\n  }));\n};\nDocsTable.columns = columnFactories;\nDocsTable.actions = actionFactories;\n\nconst EntityListDocsTable = (props) => {\n  var _a, _b;\n  const { columns, actions } = props;\n  const { loading, error, entities, filters } = useEntityList();\n  const { isStarredEntity, toggleStarredEntity } = useStarredEntities();\n  const [, copyToClipboard] = useCopyToClipboard();\n  const title = capitalize((_b = (_a = filters.user) == null ? void 0 : _a.value) != null ? _b : \"all\");\n  const defaultActions = [\n    actionFactories.createCopyDocsUrlAction(copyToClipboard),\n    actionFactories.createStarEntityAction(isStarredEntity, toggleStarredEntity)\n  ];\n  if (error) {\n    return /* @__PURE__ */ React.createElement(WarningPanel, {\n      severity: \"error\",\n      title: \"Could not load available documentation.\"\n    }, /* @__PURE__ */ React.createElement(CodeSnippet, {\n      language: \"text\",\n      text: error.toString()\n    }));\n  }\n  return /* @__PURE__ */ React.createElement(DocsTable, {\n    title,\n    entities,\n    loading,\n    actions: actions || defaultActions,\n    columns\n  });\n};\nEntityListDocsTable.columns = columnFactories;\nEntityListDocsTable.actions = actionFactories;\n\nconst TechDocsPageWrapper = (props) => {\n  var _a;\n  const { children } = props;\n  const configApi = useApi(configApiRef);\n  const generatedSubtitle = `Documentation available in ${(_a = configApi.getOptionalString(\"organization.name\")) != null ? _a : \"Backstage\"}`;\n  return /* @__PURE__ */ React.createElement(PageWithHeader, {\n    title: \"Documentation\",\n    subtitle: generatedSubtitle,\n    themeId: \"documentation\"\n  }, children);\n};\n\nclass TechDocsFilter {\n  getCatalogFilters() {\n    return {\n      \"metadata.annotations.backstage.io/techdocs-ref\": CATALOG_FILTER_EXISTS\n    };\n  }\n}\nconst TechDocsPicker = () => {\n  const { updateFilters } = useEntityList();\n  useEffect(() => {\n    updateFilters({\n      techdocs: new TechDocsFilter()\n    });\n  }, [updateFilters]);\n  return null;\n};\n\nconst DefaultTechDocsHome = (props) => {\n  const { initialFilter = \"all\", columns, actions } = props;\n  return /* @__PURE__ */ React.createElement(TechDocsPageWrapper, null, /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(ContentHeader, {\n    title: \"\"\n  }, /* @__PURE__ */ React.createElement(SupportButton, null, \"Discover documentation in your ecosystem.\")), /* @__PURE__ */ React.createElement(EntityListProvider, null, /* @__PURE__ */ React.createElement(CatalogFilterLayout, null, /* @__PURE__ */ React.createElement(CatalogFilterLayout.Filters, null, /* @__PURE__ */ React.createElement(TechDocsPicker, null), /* @__PURE__ */ React.createElement(UserListPicker, {\n    initialFilter\n  }), /* @__PURE__ */ React.createElement(EntityOwnerPicker, null), /* @__PURE__ */ React.createElement(EntityTagPicker, null)), /* @__PURE__ */ React.createElement(CatalogFilterLayout.Content, null, /* @__PURE__ */ React.createElement(EntityListDocsTable, {\n    actions,\n    columns\n  }))))));\n};\n\nconst techdocsPlugin = createPlugin({\n  id: \"techdocs\",\n  apis: [\n    createApiFactory({\n      api: techdocsStorageApiRef,\n      deps: {\n        configApi: configApiRef,\n        discoveryApi: discoveryApiRef,\n        identityApi: identityApiRef,\n        fetchApi: fetchApiRef\n      },\n      factory: ({ configApi, discoveryApi, identityApi, fetchApi }) => new TechDocsStorageClient({\n        configApi,\n        discoveryApi,\n        identityApi,\n        fetchApi\n      })\n    }),\n    createApiFactory({\n      api: techdocsApiRef,\n      deps: {\n        configApi: configApiRef,\n        discoveryApi: discoveryApiRef,\n        fetchApi: fetchApiRef\n      },\n      factory: ({ configApi, discoveryApi, fetchApi }) => new TechDocsClient({\n        configApi,\n        discoveryApi,\n        fetchApi\n      })\n    })\n  ],\n  routes: {\n    root: rootRouteRef,\n    docRoot: rootDocsRouteRef,\n    entityContent: rootCatalogDocsRouteRef\n  }\n});\nconst TechdocsPage = techdocsPlugin.provide(createRoutableExtension({\n  name: \"TechdocsPage\",\n  component: () => Promise.resolve().then(function () { return Router$1; }).then((m) => m.Router),\n  mountPoint: rootRouteRef\n}));\nconst EntityTechdocsContent = techdocsPlugin.provide(createRoutableExtension({\n  name: \"EntityTechdocsContent\",\n  component: () => Promise.resolve().then(function () { return Router$1; }).then((m) => m.EmbeddedDocsRouter),\n  mountPoint: rootCatalogDocsRouteRef\n}));\nconst TechDocsCustomHome = techdocsPlugin.provide(createRoutableExtension({\n  name: \"TechDocsCustomHome\",\n  component: () => import('./TechDocsCustomHome-4046b545.esm.js').then((m) => m.TechDocsCustomHome),\n  mountPoint: rootRouteRef\n}));\nconst TechDocsIndexPage$2 = techdocsPlugin.provide(createRoutableExtension({\n  name: \"TechDocsIndexPage\",\n  component: () => Promise.resolve().then(function () { return TechDocsIndexPage$1; }).then((m) => m.TechDocsIndexPage),\n  mountPoint: rootRouteRef\n}));\nconst TechDocsReaderPage = techdocsPlugin.provide(createRoutableExtension({\n  name: \"TechDocsReaderPage\",\n  component: () => import('./index-64eda4c3.esm.js').then((m) => m.TechDocsReaderPage),\n  mountPoint: rootDocsRouteRef\n}));\n\nconst EntityPageDocs = ({ entity }) => {\n  const entityRef = getCompoundEntityRef(entity);\n  return /* @__PURE__ */ React.createElement(TechDocsReaderPage, {\n    entityRef\n  }, /* @__PURE__ */ React.createElement(TechDocsReaderPageSubheader, null), /* @__PURE__ */ React.createElement(TechDocsReaderPageContent, {\n    withSearch: false\n  }));\n};\n\nconst TechDocsIndexPage = () => {\n  const outlet = useOutlet$1();\n  return outlet || /* @__PURE__ */ React.createElement(DefaultTechDocsHome, null);\n};\n\nvar TechDocsIndexPage$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  TechDocsIndexPage: TechDocsIndexPage\n});\n\nconst TECHDOCS_ANNOTATION = \"backstage.io/techdocs-ref\";\nconst isTechDocsAvailable = (entity) => {\n  var _a, _b;\n  return Boolean((_b = (_a = entity == null ? void 0 : entity.metadata) == null ? void 0 : _a.annotations) == null ? void 0 : _b[TECHDOCS_ANNOTATION]);\n};\nconst Router = () => {\n  return /* @__PURE__ */ React.createElement(Routes, null, /* @__PURE__ */ React.createElement(Route, {\n    path: \"/\",\n    element: /* @__PURE__ */ React.createElement(TechDocsIndexPage, null)\n  }), /* @__PURE__ */ React.createElement(Route, {\n    path: \"/:namespace/:kind/:name/*\",\n    element: /* @__PURE__ */ React.createElement(TechDocsReaderPage$1, null)\n  }));\n};\nconst EmbeddedDocsRouter = (props) => {\n  var _a;\n  const { children } = props;\n  const { entity } = useEntity();\n  const projectId = (_a = entity.metadata.annotations) == null ? void 0 : _a[TECHDOCS_ANNOTATION];\n  if (!projectId) {\n    return /* @__PURE__ */ React.createElement(MissingAnnotationEmptyState, {\n      annotation: TECHDOCS_ANNOTATION\n    });\n  }\n  return /* @__PURE__ */ React.createElement(FlatRoutes, null, /* @__PURE__ */ React.createElement(Route, {\n    path: \"/*\",\n    element: /* @__PURE__ */ React.createElement(EntityPageDocs, {\n      entity\n    })\n  }, children));\n};\n\nvar Router$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  isTechDocsAvailable: isTechDocsAvailable,\n  Router: Router,\n  EmbeddedDocsRouter: EmbeddedDocsRouter\n});\n\nexport { isTechDocsAvailable as A, Router as B, EmbeddedDocsRouter as C, DocsTable as D, EntityTechdocsContent as E, Reader as R, TechDocsPageWrapper as T, DocsCardGrid as a, TechDocsReaderPage$1 as b, TechDocsReaderLayout as c, TechDocsCustomHome as d, TechDocsIndexPage$2 as e, TechdocsPage as f, TechDocsReaderPage as g, techdocsStorageApiRef as h, techdocsApiRef as i, TechDocsClient as j, TechDocsStorageClient as k, TechDocsReaderPageHeader as l, TechDocsReaderPageContent as m, TechDocsReaderProvider as n, useTechDocsReaderDom as o, TechDocsReaderPageSubheader as p, TechDocsStateIndicator as q, TechDocsSearchResultListItem as r, TechDocsSearch as s, techdocsPlugin as t, useTechDocsReader as u, EntityListDocsGrid as v, withTechDocsReaderProvider as w, EntityListDocsTable as x, DefaultTechDocsHome as y, TechDocsPicker as z };\n//# sourceMappingURL=index-cb910cad.esm.js.map\n","import { createRouteRef, createPlugin, createRoutableExtension, useRouteRef, useApi, SessionState, googleAuthApiRef, microsoftAuthApiRef, githubAuthApiRef, gitlabAuthApiRef, oktaAuthApiRef, bitbucketAuthApiRef, oneloginAuthApiRef, atlassianAuthApiRef, configApiRef, featureFlagsApiRef, FeatureFlagState, identityApiRef, alertApiRef, appThemeApiRef, attachComponentData, useElementFilter } from '@backstage/core-plugin-api';\nimport React, { useState, useEffect, useCallback, useContext, cloneElement } from 'react';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport { SidebarItem, EmptyState, CodeSnippet, InfoCard, sidebarConfig, SidebarPinStateContext, Page, Header, TabbedLayout } from '@backstage/core-components';\nimport { useOutlet } from 'react-router';\nimport { Typography, Button, ListItem, ListItemIcon, ListItemText, Tooltip, ListItemSecondaryAction, List, Switch, Grid, TextField, IconButton, makeStyles, Avatar, Menu, MenuItem } from '@material-ui/core';\nimport Star from '@material-ui/icons/Star';\nimport ClearIcon from '@material-ui/icons/Clear';\nimport useAsync from 'react-use/lib/useAsync';\nimport SignOutIcon from '@material-ui/icons/MeetingRoom';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport useObservable from 'react-use/lib/useObservable';\nimport AutoIcon from '@material-ui/icons/BrightnessAuto';\nimport ToggleButton from '@material-ui/lab/ToggleButton';\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup';\n\nconst settingsRouteRef = createRouteRef({\n  id: \"user-settings\"\n});\nconst userSettingsPlugin = createPlugin({\n  id: \"user-settings\",\n  routes: {\n    settingsPage: settingsRouteRef\n  }\n});\nconst UserSettingsPage = userSettingsPlugin.provide(createRoutableExtension({\n  name: \"UserSettingsPage\",\n  component: () => Promise.resolve().then(function () { return SettingsPage$1; }).then((m) => m.SettingsPage),\n  mountPoint: settingsRouteRef\n}));\n\nconst Settings = (props) => {\n  const routePath = useRouteRef(settingsRouteRef);\n  const Icon = props.icon ? props.icon : SettingsIcon;\n  return /* @__PURE__ */ React.createElement(SidebarItem, {\n    text: \"Settings\",\n    to: routePath(),\n    icon: Icon\n  });\n};\n\nconst EXAMPLE$1 = `auth:\n  providers:\n    google:\n      development:\n        clientId: \\${AUTH_GOOGLE_CLIENT_ID}\n        clientSecret: \\${AUTH_GOOGLE_CLIENT_SECRET}\n`;\nconst EmptyProviders = () => /* @__PURE__ */ React.createElement(EmptyState, {\n  missing: \"content\",\n  title: \"No Authentication Providers\",\n  description: \"You can add Authentication Providers to Backstage which allows you to use these providers to authenticate yourself.\",\n  action: /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"body1\"\n  }, \"Open \", /* @__PURE__ */ React.createElement(\"code\", null, \"app-config.yaml\"), \" and make the changes as highlighted below:\"), /* @__PURE__ */ React.createElement(CodeSnippet, {\n    text: EXAMPLE$1,\n    language: \"yaml\",\n    showLineNumbers: true,\n    highlightedNumbers: [3, 4, 5, 6, 7, 8],\n    customStyle: { background: \"inherit\", fontSize: \"115%\" }\n  }), /* @__PURE__ */ React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    href: \"https://backstage.io/docs/auth/add-auth-provider\"\n  }, \"Read More\"))\n});\n\nconst ProviderSettingsItem = ({\n  title,\n  description,\n  icon: Icon,\n  apiRef\n}) => {\n  const api = useApi(apiRef);\n  const [signedIn, setSignedIn] = useState(false);\n  useEffect(() => {\n    let didCancel = false;\n    const subscription = api.sessionState$().subscribe((sessionState) => {\n      if (!didCancel) {\n        setSignedIn(sessionState === SessionState.SignedIn);\n      }\n    });\n    return () => {\n      didCancel = true;\n      subscription.unsubscribe();\n    };\n  }, [api]);\n  return /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Icon, null)), /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: title,\n    secondary: /* @__PURE__ */ React.createElement(Tooltip, {\n      placement: \"top\",\n      arrow: true,\n      title: description\n    }, /* @__PURE__ */ React.createElement(\"span\", null, description)),\n    secondaryTypographyProps: { noWrap: true, style: { width: \"80%\" } }\n  }), /* @__PURE__ */ React.createElement(ListItemSecondaryAction, null, /* @__PURE__ */ React.createElement(Tooltip, {\n    placement: \"top\",\n    arrow: true,\n    title: signedIn ? `Sign out from ${title}` : `Sign in to ${title}`\n  }, /* @__PURE__ */ React.createElement(Button, {\n    variant: \"outlined\",\n    color: \"primary\",\n    onClick: () => signedIn ? api.signOut() : api.signIn()\n  }, signedIn ? `Sign out` : `Sign in`))));\n};\n\nconst DefaultProviderSettings = ({ configuredProviders }) => /* @__PURE__ */ React.createElement(React.Fragment, null, configuredProviders.includes(\"google\") && /* @__PURE__ */ React.createElement(ProviderSettingsItem, {\n  title: \"Google\",\n  description: \"Provides authentication towards Google APIs and identities\",\n  apiRef: googleAuthApiRef,\n  icon: Star\n}), configuredProviders.includes(\"microsoft\") && /* @__PURE__ */ React.createElement(ProviderSettingsItem, {\n  title: \"Microsoft\",\n  description: \"Provides authentication towards Microsoft APIs and identities\",\n  apiRef: microsoftAuthApiRef,\n  icon: Star\n}), configuredProviders.includes(\"github\") && /* @__PURE__ */ React.createElement(ProviderSettingsItem, {\n  title: \"GitHub\",\n  description: \"Provides authentication towards GitHub APIs\",\n  apiRef: githubAuthApiRef,\n  icon: Star\n}), configuredProviders.includes(\"gitlab\") && /* @__PURE__ */ React.createElement(ProviderSettingsItem, {\n  title: \"GitLab\",\n  description: \"Provides authentication towards GitLab APIs\",\n  apiRef: gitlabAuthApiRef,\n  icon: Star\n}), configuredProviders.includes(\"okta\") && /* @__PURE__ */ React.createElement(ProviderSettingsItem, {\n  title: \"Okta\",\n  description: \"Provides authentication towards Okta APIs\",\n  apiRef: oktaAuthApiRef,\n  icon: Star\n}), configuredProviders.includes(\"bitbucket\") && /* @__PURE__ */ React.createElement(ProviderSettingsItem, {\n  title: \"Bitbucket\",\n  description: \"Provides authentication towards Bitbucket APIs\",\n  apiRef: bitbucketAuthApiRef,\n  icon: Star\n}), configuredProviders.includes(\"onelogin\") && /* @__PURE__ */ React.createElement(ProviderSettingsItem, {\n  title: \"OneLogin\",\n  description: \"Provides authentication towards OneLogin APIs\",\n  apiRef: oneloginAuthApiRef,\n  icon: Star\n}), configuredProviders.includes(\"atlassian\") && /* @__PURE__ */ React.createElement(ProviderSettingsItem, {\n  title: \"Atlassian\",\n  description: \"Provides authentication towards Atlassian APIs\",\n  apiRef: atlassianAuthApiRef,\n  icon: Star\n}));\n\nconst UserSettingsAuthProviders = ({ providerSettings }) => {\n  const configApi = useApi(configApiRef);\n  const providersConfig = configApi.getOptionalConfig(\"auth.providers\");\n  const configuredProviders = (providersConfig == null ? void 0 : providersConfig.keys()) || [];\n  const providers = providerSettings != null ? providerSettings : /* @__PURE__ */ React.createElement(DefaultProviderSettings, {\n    configuredProviders\n  });\n  if (!providerSettings && !(configuredProviders == null ? void 0 : configuredProviders.length)) {\n    return /* @__PURE__ */ React.createElement(EmptyProviders, null);\n  }\n  return /* @__PURE__ */ React.createElement(InfoCard, {\n    title: \"Available Providers\"\n  }, /* @__PURE__ */ React.createElement(List, {\n    dense: true\n  }, providers));\n};\n\nconst EXAMPLE = `import { createPlugin } from '@backstage/core-plugin-api';\n\nexport default createPlugin({\n  id: 'plugin-name',\n  featureFlags: [{ name: 'enable-example-feature' }],\n});\n`;\nconst EmptyFlags = () => /* @__PURE__ */ React.createElement(EmptyState, {\n  missing: \"content\",\n  title: \"No Feature Flags\",\n  description: \"Feature Flags make it possible for plugins to register features in Backstage for users to opt into. You can use this to split out logic in your code for manual A/B testing, etc.\",\n  action: /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"body1\"\n  }, \"An example for how to add a feature flag is highlighted below:\"), /* @__PURE__ */ React.createElement(CodeSnippet, {\n    text: EXAMPLE,\n    language: \"typescript\",\n    showLineNumbers: true,\n    highlightedNumbers: [6],\n    customStyle: { background: \"inherit\", fontSize: \"115%\" }\n  }), /* @__PURE__ */ React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    href: \"https://backstage.io/docs/api/utility-apis\"\n  }, \"Read More\"))\n});\n\nconst FlagItem = ({ flag, enabled, toggleHandler }) => /* @__PURE__ */ React.createElement(ListItem, {\n  divider: true,\n  button: true,\n  onClick: () => toggleHandler(flag.name)\n}, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(Tooltip, {\n  placement: \"top\",\n  arrow: true,\n  title: enabled ? \"Disable\" : \"Enable\"\n}, /* @__PURE__ */ React.createElement(Switch, {\n  color: \"primary\",\n  checked: enabled,\n  name: flag.name\n}))), /* @__PURE__ */ React.createElement(ListItemText, {\n  primary: flag.name,\n  secondary: `Registered in ${flag.pluginId} plugin`\n}));\n\nconst UserSettingsFeatureFlags = () => {\n  const featureFlagsApi = useApi(featureFlagsApiRef);\n  const featureFlags = featureFlagsApi.getRegisteredFlags();\n  const initialFlagState = Object.fromEntries(featureFlags.map(({ name }) => [name, featureFlagsApi.isActive(name)]));\n  const [state, setState] = useState(initialFlagState);\n  const [filterInput, setFilterInput] = useState(\"\");\n  const inputRef = React.useRef();\n  const toggleFlag = useCallback((flagName) => {\n    const newState = featureFlagsApi.isActive(flagName) ? FeatureFlagState.None : FeatureFlagState.Active;\n    featureFlagsApi.save({\n      states: { [flagName]: newState },\n      merge: true\n    });\n    setState((prevState) => ({\n      ...prevState,\n      [flagName]: newState === FeatureFlagState.Active\n    }));\n  }, [featureFlagsApi]);\n  if (!featureFlags.length) {\n    return /* @__PURE__ */ React.createElement(EmptyFlags, null);\n  }\n  const clearFilterInput = () => {\n    var _a;\n    setFilterInput(\"\");\n    (_a = inputRef == null ? void 0 : inputRef.current) == null ? void 0 : _a.focus();\n  };\n  let filteredFeatureFlags = Array.from(featureFlags);\n  const filterInputParts = filterInput.split(/\\s/).map((part) => part.trim().toLocaleLowerCase(\"en-US\"));\n  filterInputParts.forEach((part) => filteredFeatureFlags = filteredFeatureFlags.filter((featureFlag) => featureFlag.name.toLocaleLowerCase(\"en-US\").includes(part)));\n  const Header = () => /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    style: { justifyContent: \"space-between\" }\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    md: 8\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"h5\"\n  }, \"Feature Flags\")), featureFlags.length >= 10 && /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    md: 4\n  }, /* @__PURE__ */ React.createElement(TextField, {\n    label: \"Filter\",\n    style: { display: \"flex\", justifyContent: \"flex-end\" },\n    inputRef: (ref) => ref && ref.focus(),\n    InputProps: {\n      ...filterInput.length && {\n        endAdornment: /* @__PURE__ */ React.createElement(IconButton, {\n          \"aria-label\": \"Clear filter\",\n          onClick: clearFilterInput,\n          edge: \"end\"\n        }, /* @__PURE__ */ React.createElement(ClearIcon, null))\n      }\n    },\n    onChange: (e) => setFilterInput(e.target.value),\n    value: filterInput\n  })));\n  return /* @__PURE__ */ React.createElement(InfoCard, {\n    title: /* @__PURE__ */ React.createElement(Header, null)\n  }, /* @__PURE__ */ React.createElement(List, {\n    dense: true\n  }, filteredFeatureFlags.map((featureFlag) => {\n    const enabled = Boolean(state[featureFlag.name]);\n    return /* @__PURE__ */ React.createElement(FlagItem, {\n      key: featureFlag.name,\n      flag: featureFlag,\n      enabled,\n      toggleHandler: toggleFlag\n    });\n  })));\n};\n\nconst useUserProfile = () => {\n  var _a;\n  const identityApi = useApi(identityApiRef);\n  const alertApi = useApi(alertApiRef);\n  const { value, loading, error } = useAsync(async () => {\n    return {\n      profile: await identityApi.getProfileInfo(),\n      identity: await identityApi.getBackstageIdentity()\n    };\n  }, []);\n  useEffect(() => {\n    if (error) {\n      alertApi.post({\n        message: `Failed to load user identity: ${error}`,\n        severity: \"error\"\n      });\n    }\n  }, [error, alertApi]);\n  if (loading || error) {\n    return {\n      profile: {},\n      displayName: \"\",\n      loading\n    };\n  }\n  return {\n    profile: value.profile,\n    displayName: (_a = value.profile.displayName) != null ? _a : value.identity.userEntityRef,\n    loading\n  };\n};\n\nconst useStyles$1 = makeStyles((theme) => ({\n  avatar: {\n    width: ({ size }) => size,\n    height: ({ size }) => size,\n    fontSize: ({ size }) => size * 0.7,\n    border: `1px solid ${theme.palette.textSubtle}`\n  }\n}));\nconst UserSettingsSignInAvatar = ({ size }) => {\n  const { iconSize } = sidebarConfig;\n  const classes = useStyles$1(size ? { size } : { size: iconSize });\n  const { profile } = useUserProfile();\n  return /* @__PURE__ */ React.createElement(Avatar, {\n    src: profile.picture,\n    className: classes.avatar\n  });\n};\n\nconst UserSettingsMenu = () => {\n  const identityApi = useApi(identityApiRef);\n  const [open, setOpen] = React.useState(false);\n  const [anchorEl, setAnchorEl] = React.useState(void 0);\n  const handleOpen = (event) => {\n    setAnchorEl(event.currentTarget);\n    setOpen(true);\n  };\n  const handleClose = () => {\n    setAnchorEl(void 0);\n    setOpen(false);\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(IconButton, {\n    \"data-testid\": \"user-settings-menu\",\n    \"aria-label\": \"more\",\n    onClick: handleOpen\n  }, /* @__PURE__ */ React.createElement(MoreVertIcon, null)), /* @__PURE__ */ React.createElement(Menu, {\n    anchorEl,\n    open,\n    onClose: handleClose\n  }, /* @__PURE__ */ React.createElement(MenuItem, {\n    \"data-testid\": \"sign-out\",\n    onClick: () => identityApi.signOut()\n  }, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(SignOutIcon, null)), \"Sign Out\")));\n};\n\nconst UserSettingsProfileCard = () => {\n  const { profile, displayName } = useUserProfile();\n  return /* @__PURE__ */ React.createElement(InfoCard, {\n    title: \"Profile\",\n    variant: \"gridItem\"\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    spacing: 6\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React.createElement(UserSettingsSignInAvatar, {\n    size: 96\n  })), /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: true,\n    container: true\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: true,\n    container: true,\n    direction: \"column\",\n    spacing: 2\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: true\n  }, /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"subtitle1\",\n    gutterBottom: true\n  }, displayName), /* @__PURE__ */ React.createElement(Typography, {\n    variant: \"body2\",\n    color: \"textSecondary\"\n  }, profile.email))), /* @__PURE__ */ React.createElement(Grid, {\n    item: true\n  }, /* @__PURE__ */ React.createElement(UserSettingsMenu, null)))));\n};\n\nconst UserSettingsPinToggle = () => {\n  const { isPinned, toggleSidebarPinState } = useContext(SidebarPinStateContext);\n  return /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemText, {\n    primary: \"Pin Sidebar\",\n    secondary: \"Prevent the sidebar from collapsing\"\n  }), /* @__PURE__ */ React.createElement(ListItemSecondaryAction, null, /* @__PURE__ */ React.createElement(Tooltip, {\n    placement: \"top\",\n    arrow: true,\n    title: `${isPinned ? \"Unpin\" : \"Pin\"} Sidebar`\n  }, /* @__PURE__ */ React.createElement(Switch, {\n    color: \"primary\",\n    checked: isPinned,\n    onChange: () => toggleSidebarPinState(),\n    name: \"pin\",\n    inputProps: { \"aria-label\": \"Pin Sidebar Switch\" }\n  }))));\n};\n\nconst ThemeIcon = ({ id, activeId, icon }) => icon ? cloneElement(icon, {\n  color: activeId === id ? \"primary\" : void 0\n}) : /* @__PURE__ */ React.createElement(AutoIcon, {\n  color: activeId === id ? \"primary\" : void 0\n});\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    width: \"100%\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    paddingBottom: 8,\n    paddingRight: 16\n  },\n  list: {\n    width: \"initial\",\n    [theme.breakpoints.down(\"xs\")]: {\n      width: \"100%\",\n      padding: `0 0 12px`\n    }\n  },\n  listItemText: {\n    paddingRight: 0,\n    paddingLeft: 0\n  },\n  listItemSecondaryAction: {\n    position: \"relative\",\n    transform: \"unset\",\n    top: \"auto\",\n    right: \"auto\",\n    paddingLeft: 16,\n    [theme.breakpoints.down(\"xs\")]: {\n      paddingLeft: 0\n    }\n  }\n}));\nconst TooltipToggleButton = ({\n  children,\n  title,\n  value,\n  ...props\n}) => /* @__PURE__ */ React.createElement(Tooltip, {\n  placement: \"top\",\n  arrow: true,\n  title\n}, /* @__PURE__ */ React.createElement(ToggleButton, {\n  value,\n  ...props\n}, children));\nconst UserSettingsThemeToggle = () => {\n  const classes = useStyles();\n  const appThemeApi = useApi(appThemeApiRef);\n  const themeId = useObservable(appThemeApi.activeThemeId$(), appThemeApi.getActiveThemeId());\n  const themeIds = appThemeApi.getInstalledThemes();\n  const handleSetTheme = (_event, newThemeId) => {\n    if (themeIds.some((t) => t.id === newThemeId)) {\n      appThemeApi.setActiveThemeId(newThemeId);\n    } else {\n      appThemeApi.setActiveThemeId(void 0);\n    }\n  };\n  return /* @__PURE__ */ React.createElement(ListItem, {\n    className: classes.list,\n    classes: { container: classes.container }\n  }, /* @__PURE__ */ React.createElement(ListItemText, {\n    className: classes.listItemText,\n    primary: \"Theme\",\n    secondary: \"Change the theme mode\"\n  }), /* @__PURE__ */ React.createElement(ListItemSecondaryAction, {\n    className: classes.listItemSecondaryAction\n  }, /* @__PURE__ */ React.createElement(ToggleButtonGroup, {\n    exclusive: true,\n    size: \"small\",\n    value: themeId != null ? themeId : \"auto\",\n    onChange: handleSetTheme\n  }, themeIds.map((theme) => {\n    var _a;\n    const themeIcon = (_a = themeIds.find((t) => t.id === theme.id)) == null ? void 0 : _a.icon;\n    return /* @__PURE__ */ React.createElement(TooltipToggleButton, {\n      key: theme.id,\n      title: `Select ${theme.title}`,\n      value: theme.id\n    }, /* @__PURE__ */ React.createElement(React.Fragment, null, theme.title, \"\\xA0\", /* @__PURE__ */ React.createElement(ThemeIcon, {\n      id: theme.id,\n      icon: themeIcon,\n      activeId: themeId\n    })));\n  }), /* @__PURE__ */ React.createElement(Tooltip, {\n    placement: \"top\",\n    arrow: true,\n    title: \"Select auto theme\"\n  }, /* @__PURE__ */ React.createElement(ToggleButton, {\n    value: \"auto\",\n    selected: themeId === void 0\n  }, \"Auto\\xA0\", /* @__PURE__ */ React.createElement(AutoIcon, {\n    color: themeId === void 0 ? \"primary\" : void 0\n  }))))));\n};\n\nconst UserSettingsAppearanceCard = () => {\n  const { isMobile } = useContext(SidebarPinStateContext);\n  return /* @__PURE__ */ React.createElement(InfoCard, {\n    title: \"Appearance\",\n    variant: \"gridItem\"\n  }, /* @__PURE__ */ React.createElement(List, {\n    dense: true\n  }, /* @__PURE__ */ React.createElement(UserSettingsThemeToggle, null), !isMobile && /* @__PURE__ */ React.createElement(UserSettingsPinToggle, null)));\n};\n\nconst UserSettingsGeneral = () => {\n  return /* @__PURE__ */ React.createElement(Grid, {\n    container: true,\n    direction: \"row\",\n    spacing: 3\n  }, /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    md: 6\n  }, /* @__PURE__ */ React.createElement(UserSettingsProfileCard, null)), /* @__PURE__ */ React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    md: 6\n  }, /* @__PURE__ */ React.createElement(UserSettingsAppearanceCard, null)));\n};\n\nconst USER_SETTINGS_TAB_KEY = \"user-settings.tab\";\nconst UserSettingsTab = (props) => {\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, props.children);\n};\nattachComponentData(UserSettingsTab, USER_SETTINGS_TAB_KEY, \"UserSettingsTab\");\n\nconst SettingsPage = ({ providerSettings }) => {\n  const { isMobile } = useContext(SidebarPinStateContext);\n  const outlet = useOutlet();\n  const tabs = useElementFilter(outlet, (elements) => elements.selectByComponentData({\n    key: USER_SETTINGS_TAB_KEY\n  }).getElements());\n  return /* @__PURE__ */ React.createElement(Page, {\n    themeId: \"home\"\n  }, !isMobile && /* @__PURE__ */ React.createElement(Header, {\n    title: \"Settings\"\n  }), /* @__PURE__ */ React.createElement(TabbedLayout, null, /* @__PURE__ */ React.createElement(TabbedLayout.Route, {\n    path: \"general\",\n    title: \"General\"\n  }, /* @__PURE__ */ React.createElement(UserSettingsGeneral, null)), /* @__PURE__ */ React.createElement(TabbedLayout.Route, {\n    path: \"auth-providers\",\n    title: \"Authentication Providers\"\n  }, /* @__PURE__ */ React.createElement(UserSettingsAuthProviders, {\n    providerSettings\n  })), /* @__PURE__ */ React.createElement(TabbedLayout.Route, {\n    path: \"feature-flags\",\n    title: \"Feature Flags\"\n  }, /* @__PURE__ */ React.createElement(UserSettingsFeatureFlags, null)), tabs.map((child, i) => /* @__PURE__ */ React.createElement(TabbedLayout.Route, {\n    key: i,\n    ...child.props\n  }, child))));\n};\n\nvar SettingsPage$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  SettingsPage: SettingsPage\n});\n\nexport { DefaultProviderSettings, ProviderSettingsItem, SettingsPage as Router, Settings, USER_SETTINGS_TAB_KEY, UserSettingsAppearanceCard, UserSettingsAuthProviders, UserSettingsFeatureFlags, UserSettingsGeneral, UserSettingsMenu, UserSettingsPage, UserSettingsPinToggle, UserSettingsProfileCard, UserSettingsSignInAvatar, UserSettingsTab, UserSettingsThemeToggle, userSettingsPlugin as plugin, useUserProfile, userSettingsPlugin };\n//# sourceMappingURL=index.esm.js.map\n","import { createTheme as createTheme$1 } from '@material-ui/core/styles';\nimport { darken, lighten } from '@material-ui/core/styles/colorManipulator';\nimport { yellow } from '@material-ui/core/colors';\n\nconst shapes = {\n  wave: `url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1368' height='401' x='0' y='0' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M437 116C223 116 112 0 112 0h1256v400c-82 0-225-21-282-109-112-175-436-175-649-175z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1368 400V282C891-29 788 40 711 161 608 324 121 372 0 361v39h1368z'/%3e%3cpath fill='url(%23paint2_linear)' d='M1368 244v156H0V94c92-24 198-46 375 0l135 41c176 51 195 109 858 109z'/%3e%3cpath fill='url(%23paint3_linear)' d='M1252 400h116c-14-7-35-14-116-16-663-14-837-128-1013-258l-85-61C98 28 46 8 0 0v400h1252z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M-172-98h1671v601H-172z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='602' x2='1093.5' y1='-960.5' y2='272' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='482' x2='480' y1='1058.5' y2='70.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='424' x2='446.1' y1='-587.5' y2='274.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='587' x2='349' y1='-1120.5' y2='341' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\")`,\n  wave2: `url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1764' height='479' x='-229' y='-6' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M0 400h1350C1321 336 525 33 179-2c-345-34-395 236-408 402H0z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1378 177v223H0V217s219 75 327 52C436 246 717-35 965 45s254 144 413 132z'/%3e%3cpath fill='url(%23paint2_linear)' d='M26 400l-78-16c-170 205-44-6-137-30l-4-1 4 1 137 30c37-45 89-110 159-201 399-514-45 238 1176-50 275-65 354-39 91 267H26z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='431' x2='397.3' y1='-599' y2='372.8' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='236.5' x2='446.6' y1='-586' y2='381.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='851.8' x2='640.4' y1='-867.2' y2='363.7' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\")`,\n  round: `url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='2269' height='1408' x='-610' y='-509' maskUnits='userSpaceOnUse'%3e%3ccircle cx='1212.8' cy='74.8' r='317.5' fill='url(%23paint0_linear)' transform='rotate(-52 1213 75)'/%3e%3ccircle cx='737.8' cy='445.8' r='317.5' fill='url(%23paint1_linear)' transform='rotate(-116 738 446)'/%3e%3ccircle cx='601.8' cy='52.8' r='418.6' fill='url(%23paint2_linear)' transform='rotate(-117 602 53)'/%3e%3ccircle cx='999.8' cy='364' r='389.1' fill='url(%23paint3_linear)' transform='rotate(31 1000 364)'/%3e%3cellipse cx='-109.2' cy='263.5' fill='url(%23paint4_linear)' rx='429.2' ry='465.8' transform='rotate(-85 -109 264)'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='1301.2' x2='161.4' y1='-1879.7' y2='-969.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='826.2' x2='-313.6' y1='-1508.7' y2='-598.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='718.4' x2='-784.3' y1='-2524' y2='-1324.2' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='1108.2' x2='-288.6' y1='-2031.1' y2='-915.9' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint4_linear' x1='10.4' x2='-1626.5' y1='-2603.8' y2='-1399.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\")`\n};\nconst colorVariants = {\n  darkGrey: [\"#171717\", \"#383838\"],\n  marineBlue: [\"#006D8F\", \"#0049A1\"],\n  veryBlue: [\"#0027AF\", \"#270094\"],\n  rubyRed: [\"#98002B\", \"#8D1134\"],\n  toastyOrange: [\"#BE2200\", \"#A41D00\"],\n  purpleSky: [\"#8912CA\", \"#3E00EA\"],\n  eveningSea: [\"#00FFF2\", \"#035355\"],\n  teal: [\"#005B4B\"],\n  pinkSea: [\"#C8077A\", \"#C2297D\"]\n};\nfunction genPageTheme(colors, shape) {\n  const gradientColors = colors.length === 1 ? [colors[0], colors[0]] : colors;\n  const gradient = `linear-gradient(90deg, ${gradientColors.join(\", \")})`;\n  const backgroundImage = `${shape},  ${gradient}`;\n  return { colors, shape, backgroundImage };\n}\nconst pageTheme = {\n  home: genPageTheme(colorVariants.teal, shapes.wave),\n  documentation: genPageTheme(colorVariants.pinkSea, shapes.wave2),\n  tool: genPageTheme(colorVariants.purpleSky, shapes.round),\n  service: genPageTheme(colorVariants.marineBlue, shapes.wave),\n  website: genPageTheme(colorVariants.veryBlue, shapes.wave),\n  library: genPageTheme(colorVariants.rubyRed, shapes.wave),\n  other: genPageTheme(colorVariants.darkGrey, shapes.wave),\n  app: genPageTheme(colorVariants.toastyOrange, shapes.wave),\n  apis: genPageTheme(colorVariants.teal, shapes.wave2)\n};\n\nconst DEFAULT_FONT_FAMILY = '\"Helvetica Neue\", Helvetica, Roboto, Arial, sans-serif';\nfunction createThemeOptions(options) {\n  const {\n    palette,\n    fontFamily = DEFAULT_FONT_FAMILY,\n    defaultPageTheme,\n    pageTheme: pageTheme$1 = pageTheme\n  } = options;\n  if (!pageTheme$1[defaultPageTheme]) {\n    throw new Error(`${defaultPageTheme} is not defined in pageTheme.`);\n  }\n  return {\n    palette,\n    props: {\n      MuiGrid: {\n        spacing: 2\n      },\n      MuiSwitch: {\n        color: \"primary\"\n      }\n    },\n    typography: {\n      fontFamily,\n      h5: {\n        fontWeight: 700\n      },\n      h4: {\n        fontWeight: 700,\n        fontSize: 28,\n        marginBottom: 6\n      },\n      h3: {\n        fontSize: 32,\n        fontWeight: 700,\n        marginBottom: 6\n      },\n      h2: {\n        fontSize: 40,\n        fontWeight: 700,\n        marginBottom: 8\n      },\n      h1: {\n        fontSize: 54,\n        fontWeight: 700,\n        marginBottom: 10\n      }\n    },\n    page: pageTheme$1[defaultPageTheme],\n    getPageTheme: ({ themeId }) => {\n      var _a;\n      return (_a = pageTheme$1[themeId]) != null ? _a : pageTheme$1[defaultPageTheme];\n    }\n  };\n}\nfunction createThemeOverrides(theme) {\n  return {\n    MuiCssBaseline: {\n      \"@global\": {\n        html: {\n          height: \"100%\",\n          fontFamily: theme.typography.fontFamily\n        },\n        body: {\n          height: \"100%\",\n          fontFamily: theme.typography.fontFamily,\n          \"overscroll-behavior-y\": \"none\"\n        },\n        a: {\n          color: \"inherit\",\n          textDecoration: \"none\"\n        }\n      }\n    },\n    MuiTableRow: {\n      root: {\n        \"&:nth-of-type(odd)\": {\n          backgroundColor: theme.palette.background.default\n        }\n      },\n      hover: {\n        \"&:hover\": {\n          cursor: \"pointer\"\n        }\n      },\n      head: {\n        \"&:nth-of-type(odd)\": {\n          backgroundColor: theme.palette.background.paper\n        }\n      }\n    },\n    MuiTableCell: {\n      root: {\n        wordBreak: \"break-word\",\n        overflow: \"hidden\",\n        verticalAlign: \"middle\",\n        lineHeight: \"1\",\n        margin: 0,\n        padding: theme.spacing(3, 2, 3, 2.5),\n        borderBottom: 0\n      },\n      sizeSmall: {\n        padding: theme.spacing(1.5, 2, 1.5, 2.5)\n      },\n      head: {\n        wordBreak: \"break-word\",\n        overflow: \"hidden\",\n        color: \"rgb(179, 179, 179)\",\n        fontWeight: \"normal\",\n        lineHeight: \"1\"\n      }\n    },\n    MuiTabs: {\n      root: {\n        minHeight: 24\n      }\n    },\n    MuiTab: {\n      root: {\n        color: theme.palette.link,\n        minHeight: 24,\n        textTransform: \"initial\",\n        letterSpacing: \"0.07em\",\n        \"&:hover\": {\n          color: darken(theme.palette.link, 0.3),\n          background: lighten(theme.palette.link, 0.95)\n        },\n        [theme.breakpoints.up(\"md\")]: {\n          minWidth: 120,\n          fontSize: theme.typography.pxToRem(14),\n          fontWeight: 500\n        }\n      },\n      textColorPrimary: {\n        color: theme.palette.link\n      }\n    },\n    MuiTableSortLabel: {\n      root: {\n        color: \"inherit\",\n        \"&:hover\": {\n          color: \"inherit\"\n        },\n        \"&:focus\": {\n          color: \"inherit\"\n        }\n      },\n      active: {\n        fontWeight: \"bold\",\n        color: \"inherit\"\n      }\n    },\n    MuiListItemText: {\n      dense: {\n        whiteSpace: \"nowrap\",\n        overflow: \"hidden\",\n        textOverflow: \"ellipsis\"\n      }\n    },\n    MuiButton: {\n      text: {\n        padding: void 0\n      }\n    },\n    MuiChip: {\n      root: {\n        backgroundColor: \"#D9D9D9\",\n        marginRight: theme.spacing(1),\n        marginBottom: theme.spacing(1),\n        color: theme.palette.grey[900]\n      },\n      outlined: {\n        color: theme.palette.text.primary\n      },\n      label: {\n        lineHeight: `${theme.spacing(2.5)}px`,\n        fontWeight: theme.typography.fontWeightMedium,\n        fontSize: `${theme.spacing(1.75)}px`\n      },\n      labelSmall: {\n        fontSize: `${theme.spacing(1.5)}px`\n      },\n      deleteIcon: {\n        color: theme.palette.grey[500],\n        width: `${theme.spacing(3)}px`,\n        height: `${theme.spacing(3)}px`,\n        margin: `0 ${theme.spacing(0.75)}px 0 -${theme.spacing(0.75)}px`\n      },\n      deleteIconSmall: {\n        width: `${theme.spacing(2)}px`,\n        height: `${theme.spacing(2)}px`,\n        margin: `0 ${theme.spacing(0.5)}px 0 -${theme.spacing(0.5)}px`\n      }\n    },\n    MuiCard: {\n      root: {\n        display: \"flex\",\n        flexDirection: \"column\"\n      }\n    },\n    MuiCardHeader: {\n      root: {\n        paddingBottom: 0\n      }\n    },\n    MuiCardContent: {\n      root: {\n        flexGrow: 1,\n        \"&:last-child\": {\n          paddingBottom: void 0\n        }\n      }\n    },\n    MuiCardActions: {\n      root: {\n        justifyContent: \"flex-end\"\n      }\n    }\n  };\n}\nfunction createTheme(options) {\n  const themeOptions = createThemeOptions(options);\n  const baseTheme = createTheme$1(themeOptions);\n  const overrides = createThemeOverrides(baseTheme);\n  const theme = { ...baseTheme, overrides };\n  return theme;\n}\n\nconst lightTheme = createTheme({\n  palette: {\n    type: \"light\",\n    background: {\n      default: \"#F8F8F8\"\n    },\n    status: {\n      ok: \"#1DB954\",\n      warning: \"#FF9800\",\n      error: \"#E22134\",\n      running: \"#2E77D0\",\n      pending: \"#FFED51\",\n      aborted: \"#757575\"\n    },\n    bursts: {\n      fontColor: \"#FEFEFE\",\n      slackChannelText: \"#ddd\",\n      backgroundColor: {\n        default: \"#7C3699\"\n      },\n      gradient: {\n        linear: \"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)\"\n      }\n    },\n    primary: {\n      main: \"#2E77D0\"\n    },\n    banner: {\n      info: \"#2E77D0\",\n      error: \"#E22134\",\n      text: \"#FFFFFF\",\n      link: \"#000000\",\n      warning: \"#FF9800\"\n    },\n    border: \"#E6E6E6\",\n    textContrast: \"#000000\",\n    textVerySubtle: \"#DDD\",\n    textSubtle: \"#6E6E6E\",\n    highlight: \"#FFFBCC\",\n    errorBackground: \"#FFEBEE\",\n    warningBackground: \"#F59B23\",\n    infoBackground: \"#ebf5ff\",\n    errorText: \"#CA001B\",\n    infoText: \"#004e8a\",\n    warningText: \"#000000\",\n    linkHover: \"#2196F3\",\n    link: \"#0A6EBE\",\n    gold: yellow.A700,\n    navigation: {\n      background: \"#171717\",\n      indicator: \"#9BF0E1\",\n      color: \"#b5b5b5\",\n      selectedColor: \"#FFF\",\n      navItem: {\n        hoverBackground: \"#404040\"\n      },\n      submenu: {\n        background: \"#404040\"\n      }\n    },\n    pinSidebarButton: {\n      icon: \"#181818\",\n      background: \"#BDBDBD\"\n    },\n    tabbar: {\n      indicator: \"#9BF0E1\"\n    }\n  },\n  defaultPageTheme: \"home\",\n  pageTheme\n});\nconst darkTheme = createTheme({\n  palette: {\n    type: \"dark\",\n    background: {\n      default: \"#333333\"\n    },\n    status: {\n      ok: \"#71CF88\",\n      warning: \"#FFB84D\",\n      error: \"#F84C55\",\n      running: \"#3488E3\",\n      pending: \"#FEF071\",\n      aborted: \"#9E9E9E\"\n    },\n    bursts: {\n      fontColor: \"#FEFEFE\",\n      slackChannelText: \"#ddd\",\n      backgroundColor: {\n        default: \"#7C3699\"\n      },\n      gradient: {\n        linear: \"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)\"\n      }\n    },\n    primary: {\n      main: \"#9CC9FF\",\n      dark: \"#82BAFD\"\n    },\n    secondary: {\n      main: \"#FF88B2\"\n    },\n    banner: {\n      info: \"#2E77D0\",\n      error: \"#E22134\",\n      text: \"#FFFFFF\",\n      link: \"#000000\",\n      warning: \"#FF9800\"\n    },\n    border: \"#E6E6E6\",\n    textContrast: \"#FFFFFF\",\n    textVerySubtle: \"#727272\",\n    textSubtle: \"#CCCCCC\",\n    highlight: \"#FFFBCC\",\n    errorBackground: \"#FFEBEE\",\n    warningBackground: \"#F59B23\",\n    infoBackground: \"#ebf5ff\",\n    errorText: \"#CA001B\",\n    infoText: \"#004e8a\",\n    warningText: \"#000000\",\n    linkHover: \"#82BAFD\",\n    link: \"#9CC9FF\",\n    gold: yellow.A700,\n    navigation: {\n      background: \"#424242\",\n      indicator: \"#9BF0E1\",\n      color: \"#b5b5b5\",\n      selectedColor: \"#FFF\",\n      navItem: {\n        hoverBackground: \"#404040\"\n      },\n      submenu: {\n        background: \"#404040\"\n      }\n    },\n    pinSidebarButton: {\n      icon: \"#404040\",\n      background: \"#BDBDBD\"\n    },\n    tabbar: {\n      indicator: \"#9BF0E1\"\n    }\n  },\n  defaultPageTheme: \"home\",\n  pageTheme\n});\n\nexport { colorVariants, createTheme, createThemeOptions, createThemeOverrides, darkTheme, genPageTheme, lightTheme, pageTheme, shapes };\n//# sourceMappingURL=index.esm.js.map\n","import { createContext, useContext } from 'react';\n\nfunction getGlobalObject() {\n  if (typeof window !== \"undefined\" && window.Math === Math) {\n    return window;\n  }\n  if (typeof self !== \"undefined\" && self.Math === Math) {\n    return self;\n  }\n  return Function(\"return this\")();\n}\nconst globalObject = getGlobalObject();\nconst makeKey = (id) => `__@backstage/${id}__`;\nfunction getOrCreateGlobalSingleton(id, supplier) {\n  const key = makeKey(id);\n  let value = globalObject[key];\n  if (value) {\n    return value;\n  }\n  value = supplier();\n  globalObject[key] = value;\n  return value;\n}\n\nfunction createVersionedValueMap(versions) {\n  Object.freeze(versions);\n  return {\n    atVersion(version) {\n      return versions[version];\n    }\n  };\n}\n\nfunction createVersionedContext(key) {\n  return getOrCreateGlobalSingleton(key, () => createContext(void 0));\n}\nfunction useVersionedContext(key) {\n  return useContext(createVersionedContext(key));\n}\nfunction createVersionedContextForTesting(key) {\n  return {\n    set(versions) {\n      globalThis[`__@backstage/${key}__`] = createContext(createVersionedValueMap(versions));\n    },\n    reset() {\n      delete globalThis[`__@backstage/${key}__`];\n    }\n  };\n}\n\nexport { createVersionedContext, createVersionedContextForTesting, createVersionedValueMap, getOrCreateGlobalSingleton, useVersionedContext };\n//# sourceMappingURL=index.esm.js.map\n"],"sourceRoot":""}