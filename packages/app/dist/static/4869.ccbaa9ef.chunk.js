"use strict";(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4869],{54869:function(ee,L,n){n.r(L),n.d(L,{CatalogGraphPage:function(){return ye}});var O=n(34520),g=n(49558),D=n(30705),M=n(73495),P=n(95544),f=n(79692),te=n(42494),N=n(90436),ae=n(20633),ne=n(50581),le=n(61837),F=n(5806),z=n(21324),H=n(86619),oe=n(82938),b=n(60905),re=n(27556),se=n(36444),ie=n(60008),$=n(88013),ce=n(13737),e=n(2784),k=n(10289),p=n(98487),me=n(33375),G=n(19996),V=n(25505),Y=n(38016),Ee=n(64279),_e=n(19126),j=n.n(_e),Q=n(25557),ue=n(72779),Ie=n.n(ue),de=n(14162),Te=n.n(de);const he={[p.Nm.LEFT_RIGHT]:"Left to right",[p.Nm.RIGHT_LEFT]:"Right to left",[p.Nm.TOP_BOTTOM]:"Top to bottom",[p.Nm.BOTTOM_TOP]:"Bottom to top"},ge=({value:a,onChange:o})=>{const t=(0,e.useCallback)(s=>o(s),[o]);return e.createElement(P.Z,{pb:1,pt:1},e.createElement(g.Ph,{label:"Direction",selected:a,items:Object.values(p.Nm).map(s=>({label:he[s],value:s})),onChange:t}))},pe=(0,f.Z)({formControl:{width:"100%",maxWidth:300}}),ve=({value:a,onChange:o})=>{const t=pe(),s=(0,e.useCallback)(E=>{const c=Number(E.target.value);o(c<=0?Number.POSITIVE_INFINITY:c)},[o]),r=(0,e.useCallback)(()=>{o(Number.POSITIVE_INFINITY)},[o]);return e.createElement(P.Z,{pb:1,pt:1},e.createElement(te.Z,{variant:"outlined",className:t.formControl},e.createElement(N.Z,{variant:"button"},"Max Depth"),e.createElement(ae.Z,{type:"number",placeholder:"\u221E Infinite",value:isFinite(a)?a:"",onChange:s,endAdornment:e.createElement(ne.Z,{position:"end"},e.createElement(le.Z,{"aria-label":"clear max depth",onClick:r,edge:"end"},e.createElement(me.Z,null))),inputProps:{"aria-label":"maxp"},labelWidth:0})))},Oe=(0,f.Z)({formControl:{maxWidth:300}}),De=({value:a,onChange:o})=>{const t=Oe(),s=(0,D.h_)(D.$v),r=(0,D.h_)(M.Ah),{error:E,value:c}=(0,Ee.default)(async()=>await r.getEntityFacets({facets:["kind"]}).then(i=>{var _;return((_=i.facets.kind)==null?void 0:_.map(d=>d.value).sort())||[]}));(0,e.useEffect)(()=>{E&&s.post({message:"Failed to load entity kinds",severity:"error"})},[E,s]);const m=(0,e.useMemo)(()=>c&&c.map(i=>i.toLocaleLowerCase("en-US")),[c]),u=(0,e.useCallback)((i,_)=>{o(m&&m.every(d=>_.includes(d))?void 0:_)},[m,o]),h=(0,e.useCallback)(()=>{o(a!=null&&a.length?a:void 0)},[a,o]);return!(c!=null&&c.length)||!(m!=null&&m.length)||E?e.createElement(e.Fragment,null):e.createElement(P.Z,{pb:1,pt:1},e.createElement(N.Z,{variant:"button"},"Kinds"),e.createElement($.ZP,{className:t.formControl,multiple:!0,limitTags:4,disableCloseOnSelect:!0,"aria-label":"Kinds",options:m,value:a!=null?a:m,getOptionLabel:i=>{var _;return(_=c[m.indexOf(i)])!=null?_:i},onChange:u,onBlur:h,renderOption:(i,{selected:_})=>{var d;return e.createElement(F.Z,{control:e.createElement(z.Z,{icon:e.createElement(V.Z,{fontSize:"small"}),checkedIcon:e.createElement(G.Z,{fontSize:"small"}),checked:_}),label:(d=c[m.indexOf(i)])!=null?d:i})},size:"small",popupIcon:e.createElement(Y.Z,{"data-testid":"selected-kinds-expand"}),renderInput:i=>e.createElement(H.Z,{...i,variant:"outlined"})}))},Me=(0,f.Z)({formControl:{maxWidth:300}}),Pe=({relationPairs:a,value:o,onChange:t})=>{const s=Me(),r=(0,e.useMemo)(()=>a.flat(),[a]),E=(0,e.useCallback)((m,u)=>{t(r.every(h=>u.includes(h))?void 0:u)},[r,t]),c=(0,e.useCallback)(()=>{t(o!=null&&o.length?o:void 0)},[o,t]);return e.createElement(P.Z,{pb:1,pt:1},e.createElement(N.Z,{variant:"button"},"Relations"),e.createElement($.ZP,{className:s.formControl,multiple:!0,limitTags:4,disableCloseOnSelect:!0,"aria-label":"Relations",options:r,value:o!=null?o:r,onChange:E,onBlur:c,renderOption:(m,{selected:u})=>e.createElement(F.Z,{control:e.createElement(z.Z,{icon:e.createElement(V.Z,{fontSize:"small"}),checkedIcon:e.createElement(G.Z,{fontSize:"small"}),checked:u}),label:m}),size:"small",popupIcon:e.createElement(Y.Z,{"data-testid":"selected-relations-expand"}),renderInput:m=>e.createElement(H.Z,{...m,variant:"outlined"})}))},fe=(0,f.Z)({root:{width:"100%",maxWidth:300}}),J=({label:a,value:o,onChange:t})=>{const s=fe(),r=(0,e.useCallback)(E=>{t(E.target.checked)},[t]);return e.createElement(P.Z,{pb:1,pt:1},e.createElement(F.Z,{control:e.createElement(oe.Z,{checked:o,onChange:r,name:a,color:"primary"}),label:a,className:s.root}))};function Ce({initialState:a={}}){const o=(0,k.TH)(),t=(0,e.useMemo)(()=>j().parse(o.search,{arrayLimit:0,ignoreQueryPrefix:!0})||{},[o.search]),[s,r]=(0,e.useState)(()=>{var l;return(Array.isArray(t.rootEntityRefs)?t.rootEntityRefs:(l=a==null?void 0:a.rootEntityRefs)!=null?l:[]).map(R=>(0,O.of)(R))}),[E,c]=(0,e.useState)(()=>{var l;return typeof t.maxDepth=="string"?X(t.maxDepth):(l=a==null?void 0:a.maxDepth)!=null?l:Number.POSITIVE_INFINITY}),[m,u]=(0,e.useState)(()=>Array.isArray(t.selectedRelations)?t.selectedRelations:a==null?void 0:a.selectedRelations),[h,i]=(0,e.useState)(()=>{var l;return(l=Array.isArray(t.selectedKinds)?t.selectedKinds:a==null?void 0:a.selectedKinds)==null?void 0:l.map(R=>R.toLocaleLowerCase("en-US"))}),[_,d]=(0,e.useState)(()=>{var l;return typeof t.unidirectional=="string"?t.unidirectional==="true":(l=a==null?void 0:a.unidirectional)!=null?l:!0}),[K,y]=(0,e.useState)(()=>{var l;return typeof t.mergeRelations=="string"?t.mergeRelations==="true":(l=a==null?void 0:a.mergeRelations)!=null?l:!0}),[Z,I]=(0,e.useState)(()=>{var l;return typeof t.direction=="string"?t.direction:(l=a==null?void 0:a.direction)!=null?l:p.Nm.LEFT_RIGHT}),[U,C]=(0,e.useState)(()=>{var l;return typeof t.showFilters=="string"?t.showFilters==="true":(l=a==null?void 0:a.showFilters)!=null?l:!0}),x=(0,e.useCallback)(()=>C(l=>!l),[C]),W=(0,Q.Z)(o.search);(0,e.useEffect)(()=>{o.search!==W&&(Array.isArray(t.rootEntityRefs)&&r(t.rootEntityRefs.map(l=>(0,O.of)(l))),typeof t.maxDepth=="string"&&c(X(t.maxDepth)),Array.isArray(t.selectedKinds)&&i(t.selectedKinds),Array.isArray(t.selectedRelations)&&u(t.selectedRelations),typeof t.unidirectional=="string"&&d(t.unidirectional==="true"),typeof t.mergeRelations=="string"&&y(t.mergeRelations==="true"),typeof t.direction=="string"&&I(t.direction),typeof t.showFilters=="string"&&C(t.showFilters==="true"))},[W,o.search,t,r,c,i,u,d,y,I,C]);const T=(0,Q.Z)(s.map(l=>(0,O.eE)(l)));return(0,e.useEffect)(()=>{const l=s.map(B=>(0,O.eE)(B)),R=j().stringify({rootEntityRefs:l,maxDepth:isFinite(E)?E:"\u221E",selectedKinds:h,selectedRelations:m,unidirectional:_,mergeRelations:K,direction:Z,showFilters:U},{arrayFormat:"brackets",addQueryPrefix:!0}),v=`${window.location.pathname}${R}`;!T||l.length===T.length&&l.every((B,S)=>B===T[S])?window.history.replaceState(null,document.title,v):window.history.pushState(null,document.title,v)},[s,E,h,m,_,K,Z,U,T]),{rootEntityNames:s,setRootEntityNames:r,maxDepth:E,setMaxDepth:c,selectedRelations:m,setSelectedRelations:u,selectedKinds:h,setSelectedKinds:i,unidirectional:_,setUnidirectional:d,mergeRelations:K,setMergeRelations:y,direction:Z,setDirection:I,showFilters:U,toggleShowFilters:x}}function X(a){return a==="\u221E"?Number.POSITIVE_INFINITY:Number(a)}const Re=(0,f.Z)(a=>({content:{minHeight:0},container:{height:"100%",maxHeight:"100%",minHeight:0},fullHeight:{maxHeight:"100%",display:"flex",minHeight:0},graphWrapper:{position:"relative",flex:1,minHeight:0,display:"flex"},graph:{flex:1,minHeight:0},legend:{position:"absolute",bottom:0,right:0,padding:a.spacing(1),"& .icon":{verticalAlign:"bottom"}},filters:{display:"grid",gridGap:a.spacing(1),gridAutoRows:"auto",[a.breakpoints.up("lg")]:{display:"block"},[a.breakpoints.only("md")]:{gridTemplateColumns:"repeat(3, 1fr)"},[a.breakpoints.only("sm")]:{gridTemplateColumns:"repeat(2, 1fr)"},[a.breakpoints.down("xs")]:{gridTemplateColumns:"repeat(1, 1fr)"}}})),ye=a=>{const{relationPairs:o=p.vw,initialState:t}=a,s=(0,k.s0)(),r=Re(),E=(0,D.tg)(M.wi),{maxDepth:c,setMaxDepth:m,selectedKinds:u,setSelectedKinds:h,selectedRelations:i,setSelectedRelations:_,unidirectional:d,setUnidirectional:K,mergeRelations:y,setMergeRelations:Z,direction:I,setDirection:U,rootEntityNames:C,setRootEntityNames:x,showFilters:W,toggleShowFilters:T}=Ce({initialState:t}),l=(0,D.z$)(),R=(0,e.useCallback)((v,B)=>{var S,w;const A=(0,O.of)(v.id);if(B.shiftKey){const q=E({kind:A.kind.toLocaleLowerCase("en-US"),namespace:A.namespace.toLocaleLowerCase("en-US"),name:A.name});l.captureEvent("click",(S=v.title)!=null?S:(0,M.$3)(A),{attributes:{to:q}}),s(q)}else l.captureEvent("click",(w=v.title)!=null?w:(0,M.$3)(A)),x([A])},[E,s,x,l]);return e.createElement(g.T3,{themeId:"home"},e.createElement(g.h4,{title:"Catalog Graph",subtitle:C.map(v=>(0,M.$3)(v)).join(", ")}),e.createElement(g.VY,{stretch:!0,className:r.content},e.createElement(g.yW,{titleComponent:e.createElement(ce.Z,{value:"show filters",selected:W,onChange:()=>T()},e.createElement(se.Z,null)," Filters")},e.createElement(g.qt,null,"Start tracking your component in by adding it to the software catalog.")),e.createElement(b.Z,{container:!0,alignItems:"stretch",className:r.container},W&&e.createElement(b.Z,{item:!0,xs:12,lg:2,className:r.filters},e.createElement(ve,{value:c,onChange:m}),e.createElement(De,{value:u,onChange:h}),e.createElement(Pe,{value:i,onChange:_,relationPairs:o}),e.createElement(ge,{value:I,onChange:U}),e.createElement(J,{value:d,onChange:K,label:"Simplified"}),e.createElement(J,{value:y,onChange:Z,label:"Merge Relations"})),e.createElement(b.Z,{item:!0,xs:!0,className:r.fullHeight},e.createElement(re.Z,{className:r.graphWrapper},e.createElement(N.Z,{variant:"caption",color:"textSecondary",display:"block",className:r.legend},e.createElement(ie.Z,{className:"icon"})," Use pinch & zoom to move around the diagram. Click to change active node, shift click to navigate to entity."),e.createElement(p._U,{rootEntityNames:C,maxDepth:c,kinds:u&&u.length>0?u:void 0,relations:i&&i.length>0?i:void 0,mergeRelations:y,unidirectional:d,onNodeClick:R,direction:I,relationPairs:o,className:r.graph,zoom:"enabled"}))))))}},60008:function(ee,L,n){var O,g=n(14859),D=n(93291);O={value:!0},L.Z=void 0;var M=D(n(2784)),P=g(n(50175)),f=(0,P.default)(M.createElement("path",{d:"M15 3l2.3 2.3-2.89 2.87 1.42 1.42L18.7 6.7 21 9V3h-6zM3 9l2.3-2.3 2.87 2.89 1.42-1.42L6.7 5.3 9 3H3v6zm6 12l-2.3-2.3 2.89-2.87-1.42-1.42L5.3 17.3 3 15v6h6zm12-6l-2.3 2.3-2.87-2.89-1.42 1.42 2.89 2.87L15 21h6v-6z"}),"ZoomOutMap");L.Z=f}}]);})();

//# sourceMappingURL=4869.ccbaa9ef.chunk.js.map